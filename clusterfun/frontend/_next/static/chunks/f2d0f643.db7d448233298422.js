(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{6028:function(i,o,s){var x=s(263).Buffer;self,i.exports=function(){var i={98847:function(i,o,s){"use strict";var x=s(71828),_={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var F in _){var N=F.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");x.addStyleRule(N,_[F])}},98222:function(i,o,s){"use strict";i.exports=s(82887)},27206:function(i,o,s){"use strict";i.exports=s(60822)},59893:function(i,o,s){"use strict";i.exports=s(23381)},5224:function(i,o,s){"use strict";i.exports=s(83832)},59509:function(i,o,s){"use strict";i.exports=s(72201)},75557:function(i,o,s){"use strict";i.exports=s(91815)},40338:function(i,o,s){"use strict";i.exports=s(21462)},35080:function(i,o,s){"use strict";i.exports=s(51319)},61396:function(i,o,s){"use strict";i.exports=s(57516)},40549:function(i,o,s){"use strict";i.exports=s(98128)},49866:function(i,o,s){"use strict";i.exports=s(99442)},36089:function(i,o,s){"use strict";i.exports=s(93740)},19548:function(i,o,s){"use strict";i.exports=s(8729)},35831:function(i,o,s){"use strict";i.exports=s(93814)},61039:function(i,o,s){"use strict";i.exports=s(14382)},97040:function(i,o,s){"use strict";i.exports=s(51759)},77986:function(i,o,s){"use strict";i.exports=s(10421)},24296:function(i,o,s){"use strict";i.exports=s(43102)},58872:function(i,o,s){"use strict";i.exports=s(92165)},29626:function(i,o,s){"use strict";i.exports=s(3325)},65591:function(i,o,s){"use strict";i.exports=s(36071)},69738:function(i,o,s){"use strict";i.exports=s(43905)},92650:function(i,o,s){"use strict";i.exports=s(35902)},35630:function(i,o,s){"use strict";i.exports=s(69816)},73434:function(i,o,s){"use strict";i.exports=s(94507)},27909:function(i,o,s){"use strict";var x=s(19548);x.register([s(27206),s(5224),s(58872),s(65591),s(69738),s(92650),s(49866),s(25743),s(6197),s(97040),s(85461),s(73434),s(54201),s(81299),s(47645),s(35630),s(77986),s(83043),s(93005),s(96881),s(4534),s(50581),s(40549),s(77900),s(47582),s(35080),s(21641),s(17280),s(5861),s(29626),s(10021),s(65317),s(96268),s(61396),s(35831),s(16122),s(46163),s(40344),s(40338),s(48131),s(36089),s(55334),s(75557),s(19440),s(99488),s(59893),s(97393),s(98222),s(61039),s(24296),s(66398),s(59509)]),i.exports=x},46163:function(i,o,s){"use strict";i.exports=s(15154)},96881:function(i,o,s){"use strict";i.exports=s(64943)},50581:function(i,o,s){"use strict";i.exports=s(21164)},55334:function(i,o,s){"use strict";i.exports=s(54186)},65317:function(i,o,s){"use strict";i.exports=s(94873)},10021:function(i,o,s){"use strict";i.exports=s(67618)},54201:function(i,o,s){"use strict";i.exports=s(58810)},5861:function(i,o,s){"use strict";i.exports=s(20593)},16122:function(i,o,s){"use strict";i.exports=s(29396)},83043:function(i,o,s){"use strict";i.exports=s(13551)},48131:function(i,o,s){"use strict";i.exports=s(46858)},47582:function(i,o,s){"use strict";i.exports=s(17988)},21641:function(i,o,s){"use strict";i.exports=s(68868)},96268:function(i,o,s){"use strict";i.exports=s(20467)},19440:function(i,o,s){"use strict";i.exports=s(91271)},99488:function(i,o,s){"use strict";i.exports=s(21461)},97393:function(i,o,s){"use strict";i.exports=s(85956)},25743:function(i,o,s){"use strict";i.exports=s(52979)},66398:function(i,o,s){"use strict";i.exports=s(32275)},17280:function(i,o,s){"use strict";i.exports=s(6419)},77900:function(i,o,s){"use strict";i.exports=s(61510)},81299:function(i,o,s){"use strict";i.exports=s(87619)},93005:function(i,o,s){"use strict";i.exports=s(93601)},40344:function(i,o,s){"use strict";i.exports=s(96595)},47645:function(i,o,s){"use strict";i.exports=s(70954)},6197:function(i,o,s){"use strict";i.exports=s(47462)},4534:function(i,o,s){"use strict";i.exports=s(17659)},85461:function(i,o,s){"use strict";i.exports=s(19990)},82884:function(i){"use strict";i.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(i,o,s){"use strict";var x=s(82884),_=s(41940),F=s(85555),N=s(44467).templatedArray;s(24695),i.exports=N("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:_({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:x.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:x.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",F.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",F.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",F.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",F.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:_({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(92605).draw;function annAutorange(i){var o=i._fullLayout;x.filterVisible(o.annotations).forEach(function(o){var s=_.getFromId(i,o.xref),x=_.getFromId(i,o.yref),F=_.getRefType(o.xref),N=_.getRefType(o.yref);o._extremes={},"range"===F&&calcAxisExpansion(o,s),"range"===N&&calcAxisExpansion(o,x)})}function calcAxisExpansion(i,o){var s,x=o._id,F=x.charAt(0),N=i[F],j=i["a"+F],G=i[F+"ref"],Z=i["a"+F+"ref"],X=i["_"+F+"padplus"],J=i["_"+F+"padminus"],$={x:1,y:-1}[F]*i[F+"shift"],ee=3*i.arrowsize*i.arrowwidth||0,et=ee+$,er=ee-$,en=3*i.startarrowsize*i.arrowwidth||0,ei=en+$,eo=en-$;if(Z===G){var es=_.findExtremes(o,[o.r2c(N)],{ppadplus:et,ppadminus:er}),el=_.findExtremes(o,[o.r2c(j)],{ppadplus:Math.max(X,ei),ppadminus:Math.max(J,eo)});s={min:[es.min[0],el.min[0]],max:[es.max[0],el.max[0]]}}else ei=j?ei+j:ei,eo=j?eo-j:eo,s=_.findExtremes(o,[o.r2c(N)],{ppadplus:Math.max(X,et,ei),ppadminus:Math.max(J,er,eo)});i._extremes[x]=s}i.exports=function(i){var o=i._fullLayout;if(x.filterVisible(o.annotations).length&&i._fullData.length)return x.syncOrAsync([F,annAutorange],i)}},44317:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(44467).arrayEditor;function getToggleSets(i,o){var s,x,_,F,N,j,G,Z=i._fullLayout.annotations,X=[],J=[],$=[],ee=(o||[]).length;for(s=0;s<Z.length;s++)if(F=(_=Z[s]).clicktoshow){for(x=0;x<ee;x++)if(j=(N=o[x]).xaxis,G=N.yaxis,j._id===_.xref&&G._id===_.yref&&j.d2r(N.x)===clickData2r(_._xclick,j)&&G.d2r(N.y)===clickData2r(_._yclick,G)){(_.visible?"onout"===F?J:$:X).push(s);break}x===ee&&_.visible&&"onout"===F&&J.push(s)}return{on:X,off:J,explicitOff:$}}function clickData2r(i,o){return"log"===o.type?o.l2r(i):o.d2r(i)}i.exports={hasClickToShow:function(i,o){var s=getToggleSets(i,o);return s.on.length>0||s.explicitOff.length>0},onClick:function(i,o){var s,N,j=getToggleSets(i,o),G=j.on,Z=j.off.concat(j.explicitOff),X={},J=i._fullLayout.annotations;if(G.length||Z.length){for(s=0;s<G.length;s++)(N=F(i.layout,"annotations",J[G[s]])).modifyItem("visible",!0),x.extendFlat(X,N.getUpdateObj());for(s=0;s<Z.length;s++)(N=F(i.layout,"annotations",J[Z[s]])).modifyItem("visible",!1),x.extendFlat(X,N.getUpdateObj());return _.call("update",i,{},X)}}}},25625:function(i,o,s){"use strict";var x=s(71828),_=s(7901);i.exports=function(i,o,s,F){F("opacity");var N=F("bgcolor"),j=F("bordercolor"),G=_.opacity(j);F("borderpad");var Z=F("borderwidth"),X=F("showarrow");if(F("text",X?" ":s._dfltTitle.annotation),F("textangle"),x.coerceFont(F,"font",s.font),F("width"),F("align"),F("height")&&F("valign"),X){var J,$,ee=F("arrowside");-1!==ee.indexOf("end")&&(J=F("arrowhead"),$=F("arrowsize")),-1!==ee.indexOf("start")&&(F("startarrowhead",J),F("startarrowsize",$)),F("arrowcolor",G?o.bordercolor:_.defaultLine),F("arrowwidth",2*(G&&Z||1)),F("standoff"),F("startstandoff")}var et=F("hovertext"),er=s.hoverlabel||{};if(et){var en=F("hoverlabel.bgcolor",er.bgcolor||(_.opacity(N)?_.rgb(N):_.defaultLine)),ei=F("hoverlabel.bordercolor",er.bordercolor||_.contrast(en));x.coerceFont(F,"hoverlabel.font",{family:er.font.family,size:er.font.size,color:er.font.color||ei})}F("captureevents",!!et)}},94128:function(i,o,s){"use strict";var x=s(92770),_=s(58163);i.exports=function(i,o,s,F){o=o||{};var N,j,G="log"===s&&"linear"===o.type,Z="linear"===s&&"log"===o.type;if(G||Z)for(var X=i._fullLayout.annotations,J=o._id.charAt(0),$=0;$<X.length;$++)N=X[$],j="annotations["+$+"].",N[J+"ref"]===o._id&&convert(J),N["a"+J+"ref"]===o._id&&convert("a"+J);function convert(i){var s=N[i],Z=null;x(Z=G?_(s,o.range):Math.pow(10,s))||(Z=null),F(j+i,Z)}}},84046:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(85501),N=s(25625),j=s(50215);function handleAnnotationDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,j,s,_)}var F=coerce("visible"),G=coerce("clicktoshow");if(F||G){N(i,o,s,coerce);for(var Z=o.showarrow,X=["x","y"],J=[-10,-30],$={_fullLayout:s},ee=0;ee<2;ee++){var et=X[ee],er=_.coerceRef(i,o,$,et,"","paper");if("paper"!==er&&_.getFromId($,er)._annIndices.push(o._index),_.coercePosition(o,$,coerce,er,et,.5),Z){var en="a"+et,ei=_.coerceRef(i,o,$,en,"pixel",["pixel","paper"]);"pixel"!==ei&&ei!==er&&(ei=o[en]="pixel");var eo="pixel"===ei?J[ee]:.4;_.coercePosition(o,$,coerce,ei,en,eo)}coerce(et+"anchor"),coerce(et+"shift")}if(x.noneOrAll(i,o,["x","y"]),Z&&x.noneOrAll(i,o,["ax","ay"]),G){var es=coerce("xclick"),el=coerce("yclick");o._xclick=void 0===es?o.x:_.cleanPosition(es,$,o.xref),o._yclick=void 0===el?o.y:_.cleanPosition(el,$,o.yref)}}}i.exports=function(i,o){F(i,o,{name:"annotations",handleItemDefaults:handleAnnotationDefaults})}},92605:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(74875),N=s(71828),j=N.strTranslate,G=s(89298),Z=s(7901),X=s(91424),J=s(30211),$=s(63893),ee=s(6964),et=s(28569),er=s(44467).arrayEditor,en=s(13011);function drawOne(i,o){var s=i._fullLayout.annotations[o]||{},x=G.getFromId(i,s.xref),_=G.getFromId(i,s.yref);x&&x.setScale(),_&&_.setScale(),drawRaw(i,s,o,!1,x,_)}function shiftPosition(i,o,s,x,_){var F=_[s],N=_[s+"ref"],j=-1!==s.indexOf("y"),Z="domain"===G.getRefType(N),X=j?x.h:x.w;return i?Z?F+(j?-o:o)/i._length:i.p2r(i.r2p(F)+o):F+(j?-o:o)/X}function drawRaw(i,o,s,F,ei,eo){var es,el,ec=i._fullLayout,eu=i._fullLayout._size,ef=i._context.edits;F?(es="annotation-"+F,el=F+".annotations"):(es="annotation",el="annotations");var eh=er(i.layout,el,o),ed=eh.modifyBase,ep=eh.modifyItem,eg=eh.getUpdateObj;ec._infolayer.selectAll("."+es+'[data-index="'+s+'"]').remove();var em="clip"+ec._uid+"_ann"+s;if(!o._input||!1===o.visible){x.selectAll("#"+em).remove();return}var ey={x:{},y:{}},ev=+o.textangle||0,ex=ec._infolayer.append("g").classed(es,!0).attr("data-index",String(s)).style("opacity",o.opacity),e_=ex.append("g").classed("annotation-text-g",!0),ew=ef[o.showarrow?"annotationTail":"annotationPosition"],eT=o.captureevents||ef.annotationText||ew;function makeEventData(i){var x={index:s,annotation:o._input,fullAnnotation:o,event:i};return F&&(x.subplotId=F),x}var ek=e_.append("g").style("pointer-events",eT?"all":null).call(ee,"pointer").on("click",function(){i._dragging=!1,i.emit("plotly_clickannotation",makeEventData(x.event))});o.hovertext&&ek.on("mouseover",function(){var s=o.hoverlabel,x=s.font,_=this.getBoundingClientRect(),F=i.getBoundingClientRect();J.loneHover({x0:_.left-F.left,x1:_.right-F.left,y:(_.top+_.bottom)/2-F.top,text:o.hovertext,color:s.bgcolor,borderColor:s.bordercolor,fontFamily:x.family,fontSize:x.size,fontColor:x.color},{container:ec._hoverlayer.node(),outerContainer:ec._paper.node(),gd:i})}).on("mouseout",function(){J.loneUnhover(ec._hoverlayer.node())});var eA=o.borderwidth,eS=eA+o.borderpad,eM=ek.append("rect").attr("class","bg").style("stroke-width",eA+"px").call(Z.stroke,o.bordercolor).call(Z.fill,o.bgcolor),eC=o.width||o.height,eE=ec._topclips.selectAll("#"+em).data(eC?[0]:[]);eE.enter().append("clipPath").classed("annclip",!0).attr("id",em).append("rect"),eE.exit().remove();var eL=o.font,eP=ec._meta?N.templateString(o.text,ec._meta):o.text,eI=ek.append("text").classed("annotation-text",!0).text(eP);function textLayout(s){return s.call(X.font,eL).attr({"text-anchor":{left:"start",right:"end"}[o.align]||"middle"}),$.convertToTspans(s,i,drawGraphicalElements),s}function drawGraphicalElements(){var s,x=eI.selectAll("a");1===x.size()&&x.text()===eI.text()&&ek.insert("a",":first-child").attr({"xlink:xlink:href":x.attr("xlink:href"),"xlink:xlink:show":x.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(eM.node());var J=ek.select(".annotation-text-math-group"),er=!J.empty(),es=X.bBox((er?J:eI).node()),el=es.width,eh=es.height,eT=o.width||el,eL=o.height||eh,eP=Math.round(eT+2*eS),eO=Math.round(eL+2*eS);function shiftFraction(i,o){return"auto"===o&&(o=i<1/3?"left":i>2/3?"right":"center"),({center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5})[o]}for(var eD=!1,eR=["x","y"],eB=0;eB<eR.length;eB++){var ez,eF,eN,ej,eU,eV=eR[eB],eH=o[eV+"ref"]||eV,eG=o["a"+eV+"ref"],eW={x:ei,y:eo}[eV],eZ=(ev+("x"===eV?0:-90))*Math.PI/180,eY=eP*Math.cos(eZ),eX=eO*Math.sin(eZ),eK=Math.abs(eY)+Math.abs(eX),eJ=o[eV+"anchor"],e$=o[eV+"shift"]*("x"===eV?1:-1),eQ=ey[eV],e0=G.getRefType(eH);if(eW&&"domain"!==e0){var e1=eW.r2fraction(o[eV]);(e1<0||e1>1)&&(eG===eH?((e1=eW.r2fraction(o["a"+eV]))<0||e1>1)&&(eD=!0):eD=!0),ez=eW._offset+eW.r2p(o[eV]),ej=.5}else{var e2="domain"===e0;"x"===eV?(eN=o[eV],ez=e2?eW._offset+eW._length*eN:ez=eu.l+eu.w*eN):(eN=1-o[eV],ez=e2?eW._offset+eW._length*eN:ez=eu.t+eu.h*eN),ej=o.showarrow?.5:eN}if(o.showarrow){eQ.head=ez;var e3=o["a"+eV];if(eU=eY*shiftFraction(.5,o.xanchor)-eX*shiftFraction(.5,o.yanchor),eG===eH){var e5=G.getRefType(eG);"domain"===e5?("y"===eV&&(e3=1-e3),eQ.tail=eW._offset+eW._length*e3):"paper"===e5?"y"===eV?(e3=1-e3,eQ.tail=eu.t+eu.h*e3):eQ.tail=eu.l+eu.w*e3:eQ.tail=eW._offset+eW.r2p(e3),eF=eU}else eQ.tail=ez+e3,eF=eU+e3;eQ.text=eQ.tail+eU;var e4=ec["x"===eV?"width":"height"];if("paper"===eH&&(eQ.head=N.constrain(eQ.head,1,e4-1)),"pixel"===eG){var e6=-Math.max(eQ.tail-3,eQ.text),e8=Math.min(eQ.tail+3,eQ.text)-e4;e6>0?(eQ.tail+=e6,eQ.text+=e6):e8>0&&(eQ.tail-=e8,eQ.text-=e8)}eQ.tail+=e$,eQ.head+=e$}else eF=eU=eK*shiftFraction(ej,eJ),eQ.text=ez+eU;eQ.text+=e$,eU+=e$,eF+=e$,o["_"+eV+"padplus"]=eK/2+eF,o["_"+eV+"padminus"]=eK/2-eF,o["_"+eV+"size"]=eK,o["_"+eV+"shift"]=eU}if(eD){ek.remove();return}var e7=0,e9=0;if("left"!==o.align&&(e7=(eT-el)*("center"===o.align?.5:1)),"top"!==o.valign&&(e9=(eL-eh)*("middle"===o.valign?.5:1)),er)J.select("svg").attr({x:eS+e7-1,y:eS+e9}).call(X.setClipUrl,eC?em:null,i);else{var te=eS+e9-es.top,tt=eS+e7-es.left;eI.call($.positionText,tt,te).call(X.setClipUrl,eC?em:null,i)}eE.select("rect").call(X.setRect,eS,eS,eT,eL),eM.call(X.setRect,eA/2,eA/2,eP-eA,eO-eA),ek.call(X.setTranslate,Math.round(ey.x.text-eP/2),Math.round(ey.y.text-eO/2)),e_.attr({transform:"rotate("+ev+","+ey.x.text+","+ey.y.text+")"});var drawArrow=function(s,x){ex.selectAll(".annotation-arrow-g").remove();var G=ey.x.head,J=ey.y.head,$=ey.x.tail+s,ee=ey.y.tail+x,er=ey.x.text+s,es=ey.y.text+x,el=N.rotationXYMatrix(ev,er,es),ec=N.apply2DTransform(el),eh=N.apply2DTransform2(el),em=+eM.attr("width"),ew=+eM.attr("height"),eT=er-.5*em,eA=eT+em,eS=es-.5*ew,eC=eS+ew,eE=[[eT,eS,eT,eC],[eT,eC,eA,eC],[eA,eC,eA,eS],[eA,eS,eT,eS]].map(eh);if(!eE.reduce(function(i,o){return!!N.segmentsIntersect(G,J,G+1e6,J+1e6,o[0],o[1],o[2],o[3])^i},!1)){eE.forEach(function(i){var o=N.segmentsIntersect($,ee,G,J,i[0],i[1],i[2],i[3]);o&&($=o.x,ee=o.y)});var eL=o.arrowwidth,eP=o.arrowcolor,eI=o.arrowside,eO=ex.append("g").style({opacity:Z.opacity(eP)}).classed("annotation-arrow-g",!0),eD=eO.append("path").attr("d","M"+$+","+ee+"L"+G+","+J).style("stroke-width",eL+"px").call(Z.stroke,Z.rgb(eP));if(en(eD,eI,o),ef.annotationPosition&&eD.node().parentNode&&!F){var eR,eB,ez=G,eF=J;if(o.standoff){var eN=Math.sqrt(Math.pow(G-$,2)+Math.pow(J-ee,2));ez+=o.standoff*($-G)/eN,eF+=o.standoff*(ee-J)/eN}var ej=eO.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+($-ez)+","+(ee-eF),transform:j(ez,eF)}).style("stroke-width",eL+6+"px").call(Z.stroke,"rgba(0,0,0,0)").call(Z.fill,"rgba(0,0,0,0)");et.init({element:ej.node(),gd:i,prepFn:function(){var i=X.getTranslate(ek);eR=i.x,eB=i.y,ei&&ei.autorange&&ed(ei._name+".autorange",!0),eo&&eo.autorange&&ed(eo._name+".autorange",!0)},moveFn:function(i,s){var x=ec(eR,eB),_=x[0]+i,F=x[1]+s;ek.call(X.setTranslate,_,F),ep("x",shiftPosition(ei,i,"x",eu,o)),ep("y",shiftPosition(eo,s,"y",eu,o)),o.axref===o.xref&&ep("ax",shiftPosition(ei,i,"ax",eu,o)),o.ayref===o.yref&&ep("ay",shiftPosition(eo,s,"ay",eu,o)),eO.attr("transform",j(i,s)),e_.attr({transform:"rotate("+ev+","+_+","+F+")"})},doneFn:function(){_.call("_guiRelayout",i,eg());var o=document.querySelector(".js-notes-box-panel");o&&o.redraw(o.selectedObj)}})}}};o.showarrow&&drawArrow(0,0),ew&&et.init({element:ek.node(),gd:i,prepFn:function(){s=e_.attr("transform")},moveFn:function(i,x){var _,N,G="pointer";if(o.showarrow)o.axref===o.xref?ep("ax",shiftPosition(ei,i,"ax",eu,o)):ep("ax",o.ax+i),o.ayref===o.yref?ep("ay",shiftPosition(eo,x,"ay",eu.w,o)):ep("ay",o.ay+x),drawArrow(i,x);else{if(F)return;if(ei)_=shiftPosition(ei,i,"x",eu,o);else{var Z=o._xsize/eu.w,X=o.x+(o._xshift-o.xshift)/eu.w-Z/2;_=et.align(X+i/eu.w,Z,0,1,o.xanchor)}if(eo)N=shiftPosition(eo,x,"y",eu,o);else{var J=o._ysize/eu.h,$=o.y-(o._yshift+o.yshift)/eu.h-J/2;N=et.align($-x/eu.h,J,0,1,o.yanchor)}ep("x",_),ep("y",N),ei&&eo||(G=et.getCursor(ei?.5:_,eo?.5:N,o.xanchor,o.yanchor))}e_.attr({transform:j(i,x)+s}),ee(ek,G)},clickFn:function(s,x){o.captureevents&&i.emit("plotly_clickannotation",makeEventData(x))},doneFn:function(){ee(ek),_.call("_guiRelayout",i,eg());var o=document.querySelector(".js-notes-box-panel");o&&o.redraw(o.selectedObj)}})}ef.annotationText?eI.call($.makeEditable,{delegate:ek,gd:i}).call(textLayout).on("edit",function(s){o.text=s,this.call(textLayout),ep("text",s),ei&&ei.autorange&&ed(ei._name+".autorange",!0),eo&&eo.autorange&&ed(eo._name+".autorange",!0),_.call("_guiRelayout",i,eg())}):eI.call(textLayout)}i.exports={draw:function(i){var o=i._fullLayout;o._infolayer.selectAll(".annotation").remove();for(var s=0;s<o.annotations.length;s++)o.annotations[s].visible&&drawOne(i,s);return F.previousPromises(i)},drawOne:drawOne,drawRaw:drawRaw}},13011:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(82884),N=s(71828),j=N.strScale,G=N.strRotate,Z=N.strTranslate;i.exports=function(i,o,s){var N,X,J,$,ee=i.node(),et=F[s.arrowhead||0],er=F[s.startarrowhead||0],en=(s.arrowwidth||1)*(s.arrowsize||1),ei=(s.arrowwidth||1)*(s.startarrowsize||1),eo=o.indexOf("start")>=0,es=o.indexOf("end")>=0,el=et.backoff*en+s.standoff,ec=er.backoff*ei+s.startstandoff;if("line"===ee.nodeName){N={x:+i.attr("x1"),y:+i.attr("y1")},X={x:+i.attr("x2"),y:+i.attr("y2")};var eu=N.x-X.x,ef=N.y-X.y;if($=(J=Math.atan2(ef,eu))+Math.PI,el&&ec&&el+ec>Math.sqrt(eu*eu+ef*ef)){hideLine();return}if(el){if(el*el>eu*eu+ef*ef){hideLine();return}var eh=el*Math.cos(J),ed=el*Math.sin(J);X.x+=eh,X.y+=ed,i.attr({x2:X.x,y2:X.y})}if(ec){if(ec*ec>eu*eu+ef*ef){hideLine();return}var ep=ec*Math.cos(J),eg=ec*Math.sin(J);N.x-=ep,N.y-=eg,i.attr({x1:N.x,y1:N.y})}}else if("path"===ee.nodeName){var em=ee.getTotalLength(),ey="";if(em<el+ec){hideLine();return}var ev=ee.getPointAtLength(0),ex=ee.getPointAtLength(.1);J=Math.atan2(ev.y-ex.y,ev.x-ex.x),N=ee.getPointAtLength(Math.min(ec,em)),ey="0px,"+ec+"px,";var e_=ee.getPointAtLength(em),ew=ee.getPointAtLength(em-.1);$=Math.atan2(e_.y-ew.y,e_.x-ew.x),X=ee.getPointAtLength(Math.max(0,em-el));var eT=ey?ec+el:el;ey+=em-eT+"px,"+em+"px",i.style("stroke-dasharray",ey)}function hideLine(){i.style("stroke-dasharray","0px,100px")}function drawhead(o,F,N,X){o.path&&(o.noRotate&&(N=0),x.select(ee.parentNode).append("path").attr({class:i.attr("class"),d:o.path,transform:Z(F.x,F.y)+G(180*N/Math.PI)+j(X)}).style({fill:_.rgb(s.arrowcolor),"stroke-width":0}))}eo&&drawhead(er,N,J,ei),es&&drawhead(et,X,$,en)}},32745:function(i,o,s){"use strict";var x=s(92605),_=s(44317);i.exports={moduleType:"component",name:"annotations",layoutAttributes:s(50215),supplyLayoutDefaults:s(84046),includeBasePlot:s(76325)("annotations"),calcAutorange:s(3749),draw:x.draw,drawOne:x.drawOne,drawRaw:x.drawRaw,hasClickToShow:_.hasClickToShow,onClick:_.onClick,convertCoords:s(94128)}},26997:function(i,o,s){"use strict";var x=s(50215),_=s(30962).overrideAll,F=s(44467).templatedArray;i.exports=_(F("annotation",{visible:x.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:x.xanchor,xshift:x.xshift,yanchor:x.yanchor,yshift:x.yshift,text:x.text,textangle:x.textangle,font:x.font,width:x.width,height:x.height,opacity:x.opacity,align:x.align,valign:x.valign,bgcolor:x.bgcolor,bordercolor:x.bordercolor,borderpad:x.borderpad,borderwidth:x.borderwidth,showarrow:x.showarrow,arrowcolor:x.arrowcolor,arrowhead:x.arrowhead,startarrowhead:x.startarrowhead,arrowside:x.arrowside,arrowsize:x.arrowsize,startarrowsize:x.startarrowsize,arrowwidth:x.arrowwidth,standoff:x.standoff,startstandoff:x.startstandoff,hovertext:x.hovertext,hoverlabel:x.hoverlabel,captureevents:x.captureevents}),"calc","from-root")},5485:function(i,o,s){"use strict";var x=s(71828),_=s(89298);i.exports=function(i){for(var o=i.fullSceneLayout.annotations,s=0;s<o.length;s++)(function(i,o){var s=o.fullSceneLayout.domain,F=o.fullLayout._size,N={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};i._xa={},x.extendFlat(i._xa,N),_.setConvert(i._xa),i._xa._offset=F.l+s.x[0]*F.w,i._xa.l2p=function(){return .5*(1+i._pdata[0]/i._pdata[3])*F.w*(s.x[1]-s.x[0])},i._ya={},x.extendFlat(i._ya,N),_.setConvert(i._ya),i._ya._offset=F.t+(1-s.y[1])*F.h,i._ya.l2p=function(){return .5*(1-i._pdata[1]/i._pdata[3])*F.h*(s.y[1]-s.y[0])}})(o[s],i);i.fullLayout._infolayer.selectAll(".annotation-"+i.id).remove()}},20226:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(85501),N=s(25625),j=s(26997);function handleAnnotationDefaults(i,o,s,F){function coerce(s,_){return x.coerce(i,o,j,s,_)}function coercePosition(i){var x=i+"axis",F={_fullLayout:{}};return F._fullLayout[x]=s[x],_.coercePosition(o,F,coerce,i,i,.5)}coerce("visible")&&(N(i,o,F.fullLayout,coerce),coercePosition("x"),coercePosition("y"),coercePosition("z"),x.noneOrAll(i,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",coerce("xanchor"),coerce("yanchor"),coerce("xshift"),coerce("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",coerce("ax",-10),coerce("ay",-30),x.noneOrAll(i,o,["ax","ay"])))}i.exports=function(i,o,s){F(i,o,{name:"annotations",handleItemDefaults:handleAnnotationDefaults,fullLayout:s.fullLayout})}},82188:function(i,o,s){"use strict";var x=s(92605).drawRaw,_=s(63538),F=["x","y","z"];i.exports=function(i){for(var o=i.fullSceneLayout,s=i.dataScale,N=o.annotations,j=0;j<N.length;j++){for(var G=N[j],Z=!1,X=0;X<3;X++){var J=F[X],$=G[J],ee=o[J+"axis"].r2fraction($);if(ee<0||ee>1){Z=!0;break}}Z?i.fullLayout._infolayer.select(".annotation-"+i.id+'[data-index="'+j+'"]').remove():(G._pdata=_(i.glplot.cameraParams,[o.xaxis.r2l(G.x)*s[0],o.yaxis.r2l(G.y)*s[1],o.zaxis.r2l(G.z)*s[2]]),x(i.graphDiv,G,j,i.id,G._xa,G._ya))}}},2468:function(i,o,s){"use strict";var x=s(73972),_=s(71828);i.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:s(26997)}}},layoutAttributes:s(26997),handleDefaults:s(20226),includeBasePlot:function(i,o){var s=x.subplotsRegistry.gl3d;if(s)for(var F=s.attrRegex,N=Object.keys(i),j=0;j<N.length;j++){var G=N[j];F.test(G)&&(i[G].annotations||[]).length&&(_.pushUnique(o._basePlotModules,s),_.pushUnique(o._subplots.gl3d,G))}},convert:s(5485),draw:s(82188)}},7561:function(i,o,s){"use strict";i.exports=s(63489),s(94338),s(3961),s(38751),s(86825),s(37715),s(99384),s(43805),s(88874),s(83290),s(29108),s(55422),s(94320),s(31320),s(51367),s(21457)},72201:function(i,o,s){"use strict";var x=s(7561),_=s(71828),F=s(50606),N=F.EPOCHJD,j=F.ONEDAY,G={valType:"enumerated",values:_.sortObjectKeys(x.calendars),editType:"calc",dflt:"gregorian"},handleDefaults=function(i,o,s,x){var F={};return F[s]=G,_.coerce(i,o,F,s,x)},Z={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},X={};function getCal(i){var o=X[i];return o||(o=X[i]=x.instance(i))}function makeAttrs(i){return _.extendFlat({},G,{description:i})}function makeTraceAttrsDescription(i){return"Sets the calendar system to use with `"+i+"` date data."}var J={xcalendar:makeAttrs(makeTraceAttrsDescription("x"))},$=_.extendFlat({},J,{ycalendar:makeAttrs(makeTraceAttrsDescription("y"))}),ee=_.extendFlat({},$,{zcalendar:makeAttrs(makeTraceAttrsDescription("z"))}),et=makeAttrs("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");i.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:$,bar:$,box:$,heatmap:$,contour:$,histogram:$,histogram2d:$,histogram2dcontour:$,scatter3d:ee,surface:ee,mesh3d:ee,scattergl:$,ohlc:J,candlestick:J},layout:{calendar:makeAttrs("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:et},yaxis:{calendar:et},scene:{xaxis:{calendar:et},yaxis:{calendar:et},zaxis:{calendar:et}},polar:{radialaxis:{calendar:et}}},transforms:{filter:{valuecalendar:makeAttrs("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),targetcalendar:makeAttrs("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:G,handleDefaults:handleDefaults,handleTraceDefaults:function(i,o,s,x){for(var _=0;_<s.length;_++)handleDefaults(i,o,s[_]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:getCal,worldCalFmt:function(i,o,s){for(var x,_,F,G,X,J=Math.floor((o+.05)/j)+N,$=getCal(s).fromJD(J),ee=0;-1!==(ee=i.indexOf("%",ee));)"0"===(x=i.charAt(ee+1))||"-"===x||"_"===x?(F=3,_=i.charAt(ee+2),"_"===x&&(x="-")):(_=x,x="0",F=2),(G=Z[_])?(X="##"===G?"##":$.formatDate(G[x]),i=i.substr(0,ee)+X+i.substr(ee+F),ee+=X.length):ee+=F;return i}}},22399:function(i,o){"use strict";o.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],o.defaultLine="#444",o.lightLine="#eee",o.background="#fff",o.borderLine="#BEC8D9",o.lightFraction=90.9090909090909},7901:function(i,o,s){"use strict";var x=s(84267),_=s(92770),F=s(73627).isTypedArray,N=i.exports={},j=s(22399);N.defaults=j.defaults;var G=N.defaultLine=j.defaultLine;N.lightLine=j.lightLine;var Z=N.background=j.background;function cleanOne(i){if(_(i)||"string"!=typeof i)return i;var o=i.trim();if("rgb"!==o.substr(0,3))return i;var s=o.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return i;var x=s[1].trim().split(/\s*[\s,]\s*/),F="a"===o.charAt(3)&&4===x.length;if(!F&&3!==x.length)return i;for(var N=0;N<x.length;N++){if(!x[N].length||(x[N]=Number(x[N]),!(x[N]>=0)))return i;if(3===N)x[N]>1&&(x[N]=1);else if(x[N]>=1)return i}var j=Math.round(255*x[0])+", "+Math.round(255*x[1])+", "+Math.round(255*x[2]);return F?"rgba("+j+", "+x[3]+")":"rgb("+j+")"}N.tinyRGB=function(i){var o=i.toRgb();return"rgb("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+")"},N.rgb=function(i){return N.tinyRGB(x(i))},N.opacity=function(i){return i?x(i).getAlpha():0},N.addOpacity=function(i,o){var s=x(i).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+o+")"},N.combine=function(i,o){var s=x(i).toRgb();if(1===s.a)return x(i).toRgbString();var _=x(o||Z).toRgb(),F=1===_.a?_:{r:255*(1-_.a)+_.r*_.a,g:255*(1-_.a)+_.g*_.a,b:255*(1-_.a)+_.b*_.a};return x({r:F.r*(1-s.a)+s.r*s.a,g:F.g*(1-s.a)+s.g*s.a,b:F.b*(1-s.a)+s.b*s.a}).toRgbString()},N.contrast=function(i,o,s){var _=x(i);return 1!==_.getAlpha()&&(_=x(N.combine(i,Z))),(_.isDark()?o?_.lighten(o):Z:s?_.darken(s):G).toString()},N.stroke=function(i,o){var s=x(o);i.style({stroke:N.tinyRGB(s),"stroke-opacity":s.getAlpha()})},N.fill=function(i,o){var s=x(o);i.style({fill:N.tinyRGB(s),"fill-opacity":s.getAlpha()})},N.clean=function(i){if(i&&"object"==typeof i){var o,s,x,_,j=Object.keys(i);for(o=0;o<j.length;o++)if(_=i[x=j[o]],"color"===x.substr(x.length-5)){if(Array.isArray(_))for(s=0;s<_.length;s++)_[s]=cleanOne(_[s]);else i[x]=cleanOne(_)}else if("colorscale"===x.substr(x.length-10)&&Array.isArray(_))for(s=0;s<_.length;s++)Array.isArray(_[s])&&(_[s][1]=cleanOne(_[s][1]));else if(Array.isArray(_)){var G=_[0];if(!Array.isArray(G)&&G&&"object"==typeof G)for(s=0;s<_.length;s++)N.clean(_[s])}else _&&"object"==typeof _&&!F(_)&&N.clean(_)}}},63583:function(i,o,s){"use strict";var x=s(13838),_=s(41940),F=s(1426).extendFlat,N=s(30962).overrideAll;i.exports=N({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:x.linecolor,outlinewidth:x.linewidth,bordercolor:x.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:x.minor.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:F({},x.ticks,{dflt:""}),ticklabeloverflow:F({},x.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,ticklabelstep:x.ticklabelstep,showticklabels:x.showticklabels,labelalias:x.labelalias,tickfont:_({}),tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,separatethousands:x.separatethousands,exponentformat:x.exponentformat,minexponent:x.minexponent,showexponent:x.showexponent,title:{text:{valType:"string"},font:_({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:_({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(i){"use strict";i.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(i,o,s){"use strict";var x=s(71828),_=s(44467),F=s(26218),N=s(38701),j=s(96115),G=s(89426),Z=s(63583);i.exports=function(i,o,s){var X,J,$,ee=_.newContainer(o,"colorbar"),et=i.colorbar||{};function coerce(i,o){return x.coerce(et,ee,Z,i,o)}var er=s.margin||{t:0,b:0,l:0,r:0},en=s.width-er.l-er.r,ei=s.height-er.t-er.b,eo="v"===coerce("orientation"),es=coerce("thicknessmode");coerce("thickness","fraction"===es?30/(eo?en:ei):30);var el=coerce("lenmode");coerce("len","fraction"===el?1:eo?ei:en);var ec=coerce("yref"),eu=coerce("xref"),ef="paper"===ec,eh="paper"===eu,ed="left";eo?($="middle",ed=eh?"left":"right",X=eh?1.02:1,J=.5):($=ef?"bottom":"top",ed="center",X=.5,J=ef?1.02:1),x.coerce(et,ee,{x:{valType:"number",min:eh?-2:0,max:eh?3:1,dflt:X}},"x"),x.coerce(et,ee,{y:{valType:"number",min:ef?-2:0,max:ef?3:1,dflt:J}},"y"),coerce("xanchor",ed),coerce("xpad"),coerce("yanchor",$),coerce("ypad"),x.noneOrAll(et,ee,["x","y"]),coerce("outlinecolor"),coerce("outlinewidth"),coerce("bordercolor"),coerce("borderwidth"),coerce("bgcolor");var ep=x.coerce(et,ee,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:eo?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");coerce("ticklabeloverflow",-1!==ep.indexOf("inside")?"hide past domain":"hide past div"),F(et,ee,coerce,"linear");var eg=s.font,em={outerTicks:!1,font:eg};-1!==ep.indexOf("inside")&&(em.bgColor="black"),G(et,ee,coerce,"linear",em),j(et,ee,coerce,"linear",em),N(et,ee,coerce,"linear",em),coerce("title.text",s._dfltTitle.colorbar);var ey=ee.showticklabels?ee.tickfont:eg,ev=x.extendFlat({},ey,{color:eg.color,size:x.bigFont(ey.size)});x.coerceFont(coerce,"title.font",ev),coerce("title.side",eo?"top":"right")}},98981:function(i,o,s){"use strict";var x=s(39898),_=s(84267),F=s(74875),N=s(73972),j=s(89298),G=s(28569),Z=s(71828),X=Z.strTranslate,J=s(1426).extendFlat,$=s(6964),ee=s(91424),et=s(7901),er=s(92998),en=s(63893),ei=s(52075).flipScale,eo=s(71453),es=s(52830),el=s(13838),ec=s(18783),eu=ec.LINE_SPACING,ef=ec.FROM_TL,eh=ec.FROM_BR,ed=s(30939).cn;i.exports={draw:function(i){var o=i._fullLayout._infolayer.selectAll("g."+ed.colorbar).data(function(i){var o,s,x,_,F=i._fullLayout,N=i.calcdata,j=[];function initOpts(i){return J(i,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function calcOpts(){"function"==typeof _.calc?_.calc(i,x,o):(o._fillgradient=s.reversescale?ei(s.colorscale):s.colorscale,o._zrange=[s[_.min],s[_.max]])}for(var G=0;G<N.length;G++)if((x=N[G][0].trace)._module){var Z=x._module.colorbar;if(!0===x.visible&&Z)for(var X=Array.isArray(Z),$=X?Z:[Z],ee=0;ee<$.length;ee++){var et=(_=$[ee]).container;(s=et?x[et]:x)&&s.showscale&&((o=initOpts(s.colorbar))._id="cb"+x.uid+(X&&et?"-"+et:""),o._traceIndex=x.index,o._propPrefix=(et?et+".":"")+"colorbar.",o._meta=x._meta,calcOpts(),j.push(o))}}for(var er in F._colorAxes)if((s=F[er]).showscale){var en=F._colorAxes[er];(o=initOpts(s.colorbar))._id="cb"+er,o._propPrefix=er+".colorbar.",o._meta=F._meta,_={min:"cmin",max:"cmax"},"heatmap"!==en[0]&&(x=en[1],_.calc=x._module.colorbar.calc),calcOpts(),j.push(o)}return j}(i),function(i){return i._id});o.enter().append("g").attr("class",function(i){return i._id}).classed(ed.colorbar,!0),o.each(function(o){var s,ei,ec,ep,eg,em=x.select(this);Z.ensureSingle(em,"rect",ed.cbbg),Z.ensureSingle(em,"g",ed.cbfills),Z.ensureSingle(em,"g",ed.cblines),Z.ensureSingle(em,"g",ed.cbaxis,function(i){i.classed(ed.crisp,!0)}),Z.ensureSingle(em,"g",ed.cbtitleunshift,function(i){i.append("g").classed(ed.cbtitle,!0)}),Z.ensureSingle(em,"rect",ed.cboutline);var ey=function(i,o,s){var N,G="v"===o.orientation,$=o.len,ei=o.lenmode,ec=o.thickness,ep=o.thicknessmode,eg=o.outlinewidth,em=o.borderwidth,ey=o.bgcolor,ev=o.xanchor,ex=o.yanchor,e_=o.xpad,ew=o.ypad,eT=o.x,ek=G?o.y:1-o.y,eA="paper"===o.yref,eS="paper"===o.xref,eM=s._fullLayout,eC=eM._size,eE=o._fillcolor,eL=o._line,eP=o.title,eI=eP.side,eO=o._zrange||x.extent(("function"==typeof eE?eE:eL.color).domain()),eD="function"==typeof eL.color?eL.color:function(){return eL.color},eR="function"==typeof eE?eE:function(){return eE},eB=o._levels,ez=function(i,o,s){var x,_,F=o._levels,N=[],j=[],G=F.end+F.size/100,Z=F.size,X=1.001*s[0]-.001*s[1],J=1.001*s[1]-.001*s[0];for(_=0;_<1e5&&(x=F.start+_*Z,Z>0?!(x>=G):!(x<=G));_++)x>X&&x<J&&N.push(x);if(o._fillgradient)j=[0];else if("function"==typeof o._fillcolor){var $=o._filllevels;if($)for(_=0,G=$.end+$.size/100,Z=$.size;_<1e5&&(x=$.start+_*Z,Z>0?!(x>=G):!(x<=G));_++)x>s[0]&&x<s[1]&&j.push(x);else(j=N.map(function(i){return i-F.size/2})).push(j[j.length-1]+F.size)}else o._fillcolor&&"string"==typeof o._fillcolor&&(j=[0]);return F.size<0&&(N.reverse(),j.reverse()),{line:N,fill:j}}(0,o,eO),eF=ez.fill,eN=ez.line,ej=Math.round(ec*("fraction"===ep?G?eC.w:eC.h:1)),eU=ej/(G?eC.w:eC.h),eV=Math.round($*("fraction"===ei?G?eC.h:eC.w:1)),eH=eV/(G?eC.h:eC.w),eG=eS?eC.w:s._fullLayout.width,eW=eA?eC.h:s._fullLayout.height,eZ=Math.round(G?eT*eG+e_:ek*eW+ew),eY={center:.5,right:1}[ev]||0,eX={top:1,middle:.5}[ex]||0,eK=G?eT-eY*eU:ek-eX*eU,eJ=G?ek-eX*eH:eT-eY*eH,e$=Math.round(G?eW*(1-eJ):eG*eJ);o._lenFrac=eH,o._thickFrac=eU,o._uFrac=eK,o._vFrac=eJ;var eQ=o._axis=function(i,o,s){var x=i._fullLayout,_="v"===o.orientation,F={type:"linear",range:s,tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,ticklabelposition:o.ticklabelposition,ticklabeloverflow:o.ticklabeloverflow,ticklabelstep:o.ticklabelstep,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,showexponent:o.showexponent,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,title:o.title,showline:!0,anchor:"free",side:_?"right":"bottom",position:1},N=_?"y":"x",j={type:"linear",_id:N+o._id},G={letter:N,font:x.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:x.calendar};function coerce(i,o){return Z.coerce(F,j,el,i,o)}return eo(F,j,coerce,G,x),es(F,j,coerce,G),j}(s,o,eO);eQ.position=eU+(G?eT+e_/eC.w:ek+ew/eC.h);var e0=-1!==["top","bottom"].indexOf(eI);if(G&&e0&&(eQ.title.side=eI,eQ.titlex=eT+e_/eC.w,eQ.titley=eJ+("top"===eP.side?eH-ew/eC.h:ew/eC.h)),G||e0||(eQ.title.side=eI,eQ.titley=ek+ew/eC.h,eQ.titlex=eJ+e_/eC.w),eL.color&&"auto"===o.tickmode){eQ.tickmode="linear",eQ.tick0=eB.start;var e1=eB.size,e2=Z.constrain(eV/50,4,15)+1,e3=(eO[1]-eO[0])/((o.nticks||e2)*e1);if(e3>1){var e5=Math.pow(10,Math.floor(Math.log(e3)/Math.LN10));e1*=e5*Z.roundUp(e3/e5,[2,5,10]),(Math.abs(eB.start)/eB.size+1e-6)%1<2e-6&&(eQ.tick0=0)}eQ.dtick=e1}eQ.domain=G?[eJ+ew/eC.h,eJ+eH-ew/eC.h]:[eJ+e_/eC.w,eJ+eH-e_/eC.w],eQ.setScale(),i.attr("transform",X(Math.round(eC.l),Math.round(eC.t)));var e4=i.select("."+ed.cbtitleunshift).attr("transform",X(-Math.round(eC.l),-Math.round(eC.t))),e6=eQ.ticklabelposition,e8=eQ.title.font.size,e7=i.select("."+ed.cbaxis),e9=0,te=0;function drawTitle(x,_){var F={propContainer:eQ,propName:o._propPrefix+"title",traceIndex:o._traceIndex,_meta:o._meta,placeholder:eM._dfltTitle.colorbar,containerGroup:i.select("."+ed.cbtitle)},N="h"===x.charAt(0)?x.substr(1):"h"+x;i.selectAll("."+N+",."+N+"-math-group").remove(),er.draw(s,x,J(F,_||{}))}return Z.syncOrAsync([F.previousPromises,function(){if(G&&e0||!G&&!e0){var i,o;"top"===eI&&(i=e_+eC.l+eG*eT,o=ew+eC.t+eW*(1-eJ-eH)+3+.75*e8),"bottom"===eI&&(i=e_+eC.l+eG*eT,o=ew+eC.t+eW*(1-eJ)-3-.25*e8),"right"===eI&&(o=ew+eC.t+eW*ek+3+.75*e8,i=e_+eC.l+eG*eJ),drawTitle(eQ._id+"title",{attributes:{x:i,y:o,"text-anchor":G?"start":"middle"}})}},function(){if(!G&&!e0||G&&e0){var F,N=i.select("."+ed.cbtitle),J=N.select("text"),$=[-eg/2,eg/2],et=N.select(".h"+eQ._id+"title-math-group").node(),er=15.6;if(J.node()&&(er=parseInt(J.node().style.fontSize,10)*eu),et?(te=(F=ee.bBox(et)).width,(e9=F.height)>er&&($[1]-=(e9-er)/2)):J.node()&&!J.classed(ed.jsPlaceholder)&&(te=(F=ee.bBox(J.node())).width,e9=F.height),G){if(e9){if(e9+=5,"top"===eI)eQ.domain[1]-=e9/eC.h,$[1]*=-1;else{eQ.domain[0]+=e9/eC.h;var ei=en.lineCount(J);$[1]+=(1-ei)*er}N.attr("transform",X($[0],$[1])),eQ.setScale()}}else te&&("right"===eI&&(eQ.domain[0]+=(te+e8/2)/eC.w),N.attr("transform",X($[0],$[1])),eQ.setScale())}i.selectAll("."+ed.cbfills+",."+ed.cblines).attr("transform",G?X(0,Math.round(eC.h*(1-eQ.domain[1]))):X(Math.round(eC.w*eQ.domain[0]),0)),e7.attr("transform",G?X(0,Math.round(-eC.t)):X(Math.round(-eC.l),0));var eo=i.select("."+ed.cbfills).selectAll("rect."+ed.cbfill).attr("style","").data(eF);eo.enter().append("rect").classed(ed.cbfill,!0).attr("style",""),eo.exit().remove();var es=eO.map(eQ.c2p).map(Math.round).sort(function(i,o){return i-o});eo.each(function(i,F){var N=[0===F?eO[0]:(eF[F]+eF[F-1])/2,F===eF.length-1?eO[1]:(eF[F]+eF[F+1])/2].map(eQ.c2p).map(Math.round);G&&(N[1]=Z.constrain(N[1]+(N[1]>N[0])?1:-1,es[0],es[1]));var j=x.select(this).attr(G?"x":"y",eZ).attr(G?"y":"x",x.min(N)).attr(G?"width":"height",Math.max(ej,2)).attr(G?"height":"width",Math.max(x.max(N)-x.min(N),2));if(o._fillgradient)ee.gradient(j,s,o._id,G?"vertical":"horizontalreversed",o._fillgradient,"fill");else{var X=eR(i).replace("e-","");j.attr("fill",_(X).toHexString())}});var el=i.select("."+ed.cblines).selectAll("path."+ed.cbline).data(eL.color&&eL.width?eN:[]);el.enter().append("path").classed(ed.cbline,!0),el.exit().remove(),el.each(function(i){var o=Math.round(eQ.c2p(i))+eL.width/2%1;x.select(this).attr("d","M"+(G?eZ+","+o:o+","+eZ)+(G?"h":"v")+ej).call(ee.lineGroupStyle,eL.width,eD(i),eL.dash)}),e7.selectAll("g."+eQ._id+"tick,path").remove();var ec=eZ+ej+(eg||0)/2-("outside"===o.ticks?1:0),ef=j.calcTicks(eQ),eh=j.getTickSigns(eQ)[2];return j.drawTicks(s,eQ,{vals:"inside"===eQ.ticks?j.clipEnds(eQ,ef):ef,layer:e7,path:j.makeTickPath(eQ,ec,eh),transFn:j.makeTransTickFn(eQ)}),j.drawLabels(s,eQ,{vals:ef,layer:e7,transFn:j.makeTransTickLabelFn(eQ),labelFns:j.makeLabelFns(eQ,ec)})},function(){if(G&&!e0||!G&&e0){var i,_,F=eQ.position||0,N=eQ._offset+eQ._length/2;if("right"===eI)_=N,i=eC.l+eG*F+10+e8*(eQ.showticklabels?1:.5);else if(i=N,"bottom"===eI&&(_=eC.t+eW*F+10+(-1===e6.indexOf("inside")?eQ.tickfont.size:0)+("intside"!==eQ.ticks&&o.ticklen||0)),"top"===eI){var j=eP.text.split("<br>").length;_=eC.t+eW*F+10-ej-eu*e8*j}drawTitle((G?"h":"v")+eQ._id+"title",{avoid:{selection:x.select(s).selectAll("g."+eQ._id+"tick"),side:eI,offsetTop:G?0:eC.t,offsetLeft:G?eC.l:0,maxShift:G?eM.width:eM.height},attributes:{x:i,y:_,"text-anchor":"middle"},transform:{rotate:G?-90:0,offset:0}})}},F.previousPromises,function(){var x=ej+eg/2;-1===e6.indexOf("inside")&&(en=ee.bBox(e7.node()),x+=G?en.width:en.height),N=e4.select("text");var j=0,Z=G&&"top"===eI,J=!G&&"right"===eI,er=0;if(N.node()&&!N.classed(ed.jsPlaceholder)){var en,eo,es=e4.select(".h"+eQ._id+"title-math-group").node();es&&(G&&e0||!G&&!e0)?(j=(en=ee.bBox(es)).width,eo=en.height):(j=(en=ee.bBox(e4.node())).right-eC.l-(G?eZ:e$),eo=en.bottom-eC.t-(G?e$:eZ),G||"top"!==eI||(x+=en.height,er=en.height)),J&&(N.attr("transform",X(j/2+e8/2,0)),j*=2),x=Math.max(x,G?j:eo)}var el=(G?e_:ew)*2+x+em+eg/2,eu=0;!G&&eP.text&&"bottom"===ex&&ek<=0&&(eu=el/2,el+=eu,er+=eu),eM._hColorbarMoveTitle=eu,eM._hColorbarMoveCBTitle=er;var eE=em+eg,eL=(G?eZ:e$)-eE/2-(G?e_:0),eO=(G?e$:eZ)-(G?eV:ew+er-eu);i.select("."+ed.cbbg).attr("x",eL).attr("y",eO).attr(G?"width":"height",Math.max(el-eu,2)).attr(G?"height":"width",Math.max(eV+eE,2)).call(et.fill,ey).call(et.stroke,o.bordercolor).style("stroke-width",em);var eD=J?Math.max(j-10,0):0;i.selectAll("."+ed.cboutline).attr("x",(G?eZ:e$+e_)+eD).attr("y",(G?e$+ew-eV:eZ)+(Z?e9:0)).attr(G?"width":"height",Math.max(ej,2)).attr(G?"height":"width",Math.max(eV-(G?2*ew+e9:2*e_+eD),2)).call(et.stroke,o.outlinecolor).style({fill:"none","stroke-width":eg});var eR=G?eY*el:0,eB=G?0:(1-eX)*el-er;if(eR=eS?eC.l-eR:-eR,eB=eA?eC.t-eB:-eB,i.attr("transform",X(eR,eB)),!G&&(em||_(ey).getAlpha()&&!_.equals(eM.paper_bgcolor,ey))){var ez=e7.selectAll("text"),eF=ez[0].length,eN=i.select("."+ed.cbbg).node(),eU=ee.bBox(eN),eH=ee.getTranslate(i);ez.each(function(i,o){var s=eF-1;if(0===o||o===s){var x,_=ee.bBox(this),F=ee.getTranslate(this);if(o===s){var N=_.right+F.x;(x=eU.right+eH.x+e$-em-2+eT-N)>0&&(x=0)}else if(0===o){var j=_.left+F.x;(x=eU.left+eH.x+e$+em+2-j)<0&&(x=0)}x&&(eF<3?this.setAttribute("transform","translate("+x+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var eG={},eW=ef[ev],eK=eh[ev],eJ=ef[ex],e1=eh[ex],e2=el-ej;G?("pixels"===ei?(eG.y=ek,eG.t=eV*eJ,eG.b=eV*e1):(eG.t=eG.b=0,eG.yt=ek+$*eJ,eG.yb=ek-$*e1),"pixels"===ep?(eG.x=eT,eG.l=el*eW,eG.r=el*eK):(eG.l=e2*eW,eG.r=e2*eK,eG.xl=eT-ec*eW,eG.xr=eT+ec*eK)):("pixels"===ei?(eG.x=eT,eG.l=eV*eW,eG.r=eV*eK):(eG.l=eG.r=0,eG.xl=eT+$*eW,eG.xr=eT-$*eK),"pixels"===ep?(eG.y=1-ek,eG.t=el*eJ,eG.b=el*e1):(eG.t=e2*eJ,eG.b=e2*e1,eG.yt=ek-ec*eJ,eG.yb=ek+ec*e1));var e3=o.y<.5?"b":"t",e5=o.x<.5?"l":"r";s._fullLayout._reservedMargin[o._id]={};var te={r:eM.width-eL-eR,l:eL+eG.r,b:eM.height-eO-eB,t:eO+eG.b};eS&&eA?F.autoMargin(s,o._id,eG):eS?s._fullLayout._reservedMargin[o._id][e3]=te[e3]:eA?s._fullLayout._reservedMargin[o._id][e5]=te[e5]:G?s._fullLayout._reservedMargin[o._id][e5]=te[e5]:s._fullLayout._reservedMargin[o._id][e3]=te[e3]}],s)}(em,o,i);ey&&ey.then&&(i._promises||[]).push(ey),i._context.edits.colorbarPosition&&(ep="v"===o.orientation,eg=i._fullLayout._size,G.init({element:em.node(),gd:i,prepFn:function(){s=em.attr("transform"),$(em)},moveFn:function(i,x){em.attr("transform",s+X(i,x)),ei=G.align((ep?o._uFrac:o._vFrac)+i/eg.w,ep?o._thickFrac:o._lenFrac,0,1,o.xanchor),ec=G.align((ep?o._vFrac:1-o._uFrac)-x/eg.h,ep?o._lenFrac:o._thickFrac,0,1,o.yanchor),$(em,G.getCursor(ei,ec,o.xanchor,o.yanchor))},doneFn:function(){if($(em),void 0!==ei&&void 0!==ec){var s={};s[o._propPrefix+"x"]=ei,s[o._propPrefix+"y"]=ec,void 0!==o._traceIndex?N.call("_guiRestyle",i,s,o._traceIndex):N.call("_guiRelayout",i,s)}}}))}),o.exit().each(function(o){F.autoMargin(i,o._id)}).remove(),o.order()}}},76228:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i){return x.isPlainObject(i.colorbar)}},12311:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"colorbar",attributes:s(63583),supplyDefaults:s(62499),draw:s(98981).draw,hasColorbar:s(76228)}},50693:function(i,o,s){"use strict";var x=s(63583),_=s(30587).counter,F=s(78607),N=s(63282).scales;function code(i){return"`"+i+"`"}F(N),i.exports=function(i,o){i=i||"";var s,F=(o=o||{}).cLetter||"c";"onlyIfNumerical"in o&&o.onlyIfNumerical;var j="noScale"in o?o.noScale:"marker.line"===i,G="showScaleDflt"in o?o.showScaleDflt:"z"===F,Z="string"==typeof o.colorscaleDflt?N[o.colorscaleDflt]:null,X=o.editTypeOverride||"",J=i?i+".":"";"colorAttr"in o?(s=o.colorAttr,o.colorAttr):code(J+(s=({z:"z",c:"color"})[F]));var $=F+"auto",ee=F+"min",et=F+"max";code(J+$),code(J+ee),code(J+et);var er={};er[ee]=er[et]=void 0;var en={};en[$]=!1;var ei={};return"color"===s&&(ei.color={valType:"color",arrayOk:!0,editType:X||"style"},o.anim&&(ei.color.anim=!0)),ei[$]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:er},ei[ee]={valType:"number",dflt:null,editType:X||"plot",impliedEdits:en},ei[et]={valType:"number",dflt:null,editType:X||"plot",impliedEdits:en},ei[F+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:er},ei.colorscale={valType:"colorscale",editType:"calc",dflt:Z,impliedEdits:{autocolorscale:!1}},ei.autocolorscale={valType:"boolean",dflt:!1!==o.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},ei.reversescale={valType:"boolean",dflt:!1,editType:"plot"},j||(ei.showscale={valType:"boolean",dflt:G,editType:"calc"},ei.colorbar=x),o.noColorAxis||(ei.coloraxis={valType:"subplotid",regex:_("coloraxis"),dflt:null,editType:"calc"}),ei}},78803:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(52075).extractOpts;i.exports=function(i,o,s){var N,j=i._fullLayout,G=s.vals,Z=s.containerStr,X=Z?_.nestedProperty(o,Z).get():o,J=F(X),$=!1!==J.auto,ee=J.min,et=J.max,er=J.mid,minVal=function(){return _.aggNums(Math.min,null,G)},maxVal=function(){return _.aggNums(Math.max,null,G)};void 0===ee?ee=minVal():$&&(ee=X._colorAx&&x(ee)?Math.min(ee,minVal()):minVal()),void 0===et?et=maxVal():$&&(et=X._colorAx&&x(et)?Math.max(et,maxVal()):maxVal()),$&&void 0!==er&&(et-er>er-ee?ee=er-(et-er):et-er<er-ee&&(et=er+(er-ee))),ee===et&&(ee-=.5,et+=.5),J._sync("min",ee),J._sync("max",et),J.autocolorscale&&(N=ee*et<0?j.colorscale.diverging:ee>=0?j.colorscale.sequential:j.colorscale.sequentialminus,J._sync("colorscale",N))}},33046:function(i,o,s){"use strict";var x=s(71828),_=s(52075).hasColorscale,F=s(52075).extractOpts;i.exports=function(i,o){function replace(i,o){var s=i["_"+o];void 0!==s&&(i[o]=s)}function relinkColorAttrs(i,s){var _=s.container?x.nestedProperty(i,s.container).get():i;if(_){if(_.coloraxis)_._colorAx=o[_.coloraxis];else{var N=F(_),j=N.auto;(j||void 0===N.min)&&replace(_,s.min),(j||void 0===N.max)&&replace(_,s.max),N.autocolorscale&&replace(_,"colorscale")}}}for(var s=0;s<i.length;s++){var N=i[s],j=N._module.colorbar;if(j){if(Array.isArray(j))for(var G=0;G<j.length;G++)relinkColorAttrs(N,j[G]);else relinkColorAttrs(N,j)}_(N,"marker.line")&&relinkColorAttrs(N,{container:"marker.line",min:"cmin",max:"cmax"})}for(var Z in o._colorAxes)relinkColorAttrs(o[Z],{min:"cmin",max:"cmax"})}},1586:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(76228),N=s(62499),j=s(63282).isValid,G=s(73972).traceIs;function npMaybe(i,o){var s=o.slice(0,o.length-1);return o?_.nestedProperty(i,s).get()||{}:i}i.exports=function colorScaleDefaults(i,o,s,Z,X){var J,$,ee=X.prefix,et=X.cLetter,er="_module"in o,en=npMaybe(i,ee),ei=npMaybe(o,ee),eo=npMaybe(o._template||{},ee)||{},thisFn=function(){return delete i.coloraxis,delete o.coloraxis,colorScaleDefaults(i,o,s,Z,X)};if(er){var es=s._colorAxes||{},el=Z(ee+"coloraxis");if(el){var ec=G(o,"contour")&&_.nestedProperty(o,"contours.coloring").get()||"heatmap",eu=es[el];eu?(eu[2].push(thisFn),eu[0]!==ec&&(eu[0]=!1,_.warn(["Ignoring coloraxis:",el,"setting","as it is linked to incompatible colorscales."].join(" ")))):es[el]=[ec,o,[thisFn]];return}}var ef=en[et+"min"],eh=en[et+"max"];Z(ee+et+"auto",!(x(ef)&&x(eh)&&ef<eh))?Z(ee+et+"mid"):(Z(ee+et+"min"),Z(ee+et+"max"));var ed=en.colorscale,ep=eo.colorscale;void 0!==ed&&(J=!j(ed)),void 0!==ep&&(J=!j(ep)),Z(ee+"autocolorscale",J),Z(ee+"colorscale"),Z(ee+"reversescale"),"marker.line."!==ee&&(ee&&er&&($=F(en)),Z(ee+"showscale",$)&&(ee&&eo&&(ei._template=eo),N(en,ei,s)))}},52075:function(i,o,s){"use strict";var x=s(39898),_=s(84267),F=s(92770),N=s(71828),j=s(7901),G=s(63282).isValid,Z=["showscale","autocolorscale","colorscale","reversescale","colorbar"],X=["min","max","mid","auto"];function extractOpts(i){var o,s,x,_,F=i._colorAx,N=F||i,j={};for(s=0;s<Z.length;s++)j[x=Z[s]]=N[x];if(F)for(s=0,o="c";s<X.length;s++)j[x=X[s]]=N["c"+x];else{for(s=0;s<X.length;s++){if((_="c"+(x=X[s]))in N){j[x]=N[_];continue}(_="z"+x)in N&&(j[x]=N[_])}o=_.charAt(0)}return j._sync=function(i,s){var x=-1!==X.indexOf(i)?o+i:i;N[x]=N["_"+x]=s},j}function extractScale(i){for(var o=extractOpts(i),s=o.min,x=o.max,_=o.reversescale?flipScale(o.colorscale):o.colorscale,F=_.length,N=Array(F),j=Array(F),G=0;G<F;G++){var Z=_[G];N[G]=s+Z[0]*(x-s),j[G]=Z[1]}return{domain:N,range:j}}function flipScale(i){for(var o=i.length,s=Array(o),x=o-1,_=0;x>=0;x--,_++){var F=i[x];s[_]=[1-F[0],F[1]]}return s}function makeColorScaleFunc(i,o){o=o||{};for(var s,N=i.domain,G=i.range,Z=G.length,X=Array(Z),J=0;J<Z;J++){var $=_(G[J]).toRgb();X[J]=[$.r,$.g,$.b,$.a]}var ee=x.scale.linear().domain(N).range(X).clamp(!0),et=o.noNumericCheck,er=o.returnArray;return(s=et&&er?ee:et?function(i){return colorArray2rbga(ee(i))}:er?function(i){return F(i)?ee(i):_(i).isValid()?i:j.defaultLine}:function(i){return F(i)?colorArray2rbga(ee(i)):_(i).isValid()?i:j.defaultLine}).domain=ee.domain,s.range=function(){return G},s}function colorArray2rbga(i){return _({r:i[0],g:i[1],b:i[2],a:i[3]}).toRgbString()}i.exports={hasColorscale:function(i,o,s){var x=o?N.nestedProperty(i,o).get()||{}:i,_=x[s||"color"],j=!1;if(N.isArrayOrTypedArray(_)){for(var Z=0;Z<_.length;Z++)if(F(_[Z])){j=!0;break}}return N.isPlainObject(x)&&(j||!0===x.showscale||F(x.cmin)&&F(x.cmax)||G(x.colorscale)||N.isPlainObject(x.colorbar))},extractOpts:extractOpts,extractScale:extractScale,flipScale:flipScale,makeColorScaleFunc:makeColorScaleFunc,makeColorScaleFuncFromTrace:function(i,o){return makeColorScaleFunc(extractScale(i),o)}}},21081:function(i,o,s){"use strict";var x=s(63282),_=s(52075);i.exports={moduleType:"component",name:"colorscale",attributes:s(50693),layoutAttributes:s(72673),supplyLayoutDefaults:s(30959),handleDefaults:s(1586),crossTraceDefaults:s(33046),calc:s(78803),scales:x.scales,defaultScale:x.defaultScale,getScale:x.get,isValidScale:x.isValid,hasColorscale:_.hasColorscale,extractOpts:_.extractOpts,extractScale:_.extractScale,flipScale:_.flipScale,makeColorScaleFunc:_.makeColorScaleFunc,makeColorScaleFuncFromTrace:_.makeColorScaleFuncFromTrace}},72673:function(i,o,s){"use strict";var x=s(1426).extendFlat,_=s(50693),F=s(63282).scales;i.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:F.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:F.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:F.RdBu,editType:"calc"}},coloraxis:x({_isSubplotObj:!0,editType:"calc"},_("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(i,o,s){"use strict";var x=s(71828),_=s(44467),F=s(72673),N=s(1586);i.exports=function(i,o){function coerce(s,_){return x.coerce(i,o,F,s,_)}coerce("colorscale.sequential"),coerce("colorscale.sequentialminus"),coerce("colorscale.diverging");var s,j,G=o._colorAxes;function coerceAx(i,o){return x.coerce(s,j,F.coloraxis,i,o)}for(var Z in G){var X=G[Z];if(X[0])s=i[Z]||{},(j=_.newContainer(o,Z,"coloraxis"))._name=Z,N(s,j,o,coerceAx,{prefix:"",cLetter:"c"});else{for(var J=0;J<X[2].length;J++)X[2][J]();delete o._colorAxes[Z]}}}},63282:function(i,o,s){"use strict";var x=s(84267),_={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},F=_.RdBu;function isValidScaleArray(i){var o=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var s=0;s<i.length;s++){var _=i[s];if(2!==_.length||+_[0]<o||!x(_[1]).isValid())return!1;o=+_[0]}return!0}i.exports={scales:_,defaultScale:F,get:function(i,o){if(o||(o=F),!i)return o;function parseScale(){try{i=_[i]||JSON.parse(i)}catch(s){i=o}}return("string"==typeof i&&(parseScale(),"string"==typeof i&&parseScale()),isValidScaleArray(i))?i:o},isValid:function(i){return void 0!==_[i]||isValidScaleArray(i)}}},92807:function(i){"use strict";i.exports=function(i,o,s,x,_){var F=(i-s)/(x-s),N=F+o/(x-s),j=(F+N)/2;return"left"===_||"bottom"===_?F:"center"===_||"middle"===_?j:"right"===_||"top"===_?N:F<2/3-j?F:N>4/3-j?N:j}},70461:function(i,o,s){"use strict";var x=s(71828),_=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];i.exports=function(i,o,s,F){return i="left"===s?0:"center"===s?1:"right"===s?2:x.constrain(Math.floor(3*i),0,2),_[o="bottom"===F?0:"middle"===F?1:"top"===F?2:x.constrain(Math.floor(3*o),0,2)][i]}},64505:function(i,o){"use strict";o.selectMode=function(i){return"lasso"===i||"select"===i},o.drawMode=function(i){return"drawclosedpath"===i||"drawopenpath"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},o.openMode=function(i){return"drawline"===i||"drawopenpath"===i},o.rectMode=function(i){return"select"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},o.freeMode=function(i){return"lasso"===i||"drawclosedpath"===i||"drawopenpath"===i},o.selectingOrDrawing=function(i){return o.freeMode(i)||o.rectMode(i)}},28569:function(i,o,s){"use strict";var x=s(48956),_=s(57035),F=s(38520),N=s(71828).removeElement,j=s(85555),G=i.exports={};G.align=s(92807),G.getCursor=s(70461);var Z=s(26041);function coverSlip(){var i=document.createElement("div");i.className="dragcover";var o=i.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(i),i}function pointerOffset(i){return x(i.changedTouches?i.changedTouches[0]:i,document.body)}G.unhover=Z.wrapped,G.unhoverRaw=Z.raw,G.init=function(i){var o,s,x,Z,X,J,$,ee,et=i.gd,er=1,en=et._context.doubleClickDelay,ei=i.element;et._mouseDownTime||(et._mouseDownTime=0),ei.style.pointerEvents="all",ei.onmousedown=onStart,F?(ei._ontouchstart&&ei.removeEventListener("touchstart",ei._ontouchstart),ei._ontouchstart=onStart,ei.addEventListener("touchstart",onStart,{passive:!1})):ei.ontouchstart=onStart;var eo=i.clampFn||function(i,o,s){return Math.abs(i)<s&&(i=0),Math.abs(o)<s&&(o=0),[i,o]};function onStart(F){et._dragged=!1,et._dragging=!0;var N=pointerOffset(F);o=N[0],s=N[1],$=F.target,J=F,ee=2===F.buttons||F.ctrlKey,void 0===F.clientX&&void 0===F.clientY&&(F.clientX=o,F.clientY=s),(x=new Date().getTime())-et._mouseDownTime<en?er+=1:(er=1,et._mouseDownTime=x),i.prepFn&&i.prepFn(F,o,s),_&&!ee?(X=coverSlip()).style.cursor=window.getComputedStyle(ei).cursor:_||(X=document,Z=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(ei).cursor),document.addEventListener("mouseup",onDone),document.addEventListener("touchend",onDone),!1!==i.dragmode&&(F.preventDefault(),document.addEventListener("mousemove",onMove),document.addEventListener("touchmove",onMove,{passive:!1}))}function onMove(x){x.preventDefault();var _=pointerOffset(x),F=i.minDrag||j.MINDRAG,N=eo(_[0]-o,_[1]-s,F),Z=N[0],X=N[1];(Z||X)&&(et._dragged=!0,G.unhover(et,x)),et._dragged&&i.moveFn&&!ee&&(et._dragdata={element:ei,dx:Z,dy:X},i.moveFn(Z,X))}function onDone(o){if(delete et._dragdata,!1!==i.dragmode&&(o.preventDefault(),document.removeEventListener("mousemove",onMove),document.removeEventListener("touchmove",onMove)),document.removeEventListener("mouseup",onDone),document.removeEventListener("touchend",onDone),_?N(X):Z&&(X.documentElement.style.cursor=Z,Z=null),!et._dragging){et._dragged=!1;return}if(et._dragging=!1,new Date().getTime()-et._mouseDownTime>en&&(er=Math.max(er-1,1)),et._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(er,J),!ee){var s;try{s=new MouseEvent("click",o)}catch(i){var x=pointerOffset(o);(s=document.createEvent("MouseEvents")).initMouseEvent("click",o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,x[0],x[1],o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget)}$.dispatchEvent(s)}et._dragging=!1,et._dragged=!1}},G.coverSlip=coverSlip},26041:function(i,o,s){"use strict";var x=s(11086),_=s(79990),F=s(24401).getGraphDiv,N=s(26675),j=i.exports={};j.wrapped=function(i,o,s){(i=F(i))._fullLayout&&_.clear(i._fullLayout._uid+N.HOVERID),j.raw(i,o,s)},j.raw=function(i,o){var s=i._fullLayout,_=i._hoverdata;o||(o={}),(!o.target||i._dragged||!1!==x.triggerHandler(i,"plotly_beforehover",o))&&(s._hoverlayer.selectAll("g").remove(),s._hoverlayer.selectAll("line").remove(),s._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,o.target&&_&&i.emit("plotly_unhover",{event:o,points:_}))}},79952:function(i,o){"use strict";o.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},o.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(i,o,s){"use strict";var x,_,F,N,j,G,Z,X,J=s(39898),$=s(71828),ee=$.numberFormat,et=s(92770),er=s(84267),en=s(73972),ei=s(7901),eo=s(21081),es=$.strTranslate,el=s(63893),ec=s(77922),eu=s(18783).LINE_SPACING,ef=s(37822).DESELECTDIM,eh=s(34098),ed=s(39984),ep=s(23469).appendArrayPointValue,eg=i.exports={};function setFillStyle(i,o,s){var x=o.fillpattern,_=x&&eg.getPatternAttr(x.shape,0,"");if(_){var F=eg.getPatternAttr(x.bgcolor,0,null),N=eg.getPatternAttr(x.fgcolor,0,null),j=x.fgopacity,G=eg.getPatternAttr(x.size,0,8),Z=eg.getPatternAttr(x.solidity,0,.3),X=o.uid;eg.pattern(i,"point",s,X,_,G,Z,void 0,x.fillmode,F,N,j)}else o.fillcolor&&i.call(ei.fill,o.fillcolor)}eg.font=function(i,o,s,x){$.isPlainObject(o)&&(x=o.color,s=o.size,o=o.family),o&&i.style("font-family",o),s+1&&i.style("font-size",s+"px"),x&&i.call(ei.fill,x)},eg.setPosition=function(i,o,s){i.attr("x",o).attr("y",s)},eg.setSize=function(i,o,s){i.attr("width",o).attr("height",s)},eg.setRect=function(i,o,s,x,_){i.call(eg.setPosition,o,s).call(eg.setSize,x,_)},eg.translatePoint=function(i,o,s,x){var _=s.c2p(i.x),F=x.c2p(i.y);return!!(et(_)&&et(F)&&o.node())&&("text"===o.node().nodeName?o.attr("x",_).attr("y",F):o.attr("transform",es(_,F)),!0)},eg.translatePoints=function(i,o,s){i.each(function(i){var x=J.select(this);eg.translatePoint(i,x,o,s)})},eg.hideOutsideRangePoint=function(i,o,s,x,_,F){o.attr("display",s.isPtWithinRange(i,_)&&x.isPtWithinRange(i,F)?null:"none")},eg.hideOutsideRangePoints=function(i,o){if(o._hasClipOnAxisFalse){var s=o.xaxis,x=o.yaxis;i.each(function(o){var _=o[0].trace,F=_.xcalendar,N=_.ycalendar,j=en.traceIs(_,"bar-like")?".bartext":".point,.textpoint";i.selectAll(j).each(function(i){eg.hideOutsideRangePoint(i,J.select(this),s,x,F,N)})})}},eg.crispRound=function(i,o,s){return o&&et(o)?i._context.staticPlot?o:o<1?1:Math.round(o):s||0},eg.singleLineStyle=function(i,o,s,x,_){o.style("fill","none");var F=(((i||[])[0]||{}).trace||{}).line||{},N=s||F.width||0,j=_||F.dash||"";ei.stroke(o,x||F.color),eg.dashLine(o,j,N)},eg.lineGroupStyle=function(i,o,s,x){i.style("fill","none").each(function(i){var _=(((i||[])[0]||{}).trace||{}).line||{},F=o||_.width||0,N=x||_.dash||"";J.select(this).call(ei.stroke,s||_.color).call(eg.dashLine,N,F)})},eg.dashLine=function(i,o,s){s=+s||0,o=eg.dashStyle(o,s),i.style({"stroke-dasharray":o,"stroke-width":s+"px"})},eg.dashStyle=function(i,o){var s=Math.max(o=+o||1,3);return"solid"===i?i="":"dot"===i?i=s+"px,"+s+"px":"dash"===i?i=3*s+"px,"+3*s+"px":"longdash"===i?i=5*s+"px,"+5*s+"px":"dashdot"===i?i=3*s+"px,"+s+"px,"+s+"px,"+s+"px":"longdashdot"===i&&(i=5*s+"px,"+2*s+"px,"+s+"px,"+2*s+"px"),i},eg.singleFillStyle=function(i,o){var s=((J.select(i.node()).data()[0]||[])[0]||{}).trace||{};setFillStyle(i,s,o)},eg.fillGroupStyle=function(i,o){i.style("stroke-width",0).each(function(i){var s=J.select(this);i[0].trace&&setFillStyle(s,i[0].trace,o)})};var em=s(90998);eg.symbolNames=[],eg.symbolFuncs=[],eg.symbolBackOffs=[],eg.symbolNeedLines={},eg.symbolNoDot={},eg.symbolNoFill={},eg.symbolList=[],Object.keys(em).forEach(function(i){var o=em[i],s=o.n;eg.symbolList.push(s,String(s),i,s+100,String(s+100),i+"-open"),eg.symbolNames[s]=i,eg.symbolFuncs[s]=o.f,eg.symbolBackOffs[s]=o.backoff||0,o.needLine&&(eg.symbolNeedLines[s]=!0),o.noDot?eg.symbolNoDot[s]=!0:eg.symbolList.push(s+200,String(s+200),i+"-dot",s+300,String(s+300),i+"-open-dot"),o.noFill&&(eg.symbolNoFill[s]=!0)});var ey=eg.symbolNames.length;function makePointPath(i,o,s,x){return eg.symbolFuncs[i%100](o,s,x)+(i>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}eg.symbolNumber=function(i){if(et(i))i=+i;else if("string"==typeof i){var o=0;i.indexOf("-open")>0&&(o=100,i=i.replace("-open","")),i.indexOf("-dot")>0&&(o+=200,i=i.replace("-dot","")),(i=eg.symbolNames.indexOf(i))>=0&&(i+=o)}return i%100>=ey||i>=400?0:Math.floor(Math.max(i,0))};var ev={x1:1,x2:0,y1:0,y2:0},ex={x1:0,x2:0,y1:1,y2:0},e_=ee("~f"),ew={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:ev},horizontalreversed:{node:"linearGradient",attrs:ev,reversed:!0},vertical:{node:"linearGradient",attrs:ex},verticalreversed:{node:"linearGradient",attrs:ex,reversed:!0}};eg.gradient=function(i,o,s,x,_,F){for(var N=_.length,j=ew[x],G=Array(N),Z=0;Z<N;Z++)j.reversed?G[N-1-Z]=[e_((1-_[Z][0])*100),_[Z][1]]:G[Z]=[e_(100*_[Z][0]),_[Z][1]];var X=o._fullLayout,ee="g"+X._uid+"-"+s,et=X._defs.select(".gradients").selectAll("#"+ee).data([x+G.join(";")],$.identity);et.exit().remove(),et.enter().append(j.node).each(function(){var i=J.select(this);j.attrs&&i.attr(j.attrs),i.attr("id",ee);var o=i.selectAll("stop").data(G);o.exit().remove(),o.enter().append("stop"),o.each(function(i){var o=er(i[1]);J.select(this).attr({offset:i[0]+"%","stop-color":ei.tinyRGB(o),"stop-opacity":o.getAlpha()})})}),i.style(F,getFullUrl(ee,o)).style(F+"-opacity",null),i.classed("gradient_filled",!0)},eg.pattern=function(i,o,s,x,_,F,N,j,G,Z,X,ee){var et,en,eo,es,el,ec,eu,ef="legend"===o;j&&("overlay"===G?(Z=j,X=ei.contrast(Z)):(Z=void 0,X=j));var eh=s._fullLayout,ed="p"+eh._uid+"-"+x,ep={},eg=er(X),em=ei.tinyRGB(eg),ey=ee*eg.getAlpha();switch(_){case"/":el="M-"+(eo=F*Math.sqrt(2))/4+","+(es=F*Math.sqrt(2))/4+"l"+eo/2+",-"+es/2+"M0,"+es+"L"+eo+",0M"+eo/4*3+","+es/4*5+"l"+eo/2+",-"+es/2,eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":N*F+"px"};break;case"\\":el="M"+(eo=F*Math.sqrt(2))/4*3+",-"+(es=F*Math.sqrt(2))/4+"l"+eo/2+","+es/2+"M0,0L"+eo+","+es+"M-"+eo/4+","+es/4*3+"l"+eo/2+","+es/2,eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":N*F+"px"};break;case"x":el="M-"+(eo=F*Math.sqrt(2))/4+","+(es=F*Math.sqrt(2))/4+"l"+eo/2+",-"+es/2+"M0,"+es+"L"+eo+",0M"+eo/4*3+","+es/4*5+"l"+eo/2+",-"+es/2+"M"+eo/4*3+",-"+es/4+"l"+eo/2+","+es/2+"M0,0L"+eo+","+es+"M-"+eo/4+","+es/4*3+"l"+eo/2+","+es/2,eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":F-F*Math.sqrt(1-N)+"px"};break;case"|":eu="path",el="M"+(eo=F)/2+",0L"+eo/2+","+(es=F),eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":N*F+"px"};break;case"-":eo=F,eu="path",el="M0,"+(es=F)/2+"L"+eo+","+es/2,eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":N*F+"px"};break;case"+":eu="path",el="M"+(eo=F)/2+",0L"+eo/2+","+(es=F)+"M0,"+es/2+"L"+eo+","+es/2,eu="path",ep={d:el,opacity:ey,stroke:em,"stroke-width":F-F*Math.sqrt(1-N)+"px"};break;case".":(eo=F,es=F,N<Math.PI/4)?ec=Math.sqrt(N*F*F/Math.PI):(et=Math.PI/4,ec=(en=F/2)+(F/Math.sqrt(2)-en)*(N-et)/(1-et)),eu="circle",ep={cx:eo/2,cy:es/2,r:ec,opacity:ey,fill:em}}var ev=[_||"noSh",Z||"noBg",X||"noFg",F,N].join(";"),ex=eh._defs.select(".patterns").selectAll("#"+ed).data([ev],$.identity);ex.exit().remove(),ex.enter().append("pattern").each(function(){var i=J.select(this);if(i.attr({id:ed,width:eo+"px",height:es+"px",patternUnits:"userSpaceOnUse",patternTransform:ef?"scale(0.8)":""}),Z){var o=er(Z),s=ei.tinyRGB(o),x=o.getAlpha(),_=i.selectAll("rect").data([0]);_.exit().remove(),_.enter().append("rect").attr({width:eo+"px",height:es+"px",fill:s,"fill-opacity":x})}var F=i.selectAll(eu).data([0]);F.exit().remove(),F.enter().append(eu).attr(ep)}),i.style("fill",getFullUrl(ed,s)).style("fill-opacity",null),i.classed("pattern_filled",!0)},eg.initGradients=function(i){var o=i._fullLayout;$.ensureSingle(o._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),J.select(i).selectAll(".gradient_filled").classed("gradient_filled",!1)},eg.initPatterns=function(i){var o=i._fullLayout;$.ensureSingle(o._defs,"g","patterns").selectAll("pattern").remove(),J.select(i).selectAll(".pattern_filled").classed("pattern_filled",!1)},eg.getPatternAttr=function(i,o,s){return i&&$.isArrayOrTypedArray(i)?o<i.length?i[o]:s:i},eg.pointStyle=function(i,o,s,x){if(i.size()){var _=eg.makePointStyleFns(o);i.each(function(i){eg.singlePointStyle(i,J.select(this),o,_,s,x)})}},eg.singlePointStyle=function(i,o,s,x,_,F){var N,j,G,Z=s.marker,X=Z.line;if(F&&F.i>=0&&void 0===i.i&&(i.i=F.i),o.style("opacity",x.selectedOpacityFn?x.selectedOpacityFn(i):void 0===i.mo?Z.opacity:i.mo),x.ms2mrc){J="various"===i.ms||"various"===Z.size?3:x.ms2mrc(i.ms),i.mrc=J,x.selectedSizeFn&&(J=i.mrc=x.selectedSizeFn(i));var J,ee=eg.symbolNumber(i.mx||Z.symbol)||0;i.om=ee%200>=100;var et=getMarkerAngle(i,s),er=getMarkerStandoff(i,s);o.attr("d",makePointPath(ee,J,et,er))}var en=!1;if(i.so)G=X.outlierwidth,j=X.outliercolor,N=Z.outliercolor;else{var eo=(X||{}).width;G=(i.mlw+1||eo+1||(i.trace?(i.trace.marker.line||{}).width:0)+1)-1||0,j="mlc"in i?i.mlcc=x.lineScale(i.mlc):$.isArrayOrTypedArray(X.color)?ei.defaultLine:X.color,$.isArrayOrTypedArray(Z.color)&&(N=ei.defaultLine,en=!0),N="mc"in i?i.mcc=x.markerScale(i.mc):Z.color||Z.colors||"rgba(0,0,0,0)",x.selectedColorFn&&(N=x.selectedColorFn(i))}if(i.om)o.call(ei.stroke,N).style({"stroke-width":(G||1)+"px",fill:"none"});else{o.style("stroke-width",(i.isBlank?0:G)+"px");var es=Z.gradient,el=i.mgt;el?en=!0:el=es&&es.type,$.isArrayOrTypedArray(el)&&!ew[el=el[0]]&&(el=0);var ec=Z.pattern,eu=ec&&eg.getPatternAttr(ec.shape,i.i,"");if(el&&"none"!==el){var ef=i.mgc;ef?en=!0:ef=es.color;var eh=s.uid;en&&(eh+="-"+i.i),eg.gradient(o,_,eh,el,[[0,ef],[1,N]],"fill")}else if(eu){var ed=!1,ep=ec.fgcolor;!ep&&F&&F.color&&(ep=F.color,ed=!0);var em=eg.getPatternAttr(ep,i.i,F&&F.color||null),ey=eg.getPatternAttr(ec.bgcolor,i.i,null),ev=ec.fgopacity,ex=eg.getPatternAttr(ec.size,i.i,8),e_=eg.getPatternAttr(ec.solidity,i.i,.3);ed=ed||i.mcc||$.isArrayOrTypedArray(ec.shape)||$.isArrayOrTypedArray(ec.bgcolor)||$.isArrayOrTypedArray(ec.fgcolor)||$.isArrayOrTypedArray(ec.size)||$.isArrayOrTypedArray(ec.solidity);var eT=s.uid;ed&&(eT+="-"+i.i),eg.pattern(o,"point",_,eT,eu,ex,e_,i.mcc,ec.fillmode,ey,em,ev)}else $.isArrayOrTypedArray(N)?ei.fill(o,N[i.i]):ei.fill(o,N);G&&ei.stroke(o,j)}},eg.makePointStyleFns=function(i){var o={},s=i.marker;return o.markerScale=eg.tryColorscale(s,""),o.lineScale=eg.tryColorscale(s,"line"),en.traceIs(i,"symbols")&&(o.ms2mrc=eh.isBubble(i)?ed(i):function(){return(s.size||6)/2}),i.selectedpoints&&$.extendFlat(o,eg.makeSelectedPointStyleFns(i)),o},eg.makeSelectedPointStyleFns=function(i){var o={},s=i.selected||{},x=i.unselected||{},_=i.marker||{},F=s.marker||{},N=x.marker||{},j=_.opacity,G=F.opacity,Z=N.opacity,X=void 0!==G,J=void 0!==Z;($.isArrayOrTypedArray(j)||X||J)&&(o.selectedOpacityFn=function(i){var o=void 0===i.mo?_.opacity:i.mo;return i.selected?X?G:o:J?Z:ef*o});var ee=_.color,et=F.color,er=N.color;(et||er)&&(o.selectedColorFn=function(i){var o=i.mcc||ee;return i.selected?et||o:er||o});var ei=_.size,eo=F.size,es=N.size,el=void 0!==eo,ec=void 0!==es;return en.traceIs(i,"symbols")&&(el||ec)&&(o.selectedSizeFn=function(i){var o=i.mrc||ei/2;return i.selected?el?eo/2:o:ec?es/2:o}),o},eg.makeSelectedTextStyleFns=function(i){var o={},s=i.selected||{},x=i.unselected||{},_=i.textfont||{},F=s.textfont||{},N=x.textfont||{},j=_.color,G=F.color,Z=N.color;return o.selectedTextColorFn=function(i){var o=i.tc||j;return i.selected?G||o:Z||(G?o:ei.addOpacity(o,ef))},o},eg.selectedPointStyle=function(i,o){if(i.size()&&o.selectedpoints){var s=eg.makeSelectedPointStyleFns(o),x=o.marker||{},_=[];s.selectedOpacityFn&&_.push(function(i,o){i.style("opacity",s.selectedOpacityFn(o))}),s.selectedColorFn&&_.push(function(i,o){ei.fill(i,s.selectedColorFn(o))}),s.selectedSizeFn&&_.push(function(i,_){var F=_.mx||x.symbol||0,N=s.selectedSizeFn(_);i.attr("d",makePointPath(eg.symbolNumber(F),N,getMarkerAngle(_,o),getMarkerStandoff(_,o))),_.mrc2=N}),_.length&&i.each(function(i){for(var o=J.select(this),s=0;s<_.length;s++)_[s](o,i)})}},eg.tryColorscale=function(i,o){var s=o?$.nestedProperty(i,o).get():i;if(s){var x=s.color;if((s.colorscale||s._colorAx)&&$.isArrayOrTypedArray(x))return eo.makeColorScaleFuncFromTrace(s)}return $.identity};var eT={start:1,end:-1,middle:0,bottom:1,top:-1};function textPointPosition(i,o,s,x,_){var F=J.select(i.node().parentNode),N=-1!==o.indexOf("top")?"top":-1!==o.indexOf("bottom")?"bottom":"middle",j=-1!==o.indexOf("left")?"end":-1!==o.indexOf("right")?"start":"middle",G=x?x/.8+1:0,Z=(el.lineCount(i)-1)*eu+1,X=eT[j]*G,$=.75*s+eT[N]*G+(eT[N]-1)*Z*s/2;i.attr("text-anchor",j),_||F.attr("transform",es(X,$))}function extracTextFontSize(i,o){var s=i.ts||o.textfont.size;return et(s)&&s>0?s:0}function roundEnd(i,o,s){return s&&(i=applyBackoff(i)),o?roundY(i[1]):roundX(i[0])}function roundX(i){var o=J.round(i,2);return x=o,o}function roundY(i){var o=J.round(i,2);return _=o,o}function makeTangent(i,o,s,x){var _=i[0]-o[0],F=i[1]-o[1],N=s[0]-o[0],j=s[1]-o[1],G=Math.pow(_*_+F*F,.25),Z=Math.pow(N*N+j*j,.25),X=(Z*Z*_-G*G*N)*x,J=(Z*Z*F-G*G*j)*x,$=3*Z*(G+Z),ee=3*G*(G+Z);return[[roundX(o[0]+($&&X/$)),roundY(o[1]+($&&J/$))],[roundX(o[0]-(ee&&X/ee)),roundY(o[1]-(ee&&J/ee))]]}eg.textPointStyle=function(i,o,s){if(i.size()){if(o.selectedpoints){var x;x=eg.makeSelectedTextStyleFns(o).selectedTextColorFn}var _=o.texttemplate,F=s._fullLayout;i.each(function(i){var N=J.select(this),j=_?$.extractOption(i,o,"txt","texttemplate"):$.extractOption(i,o,"tx","text");if(!j&&0!==j){N.remove();return}if(_){var G=o._module.formatLabels,Z=G?G(i,o,F):{},X={};ep(X,o,i.i);var ee=o._meta||{};j=$.texttemplateString(j,Z,F._d3locale,X,i,ee)}var et=i.tp||o.textposition,er=extracTextFontSize(i,o),en=x?x(i):i.tc||o.textfont.color;N.call(eg.font,i.tf||o.textfont.family,er,en).text(j).call(el.convertToTspans,s).call(textPointPosition,et,er,i.mrc)})}},eg.selectedTextStyle=function(i,o){if(i.size()&&o.selectedpoints){var s=eg.makeSelectedTextStyleFns(o);i.each(function(i){var x=J.select(this),_=s.selectedTextColorFn(i),F=i.tp||o.textposition,N=extracTextFontSize(i,o);ei.fill(x,_);var j=en.traceIs(o,"bar-like");textPointPosition(x,F,N,i.mrc2||i.mrc,j)})}},eg.smoothopen=function(i,o){if(i.length<3)return"M"+i.join("L");var s,x="M"+i[0],_=[];for(s=1;s<i.length-1;s++)_.push(makeTangent(i[s-1],i[s],i[s+1],o));for(x+="Q"+_[0][0]+" "+i[1],s=2;s<i.length-1;s++)x+="C"+_[s-2][1]+" "+_[s-1][0]+" "+i[s];return x+("Q"+_[i.length-3][1]+" ")+i[i.length-1]},eg.smoothclosed=function(i,o){if(i.length<3)return"M"+i.join("L")+"Z";var s,x="M"+i[0],_=i.length-1,F=[makeTangent(i[_],i[0],i[1],o)];for(s=1;s<_;s++)F.push(makeTangent(i[s-1],i[s],i[s+1],o));for(F.push(makeTangent(i[_-1],i[_],i[0],o)),s=1;s<=_;s++)x+="C"+F[s-1][1]+" "+F[s][0]+" "+i[s];return x+("C"+F[_][1]+" "+F[0][0]+" "+i[0])+"Z"};var ek={hv:function(i,o,s){return"H"+roundX(o[0])+"V"+roundEnd(o,1,s)},vh:function(i,o,s){return"V"+roundY(o[1])+"H"+roundEnd(o,0,s)},hvh:function(i,o,s){return"H"+roundX((i[0]+o[0])/2)+"V"+roundY(o[1])+"H"+roundEnd(o,0,s)},vhv:function(i,o,s){return"V"+roundY((i[1]+o[1])/2)+"H"+roundX(o[0])+"V"+roundEnd(o,1,s)}},STEPLINEAR=function(i,o,s){return"L"+roundEnd(o,0,s)+","+roundEnd(o,1,s)};function applyBackoff(i,o){var s=i.backoff,F=i.trace,N=i.d,j=i.i;if(s&&F&&F.marker&&F.marker.angle%360==0&&F.line&&"spline"!==F.line.shape){var G=$.isArrayOrTypedArray(s),Z=i,X=o?o[0]:x||0,J=o?o[1]:_||0,ee=Z[0],et=Z[1],er=Math.atan2(et-J,ee-X),en=G?s[j]:s;if("auto"===en){var ei=Z.i;"scatter"===F.type&&ei--;var eo=Z.marker,es=eo.symbol;$.isArrayOrTypedArray(es)&&(es=es[ei]);var el=eo.size;$.isArrayOrTypedArray(el)&&(el=el[ei]),en=(eo?eg.symbolBackOffs[eg.symbolNumber(es)]*el:0)+(eg.getMarkerStandoff(N[ei],F)||0)}var ec=ee-en*Math.cos(er),eu=et-en*Math.sin(er);(ec<=ee&&ec>=X||ec>=ee&&ec<=X)&&(eu<=et&&eu>=J||eu>=et&&eu<=J)&&(i=[ec,eu])}return i}eg.steps=function(i){var o=ek[i]||STEPLINEAR;return function(i){for(var s="M"+roundX(i[0][0])+","+roundY(i[0][1]),x=i.length,_=1;_<x;_++)s+=o(i[_-1],i[_],_===x-1);return s}},eg.applyBackoff=applyBackoff,eg.makeTester=function(){var i=$.ensureSingleById(J.select("body"),"svg","js-plotly-tester",function(i){i.attr(ec.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),o=$.ensureSingle(i,"path","js-reference-point",function(i){i.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});eg.tester=i,eg.testref=o},eg.savedBBoxes={};var eA=0;function nodeHash(i){var o=i.getAttribute("data-unformatted");if(null!==o)return o+i.getAttribute("data-math")+i.getAttribute("text-anchor")+i.getAttribute("style")}function getFullUrl(i,o){if(!i)return null;var s=o._context,x=s._exportedPlot?"":s._baseUrl||"";return x?"url('"+x+"#"+i+"')":"url(#"+i+")"}eg.bBox=function(i,o,s){if(s||(s=nodeHash(i)),s){if(x=eg.savedBBoxes[s])return $.extendFlat({},x)}else if(1===i.childNodes.length){var x,_,F,N=i.childNodes[0];if(s=nodeHash(N)){var j=+N.getAttribute("x")||0,G=+N.getAttribute("y")||0,Z=N.getAttribute("transform");if(!Z){var X=eg.bBox(N,!1,s);return j&&(X.left+=j,X.right+=j),G&&(X.top+=G,X.bottom+=G),X}if(s+="~"+j+"~"+G+"~"+Z,x=eg.savedBBoxes[s])return $.extendFlat({},x)}}o?_=i:(F=eg.tester.node(),_=i.cloneNode(!0),F.appendChild(_)),J.select(_).attr("transform",null).call(el.positionText,0,0);var ee=_.getBoundingClientRect(),et=eg.testref.node().getBoundingClientRect();o||F.removeChild(_);var er={height:ee.height,width:ee.width,left:ee.left-et.left,top:ee.top-et.top,right:ee.right-et.left,bottom:ee.bottom-et.top};return eA>=1e4&&(eg.savedBBoxes={},eA=0),s&&(eg.savedBBoxes[s]=er),eA++,$.extendFlat({},er)},eg.setClipUrl=function(i,o,s){i.attr("clip-path",getFullUrl(o,s))},eg.getTranslate=function(i){var o=i.attr?"attr":"getAttribute",s=(i[o]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(i,o,s){return[o,s].join(" ")}).split(" ");return{x:+s[0]||0,y:+s[1]||0}},eg.setTranslate=function(i,o,s){var x=i.attr?"attr":"getAttribute",_=i.attr?"attr":"setAttribute",F=i[x]("transform")||"";return o=o||0,s=s||0,F=(F=F.replace(/(\btranslate\(.*?\);?)/,"").trim()+es(o,s)).trim(),i[_]("transform",F),F},eg.getScale=function(i){var o=i.attr?"attr":"getAttribute",s=(i[o]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(i,o,s){return[o,s].join(" ")}).split(" ");return{x:+s[0]||1,y:+s[1]||1}},eg.setScale=function(i,o,s){var x=i.attr?"attr":"getAttribute",_=i.attr?"attr":"setAttribute",F=i[x]("transform")||"";return o=o||1,s=s||1,F=(F=F.replace(/(\bscale\(.*?\);?)/,"").trim()+("scale("+o+",")+s+")").trim(),i[_]("transform",F),F};var eS=/\s*sc.*/;eg.setPointGroupScale=function(i,o,s){if(o=o||1,s=s||1,i){var x=1===o&&1===s?"":"scale("+o+","+s+")";i.each(function(){var i=(this.getAttribute("transform")||"").replace(eS,"");i+=x,i=i.trim(),this.setAttribute("transform",i)})}};var eM=/translate\([^)]*\)\s*$/;function getMarkerStandoff(i,o){var s;return(i&&(s=i.mf),void 0===s&&(s=o.marker&&o.marker.standoff||0),o._geo||o._xA)?s:-s}eg.setTextPointsScale=function(i,o,s){i&&i.each(function(){var i,x=J.select(this),_=x.select("text");if(_.node()){var F=parseFloat(_.attr("x")||0),N=parseFloat(_.attr("y")||0),j=(x.attr("transform")||"").match(eM);i=1===o&&1===s?[]:[es(F,N),"scale("+o+","+s+")",es(-F,-N)],j&&i.push(j),x.attr("transform",i.join(""))}})},eg.getMarkerStandoff=getMarkerStandoff;var eC=Math.atan2,eE=Math.cos,eL=Math.sin;function rotate(i,o){var s=o[0],x=o[1];return[s*eE(i)-x*eL(i),s*eL(i)+x*eE(i)]}function getMarkerAngle(i,o){var s=i.ma;void 0===s&&(s=o.marker.angle||0);var x=o.marker.angleref;if("previous"===x||"north"===x){if(o._geo){var _=o._geo.project(i.lonlat);ee=_[0],er=_[1]}else{var J=o._xA,$=o._yA;if(!J||!$)return 90;ee=J.c2p(i.x),er=$.c2p(i.y)}if(o._geo){var ee,er,en,ei=i.lonlat[0],eo=i.lonlat[1],es=o._geo.project([ei,eo+1e-5]),el=o._geo.project([ei+1e-5,eo]),ec=eC(el[1]-er,el[0]-ee),eu=eC(es[1]-er,es[0]-ee);if("north"===x)en=s/180*Math.PI;else if("previous"===x){var ef=eo/180*Math.PI,eh=N/180*Math.PI,ed=F/180*Math.PI-ei/180*Math.PI;en=-eC(eE(eh)*eL(ed),eL(eh)*eE(ef)-eE(eh)*eL(ef)*eE(ed))-Math.PI,F=ei,N=eo}var ep=rotate(ec,[eE(en),0]),eg=rotate(eu,[eL(en),0]);s=eC(ep[1]+eg[1],ep[0]+eg[0])/Math.PI*180,"previous"!==x||X===o.uid&&i.i===Z+1||(s=null)}if("previous"===x&&!o._geo){if(X===o.uid&&i.i===Z+1&&et(ee)&&et(er)){var em=ee-j,ey=er-G,ev=o.line&&o.line.shape||"",ex=ev.slice(ev.length-1);"h"===ex&&(ey=0),"v"===ex&&(em=0),s+=eC(ey,em)/Math.PI*180+90}else s=null}}return j=ee,G=er,Z=i.i,X=o.uid,s}eg.getMarkerAngle=getMarkerAngle},90998:function(i,o,s){"use strict";var x,_,F,N,j=s(95616),G=s(39898).round,Z="M0,0Z",X=Math.sqrt(2),J=Math.sqrt(3),$=Math.PI,ee=Math.cos,et=Math.sin;function skipAngle(i){return null===i}function align(i,o,s){if((!i||i%360==0)&&!o)return s;if(F===i&&N===o&&x===s)return _;function rotate(i,s){var x=ee(i),_=et(i),F=s[0],N=s[1]+(o||0);return[F*x-N*_,F*_+N*x]}F=i,N=o,x=s;for(var G=i/180*$,Z=0,X=0,J=j(s),er="",en=0;en<J.length;en++){var ei=J[en],eo=ei[0],es=Z,el=X;if("M"===eo||"L"===eo)Z=+ei[1],X=+ei[2];else if("m"===eo||"l"===eo)Z+=+ei[1],X+=+ei[2];else if("H"===eo)Z=+ei[1];else if("h"===eo)Z+=+ei[1];else if("V"===eo)X=+ei[1];else if("v"===eo)X+=+ei[1];else if("A"===eo){Z=+ei[1],X=+ei[2];var ec=rotate(G,[+ei[6],+ei[7]]);ei[6]=ec[0],ei[7]=ec[1],ei[3]=+ei[3]+i}("H"===eo||"V"===eo)&&(eo="L"),("h"===eo||"v"===eo)&&(eo="l"),("m"===eo||"l"===eo)&&(Z-=es,X-=el);var eu=rotate(G,[Z,X]);("H"===eo||"V"===eo)&&(eo="L"),("M"===eo||"L"===eo||"m"===eo||"l"===eo)&&(ei[1]=eu[0],ei[2]=eu[1]),ei[0]=eo,er+=ei[0]+ei.slice(1).join(",")}return _=er,er}i.exports={circle:{n:0,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2),_="M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z";return s?align(o,s,_):_}},square:{n:1,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z")}},diamond:{n:2,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.3*i,2);return align(o,s,"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"Z")}},cross:{n:3,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.4*i,2),_=G(1.2*i,2);return align(o,s,"M"+_+","+x+"H"+x+"V"+_+"H-"+x+"V"+x+"H-"+_+"V-"+x+"H-"+x+"V-"+_+"H"+x+"V-"+x+"H"+_+"Z")}},x:{n:4,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.8*i/X,2),_="l"+x+","+x,F="l"+x+",-"+x,N="l-"+x+",-"+x,j="l-"+x+","+x;return align(o,s,"M0,"+x+_+F+N+F+N+j+N+j+_+j+_+"Z")}},"triangle-up":{n:5,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i/J,2);return align(o,s,"M-"+x+","+G(i/2,2)+"H"+x+"L0,-"+G(i,2)+"Z")}},"triangle-down":{n:6,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i/J,2);return align(o,s,"M-"+x+",-"+G(i/2,2)+"H"+x+"L0,"+G(i,2)+"Z")}},"triangle-left":{n:7,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i/J,2);return align(o,s,"M"+G(i/2,2)+",-"+x+"V"+x+"L-"+G(i,2)+",0Z")}},"triangle-right":{n:8,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i/J,2);return align(o,s,"M-"+G(i/2,2)+",-"+x+"V"+x+"L"+G(i,2)+",0Z")}},"triangle-ne":{n:9,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.6*i,2),_=G(1.2*i,2);return align(o,s,"M-"+_+",-"+x+"H"+x+"V"+_+"Z")}},"triangle-se":{n:10,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.6*i,2),_=G(1.2*i,2);return align(o,s,"M"+x+",-"+_+"V"+x+"H-"+_+"Z")}},"triangle-sw":{n:11,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.6*i,2),_=G(1.2*i,2);return align(o,s,"M"+_+","+x+"H-"+x+"V-"+_+"Z")}},"triangle-nw":{n:12,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.6*i,2),_=G(1.2*i,2);return align(o,s,"M-"+x+","+_+"V-"+x+"H"+_+"Z")}},pentagon:{n:13,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.951*i,2),_=G(.588*i,2),F=G(-i,2),N=G(-.309*i,2);return align(o,s,"M"+x+","+N+"L"+_+","+G(.809*i,2)+"H-"+_+"L-"+x+","+N+"L0,"+F+"Z")}},hexagon:{n:14,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2),_=G(i/2,2),F=G(i*J/2,2);return align(o,s,"M"+F+",-"+_+"V"+_+"L0,"+x+"L-"+F+","+_+"V-"+_+"L0,-"+x+"Z")}},hexagon2:{n:15,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2),_=G(i/2,2),F=G(i*J/2,2);return align(o,s,"M-"+_+","+F+"H"+_+"L"+x+",0L"+_+",-"+F+"H-"+_+"L-"+x+",0Z")}},octagon:{n:16,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.924*i,2),_=G(.383*i,2);return align(o,s,"M-"+_+",-"+x+"H"+_+"L"+x+",-"+_+"V"+_+"L"+_+","+x+"H-"+_+"L-"+x+","+_+"V-"+_+"Z")}},star:{n:17,f:function(i,o,s){if(skipAngle(o))return Z;var x=1.4*i,_=G(.225*x,2),F=G(.951*x,2),N=G(.363*x,2),j=G(.588*x,2),X=G(-x,2),J=G(-.309*x,2),$=G(.118*x,2),ee=G(.809*x,2);return align(o,s,"M"+_+","+J+"H"+F+"L"+N+","+$+"L"+j+","+ee+"L0,"+G(.382*x,2)+"L-"+j+","+ee+"L-"+N+","+$+"L-"+F+","+J+"H-"+_+"L0,"+X+"Z")}},hexagram:{n:18,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.66*i,2),_=G(.38*i,2),F=G(.76*i,2);return align(o,s,"M-"+F+",0l-"+_+",-"+x+"h"+F+"l"+_+",-"+x+"l"+_+","+x+"h"+F+"l-"+_+","+x+"l"+_+","+x+"h-"+F+"l-"+_+","+x+"l-"+_+",-"+x+"h-"+F+"Z")}},"star-triangle-up":{n:19,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i*J*.8,2),_=G(.8*i,2),F=G(1.6*i,2),N=G(4*i,2),j="A "+N+","+N+" 0 0 1 ";return align(o,s,"M-"+x+","+_+j+x+","+_+j+"0,-"+F+j+"-"+x+","+_+"Z")}},"star-triangle-down":{n:20,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i*J*.8,2),_=G(.8*i,2),F=G(1.6*i,2),N=G(4*i,2),j="A "+N+","+N+" 0 0 1 ";return align(o,s,"M"+x+",-"+_+j+"-"+x+",-"+_+j+"0,"+F+j+x+",-"+_+"Z")}},"star-square":{n:21,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.1*i,2),_=G(2*i,2),F="A "+_+","+_+" 0 0 1 ";return align(o,s,"M-"+x+",-"+x+F+"-"+x+","+x+F+x+","+x+F+x+",-"+x+F+"-"+x+",-"+x+"Z")}},"star-diamond":{n:22,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.4*i,2),_=G(1.9*i,2),F="A "+_+","+_+" 0 0 1 ";return align(o,s,"M-"+x+",0"+F+"0,"+x+F+x+",0"+F+"0,-"+x+F+"-"+x+",0Z")}},"diamond-tall":{n:23,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(.7*i,2),_=G(1.4*i,2);return align(o,s,"M0,"+_+"L"+x+",0L0,-"+_+"L-"+x+",0Z")}},"diamond-wide":{n:24,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.4*i,2),_=G(.7*i,2);return align(o,s,"M0,"+_+"L"+x+",0L0,-"+_+"L-"+x+",0Z")}},hourglass:{n:25,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"H-"+x+"L"+x+",-"+x+"H-"+x+"Z")},noDot:!0},bowtie:{n:26,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"V-"+x+"L-"+x+","+x+"V-"+x+"Z")},noDot:!0},"circle-cross":{n:27,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2),_=G(i/X,2);return align(o,s,"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+x+",0A"+x+","+x+" 0 1,1 0,-"+x+"A"+x+","+x+" 0 0,1 "+x+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+x+","+x+"H-"+x+"V-"+x+"H"+x+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.3*i,2);return align(o,s,"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"ZM0,-"+x+"V"+x+"M-"+x+",0H"+x)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.3*i,2),_=G(.65*i,2);return align(o,s,"M"+x+",0L0,"+x+"L-"+x+",0L0,-"+x+"ZM-"+_+",-"+_+"L"+_+","+_+"M-"+_+","+_+"L"+_+",-"+_)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.4*i,2);return align(o,s,"M0,"+x+"V-"+x+"M"+x+",0H-"+x)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.2*i,2),_=G(.85*i,2);return align(o,s,"M0,"+x+"V-"+x+"M"+x+",0H-"+x+"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i/2,2),_=G(i,2);return align(o,s,"M"+x+","+_+"V-"+_+"M"+(x-_)+",-"+_+"V"+_+"M"+_+","+x+"H-"+_+"M-"+_+","+(x-_)+"H"+_)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.2*i,2),_=G(1.6*i,2),F=G(.8*i,2);return align(o,s,"M-"+x+","+F+"L0,0M"+x+","+F+"L0,0M0,-"+_+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.2*i,2),_=G(1.6*i,2),F=G(.8*i,2);return align(o,s,"M-"+x+",-"+F+"L0,0M"+x+",-"+F+"L0,0M0,"+_+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.2*i,2),_=G(1.6*i,2),F=G(.8*i,2);return align(o,s,"M"+F+","+x+"L0,0M"+F+",-"+x+"L0,0M-"+_+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.2*i,2),_=G(1.6*i,2),F=G(.8*i,2);return align(o,s,"M-"+F+","+x+"L0,0M-"+F+",-"+x+"L0,0M"+_+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.4*i,2);return align(o,s,"M"+x+",0H-"+x)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(1.4*i,2);return align(o,s,"M0,"+x+"V-"+x)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M"+x+","+x+"L-"+x+",-"+x)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M0,0L-"+x+","+G(2*i,2)+"H"+x+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M0,0L-"+x+",-"+G(2*i,2)+"H"+x+"Z")},noDot:!0},"arrow-left":{n:47,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i,2),_=G(i,2);return align(o,s,"M0,0L"+x+",-"+_+"V"+_+"Z")},noDot:!0},"arrow-right":{n:48,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i,2),_=G(i,2);return align(o,s,"M0,0L-"+x+",-"+_+"V"+_+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M-"+x+",0H"+x+"M0,0L-"+x+","+G(2*i,2)+"H"+x+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(i,2);return align(o,s,"M-"+x+",0H"+x+"M0,0L-"+x+",-"+G(2*i,2)+"H"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i,2),_=G(i,2);return align(o,s,"M0,-"+_+"V"+_+"M0,0L"+x+",-"+_+"V"+_+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(i,o,s){if(skipAngle(o))return Z;var x=G(2*i,2),_=G(i,2);return align(o,s,"M0,-"+_+"V"+_+"M0,0L-"+x+",-"+_+"V"+_+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(i,o,s){if(skipAngle(o))return Z;var x=$/2.5,_=2*i*ee(x),F=2*i*et(x);return align(o,s,"M0,0L"+-_+","+F+"L"+_+","+F+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(i,o,s){if(skipAngle(o))return Z;var x=$/4,_=2*i*ee(x),F=2*i*et(x);return align(o,s,"M0,0L"+-_+","+F+"A "+2*i+","+2*i+" 0 0 1 "+_+","+F+"Z")},backoff:.4,noDot:!0}}},25673:function(i){"use strict";i.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(i,o,s){"use strict";var x=s(92770),_=s(73972),F=s(89298),N=s(71828),j=s(45827);function calcOneAxis(i,o,s,_){var G=o["error_"+_]||{},Z=G.visible&&-1!==["linear","log"].indexOf(s.type),X=[];if(Z){for(var J=j(G),$=0;$<i.length;$++){var ee=i[$],et=ee.i;if(void 0===et)et=$;else if(null===et)continue;var er=ee[_];if(x(s.c2l(er))){var en=J(er,et);if(x(en[0])&&x(en[1])){var ei=ee[_+"s"]=er-en[0],eo=ee[_+"h"]=er+en[1];X.push(ei,eo)}}}var es=s._id,el=o._extremes[es],ec=F.findExtremes(s,X,N.extendFlat({tozero:el.opts.tozero},{padded:!0}));el.min=el.min.concat(ec.min),el.max=el.max.concat(ec.max)}}i.exports=function(i){for(var o=i.calcdata,s=0;s<o.length;s++){var x=o[s],N=x[0].trace;if(!0===N.visible&&_.traceIs(N,"errorBarsOK")){var j=F.getFromId(i,N.xaxis),G=F.getFromId(i,N.yaxis);calcOneAxis(x,N,j,"x"),calcOneAxis(x,N,G,"y")}}}},45827:function(i){"use strict";function makeComputeErrorValue(i,o){return"percent"===i?function(i){return Math.abs(i*o/100)}:"constant"===i?function(){return Math.abs(o)}:"sqrt"===i?function(i){return Math.sqrt(Math.abs(i))}:void 0}i.exports=function(i){var o=i.type,s=i.symmetric;if("data"===o){var x=i.array||[];if(s)return function(i,o){var s=+x[o];return[s,s]};var _=i.arrayminus||[];return function(i,o){var s=+x[o],F=+_[o];return isNaN(s)&&isNaN(F)?[NaN,NaN]:[F||0,s||0]}}var F=makeComputeErrorValue(o,i.value),N=makeComputeErrorValue(o,i.valueminus);return s||void 0===i.valueminus?function(i){var o=F(i);return[o,o]}:function(i){return[N(i),F(i)]}}},97587:function(i,o,s){"use strict";var x=s(92770),_=s(73972),F=s(71828),N=s(44467),j=s(25673);i.exports=function(i,o,s,G){var Z="error_"+G.axis,X=N.newContainer(o,Z),J=i[Z]||{};function coerce(i,o){return F.coerce(J,X,j,i,o)}if(!1!==coerce("visible",void 0!==J.array||void 0!==J.value||"sqrt"===J.type)){var $=coerce("type","array"in J?"data":"percent"),ee=!0;"sqrt"!==$&&(ee=coerce("symmetric",!(("data"===$?"arrayminus":"valueminus")in J))),"data"===$?(coerce("array"),coerce("traceref"),ee||(coerce("arrayminus"),coerce("tracerefminus"))):"percent"!==$&&"constant"!==$||(coerce("value"),ee||coerce("valueminus"));var et="copy_"+G.inherit+"style";G.inherit&&(o["error_"+G.inherit]||{}).visible&&coerce(et,!(J.color||x(J.thickness)||x(J.width))),G.inherit&&X[et]||(coerce("color",s),coerce("thickness"),coerce("width",_.traceIs(o,"gl3d")?0:4))}}},37369:function(i,o,s){"use strict";var x=s(71828),_=s(30962).overrideAll,F=s(25673),N={error_x:x.extendFlat({},F),error_y:x.extendFlat({},F)};delete N.error_x.copy_zstyle,delete N.error_y.copy_zstyle,delete N.error_y.copy_ystyle;var j={error_x:x.extendFlat({},F),error_y:x.extendFlat({},F),error_z:x.extendFlat({},F)};delete j.error_x.copy_ystyle,delete j.error_y.copy_ystyle,delete j.error_z.copy_ystyle,delete j.error_z.copy_zstyle,i.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:N,bar:N,histogram:N,scatter3d:_(j,"calc","nested"),scattergl:_(N,"calc","nested")}},supplyDefaults:s(97587),calc:s(84532),makeComputeError:s(45827),plot:s(19398),style:s(62662),hoverInfo:function(i,o,s){(o.error_y||{}).visible&&(s.yerr=i.yh-i.y,o.error_y.symmetric||(s.yerrneg=i.y-i.ys)),(o.error_x||{}).visible&&(s.xerr=i.xh-i.x,o.error_x.symmetric||(s.xerrneg=i.x-i.xs))}}},19398:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(91424),N=s(34098);i.exports=function(i,o,s,j){var G=s.xaxis,Z=s.yaxis,X=j&&j.duration>0,J=i._context.staticPlot;o.each(function(o){var $,ee=o[0].trace,et=ee.error_x||{},er=ee.error_y||{};ee.ids&&($=function(i){return i.id});var en=N.hasMarkers(ee)&&ee.marker.maxdisplayed>0;er.visible||et.visible||(o=[]);var ei=x.select(this).selectAll("g.errorbar").data(o,$);if(ei.exit().remove(),o.length){et.visible||ei.selectAll("path.xerror").remove(),er.visible||ei.selectAll("path.yerror").remove(),ei.style("opacity",1);var eo=ei.enter().append("g").classed("errorbar",!0);X&&eo.style("opacity",0).transition().duration(j.duration).style("opacity",1),F.setClipUrl(ei,s.layerClipId,i),ei.each(function(i){var o,s,F=x.select(this),N=(o={x:G.c2p(i.x),y:Z.c2p(i.y)},void 0===i.yh||(o.yh=Z.c2p(i.yh),o.ys=Z.c2p(i.ys),_(o.ys)||(o.noYS=!0,o.ys=Z.c2p(i.ys,!0))),void 0===i.xh||(o.xh=G.c2p(i.xh),o.xs=G.c2p(i.xs),_(o.xs)||(o.noXS=!0,o.xs=G.c2p(i.xs,!0))),o);if(!en||i.vis){var $=F.select("path.yerror");if(er.visible&&_(N.x)&&_(N.yh)&&_(N.ys)){var ee=er.width;s="M"+(N.x-ee)+","+N.yh+"h"+2*ee+"m-"+ee+",0V"+N.ys,N.noYS||(s+="m-"+ee+",0h"+2*ee),$.size()?X&&($=$.transition().duration(j.duration).ease(j.easing)):$=F.append("path").style("vector-effect",J?"none":"non-scaling-stroke").classed("yerror",!0),$.attr("d",s)}else $.remove();var ei=F.select("path.xerror");if(et.visible&&_(N.y)&&_(N.xh)&&_(N.xs)){var eo=(et.copy_ystyle?er:et).width;s="M"+N.xh+","+(N.y-eo)+"v"+2*eo+"m0,-"+eo+"H"+N.xs,N.noXS||(s+="m0,-"+eo+"v"+2*eo),ei.size()?X&&(ei=ei.transition().duration(j.duration).ease(j.easing)):ei=F.append("path").style("vector-effect",J?"none":"non-scaling-stroke").classed("xerror",!0),ei.attr("d",s)}else ei.remove()}})}})}},62662:function(i,o,s){"use strict";var x=s(39898),_=s(7901);i.exports=function(i){i.each(function(i){var o=i[0].trace,s=o.error_y||{},F=o.error_x||{},N=x.select(this);N.selectAll("path.yerror").style("stroke-width",s.thickness+"px").call(_.stroke,s.color),F.copy_ystyle&&(F=s),N.selectAll("path.xerror").style("stroke-width",F.thickness+"px").call(_.stroke,F.color)})}},77914:function(i,o,s){"use strict";var x=s(41940),_=s(528).hoverlabel,F=s(1426).extendFlat;i.exports={hoverlabel:{bgcolor:F({},_.bgcolor,{arrayOk:!0}),bordercolor:F({},_.bordercolor,{arrayOk:!0}),font:x({arrayOk:!0,editType:"none"}),align:F({},_.align,{arrayOk:!0}),namelength:F({},_.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(i,o,s){"use strict";var x=s(71828),_=s(73972);function paste(i,o,s,_){_=_||x.identity,Array.isArray(i)&&(o[0][s]=_(i))}i.exports=function(i){for(var o=i.calcdata,s=i._fullLayout,F=0;F<o.length;F++){var N=o[F],j=N[0].trace;if(!_.traceIs(j,"pie-like")){var G=_.traceIs(j,"2dMap")?paste:x.fillArray;G(j.hoverinfo,N,"hi",function(i){return function(o){return x.coerceHoverinfo({hoverinfo:o},{_module:i._module},s)}}(j)),j.hovertemplate&&G(j.hovertemplate,N,"ht"),j.hoverlabel&&(G(j.hoverlabel.bgcolor,N,"hbg"),G(j.hoverlabel.bordercolor,N,"hbc"),G(j.hoverlabel.font.size,N,"hts"),G(j.hoverlabel.font.color,N,"htc"),G(j.hoverlabel.font.family,N,"htf"),G(j.hoverlabel.namelength,N,"hnl"),G(j.hoverlabel.align,N,"hta"))}}}},75914:function(i,o,s){"use strict";var x=s(73972),_=s(88335).hover;i.exports=function(i,o,s){var F=x.getComponentMethod("annotations","onClick")(i,i._hoverdata);function emitClick(){i.emit("plotly_click",{points:i._hoverdata,event:o})}void 0!==s&&_(i,o,s,!0),i._hoverdata&&o&&o.target&&(F&&F.then?F.then(emitClick):emitClick(),o.stopImmediatePropagation&&o.stopImmediatePropagation())}},26675:function(i){"use strict";i.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(i,o,s){"use strict";var x=s(71828),_=s(77914),F=s(38048);i.exports=function(i,o,s,N){var j=x.extendFlat({},N.hoverlabel);o.hovertemplate&&(j.namelength=-1),F(i,o,function(s,F){return x.coerce(i,o,_,s,F)},j)}},23469:function(i,o,s){"use strict";var x=s(71828);o.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},o.isTraceInSubplots=function(i,s){if("splom"===i.type){for(var x=i.xaxes||[],_=i.yaxes||[],F=0;F<x.length;F++)for(var N=0;N<_.length;N++)if(-1!==s.indexOf(x[F]+_[N]))return!0;return!1}return -1!==s.indexOf(o.getSubplot(i))},o.flat=function(i,o){for(var s=Array(i.length),x=0;x<i.length;x++)s[x]=o;return s},o.p2c=function(i,o){for(var s=Array(i.length),x=0;x<i.length;x++)s[x]=i[x].p2c(o);return s},o.getDistanceFunction=function(i,s,x,_){return"closest"===i?_||o.quadrature(s,x):"x"===i.charAt(0)?s:x},o.getClosest=function(i,o,s){if(!1!==s.index)s.index>=0&&s.index<i.length?s.distance=0:s.index=!1;else for(var x=0;x<i.length;x++){var _=o(i[x]);_<=s.distance&&(s.index=x,s.distance=_)}return s},o.inbox=function(i,o,s){return i*o<0||0===i?s:1/0},o.quadrature=function(i,o){return function(s){var x=i(s),_=o(s);return Math.sqrt(x*x+_*_)}},o.makeEventData=function(i,s,x){var _="index"in i?i.index:i.pointNumber,F={data:s._input,fullData:s,curveNumber:s.index,pointNumber:_};if(s._indexToPoints){var N=s._indexToPoints[_];1===N.length?F.pointIndex=N[0]:F.pointIndices=N}else F.pointIndex=_;return s._module.eventData?F=s._module.eventData(F,i,s,x,_):("xVal"in i?F.x=i.xVal:"x"in i&&(F.x=i.x),"yVal"in i?F.y=i.yVal:"y"in i&&(F.y=i.y),i.xa&&(F.xaxis=i.xa),i.ya&&(F.yaxis=i.ya),void 0!==i.zLabelVal&&(F.z=i.zLabelVal)),o.appendArrayPointValue(F,s,_),F},o.appendArrayPointValue=function(i,o,s){var F=o._arrayAttrs;if(F)for(var N=0;N<F.length;N++){var j=F[N],G=_[j]||j;if(void 0===i[G]){var Z=getPointData(x.nestedProperty(o,j).get(),s);void 0!==Z&&(i[G]=Z)}}},o.appendArrayMultiPointValues=function(i,o,s){var F=o._arrayAttrs;if(F)for(var N=0;N<F.length;N++){var j=F[N],G=_[j]||j;if(void 0===i[G]){for(var Z=x.nestedProperty(o,j).get(),X=Array(s.length),J=0;J<s.length;J++)X[J]=getPointData(Z,s[J]);i[G]=X}}};var _={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function getPointData(i,o){return Array.isArray(o)?Array.isArray(i)&&Array.isArray(i[o[0]])?i[o[0]][o[1]]:void 0:i[o]}var F={x:!0,y:!0},N={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(i){return"string"==typeof i&&!!N[i]},o.isXYhover=function(i){return"string"==typeof i&&!!F[i]}},88335:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(84267),N=s(71828),j=N.strTranslate,G=N.strRotate,Z=s(11086),X=s(63893),J=s(39918),$=s(91424),ee=s(7901),et=s(28569),er=s(89298),en=s(73972),ei=s(23469),eo=s(26675),es=s(99017),el=s(43969),ec=eo.YANGLE,eu=Math.PI*ec/180,ef=1/Math.sin(eu),eh=Math.cos(eu),ed=Math.sin(eu),ep=eo.HOVERARROWSIZE,eg=eo.HOVERTEXTPAD,em={box:!0,ohlc:!0,violin:!0,candlestick:!0},ey={scatter:!0,scattergl:!0,splom:!0};function hoverDataKey(i){return[i.trace.index,i.index,i.x0,i.y0,i.name,i.attr,i.xa?i.xa._id:"",i.ya?i.ya._id:""].join(",")}o.hover=function(i,o,s,F){i=N.getGraphDiv(i);var j=o.target;N.throttle(i._fullLayout._uid+eo.HOVERID,eo.HOVERMINTIME,function(){(function(i,o,s,F,j){s||(s="xy");var G=Array.isArray(s)?s:[s],X=i._fullLayout,$=X._plots||[],eo=$[s],es=X._has("cartesian");if(eo){var el=eo.overlays.map(function(i){return i.id});G=G.concat(el)}for(var ec=G.length,eu=Array(ec),eh=Array(ec),ed=!1,eg=0;eg<ec;eg++){var ev=G[eg];if($[ev])ed=!0,eu[eg]=$[ev].xaxis,eh[eg]=$[ev].yaxis;else if(X[ev]&&X[ev]._subplot){var ex=X[ev]._subplot;eu[eg]=ex.xaxis,eh[eg]=ex.yaxis}else{N.warn("Unrecognized subplot: "+ev);return}}var e_=o.hovermode||X.hovermode;if(e_&&!ed&&(e_="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(e_)||!i.calcdata||i.querySelector(".zoombox")||i._dragging)return et.unhoverRaw(i,o);var ew=X.hoverdistance;-1===ew&&(ew=1/0);var eT=X.spikedistance;-1===eT&&(eT=1/0);var ek=[],eA=[],eS={hLinePoint:null,vLinePoint:null},eM=!1;if(Array.isArray(o))for(eL=0,e_="array";eL<o.length;eL++)(eI=i.calcdata[o[eL].curveNumber||0])&&(eO=eI[0].trace,"skip"!==eI[0].trace.hoverinfo&&(eA.push(eI),"h"===eO.orientation&&(eM=!0)));else{for(eP=0;eP<i.calcdata.length;eP++)"skip"!==(eO=(eI=i.calcdata[eP])[0].trace).hoverinfo&&ei.isTraceInSubplots(eO,G)&&(eA.push(eI),"h"===eO.orientation&&(eM=!0));if(j){if(!1===Z.triggerHandler(i,"plotly_beforehover",o))return;var eC,eE,eL,eP,eI,eO,eD,eR,eB,ez,eF,eN,ej,eU,eV,eH=j.getBoundingClientRect();eU=o.clientX-eH.left,eV=o.clientY-eH.top,X._calcInverseTransform(i);var eG=N.apply3DTransform(X._invTransform)(eU,eV);if(eU=eG[0],eV=eG[1],eU<0||eU>eu[0]._length||eV<0||eV>eh[0]._length)return et.unhoverRaw(i,o)}else eU="xpx"in o?o.xpx:eu[0]._length/2,eV="ypx"in o?o.ypx:eh[0]._length/2;if(o.pointerX=eU+eu[0]._offset,o.pointerY=eV+eh[0]._offset,eC="xval"in o?ei.flat(G,o.xval):ei.p2c(eu,eU),eE="yval"in o?ei.flat(G,o.yval):ei.p2c(eh,eV),!_(eC[0])||!_(eE[0]))return N.warn("Fx.hover failed",o,i),et.unhoverRaw(i,o)}var eW=1/0;function findHoverPoints(i,s){for(eP=0;eP<eA.length;eP++)if((eI=eA[eP])&&eI[0]&&eI[0].trace&&!0===(eO=eI[0].trace).visible&&0!==eO._length&&-1===["carpet","contourcarpet"].indexOf(eO._module.name)){if("splom"===eO.type?eD=G[eR=0]:(eD=ei.getSubplot(eO),eR=G.indexOf(eD)),eB=e_,ei.isUnifiedHover(eB)&&(eB=eB.charAt(0)),eN={cd:eI,trace:eO,xa:eu[eR],ya:eh[eR],maxHoverDistance:ew,maxSpikeDistance:eT,index:!1,distance:Math.min(eW,ew),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:ee.defaultLine,name:eO.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},X[eD]&&(eN.subplot=X[eD]._subplot),X._splomScenes&&X._splomScenes[eO.uid]&&(eN.scene=X._splomScenes[eO.uid]),ej=ek.length,"array"===eB){var x=o[eP];"pointNumber"in x?(eN.index=x.pointNumber,eB="closest"):(eB="","xval"in x&&(ez=x.xval,eB="x"),"yval"in x&&(eF=x.yval,eB=eB?"closest":"y"))}else void 0!==i&&void 0!==s?(ez=i,eF=s):(ez=eC[eR],eF=eE[eR]);if(0!==ew){if(eO._module&&eO._module.hoverPoints){var F,j=eO._module.hoverPoints(eN,ez,eF,eB,{finiteRange:!0,hoverLayer:X._hoverlayer});if(j)for(var Z=0;Z<j.length;Z++)_((F=j[Z]).x0)&&_(F.y0)&&ek.push(function(i,o){var s=i.index,x=i.trace||{},F=i.cd[0],j=i.cd[s]||{};function pass(i){return i||_(i)&&0===i}var G=Array.isArray(s)?function(i,o){var _=N.castOption(F,s,i);return pass(_)?_:N.extractOption({},x,"",o)}:function(i,o){return N.extractOption(j,x,i,o)};function fill(o,s,x){var _=G(s,x);pass(_)&&(i[o]=_)}if(fill("hoverinfo","hi","hoverinfo"),fill("bgcolor","hbg","hoverlabel.bgcolor"),fill("borderColor","hbc","hoverlabel.bordercolor"),fill("fontFamily","htf","hoverlabel.font.family"),fill("fontSize","hts","hoverlabel.font.size"),fill("fontColor","htc","hoverlabel.font.color"),fill("nameLength","hnl","hoverlabel.namelength"),fill("textAlign","hta","hoverlabel.align"),i.posref="y"===o||"closest"===o&&"h"===x.orientation?i.xa._offset+(i.x0+i.x1)/2:i.ya._offset+(i.y0+i.y1)/2,i.x0=N.constrain(i.x0,0,i.xa._length),i.x1=N.constrain(i.x1,0,i.xa._length),i.y0=N.constrain(i.y0,0,i.ya._length),i.y1=N.constrain(i.y1,0,i.ya._length),void 0!==i.xLabelVal&&(i.xLabel="xLabel"in i?i.xLabel:er.hoverLabelText(i.xa,i.xLabelVal,x.xhoverformat),i.xVal=i.xa.c2d(i.xLabelVal)),void 0!==i.yLabelVal&&(i.yLabel="yLabel"in i?i.yLabel:er.hoverLabelText(i.ya,i.yLabelVal,x.yhoverformat),i.yVal=i.ya.c2d(i.yLabelVal)),void 0!==i.zLabelVal&&void 0===i.zLabel&&(i.zLabel=String(i.zLabelVal)),!isNaN(i.xerr)&&!("log"===i.xa.type&&i.xerr<=0)){var Z=er.tickText(i.xa,i.xa.c2l(i.xerr),"hover").text;void 0!==i.xerrneg?i.xLabel+=" +"+Z+" / -"+er.tickText(i.xa,i.xa.c2l(i.xerrneg),"hover").text:i.xLabel+=" \xb1 "+Z,"x"===o&&(i.distance+=1)}if(!isNaN(i.yerr)&&!("log"===i.ya.type&&i.yerr<=0)){var X=er.tickText(i.ya,i.ya.c2l(i.yerr),"hover").text;void 0!==i.yerrneg?i.yLabel+=" +"+X+" / -"+er.tickText(i.ya,i.ya.c2l(i.yerrneg),"hover").text:i.yLabel+=" \xb1 "+X,"y"===o&&(i.distance+=1)}var J=i.hoverinfo||i.trace.hoverinfo;return J&&"all"!==J&&(-1===(J=Array.isArray(J)?J:J.split("+")).indexOf("x")&&(i.xLabel=void 0),-1===J.indexOf("y")&&(i.yLabel=void 0),-1===J.indexOf("z")&&(i.zLabel=void 0),-1===J.indexOf("text")&&(i.text=void 0),-1===J.indexOf("name")&&(i.name=void 0)),i}(F,e_))}else N.log("Unrecognized trace type in hover:",eO)}if("closest"===e_&&ek.length>ej&&(ek.splice(0,ej),eW=ek[0].distance),es&&0!==eT&&0===ek.length){eN.distance=eT,eN.index=!1;var J=eO._module.hoverPoints(eN,ez,eF,"closest",{hoverLayer:X._hoverlayer});if(J&&(J=J.filter(function(i){return i.spikeDistance<=eT})),J&&J.length){var $,et=J.filter(function(i){return i.xa.showspikes&&"hovered data"!==i.xa.spikesnap});if(et.length){var en=et[0];_(en.x0)&&_(en.y0)&&($=fillSpikePoint(en),(!eS.vLinePoint||eS.vLinePoint.spikeDistance>$.spikeDistance)&&(eS.vLinePoint=$))}var eo=J.filter(function(i){return i.ya.showspikes&&"hovered data"!==i.ya.spikesnap});if(eo.length){var el=eo[0];_(el.x0)&&_(el.y0)&&($=fillSpikePoint(el),(!eS.hLinePoint||eS.hLinePoint.spikeDistance>$.spikeDistance)&&(eS.hLinePoint=$))}}}}}function selectClosestPoint(i,o,s){for(var x,_=null,F=1/0,N=0;N<i.length;N++)x=i[N].spikeDistance,s&&0===N&&(x=-1/0),x<=F&&x<=o&&(_=i[N],F=x);return _}function fillSpikePoint(i){return i?{xa:i.xa,ya:i.ya,x:void 0!==i.xSpike?i.xSpike:(i.x0+i.x1)/2,y:void 0!==i.ySpike?i.ySpike:(i.y0+i.y1)/2,distance:i.distance,spikeDistance:i.spikeDistance,curveNumber:i.trace.index,color:i.color,pointNumber:i.index}:null}findHoverPoints();var eZ={fullLayout:X,container:X._hoverlayer,event:o},eY=i._spikepoints,eX={vLinePoint:eS.vLinePoint,hLinePoint:eS.hLinePoint};i._spikepoints=eX;var sortHoverData=function(){ek.sort(function(i,o){return i.distance-o.distance}),ek=function(i,o){for(var s=o.charAt(0),x=[],_=[],F=[],N=0;N<i.length;N++){var j=i[N];en.traceIs(j.trace,"bar-like")||en.traceIs(j.trace,"box-violin")?F.push(j):j.trace[s+"period"]?_.push(j):x.push(j)}return x.concat(_).concat(F)}(ek,e_)};sortHoverData();var eK=e_.charAt(0),eJ=("x"===eK||"y"===eK)&&ek[0]&&ey[ek[0].trace.type];if(es&&0!==eT&&0!==ek.length){var e$=selectClosestPoint(ek.filter(function(i){return i.ya.showspikes}),eT,eJ);eS.hLinePoint=fillSpikePoint(e$);var eQ=selectClosestPoint(ek.filter(function(i){return i.xa.showspikes}),eT,eJ);eS.vLinePoint=fillSpikePoint(eQ)}if(0===ek.length)return et.unhoverRaw(i,o),es&&(null!==eS.hLinePoint||null!==eS.vLinePoint)&&spikesChanged(eY)&&createSpikelines(i,eS,eZ);if(es&&spikesChanged(eY)&&createSpikelines(i,eS,eZ),ei.isXYhover(eB)&&0!==ek[0].length&&"splom"!==ek[0].trace.type){var e0,e1=ek[0],e2=(ek=em[e1.trace.type]?ek.filter(function(i){return i.trace.index===e1.trace.index}):[e1]).length;findHoverPoints(getCoord("x",e1,X),getCoord("y",e1,X));var e3=[],e5={},e4=0,insert=function(i){var o=em[i.trace.type]?hoverDataKey(i):i.trace.index;if(e5[o]){var s=e5[o]-1,x=e3[s];s>0&&Math.abs(i.distance)<Math.abs(x.distance)&&(e3[s]=i)}else e4++,e5[o]=e4,e3.push(i)};for(e0=0;e0<e2;e0++)insert(ek[e0]);for(e0=ek.length-1;e0>e2-1;e0--)insert(ek[e0]);ek=e3,sortHoverData()}var e6=i._hoverdata,e8=[],e7=getTopOffset(i),e9=getLeftOffset(i);for(eL=0;eL<ek.length;eL++){var te=ek[eL],tt=ei.makeEventData(te,te.trace,te.cd);if(!1!==te.hovertemplate){var tr=!1;te.cd[te.index]&&te.cd[te.index].ht&&(tr=te.cd[te.index].ht),te.hovertemplate=tr||te.trace.hovertemplate||!1}if(te.xa&&te.ya){var tn=te.x0+te.xa._offset,ti=te.x1+te.xa._offset,ta=te.y0+te.ya._offset,to=te.y1+te.ya._offset,ts=Math.min(tn,ti),tl=Math.max(tn,ti),tc=Math.min(ta,to),tu=Math.max(ta,to);tt.bbox={x0:ts+e9,x1:tl+e9,y0:tc+e7,y1:tu+e7}}te.eventData=[tt],e8.push(tt)}i._hoverdata=e8;var tf="y"===e_&&(eA.length>1||ek.length>1)||"closest"===e_&&eM&&ek.length>1,th=ee.combine(X.plot_bgcolor||ee.background,X.paper_bgcolor),td=createHoverText(ek,{gd:i,hovermode:e_,rotateLabels:tf,bgColor:th,container:X._hoverlayer,outerContainer:X._paper.node(),commonLabelOpts:X.hoverlabel,hoverdistance:X.hoverdistance}),tp=td.hoverLabels;if(ei.isUnifiedHover(e_)||(function(i,o,s,x){var _,F,N,j,G,Z,X,J=o?"xa":"ya",$=o?"ya":"xa",ee=0,et=1,er=i.size(),en=Array(er),ei=0,eo=x.minX,es=x.maxX,el=x.minY,ec=x.maxY,pX=function(i){return i*s._invScaleX},pY=function(i){return i*s._invScaleY};function constrainGroup(i){var o=i[0],s=i[i.length-1];if(F=o.pmin-o.pos-o.dp+o.size,N=s.pos+s.dp+s.size-o.pmax,F>.01){for(G=i.length-1;G>=0;G--)i[G].dp+=F;_=!1}if(!(N<.01)){if(F<-.01){for(G=i.length-1;G>=0;G--)i[G].dp-=N;_=!1}if(_){var x=0;for(j=0;j<i.length;j++)(Z=i[j]).pos+Z.dp+Z.size>o.pmax&&x++;for(j=i.length-1;j>=0&&!(x<=0);j--)(Z=i[j]).pos>o.pmax-1&&(Z.del=!0,x--);for(j=0;j<i.length&&!(x<=0);j++)if((Z=i[j]).pos<o.pmin+1)for(Z.del=!0,x--,N=2*Z.size,G=i.length-1;G>=0;G--)i[G].dp-=N;for(j=i.length-1;j>=0&&!(x<=0);j--)(Z=i[j]).pos+Z.dp+Z.size>o.pmax&&(Z.del=!0,x--)}}}for(i.each(function(i){var x=i[J],_=i[$],F="x"===x._id.charAt(0),N=x.range;0===ei&&N&&N[0]>N[1]!==F&&(et=-1);var j=0,G=F?s.width:s.height;if("x"===s.hovermode||"y"===s.hovermode){var Z,X,ee=getHoverLabelOffsets(i,o),er=i.anchor,eu="end"===er?-1:1;if("middle"===er)X=(Z=i.crossPos+(F?pY(ee.y-i.by/2):pX(i.bx/2+i.tx2width/2)))+(F?pY(i.by):pX(i.bx));else if(F)X=(Z=i.crossPos+pY(ep+ee.y)-pY(i.by/2-ep))+pY(i.by);else{var eh=pX(eu*ep+ee.x),ed=eh+pX(eu*i.bx);Z=i.crossPos+Math.min(eh,ed),X=i.crossPos+Math.max(eh,ed)}F?void 0!==el&&void 0!==ec&&Math.min(X,ec)-Math.max(Z,el)>1&&("left"===_.side?(j=_._mainLinePosition,G=s.width):G=_._mainLinePosition):void 0!==eo&&void 0!==es&&Math.min(X,es)-Math.max(Z,eo)>1&&("top"===_.side?(j=_._mainLinePosition,G=s.height):G=_._mainLinePosition)}en[ei++]=[{datum:i,traceIndex:i.trace.index,dp:0,pos:i.pos,posref:i.posref,size:i.by*(F?ef:1)/2,pmin:j,pmax:G}]}),en.sort(function(i,o){return i[0].posref-o[0].posref||et*(o[0].traceIndex-i[0].traceIndex)});!_&&ee<=er;){for(ee++,_=!0,j=0;j<en.length-1;){var eu=en[j],eh=en[j+1],ed=eu[eu.length-1],eg=eh[0];if((F=ed.pos+ed.dp+ed.size-eg.pos-eg.dp+eg.size)>.01&&ed.pmin===eg.pmin&&ed.pmax===eg.pmax){for(G=eh.length-1;G>=0;G--)eh[G].dp+=F;for(eu.push.apply(eu,eh),en.splice(j+1,1),X=0,G=eu.length-1;G>=0;G--)X+=eu[G].dp;for(N=X/eu.length,G=eu.length-1;G>=0;G--)eu[G].dp-=N;_=!1}else j++}en.forEach(constrainGroup)}for(j=en.length-1;j>=0;j--){var em=en[j];for(G=em.length-1;G>=0;G--){var ey=em[G],ev=ey.datum;ev.offset=ey.dp,ev.del=ey.del}}}(tp,tf,X,td.commonLabelBoundingBox),alignHoverText(tp,tf,X._invScaleX,X._invScaleY)),j&&j.tagName){var tg=en.getComponentMethod("annotations","hasClickToShow")(i,e8);J(x.select(j),tg?"pointer":"")}j&&!F&&function(i,o,s){if(!s||s.length!==i._hoverdata.length)return!0;for(var x=s.length-1;x>=0;x--){var _=s[x],F=i._hoverdata[x];if(_.curveNumber!==F.curveNumber||String(_.pointNumber)!==String(F.pointNumber)||String(_.pointNumbers)!==String(F.pointNumbers))return!0}return!1}(i,0,e6)&&(e6&&i.emit("plotly_unhover",{event:o,points:e6}),i.emit("plotly_hover",{event:o,points:i._hoverdata,xaxes:eu,yaxes:eh,xvals:eC,yvals:eE}))})(i,o,s,F,j)})},o.loneHover=function(i,o){var s=!0;Array.isArray(i)||(s=!1,i=[i]);var _=o.gd,F=getTopOffset(_),N=getLeftOffset(_),j=createHoverText(i.map(function(i){var s=i._x0||i.x0||i.x||0,x=i._x1||i.x1||i.x||0,j=i._y0||i.y0||i.y||0,G=i._y1||i.y1||i.y||0,Z=i.eventData;if(Z){var X=Math.min(s,x),J=Math.max(s,x),$=Math.min(j,G),et=Math.max(j,G),er=i.trace;if(en.traceIs(er,"gl3d")){var ei=_._fullLayout[er.scene]._scene.container,eo=ei.offsetLeft,es=ei.offsetTop;X+=eo,J+=eo,$+=es,et+=es}Z.bbox={x0:X+N,x1:J+N,y0:$+F,y1:et+F},o.inOut_bbox&&o.inOut_bbox.push(Z.bbox)}else Z=!1;return{color:i.color||ee.defaultLine,x0:i.x0||i.x||0,x1:i.x1||i.x||0,y0:i.y0||i.y||0,y1:i.y1||i.y||0,xLabel:i.xLabel,yLabel:i.yLabel,zLabel:i.zLabel,text:i.text,name:i.name,idealAlign:i.idealAlign,borderColor:i.borderColor,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,nameLength:i.nameLength,textAlign:i.textAlign,trace:i.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:i.hovertemplate||!1,hovertemplateLabels:i.hovertemplateLabels||!1,eventData:Z}}),{gd:_,hovermode:"closest",rotateLabels:!1,bgColor:o.bgColor||ee.background,container:x.select(o.container),outerContainer:o.outerContainer||o.container}).hoverLabels,G=0,Z=0;return j.sort(function(i,o){return i.y0-o.y0}).each(function(i,s){var x=i.y0-i.by/2;x-5<G?i.offset=G-x+5:i.offset=0,G=x+i.by+i.offset,s===o.anchorIndex&&(Z=i.offset)}).each(function(i){i.offset-=Z}),alignHoverText(j,!1,_._fullLayout._invScaleX,_._fullLayout._invScaleY),s?j:j.node()};var ev=/<extra>([\s\S]*)<\/extra>/;function createHoverText(i,o){var s=o.gd,_=s._fullLayout,F=o.hovermode,Z=o.rotateLabels,J=o.bgColor,et=o.container,er=o.outerContainer,eu=o.commonLabelOpts||{};if(0===i.length)return[[]];var ef=o.fontFamily||eo.HOVERFONT,eh=o.fontSize||eo.HOVERFONTSIZE,ed=i[0],em=ed.xa,ey=ed.ya,ev=F.charAt(0),ex=ev+"Label",e_=ed[ex];if(void 0===e_&&"multicategory"===em.type)for(var ew=0;ew<i.length&&void 0===(e_=i[ew][ex]);ew++);var eT=getBoundingClientRect(s,er),ek=eT.top,eA=eT.width,eS=eT.height,eM=void 0!==e_&&ed.distance<=o.hoverdistance&&("x"===F||"y"===F);if(eM){var eC,eE,eL=!0;for(eC=0;eC<i.length;eC++)if(eL&&void 0===i[eC].zLabel&&(eL=!1),eE=i[eC].hoverinfo||i[eC].trace.hoverinfo){var eP=Array.isArray(eE)?eE:eE.split("+");if(-1===eP.indexOf("all")&&-1===eP.indexOf(F)){eM=!1;break}}eL&&(eM=!1)}var eI=et.selectAll("g.axistext").data(eM?[0]:[]);eI.enter().append("g").classed("axistext",!0),eI.exit().remove();var eO={minX:0,maxX:0,minY:0,maxY:0};if(eI.each(function(){var i=x.select(this),o=N.ensureSingle(i,"path","",function(i){i.style({"stroke-width":"1px"})}),G=N.ensureSingle(i,"text","",function(i){i.attr("data-notex",1)}),Z=eu.bgcolor||ee.defaultLine,J=eu.bordercolor||ee.contrast(Z),et=ee.contrast(Z),er={family:eu.font.family||ef,size:eu.font.size||eh,color:eu.font.color||et};o.style({fill:Z,stroke:J}),G.text(e_).call($.font,er).call(X.positionText,0,0).call(X.convertToTspans,s),i.attr("transform","");var en=getBoundingClientRect(s,G.node());if("x"===F){var ei="top"===em.side?"-":"";G.attr("text-anchor","middle").call(X.positionText,0,"top"===em.side?ek-en.bottom-ep-eg:ek-en.top+ep+eg),es=em._offset+(ed.x0+ed.x1)/2,el=ey._offset+("top"===em.side?0:ey._length);var eo=en.width/2+eg;es<eo?(es=eo,o.attr("d","M-"+(eo-ep)+",0L-"+(eo-2*ep)+","+ei+ep+"H"+eo+"v"+ei+(2*eg+en.height)+"H-"+eo+"V"+ei+ep+"Z")):es>_.width-eo?(es=_.width-eo,o.attr("d","M"+(eo-ep)+",0L"+eo+","+ei+ep+"v"+ei+(2*eg+en.height)+"H-"+eo+"V"+ei+ep+"H"+(eo-2*ep)+"Z")):o.attr("d","M0,0L"+ep+","+ei+ep+"H"+eo+"v"+ei+(2*eg+en.height)+"H-"+eo+"V"+ei+ep+"H-"+ep+"Z"),eO.minX=es-eo,eO.maxX=es+eo,"top"===em.side?(eO.minY=el-(2*eg+en.height),eO.maxY=el-eg):(eO.minY=el+eg,eO.maxY=el+(2*eg+en.height))}else{"right"===ey.side?(ec="start",ev=1,ex="",es=em._offset+em._length):(ec="end",ev=-1,ex="-",es=em._offset),el=ey._offset+(ed.y0+ed.y1)/2,G.attr("text-anchor",ec),o.attr("d","M0,0L"+ex+ep+","+ep+"V"+(eg+en.height/2)+"h"+ex+(2*eg+en.width)+"V-"+(eg+en.height/2)+"H"+ex+ep+"V-"+ep+"Z"),eO.minY=el-(eg+en.height/2),eO.maxY=el+(eg+en.height/2),"right"===ey.side?(eO.minX=es+ep,eO.maxX=es+ep+(2*eg+en.width)):(eO.minX=es-ep-(2*eg+en.width),eO.maxX=es-ep);var es,el,ec,ev,ex,ew,eT=en.height/2,eA=ek-en.top-eT,eS="clip"+_._uid+"commonlabel"+ey._id;if(es<en.width+2*eg+ep){ew="M-"+(ep+eg)+"-"+eT+"h-"+(en.width-eg)+"V"+eT+"h"+(en.width-eg)+"Z";var eM=en.width-es+eg;X.positionText(G,eM,eA),"end"===ec&&G.selectAll("tspan").each(function(){var i=x.select(this),o=$.tester.append("text").text(i.text()).call($.font,er),_=getBoundingClientRect(s,o.node());Math.round(_.width)<Math.round(en.width)&&i.attr("x",eM-_.width),o.remove()})}else X.positionText(G,ev*(eg+ep),eA),ew=null;var eC=_._topclips.selectAll("#"+eS).data(ew?[0]:[]);eC.enter().append("clipPath").attr("id",eS).append("path"),eC.exit().remove(),eC.select("path").attr("d",ew),$.setClipUrl(G,ew?eS:null,s)}i.attr("transform",j(es,el))}),ei.isUnifiedHover(F)){et.selectAll("g.hovertext").remove();var eD,eR,eB,ez,eF,eN,ej=i.filter(function(i){return"none"!==i.hoverinfo});if(0===ej.length)return[];var eU=_.hoverlabel,eV=eU.font,eH={showlegend:!0,legend:{title:{text:e_,font:eV},font:eV,bgcolor:eU.bgcolor,bordercolor:eU.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:_.legend?_.legend.traceorder:void 0,orientation:"v"}},eG={font:eV};es(eH,eG,s._fullData);var eW=eG.legend;eW.entries=[];for(var eZ=0;eZ<ej.length;eZ++){var eY=ej[eZ];if("none"!==eY.hoverinfo){var eX=getHoverLabelText(eY,!0,F,_,e_),eK=eX[0],eJ=eX[1];eY.name=eJ,""!==eJ?eY.text=eJ+" : "+eK:eY.text=eK;var e$=eY.cd[eY.index];e$&&(e$.mc&&(eY.mc=e$.mc),e$.mcc&&(eY.mc=e$.mcc),e$.mlc&&(eY.mlc=e$.mlc),e$.mlcc&&(eY.mlc=e$.mlcc),e$.mlw&&(eY.mlw=e$.mlw),e$.mrc&&(eY.mrc=e$.mrc),e$.dir&&(eY.dir=e$.dir)),eY._distinct=!0,eW.entries.push([eY])}}eW.entries.sort(function(i,o){return i[0].trace.index-o[0].trace.index}),eW.layer=et,eW._inHover=!0,eW._groupTitleFont=eU.grouptitlefont,el(s,eW);var eQ=et.select("g.legend"),e0=getBoundingClientRect(s,eQ.node()),e1=e0.width+2*eg,e2=e0.height+2*eg,e3=ej[0],e5=(e3.x0+e3.x1)/2,e4=(e3.y0+e3.y1)/2,e6=!(en.traceIs(e3.trace,"bar-like")||en.traceIs(e3.trace,"box-violin"));"y"===ev?e6?(eR=e4-eg,eD=e4+eg):(eR=Math.min.apply(null,ej.map(function(i){return Math.min(i.y0,i.y1)})),eD=Math.max.apply(null,ej.map(function(i){return Math.max(i.y0,i.y1)}))):eR=eD=N.mean(ej.map(function(i){return(i.y0+i.y1)/2}))-e2/2,"x"===ev?e6?(eB=e5+eg,ez=e5-eg):(eB=Math.max.apply(null,ej.map(function(i){return Math.max(i.x0,i.x1)})),ez=Math.min.apply(null,ej.map(function(i){return Math.min(i.x0,i.x1)}))):eB=ez=N.mean(ej.map(function(i){return(i.x0+i.x1)/2}))-e1/2;var e8=em._offset,e7=ey._offset;return eD+=e7,eB+=e8,ez+=e8-e1,eR+=e7-e2,eF=(eB+e1<eA&&eB>=0?eB:ez+e1<eA&&ez>=0?ez:e8+e1<eA?e8:eB-e5<e5-ez+e1?eA-e1:0)+eg,eN=(eD+e2<eS&&eD>=0?eD:eR+e2<eS&&eR>=0?eR:e7+e2<eS?e7:eD-e4<e4-eR+e2?eS-e2:0)+eg,eQ.attr("transform",j(eF-1,eN-1)),eQ}var e9=et.selectAll("g.hovertext").data(i,function(i){return hoverDataKey(i)});return e9.enter().append("g").classed("hovertext",!0).each(function(){var i=x.select(this);i.append("rect").call(ee.fill,ee.addOpacity(J,.8)),i.append("text").classed("name",!0),i.append("path").style("stroke-width","1px"),i.append("text").classed("nums",!0).call($.font,ef,eh)}),e9.exit().remove(),e9.each(function(i){var o,N,et=x.select(this).attr("transform",""),er=i.color;Array.isArray(er)&&(er=er[i.eventData[0].pointNumber]);var en=i.bgcolor||er,ei=ee.combine(ee.opacity(en)?en:ee.defaultLine,J),eo=ee.combine(ee.opacity(er)?er:ee.defaultLine,J),es=i.borderColor||ee.contrast(ei),el=getHoverLabelText(i,eM,F,_,e_,et),eu=el[0],ed=el[1],em=et.select("text.nums").call($.font,i.fontFamily||ef,i.fontSize||eh,i.fontColor||es).text(eu).attr("data-notex",1).call(X.positionText,0,0).call(X.convertToTspans,s),ey=et.select("text.name"),ev=0,ex=0;if(ed&&ed!==eu){ey.call($.font,i.fontFamily||ef,i.fontSize||eh,eo).text(ed).attr("data-notex",1).call(X.positionText,0,0).call(X.convertToTspans,s);var ew=getBoundingClientRect(s,ey.node());ev=ew.width+2*eg,ex=ew.height+2*eg}else ey.remove(),et.select("rect").remove();et.select("path").style({fill:ei,stroke:es});var eT=i.xa._offset+(i.x0+i.x1)/2,eC=i.ya._offset+(i.y0+i.y1)/2,eE=Math.abs(i.x1-i.x0),eL=Math.abs(i.y1-i.y0),eP=getBoundingClientRect(s,em.node()),eI=eP.width/_._invScaleX,eO=eP.height/_._invScaleY;i.ty0=(ek-eP.top)/_._invScaleY,i.bx=eI+2*eg,i.by=Math.max(eO+2*eg,ex),i.anchor="start",i.txwidth=eI,i.tx2width=ev,i.offset=0;var eD=(eI+ep+eg+ev)*_._invScaleX;if(Z)i.pos=eT,o=eC+eL/2+eD<=eS,N=eC-eL/2-eD>=0,("top"===i.idealAlign||!o)&&N?(eC-=eL/2,i.anchor="end"):o?(eC+=eL/2,i.anchor="start"):i.anchor="middle",i.crossPos=eC;else{if(i.pos=eC,o=eT+eE/2+eD<=eA,N=eT-eE/2-eD>=0,("left"===i.idealAlign||!o)&&N)eT-=eE/2,i.anchor="end";else if(o)eT+=eE/2,i.anchor="start";else{i.anchor="middle";var eR=eD/2,eB=eT+eR-eA,ez=eT-eR;eB>0&&(eT-=eB),ez<0&&(eT+=-ez)}i.crossPos=eT}em.attr("text-anchor",i.anchor),ev&&ey.attr("text-anchor",i.anchor),et.attr("transform",j(eT,eC)+(Z?G(ec):""))}),{hoverLabels:e9,commonLabelBoundingBox:eO}}function getHoverLabelText(i,o,s,x,_,F){var j="",G="";void 0!==i.nameOverride&&(i.name=i.nameOverride),i.name&&(i.trace._meta&&(i.name=N.templateString(i.name,i.trace._meta)),j=plainText(i.name,i.nameLength));var Z=s.charAt(0);void 0!==i.zLabel?(void 0!==i.xLabel&&(G+="x: "+i.xLabel+"<br>"),void 0!==i.yLabel&&(G+="y: "+i.yLabel+"<br>"),"choropleth"!==i.trace.type&&"choroplethmapbox"!==i.trace.type&&(G+=(G?"z: ":"")+i.zLabel)):o&&i[Z+"Label"]===_?G=i[("x"===Z?"y":"x")+"Label"]||"":void 0===i.xLabel?void 0!==i.yLabel&&"scattercarpet"!==i.trace.type&&(G=i.yLabel):G=void 0===i.yLabel?i.xLabel:"("+i.xLabel+", "+i.yLabel+")",(i.text||0===i.text)&&!Array.isArray(i.text)&&(G+=(G?"<br>":"")+i.text),void 0!==i.extraText&&(G+=(G?"<br>":"")+i.extraText),F&&""===G&&!i.hovertemplate&&(""===j&&F.remove(),G=j);var X=i.hovertemplate||!1;if(X){var J=i.hovertemplateLabels||i;i[Z+"Label"]!==_&&(J[Z+"other"]=J[Z+"Val"],J[Z+"otherLabel"]=J[Z+"Label"]),G=(G=N.hovertemplateString(X,J,x._d3locale,i.eventData[0]||{},i.trace._meta)).replace(ev,function(o,s){return j=plainText(s,i.nameLength),""})}return[G,j]}function getHoverLabelOffsets(i,o){var s=0,x=i.offset;return o&&(x*=-ed,s=i.offset*eh),{x:s,y:x}}function alignHoverText(i,o,s,_){var pX=function(i){return i*s},pY=function(i){return i*_};i.each(function(i){var s,_,F,N=x.select(this);if(i.del)return N.remove();var j=N.select("text.nums"),G=i.anchor,Z="end"===G?-1:1,J=(F=(_=(s=({start:1,end:-1,middle:0})[i.anchor])*(ep+eg))+s*(i.txwidth+eg),"middle"===i.anchor&&(_-=i.tx2width/2,F+=i.txwidth/2+eg),{alignShift:s,textShiftX:_,text2ShiftX:F}),ee=getHoverLabelOffsets(i,o),et=ee.x,er=ee.y,en="middle"===G;N.select("path").attr("d",en?"M-"+pX(i.bx/2+i.tx2width/2)+","+pY(er-i.by/2)+"h"+pX(i.bx)+"v"+pY(i.by)+"h-"+pX(i.bx)+"Z":"M0,0L"+pX(Z*ep+et)+","+pY(ep+er)+"v"+pY(i.by/2-ep)+"h"+pX(Z*i.bx)+"v-"+pY(i.by)+"H"+pX(Z*ep+et)+"V"+pY(er-ep)+"Z");var ei=et+J.textShiftX,eo=er+i.ty0-i.by/2+eg,es=i.textAlign||"auto";"auto"!==es&&("left"===es&&"start"!==G?(j.attr("text-anchor","start"),ei=en?-i.bx/2-i.tx2width/2+eg:-i.bx-eg):"right"===es&&"end"!==G&&(j.attr("text-anchor","end"),ei=en?i.bx/2-i.tx2width/2-eg:i.bx+eg)),j.call(X.positionText,pX(ei),pY(eo)),i.tx2width&&(N.select("text.name").call(X.positionText,pX(J.text2ShiftX+J.alignShift*eg+et),pY(er+i.ty0-i.by/2+eg)),N.select("rect").call($.setRect,pX(J.text2ShiftX+(J.alignShift-1)*i.tx2width/2+et),pY(er-i.by/2-1),pX(i.tx2width),pY(i.by+2)))})}function createSpikelines(i,o,s){var x=s.container,_=s.fullLayout,N=_._size,j=s.event,G=!!o.hLinePoint,Z=!!o.vLinePoint;if(x.selectAll(".spikeline").remove(),Z||G){var X=ee.combine(_.plot_bgcolor,_.paper_bgcolor);if(G){var J,et,en,ei,eo,es,el=o.hLinePoint;J=el&&el.xa,"cursor"===(et=el&&el.ya).spikesnap?(en=j.pointerX,ei=j.pointerY):(en=J._offset+el.x,ei=et._offset+el.y);var ec=1.5>F.readability(el.color,X)?ee.contrast(X):el.color,eu=et.spikemode,ef=et.spikethickness,eh=et.spikecolor||ec,ed=er.getPxPosition(i,et);if(-1!==eu.indexOf("toaxis")||-1!==eu.indexOf("across")){if(-1!==eu.indexOf("toaxis")&&(eo=ed,es=en),-1!==eu.indexOf("across")){var ep=et._counterDomainMin,eg=et._counterDomainMax;"free"===et.anchor&&(ep=Math.min(ep,et.position),eg=Math.max(eg,et.position)),eo=N.l+ep*N.w,es=N.l+eg*N.w}x.insert("line",":first-child").attr({x1:eo,x2:es,y1:ei,y2:ei,"stroke-width":ef,stroke:eh,"stroke-dasharray":$.dashStyle(et.spikedash,ef)}).classed("spikeline",!0).classed("crisp",!0),x.insert("line",":first-child").attr({x1:eo,x2:es,y1:ei,y2:ei,"stroke-width":ef+2,stroke:X}).classed("spikeline",!0).classed("crisp",!0)}-1!==eu.indexOf("marker")&&x.insert("circle",":first-child").attr({cx:ed+("right"!==et.side?ef:-ef),cy:ei,r:ef,fill:eh}).classed("spikeline",!0)}if(Z){var em,ey,ev,ex,e_=o.vLinePoint;J=e_&&e_.xa,et=e_&&e_.ya,"cursor"===J.spikesnap?(em=j.pointerX,ey=j.pointerY):(em=J._offset+e_.x,ey=et._offset+e_.y);var ew=1.5>F.readability(e_.color,X)?ee.contrast(X):e_.color,eT=J.spikemode,ek=J.spikethickness,eA=J.spikecolor||ew,eS=er.getPxPosition(i,J);if(-1!==eT.indexOf("toaxis")||-1!==eT.indexOf("across")){if(-1!==eT.indexOf("toaxis")&&(ev=eS,ex=ey),-1!==eT.indexOf("across")){var eM=J._counterDomainMin,eC=J._counterDomainMax;"free"===J.anchor&&(eM=Math.min(eM,J.position),eC=Math.max(eC,J.position)),ev=N.t+(1-eC)*N.h,ex=N.t+(1-eM)*N.h}x.insert("line",":first-child").attr({x1:em,x2:em,y1:ev,y2:ex,"stroke-width":ek,stroke:eA,"stroke-dasharray":$.dashStyle(J.spikedash,ek)}).classed("spikeline",!0).classed("crisp",!0),x.insert("line",":first-child").attr({x1:em,x2:em,y1:ev,y2:ex,"stroke-width":ek+2,stroke:X}).classed("spikeline",!0).classed("crisp",!0)}-1!==eT.indexOf("marker")&&x.insert("circle",":first-child").attr({cx:em,cy:eS-("top"!==J.side?ek:-ek),r:ek,fill:eA}).classed("spikeline",!0)}}}function spikesChanged(i,o){return!o||o.vLinePoint!==i._spikepoints.vLinePoint||o.hLinePoint!==i._spikepoints.hLinePoint}function plainText(i,o){return X.plainText(i||"",{len:o,allowedTags:["br","sub","sup","b","i","em"]})}function getCoord(i,o,s){var x=o[i+"a"],_=o[i+"Val"],F=o.cd[0];if("category"===x.type||"multicategory"===x.type)_=x._categoriesMap[_];else if("date"===x.type){var N=o.trace[i+"periodalignment"];if(N){var j=o.cd[o.index],G=j[i+"Start"];void 0===G&&(G=j[i]);var Z=j[i+"End"];void 0===Z&&(Z=j[i]);var X=Z-G;"end"===N?_+=X:"middle"===N&&(_+=X/2)}_=x.d2c(_)}return F&&F.t&&F.t.posLetter===x._id&&("group"===s.boxmode||"group"===s.violinmode)&&(_+=F.t.dPos),_}function getTopOffset(i){return i.offsetTop+i.clientTop}function getLeftOffset(i){return i.offsetLeft+i.clientLeft}function getBoundingClientRect(i,o){var s=i._fullLayout,x=o.getBoundingClientRect(),_=x.left,F=x.top,j=_+x.width,G=F+x.height,Z=N.apply3DTransform(s._invTransform)(_,F),X=N.apply3DTransform(s._invTransform)(j,G),J=Z[0],$=Z[1],ee=X[0],et=X[1];return{x:J,y:$,width:ee-J,height:et-$,top:Math.min($,et),left:Math.min(J,ee),right:Math.max(J,ee),bottom:Math.max($,et)}}},38048:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(23469).isUnifiedHover;i.exports=function(i,o,s,N){N=N||{};var j=o.legend;function inheritFontAttr(i){N.font[i]||(N.font[i]=j?o.legend.font[i]:o.font[i])}o&&F(o.hovermode)&&(N.font||(N.font={}),inheritFontAttr("size"),inheritFontAttr("family"),inheritFontAttr("color"),j?(N.bgcolor||(N.bgcolor=_.combine(o.legend.bgcolor,o.paper_bgcolor)),N.bordercolor||(N.bordercolor=o.legend.bordercolor)):N.bgcolor||(N.bgcolor=o.paper_bgcolor)),s("hoverlabel.bgcolor",N.bgcolor),s("hoverlabel.bordercolor",N.bordercolor),s("hoverlabel.namelength",N.namelength),x.coerceFont(s,"hoverlabel.font",N.font),s("hoverlabel.align",N.align)}},98212:function(i,o,s){"use strict";var x=s(71828),_=s(528);i.exports=function(i,o){function coerce(s,F){return void 0!==o[s]?o[s]:x.coerce(i,o,_,s,F)}return coerce("clickmode"),coerce("hovermode")}},30211:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(28569),N=s(23469),j=s(528),G=s(88335);i.exports={moduleType:"component",name:"fx",constants:s(26675),schema:{layout:j},attributes:s(77914),layoutAttributes:j,supplyLayoutGlobalDefaults:s(22774),supplyDefaults:s(54268),supplyLayoutDefaults:s(34938),calc:s(30732),getDistanceFunction:N.getDistanceFunction,getClosest:N.getClosest,inbox:N.inbox,quadrature:N.quadrature,appendArrayPointValue:N.appendArrayPointValue,castHoverOption:function(i,o,s){return _.castOption(i,o,"hoverlabel."+s)},castHoverinfo:function(i,o,s){return _.castOption(i,s,"hoverinfo",function(s){return _.coerceHoverinfo({hoverinfo:s},{_module:i._module},o)})},hover:G.hover,unhover:F.unhover,loneHover:G.loneHover,loneUnhover:function(i){var o=_.isD3Selection(i)?i:x.select(i);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()},click:s(75914)}},528:function(i,o,s){"use strict";var x=s(26675),_=s(41940),F=_({editType:"none"});F.family.dflt=x.HOVERFONT,F.size.dflt=x.HOVERFONTSIZE,i.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:F,grouptitlefont:_({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(i,o,s){"use strict";var x=s(71828),_=s(528),F=s(98212),N=s(38048);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}F(i,o)&&(coerce("hoverdistance"),coerce("spikedistance")),"select"===coerce("dragmode")&&coerce("selectdirection");var s=o._has("mapbox"),j=o._has("geo"),G=o._basePlotModules.length;"zoom"===o.dragmode&&((s||j)&&1===G||s&&j&&2===G)&&(o.dragmode="pan"),N(i,o,coerce),x.coerceFont(coerce,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},22774:function(i,o,s){"use strict";var x=s(71828),_=s(38048),F=s(528);i.exports=function(i,o){_(i,o,function(s,_){return x.coerce(i,o,F,s,_)})}},83312:function(i,o,s){"use strict";var x=s(71828),_=s(30587).counter,F=s(27670).Y,N=s(85555).idRegex,j=s(44467),G={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[_("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[N.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[N.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:F({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function getAxes(i,o,s){var x=o[s+"axes"],_=Object.keys((i._splomAxes||{})[s]||{});return Array.isArray(x)?x:_.length?_:void 0}function fillGridPositions(i,o,s,x,_,F){var N=o(i+"gap",s),j=o("domain."+i);o(i+"side",x);for(var G=Array(_),Z=j[0],X=(j[1]-Z)/(_-N),J=X*(1-N),$=0;$<_;$++){var ee=Z+X*$;G[F?_-1-$:$]=[ee,ee+J]}return G}function fillGridAxes(i,o,s,x,_){var F,N=Array(s);function fillOneAxis(i,s){-1!==o.indexOf(s)&&void 0===x[s]?(N[i]=s,x[s]=i):N[i]=""}if(Array.isArray(i))for(F=0;F<s;F++)fillOneAxis(F,i[F]);else for(fillOneAxis(0,_),F=1;F<s;F++)fillOneAxis(F,_+(F+1));return N}i.exports={moduleType:"component",name:"grid",schema:{layout:{grid:G}},layoutAttributes:G,sizeDefaults:function(i,o){var s,_,F,N,Z=i.grid||{},X=getAxes(o,Z,"x"),J=getAxes(o,Z,"y");if(i.grid||X||J){var $=Array.isArray(Z.subplots)&&Array.isArray(Z.subplots[0]),ee=Array.isArray(X),et=Array.isArray(J),er=ee&&X!==Z.xaxes&&et&&J!==Z.yaxes;$?(s=Z.subplots.length,_=Z.subplots[0].length):(et&&(s=J.length),ee&&(_=X.length));var en=j.newContainer(o,"grid"),ei=coerce("rows",s),eo=coerce("columns",_);if(!(ei*eo>1)){delete o.grid;return}$||ee||et||"independent"!==coerce("pattern")||($=!0),en._hasSubplotGrid=$;var es=coerce("roworder"),el=$?.2:.1,ec=$?.3:.1;er&&o._splomGridDflt&&(F=o._splomGridDflt.xside,N=o._splomGridDflt.yside),en._domains={x:fillGridPositions("x",coerce,el,F,eo),y:fillGridPositions("y",coerce,ec,N,ei,"top to bottom"===es)}}function coerce(i,o){return x.coerce(Z,en,G,i,o)}},contentDefaults:function(i,o){var s=o.grid;if(s&&s._domains){var x=i.grid||{},_=o._subplots,F=s._hasSubplotGrid,N=s.rows,j=s.columns,G="independent"===s.pattern,Z=s._axisMap={};if(F){var X=x.subplots||[];eh=s.subplots=Array(N);var J=1;for(es=0;es<N;es++){var $=eh[es]=Array(j),ee=X[es]||[];for(el=0;el<j;el++)if(G?(ef=1===J?"xy":"x"+J+"y"+J,J++):ef=ee[el],$[el]="",-1!==_.cartesian.indexOf(ef)){if(ed=ef.indexOf("y"),ec=ef.slice(0,ed),eu=ef.slice(ed),void 0!==Z[ec]&&Z[ec]!==el||void 0!==Z[eu]&&Z[eu]!==es)continue;$[el]=ef,Z[ec]=el,Z[eu]=es}}}else{var et=getAxes(o,x,"x"),er=getAxes(o,x,"y");s.xaxes=fillGridAxes(et,_.xaxis,j,Z,"x"),s.yaxes=fillGridAxes(er,_.yaxis,N,Z,"y")}var en=s._anchors={},ei="top to bottom"===s.roworder;for(var eo in Z){var es,el,ec,eu,ef,eh,ed,ep,eg,em,ey=eo.charAt(0),ev=s[ey+"side"];if(ev.length<8)en[eo]="free";else if("x"===ey){if("t"===ev.charAt(0)===ei?(ep=0,eg=1,em=N):(ep=N-1,eg=-1,em=-1),F){var ex=Z[eo];for(es=ep;es!==em;es+=eg)if((ef=eh[es][ex])&&(ed=ef.indexOf("y"),ef.slice(0,ed)===eo)){en[eo]=ef.slice(ed);break}}else for(es=ep;es!==em;es+=eg)if(eu=s.yaxes[es],-1!==_.cartesian.indexOf(eo+eu)){en[eo]=eu;break}}else if("l"===ev.charAt(0)?(ep=0,eg=1,em=j):(ep=j-1,eg=-1,em=-1),F){var e_=Z[eo];for(es=ep;es!==em;es+=eg)if((ef=eh[e_][es])&&(ed=ef.indexOf("y"),ef.slice(ed)===eo)){en[eo]=ef.slice(0,ed);break}}else for(es=ep;es!==em;es+=eg)if(ec=s.xaxes[es],-1!==_.cartesian.indexOf(ec+eo)){en[eo]=ec;break}}}}}},69819:function(i,o,s){"use strict";var x=s(85555),_=s(44467).templatedArray;s(24695),i.exports=_("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",x.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",x.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(i,o,s){"use strict";var x=s(92770),_=s(58163);i.exports=function(i,o,s,F){o=o||{};var N,j,G="log"===s&&"linear"===o.type,Z="linear"===s&&"log"===o.type;if(G||Z){for(var X=i._fullLayout.images,J=o._id.charAt(0),$=0;$<X.length;$++)if(N=X[$],j="images["+$+"].",N[J+"ref"]===o._id){var ee=N[J],et=N["size"+J],er=null,en=null;if(G){var ei=et/Math.pow(10,er=_(ee,o.range))/2;en=2*Math.log(ei+Math.sqrt(1+ei*ei))/Math.LN10}else en=(er=Math.pow(10,ee))*(Math.pow(10,et/2)-Math.pow(10,-et/2));x(er)?x(en)||(en=null):(er=null,en=null),F(j+J,er),F(j+"size"+J,en)}}}},81603:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(85501),N=s(69819);function imageDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,N,s,_)}var F=coerce("source");if(!coerce("visible",!!F))return o;coerce("layer"),coerce("xanchor"),coerce("yanchor"),coerce("sizex"),coerce("sizey"),coerce("sizing"),coerce("opacity");for(var j={_fullLayout:s},G=["x","y"],Z=0;Z<2;Z++){var X=G[Z],J=_.coerceRef(i,o,j,X,"paper",void 0);"paper"!==J&&_.getFromId(j,J)._imgIndices.push(o._index),_.coercePosition(o,j,coerce,J,X,0)}return o}i.exports=function(i,o){F(i,o,{name:"images",handleItemDefaults:imageDefaults})}},80750:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(89298),N=s(41675),j=s(77922);i.exports=function(i){var o,s,G=i._fullLayout,Z=[],X={},J=[];for(s=0;s<G.images.length;s++){var $=G.images[s];if($.visible){if("below"===$.layer&&"paper"!==$.xref&&"paper"!==$.yref){o=N.ref2id($.xref)+N.ref2id($.yref);var ee=G._plots[o];if(!ee){J.push($);continue}ee.mainplot&&(o=ee.mainplot.id),X[o]||(X[o]=[]),X[o].push($)}else"above"===$.layer?Z.push($):J.push($)}}var et={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function setImage(o){var s=x.select(this);if(this._imgSrc!==o.source){if(s.attr("xmlns",j.svg),o.source&&"data:"===o.source.slice(0,5))s.attr("xlink:href",o.source),this._imgSrc=o.source;else{var _=new Promise((function(i){var x=new Image;function errorHandler(){s.remove(),i()}this.img=x,x.setAttribute("crossOrigin","anonymous"),x.onerror=errorHandler,x.onload=function(){var o=document.createElement("canvas");o.width=this.width,o.height=this.height,o.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var x=o.toDataURL("image/png");s.attr("xlink:href",x),i()},s.on("error",errorHandler),x.src=o.source,this._imgSrc=o.source}).bind(this));i._promises.push(_)}}}function applyAttributes(o){var s,N,j,Z,X=x.select(this),J=F.getFromId(i,o.xref),$=F.getFromId(i,o.yref),ee="domain"===F.getRefType(o.xref),er="domain"===F.getRefType(o.yref),en=G._size;s=void 0!==J?"string"==typeof o.xref&&ee?J._length*o.sizex:Math.abs(J.l2p(o.sizex)-J.l2p(0)):o.sizex*en.w,N=void 0!==$?"string"==typeof o.yref&&er?$._length*o.sizey:Math.abs($.l2p(o.sizey)-$.l2p(0)):o.sizey*en.h;var ei=s*et.x[o.xanchor].offset,eo=N*et.y[o.yanchor].offset,es=et.x[o.xanchor].sizing+et.y[o.yanchor].sizing;switch(j=(void 0!==J?"string"==typeof o.xref&&ee?J._length*o.x+J._offset:J.r2p(o.x)+J._offset:o.x*en.w+en.l)+ei,Z=(void 0!==$?"string"==typeof o.yref&&er?$._length*(1-o.y)+$._offset:$.r2p(o.y)+$._offset:en.h-o.y*en.h+en.t)+eo,o.sizing){case"fill":es+=" slice";break;case"stretch":es="none"}X.attr({x:j,y:Z,width:s,height:N,preserveAspectRatio:es,opacity:o.opacity});var el=(J&&"domain"!==F.getRefType(o.xref)?J._id:"")+($&&"domain"!==F.getRefType(o.yref)?$._id:"");_.setClipUrl(X,el?"clip"+G._uid+el:null,i)}var er=G._imageLowerLayer.selectAll("image").data(J),en=G._imageUpperLayer.selectAll("image").data(Z);er.enter().append("image"),en.enter().append("image"),er.exit().remove(),en.exit().remove(),er.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)}),en.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)});var ei=Object.keys(G._plots);for(s=0;s<ei.length;s++){o=ei[s];var eo=G._plots[o];if(eo.imagelayer){var es=eo.imagelayer.selectAll("image").data(X[o]||[]);es.enter().append("image"),es.exit().remove(),es.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)})}}}},68804:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"images",layoutAttributes:s(69819),supplyLayoutDefaults:s(81603),includeBasePlot:s(76325)("images"),draw:s(80750),convertCoords:s(75378)}},33030:function(i,o,s){"use strict";var x=s(41940),_=s(22399);i.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:x({editType:"legend"}),grouptitlefont:x({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:x({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(i){"use strict";i.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(44467),N=s(9012),j=s(33030),G=s(10820),Z=s(10130);i.exports=function(i,o,s){var X,J=s.slice(),$=o.shapes;if($)for(X=0;X<$.length;X++){var ee=$[X];if(ee.showlegend){var et={_input:ee._input,visible:ee.visible,showlegend:ee.showlegend,legend:ee.legend};J.push(et)}}var er=["legend"];for(X=0;X<J.length;X++)_.pushUnique(er,J[X].legend);for(X=0,o._legends=[];X<er.length;X++){var en=er[X];(function(i,o,s,X){var J,$,ee,et,er=o[i]||{},en=F.newContainer(s,i);function coerce(i,o){return _.coerce(er,en,j,i,o)}var ei=_.coerceFont(coerce,"font",s.font);if(coerce("bgcolor",s.paper_bgcolor),coerce("bordercolor"),coerce("visible")){for(var traceCoerce=function(i,o){var s=J._input,x=J;return _.coerce(s,x,N,i,o)},eo=s.font||{},es=_.coerceFont(coerce,"grouptitlefont",_.extendFlat({},eo,{size:Math.round(1.1*eo.size)})),el=0,ec=!1,eu="normal",ef=(s.shapes||[]).filter(function(i){return i.showlegend}),eh=X.concat(ef).filter(function(o){return i===(o.legend||"legend")}),ed=0;ed<eh.length;ed++)if((J=eh[ed]).visible){var ep=J._isShape;(J.showlegend||J._dfltShowLegend&&!(J._module&&J._module.attributes&&J._module.attributes.showlegend&&!1===J._module.attributes.showlegend.dflt))&&(el++,J.showlegend&&(ec=!0,(!ep&&x.traceIs(J,"pie-like")||!0===J._input.showlegend)&&el++),_.coerceFont(traceCoerce,"legendgrouptitle.font",es)),(!ep&&x.traceIs(J,"bar")&&"stack"===s.barmode||-1!==["tonextx","tonexty"].indexOf(J.fill))&&(eu=Z.isGrouped({traceorder:eu})?"grouped+reversed":"reversed"),void 0!==J.legendgroup&&""!==J.legendgroup&&(eu=Z.isReversed({traceorder:eu})?"reversed+grouped":"grouped")}var eg=_.coerce(o,s,G,"showlegend",ec&&el>("legend"===i?1:0));if(!1===eg&&(s[i]=void 0),(!1!==eg||er.uirevision)&&(coerce("uirevision",s.uirevision),!1!==eg)){coerce("borderwidth");var em=coerce("orientation"),ey=coerce("yref"),ev=coerce("xref"),ex="h"===em,e_="paper"===ey,ew="paper"===ev,eT="left";if(ex?($=0,x.getComponentMethod("rangeslider","isVisible")(o.xaxis)?e_?(ee=1.1,et="bottom"):(ee=1,et="top"):e_?(ee=-.1,et="top"):(ee=0,et="bottom")):(ee=1,et="auto",ew?$=1.02:($=1,eT="right")),_.coerce(er,en,{x:{valType:"number",editType:"legend",min:ew?-2:0,max:ew?3:1,dflt:$}},"x"),_.coerce(er,en,{y:{valType:"number",editType:"legend",min:e_?-2:0,max:e_?3:1,dflt:ee}},"y"),coerce("traceorder",eu),Z.isGrouped(s[i])&&coerce("tracegroupgap"),coerce("entrywidth"),coerce("entrywidthmode"),coerce("itemsizing"),coerce("itemwidth"),coerce("itemclick"),coerce("itemdoubleclick"),coerce("groupclick"),coerce("xanchor",eT),coerce("yanchor",et),coerce("valign"),_.noneOrAll(er,en,["x","y"]),coerce("title.text")){coerce("title.side",ex?"left":"top");var ek=_.extendFlat({},ei,{size:_.bigFont(ei.size)});_.coerceFont(coerce,"title.font",ek)}}}})(en,i,o,J),o[en]&&o[en].visible&&(o[en]._id=en),o._legends.push(en)}}},43969:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(74875),N=s(73972),j=s(11086),G=s(28569),Z=s(91424),X=s(7901),J=s(63893),$=s(85167),ee=s(14928),et=s(18783),er=et.LINE_SPACING,en=et.FROM_TL,ei=et.FROM_BR,eo=s(82424),es=s(53630),el=s(10130),ec=/^legend[0-9]*$/;function drawOne(i,o){var s,j,J,$=o||{},et=i._fullLayout,er=getId($),ec=$._inHover;if(ec?(j=$.layer,s="hover"):(j=et._infolayer,s=er),j){if(s+=et._uid,i._legendMouseDownTime||(i._legendMouseDownTime=0),ec){if(!$.entries)return;J=eo($.entries,$)}else{for(var eu=(i.calcdata||[]).slice(),ef=et.shapes,eh=0;eh<ef.length;eh++){var ed=ef[eh];if(ed.showlegend){var ep={_isShape:!0,_fullInput:ed,index:ed._index,name:ed.name||ed.label.text||"shape "+ed._index,legend:ed.legend,legendgroup:ed.legendgroup,legendgrouptitle:ed.legendgrouptitle,legendrank:ed.legendrank,legendwidth:ed.legendwidth,showlegend:ed.showlegend,visible:ed.visible,opacity:ed.opacity,mode:"line"===ed.type?"lines":"markers",line:ed.line,marker:{line:ed.line,color:ed.fillcolor,size:12,symbol:"rect"===ed.type?"square":"circle"===ed.type?"circle":"hexagon2"}};eu.push([{trace:ep}])}}J=et.showlegend&&eo(eu,$,et._legends.length>1)}var eg=et.hiddenlabels||[];if(!ec&&(!et.showlegend||!J.length))return j.selectAll("."+er).remove(),et._topdefs.select("#"+s).remove(),F.autoMargin(i,er);var em=_.ensureSingle(j,"g",er,function(i){ec||i.attr("pointer-events","all")}),ey=_.ensureSingleById(et._topdefs,"clipPath",s,function(i){i.append("rect")}),ev=_.ensureSingle(em,"rect","bg",function(i){i.attr("shape-rendering","crispEdges")});ev.call(X.stroke,$.bordercolor).call(X.fill,$.bgcolor).style("stroke-width",$.borderwidth+"px");var ex=_.ensureSingle(em,"g","scrollbox"),e_=$.title;if($._titleWidth=0,$._titleHeight=0,e_.text){var ew=_.ensureSingle(ex,"text",er+"titletext");ew.attr("text-anchor","start").call(Z.font,e_.font).text(e_.text),textLayout(ew,ex,i,$,1)}else ex.selectAll("."+er+"titletext").remove();var eT=_.ensureSingle(em,"rect","scrollbar",function(i){i.attr(ee.scrollBarEnterAttrs).call(X.fill,ee.scrollBarColor)}),ek=ex.selectAll("g.groups").data(J);ek.enter().append("g").attr("class","groups"),ek.exit().remove();var eA=ek.selectAll("g.traces").data(_.identity);eA.enter().append("g").attr("class","traces"),eA.exit().remove(),eA.style("opacity",function(i){var o=i[0].trace;return N.traceIs(o,"pie-like")?-1!==eg.indexOf(i[0].label)?.5:1:"legendonly"===o.visible?.5:1}).each(function(){x.select(this).call(drawTexts,i,$)}).call(es,i,$).each(function(){ec||x.select(this).call(setupTraceToggle,i,er)}),_.syncOrAsync([F.previousPromises,function(){return function(i,o,s,_){var F,N,j,G,X=i._fullLayout,J=getId(_);_||(_=X[J]);var $=X._size,et=el.isVertical(_),er=el.isGrouped(_),en="fraction"===_.entrywidthmode,ei=_.borderwidth,eo=2*ei,es=ee.itemGap,ec=_.itemwidth+2*es,eu=2*(ei+es),ef=getYanchor(_),eh=_.y<0||0===_.y&&"top"===ef,ed=_.y>1||1===_.y&&"bottom"===ef,ep=_.tracegroupgap,eg={};_._maxHeight=Math.max(eh||ed?X.height/2:$.h,30);var em=0;_._width=0,_._height=0;var ey=(N=0,j=0,(G=(F=_).title.side)&&(-1!==G.indexOf("left")&&(N=F._titleWidth),-1!==G.indexOf("top")&&(j=F._titleHeight)),[N,j]);if(et)s.each(function(i){var o=i[0].height;Z.setTranslate(this,ei+ey[0],ei+ey[1]+_._height+o/2+es),_._height+=o,_._width=Math.max(_._width,i[0].width)}),em=ec+_._width,_._width+=es+ec+eo,_._height+=eu,er&&(o.each(function(i,o){Z.setTranslate(this,0,o*_.tracegroupgap)}),_._height+=(_._lgroupsLength-1)*_.tracegroupgap);else{var ev=getXanchor(_),ex=_.x<0||0===_.x&&"right"===ev,e_=_.x>1||1===_.x&&"left"===ev,ew=ed||eh,eT=X.width/2;_._maxWidth=Math.max(ex?ew&&"left"===ev?$.l+$.w:eT:e_?ew&&"right"===ev?$.r+$.w:eT:$.w,2*ec);var ek=0,eA=0;s.each(function(i){var o=getTraceWidth(i,_,ec);ek=Math.max(ek,o),eA+=o}),em=null;var eS=0;if(er){var eM=0,eC=0,eE=0;o.each(function(){var i=0,o=0;x.select(this).selectAll("g.traces").each(function(s){var x=getTraceWidth(s,_,ec),F=s[0].height;Z.setTranslate(this,ey[0],ey[1]+ei+es+F/2+o),o+=F,i=Math.max(i,x),eg[s[0].trace.legendgroup]=i});var s=i+es;eC>0&&s+ei+eC>_._maxWidth?(eS=Math.max(eS,eC),eC=0,eE+=eM+ep,eM=o):eM=Math.max(eM,o),Z.setTranslate(this,eC,eE),eC+=s}),_._width=Math.max(eS,eC)+ei,_._height=eE+eM+eu}else{var eL=s.size(),eP=eA+eo+(eL-1)*es<_._maxWidth,eI=0,eO=0,eD=0,eR=0;s.each(function(i){var o=i[0].height,s=getTraceWidth(i,_,ec,er),x=eP?s:ek;en||(x+=es),x+ei+eO-es>=_._maxWidth&&(eS=Math.max(eS,eR),eO=0,eD+=eI,_._height+=eI,eI=0),Z.setTranslate(this,ey[0]+ei+eO,ey[1]+ei+eD+o/2+es),eR=eO+s+es,eO+=x,eI=Math.max(eI,o)}),eP?(_._width=eO+eo,_._height=eI+eu):(_._width=Math.max(eS,eR)+eo,_._height+=eI+eu)}}_._width=Math.ceil(Math.max(_._width+ey[0],_._titleWidth+2*(ei+ee.titlePad))),_._height=Math.ceil(Math.max(_._height+ey[1],_._titleHeight+2*(ei+ee.itemGap))),_._effHeight=Math.min(_._height,_._maxHeight);var eB=i._context.edits,ez=eB.legendText||eB.legendPosition;s.each(function(i){var o=x.select(this).select("."+J+"toggle"),s=i[0].height,F=i[0].trace.legendgroup,N=getTraceWidth(i,_,ec);er&&""!==F&&(N=eg[F]);var j=ez?ec:em||N;et||en||(j+=es/2),Z.setRect(o,0,-s/2,j,s)})}(i,ek,eA,$)},function(){var o,X,J,eo,es=et._size,el=$.borderwidth,eu="paper"===$.xref,ef="paper"===$.yref;if(!ec){if(function(i,o,s,x){var _=i._fullLayout,N=_[o],j=getXanchor(N),G=getYanchor(N),Z="paper"===N.xref,X="paper"===N.yref;i._fullLayout._reservedMargin[o]={};var J=N.y<.5?"b":"t",$=N.x<.5?"l":"r",ee={r:_.width-s,l:s+N._width,b:_.height-x,t:x+N._effHeight};if(Z&&X)return F.autoMargin(i,o,{x:N.x,y:N.y,l:N._width*en[j],r:N._width*ei[j],b:N._effHeight*ei[G],t:N._effHeight*en[G]});Z?i._fullLayout._reservedMargin[o][J]=ee[J]:X?i._fullLayout._reservedMargin[o][$]=ee[$]:"v"===N.orientation?i._fullLayout._reservedMargin[o][$]=ee[$]:i._fullLayout._reservedMargin[o][J]=ee[J]}(i,er,eg=eu?es.l+es.w*$.x-en[getXanchor($)]*$._width:et.width*$.x-en[getXanchor($)]*$._width,e_=ef?es.t+es.h*(1-$.y)-en[getYanchor($)]*$._effHeight:et.height*(1-$.y)-en[getYanchor($)]*$._effHeight))return;if(et.margin.autoexpand){var eh=eg,ed=e_;eg=eu?_.constrain(eg,0,et.width-$._width):eh,e_=ef?_.constrain(e_,0,et.height-$._effHeight):ed,eg!==eh&&_.log("Constrain "+er+".x to make legend fit inside graph"),e_!==ed&&_.log("Constrain "+er+".y to make legend fit inside graph")}Z.setTranslate(em,eg,e_)}if(eT.on(".drag",null),em.on("wheel",null),ec||$._height<=$._maxHeight||i._context.staticPlot){var ep=$._effHeight;ec&&(ep=$._height),ev.attr({width:$._width-el,height:ep-el,x:el/2,y:el/2}),Z.setTranslate(ex,0,0),ey.select("rect").attr({width:$._width-2*el,height:ep-2*el,x:el,y:el}),Z.setClipUrl(ex,s,i),Z.setRect(eT,0,0,0,0),delete $._scrollY}else{var eg,e_,ew,ek,eA,eS=Math.max(ee.scrollBarMinHeight,$._effHeight*$._effHeight/$._height),eM=$._effHeight-eS-2*ee.scrollBarMargin,eC=$._height-$._effHeight,eE=eM/eC,eL=Math.min($._scrollY||0,eC);ev.attr({width:$._width-2*el+ee.scrollBarWidth+ee.scrollBarMargin,height:$._effHeight-el,x:el/2,y:el/2}),ey.select("rect").attr({width:$._width-2*el+ee.scrollBarWidth+ee.scrollBarMargin,height:$._effHeight-2*el,x:el,y:el+eL}),Z.setClipUrl(ex,s,i),scrollHandler(eL,eS,eE),em.on("wheel",function(){scrollHandler(eL=_.constrain($._scrollY+x.event.deltaY/eM*eC,0,eC),eS,eE),0!==eL&&eL!==eC&&x.event.preventDefault()});var getScrollBarDragY=function(i,o,s){var x=(s-o)/eE+i;return _.constrain(x,0,eC)},getNaturalDragY=function(i,o,s){var x=(o-s)/eE+i;return _.constrain(x,0,eC)},eP=x.behavior.drag().on("dragstart",function(){var i=x.event.sourceEvent;ew="touchstart"===i.type?i.changedTouches[0].clientY:i.clientY,eA=eL}).on("drag",function(){var i=x.event.sourceEvent;2===i.buttons||i.ctrlKey||(ek="touchmove"===i.type?i.changedTouches[0].clientY:i.clientY,scrollHandler(eL=getScrollBarDragY(eA,ew,ek),eS,eE))});eT.call(eP);var eI=x.behavior.drag().on("dragstart",function(){var i=x.event.sourceEvent;"touchstart"===i.type&&(ew=i.changedTouches[0].clientY,eA=eL)}).on("drag",function(){var i=x.event.sourceEvent;"touchmove"===i.type&&(ek=i.changedTouches[0].clientY,scrollHandler(eL=getNaturalDragY(eA,ew,ek),eS,eE))});ex.call(eI)}function scrollHandler(o,s,x){$._scrollY=i._fullLayout[er]._scrollY=o,Z.setTranslate(ex,0,-o),Z.setRect(eT,$._width,ee.scrollBarMargin+o*x,ee.scrollBarWidth,s),ey.select("rect").attr("y",el+o)}i._context.edits.legendPosition&&(em.classed("cursor-move",!0),G.init({element:em.node(),gd:i,prepFn:function(){var i=Z.getTranslate(em);J=i.x,eo=i.y},moveFn:function(i,s){var x=J+i,_=eo+s;Z.setTranslate(em,x,_),o=G.align(x,$._width,es.l,es.l+es.w,$.xanchor),X=G.align(_+$._height,-$._height,es.t+es.h,es.t,$.yanchor)},doneFn:function(){if(void 0!==o&&void 0!==X){var s={};s[er+".x"]=o,s[er+".y"]=X,N.call("_guiRelayout",i,s)}},clickFn:function(o,s){var x=j.selectAll("g.traces").filter(function(){var i=this.getBoundingClientRect();return s.clientX>=i.left&&s.clientX<=i.right&&s.clientY>=i.top&&s.clientY<=i.bottom});x.size()>0&&clickOrDoubleClick(i,em,x,o,s)}}))}],i)}}function getTraceWidth(i,o,s){var x=i[0],_=x.width,F=o.entrywidthmode,N=x.trace.legendwidth||o.entrywidth;return"fraction"===F?o._maxWidth*N:s+(N||_)}function clickOrDoubleClick(i,o,s,x,_){var F=s.data()[0][0].trace,G={event:_,node:s.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:i.data,layout:i.layout,frames:i._transitionData._frames,config:i._context,fullData:i._fullData,fullLayout:i._fullLayout};F._group&&(G.group=F._group),N.traceIs(F,"pie-like")&&(G.label=s.datum()[0].label),!1!==j.triggerHandler(i,"plotly_legendclick",G)&&(1===x?o._clickTimeout=setTimeout(function(){i._fullLayout&&$(s,i,x)},i._context.doubleClickDelay):2===x&&(o._clickTimeout&&clearTimeout(o._clickTimeout),i._legendMouseDownTime=0,!1!==j.triggerHandler(i,"plotly_legenddoubleclick",G)&&$(s,i,x)))}function drawTexts(i,o,s){var x,F,j=getId(s),G=i.data()[0][0],X=G.trace,$=N.traceIs(X,"pie-like"),et=!s._inHover&&o._context.edits.legendText&&!$,er=s._maxNameLength;G.groupTitle?(x=G.groupTitle.text,F=G.groupTitle.font):(F=s.font,s.entries?x=G.text:(x=$?G.label:X.name,X._meta&&(x=_.templateString(x,X._meta))));var en=_.ensureSingle(i,"text",j+"text");en.attr("text-anchor","start").call(Z.font,F).text(et?ensureLength(x,er):x);var ei=s.itemwidth+2*ee.itemGap;J.positionText(en,ei,0),et?en.call(J.makeEditable,{gd:o,text:x}).call(textLayout,i,o,s).on("edit",function(x){this.text(ensureLength(x,er)).call(textLayout,i,o,s);var F=G.trace._fullInput||{},j={};if(N.hasTransform(F,"groupby")){var Z=N.getTransformIndices(F,"groupby"),J=Z[Z.length-1],$=_.keyedContainer(F,"transforms["+J+"].styles","target","value.name");$.set(G.trace._group,x),j=$.constructUpdate()}else j.name=x;return F._isShape?N.call("_guiRelayout",o,"shapes["+X.index+"].name",j.name):N.call("_guiRestyle",o,j,X.index)}):textLayout(en,i,o,s)}function ensureLength(i,o){var s=Math.max(4,o);if(i&&i.trim().length>=s/2)return i;i=i||"";for(var x=s-i.length;x>0;x--)i+=" ";return i}function setupTraceToggle(i,o,s){var F,N=o._context.doubleClickDelay,j=1,G=_.ensureSingle(i,"rect",s+"toggle",function(i){o._context.staticPlot||i.style("cursor","pointer").attr("pointer-events","all"),i.call(X.fill,"rgba(0,0,0,0)")});o._context.staticPlot||(G.on("mousedown",function(){(F=new Date().getTime())-o._legendMouseDownTime<N?j+=1:(j=1,o._legendMouseDownTime=F)}),G.on("mouseup",function(){if(!o._dragged&&!o._editing){var _=o._fullLayout[s];new Date().getTime()-o._legendMouseDownTime>N&&(j=Math.max(j-1,1)),clickOrDoubleClick(o,_,i,j,x.event)}}))}function textLayout(i,o,s,x,_){x._inHover&&i.attr("data-notex",!0),J.convertToTspans(i,s,function(){(function(i,o,s,x){var _,F,N=i.data()[0][0];if(!s._inHover&&N&&!N.trace.showlegend){i.remove();return}var j=i.select("g[class*=math-group]"),G=j.node(),X=getId(s);s||(s=o._fullLayout[X]);var $=s.borderwidth,et=(1===x?s.title.font:N.groupTitle?N.groupTitle.font:s.font).size*er;if(G){var en=Z.bBox(G);_=en.height,F=en.width,1===x?Z.setTranslate(j,$,$+.75*_):Z.setTranslate(j,0,.25*_)}else{var ei=i.select("."+X+(1===x?"title":"")+"text"),eo=J.lineCount(ei),es=ei.node();if(_=et*eo,F=es?Z.bBox(es).width:0,1===x){var el=0;"left"===s.title.side?F+=2*ee.itemGap:"top center"===s.title.side?s._width&&(el=.5*(s._width-2*$-2*ee.titlePad-F)):"top right"===s.title.side&&s._width&&(el=s._width-2*$-2*ee.titlePad-F),J.positionText(ei,$+ee.titlePad+el,$+et)}else{var ec=2*ee.itemGap+s.itemwidth;N.groupTitle&&(ec=ee.itemGap,F-=s.itemwidth),J.positionText(ei,ec,-et*((eo-1)/2-.3))}}1===x?(s._titleWidth=F,s._titleHeight=_):(N.lineHeight=et,N.height=Math.max(_,16)+3,N.width=F)})(o,s,x,_)})}function getXanchor(i){return _.isRightAnchor(i)?"right":_.isCenterAnchor(i)?"center":"left"}function getYanchor(i){return _.isBottomAnchor(i)?"bottom":_.isMiddleAnchor(i)?"middle":"top"}function getId(i){return i._id||"legend"}i.exports=function(i,o){if(o)drawOne(i,o);else{var s=i._fullLayout,_=s._legends;s._infolayer.selectAll('[class^="legend"]').each(function(){var i=x.select(this),o=i.attr("class").split(" ")[0];o.match(ec)&&-1===_.indexOf(o)&&i.remove()});for(var F=0;F<_.length;F++){var N=_[F],j=i._fullLayout[N];drawOne(i,j)}}}},82424:function(i,o,s){"use strict";var x=s(73972),_=s(10130);i.exports=function(i,o,s){var F,N,j=o._inHover,G=_.isGrouped(o),Z=_.isReversed(o),X={},J=[],$=!1,ee={},et=0,er=0;function addOneItem(i,x,F){if(!1!==o.visible&&(!s||i===o._id)){if(""!==x&&_.isGrouped(o))-1===J.indexOf(x)?(J.push(x),$=!0,X[x]=[F]):X[x].push(F);else{var N="~~i"+et;J.push(N),X[N]=[F],et++}}}for(F=0;F<i.length;F++){var en=i[F],ei=en[0],eo=ei.trace,es=eo.legend,el=eo.legendgroup;if(j||eo.visible&&eo.showlegend){if(x.traceIs(eo,"pie-like"))for(ee[el]||(ee[el]={}),N=0;N<en.length;N++){var ec=en[N].label;ee[el][ec]||(addOneItem(es,el,{label:ec,color:en[N].color,i:en[N].i,trace:eo,pts:en[N].pts}),ee[el][ec]=!0,er=Math.max(er,(ec||"").length))}else addOneItem(es,el,ei),er=Math.max(er,(eo.name||"").length)}}if(!J.length)return[];var eu=!$||!G,ef=[];for(F=0;F<J.length;F++){var eh=X[J[F]];eu?ef.push(eh[0]):ef.push(eh)}for(eu&&(ef=[ef]),F=0;F<ef.length;F++){var ed=1/0;for(N=0;N<ef[F].length;N++){var ep=ef[F][N].trace.legendrank;ed>ep&&(ed=ep)}ef[F][0]._groupMinRank=ed,ef[F][0]._preGroupSort=F}var orderFn2=function(i,o){return i.trace.legendrank-o.trace.legendrank||i._preSort-o._preSort};for(ef.forEach(function(i,o){i[0]._preGroupSort=o}),ef.sort(function(i,o){return i[0]._groupMinRank-o[0]._groupMinRank||i[0]._preGroupSort-o[0]._preGroupSort}),F=0;F<ef.length;F++){ef[F].forEach(function(i,o){i._preSort=o}),ef[F].sort(orderFn2);var eg=ef[F][0].trace,em=null;for(N=0;N<ef[F].length;N++){var ey=ef[F][N].trace.legendgrouptitle;if(ey&&ey.text){em=ey,j&&(ey.font=o._groupTitleFont);break}}if(Z&&ef[F].reverse(),em){var ev=!1;for(N=0;N<ef[F].length;N++)if(x.traceIs(ef[F][N].trace,"pie-like")){ev=!0;break}ef[F].unshift({i:-1,groupTitle:em,noClick:ev,trace:{showlegend:eg.showlegend,legendgroup:eg.legendgroup,visible:"toggleitem"===o.groupclick||eg.visible}})}for(N=0;N<ef[F].length;N++)ef[F][N]=[ef[F][N]]}return o._lgroupsLength=ef.length,o._maxNameLength=er,ef}},85167:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=_.pushUnique,N=!0;i.exports=function(i,o,s){var j=o._fullLayout;if(!o._dragged&&!o._editing){var G=j.legend.itemclick,Z=j.legend.itemdoubleclick,X=j.legend.groupclick;if(1===s&&"toggle"===G&&"toggleothers"===Z&&N&&o.data&&o._context.showTips&&_.notifier(_._(o,"Double-click on legend to isolate one trace"),"long"),N=!1,1===s?eM=G:2===s&&(eM=Z),eM){var J="togglegroup"===X,$=j.hiddenlabels?j.hiddenlabels.slice():[],ee=i.data()[0][0];if(!ee.groupTitle||!ee.noClick){var et=o._fullData,er=(j.shapes||[]).filter(function(i){return i.showlegend}),en=et.concat(er),ei=ee.trace;ei._isShape&&(ei=ei._fullInput);var eo=ei.legendgroup,es={},el=[],ec=[],eu=[],ef=(j.shapes||[]).map(function(i){return i._input}),eh=!1,ed=ei.legend,ep=ei._fullInput;if(!(ep&&ep._isShape)&&x.traceIs(ei,"pie-like")){var eg=ee.label,em=$.indexOf(eg);if("toggle"===eM)-1===em?$.push(eg):$.splice(em,1);else if("toggleothers"===eM){var ey=-1!==em,ev=[];for(eC=0;eC<o.calcdata.length;eC++){var ex=o.calcdata[eC];for(eE=0;eE<ex.length;eE++){var e_=ex[eE].label;ed===ex[0].trace.legend&&eg!==e_&&(-1===$.indexOf(e_)&&(ey=!0),F($,e_),ev.push(e_))}}if(!ey)for(var ew=0;ew<ev.length;ew++){var eT=$.indexOf(ev[ew]);-1!==eT&&$.splice(eT,1)}}x.call("_guiRelayout",o,"hiddenlabels",$)}else{var ek=eo&&eo.length,eA=[];if(ek)for(eC=0;eC<en.length;eC++)(eO=en[eC]).visible&&eO.legendgroup===eo&&eA.push(eC);if("toggle"===eM){switch(ei.visible){case!0:eD="legendonly";break;case!1:eD=!1;break;case"legendonly":eD=!0}if(ek){if(J)for(eC=0;eC<en.length;eC++){var eS=en[eC];!1!==eS.visible&&eS.legendgroup===eo&&setVisibility(eS,eD)}else setVisibility(ei,eD)}else setVisibility(ei,eD)}else if("toggleothers"===eM){var eM,eC,eE,eL,eP,eI,eO,eD,eR,eB,ez,eF,eN,ej=!0;for(eC=0;eC<en.length;eC++)if(eR=(eN=en[eC])===ei,ez=!0!==eN.showlegend,!eR&&!ez&&!(eB=ek&&eN.legendgroup===eo)&&eN.legend===ed&&!0===eN.visible&&!x.traceIs(eN,"notLegendIsolatable")){ej=!1;break}for(eC=0;eC<en.length;eC++)if(!1!==(eN=en[eC]).visible&&eN.legend===ed){if(x.traceIs(eN,"notLegendIsolatable"))continue;switch(ei.visible){case"legendonly":setVisibility(eN,!0);break;case!0:eF=!!ej||"legendonly",eR=eN===ei,ez=!0!==eN.showlegend&&!eN.legendgroup,eB=eR||ek&&eN.legendgroup===eo,setVisibility(eN,!!eB||!!ez||eF)}}}for(eC=0;eC<ec.length;eC++)if(eL=ec[eC]){var eU=eL.constructUpdate(),eV=Object.keys(eU);for(eE=0;eE<eV.length;eE++)(es[eP=eV[eE]]=es[eP]||[])[eu[eC]]=eU[eP]}for(eC=0,eI=Object.keys(es);eC<eI.length;eC++)for(eE=0,eP=eI[eC];eE<el.length;eE++)es[eP].hasOwnProperty(eE)||(es[eP][eE]=void 0);eh?x.call("_guiUpdate",o,es,{shapes:ef},el):x.call("_guiRestyle",o,es,el)}}}}function insertDataUpdate(i,o){var s=el.indexOf(i),x=es.visible;return x||(x=es.visible=[]),-1===el.indexOf(i)&&(el.push(i),s=el.length-1),x[s]=o,s}function setVisibility(i,o){if(!ee.groupTitle||J){var s=i._fullInput||i,F=s._isShape,N=s.index;if(void 0===N&&(N=s._index),x.hasTransform(s,"groupby")){var j=ec[N];if(!j){var G=x.getTransformIndices(s,"groupby"),Z=G[G.length-1];j=_.keyedContainer(s,"transforms["+Z+"].styles","target","value.visible"),ec[N]=j}var X=j.get(i._group);void 0===X&&(X=!0),!1!==X&&j.set(i._group,o),eu[N]=insertDataUpdate(N,!1!==s.visible)}else{var $=!1!==s.visible&&o;F?(ef[N].visible=$,eh=!0):insertDataUpdate(N,$)}}}}},10130:function(i,o){"use strict";o.isGrouped=function(i){return -1!==(i.traceorder||"").indexOf("grouped")},o.isVertical=function(i){return"h"!==i.orientation},o.isReversed=function(i){return -1!==(i.traceorder||"").indexOf("reversed")}},2199:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"legend",layoutAttributes:s(33030),supplyLayoutDefaults:s(99017),draw:s(43969),style:s(53630)}},53630:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(71828),N=F.strTranslate,j=s(91424),G=s(7901),Z=s(52075).extractOpts,X=s(34098),J=s(63463),$=s(53581).castOption,ee=s(14928);function getGradientDirection(i,o){return(o?"radial":"horizontal")+(i?"":"reversed")}function getStyleGuide(i){var o=i[0].trace,s=o.contours,x=X.hasLines(o),_=X.hasMarkers(o),F=o.visible&&o.fill&&"none"!==o.fill,N=!1,j=!1;if(s){var G=s.coloring;"lines"===G?N=!0:x="none"===G||"heatmap"===G||s.showlines,"constraint"===s.type?F="="!==s._operation:("fill"===G||"heatmap"===G)&&(j=!0)}return{showMarker:_,showLine:x,showFill:F,showGradientLine:N,showGradientFill:j,anyLine:x||N,anyFill:F||j}}function dimAttr(i,o,s){return i&&F.isArrayOrTypedArray(i)?o:i>s?s:i}i.exports=function(i,o,s){var et=o._fullLayout;s||(s=et.legend);var er="constant"===s.itemsizing,en=s.itemwidth,ei=N((en+2*ee.itemGap)/2,0),boundLineWidth=function(i,o,s,x){var _;if(i+1)_=i;else{if(!o||!(o.width>0))return 0;_=o.width}return er?x:Math.min(_,s)};function styleBarLike(i,F,N){var X=i[0].trace,J=X.marker||{},$=J.line||{},ee=N?X.visible&&X.type===N:_.traceIs(X,"bar"),et=x.select(F).select("g.legendpoints").selectAll("path.legend"+N).data(ee?[i]:[]);et.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ei),et.exit().remove(),et.each(function(i){var _=x.select(this),F=i[0],N=boundLineWidth(F.mlw,J.line,5,2);_.style("stroke-width",N+"px");var ee=F.mcc;if(!s._inHover&&"mc"in F){var et=Z(J),er=et.mid;void 0===er&&(er=(et.max+et.min)/2),ee=j.tryColorscale(J,"")(er)}var en=ee||F.mc||J.color,ei=J.pattern,eo=ei&&j.getPatternAttr(ei.shape,0,"");if(eo){var es=j.getPatternAttr(ei.bgcolor,0,null),el=j.getPatternAttr(ei.fgcolor,0,null),ec=ei.fgopacity,eu=dimAttr(ei.size,8,10),ef=dimAttr(ei.solidity,.5,1),eh="legend-"+X.uid;_.call(j.pattern,"legend",o,eh,eo,eu,ef,ee,ei.fillmode,es,el,ec)}else _.call(G.fill,en);N&&G.stroke(_,F.mlc||$.color)})}function stylePieLike(i,s,N){var j=i[0],G=j.trace,Z=N?G.visible&&G.type===N:_.traceIs(G,N),X=x.select(s).select("g.legendpoints").selectAll("path.legend"+N).data(Z?[i]:[]);if(X.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ei),X.exit().remove(),X.size()){var ee=G.marker||{},et=boundLineWidth($(ee.line.width,j.pts),ee.line,5,2),er="pieLike",en=F.minExtend(G,{marker:{line:{width:et}}},er);J(X,F.minExtend(j,{trace:en},er),en,o)}}i.each(function(i){var o=x.select(this),_=F.ensureSingle(o,"g","layers");_.style("opacity",i[0].trace.opacity);var j=s.valign,G=i[0].lineHeight,Z=i[0].height;"middle"!==j&&G&&Z?_.attr("transform",N(0,{top:1,bottom:-1}[j]*(.5*(G-Z+3)))):_.attr("transform",null),_.selectAll("g.legendfill").data([i]).enter().append("g").classed("legendfill",!0),_.selectAll("g.legendlines").data([i]).enter().append("g").classed("legendlines",!0);var X=_.selectAll("g.legendsymbols").data([i]);X.enter().append("g").classed("legendsymbols",!0),X.selectAll("g.legendpoints").data([i]).enter().append("g").classed("legendpoints",!0)}).each(function(i){var s,_=i[0].trace,N=[];if(_.visible)switch(_.type){case"histogram2d":case"heatmap":N=[["M-15,-2V4H15V-2Z"]],s=!0;break;case"choropleth":case"choroplethmapbox":N=[["M-6,-6V6H6V-6Z"]],s=!0;break;case"densitymapbox":N=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],s="radial";break;case"cone":N=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],s=!1;break;case"streamtube":N=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],s=!1;break;case"surface":N=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],s=!0;break;case"mesh3d":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],s=!1;break;case"volume":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],s=!0;break;case"isosurface":N=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],s=!1}var X=x.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(N);X.enter().append("path").classed("legend3dandfriends",!0).attr("transform",ei).style("stroke-miterlimit",1),X.exit().remove(),X.each(function(i,N){var X,J=x.select(this),$=Z(_),ee=$.colorscale,et=$.reversescale;if(ee){if(!s){var er=ee.length;X=0===N?ee[et?er-1:0][1]:1===N?ee[et?0:er-1][1]:ee[Math.floor((er-1)/2)][1]}}else{var en=_.vertexcolor||_.facecolor||_.color;X=F.isArrayOrTypedArray(en)?en[N]||en[0]:en}J.attr("d",i[0]),X?J.call(G.fill,X):J.call(function(i){if(i.size()){var x="legendfill-"+_.uid;j.gradient(i,o,x,getGradientDirection(et,"radial"===s),ee,"fill")}})})}).each(function(i){var o=i[0].trace,s="waterfall"===o.type;if(i[0]._distinct&&s){var _=i[0].trace[i[0].dir].marker;return i[0].mc=_.color,i[0].mlw=_.line.width,i[0].mlc=_.line.color,styleBarLike(i,this,"waterfall")}var F=[];o.visible&&s&&(F=i[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var N=x.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(F);N.enter().append("path").classed("legendwaterfall",!0).attr("transform",ei).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(i){var s=x.select(this),_=o[i[0]].marker,F=boundLineWidth(void 0,_.line,5,2);s.attr("d",i[1]).style("stroke-width",F+"px").call(G.fill,_.color),F&&s.call(G.stroke,_.line.color)})}).each(function(i){styleBarLike(i,this,"funnel")}).each(function(i){styleBarLike(i,this)}).each(function(i){var s=i[0].trace,N=x.select(this).select("g.legendpoints").selectAll("path.legendbox").data(s.visible&&_.traceIs(s,"box-violin")?[i]:[]);N.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",ei),N.exit().remove(),N.each(function(){var i=x.select(this);if(("all"===s.boxpoints||"all"===s.points)&&0===G.opacity(s.fillcolor)&&0===G.opacity((s.line||{}).color)){var _=F.minExtend(s,{marker:{size:er?12:F.constrain(s.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});N.call(j.pointStyle,_,o)}else{var Z=boundLineWidth(void 0,s.line,5,2);i.style("stroke-width",Z+"px").call(G.fill,s.fillcolor),Z&&G.stroke(i,s.line.color)}})}).each(function(i){stylePieLike(i,this,"funnelarea")}).each(function(i){stylePieLike(i,this,"pie")}).each(function(i){var s,_,N=getStyleGuide(i),G=N.showFill,J=N.showLine,$=N.showGradientLine,ee=N.showGradientFill,et=N.anyFill,er=N.anyLine,ei=i[0],eo=ei.trace,es=Z(eo),el=es.colorscale,ec=es.reversescale,eu=X.hasMarkers(eo)||!et?"M5,0":er?"M5,-2":"M5,-3",ef=x.select(this),eh=ef.select(".legendfill").selectAll("path").data(G||ee?[i]:[]);if(eh.enter().append("path").classed("js-fill",!0),eh.exit().remove(),eh.attr("d",eu+"h"+en+"v6h-"+en+"z").call(function(i){if(i.size()){if(G)j.fillGroupStyle(i,o);else{var s="legendfill-"+eo.uid;j.gradient(i,o,s,getGradientDirection(ec),el,"fill")}}}),J||$){var ed=boundLineWidth(void 0,eo.line,10,5);_=F.minExtend(eo,{line:{width:ed}}),s=[F.minExtend(ei,{trace:_})]}var ep=ef.select(".legendlines").selectAll("path").data(J||$?[s]:[]);ep.enter().append("path").classed("js-line",!0),ep.exit().remove(),ep.attr("d",eu+($?"l"+en+",0.0001":"h"+en)).call(J?j.lineGroupStyle:function(i){if(i.size()){var s="legendline-"+eo.uid;j.lineGroupStyle(i),j.gradient(i,o,s,getGradientDirection(ec),el,"stroke")}})}).each(function(i){var s,_,N=getStyleGuide(i),G=N.anyFill,Z=N.anyLine,J=N.showLine,$=N.showMarker,ee=i[0],et=ee.trace,en=!$&&!Z&&!G&&X.hasText(et);function boundVal(i,o,s,x){var _=F.nestedProperty(et,i).get(),N=F.isArrayOrTypedArray(_)&&o?o(_):_;if(er&&N&&void 0!==x&&(N=x),s){if(N<s[0])return s[0];if(N>s[1])return s[1]}return N}function pickFirst(i){return ee._distinct&&ee.index&&i[ee.index]?i[ee.index]:i[0]}if($||en||J){var eo={},es={};if($){eo.mc=boundVal("marker.color",pickFirst),eo.mx=boundVal("marker.symbol",pickFirst),eo.mo=boundVal("marker.opacity",F.mean,[.2,1]),eo.mlc=boundVal("marker.line.color",pickFirst),eo.mlw=boundVal("marker.line.width",F.mean,[0,5],2),es.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var el=boundVal("marker.size",F.mean,[2,16],12);eo.ms=el,es.marker.size=el}J&&(es.line={width:boundVal("line.width",pickFirst,[0,10],5)}),en&&(eo.tx="Aa",eo.tp=boundVal("textposition",pickFirst),eo.ts=10,eo.tc=boundVal("textfont.color",pickFirst),eo.tf=boundVal("textfont.family",pickFirst)),s=[F.minExtend(ee,eo)],(_=F.minExtend(et,es)).selectedpoints=null,_.texttemplate=null}var ec=x.select(this).select("g.legendpoints"),eu=ec.selectAll("path.scatterpts").data($?s:[]);eu.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",ei),eu.exit().remove(),eu.call(j.pointStyle,_,o),$&&(s[0].mrc=3);var ef=ec.selectAll("g.pointtext").data(en?s:[]);ef.enter().append("g").classed("pointtext",!0).append("text").attr("transform",ei),ef.exit().remove(),ef.selectAll("text").call(j.textPointStyle,_,o)}).each(function(i){var o=i[0].trace,s=x.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(o.visible&&"candlestick"===o.type?[i,i]:[]);s.enter().append("path").classed("legendcandle",!0).attr("d",function(i,o){return o?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",ei).style("stroke-miterlimit",1),s.exit().remove(),s.each(function(i,s){var _=x.select(this),F=o[s?"increasing":"decreasing"],N=boundLineWidth(void 0,F.line,5,2);_.style("stroke-width",N+"px").call(G.fill,F.fillcolor),N&&G.stroke(_,F.line.color)})}).each(function(i){var o=i[0].trace,s=x.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(o.visible&&"ohlc"===o.type?[i,i]:[]);s.enter().append("path").classed("legendohlc",!0).attr("d",function(i,o){return o?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",ei).style("stroke-miterlimit",1),s.exit().remove(),s.each(function(i,s){var _=x.select(this),F=o[s?"increasing":"decreasing"],N=boundLineWidth(void 0,F.line,5,2);_.style("fill","none").call(j.dashLine,F.line.dash,N),N&&G.stroke(_,F.line.color)})})}},42068:function(i,o,s){"use strict";s(93348),i.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(i,o,s){"use strict";var x=s(73972),_=s(74875),F=s(41675),N=s(24255),j=s(34031).eraseActiveShape,G=s(71828),Z=G._,X=i.exports={};function handleCartesian(i,o){var s=o.currentTarget,_=s.getAttribute("data-attr"),N=s.getAttribute("data-val")||!0,j=i._fullLayout,G={},Z=F.list(i,null,!0),X=j._cartesianSpikesEnabled;if("zoom"===_){var J,$,ee,et="in"===N?.5:2,er=(1+et)/2,en=(1-et)/2;for($=0;$<Z.length;$++)if(!(J=Z[$]).fixedrange){if(ee=J._name,"auto"===N)G[ee+".autorange"]=!0;else if("reset"===N)void 0===J._rangeInitial0&&void 0===J._rangeInitial1?G[ee+".autorange"]=!0:void 0===J._rangeInitial0?(G[ee+".autorange"]=J._autorangeInitial,G[ee+".range"]=[null,J._rangeInitial1]):void 0===J._rangeInitial1?(G[ee+".range"]=[J._rangeInitial0,null],G[ee+".autorange"]=J._autorangeInitial):G[ee+".range"]=[J._rangeInitial0,J._rangeInitial1],void 0===J._showSpikeInitial||(G[ee+".showspikes"]=J._showSpikeInitial,"on"!==X||J._showSpikeInitial||(X="off"));else{var ei=[J.r2l(J.range[0]),J.r2l(J.range[1])],eo=[er*ei[0]+en*ei[1],er*ei[1]+en*ei[0]];G[ee+".range[0]"]=J.l2r(eo[0]),G[ee+".range[1]"]=J.l2r(eo[1])}}}else"hovermode"===_&&("x"===N||"y"===N)&&(N=j._isHoriz?"y":"x",s.setAttribute("data-val",N)),G[_]=N;j._cartesianSpikesEnabled=X,x.call("_guiRelayout",i,G)}function handleDrag3d(i,o){for(var s=o.currentTarget,_=s.getAttribute("data-attr"),F=s.getAttribute("data-val")||!0,N=i._fullLayout._subplots.gl3d||[],j={},G=_.split("."),Z=0;Z<N.length;Z++)j[N[Z]+"."+G[1]]=F;var X="pan"===F?F:"zoom";j.dragmode=X,x.call("_guiRelayout",i,j)}function handleCamera3d(i,o){for(var s=o.currentTarget.getAttribute("data-attr"),_="resetLastSave"===s,F="resetDefault"===s,N=i._fullLayout,j=N._subplots.gl3d||[],G={},Z=0;Z<j.length;Z++){var X,J=j[Z],$=J+".camera",ee=J+".aspectratio",et=J+".aspectmode",er=N[J]._scene;_?(G[$+".up"]=er.viewInitial.up,G[$+".eye"]=er.viewInitial.eye,G[$+".center"]=er.viewInitial.center,X=!0):F&&(G[$+".up"]=null,G[$+".eye"]=null,G[$+".center"]=null,X=!0),X&&(G[ee+".x"]=er.viewInitial.aspectratio.x,G[ee+".y"]=er.viewInitial.aspectratio.y,G[ee+".z"]=er.viewInitial.aspectratio.z,G[et]=er.viewInitial.aspectmode)}x.call("_guiRelayout",i,G)}function getNextHover3d(i,o){var s=o.currentTarget,x=s._previousVal,_=i._fullLayout,F=_._subplots.gl3d||[],N=["xaxis","yaxis","zaxis"],j={},G={};if(x)G=x,s._previousVal=null;else{for(var Z=0;Z<F.length;Z++){var X=F[Z],J=_[X],$=X+".hovermode";j[$]=J.hovermode,G[$]=!1;for(var ee=0;ee<3;ee++){var et=N[ee],er=X+"."+et+".showspikes";G[er]=!1,j[er]=J[et].showspikes}}s._previousVal=j}return G}function handleGeo(i,o){for(var s=o.currentTarget,_=s.getAttribute("data-attr"),F=s.getAttribute("data-val")||!0,N=i._fullLayout,j=N._subplots.geo||[],G=0;G<j.length;G++){var Z=j[G],X=N[Z];if("zoom"===_){var J=X.projection.scale,$="in"===F?2*J:.5*J;x.call("_guiRelayout",i,Z+".projection.scale",$)}}"reset"===_&&resetView(i,"geo")}function getNextHover(i){var o=i._fullLayout;return!o.hovermode&&(o._has("cartesian")?o._isHoriz?"y":"x":"closest")}function toggleHover(i){var o=getNextHover(i);x.call("_guiRelayout",i,"hovermode",o)}function handleMapboxZoom(i,o){for(var s=o.currentTarget.getAttribute("data-val"),_=i._fullLayout,F=_._subplots.mapbox||[],N={},j=0;j<F.length;j++){var G=F[j],Z=_[G].zoom,X="in"===s?1.05*Z:Z/1.05;N[G+".zoom"]=X}x.call("_guiRelayout",i,N)}function resetView(i,o){for(var s=i._fullLayout,_=s._subplots[o]||[],F={},N=0;N<_.length;N++)for(var j=_[N],G=s[j]._subplot.viewInitial,Z=Object.keys(G),X=0;X<Z.length;X++){var J=Z[X];F[j+"."+J]=G[J]}x.call("_guiRelayout",i,F)}X.toImage={name:"toImage",title:function(i){return"png"===((i._context.toImageButtonOptions||{}).format||"png")?Z(i,"Download plot as a png"):Z(i,"Download plot")},icon:N.camera,click:function(i){var o=i._context.toImageButtonOptions,s={format:o.format||"png"};G.notifier(Z(i,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==s.format&&G.isIE()&&(G.notifier(Z(i,"IE only supports svg.  Changing format to svg."),"long"),s.format="svg"),["filename","width","height","scale"].forEach(function(i){i in o&&(s[i]=o[i])}),x.call("downloadImage",i,s).then(function(o){G.notifier(Z(i,"Snapshot succeeded")+" - "+o,"long")}).catch(function(){G.notifier(Z(i,"Sorry, there was a problem downloading your snapshot!"),"long")})}},X.sendDataToCloud={name:"sendDataToCloud",title:function(i){return Z(i,"Edit in Chart Studio")},icon:N.disk,click:function(i){_.sendDataToCloud(i)}},X.editInChartStudio={name:"editInChartStudio",title:function(i){return Z(i,"Edit in Chart Studio")},icon:N.pencil,click:function(i){_.sendDataToCloud(i)}},X.zoom2d={name:"zoom2d",_cat:"zoom",title:function(i){return Z(i,"Zoom")},attr:"dragmode",val:"zoom",icon:N.zoombox,click:handleCartesian},X.pan2d={name:"pan2d",_cat:"pan",title:function(i){return Z(i,"Pan")},attr:"dragmode",val:"pan",icon:N.pan,click:handleCartesian},X.select2d={name:"select2d",_cat:"select",title:function(i){return Z(i,"Box Select")},attr:"dragmode",val:"select",icon:N.selectbox,click:handleCartesian},X.lasso2d={name:"lasso2d",_cat:"lasso",title:function(i){return Z(i,"Lasso Select")},attr:"dragmode",val:"lasso",icon:N.lasso,click:handleCartesian},X.drawclosedpath={name:"drawclosedpath",title:function(i){return Z(i,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:N.drawclosedpath,click:handleCartesian},X.drawopenpath={name:"drawopenpath",title:function(i){return Z(i,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:N.drawopenpath,click:handleCartesian},X.drawline={name:"drawline",title:function(i){return Z(i,"Draw line")},attr:"dragmode",val:"drawline",icon:N.drawline,click:handleCartesian},X.drawrect={name:"drawrect",title:function(i){return Z(i,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:N.drawrect,click:handleCartesian},X.drawcircle={name:"drawcircle",title:function(i){return Z(i,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:N.drawcircle,click:handleCartesian},X.eraseshape={name:"eraseshape",title:function(i){return Z(i,"Erase active shape")},icon:N.eraseshape,click:j},X.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(i){return Z(i,"Zoom in")},attr:"zoom",val:"in",icon:N.zoom_plus,click:handleCartesian},X.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(i){return Z(i,"Zoom out")},attr:"zoom",val:"out",icon:N.zoom_minus,click:handleCartesian},X.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(i){return Z(i,"Autoscale")},attr:"zoom",val:"auto",icon:N.autoscale,click:handleCartesian},X.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(i){return Z(i,"Reset axes")},attr:"zoom",val:"reset",icon:N.home,click:handleCartesian},X.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(i){return Z(i,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:N.tooltip_basic,gravity:"ne",click:handleCartesian},X.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(i){return Z(i,"Compare data on hover")},attr:"hovermode",val:function(i){return i._fullLayout._isHoriz?"y":"x"},icon:N.tooltip_compare,gravity:"ne",click:handleCartesian},X.zoom3d={name:"zoom3d",_cat:"zoom",title:function(i){return Z(i,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:N.zoombox,click:handleDrag3d},X.pan3d={name:"pan3d",_cat:"pan",title:function(i){return Z(i,"Pan")},attr:"scene.dragmode",val:"pan",icon:N.pan,click:handleDrag3d},X.orbitRotation={name:"orbitRotation",title:function(i){return Z(i,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:N["3d_rotate"],click:handleDrag3d},X.tableRotation={name:"tableRotation",title:function(i){return Z(i,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:N["z-axis"],click:handleDrag3d},X.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(i){return Z(i,"Reset camera to default")},attr:"resetDefault",icon:N.home,click:handleCamera3d},X.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(i){return Z(i,"Reset camera to last save")},attr:"resetLastSave",icon:N.movie,click:handleCamera3d},X.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(i){return Z(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:N.tooltip_basic,gravity:"ne",click:function(i,o){var s=getNextHover3d(i,o);x.call("_guiRelayout",i,s)}},X.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(i){return Z(i,"Zoom in")},attr:"zoom",val:"in",icon:N.zoom_plus,click:handleGeo},X.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(i){return Z(i,"Zoom out")},attr:"zoom",val:"out",icon:N.zoom_minus,click:handleGeo},X.resetGeo={name:"resetGeo",_cat:"reset",title:function(i){return Z(i,"Reset")},attr:"reset",val:null,icon:N.autoscale,click:handleGeo},X.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(i){return Z(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:N.tooltip_basic,gravity:"ne",click:toggleHover},X.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(i){return Z(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:N.tooltip_basic,gravity:"ne",click:toggleHover},X.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(i){return Z(i,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:N.tooltip_basic,gravity:"ne",click:toggleHover},X.resetViewSankey={name:"resetSankeyGroup",title:function(i){return Z(i,"Reset view")},icon:N.home,click:function(i){for(var o={"node.groups":[],"node.x":[],"node.y":[]},s=0;s<i._fullData.length;s++){var _=i._fullData[s]._viewInitial;o["node.groups"].push(_.node.groups.slice()),o["node.x"].push(_.node.x.slice()),o["node.y"].push(_.node.y.slice())}x.call("restyle",i,o)}},X.toggleHover={name:"toggleHover",title:function(i){return Z(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:N.tooltip_basic,gravity:"ne",click:function(i,o){var s=getNextHover3d(i,o);s.hovermode=getNextHover(i),x.call("_guiRelayout",i,s)}},X.resetViews={name:"resetViews",title:function(i){return Z(i,"Reset views")},icon:N.home,click:function(i,o){var s=o.currentTarget;s.setAttribute("data-attr","zoom"),s.setAttribute("data-val","reset"),handleCartesian(i,o),s.setAttribute("data-attr","resetLastSave"),handleCamera3d(i,o),resetView(i,"geo"),resetView(i,"mapbox")}},X.toggleSpikelines={name:"toggleSpikelines",title:function(i){return Z(i,"Toggle Spike Lines")},icon:N.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(i){var o=i._fullLayout,s=o._cartesianSpikesEnabled;o._cartesianSpikesEnabled="on"===s?"off":"on",x.call("_guiRelayout",i,function(i){for(var o="on"===i._fullLayout._cartesianSpikesEnabled,s=F.list(i,null,!0),x={},_=0;_<s.length;_++){var N=s[_];x[N._name+".showspikes"]=!!o||N._showSpikeInitial}return x}(i))}},X.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(i){return Z(i,"Reset view")},attr:"reset",icon:N.home,click:function(i){resetView(i,"mapbox")}},X.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(i){return Z(i,"Zoom in")},attr:"zoom",val:"in",icon:N.zoom_plus,click:handleMapboxZoom},X.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(i){return Z(i,"Zoom out")},attr:"zoom",val:"out",icon:N.zoom_minus,click:handleMapboxZoom}},93348:function(i,o,s){"use strict";var x=s(26023),_=Object.keys(x),F=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],N=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(F),j=[],addToForeButtons=function(i){if(-1===N.indexOf(i._cat||i.name)){var o=i.name,s=(i._cat||i.name).toLowerCase();-1===j.indexOf(o)&&j.push(o),-1===j.indexOf(s)&&j.push(s)}};_.forEach(function(i){addToForeButtons(x[i])}),j.sort(),i.exports={DRAW_MODES:F,backButtons:N,foreButtons:j}},35750:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(44467),N=s(42068);i.exports=function(i,o){var s=i.modebar||{},j=F.newContainer(o,"modebar");function coerce(i,o){return x.coerce(s,j,N,i,o)}coerce("orientation"),coerce("bgcolor",_.addOpacity(o.paper_bgcolor,.5));var G=_.contrast(_.rgb(o.modebar.bgcolor));coerce("color",_.addOpacity(G,.3)),coerce("activecolor",_.addOpacity(G,.7)),coerce("uirevision",o.uirevision),coerce("add"),coerce("remove")}},64168:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"modebar",layoutAttributes:s(42068),supplyLayoutDefaults:s(35750),manage:s(14192)}},14192:function(i,o,s){"use strict";var x=s(41675),_=s(34098),F=s(73972),N=s(23469).isUnifiedHover,j=s(37676),G=s(26023),Z=s(93348).DRAW_MODES,X=s(71828).extendDeep;i.exports=function(i){var o,s=i._fullLayout,J=i._context,$=s._modeBar;if(!J.displayModeBar&&!J.watermark){$&&($.destroy(),delete s._modeBar);return}if(!Array.isArray(J.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(J.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var ee=J.modeBarButtons;o=Array.isArray(ee)&&ee.length?function(i){for(var o=X([],i),s=0;s<o.length;s++)for(var x=o[s],_=0;_<x.length;_++){var F=x[_];if("string"==typeof F){if(void 0!==G[F])o[s][_]=G[F];else throw Error("*modeBarButtons* configuration options invalid button name")}}return o}(ee):!J.displayModeBar&&J.watermark?[]:function(i){var o=i._fullLayout,s=i._fullData,j=i._context;function match(i,o){if("string"==typeof o){if(o.toLowerCase()===i.toLowerCase())return!0}else{var s=o.name,x=o._cat||o.name;if(s===i||x===i.toLowerCase())return!0}return!1}var X=o.modebar.add;"string"==typeof X&&(X=[X]);var J=o.modebar.remove;"string"==typeof J&&(J=[J]);var $=j.modeBarButtonsToAdd.concat(X.filter(function(i){for(var o=0;o<j.modeBarButtonsToRemove.length;o++)if(match(i,j.modeBarButtonsToRemove[o]))return!1;return!0})),ee=j.modeBarButtonsToRemove.concat(J.filter(function(i){for(var o=0;o<j.modeBarButtonsToAdd.length;o++)if(match(i,j.modeBarButtonsToAdd[o]))return!1;return!0})),et=o._has("cartesian"),er=o._has("gl3d"),en=o._has("geo"),ei=o._has("pie"),eo=o._has("funnelarea"),es=o._has("gl2d"),el=o._has("ternary"),ec=o._has("mapbox"),eu=o._has("polar"),ef=o._has("smith"),eh=o._has("sankey"),ed=function(i){for(var o=x.list({_fullLayout:i},null,!0),s=0;s<o.length;s++)if(!o[s].fixedrange)return!1;return!0}(o),ep=N(o.hovermode),eg=[];function addGroup(i){if(i.length){for(var o=[],s=0;s<i.length;s++){for(var x=i[s],_=G[x],F=_.name.toLowerCase(),N=(_._cat||_.name).toLowerCase(),j=!1,Z=0;Z<ee.length;Z++){var X=ee[Z].toLowerCase();if(X===F||X===N){j=!0;break}}j||o.push(G[x])}eg.push(o)}}var em=["toImage"];j.showEditInChartStudio?em.push("editInChartStudio"):j.showSendToCloud&&em.push("sendDataToCloud"),addGroup(em);var ey=[],ev=[],ex=[],e_=[];(et||es||ei||eo||el)+en+er+ec+eu+ef>1?(ev=["toggleHover"],ex=["resetViews"]):en?(ey=["zoomInGeo","zoomOutGeo"],ev=["hoverClosestGeo"],ex=["resetGeo"]):er?(ev=["hoverClosest3d"],ex=["resetCameraDefault3d","resetCameraLastSave3d"]):ec?(ey=["zoomInMapbox","zoomOutMapbox"],ev=["toggleHover"],ex=["resetViewMapbox"]):es?ev=["hoverClosestGl2d"]:ei?ev=["hoverClosestPie"]:eh?(ev=["hoverClosestCartesian","hoverCompareCartesian"],ex=["resetViewSankey"]):ev=["toggleHover"],et&&(ev=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(i){for(var o=0;o<i.length;o++)if(!F.traceIs(i[o],"noHover"))return!1;return!0}(s)||ep)&&(ev=[]),(et||es)&&!ed&&(ey=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==ex[0]&&(ex=["resetScale2d"])),er?e_=["zoom3d","pan3d","orbitRotation","tableRotation"]:(et||es)&&!ed||el?e_=["zoom2d","pan2d"]:ec||en?e_=["pan2d"]:eu&&(e_=["zoom2d"]),function(i){for(var o=!1,s=0;s<i.length&&!o;s++){var x=i[s];x._module&&x._module.selectPoints&&(F.traceIs(x,"scatter-like")?(_.hasMarkers(x)||_.hasText(x))&&(o=!0):F.traceIs(x,"box-violin")?("all"===x.boxpoints||"all"===x.points)&&(o=!0):o=!0)}return o}(s)&&e_.push("select2d","lasso2d");var ew=[],enableHover=function(i){-1===ew.indexOf(i)&&-1!==ev.indexOf(i)&&ew.push(i)};if(Array.isArray($)){for(var eT=[],ek=0;ek<$.length;ek++){var eA=$[ek];"string"==typeof eA?(eA=eA.toLowerCase(),-1!==Z.indexOf(eA)?(o._has("mapbox")||o._has("cartesian"))&&e_.push(eA):"togglespikelines"===eA?enableHover("toggleSpikelines"):"togglehover"===eA?enableHover("toggleHover"):"hovercompare"===eA?enableHover("hoverCompareCartesian"):"hoverclosest"===eA?(enableHover("hoverClosestCartesian"),enableHover("hoverClosestGeo"),enableHover("hoverClosest3d"),enableHover("hoverClosestGl2d"),enableHover("hoverClosestPie")):"v1hovermode"===eA&&(enableHover("toggleHover"),enableHover("hoverClosestCartesian"),enableHover("hoverCompareCartesian"),enableHover("hoverClosestGeo"),enableHover("hoverClosest3d"),enableHover("hoverClosestGl2d"),enableHover("hoverClosestPie"))):eT.push(eA)}$=eT}return addGroup(e_),addGroup(ey.concat(ex)),addGroup(ew),function(i,o){if(o.length){if(Array.isArray(o[0]))for(var s=0;s<o.length;s++)i.push(o[s]);else i.push(o)}return i}(eg,$)}(i),$?$.update(i,o):s._modeBar=j(i,o)}},37676:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(71828),N=s(24255),j=s(11506).version,G=new DOMParser;function ModeBar(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var Z=ModeBar.prototype;Z.update=function(i,o){this.graphInfo=i;var s=this.graphInfo._context,x=this.graphInfo._fullLayout,_="modebar-"+x._uid;this.element.setAttribute("id",_),this._uid=_,this.element.className="modebar","hover"===s.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===x.modebar.orientation&&(this.element.className+=" vertical",o=o.reverse());var N=x.modebar,j="hover"===s.displayModeBar?".js-plotly-plot .plotly:hover ":"";F.deleteRelatedStyleRule(_),F.addRelatedStyleRule(_,j+"#"+_+" .modebar-group","background-color: "+N.bgcolor),F.addRelatedStyleRule(_,"#"+_+" .modebar-btn .icon path","fill: "+N.color),F.addRelatedStyleRule(_,"#"+_+" .modebar-btn:hover .icon path","fill: "+N.activecolor),F.addRelatedStyleRule(_,"#"+_+" .modebar-btn.active .icon path","fill: "+N.activecolor);var G=!this.hasButtons(o),Z=this.hasLogo!==s.displaylogo,X=this.locale!==s.locale;if(this.locale=s.locale,(G||Z||X)&&(this.removeAllButtons(),this.updateButtons(o),s.watermark||s.displaylogo)){var J=this.getLogo();s.watermark&&(J.className=J.className+" watermark"),"v"===x.modebar.orientation?this.element.insertBefore(J,this.element.childNodes[0]):this.element.appendChild(J),this.hasLogo=!0}this.updateActiveButton()},Z.updateButtons=function(i){var o=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var s=o.createGroup();i.forEach(function(i){var x=i.name;if(!x)throw Error("must provide button 'name' in button config");if(-1!==o.buttonsNames.indexOf(x))throw Error("button name '"+x+"' is taken");o.buttonsNames.push(x);var _=o.createButton(i);o.buttonElements.push(_),s.appendChild(_)}),o.element.appendChild(s)})},Z.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},Z.createButton=function(i){var o=this,s=document.createElement("a");s.setAttribute("rel","tooltip"),s.className="modebar-btn";var _=i.title;void 0===_?_=i.name:"function"==typeof _&&(_=_(this.graphInfo)),(_||0===_)&&s.setAttribute("data-title",_),void 0!==i.attr&&s.setAttribute("data-attr",i.attr);var F=i.val;if(void 0!==F&&("function"==typeof F&&(F=F(this.graphInfo)),s.setAttribute("data-val",F)),"function"!=typeof i.click)throw Error("must provide button 'click' function in button config");s.addEventListener("click",function(s){i.click(o.graphInfo,s),o.updateActiveButton(s.currentTarget)}),s.setAttribute("data-toggle",i.toggle||!1),i.toggle&&x.select(s).classed("active",!0);var j=i.icon;return"function"==typeof j?s.appendChild(j()):s.appendChild(this.createIcon(j||N.question)),s.setAttribute("data-gravity",i.gravity||"n"),s},Z.createIcon=function(i){var o,s=_(i.height)?Number(i.height):i.ascent-i.descent,x="http://www.w3.org/2000/svg";if(i.path){(o=document.createElementNS(x,"svg")).setAttribute("viewBox",[0,0,i.width,s].join(" ")),o.setAttribute("class","icon");var F=document.createElementNS(x,"path");F.setAttribute("d",i.path),i.transform?F.setAttribute("transform",i.transform):void 0!==i.ascent&&F.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),o.appendChild(F)}return i.svg&&(o=G.parseFromString(i.svg,"application/xml").childNodes[0]),o.setAttribute("height","1em"),o.setAttribute("width","1em"),o},Z.updateActiveButton=function(i){var o=this.graphInfo._fullLayout,s=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var _=i.getAttribute("data-val")||!0,N=i.getAttribute("data-attr"),j="true"===i.getAttribute("data-toggle"),G=x.select(i);if(j)N===s&&G.classed("active",!G.classed("active"));else{var Z=null===N?N:F.nestedProperty(o,N).get();G.classed("active",Z===_)}})},Z.hasButtons=function(i){var o=this.buttons;if(!o||i.length!==o.length)return!1;for(var s=0;s<i.length;++s){if(i[s].length!==o[s].length)return!1;for(var x=0;x<i[s].length;x++)if(i[s][x].name!==o[s][x].name)return!1}return!0},Z.getLogo=function(){var i=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",F._(this.graphInfo,"Produced with Plotly.js")+" (v"+j+")"),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(N.newplotlylogo)),i.appendChild(o),i},Z.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},Z.destroy=function(){F.removeElement(this.container.querySelector(".modebar")),F.deleteRelatedStyleRule(this._uid)},i.exports=function(i,o){var s=i._fullLayout,_=new ModeBar({graphInfo:i,container:s._modebardiv.node(),buttons:o});return s._privateplot&&x.select(_.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),_}},37113:function(i,o,s){"use strict";var x=s(41940),_=s(22399),F=(0,s(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});i.exports={visible:{valType:"boolean",editType:"plot"},buttons:F,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:x({editType:"plot"}),bgcolor:{valType:"color",dflt:_.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(i){"use strict";i.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(44467),N=s(85501),j=s(37113),G=s(89573);function buttonDefaults(i,o,s,_){var F=_.calendar;function coerce(s,_){return x.coerce(i,o,j.buttons,s,_)}if(coerce("visible")){var N=coerce("step");"all"!==N&&(F&&"gregorian"!==F&&("month"===N||"year"===N)?o.stepmode="backward":coerce("stepmode"),coerce("count")),coerce("label")}}i.exports=function(i,o,s,Z,X){var J=i.rangeselector||{},$=F.newContainer(o,"rangeselector");function coerce(i,o){return x.coerce(J,$,j,i,o)}if(coerce("visible",N(J,$,{name:"buttons",handleItemDefaults:buttonDefaults,calendar:X}).length>0)){var ee=function(i,o,s){for(var x=s.filter(function(s){return o[s].anchor===i._id}),_=0,F=0;F<x.length;F++){var N=o[x[F]].domain;N&&(_=Math.max(N[1],_))}return[i.domain[0],_+G.yPad]}(o,s,Z);coerce("x",ee[0]),coerce("y",ee[1]),x.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),x.coerceFont(coerce,"font",s.font);var et=coerce("bgcolor");coerce("activecolor",_.contrast(et,G.lightAmount,G.darkAmount)),coerce("bordercolor"),coerce("borderwidth")}}},21598:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(74875),N=s(7901),j=s(91424),G=s(71828),Z=G.strTranslate,X=s(63893),J=s(41675),$=s(18783),ee=$.LINE_SPACING,et=$.FROM_TL,er=$.FROM_BR,en=s(89573),ei=s(70565);function selectorKeyFunc(i){return i._id}function drawButtonRect(i,o,s){var x=G.ensureSingle(i,"rect","selector-rect",function(i){i.attr("shape-rendering","crispEdges")});x.attr({rx:en.rx,ry:en.ry}),x.call(N.stroke,o.bordercolor).call(N.fill,s._isActive||s._isHovered?o.activecolor:o.bgcolor).style("stroke-width",o.borderwidth+"px")}function drawButtonText(i,o,s,x){var _;G.ensureSingle(i,"text","selector-text",function(i){i.attr("text-anchor","middle")}).call(j.font,o.font).text((_=x._fullLayout._meta,s.label?_?G.templateString(s.label,_):s.label:"all"===s.step?"all":s.count+s.step.charAt(0))).call(function(i){X.convertToTspans(i,x)})}i.exports=function(i){var o=i._fullLayout._infolayer.selectAll(".rangeselector").data(function(i){for(var o=J.list(i,"x",!0),s=[],x=0;x<o.length;x++){var _=o[x];_.rangeselector&&_.rangeselector.visible&&s.push(_)}return s}(i),selectorKeyFunc);o.enter().append("g").classed("rangeselector",!0),o.exit().remove(),o.style({cursor:"pointer","pointer-events":"all"}),o.each(function(o){var s,N,J,$,eo,es,el,ec,eu,ef=x.select(this),eh=o.rangeselector,ed=ef.selectAll("g.button").data(G.filterVisible(eh.buttons));ed.enter().append("g").classed("button",!0),ed.exit().remove(),ed.each(function(s){var F=x.select(this),N=ei(o,s);s._isActive=function(i,o,s){if("all"===o.step)return!0===i.autorange;var x=Object.keys(s);return i.range[0]===s[x[0]]&&i.range[1]===s[x[1]]}(o,s,N),F.call(drawButtonRect,eh,s),F.call(drawButtonText,eh,s,i),F.on("click",function(){i._dragged||_.call("_guiRelayout",i,N)}),F.on("mouseover",function(){s._isHovered=!0,F.call(drawButtonRect,eh,s)}),F.on("mouseout",function(){s._isHovered=!1,F.call(drawButtonRect,eh,s)})}),s=o._name,N=0,J=0,$=eh.borderwidth,ed.each(function(){var i=x.select(this).select(".selector-text"),o=Math.max(eh.font.size*ee*X.lineCount(i),16)+3;J=Math.max(J,o)}),ed.each(function(){var i=x.select(this),o=i.select(".selector-rect"),s=i.select(".selector-text"),_=s.node()&&j.bBox(s.node()).width,F=eh.font.size*ee,G=X.lineCount(s),et=Math.max(_+10,en.minButtonWidth);i.attr("transform",Z($+N,$)),o.attr({x:0,y:0,width:et,height:J}),X.positionText(s,et/2,J/2-(G-1)*F/2+3),N+=et+5}),es=(eo=i._fullLayout._size).l+eo.w*eh.x,el=eo.t+eo.h*(1-eh.y),ec="left",G.isRightAnchor(eh)&&(es-=N,ec="right"),G.isCenterAnchor(eh)&&(es-=N/2,ec="center"),eu="top",G.isBottomAnchor(eh)&&(el-=J,eu="bottom"),G.isMiddleAnchor(eh)&&(el-=J/2,eu="middle"),N=Math.ceil(N),J=Math.ceil(J),es=Math.round(es),el=Math.round(el),F.autoMargin(i,s+"-range-selector",{x:eh.x,y:eh.y,l:N*et[ec],r:N*er[ec],b:J*er[eu],t:J*et[eu]}),ef.attr("transform",Z(es,el))})}},70565:function(i,o,s){"use strict";var x=s(81041),_=s(71828).titleCase;i.exports=function(i,o){var s=i._name,F={};if("all"===o.step)F[s+".autorange"]=!0;else{var N=function(i,o){var s,F=i.range,N=new Date(i.r2l(F[1])),j=x["utc"+_(o.step)],G=o.count;switch(o.stepmode){case"backward":s=i.l2r(+j.offset(N,-G));break;case"todate":var Z=j.offset(N,-G);s=i.l2r(+j.ceil(Z))}return[s,F[1]]}(i,o);F[s+".range[0]"]=N[0],F[s+".range[1]"]=N[1]}return F}},97218:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:s(37113)}}},layoutAttributes:s(37113),handleDefaults:s(28674),draw:s(21598)}},75148:function(i,o,s){"use strict";var x=s(22399);i.exports={bgcolor:{valType:"color",dflt:x.background,editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(i,o,s){"use strict";var x=s(41675).list,_=s(71739).getAutoRange,F=s(73251);i.exports=function(i){for(var o=x(i,"x",!0),s=0;s<o.length;s++){var N=o[s],j=N[F.name];j&&j.visible&&j.autorange&&(j._input.autorange=!0,j._input.range=j.range=_(i,N))}}},73251:function(i){"use strict";i.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(i,o,s){"use strict";var x=s(71828),_=s(44467),F=s(41675),N=s(75148),j=s(47850);i.exports=function(i,o,s){var G=i[s],Z=o[s];if(G.rangeslider||o._requestRangeslider[Z._id]){x.isPlainObject(G.rangeslider)||(G.rangeslider={});var X=G.rangeslider,J=_.newContainer(Z,"rangeslider");if(coerce("visible")){coerce("bgcolor",o.plot_bgcolor),coerce("bordercolor"),coerce("borderwidth"),coerce("thickness"),coerce("autorange",!Z.isValidRange(X.range)),coerce("range");var $=o._subplots;if($)for(var ee=$.cartesian.filter(function(i){return i.substr(0,i.indexOf("y"))===F.name2id(s)}).map(function(i){return i.substr(i.indexOf("y"),i.length)}),et=x.simpleMap(ee,F.id2name),er=0;er<et.length;er++){var en,ei,eo,es=et[er];en=X[es]||{},ei=_.newContainer(J,es,"yaxis");var el=o[es];en.range&&el.isValidRange(en.range)&&(eo="fixed"),"match"!==coerceRange("rangemode",eo)&&coerceRange("range",el.range.slice())}J._input=X}}function coerce(i,o){return x.coerce(X,J,N,i,o)}function coerceRange(i,o){return x.coerce(en,ei,j,i,o)}}},72413:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(74875),N=s(71828),j=N.strTranslate,G=s(91424),Z=s(7901),X=s(92998),J=s(93612),$=s(41675),ee=s(28569),et=s(6964),er=s(73251);function drawBg(i,o,s,x){var _=N.ensureSingle(i,"rect",er.bgClassName,function(i){i.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),F=x.borderwidth%2==0?x.borderwidth:x.borderwidth-1,X=-x._offsetShift,J=G.crispRound(o,x.borderwidth);_.attr({width:x._width+F,height:x._height+F,transform:j(X,X),"stroke-width":J}).call(Z.stroke,x.bordercolor).call(Z.fill,x.bgcolor)}function addClipPath(i,o,s,x){var _=o._fullLayout;N.ensureSingleById(_._topdefs,"clipPath",x._clipId,function(i){i.append("rect").attr({x:0,y:0})}).select("rect").attr({width:x._width,height:x._height})}function drawRangePlot(i,o,s,_){var j,Z=o.calcdata,X=i.selectAll("g."+er.rangePlotClassName).data(s._subplotsWith,N.identity);X.enter().append("g").attr("class",function(i){return er.rangePlotClassName+" "+i}).call(G.setClipUrl,_._clipId,o),X.order(),X.exit().remove(),X.each(function(i,N){var G=x.select(this),X=$.getFromId(o,i,"y"),ee=X._name,et=_[ee],er={data:[],layout:{xaxis:{type:s.type,domain:[0,1],range:_.range.slice(),calendar:s.calendar},width:_._width,height:_._height,margin:{t:0,b:0,l:0,r:0}},_context:o._context};s.rangebreaks&&(er.layout.xaxis.rangebreaks=s.rangebreaks),er.layout[ee]={type:X.type,domain:[0,1],range:"match"!==et.rangemode?et.range.slice():X.range.slice(),calendar:X.calendar},X.rangebreaks&&(er.layout[ee].rangebreaks=X.rangebreaks),F.supplyDefaults(er);var en=er._fullLayout.xaxis,ei=er._fullLayout[ee];en.clearCalc(),en.setScale(),ei.clearCalc(),ei.setScale();var eo={id:i,plotgroup:G,xaxis:en,yaxis:ei,isRangePlot:!0};0===N?j=eo:(eo.mainplot="xy",eo.mainplotinfo=j),J.rangePlot(o,eo,function(i,o){for(var s=[],x=0;x<i.length;x++){var _=i[x],F=_[0].trace;F.xaxis+F.yaxis===o&&s.push(_)}return s}(Z,i))})}function drawMasks(i,o,s,x,_){N.ensureSingle(i,"rect",er.maskMinClassName,function(i){i.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",x._height).call(Z.fill,er.maskColor),N.ensureSingle(i,"rect",er.maskMaxClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",x._height).call(Z.fill,er.maskColor),"match"!==_.rangemode&&(N.ensureSingle(i,"rect",er.maskMinOppAxisClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",x._width).call(Z.fill,er.maskOppAxisColor),N.ensureSingle(i,"rect",er.maskMaxOppAxisClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",x._width).style("border-top",er.maskOppBorder).call(Z.fill,er.maskOppAxisColor))}function drawSlideBox(i,o,s,x){o._context.staticPlot||N.ensureSingle(i,"rect",er.slideBoxClassName,function(i){i.attr({y:0,cursor:er.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:x._height,fill:er.slideBoxFill})}function drawGrabbers(i,o,s,x){var _=N.ensureSingle(i,"g",er.grabberMinClassName),F=N.ensureSingle(i,"g",er.grabberMaxClassName),j={x:0,width:er.handleWidth,rx:er.handleRadius,fill:Z.background,stroke:Z.defaultLine,"stroke-width":er.handleStrokeWidth,"shape-rendering":"crispEdges"},G={y:Math.round(x._height/4),height:Math.round(x._height/2)};N.ensureSingle(_,"rect",er.handleMinClassName,function(i){i.attr(j)}).attr(G),N.ensureSingle(F,"rect",er.handleMaxClassName,function(i){i.attr(j)}).attr(G);var X={width:er.grabAreaWidth,x:0,y:0,fill:er.grabAreaFill,cursor:o._context.staticPlot?void 0:er.grabAreaCursor};N.ensureSingle(_,"rect",er.grabAreaMinClassName,function(i){i.attr(X)}).attr("height",x._height),N.ensureSingle(F,"rect",er.grabAreaMaxClassName,function(i){i.attr(X)}).attr("height",x._height)}i.exports=function(i){for(var o=i._fullLayout,s=o._rangeSliderData,F=0;F<s.length;F++){var G=s[F][er.name];G._clipId=G._id+"-"+o._uid}var Z=o._infolayer.selectAll("g."+er.containerClassName).data(s,function(i){return i._name});Z.exit().each(function(i){var s=i[er.name];o._topdefs.select("#"+s._clipId).remove()}).remove(),0!==s.length&&(Z.enter().append("g").classed(er.containerClassName,!0).attr("pointer-events","all"),Z.each(function(s){var F=x.select(this),G=s[er.name],Z=o[$.id2name(s.anchor)],J=G[$.id2name(s.anchor)];if(G.range){var en,ei=N.simpleMap(G.range,s.r2l),eo=N.simpleMap(s.range,s.r2l);en=eo[0]<eo[1]?[Math.min(ei[0],eo[0]),Math.max(ei[1],eo[1])]:[Math.max(ei[0],eo[0]),Math.min(ei[1],eo[1])],G.range=G._input.range=N.simpleMap(en,s.l2r)}s.cleanRange("rangeslider.range");var es=o._size,el=s.domain;G._width=es.w*(el[1]-el[0]);var ec=Math.round(es.l+es.w*el[0]),eu=Math.round(es.t+es.h*(1-s._counterDomainMin)+("bottom"===s.side?s._depth:0)+G._offsetShift+er.extraPad);F.attr("transform",j(ec,eu)),G._rl=N.simpleMap(G.range,s.r2l);var ef=G._rl[0],eh=G._rl[1],ed=eh-ef;if(G.p2d=function(i){return i/G._width*ed+ef},G.d2p=function(i){return(i-ef)/ed*G._width},s.rangebreaks){var ep=s.locateBreaks(ef,eh);if(ep.length){var eg,em,ey=0;for(eg=0;eg<ep.length;eg++)ey+=(em=ep[eg]).max-em.min;var ev=G._width/(eh-ef-ey),ex=[-ev*ef];for(eg=0;eg<ep.length;eg++)em=ep[eg],ex.push(ex[ex.length-1]-ev*(em.max-em.min));for(eg=0,G.d2p=function(i){for(var o=ex[0],s=0;s<ep.length;s++){var x=ep[s];if(i>=x.max)o=ex[s+1];else if(i<x.min)break}return o+ev*i};eg<ep.length;eg++)(em=ep[eg]).pmin=G.d2p(em.min),em.pmax=G.d2p(em.max);G.p2d=function(i){for(var o=ex[0],s=0;s<ep.length;s++){var x=ep[s];if(i>=x.pmax)o=ex[s+1];else if(i<x.pmin)break}return(i-o)/ev}}}if("match"!==J.rangemode){var e_=Z.r2l(J.range[0]),ew=Z.r2l(J.range[1])-e_;G.d2pOppAxis=function(i){return(i-e_)/ew*G._height}}F.call(drawBg,i,s,G).call(addClipPath,i,s,G).call(drawRangePlot,i,s,G).call(drawMasks,i,s,G,J).call(drawSlideBox,i,s,G).call(drawGrabbers,i,s,G),function(i,o,s,F){if(!o._context.staticPlot){var j=i.select("rect."+er.slideBoxClassName).node(),G=i.select("rect."+er.grabAreaMinClassName).node(),Z=i.select("rect."+er.grabAreaMaxClassName).node();i.on("mousedown",mouseDownHandler),i.on("touchstart",mouseDownHandler)}function mouseDownHandler(){var X=x.event,J=X.target,$=X.clientX||X.touches[0].clientX,er=$-i.node().getBoundingClientRect().left,en=F.d2p(s._rl[0]),ei=F.d2p(s._rl[1]),eo=ee.coverSlip();function mouseMove(i){var X,ee,es,el=+(i.clientX||i.touches[0].clientX)-$;switch(J){case j:if(es="ew-resize",en+el>s._length||ei+el<0)return;X=en+el,ee=ei+el;break;case G:if(es="col-resize",en+el>s._length)return;X=en+el,ee=ei;break;case Z:if(es="col-resize",ei+el<0)return;X=en,ee=ei+el;break;default:es="ew-resize",X=er,ee=er+el}if(ee<X){var ec=ee;ee=X,X=ec}F._pixelMin=X,F._pixelMax=ee,et(x.select(eo),es),function(i,o,s,x){function clamp(i){return s.l2r(N.constrain(i,x._rl[0],x._rl[1]))}var F=clamp(x.p2d(x._pixelMin)),j=clamp(x.p2d(x._pixelMax));window.requestAnimationFrame(function(){_.call("_guiRelayout",o,s._name+".range",[F,j])})}(0,o,s,F)}function mouseUp(){eo.removeEventListener("mousemove",mouseMove),eo.removeEventListener("mouseup",mouseUp),this.removeEventListener("touchmove",mouseMove),this.removeEventListener("touchend",mouseUp),N.removeElement(eo)}this.addEventListener("touchmove",mouseMove),this.addEventListener("touchend",mouseUp),eo.addEventListener("mousemove",mouseMove),eo.addEventListener("mouseup",mouseUp)}}(F,i,s,G),function(i,o,s,x,_,F){var G=er.handleWidth/2;function clamp(i){return N.constrain(i,0,x._width)}function clampOppAxis(i){return N.constrain(i,0,x._height)}function clampHandle(i){return N.constrain(i,-G,x._width+G)}var Z=clamp(x.d2p(s._rl[0])),X=clamp(x.d2p(s._rl[1]));if(i.select("rect."+er.slideBoxClassName).attr("x",Z).attr("width",X-Z),i.select("rect."+er.maskMinClassName).attr("width",Z),i.select("rect."+er.maskMaxClassName).attr("x",X).attr("width",x._width-X),"match"!==F.rangemode){var J=x._height-clampOppAxis(x.d2pOppAxis(_._rl[1])),$=x._height-clampOppAxis(x.d2pOppAxis(_._rl[0]));i.select("rect."+er.maskMinOppAxisClassName).attr("x",Z).attr("height",J).attr("width",X-Z),i.select("rect."+er.maskMaxOppAxisClassName).attr("x",Z).attr("y",$).attr("height",x._height-$).attr("width",X-Z),i.select("rect."+er.slideBoxClassName).attr("y",J).attr("height",$-J)}var ee=Math.round(clampHandle(Z-G))-.5,et=Math.round(clampHandle(X-G))+.5;i.select("g."+er.grabberMinClassName).attr("transform",j(ee,.5)),i.select("g."+er.grabberMaxClassName).attr("transform",j(et,.5))}(F,0,s,G,Z,J),"bottom"===s.side&&X.draw(i,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:o._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:eu+G._height+G._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))}},549:function(i,o,s){"use strict";var x=s(41675),_=s(63893),F=s(73251),N=s(18783).LINE_SPACING,j=F.name;function isVisible(i){var o=i&&i[j];return o&&o.visible}o.isVisible=isVisible,o.makeData=function(i){var o=x.list({_fullLayout:i},"x",!0),s=i.margin,_=[];if(!i._has("gl2d"))for(var F=0;F<o.length;F++){var N=o[F];if(isVisible(N)){_.push(N);var G=N[j];G._id=j+N._id,G._height=(i.height-s.b-s.t)*G.thickness,G._offsetShift=Math.floor(G.borderwidth/2)}}i._rangeSliderData=_},o.autoMarginOpts=function(i,o){var s=i._fullLayout,x=o[j],G=o._id.charAt(0),Z=0,X=0;return"bottom"===o.side&&(Z=o._depth,o.title.text!==s._dfltTitle[G]&&(X=1.5*o.title.font.size+10+x._offsetShift+(o.title.text.match(_.BR_TAG_ALL)||[]).length*o.title.font.size*N)),{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:x._height+Z+Math.max(s.margin.b,X),pad:F.extraPad+2*x._offsetShift}}},13137:function(i,o,s){"use strict";var x=s(71828),_=s(75148),F=s(47850),N=s(549);i.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:x.extendFlat({},_,{yaxis:F})}}},layoutAttributes:s(75148),handleDefaults:s(26377),calcAutorange:s(88443),draw:s(72413),isVisible:N.isVisible,makeData:N.makeData,autoMarginOpts:N.autoMarginOpts}},47850:function(i){"use strict";i.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(i,o,s){"use strict";var x=s(50215),_=s(82196).line,F=s(79952).P,N=s(1426).extendFlat,j=s(30962).overrideAll,G=s(44467).templatedArray;s(24695),i.exports=j(G("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:N({},x.xref,{}),yref:N({},x.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:_.color,width:N({},_.width,{min:1,dflt:1}),dash:N({},F,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(i){"use strict";i.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(85501),N=s(8389),j=s(30477);function handleSelectionDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,N,s,_)}var F=coerce("path"),G="path"!==coerce("type",F?"path":"rect");G&&delete o.path,coerce("opacity"),coerce("line.color"),coerce("line.width"),coerce("line.dash");for(var Z=["x","y"],X=0;X<2;X++){var J,$,ee,et=Z[X],er={_fullLayout:s},en=_.coerceRef(i,o,er,et);if((J=_.getFromId(er,en))._selectionIndices.push(o._index),ee=j.rangeToShapePosition(J),$=j.shapePositionToRange(J),G){var ei=et+"0",eo=et+"1",es=i[ei],el=i[eo];i[ei]=$(i[ei],!0),i[eo]=$(i[eo],!0),_.coercePosition(o,er,coerce,en,ei),_.coercePosition(o,er,coerce,en,eo);var ec=o[ei],eu=o[eo];void 0!==ec&&void 0!==eu&&(o[ei]=ee(ec),o[eo]=ee(eu),i[ei]=es,i[eo]=el)}}G&&x.noneOrAll(i,o,["x0","x1","y0","y1"])}i.exports=function(i,o){F(i,o,{name:"selections",handleItemDefaults:handleSelectionDefaults});for(var s=o.selections,x=0;x<s.length;x++){var _=s[x];_&&void 0===_.path&&(void 0===_.x0||void 0===_.x1||void 0===_.y0||void 0===_.y1)&&(o.selections[x]=null)}}},32485:function(i,o,s){"use strict";var x=s(60165).readPaths,_=s(42359),F=s(51873).clearOutlineControllers,N=s(7901),j=s(91424),G=s(44467).arrayEditor,Z=s(30477),X=Z.getPathString;function draw(i){var o=i._fullLayout;for(var s in F(i),o._selectionLayer.selectAll("path").remove(),o._plots){var x=o._plots[s].selectionLayer;x&&x.selectAll("path").remove()}for(var _=0;_<o.selections.length;_++)drawOne(i,_)}function couldHaveActiveSelection(i){return i._context.editSelection}function drawOne(i,o){i._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+o+'"]').remove();var s=Z.makeSelectionsOptionsAndPlotinfo(i,o),F=s.options,J=s.plotinfo;F._input&&function(s){var Z=X(i,F),$={"data-index":o,"fill-rule":"evenodd",d:Z},ee=F.opacity,et="rgba(0,0,0,0)",er=F.line.color||N.contrast(i._fullLayout.plot_bgcolor),en=F.line.width,ei=F.line.dash;en||(en=5,ei="solid");var eo=couldHaveActiveSelection(i)&&i._fullLayout._activeSelectionIndex===o;eo&&(et=i._fullLayout.activeselection.fillcolor,ee=i._fullLayout.activeselection.opacity);for(var es=[],el=1;el>=0;el--){var ec=s.append("path").attr($).style("opacity",el?.1:ee).call(N.stroke,er).call(N.fill,et).call(j.dashLine,el?"solid":ei,el?4+en:en);if(function(i,o,s){var x=s.xref+s.yref;j.setClipUrl(i,"clip"+o._fullLayout._uid+x,o)}(ec,i,F),eo){var eu=G(i.layout,"selections",F);ec.style({cursor:"move"});var ef={element:ec.node(),plotinfo:J,gd:i,editHelpers:eu,isActiveSelection:!0};_(x(Z,i),ec,ef)}else ec.style("pointer-events",el?"all":"none");es[el]=ec}var eh=es[0];es[1].node().addEventListener("click",function(){return function(i,o){if(couldHaveActiveSelection(i)){var s=+o.node().getAttribute("data-index");if(s>=0){if(s===i._fullLayout._activeSelectionIndex){deactivateSelection(i);return}i._fullLayout._activeSelectionIndex=s,i._fullLayout._deactivateSelection=deactivateSelection,draw(i)}}}(i,eh)})}(i._fullLayout._selectionLayer)}function deactivateSelection(i){couldHaveActiveSelection(i)&&i._fullLayout._activeSelectionIndex>=0&&(F(i),delete i._fullLayout._activeSelectionIndex,draw(i))}i.exports={draw:draw,drawOne:drawOne,activateLastSelection:function(i){if(couldHaveActiveSelection(i)){var o=i._fullLayout.selections.length-1;i._fullLayout._activeSelectionIndex=o,i._fullLayout._deactivateSelection=deactivateSelection,draw(i)}}}},53777:function(i,o,s){"use strict";var x=s(79952).P,_=s(1426).extendFlat;i.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:_({},x,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(i){"use strict";i.exports=function(i,o,s){s("newselection.mode"),s("newselection.line.width")&&(s("newselection.line.color"),s("newselection.line.dash")),s("activeselection.fillcolor"),s("activeselection.opacity")}},35855:function(i,o,s){"use strict";var x=s(64505).selectMode,_=s(51873).clearOutline,F=s(60165),N=F.readPaths,j=F.writePaths,G=F.fixDatesForPaths;i.exports=function(i,o){if(i.length){var s,F=i[0][0];if(F){var Z=F.getAttribute("d"),X=o.gd,J=X._fullLayout.newselection,$=o.plotinfo,ee=$.xaxis,et=$.yaxis,er=o.isActiveSelection,en=o.dragmode,ei=(X.layout||{}).selections||[];if(!x(en)&&void 0!==er){var eo=X._fullLayout._activeSelectionIndex;if(eo<ei.length)switch(X._fullLayout.selections[eo].type){case"rect":en="select";break;case"path":en="lasso"}}var es=N(Z,X,$,er),el={xref:ee._id,yref:et._id,opacity:J.opacity,line:{color:J.line.color,width:J.line.width,dash:J.line.dash}};1===es.length&&(s=es[0]),s&&5===s.length&&"select"===en?(el.type="rect",el.x0=s[0][1],el.y0=s[0][2],el.x1=s[2][1],el.y1=s[2][2]):(el.type="path",ee&&et&&G(es,ee,et),el.path=j(es),s=null),_(X);for(var ec=o.editHelpers,eu=(ec||{}).modifyItem,ef=[],eh=0;eh<ei.length;eh++){var ed=X._fullLayout.selections[eh];if(!ed){ef[eh]=ed;continue}if(ef[eh]=ed._input,void 0!==er&&eh===X._fullLayout._activeSelectionIndex)switch(ed.type){case"rect":eu("x0",el.x0),eu("x1",el.x1),eu("y0",el.y0),eu("y1",el.y1);break;case"path":eu("path",el.path)}}return void 0===er?(ef.push(el),ef):ec?ec.getUpdateObj():{}}}}},75549:function(i,o,s){"use strict";var x=s(71828).strTranslate;function p2r(i,o){switch(i.type){case"log":return i.p2d(o);case"date":return i.p2r(o,0,i.calendar);default:return i.p2r(o)}}i.exports={p2r:p2r,r2p:function(i,o){switch(i.type){case"log":return i.d2p(o);case"date":return i.r2p(o,0,i.calendar);default:return i.r2p(o)}},axValue:function(i){var o="y"===i._id.charAt(0)?1:0;return function(s){return p2r(i,s[o])}},getTransform:function(i){return x(i.xaxis._offset,i.yaxis._offset)}}},47322:function(i,o,s){"use strict";var x=s(32485),_=s(3937);i.exports={moduleType:"component",name:"selections",layoutAttributes:s(8389),supplyLayoutDefaults:s(59402),supplyDrawNewSelectionDefaults:s(90849),includeBasePlot:s(76325)("selections"),draw:x.draw,drawOne:x.drawOne,reselect:_.reselect,prepSelect:_.prepSelect,clearOutline:_.clearOutline,clearSelectionsCache:_.clearSelectionsCache,selectOnClick:_.selectOnClick}},3937:function(i,o,s){"use strict";var x=s(52142),_=s(38258),F=s(73972),N=s(91424).dashStyle,j=s(7901),G=s(30211),Z=s(23469).makeEventData,X=s(64505),J=X.freeMode,$=X.rectMode,ee=X.drawMode,et=X.openMode,er=X.selectMode,en=s(30477),ei=s(21459),eo=s(42359),es=s(51873).clearOutline,el=s(60165),ec=el.handleEllipse,eu=el.readPaths,ef=s(90551).newShapes,eh=s(35855),ed=s(32485).activateLastSelection,ep=s(71828),eg=ep.sorterAsc,em=s(61082),ey=s(79990),ev=s(41675).getFromId,ex=s(33306),e_=s(61549).redrawReglTraces,ew=s(34122),eT=ew.MINSELECT,ek=em.filter,eA=em.tester,eS=s(75549),eM=eS.p2r,eC=eS.axValue,eE=eS.getTransform;function hasSubplot(i){return void 0!==i.subplot}function selectOnClick(i,o,s,x,_,F,N){var j,G,Z,X,J,$,ee,er,en,ei=o._hoverdata,es=o._fullLayout.clickmode.indexOf("event")>-1,el=[];if(ei&&Array.isArray(ei)&&!0!==ei[0].hoverOnBox){coerceSelectionsCache(i,o,F);var ec=function(i,o){var s,x,_=i[0],F=-1,N=[];for(x=0;x<o.length;x++)if(s=o[x],_.fullData._expandedIndex===s.cd[0].trace._expandedIndex){if(!0===_.hoverOnBox)break;void 0!==_.pointNumber?F=_.pointNumber:void 0!==_.binNumber&&(F=_.binNumber,N=_.pointNumbers);break}return{pointNumber:F,pointNumbers:N,searchInfo:s}}(ei,j=determineSearchTraces(o,s,x,_));if(ec.pointNumbers.length>0?function(i,o){var s,x,_,F=[];for(_=0;_<i.length;_++)(s=i[_]).cd[0].trace.selectedpoints&&s.cd[0].trace.selectedpoints.length>0&&F.push(s);if(1===F.length&&F[0]===o.searchInfo&&(x=o.searchInfo.cd[0].trace).selectedpoints.length===o.pointNumbers.length){for(_=0;_<o.pointNumbers.length;_++)if(0>x.selectedpoints.indexOf(o.pointNumbers[_]))return!1;return!0}return!1}(j,ec):function(i){var o,s,x=0;for(s=0;s<i.length;s++)if((o=i[s].cd[0].trace).selectedpoints&&(o.selectedpoints.length>1||(x+=o.selectedpoints.length)>1))return!1;return 1===x}(j)&&($=isPointOrBinSelected(ec))){for(N&&N.remove(),en=0;en<j.length;en++)(G=j[en])._module.selectPoints(G,!1);updateSelectedState(o,j),clearSelectionsCache(F),es&&emitDeselect(o)}else{for(en=0,ee=i.shiftKey&&(void 0!==$?$:isPointOrBinSelected(ec)),Z={pointNumber:ec.pointNumber,searchInfo:ec.searchInfo,subtract:!!ee},X=multiTester(F.selectionDefs.concat([Z]),X);en<j.length;en++)if(J=fillSelectionItem(j[en]._module.selectPoints(j[en],X),j[en]),el.length)for(var eu=0;eu<J.length;eu++)el.push(J[eu]);else el=J;updateSelectedState(o,j,er={points:el}),Z&&F&&F.selectionDefs.push(Z),N&&eo(convertPoly(F.mergedPolygons,et(F.dragmode)),N,F),es&&emitSelected(o,er)}}}function isPointSelectionDef(i){return"pointNumber"in i&&"searchInfo"in i}function multiTester(i){if(i.length){for(var o=[],s=isPointSelectionDef(i[0])?0:i[0][0][0],x=s,_=isPointSelectionDef(i[0])?0:i[0][0][1],F=_,N=0;N<i.length;N++)if(isPointSelectionDef(i[N]))o.push(function(i){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(o,s,x,_){var F=i.searchInfo.cd[0].trace._expandedIndex;return _.cd[0].trace._expandedIndex===F&&x===i.pointNumber},isRect:!1,degenerate:!1,subtract:!!i.subtract}}(i[N]));else{var j=eA(i[N]);j.subtract=!!i[N].subtract,o.push(j),s=Math.min(s,j.xmin),x=Math.max(x,j.xmax),_=Math.min(_,j.ymin),F=Math.max(F,j.ymax)}return{xmin:s,xmax:x,ymin:_,ymax:F,pts:[],contains:function(i,s,x,_){for(var F=!1,N=0;N<o.length;N++)o[N].contains(i,s,x,_)&&(F=!o[N].subtract);return F},isRect:!1,degenerate:!1}}}function coerceSelectionsCache(i,o,s){var x=o._fullLayout,_=s.plotinfo,F=s.dragmode,N=x._lastSelectedSubplot&&x._lastSelectedSubplot===_.id,j=(i.shiftKey||i.altKey)&&!(ee(F)&&et(F));N&&j&&_.selection&&_.selection.selectionDefs&&!s.selectionDefs?(s.selectionDefs=_.selection.selectionDefs,s.mergedPolygons=_.selection.mergedPolygons):j&&_.selection||clearSelectionsCache(s),N||(es(o),x._lastSelectedSubplot=_.id)}function clearSelectionsCache(i,o){var s=i.dragmode,x=i.plotinfo,_=i.gd;_._fullLayout._activeShapeIndex>=0&&_._fullLayout._deactivateShape(_),_._fullLayout._activeSelectionIndex>=0&&_._fullLayout._deactivateSelection(_);var N=_._fullLayout._zoomlayer,j=ee(s),G=er(s);if(j||G){var Z,X,J=N.selectAll(".select-outline-"+x.id);J&&_._fullLayout._outlining&&(j&&(Z=ef(J,i)),Z&&F.call("_guiRelayout",_,{shapes:Z}),G&&!hasSubplot(i)&&(X=eh(J,i)),X&&(_._fullLayout._noEmitSelectedAtStart=!0,F.call("_guiRelayout",_,{selections:X}).then(function(){o&&ed(_)})),_._fullLayout._outlining=!1)}x.selection={},x.selection.selectionDefs=i.selectionDefs=[],x.selection.mergedPolygons=i.mergedPolygons=[]}function getAxId(i){return i._id}function determineSearchTraces(i,o,s,x){if(!i.calcdata)return[];var _,F,N,j=[],G=o.map(getAxId),Z=s.map(getAxId);for(N=0;N<i.calcdata.length;N++)if(!0===(F=(_=i.calcdata[N])[0].trace).visible&&F._module&&F._module.selectPoints){if(hasSubplot({subplot:x})&&(F.subplot===x||F.geo===x))j.push(createSearchInfo(F._module,_,o[0],s[0]));else if("splom"===F.type){if(F._xaxes[G[0]]&&F._yaxes[Z[0]]){var X=createSearchInfo(F._module,_,o[0],s[0]);X.scene=i._fullLayout._splomScenes[F.uid],j.push(X)}}else if("sankey"===F.type){var J=createSearchInfo(F._module,_,o[0],s[0]);j.push(J)}else{if(-1===G.indexOf(F.xaxis)||-1===Z.indexOf(F.yaxis))continue;j.push(createSearchInfo(F._module,_,ev(i,F.xaxis),ev(i,F.yaxis)))}}return j}function createSearchInfo(i,o,s,x){return{_module:i,cd:o,xaxis:s,yaxis:x}}function isPointOrBinSelected(i){var o=i.searchInfo.cd[0].trace,s=i.pointNumber,x=i.pointNumbers,_=x.length>0?x[0]:s;return!!o.selectedpoints&&o.selectedpoints.indexOf(_)>-1}function updateSelectedState(i,o,s){for(x=0;x<o.length;x++){var x,_,N=o[x].cd[0].trace._fullInput,j=i._fullLayout._tracePreGUI[N.uid]||{};void 0===j.selectedpoints&&(j.selectedpoints=N._input.selectedpoints||null)}if(s){var G=s.points||[];for(x=0;x<o.length;x++)(_=o[x].cd[0].trace)._input.selectedpoints=_._fullInput.selectedpoints=[],_._fullInput!==_&&(_.selectedpoints=[]);for(var Z=0;Z<G.length;Z++){var X=G[Z],J=X.data,$=X.fullData,ee=X.pointIndex,et=X.pointIndices;et?([].push.apply(J.selectedpoints,et),_._fullInput!==_&&[].push.apply($.selectedpoints,et)):(J.selectedpoints.push(ee),_._fullInput!==_&&$.selectedpoints.push(ee))}}else for(x=0;x<o.length;x++)_=o[x].cd[0].trace,delete _.selectedpoints,delete _._input.selectedpoints,_._fullInput!==_&&delete _._fullInput.selectedpoints;(function(i,o){for(var s=!1,x=0;x<o.length;x++){var _=o[x],N=_.cd;F.traceIs(N[0].trace,"regl")&&(s=!0);var j=_._module,G=j.styleOnSelect||j.style;G&&(G(i,N,N[0].node3),N[0].nodeRangePlot3&&G(i,N,N[0].nodeRangePlot3))}s&&(ex(i),e_(i))})(i,o)}function mergePolygons(i,o,s){for(var _=(s?x.difference:x.union)({regions:i},{regions:[o]}).regions.reverse(),F=0;F<_.length;F++){var N=_[F];N.subtract=getSubtract(N,_.slice(0,F))}return _}function fillSelectionItem(i,o){if(Array.isArray(i))for(var s=o.cd,x=o.cd[0].trace,_=0;_<i.length;_++)i[_]=Z(i[_],x,s);return i}function convertPoly(i,o){for(var s=[],x=0;x<i.length;x++){s[x]=[];for(var _=0;_<i[x].length;_++){s[x][_]=[],s[x][_][0]=_?"L":"M";for(var F=0;F<i[x][_].length;F++)s[x][_].push(i[x][_][F])}o||s[x].push(["Z",s[x][0][1],s[x][0][2]])}return s}function _doSelect(i,o){for(var s,x,_=[],F=[],N=0;N<o.length;N++){var j=o[N];x=j._module.selectPoints(j,i),F.push(x),s=fillSelectionItem(x,j),_=_.concat(s)}return _}function reselect(i,o,s,x,_){var F,N,j,G=!!x;_&&(F=_.plotinfo,N=_.xaxes[0]._id,j=_.yaxes[0]._id);var Z=[],X=[],J=getLayoutPolygons(i),$=i._fullLayout;if(F){var et=$._zoomlayer,en=$.dragmode,ei=ee(en),eo=er(en);if(ei||eo){var es=ev(i,N,"x"),el=ev(i,j,"y");if(es&&el){var ec=et.selectAll(".select-outline-"+F.id);if(ec&&i._fullLayout._outlining&&ec.length){for(var ef=eu(ec[0][0].getAttribute("d"),i,F),eh=[],ed=0;ed<ef.length;ed++){for(var ep=ef[ed],eg=[],em=0;em<ep.length;em++)eg.push([convert(es,ep[em][1]),convert(el,ep[em][2])]);eg.xref=N,eg.yref=j,eg.subtract=getSubtract(eg,eh),eh.push(eg)}J=J.concat(eh)}}}}var ey=N&&j?[N+j]:$._subplots.cartesian;(function(i){var o=i.calcdata;if(o)for(var s=0;s<o.length;s++){var x=o[s][0].trace,_=i._fullLayout._splomScenes;if(_){var F=_[x.uid];F&&(F.selectBatch=[])}}})(i);for(var ex={},e_=0;e_<ey.length;e_++){var ew=ey[e_],eT=ew.indexOf("y"),ek=ew.slice(0,eT),eS=ew.slice(eT),eM=N&&j?s:void 0;if(eM=function(i,o,s,x){for(var _,F=0;F<i.length;F++){var N=i[F];if(o===N.xref&&s===N.yref){if(_){var j=!!N.subtract;x=multiTester(_=mergePolygons(_,N,j))}else _=[N],x=eA(N)}}return x}(J,ek,eS,eM)){var eC=x;if(!G){var eE=ev(i,ek,"x"),eL=ev(i,eS,"y");eC=determineSearchTraces(i,[eE],[eL],ew);for(var eP=0;eP<eC.length;eP++){var eI=eC[eP],eO=eI.cd[0],eD=eO.trace;if("scattergl"===eI._module.name&&!eO.t.xpx){var eR=eD.x,eB=eD.y,ez=eD._length;eO.t.xpx=[],eO.t.ypx=[];for(var eF=0;eF<ez;eF++)eO.t.xpx[eF]=eE.c2p(eR[eF]),eO.t.ypx[eF]=eL.c2p(eB[eF])}"splom"!==eI._module.name||ex[eD.uid]||(ex[eD.uid]=!0)}}var eN=_doSelect(eM,eC);Z=Z.concat(eN),X=X.concat(eC)}}var ej={points:Z};updateSelectedState(i,X,ej);var eU=$.clickmode.indexOf("event")>-1&&o;if(!F&&o){var eV=getLayoutPolygons(i,!0);if(eV.length){var eH=eV[0].xref,eG=eV[0].yref;if(eH&&eG){var eW=castMultiPolygon(eV);makeFillRangeItems([ev(i,eH,"x"),ev(i,eG,"y")])(ej,eW)}}i._fullLayout._noEmitSelectedAtStart?i._fullLayout._noEmitSelectedAtStart=!1:eU&&emitSelected(i,ej),$._reselect=!1}if(!F&&$._deselect){var eZ=$._deselect;!function(i,o,s){for(var x=0;x<s.length;x++){var _=s[x];if(_.xaxis&&_.xaxis._id===i&&_.yaxis&&_.yaxis._id===o)return!0}return!1}(N=eZ.xref,j=eZ.yref,X)&&deselectSubplot(i,N,j,x),eU&&(ej.points.length?emitSelected(i,ej):emitDeselect(i)),$._deselect=!1}return{eventData:ej,selectionTesters:s}}function deselectSubplot(i,o,s,x){x=determineSearchTraces(i,[ev(i,o,"x")],[ev(i,s,"y")],o+s);for(var _=0;_<x.length;_++){var F=x[_];F._module.selectPoints(F,!1)}updateSelectedState(i,x)}function getLayoutPolygons(i,o){for(var s=[],x=i._fullLayout,_=x.selections,F=_.length,N=0;N<F;N++)if(!o||N===x._activeSelectionIndex){var j,G,Z,X,J,$=_[N];if($){var ee=$.xref,et=$.yref,er=ev(i,ee,"x"),eo=ev(i,et,"y");if("rect"===$.type){J=[];var es=convert(er,$.x0),el=convert(er,$.x1),ec=convert(eo,$.y0),eu=convert(eo,$.y1);J=[[es,ec],[es,eu],[el,eu],[el,ec]],j=Math.min(es,el),G=Math.max(es,el),Z=Math.min(ec,eu),X=Math.max(ec,eu),J.xmin=j,J.xmax=G,J.ymin=Z,J.ymax=X,J.xref=ee,J.yref=et,J.subtract=!1,J.isRect=!0,s.push(J)}else if("path"===$.type)for(var ef=$.path.split("Z"),eh=[],ed=0;ed<ef.length;ed++){var ep=ef[ed];if(ep){ep+="Z";var eg=en.extractPathCoords(ep,ei.paramIsX,"raw"),em=en.extractPathCoords(ep,ei.paramIsY,"raw");j=1/0,G=-1/0,Z=1/0,X=-1/0,J=[];for(var ey=0;ey<eg.length;ey++){var ex=convert(er,eg[ey]),e_=convert(eo,em[ey]);J.push([ex,e_]),j=Math.min(ex,j),G=Math.max(ex,G),Z=Math.min(e_,Z),X=Math.max(e_,X)}J.xmin=j,J.xmax=G,J.ymin=Z,J.ymax=X,J.xref=ee,J.yref=et,J.subtract=getSubtract(J,eh),eh.push(J),s.push(J)}}}}return s}function getSubtract(i,o){for(var s=!1,x=0;x<o.length;x++)for(var F=o[x],N=0;N<i.length;N++)if(_(i[N],F)){s=!s;break}return s}function convert(i,o){return"date"===i.type&&(o=o.replace("_"," ")),"log"===i.type?i.c2p(o):i.r2p(o,null,i.calendar)}function castMultiPolygon(i){for(var o,s=i.length,x=[],_=0;_<s;_++){var F=i[_];x=(x=x.concat(F)).concat([F[0]])}return(o=x).isRect=5===o.length&&o[0][0]===o[4][0]&&o[0][1]===o[4][1]&&o[0][0]===o[1][0]&&o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]||o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0],o.isRect&&(o.xmin=Math.min(o[0][0],o[2][0]),o.xmax=Math.max(o[0][0],o[2][0]),o.ymin=Math.min(o[0][1],o[2][1]),o.ymax=Math.max(o[0][1],o[2][1])),o}function makeFillRangeItems(i){return function(o,s){for(var x,_,F=0;F<i.length;F++){var N=i[F],j=N._id,G=j.charAt(0);if(s.isRect){x||(x={});var Z=s[G+"min"],X=s[G+"max"];void 0!==Z&&void 0!==X&&(x[j]=[eM(N,Z),eM(N,X)].sort(eg))}else _||(_={}),_[j]=s.map(eC(N))}x&&(o.range=x),_&&(o.lassoPoints=_)}}function emitSelected(i,o){o&&(o.selections=(i.layout||{}).selections||[]),i.emit("plotly_selected",o)}function emitDeselect(i){i.emit("plotly_deselect",null)}i.exports={reselect:reselect,prepSelect:function(i,o,s,x,_){var Z,X,en,ei,es,el,eu,ef=!hasSubplot(x),eh=J(_),ed=$(_),eg=et(_),em=ee(_),ev=er(_),ex="drawline"===_,e_="drawcircle"===_,eS=ex||e_,eM=x.gd,eC=eM._fullLayout,eL=ev&&"immediate"===eC.newselection.mode&&ef,eP=eC._zoomlayer,eI=x.element.getBoundingClientRect(),eO=x.plotinfo,eD=eE(eO),eR=o-eI.left,eB=s-eI.top;eC._calcInverseTransform(eM);var ez=ep.apply3DTransform(eC._invTransform)(eR,eB);eR=ez[0],eB=ez[1];var eF=eC._invScaleX,eN=eC._invScaleY,ej=eR,eU=eB,eV="M"+eR+","+eB,eH=x.xaxes[0],eG=x.yaxes[0],eW=eH._length,eZ=eG._length,eY=i.altKey&&!(ee(_)&&eg);coerceSelectionsCache(i,eM,x),eh&&(Z=ek([[eR,eB]],ew.BENDPX));var eX=eP.selectAll("path.select-outline-"+eO.id).data([1]),eK=em?eC.newshape:eC.newselection;em&&(x.hasText=eK.label.text||eK.label.texttemplate);var eJ=em&&!eg?eK.fillcolor:"rgba(0,0,0,0)",e$=eK.line.color||(ef?j.contrast(eM._fullLayout.plot_bgcolor):"#7f7f7f");eX.enter().append("path").attr("class","select-outline select-outline-"+eO.id).style({opacity:em?eK.opacity/2:1,"stroke-dasharray":N(eK.line.dash,eK.line.width),"stroke-width":eK.line.width+"px","shape-rendering":"crispEdges"}).call(j.stroke,e$).call(j.fill,eJ).attr("fill-rule","evenodd").classed("cursor-move",!!em).attr("transform",eD).attr("d",eV+"Z");var eQ=eP.append("path").attr("class","zoombox-corners").style({fill:j.background,stroke:j.defaultLine,"stroke-width":1}).attr("transform",eD).attr("d","M0,0Z");if(em&&x.hasText){var e0=eP.select(".label-temp");e0.empty()&&(e0=eP.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var e1=eC._uid+ew.SELECTID,e2=[],e3=determineSearchTraces(eM,x.xaxes,x.yaxes,x.subplot);eL&&!i.shiftKey&&(x._clearSubplotSelections=function(){if(ef){var i=eH._id,o=eG._id;deselectSubplot(eM,i,o,e3);for(var s=(eM.layout||{}).selections||[],x=[],_=!1,N=0;N<s.length;N++){var j=eC.selections[N];j.xref!==i||j.yref!==o?x.push(s[N]):_=!0}_&&(eM._fullLayout._noEmitSelectedAtStart=!0,F.call("_guiRelayout",eM,{selections:x}))}});var e5=x.plotinfo.fillRangeItems||makeFillRangeItems(x.xaxes.concat(x.yaxes));x.moveFn=function(i,o){x._clearSubplotSelections&&(x._clearSubplotSelections(),x._clearSubplotSelections=void 0);var s=Math.abs((ej=Math.max(0,Math.min(eW,eF*i+eR)))-eR),_=Math.abs((eU=Math.max(0,Math.min(eZ,eN*o+eB)))-eB);if(ed){if(ev){var F,N,j,G=eC.selectdirection;switch(F="any"===G?_<Math.min(.6*s,eT)?"h":s<Math.min(.6*_,eT)?"v":"d":G){case"h":N=e_?eZ/2:0,j=eZ;break;case"v":N=e_?eW/2:0,j=eW}}if(em)switch(eC.newshape.drawdirection){case"vertical":F="h",N=e_?eZ/2:0,j=eZ;break;case"horizontal":F="v",N=e_?eW/2:0,j=eW;break;case"ortho":s<_?(F="h",N=eB,j=eU):(F="v",N=eR,j=ej);break;default:F="d"}"h"===F?((ei=eS?ec(e_,[ej,N],[ej,j]):[[eR,N],[eR,j],[ej,j],[ej,N]]).xmin=eS?ej:Math.min(eR,ej),ei.xmax=eS?ej:Math.max(eR,ej),ei.ymin=Math.min(N,j),ei.ymax=Math.max(N,j),eQ.attr("d","M"+ei.xmin+","+(eB-eT)+"h-4v"+2*eT+"h4ZM"+(ei.xmax-1)+","+(eB-eT)+"h4v"+2*eT+"h-4Z")):"v"===F?((ei=eS?ec(e_,[N,eU],[j,eU]):[[N,eB],[N,eU],[j,eU],[j,eB]]).xmin=Math.min(N,j),ei.xmax=Math.max(N,j),ei.ymin=eS?eU:Math.min(eB,eU),ei.ymax=eS?eU:Math.max(eB,eU),eQ.attr("d","M"+(eR-eT)+","+ei.ymin+"v-4h"+2*eT+"v4ZM"+(eR-eT)+","+(ei.ymax-1)+"v4h"+2*eT+"v-4Z")):"d"===F&&((ei=eS?ec(e_,[eR,eB],[ej,eU]):[[eR,eB],[eR,eU],[ej,eU],[ej,eB]]).xmin=Math.min(eR,ej),ei.xmax=Math.max(eR,ej),ei.ymin=Math.min(eB,eU),ei.ymax=Math.max(eB,eU),eQ.attr("d","M0,0Z"))}else eh&&(Z.addPt([ej,eU]),ei=Z.filtered);if(x.selectionDefs&&x.selectionDefs.length?(en=mergePolygons(x.mergedPolygons,ei,eY),ei.subtract=eY,X=multiTester(x.selectionDefs.concat([ei]))):(en=[ei],X=eA(ei)),eo(convertPoly(en,eg),eX,x),ev){var J,$=reselect(eM,!1),ee=$.eventData?$.eventData.points.slice():[];X=($=reselect(eM,!1,X,e3,x)).selectionTesters,eu=$.eventData,J=Z?Z.filtered:castMultiPolygon(en),ey.throttle(e1,ew.SELECTDELAY,function(){for(var i=(e2=_doSelect(X,e3)).slice(),o=0;o<ee.length;o++){for(var s=ee[o],x=!1,_=0;_<i.length;_++)if(i[_].curveNumber===s.curveNumber&&i[_].pointNumber===s.pointNumber){x=!0;break}x||i.push(s)}i.length&&(eu||(eu={}),eu.points=i),e5(eu,J),function(i,o){i.emit("plotly_selecting",o)}(eM,eu)})}},x.clickFn=function(i,o){if(eQ.remove(),eM._fullLayout._activeShapeIndex>=0){eM._fullLayout._deactivateShape(eM);return}if(!em){var s=eC.clickmode;ey.done(e1).then(function(){if(ey.clear(e1),2===i){for(eX.remove(),es=0;es<e3.length;es++)(el=e3[es])._module.selectPoints(el,!1);if(updateSelectedState(eM,e3),clearSelectionsCache(x),emitDeselect(eM),e3.length){var _=e3[0].xaxis,N=e3[0].yaxis;if(_&&N){for(var j=[],Z=eM._fullLayout.selections,X=0;X<Z.length;X++){var J=Z[X];J&&(J.xref!==_._id||J.yref!==N._id)&&j.push(J)}j.length<Z.length&&(eM._fullLayout._noEmitSelectedAtStart=!0,F.call("_guiRelayout",eM,{selections:j}))}}}else s.indexOf("select")>-1&&selectOnClick(o,eM,x.xaxes,x.yaxes,x.subplot,x,eX),"event"===s&&emitSelected(eM,void 0);G.click(eM,o)}).catch(ep.error)}},x.doneFn=function(){eQ.remove(),ey.done(e1).then(function(){ey.clear(e1),!eL&&ei&&x.selectionDefs&&(ei.subtract=eY,x.selectionDefs.push(ei),x.mergedPolygons.length=0,[].push.apply(x.mergedPolygons,en)),(eL||em)&&clearSelectionsCache(x,eL),x.doneFnCompleted&&x.doneFnCompleted(e2),ev&&emitSelected(eM,eu)}).catch(ep.error)}},clearOutline:es,clearSelectionsCache:clearSelectionsCache,selectOnClick:selectOnClick}},89827:function(i,o,s){"use strict";var x=s(50215),_=s(41940),F=s(82196).line,N=s(79952).P,j=s(1426).extendFlat,G=s(44467).templatedArray;s(24695);var Z=s(9012),X=s(5386).R,J=s(37281);i.exports=G("shape",{visible:j({},Z.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:j({},Z.legend,{editType:"calc+arraydraw"}),legendgroup:j({},Z.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:j({},Z.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:_({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:j({},Z.legendrank,{editType:"calc+arraydraw"}),legendwidth:j({},Z.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:j({},x.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:j({},x.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:j({},F.color,{editType:"arraydraw"}),width:j({},F.width,{editType:"calc+arraydraw"}),dash:j({},N,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:X({},{keys:Object.keys(J)}),font:_({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(21459),N=s(30477);function calcPaddingOptions(i,o,s,_,j,G){var Z=i/2;if("pixel"!==o)return{ppad:Z};var X=j?N.extractPathCoords(j,G?F.paramIsY:F.paramIsX):[s,_],J=x.aggNums(Math.max,null,X),$=x.aggNums(Math.min,null,X),ee=$<0?Math.abs($)+Z:Z,et=J>0?J+Z:Z;return{ppad:Z,ppadplus:G?ee:et,ppadminus:G?et:ee}}function shapeBounds(i,o,s,x,_){var j,G,Z,X,J="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==o)return[J(o),J(s)];if(x){var $=1/0,ee=-1/0,et=x.match(F.segmentRE);for("date"===i.type&&(J=N.decodeDate(J)),j=0;j<et.length;j++)void 0!==(G=_[et[j].charAt(0)].drawn)&&(Z=et[j].substr(1).match(F.paramRE))&&!(Z.length<G)&&((X=J(Z[G]))<$&&($=X),X>ee&&(ee=X));if(ee>=$)return[$,ee]}}i.exports=function(i){var o=i._fullLayout,s=x.filterVisible(o.shapes);if(s.length&&i._fullData.length)for(var N=0;N<s.length;N++){var j,G,Z=s[N];Z._extremes={};var X=_.getRefType(Z.xref),J=_.getRefType(Z.yref);if("paper"!==Z.xref&&"domain"!==X){var $="pixel"===Z.xsizemode?Z.xanchor:Z.x0,ee="pixel"===Z.xsizemode?Z.xanchor:Z.x1;(G=shapeBounds(j=_.getFromId(i,Z.xref),$,ee,Z.path,F.paramIsX))&&(Z._extremes[j._id]=_.findExtremes(j,G,calcPaddingOptions(Z.line.width,Z.xsizemode,Z.x0,Z.x1,Z.path,!1)))}if("paper"!==Z.yref&&"domain"!==J){var et="pixel"===Z.ysizemode?Z.yanchor:Z.y0,er="pixel"===Z.ysizemode?Z.yanchor:Z.y1;(G=shapeBounds(j=_.getFromId(i,Z.yref),et,er,Z.path,F.paramIsY))&&(Z._extremes[j._id]=_.findExtremes(j,G,calcPaddingOptions(Z.line.width,Z.ysizemode,Z.y0,Z.y1,Z.path,!0)))}}}},21459:function(i){"use strict";i.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(85501),N=s(89827),j=s(30477);function handleShapeDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,N,s,_)}if(o._isShape=!0,coerce("visible")){coerce("showlegend")&&(coerce("legend"),coerce("legendwidth"),coerce("legendgroup"),coerce("legendgrouptitle.text"),x.coerceFont(coerce,"legendgrouptitle.font"),coerce("legendrank"));var F=coerce("path"),G=coerce("type",F?"path":"rect"),Z="path"!==G;Z&&delete o.path,coerce("editable"),coerce("layer"),coerce("opacity"),coerce("fillcolor"),coerce("fillrule"),coerce("line.width")&&(coerce("line.color"),coerce("line.dash"));for(var X=coerce("xsizemode"),J=coerce("ysizemode"),$=["x","y"],ee=0;ee<2;ee++){var et,er,en,ei,eo,es=$[ee],el=es+"anchor",ec="x"===es?X:J,eu={_fullLayout:s},ef=_.coerceRef(i,o,eu,es,void 0,"paper");if("range"===_.getRefType(ef)?((en=_.getFromId(eu,ef))._shapeIndices.push(o._index),eo=j.rangeToShapePosition(en),ei=j.shapePositionToRange(en)):ei=eo=x.identity,Z){var eh=es+"0",ed=es+"1",ep=i[eh],eg=i[ed];i[eh]=ei(i[eh],!0),i[ed]=ei(i[ed],!0),"pixel"===ec?(coerce(eh,0),coerce(ed,10)):(_.coercePosition(o,eu,coerce,ef,eh,.25),_.coercePosition(o,eu,coerce,ef,ed,.75)),o[eh]=eo(o[eh]),o[ed]=eo(o[ed]),i[eh]=ep,i[ed]=eg}if("pixel"===ec){var em=i[el];i[el]=ei(i[el],!0),_.coercePosition(o,eu,coerce,ef,el,.25),o[el]=eo(o[el]),i[el]=em}}Z&&x.noneOrAll(i,o,["x0","x1","y0","y1"]);var ey="line"===G;if(Z&&(et=coerce("label.texttemplate")),et||(er=coerce("label.text")),er||et){coerce("label.textangle");var ev=coerce("label.textposition",ey?"middle":"middle center");coerce("label.xanchor"),coerce("label.yanchor",ey?"bottom":-1!==ev.indexOf("top")?"top":-1!==ev.indexOf("bottom")?"bottom":"middle"),coerce("label.padding"),x.coerceFont(coerce,"label.font",s.font)}}}i.exports=function(i,o){F(i,o,{name:"shapes",handleItemDefaults:handleShapeDefaults})}},48100:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(63893),N=s(91424),j=s(60165).readPaths,G=s(30477),Z=G.getPathString,X=s(37281),J=s(18783).FROM_TL;i.exports=function(i,o,s,$){if($.selectAll(".shape-label").remove(),s.label.text||s.label.texttemplate){if(s.label.texttemplate){var ee,et,er,en,ei,eo,es,el,ec,eu,ef={};if("path"!==s.type){var eh=_.getFromId(i,s.xref),ed=_.getFromId(i,s.yref);for(var ep in X){var eg=X[ep](s,eh,ed);void 0!==eg&&(ef[ep]=eg)}}eo=x.texttemplateStringForShapes(s.label.texttemplate,{},i._fullLayout._d3locale,ef)}else eo=s.label.text;var em=s.label.font,ey=$.append("g").attr({"data-index":o}).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(eo);if(s.path){var ev=j(Z(i,s),i);es=1/0,ec=1/0,el=-1/0,eu=-1/0;for(var ex=0;ex<ev.length;ex++)for(var e_=0;e_<ev[ex].length;e_++)for(var ew=ev[ex][e_],eT=1;eT<ew.length;eT+=2){var ek=ew[eT],eA=ew[eT+1];es=Math.min(es,ek),el=Math.max(el,ek),ec=Math.min(ec,eA),eu=Math.max(eu,eA)}}else{var eS=_.getFromId(i,s.xref),eM=_.getRefType(s.xref),eC=_.getFromId(i,s.yref),eE=_.getRefType(s.yref),eL=G.getDataToPixel(i,eS,!1,eM),eP=G.getDataToPixel(i,eC,!0,eE);es=eL(s.x0),el=eL(s.x1),ec=eP(s.y0),eu=eP(s.y1)}var eI=s.label.textangle;"auto"===eI&&(eI="line"===s.type?(ee=es,et=ec,er=el,en=eu,ei=Math.abs(er-ee),-180/Math.PI*Math.atan2(er>=ee?et-en:en-et,ei)):0),ey.call(function(o){return o.call(N.font,em).attr({}),F.convertToTspans(o,i),o});var eO=function(i,o,s,x,_,F,N){var j,G,Z,X,$=_.label.textposition,ee=_.label.textangle,et=_.label.padding,er=_.type,en=Math.PI/180*F,ei=Math.sin(en),eo=Math.cos(en),es=_.label.xanchor,el=_.label.yanchor;if("line"===er){"start"===$?(j=i,G=o):"end"===$?(j=s,G=x):(j=(i+s)/2,G=(o+x)/2),"auto"===es&&(es="start"===$?"auto"===ee?s>i?"left":s<i?"right":"center":s>i?"right":s<i?"left":"center":"end"===$?"auto"===ee?s>i?"right":s<i?"left":"center":s>i?"left":s<i?"right":"center":"center");var ec={bottom:-1,middle:0,top:1};if("auto"===ee){var eu=ec[el];Z=-et*ei*eu,X=et*eo*eu}else{var ef={left:1,center:0,right:-1}[es],eh=ec[el];Z=et*ef,X=et*eh}j+=Z,G+=X}else Z=et+3,-1!==$.indexOf("right")?(j=Math.max(i,s)-Z,"auto"===es&&(es="right")):-1!==$.indexOf("left")?(j=Math.min(i,s)+Z,"auto"===es&&(es="left")):(j=(i+s)/2,"auto"===es&&(es="center")),G=-1!==$.indexOf("top")?Math.min(o,x):-1!==$.indexOf("bottom")?Math.max(o,x):(o+x)/2,X=et,"bottom"===el?G-=X:"top"===el&&(G+=X);var ed=J[el],ep=_.label.font.size,eg=N.height;return{textx:j+(eg*ed-ep)*ei,texty:G+-(eg*ed-ep)*eo,xanchor:es}}(es,ec,el,eu,s,eI,N.bBox(ey.node())),eD=eO.textx,eR=eO.texty,eB=eO.xanchor;ey.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[eB],y:eR,x:eD,transform:"rotate("+eI+","+eD+","+eR+")"}).call(F.positionText,eD,eR)}}},42359:function(i,o,s){"use strict";var x=s(71828).strTranslate,_=s(28569),F=s(64505),N=F.drawMode,j=F.selectMode,G=s(73972),Z=s(7901),X=s(89995),J=X.i000,$=X.i090,ee=X.i180,et=X.i270,er=s(51873).clearOutlineControllers,en=s(60165),ei=en.pointsOnRectangle,eo=en.pointsOnEllipse,es=en.writePaths,el=s(90551).newShapes,ec=s(90551).createShapeObj,eu=s(35855),ef=s(48100);function getNextPoint(i,o){var s,x,_,F=i[o][1],N=i[o][2],j=i.length;return x=i[s=(o+1)%j][1],_=i[s][2],x===F&&_===N&&(x=i[s=(o+2)%j][1],_=i[s][2]),[s,x,_]}i.exports=function displayOutlines(i,o,s,F){F||(F=0);var X,en,eh,ed,ep,eg=s.gd;function redraw(){displayOutlines(i,o,s,F++),(eo(i[0])||s.hasText)&&update({redrawing:!0})}function update(i){var x={};void 0!==s.isActiveShape&&(s.isActiveShape=!1,x=el(o,s)),void 0!==s.isActiveSelection&&(s.isActiveSelection=!1,x=eu(o,s),eg._fullLayout._reselect=!0),Object.keys(x).length&&G.call((i||{}).redrawing?"relayout":"_guiRelayout",eg,x)}var em=eg._fullLayout._zoomlayer,ey=s.dragmode,ev=N(ey),ex=j(ey);if((ev||ex)&&(eg._fullLayout._outlining=!0),er(eg),o.attr("d",es(i)),!F&&(s.isActiveShape||s.isActiveSelection)&&(ep=function(i,o){for(var s=0;s<o.length;s++){var x=o[s];i[s]=[];for(var _=0;_<x.length;_++){i[s][_]=[];for(var F=0;F<x[_].length;F++)i[s][_][F]=x[_][F]}}return i}([],i),function(o){X=[];for(var F=0;F<i.length;F++){var N=i[F],j=ei(N),G=!j&&eo(N);X[F]=[];for(var er=N.length,en=0;en<er;en++)if("Z"!==N[en][0]){if(G&&en!==J&&en!==$&&en!==ee&&en!==et)continue;var es,el=j&&s.isActiveSelection;el&&(es=getNextPoint(N,en));var ec=N[en][1],eu=N[en][2],ef=o.append(el?"rect":"circle").attr("data-i",F).attr("data-j",en).style({fill:Z.background,stroke:Z.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(el){var eh=es[1]-ec,ed=es[2]-eu,ep=ed?5:Math.max(Math.min(25,Math.abs(eh)-5),5),em=eh?5:Math.max(Math.min(25,Math.abs(ed)-5),5);ef.classed(ed?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",ep).attr("height",em).attr("x",ec-ep/2).attr("y",eu-em/2).attr("transform",x(eh/2,ed/2))}else ef.classed("cursor-grab",!0).attr("r",5).attr("cx",ec).attr("cy",eu);X[F][en]={element:ef.node(),gd:eg,prepFn:startDragVertex,doneFn:endDragVertexController,clickFn:clickVertexController},_.init(X[F][en])}}}(em.append("g").attr("class","outline-controllers")),en=[],i.length&&(en[0]={element:o[0][0],gd:eg,prepFn:function(i){(eh=+i.srcElement.getAttribute("data-i"))||(eh=0),en[eh].moveFn=moveGroupController},doneFn:function(){update()},clickFn:function(i){2===i&&function(i){if(j(i._fullLayout.dragmode)){er(i);var o=i._fullLayout._activeSelectionIndex,s=(i.layout||{}).selections||[];if(o<s.length){for(var x=[],_=0;_<s.length;_++)_!==o&&x.push(s[_]);delete i._fullLayout._activeSelectionIndex;var F=i._fullLayout.selections[o];i._fullLayout._deselect={xref:F.xref,yref:F.yref},G.call("_guiRelayout",i,{selections:x})}}}(eg)}},_.init(en[0]))),ev&&s.hasText){var e_=em.select(".label-temp");ef(eg,"label-temp",ec(o,s,s.dragmode),e_)}function startDragVertex(i){eh=+i.srcElement.getAttribute("data-i"),ed=+i.srcElement.getAttribute("data-j"),X[eh][ed].moveFn=moveVertexController}function moveVertexController(o,x){if(i.length){var _=ep[eh][ed][1],F=ep[eh][ed][2],N=i[eh],j=N.length;if(ei(N)){var G=o,Z=x;s.isActiveSelection&&(getNextPoint(N,ed)[1]===N[ed][1]?Z=0:G=0);for(var X=0;X<j;X++)if(X!==ed){var J=N[X];J[1]===N[ed][1]&&(J[1]=_+G),J[2]===N[ed][2]&&(J[2]=F+Z)}if(N[ed][1]=_+G,N[ed][2]=F+Z,!ei(N))for(var $=0;$<j;$++)for(var ee=0;ee<N[$].length;ee++)N[$][ee]=ep[eh][$][ee]}else N[ed][1]=_+o,N[ed][2]=F+x;redraw()}}function endDragVertexController(){update()}function clickVertexController(o,s){if(2===o){eh=+s.srcElement.getAttribute("data-i"),ed=+s.srcElement.getAttribute("data-j");var x=i[eh];ei(x)||eo(x)||function(){if(i.length&&i[eh]&&i[eh].length){for(var o=[],s=0;s<i[eh].length;s++)s!==ed&&o.push(i[eh][s]);o.length>1&&!(2===o.length&&"Z"===o[1][0])&&(0===ed&&(o[0][0]="M"),i[eh]=o,redraw(),update())}}()}}function moveGroupController(o,s){(function(o,s){if(i.length)for(var x=0;x<i.length;x++)for(var _=0;_<i[x].length;_++)for(var F=0;F+2<i[x][_].length;F+=2)i[x][_][F+1]=ep[x][_][F+1]+o,i[x][_][F+2]=ep[x][_][F+2]+s})(o,s),redraw()}}},34031:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(71828),N=s(89298),j=s(60165).readPaths,G=s(42359),Z=s(48100),X=s(51873).clearOutlineControllers,J=s(7901),$=s(91424),ee=s(44467).arrayEditor,et=s(28569),er=s(6964),en=s(21459),ei=s(30477),eo=ei.getPathString;function draw(i){var o=i._fullLayout;for(var s in o._shapeUpperLayer.selectAll("path").remove(),o._shapeLowerLayer.selectAll("path").remove(),o._shapeUpperLayer.selectAll("text").remove(),o._shapeLowerLayer.selectAll("text").remove(),o._plots){var x=o._plots[s].shapelayer;x&&(x.selectAll("path").remove(),x.selectAll("text").remove())}for(var _=0;_<o.shapes.length;_++)!0===o.shapes[_].visible&&drawOne(i,_)}function shouldSkipEdits(i){return!!i._fullLayout._outlining}function couldHaveActiveShape(i){return!i._context.edits.shapePosition}function drawOne(i,o){i._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+o+'"]').remove();var s=ei.makeShapesOptionsAndPlotinfo(i,o),X=s.options,es=s.plotinfo;X._input&&!0===X.visible&&function(s){var el,ec=eo(i,X),eu={"data-index":o,"fill-rule":X.fillrule,d:ec},ef=X.opacity,eh=X.fillcolor,ed=X.line.width?X.line.color:"rgba(0,0,0,0)",ep=X.line.width,eg=X.line.dash;ep||!0!==X.editable||(ep=5,eg="solid");var em="Z"!==ec[ec.length-1],ey=couldHaveActiveShape(i)&&X.editable&&i._fullLayout._activeShapeIndex===o;ey&&(eh=em?"rgba(0,0,0,0)":i._fullLayout.activeshape.fillcolor,ef=i._fullLayout.activeshape.opacity);var ev=s.append("g").classed("shape-group",!0).attr({"data-index":o}),ex=ev.append("path").attr(eu).style("opacity",ef).call(J.stroke,ed).call(J.fill,eh).call($.dashLine,eg,ep);if(setClipPath(ev,i,X),Z(i,o,X,ev),(ey||i._context.edits.shapePosition)&&(el=ee(i.layout,"shapes",X)),ey){ex.style({cursor:"move"});var e_={element:ex.node(),plotinfo:es,gd:i,editHelpers:el,hasText:X.label.text||X.label.texttemplate,isActiveShape:!0};G(j(ec,i),ex,e_)}else i._context.edits.shapePosition?function(i,o,s,j,G,X){var J,ee,es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS="pixel"===s.xsizemode,eM="pixel"===s.ysizemode,eC="line"===s.type,eE="path"===s.type,eL=X.modifyItem,eP=x.select(o.node().parentNode),eI=N.getFromId(i,s.xref),eO=N.getRefType(s.xref),eD=N.getFromId(i,s.yref),eR=N.getRefType(s.yref),eB=ei.getDataToPixel(i,eI,!1,eO),ez=ei.getDataToPixel(i,eD,!0,eR),eF=ei.getPixelToData(i,eI,!1,eO),eN=ei.getPixelToData(i,eD,!0,eR),ej=eC?(J=Math.max(s.line.width,10),(ee=G.append("g").attr("data-index",j).attr("drag-helper",!0)).append("path").attr("d",o.attr("d")).style({cursor:"move","stroke-width":J,"stroke-opacity":"0"}),es={"fill-opacity":"0"},el=Math.max(J/2,10),ee.append("circle").attr({"data-line-point":"start-point",cx:eS?eB(s.xanchor)+s.x0:eB(s.x0),cy:eM?ez(s.yanchor)-s.y0:ez(s.y0),r:el}).style(es).classed("cursor-grab",!0),ee.append("circle").attr({"data-line-point":"end-point",cx:eS?eB(s.xanchor)+s.x1:eB(s.x1),cy:eM?ez(s.yanchor)-s.y1:ez(s.y1),r:el}).style(es).classed("cursor-grab",!0),ee):o,eU={element:ej.node(),gd:i,prepFn:function(x){var _,F,j,Z,X;shouldSkipEdits(i)||(eS&&(ed=eB(s.xanchor)),eM&&(ep=ez(s.yanchor)),"path"===s.type?ek=s.path:(ec=eS?s.x0:eB(s.x0),eu=eM?s.y0:ez(s.y0),ef=eS?s.x1:eB(s.x1),eh=eM?s.y1:ez(s.y1)),ec<ef?(ey=ec,ew="x0",ev=ef,eT="x1"):(ey=ef,ew="x1",ev=ec,eT="x0"),!eM&&eu<eh||eM&&eu>eh?(eg=eu,ex="y0",em=eh,e_="y1"):(eg=eh,ex="y1",em=eu,e_="y0"),updateDragMode(x),renderVisualCues(G,s),_=s.xref,F=s.yref,j=N.getFromId(i,_),Z=N.getFromId(i,F),X="","paper"===_||j.autorange||(X+=_),"paper"===F||Z.autorange||(X+=F),$.setClipUrl(o,X?"clip"+i._fullLayout._uid+X:null,i),eU.moveFn="move"===eA?moveShape:resizeShape,eU.altKey=x.altKey)},doneFn:function(){shouldSkipEdits(i)||(er(o),removeVisualCues(G),setClipPath(o,i,s),_.call("_guiRelayout",i,X.getUpdateObj()))},clickFn:function(){shouldSkipEdits(i)||removeVisualCues(G)}};function updateDragMode(s){if(shouldSkipEdits(i)){eA=null;return}if(eC)eA="path"===s.target.tagName?"move":"start-point"===s.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var x=eU.element.getBoundingClientRect(),_=x.right-x.left,F=x.bottom-x.top,N=s.clientX-x.left,j=s.clientY-x.top,G=!eE&&_>10&&F>10&&!s.shiftKey?et.getCursor(N/_,1-j/F):"move";er(o,G),eA=G.split("-")[0]}}function moveShape(x,_){if("path"===s.type){var noOp=function(i){return i},F=noOp,N=noOp;eS?eL("xanchor",s.xanchor=eF(ed+x)):(F=function(i){return eF(eB(i)+x)},eI&&"date"===eI.type&&(F=ei.encodeDate(F))),eM?eL("yanchor",s.yanchor=eN(ep+_)):(N=function(i){return eN(ez(i)+_)},eD&&"date"===eD.type&&(N=ei.encodeDate(N))),eL("path",s.path=movePath(ek,F,N))}else eS?eL("xanchor",s.xanchor=eF(ed+x)):(eL("x0",s.x0=eF(ec+x)),eL("x1",s.x1=eF(ef+x))),eM?eL("yanchor",s.yanchor=eN(ep+_)):(eL("y0",s.y0=eN(eu+_)),eL("y1",s.y1=eN(eh+_)));o.attr("d",eo(i,s)),renderVisualCues(G,s),Z(i,j,s,eP)}function resizeShape(x,_){if(eE){var noOp=function(i){return i},F=noOp,N=noOp;eS?eL("xanchor",s.xanchor=eF(ed+x)):(F=function(i){return eF(eB(i)+x)},eI&&"date"===eI.type&&(F=ei.encodeDate(F))),eM?eL("yanchor",s.yanchor=eN(ep+_)):(N=function(i){return eN(ez(i)+_)},eD&&"date"===eD.type&&(N=ei.encodeDate(N))),eL("path",s.path=movePath(ek,F,N))}else if(eC){if("resize-over-start-point"===eA){var X=ec+x,J=eM?eu-_:eu+_;eL("x0",s.x0=eS?X:eF(X)),eL("y0",s.y0=eM?J:eN(J))}else if("resize-over-end-point"===eA){var $=ef+x,ee=eM?eh-_:eh+_;eL("x1",s.x1=eS?$:eF($)),eL("y1",s.y1=eM?ee:eN(ee))}}else{var has=function(i){return -1!==eA.indexOf(i)},et=has("n"),er=has("s"),en=has("w"),es=has("e"),el=et?eg+_:eg,eO=er?em+_:em,eR=en?ey+x:ey,ej=es?ev+x:ev;eM&&(et&&(el=eg-_),er&&(eO=em-_)),(!eM&&eO-el>10||eM&&el-eO>10)&&(eL(ex,s[ex]=eM?el:eN(el)),eL(e_,s[e_]=eM?eO:eN(eO))),ej-eR>10&&(eL(ew,s[ew]=eS?eR:eF(eR)),eL(eT,s[eT]=eS?ej:eF(ej)))}o.attr("d",eo(i,s)),renderVisualCues(G,s),Z(i,j,s,eP)}function renderVisualCues(i,o){(eS||eM)&&function(){var s="path"!==o.type,x=i.selectAll(".visual-cue").data([0]);x.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var _=eB(eS?o.xanchor:F.midRange(s?[o.x0,o.x1]:ei.extractPathCoords(o.path,en.paramIsX))),N=ez(eM?o.yanchor:F.midRange(s?[o.y0,o.y1]:ei.extractPathCoords(o.path,en.paramIsY)));if(_=ei.roundPositionForSharpStrokeRendering(_,1),N=ei.roundPositionForSharpStrokeRendering(N,1),eS&&eM){var j="M"+(_-1-1)+","+(N-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";x.attr("d",j)}else if(eS){var G="M"+(_-1-1)+","+(N-9-1)+"v18 h2 v-18 Z";x.attr("d",G)}else{var Z="M"+(_-9-1)+","+(N-1-1)+"h18 v2 h-18 Z";x.attr("d",Z)}}()}function removeVisualCues(i){i.selectAll(".visual-cue").remove()}et.init(eU),ej.node().onmousemove=updateDragMode}(i,ex,X,o,s,el):!0===X.editable&&ex.style("pointer-events",em||J.opacity(eh)*ef<=.5?"stroke":"all");ex.node().addEventListener("click",function(){return function(i,o){if(couldHaveActiveShape(i)){var s=+o.node().getAttribute("data-index");if(s>=0){if(s===i._fullLayout._activeShapeIndex){deactivateShape(i);return}i._fullLayout._activeShapeIndex=s,i._fullLayout._deactivateShape=deactivateShape,draw(i)}}}(i,ex)})}("below"!==X.layer?i._fullLayout._shapeUpperLayer:"paper"===X.xref||"paper"===X.yref?i._fullLayout._shapeLowerLayer:es._hadPlotinfo?(es.mainplotinfo||es).shapelayer:i._fullLayout._shapeLowerLayer)}function setClipPath(i,o,s){var x=(s.xref+s.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");$.setClipUrl(i,x?"clip"+o._fullLayout._uid+x:null,o)}function movePath(i,o,s){return i.replace(en.segmentRE,function(i){var x=0,_=i.charAt(0),F=en.paramIsX[_],N=en.paramIsY[_],j=en.numParams[_];return _+i.substr(1).replace(en.paramRE,function(i){return x>=j||(F[x]?i=o(i):N[x]&&(i=s(i)),x++),i})})}function deactivateShape(i){couldHaveActiveShape(i)&&i._fullLayout._activeShapeIndex>=0&&(X(i),delete i._fullLayout._activeShapeIndex,draw(i))}i.exports={draw:draw,drawOne:drawOne,eraseActiveShape:function(i){if(couldHaveActiveShape(i)){X(i);var o=i._fullLayout._activeShapeIndex,s=(i.layout||{}).shapes||[];if(o<s.length){for(var x=[],F=0;F<s.length;F++)F!==o&&x.push(s[F]);return delete i._fullLayout._activeShapeIndex,_.call("_guiRelayout",i,{shapes:x})}}},drawLabel:Z}},29241:function(i,o,s){"use strict";var x=s(30962).overrideAll,_=s(9012),F=s(41940),N=s(79952).P,j=s(1426).extendFlat,G=s(5386).R,Z=s(37281);i.exports=x({newshape:{visible:j({},_.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:j({},_.legend,{}),legendgroup:j({},_.legendgroup,{}),legendgrouptitle:{text:j({},_.legendgrouptitle.text,{}),font:F({})},legendrank:j({},_.legendrank,{}),legendwidth:j({},_.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:j({},N,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:j({},_.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:G({newshape:!0},{keys:Object.keys(Z)}),font:F({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(i){"use strict";i.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(i,o,s){"use strict";var x=s(7901),_=s(71828);i.exports=function(i,o,s){if(s("newshape.visible"),s("newshape.name"),s("newshape.showlegend"),s("newshape.legend"),s("newshape.legendwidth"),s("newshape.legendgroup"),s("newshape.legendgrouptitle.text"),_.coerceFont(s,"newshape.legendgrouptitle.font"),s("newshape.legendrank"),s("newshape.drawdirection"),s("newshape.layer"),s("newshape.fillcolor"),s("newshape.fillrule"),s("newshape.opacity"),s("newshape.line.width")){var F=(i||{}).plot_bgcolor||"#FFF";s("newshape.line.color",x.contrast(F)),s("newshape.line.dash")}var N="drawline"===i.dragmode,j=s("newshape.label.text"),G=s("newshape.label.texttemplate");if(j||G){s("newshape.label.textangle");var Z=s("newshape.label.textposition",N?"middle":"middle center");s("newshape.label.xanchor"),s("newshape.label.yanchor",N?"bottom":-1!==Z.indexOf("top")?"top":-1!==Z.indexOf("bottom")?"bottom":"middle"),s("newshape.label.padding"),_.coerceFont(s,"newshape.label.font",o.font)}s("activeshape.fillcolor"),s("activeshape.opacity")}},60165:function(i,o,s){"use strict";var x=s(95616),_=s(89995),F=_.CIRCLE_SIDES,N=_.SQRT2,j=s(75549),G=j.p2r,Z=j.r2p,X=[0,3,4,5,6,1,2],J=[0,3,4,1,2];function almostEq(i,o){return 1e-6>=Math.abs(i-o)}function dist(i,o){var s=o[1]-i[1],x=o[2]-i[2];return Math.sqrt(s*s+x*x)}o.writePaths=function(i){var o=i.length;if(!o)return"M0,0Z";for(var s="",x=0;x<o;x++)for(var _=i[x].length,F=0;F<_;F++){var N=i[x][F][0];if("Z"===N)s+="Z";else for(var j=i[x][F].length,G=0;G<j;G++){var Z=G;"Q"===N||"S"===N?Z=J[G]:"C"===N&&(Z=X[G]),s+=i[x][F][Z],G>0&&G<j-1&&(s+=",")}}return s},o.readPaths=function(i,o,s,_){var N=x(i),j=[],X=-1,J=0,$=0,recStart=function(){er=J,en=$};recStart();for(var ee=0;ee<N.length;ee++){var et,er,en,ei,eo,es,el,ec=[],eu=N[ee][0],ef=eu;switch(eu){case"M":j[++X]=[],J=+N[ee][1],$=+N[ee][2],ec.push([ef,J,$]),recStart();break;case"Q":case"S":ei=+N[ee][1],es=+N[ee][2],J=+N[ee][3],$=+N[ee][4],ec.push([ef,J,$,ei,es]);break;case"C":ei=+N[ee][1],es=+N[ee][2],eo=+N[ee][3],el=+N[ee][4],J=+N[ee][5],$=+N[ee][6],ec.push([ef,J,$,ei,es,eo,el]);break;case"T":case"L":J=+N[ee][1],$=+N[ee][2],ec.push([ef,J,$]);break;case"H":ef="L",J=+N[ee][1],ec.push([ef,J,$]);break;case"V":ef="L",$=+N[ee][1],ec.push([ef,J,$]);break;case"A":ef="L";var eh=+N[ee][1],ed=+N[ee][2];+N[ee][4]||(eh=-eh,ed=-ed);var ep=J-eh,eg=$;for(et=1;et<=F/2;et++){var em=2*Math.PI*et/F;ec.push([ef,ep+eh*Math.cos(em),eg+ed*Math.sin(em)])}break;case"Z":(J!==er||$!==en)&&(J=er,$=en,ec.push([ef,J,$]))}for(var ey=(s||{}).domain,ev=o._fullLayout._size,ex=s&&"pixel"===s.xsizemode,e_=s&&"pixel"===s.ysizemode,ew=!1===_,eT=0;eT<ec.length;eT++){for(et=0;et+2<7;et+=2){var ek=ec[eT][et+1],eA=ec[eT][et+2];void 0!==ek&&void 0!==eA&&(J=ek,$=eA,s&&(s.xaxis&&s.xaxis.p2r?(ew&&(ek-=s.xaxis._offset),ek=ex?Z(s.xaxis,s.xanchor)+ek:G(s.xaxis,ek)):(ew&&(ek-=ev.l),ey?ek=ey.x[0]+ek/ev.w:ek/=ev.w),s.yaxis&&s.yaxis.p2r?(ew&&(eA-=s.yaxis._offset),eA=e_?Z(s.yaxis,s.yanchor)-eA:G(s.yaxis,eA)):(ew&&(eA-=ev.t),eA=ey?ey.y[1]-eA/ev.h:1-eA/ev.h)),ec[eT][et+1]=ek,ec[eT][et+2]=eA)}j[X].push(ec[eT].slice())}}return j},o.pointsOnRectangle=function(i){if(5!==i.length)return!1;for(var o=1;o<3;o++)if(!almostEq(i[0][o]-i[1][o],i[3][o]-i[2][o])||!almostEq(i[0][o]-i[3][o],i[1][o]-i[2][o]))return!1;return!!(almostEq(i[0][1],i[1][1])||almostEq(i[0][1],i[3][1]))&&!!(dist(i[0],i[1])*dist(i[0],i[3]))},o.pointsOnEllipse=function(i){var o=i.length;if(o!==F+1)return!1;o=F;for(var s=0;s<o;s++){var x=(2*o-s)%o,_=(o/2+x)%o,N=(o/2+s)%o;if(!almostEq(dist(i[s],i[N]),dist(i[x],i[_])))return!1}return!0},o.handleEllipse=function(i,s,x){if(!i)return[s,x];var _=o.ellipseOver({x0:s[0],y0:s[1],x1:x[0],y1:x[1]}),j=(_.x1+_.x0)/2,G=(_.y1+_.y0)/2,Z=(_.x1-_.x0)/2,X=(_.y1-_.y0)/2;Z||(Z=X/=N),X||(X=Z/=N);for(var J=[],$=0;$<F;$++){var ee=2*$*Math.PI/F;J.push([j+Z*Math.cos(ee),G+X*Math.sin(ee)])}return J},o.ellipseOver=function(i){var o=i.x0,s=i.y0,x=i.x1,_=i.y1,F=x-o,j=_-s,G=((o-=F)+x)/2,Z=((s-=j)+_)/2;return{x0:G-(F*=N),y0:Z-(j*=N),x1:G+F,y1:Z+j}},o.fixDatesForPaths=function(i,o,s){var x="date"===o.type,_="date"===s.type;if(!x&&!_)return i;for(var F=0;F<i.length;F++)for(var N=0;N<i[F].length;N++)for(var j=0;j+2<i[F][N].length;j+=2)x&&(i[F][N][j+1]=i[F][N][j+1].replace(" ","_")),_&&(i[F][N][j+2]=i[F][N][j+2].replace(" ","_"));return i}},90551:function(i,o,s){"use strict";var x=s(64505),_=x.drawMode,F=x.openMode,N=s(89995),j=N.i000,G=N.i090,Z=N.i180,X=N.i270,J=N.cos45,$=N.sin45,ee=s(75549),et=ee.p2r,er=ee.r2p,en=s(51873).clearOutline,ei=s(60165),eo=ei.readPaths,es=ei.writePaths,el=ei.ellipseOver,ec=ei.fixDatesForPaths;function createShapeObj(i,o,s){var x,_=i[0][0],N=o.gd,ee=_.getAttribute("d"),en=N._fullLayout.newshape,ei=o.plotinfo,eu=o.isActiveShape,ef=ei.xaxis,eh=ei.yaxis,ed=!!ei.domain||!ei.xaxis,ep=!!ei.domain||!ei.yaxis,eg=F(s),em=eo(ee,N,ei,eu),ey={editable:!0,visible:en.visible,name:en.name,showlegend:en.showlegend,legend:en.legend,legendwidth:en.legendwidth,legendgroup:en.legendgroup,legendgrouptitle:{text:en.legendgrouptitle.text,font:en.legendgrouptitle.font},legendrank:en.legendrank,label:en.label,xref:ed?"paper":ef._id,yref:ep?"paper":eh._id,layer:en.layer,opacity:en.opacity,line:{color:en.line.color,width:en.line.width,dash:en.line.dash}};if(eg||(ey.fillcolor=en.fillcolor,ey.fillrule=en.fillrule),1===em.length&&(x=em[0]),x&&5===x.length&&"drawrect"===s)ey.type="rect",ey.x0=x[0][1],ey.y0=x[0][2],ey.x1=x[2][1],ey.y1=x[2][2];else if(x&&"drawline"===s)ey.type="line",ey.x0=x[0][1],ey.y0=x[0][2],ey.x1=x[1][1],ey.y1=x[1][2];else if(x&&"drawcircle"===s){ey.type="circle";var ev=x[j][1],ex=x[G][1],e_=x[Z][1],ew=x[X][1],eT=x[j][2],ek=x[G][2],eA=x[Z][2],eS=x[X][2],eM=ei.xaxis&&("date"===ei.xaxis.type||"log"===ei.xaxis.type),eC=ei.yaxis&&("date"===ei.yaxis.type||"log"===ei.yaxis.type);eM&&(ev=er(ei.xaxis,ev),ex=er(ei.xaxis,ex),e_=er(ei.xaxis,e_),ew=er(ei.xaxis,ew)),eC&&(eT=er(ei.yaxis,eT),ek=er(ei.yaxis,ek),eA=er(ei.yaxis,eA),eS=er(ei.yaxis,eS));var eE=(ex+ew)/2,eL=(eT+eA)/2,eP=el({x0:eE,y0:eL,x1:eE+(ew-ex+e_-ev)/2*J,y1:eL+(eS-ek+eA-eT)/2*$});eM&&(eP.x0=et(ei.xaxis,eP.x0),eP.x1=et(ei.xaxis,eP.x1)),eC&&(eP.y0=et(ei.yaxis,eP.y0),eP.y1=et(ei.yaxis,eP.y1)),ey.x0=eP.x0,ey.y0=eP.y0,ey.x1=eP.x1,ey.y1=eP.y1}else ey.type="path",ef&&eh&&ec(em,ef,eh),ey.path=es(em),x=null;return ey}i.exports={newShapes:function(i,o){if(i.length&&i[0][0]){var s=o.gd,x=o.isActiveShape,F=o.dragmode,N=(s.layout||{}).shapes||[];if(!_(F)&&void 0!==x){var j=s._fullLayout._activeShapeIndex;if(j<N.length)switch(s._fullLayout.shapes[j].type){case"rect":F="drawrect";break;case"circle":F="drawcircle";break;case"line":F="drawline";break;case"path":var G=N[j].path||"";F="Z"===G[G.length-1]?"drawclosedpath":"drawopenpath"}}var Z=createShapeObj(i,o,F);en(s);for(var X=o.editHelpers,J=(X||{}).modifyItem,$=[],ee=0;ee<N.length;ee++){var et=s._fullLayout.shapes[ee];if($[ee]=et._input,void 0!==x&&ee===s._fullLayout._activeShapeIndex)switch(et.type){case"line":case"rect":case"circle":J("x0",Z.x0),J("x1",Z.x1),J("y0",Z.y0),J("y1",Z.y1);break;case"path":J("path",Z.path)}}return void 0===x?($.push(Z),$):X?X.getUpdateObj():{}}},createShapeObj:createShapeObj}},51873:function(i){"use strict";i.exports={clearOutlineControllers:function(i){var o=i._fullLayout._zoomlayer;o&&o.selectAll(".outline-controllers").remove()},clearOutline:function(i){var o=i._fullLayout._zoomlayer;o&&o.selectAll(".select-outline").remove(),i._fullLayout._outlining=!1}}},30477:function(i,o,s){"use strict";var x=s(21459),_=s(71828),F=s(89298);o.rangeToShapePosition=function(i){return"log"===i.type?i.r2d:function(i){return i}},o.shapePositionToRange=function(i){return"log"===i.type?i.d2r:function(i){return i}},o.decodeDate=function(i){return function(o){return o.replace&&(o=o.replace("_"," ")),i(o)}},o.encodeDate=function(i){return function(o){return i(o).replace(" ","_")}},o.extractPathCoords=function(i,o,s){var F=[];return i.match(x.segmentRE).forEach(function(i){var N=o[i.charAt(0)].drawn;if(void 0!==N){var j=i.substr(1).match(x.paramRE);if(j&&!(j.length<N)){var G=j[N],Z=s?G:_.cleanNumber(G);F.push(Z)}}}),F},o.getDataToPixel=function(i,s,x,_){var F,N=i._fullLayout._size;if(s){if("domain"===_)F=function(i){return s._length*(x?1-i:i)+s._offset};else{var j=o.shapePositionToRange(s);F=function(i){return s._offset+s.r2p(j(i,!0))},"date"===s.type&&(F=o.decodeDate(F))}}else F=x?function(i){return N.t+N.h*(1-i)}:function(i){return N.l+N.w*i};return F},o.getPixelToData=function(i,s,x,_){var F,N=i._fullLayout._size;if(s){if("domain"===_)F=function(i){var o=(i-s._offset)/s._length;return x?1-o:o};else{var j=o.rangeToShapePosition(s);F=function(i){return j(s.p2r(i-s._offset))}}}else F=x?function(i){return 1-(i-N.t)/N.h}:function(i){return(i-N.l)/N.w};return F},o.roundPositionForSharpStrokeRendering=function(i,o){var s=Math.round(i);return 1===Math.round(o%2)?s+.5:s},o.makeShapesOptionsAndPlotinfo=function(i,o){var s=i._fullLayout.shapes[o]||{},x=i._fullLayout._plots[s.xref+s.yref];return x?x._hadPlotinfo=!0:(x={},s.xref&&"paper"!==s.xref&&(x.xaxis=i._fullLayout[s.xref+"axis"]),s.yref&&"paper"!==s.yref&&(x.yaxis=i._fullLayout[s.yref+"axis"])),x.xsizemode=s.xsizemode,x.ysizemode=s.ysizemode,x.xanchor=s.xanchor,x.yanchor=s.yanchor,{options:s,plotinfo:x}},o.makeSelectionsOptionsAndPlotinfo=function(i,o){var s=i._fullLayout.selections[o]||{},x=i._fullLayout._plots[s.xref+s.yref];return x?x._hadPlotinfo=!0:(x={},s.xref&&(x.xaxis=i._fullLayout[s.xref+"axis"]),s.yref&&(x.yaxis=i._fullLayout[s.yref+"axis"])),{options:s,plotinfo:x}},o.getPathString=function(i,s){var N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec=s.type,eu=F.getRefType(s.xref),ef=F.getRefType(s.yref),eh=F.getFromId(i,s.xref),ed=F.getFromId(i,s.yref),ep=i._fullLayout._size;if(eh?"domain"===eu?et=function(i){return eh._offset+eh._length*i}:(ee=o.shapePositionToRange(eh),et=function(i){return eh._offset+eh.r2p(ee(i,!0))}):et=function(i){return ep.l+ep.w*i},ed?"domain"===ef?en=function(i){return ed._offset+ed._length*(1-i)}:(er=o.shapePositionToRange(ed),en=function(i){return ed._offset+ed.r2p(er(i,!0))}):en=function(i){return ep.t+ep.h*(1-i)},"path"===ec)return eh&&"date"===eh.type&&(et=o.decodeDate(et)),ed&&"date"===ed.type&&(en=o.decodeDate(en)),N=et,j=en,G=s.path,Z=s.xsizemode,X=s.ysizemode,J=s.xanchor,$=s.yanchor,G.replace(x.segmentRE,function(i){var o=0,s=i.charAt(0),F=x.paramIsX[s],G=x.paramIsY[s],ee=x.numParams[s],et=i.substr(1).replace(x.paramRE,function(i){return F[o]?i="pixel"===Z?N(J)+Number(i):N(i):G[o]&&(i="pixel"===X?j($)-Number(i):j(i)),++o>ee&&(i="X"),i});return o>ee&&(et=et.replace(/[\s,]*X.*/,""),_.log("Ignoring extra params in segment "+i)),s+et});if("pixel"===s.xsizemode){var eg=et(s.xanchor);ei=eg+s.x0,eo=eg+s.x1}else ei=et(s.x0),eo=et(s.x1);if("pixel"===s.ysizemode){var em=en(s.yanchor);es=em-s.y0,el=em-s.y1}else es=en(s.y0),el=en(s.y1);if("line"===ec)return"M"+ei+","+es+"L"+eo+","+el;if("rect"===ec)return"M"+ei+","+es+"H"+eo+"V"+el+"H"+ei+"Z";var ey=(ei+eo)/2,ev=(es+el)/2,ex=Math.abs(ey-ei),e_=Math.abs(ev-es),ew="A"+ex+","+e_,eT=ey+ex+","+ev;return"M"+eT+ew+" 0 1,1 "+ey+","+(ev-e_)+ew+" 0 0,1 "+eT+"Z"}},89853:function(i,o,s){"use strict";var x=s(34031);i.exports={moduleType:"component",name:"shapes",layoutAttributes:s(89827),supplyLayoutDefaults:s(84726),supplyDrawNewShapeDefaults:s(45547),includeBasePlot:s(76325)("shapes"),calcAutorange:s(5627),draw:x.draw,drawOne:x.drawOne}},37281:function(i){"use strict";function d2l(i,o){return o?o.d2l(i):i}function dxFn(i,o){return d2l(i.x1,o)-d2l(i.x0,o)}function dyFn(i,o,s){return d2l(i.y1,s)-d2l(i.y0,s)}i.exports={x0:function(i){return i.x0},x1:function(i){return i.x1},y0:function(i){return i.y0},y1:function(i){return i.y1},slope:function(i,o,s){return"line"!==i.type?void 0:dyFn(i,o,s)/dxFn(i,o)},dx:dxFn,dy:dyFn,width:function(i,o){return Math.abs(dxFn(i,o))},height:function(i,o,s){return Math.abs(dyFn(i,o,s))},length:function(i,o,s){return"line"!==i.type?void 0:Math.sqrt(Math.pow(dxFn(i,o),2)+Math.pow(dyFn(i,o,s),2))},xcenter:function(i,o){var s;return s=(d2l(i.x1,o)+d2l(i.x0,o))/2,o?o.l2d(s):s},ycenter:function(i,o,s){var x;return x=(d2l(i.y1,s)+d2l(i.y0,s))/2,s?s.l2d(x):x}}},75067:function(i,o,s){"use strict";var x=s(41940),_=s(35025),F=s(1426).extendDeepAll,N=s(30962).overrideAll,j=s(85594),G=s(44467).templatedArray,Z=s(98292),X=G("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});i.exports=N(G("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:X,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:F(_({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:j.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:x({})},font:x({}),activebgcolor:{valType:"color",dflt:Z.gripBgActiveColor},bgcolor:{valType:"color",dflt:Z.railBgColor},bordercolor:{valType:"color",dflt:Z.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Z.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Z.tickLength},tickcolor:{valType:"color",dflt:Z.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Z.minorTickLength}}),"arraydraw","from-root")},98292:function(i){"use strict";i.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(i,o,s){"use strict";var x=s(71828),_=s(85501),F=s(75067),N=s(98292).name,j=F.steps;function sliderDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,F,s,_)}for(var N=_(i,o,{name:"steps",handleItemDefaults:stepDefaults}),j=0,G=0;G<N.length;G++)N[G].visible&&j++;if(j<2?o.visible=!1:coerce("visible")){o._stepCount=j;var Z=o._visibleSteps=x.filterVisible(N);(N[coerce("active")]||{}).visible||(o.active=Z[0]._index),coerce("x"),coerce("y"),x.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),coerce("len"),coerce("lenmode"),coerce("pad.t"),coerce("pad.r"),coerce("pad.b"),coerce("pad.l"),x.coerceFont(coerce,"font",s.font),coerce("currentvalue.visible")&&(coerce("currentvalue.xanchor"),coerce("currentvalue.prefix"),coerce("currentvalue.suffix"),coerce("currentvalue.offset"),x.coerceFont(coerce,"currentvalue.font",o.font)),coerce("transition.duration"),coerce("transition.easing"),coerce("bgcolor"),coerce("activebgcolor"),coerce("bordercolor"),coerce("borderwidth"),coerce("ticklen"),coerce("tickwidth"),coerce("tickcolor"),coerce("minorticklen")}}function stepDefaults(i,o){function coerce(s,_){return x.coerce(i,o,j,s,_)}if("skip"===i.method||Array.isArray(i.args)?coerce("visible"):o.visible=!1){coerce("method"),coerce("args");var s=coerce("label","step-"+o._index);coerce("value",s),coerce("execute")}}i.exports=function(i,o){_(i,o,{name:N,handleItemDefaults:sliderDefaults})}},44504:function(i,o,s){"use strict";var x=s(39898),_=s(74875),F=s(7901),N=s(91424),j=s(71828),G=j.strTranslate,Z=s(63893),X=s(44467).arrayEditor,J=s(98292),$=s(18783),ee=$.LINE_SPACING,et=$.FROM_TL,er=$.FROM_BR;function autoMarginId(i){return J.autoMarginIdRoot+i._index}function keyFunction(i){return i._index}function drawCurrentValue(i,o,s){if(o.currentvalue.visible){var x,_,F=o._dims;switch(o.currentvalue.xanchor){case"right":x=F.inputAreaLength-J.currentValueInset-F.currentValueMaxWidth,_="left";break;case"center":x=.5*F.inputAreaLength,_="middle";break;default:x=J.currentValueInset,_="left"}var G=j.ensureSingle(i,"text",J.labelClass,function(i){i.attr({"text-anchor":_,"data-notex":1})}),X=o.currentvalue.prefix?o.currentvalue.prefix:"";if("string"==typeof s)X+=s;else{var $=o.steps[o.active].label,et=o._gd._fullLayout._meta;et&&($=j.templateString($,et)),X+=$}o.currentvalue.suffix&&(X+=o.currentvalue.suffix),G.call(N.font,o.currentvalue.font).text(X).call(Z.convertToTspans,o._gd);var er=Z.lineCount(G),en=(F.currentValueMaxLines+1-er)*o.currentvalue.font.size*ee;return Z.positionText(G,x,en),G}}function drawGrip(i,o,s){j.ensureSingle(i,"rect",J.gripRectClass,function(x){x.call(attachGripEvents,o,i,s).style("pointer-events","all")}).attr({width:J.gripWidth,height:J.gripHeight,rx:J.gripRadius,ry:J.gripRadius}).call(F.stroke,s.bordercolor).call(F.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px")}function drawLabel(i,o,s){var x=j.ensureSingle(i,"text",J.labelClass,function(i){i.attr({"text-anchor":"middle","data-notex":1})}),_=o.step.label,F=s._gd._fullLayout._meta;return F&&(_=j.templateString(_,F)),x.call(N.font,s.font).text(_).call(Z.convertToTspans,s._gd),x}function drawLabelGroup(i,o){var s=j.ensureSingle(i,"g",J.labelsClass),_=o._dims,F=s.selectAll("g."+J.labelGroupClass).data(_.labelSteps);F.enter().append("g").classed(J.labelGroupClass,!0),F.exit().remove(),F.each(function(i){var s=x.select(this);s.call(drawLabel,i,o),N.setTranslate(s,normalizedValueToPosition(o,i.fraction),J.tickOffset+o.ticklen+o.font.size*ee+J.labelOffset+_.currentValueTotalHeight)})}function handleInput(i,o,s,x,_){var F=Math.round(x*(s._stepCount-1)),N=s._visibleSteps[F]._index;N!==s.active&&setActive(i,o,s,N,!0,_)}function setActive(i,o,s,x,F,N){var j=s.active;s.active=x,X(i.layout,J.name,s).applyUpdate("active",x);var G=s.steps[s.active];o.call(setGripPosition,s,N),o.call(drawCurrentValue,s),i.emit("plotly_sliderchange",{slider:s,step:s.steps[s.active],interaction:F,previousActive:j}),G&&G.method&&F&&(o._nextMethod?(o._nextMethod.step=G,o._nextMethod.doCallback=F,o._nextMethod.doTransition=N):(o._nextMethod={step:G,doCallback:F,doTransition:N},o._nextMethodRaf=window.requestAnimationFrame(function(){var s=o._nextMethod.step;s.method&&(s.execute&&_.executeAPICommand(i,s.method,s.args),o._nextMethod=null,o._nextMethodRaf=null)})))}function attachGripEvents(i,o,s){if(!o._context.staticPlot){var _=s.node(),N=x.select(o);i.on("mousedown",mouseDownHandler),i.on("touchstart",mouseDownHandler)}function getSliderOpts(){return s.data()[0]}function mouseDownHandler(){var i=getSliderOpts();o.emit("plotly_sliderstart",{slider:i});var j=s.select("."+J.gripRectClass);x.event.stopPropagation(),x.event.preventDefault(),j.call(F.fill,i.activebgcolor);var G=positionToNormalizedValue(i,x.mouse(_)[0]);function mouseMoveHandler(){var i=getSliderOpts(),F=positionToNormalizedValue(i,x.mouse(_)[0]);handleInput(o,s,i,F,!1)}function mouseUpHandler(){var i=getSliderOpts();i._dragging=!1,j.call(F.fill,i.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),o.emit("plotly_sliderend",{slider:i,step:i.steps[i.active]})}handleInput(o,s,i,G,!0),i._dragging=!0,N.on("mousemove",mouseMoveHandler),N.on("touchmove",mouseMoveHandler),N.on("mouseup",mouseUpHandler),N.on("touchend",mouseUpHandler)}}function drawTicks(i,o){var s=i.selectAll("rect."+J.tickRectClass).data(o._visibleSteps),_=o._dims;s.enter().append("rect").classed(J.tickRectClass,!0),s.exit().remove(),s.attr({width:o.tickwidth+"px","shape-rendering":"crispEdges"}),s.each(function(i,s){var j=s%_.labelStride==0,G=x.select(this);G.attr({height:j?o.ticklen:o.minorticklen}).call(F.fill,o.tickcolor),N.setTranslate(G,normalizedValueToPosition(o,s/(o._stepCount-1))-.5*o.tickwidth,(j?J.tickOffset:J.minorTickOffset)+_.currentValueTotalHeight)})}function setGripPosition(i,o,s){for(var x=i.select("rect."+J.gripRectClass),_=0,F=0;F<o._stepCount;F++)if(o._visibleSteps[F]._index===o.active){_=F;break}var N=normalizedValueToPosition(o,_/(o._stepCount-1));if(!o._invokingCommand){var j=x;s&&o.transition.duration>0&&(j=j.transition().duration(o.transition.duration).ease(o.transition.easing)),j.attr("transform",G(N-.5*J.gripWidth,o._dims.currentValueTotalHeight))}}function normalizedValueToPosition(i,o){var s=i._dims;return s.inputAreaStart+J.stepInset+(s.inputAreaLength-2*J.stepInset)*Math.min(1,Math.max(0,o))}function positionToNormalizedValue(i,o){var s=i._dims;return Math.min(1,Math.max(0,(o-J.stepInset-s.inputAreaStart)/(s.inputAreaLength-2*J.stepInset-2*s.inputAreaStart)))}function drawTouchRect(i,o,s){var x=s._dims,_=j.ensureSingle(i,"rect",J.railTouchRectClass,function(x){x.call(attachGripEvents,o,i,s).style("pointer-events","all")});_.attr({width:x.inputAreaLength,height:Math.max(x.inputAreaWidth,J.tickOffset+s.ticklen+x.labelHeight)}).call(F.fill,s.bgcolor).attr("opacity",0),N.setTranslate(_,0,x.currentValueTotalHeight)}function drawRail(i,o){var s=o._dims,x=s.inputAreaLength-2*J.railInset,_=j.ensureSingle(i,"rect",J.railRectClass);_.attr({width:x,height:J.railWidth,rx:J.railRadius,ry:J.railRadius,"shape-rendering":"crispEdges"}).call(F.stroke,o.bordercolor).call(F.fill,o.bgcolor).style("stroke-width",o.borderwidth+"px"),N.setTranslate(_,J.railInset,(s.inputAreaWidth-J.railWidth)*.5+s.currentValueTotalHeight)}i.exports=function(i){var o=i._context.staticPlot,s=i._fullLayout,F=function(i,o){for(var s=i[J.name],x=[],_=0;_<s.length;_++){var F=s[_];F.visible&&(F._gd=o,x.push(F))}return x}(s,i),G=s._infolayer.selectAll("g."+J.containerClassName).data(F.length>0?[0]:[]);function clearSlider(o){o._commandObserver&&(o._commandObserver.remove(),delete o._commandObserver),_.autoMargin(i,autoMarginId(o))}if(G.enter().append("g").classed(J.containerClassName,!0).style("cursor",o?null:"ew-resize"),G.exit().each(function(){x.select(this).selectAll("g."+J.groupClassName).each(clearSlider)}).remove(),0!==F.length){var X=G.selectAll("g."+J.groupClassName).data(F,keyFunction);X.enter().append("g").classed(J.groupClassName,!0),X.exit().each(clearSlider).remove();for(var $=0;$<F.length;$++)(function(i,o){var s=N.tester.selectAll("g."+J.labelGroupClass).data(o._visibleSteps);s.enter().append("g").classed(J.labelGroupClass,!0);var F=0,G=0;s.each(function(i){var s=drawLabel(x.select(this),{step:i},o).node();if(s){var _=N.bBox(s);G=Math.max(G,_.height),F=Math.max(F,_.width)}}),s.remove();var X=o._dims={};X.inputAreaWidth=Math.max(J.railWidth,J.gripHeight);var $=i._fullLayout._size;X.lx=$.l+$.w*o.x,X.ly=$.t+$.h*(1-o.y),"fraction"===o.lenmode?X.outerLength=Math.round($.w*o.len):X.outerLength=o.len,X.inputAreaStart=0,X.inputAreaLength=Math.round(X.outerLength-o.pad.l-o.pad.r);var ee=(X.inputAreaLength-2*J.stepInset)/(o._stepCount-1),en=F+J.labelPadding;if(X.labelStride=Math.max(1,Math.ceil(en/ee)),X.labelHeight=G,X.currentValueMaxWidth=0,X.currentValueHeight=0,X.currentValueTotalHeight=0,X.currentValueMaxLines=1,o.currentvalue.visible){var ei=N.tester.append("g");s.each(function(i){var s=drawCurrentValue(ei,o,i.label),x=s.node()&&N.bBox(s.node())||{width:0,height:0},_=Z.lineCount(s);X.currentValueMaxWidth=Math.max(X.currentValueMaxWidth,Math.ceil(x.width)),X.currentValueHeight=Math.max(X.currentValueHeight,Math.ceil(x.height)),X.currentValueMaxLines=Math.max(X.currentValueMaxLines,_)}),X.currentValueTotalHeight=X.currentValueHeight+o.currentvalue.offset,ei.remove()}X.height=X.currentValueTotalHeight+J.tickOffset+o.ticklen+J.labelOffset+X.labelHeight+o.pad.t+o.pad.b;var eo="left";j.isRightAnchor(o)&&(X.lx-=X.outerLength,eo="right"),j.isCenterAnchor(o)&&(X.lx-=X.outerLength/2,eo="center");var es="top";j.isBottomAnchor(o)&&(X.ly-=X.height,es="bottom"),j.isMiddleAnchor(o)&&(X.ly-=X.height/2,es="middle"),X.outerLength=Math.ceil(X.outerLength),X.height=Math.ceil(X.height),X.lx=Math.round(X.lx),X.ly=Math.round(X.ly);var el={y:o.y,b:X.height*er[es],t:X.height*et[es]};"fraction"===o.lenmode?(el.l=0,el.xl=o.x-o.len*et[eo],el.r=0,el.xr=o.x+o.len*er[eo]):(el.x=o.x,el.l=X.outerLength*et[eo],el.r=X.outerLength*er[eo]),_.autoMargin(i,autoMarginId(o),el)})(i,F[$]);X.each(function(o){var s,F,j=x.select(this);(function(i){var o=i._dims;o.labelSteps=[];for(var s=i._stepCount,x=0;x<s;x+=o.labelStride)o.labelSteps.push({fraction:x/(s-1),step:i._visibleSteps[x]})})(o),_.manageCommandObserver(i,o,o._visibleSteps,function(o){var s=j.data()[0];s.active!==o.index&&(s._dragging||setActive(i,j,s,o.index,!1,!0))}),s=x.select(this),(o.steps[o.active]||{}).visible||(o.active=o._visibleSteps[0]._index),s.call(drawCurrentValue,o).call(drawRail,o).call(drawLabelGroup,o).call(drawTicks,o).call(drawTouchRect,i,o).call(drawGrip,i,o),F=o._dims,N.setTranslate(s,F.lx+o.pad.l,F.ly+o.pad.t),s.call(setGripPosition,o,!1),s.call(drawCurrentValue,o)})}}},23243:function(i,o,s){"use strict";var x=s(98292);i.exports={moduleType:"component",name:x.name,layoutAttributes:s(75067),supplyLayoutDefaults:s(12343),draw:s(44504)}},92998:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(74875),N=s(73972),j=s(71828),G=j.strTranslate,Z=s(91424),X=s(7901),J=s(63893),$=s(37822),ee=s(18783).OPPOSITE_SIDE,et=/ [XY][0-9]* /;i.exports={draw:function(i,o,s){var er,en,ei=s.propContainer,eo=s.propName,es=s.placeholder,el=s.traceIndex,ec=s.avoid||{},eu=s.attributes,ef=s.transform,eh=s.containerGroup,ed=i._fullLayout,ep=1,eg=!1,em=ei.title,ey=(em&&em.text?em.text:"").trim(),ev=em&&em.font?em.font:{},ex=ev.family,e_=ev.size,ew=ev.color;"title.text"===eo?er="titleText":-1!==eo.indexOf("axis")?er="axisTitleText":eo.indexOf(!0)&&(er="colorbarTitleText");var eT=i._context.edits[er];""===ey?ep=0:ey.replace(et," % ")!==es.replace(et," % ")||(ep=.2,eg=!0,eT||(ey="")),s._meta?ey=j.templateString(ey,s._meta):ed._meta&&(ey=j.templateString(ey,ed._meta));var ek=ey||eT;eh||(eh=j.ensureSingle(ed._infolayer,"g","g-"+o),en=ed._hColorbarMoveTitle);var eA=eh.selectAll("text").data(ek?[0]:[]);if(eA.enter().append("text"),eA.text(ey).attr("class",o),eA.exit().remove(),!ek)return eh;function titleLayout(i){j.syncOrAsync([drawTitle,scootTitle],i)}function drawTitle(o){var s;return!ef&&en&&(ef={}),ef?(s="",ef.rotate&&(s+="rotate("+[ef.rotate,eu.x,eu.y]+")"),(ef.offset||en)&&(s+=G(0,(ef.offset||0)-(en||0)))):s=null,o.attr("transform",s),o.style({"font-family":ex,"font-size":x.round(e_,2)+"px",fill:X.rgb(ew),opacity:ep*X.opacity(ew),"font-weight":F.fontWeight}).attr(eu).call(J.convertToTspans,i),F.previousPromises(i)}function scootTitle(o){var s=x.select(o.node().parentNode);if(ec&&ec.selection&&ec.side&&ey){s.attr("transform",null);var F=ee[ec.side],N="left"===ec.side||"top"===ec.side?-1:1,X=_(ec.pad)?ec.pad:2,J=Z.bBox(s.node()),$={t:0,b:0,l:0,r:0},et=i._fullLayout._reservedMargin;for(var er in et)for(var en in et[er]){var eo=et[er][en];$[en]=Math.max($[en],eo)}var es={left:$.l,top:$.t,right:ed.width-$.r,bottom:ed.height-$.b},el=ec.maxShift||N*(es[ec.side]-J[ec.side]),eu=0;if(el<0)eu=el;else{var ef=ec.offsetLeft||0,eh=ec.offsetTop||0;J.left-=ef,J.right-=ef,J.top-=eh,J.bottom-=eh,ec.selection.each(function(){var i=Z.bBox(this);j.bBoxIntersect(J,i,X)&&(eu=Math.max(eu,N*(i[ec.side]-J[F])+X))}),eu=Math.min(el,eu),ei._titleScoot=Math.abs(eu)}if(eu>0||el<0){var ep={left:[-eu,0],right:[eu,0],top:[0,-eu],bottom:[0,eu]}[ec.side];s.attr("transform",G(ep[0],ep[1]))}}}return eA.call(titleLayout),eT&&(ey?eA.on(".opacity",null):(ep=0,eg=!0,eA.text(es).on("mouseover.opacity",function(){x.select(this).transition().duration($.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){x.select(this).transition().duration($.HIDE_PLACEHOLDER).style("opacity",0)})),eA.call(J.makeEditable,{gd:i}).on("edit",function(o){void 0!==el?N.call("_guiRestyle",i,eo,o,el):N.call("_guiRelayout",i,eo,o)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(titleLayout)}).on("input",function(i){this.text(i||" ").call(J.positionText,eu.x,eu.y)})),eA.classed("js-placeholder",eg),eh}}},7163:function(i,o,s){"use strict";var x=s(41940),_=s(22399),F=s(1426).extendFlat,N=s(30962).overrideAll,j=s(35025),G=s(44467).templatedArray,Z=G("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});i.exports=N(G("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:Z,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:F(j({editType:"arraydraw"}),{}),font:x({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:_.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(i){"use strict";i.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function(i,o,s){"use strict";var x=s(71828),_=s(85501),F=s(7163),N=s(75909).name,j=F.buttons;function menuDefaults(i,o,s){function coerce(s,_){return x.coerce(i,o,F,s,_)}coerce("visible",_(i,o,{name:"buttons",handleItemDefaults:buttonDefaults}).length>0)&&(coerce("active"),coerce("direction"),coerce("type"),coerce("showactive"),coerce("x"),coerce("y"),x.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),coerce("pad.t"),coerce("pad.r"),coerce("pad.b"),coerce("pad.l"),x.coerceFont(coerce,"font",s.font),coerce("bgcolor",s.paper_bgcolor),coerce("bordercolor"),coerce("borderwidth"))}function buttonDefaults(i,o){function coerce(s,_){return x.coerce(i,o,j,s,_)}coerce("visible","skip"===i.method||Array.isArray(i.args))&&(coerce("method"),coerce("args"),coerce("args2"),coerce("label"),coerce("execute"))}i.exports=function(i,o){_(i,o,{name:N,handleItemDefaults:menuDefaults})}},13689:function(i,o,s){"use strict";var x=s(39898),_=s(74875),F=s(7901),N=s(91424),j=s(71828),G=s(63893),Z=s(44467).arrayEditor,X=s(18783).LINE_SPACING,J=s(75909),$=s(25849);function keyFunction(i){return i._index}function isActive(i,o){return+i.attr(J.menuIndexAttrName)===o._index}function setActive(i,o,s,x,_,F,N,j){o.active=N,Z(i.layout,J.name,o).applyUpdate("active",N),"buttons"===o.type?drawButtons(i,x,null,null,o):"dropdown"!==o.type||(_.attr(J.menuIndexAttrName,"-1"),drawHeader(i,x,_,F,o),j||drawButtons(i,x,_,F,o))}function drawHeader(i,o,s,x,_){var F=j.ensureSingle(o,"g",J.headerClassName,function(i){i.style("pointer-events","all")}),G=_._dims,Z=_.active,X=_.buttons[Z]||J.blankHeaderOpts,$={y:_.pad.t,yPad:0,x:_.pad.l,xPad:0,index:0},ee={width:G.headerWidth,height:G.headerHeight};F.call(drawItem,_,X,i).call(setItemPosition,_,$,ee),j.ensureSingle(o,"text",J.headerArrowClassName,function(i){i.attr("text-anchor","end").call(N.font,_.font).text(J.arrowSymbol[_.direction])}).attr({x:G.headerWidth-J.arrowOffsetX+_.pad.l,y:G.headerHeight/2+J.textOffsetY+_.pad.t}),F.on("click",function(){s.call(removeAllButtons,String(isActive(s,_)?-1:_._index)),drawButtons(i,o,s,x,_)}),F.on("mouseover",function(){F.call(styleOnMouseOver)}),F.on("mouseout",function(){F.call(styleOnMouseOut,_)}),N.setTranslate(o,G.lx,G.ly)}function drawButtons(i,o,s,F,N){s||(s=o).attr("pointer-events","all");var G,Z,X=-1==+s.attr(J.menuIndexAttrName)&&"buttons"!==N.type?[]:N.buttons,$="dropdown"===N.type?J.dropdownButtonClassName:J.buttonClassName,ee=s.selectAll("g."+$).data(j.filterVisible(X)),et=ee.enter().append("g").classed($,!0),er=ee.exit();"dropdown"===N.type?(et.attr("opacity","0").transition().attr("opacity","1"),er.transition().attr("opacity","0").remove()):er.remove();var en=0,ei=0,eo=N._dims,es=-1!==["up","down"].indexOf(N.direction);"dropdown"===N.type&&(es?ei=eo.headerHeight+J.gapButtonHeader:en=eo.headerWidth+J.gapButtonHeader),"dropdown"===N.type&&"up"===N.direction&&(ei=-J.gapButtonHeader+J.gapButton-eo.openHeight),"dropdown"===N.type&&"left"===N.direction&&(en=-J.gapButtonHeader+J.gapButton-eo.openWidth);var el={x:eo.lx+en+N.pad.l,y:eo.ly+ei+N.pad.t,yPad:J.gapButton,xPad:J.gapButton,index:0},ec={l:el.x+N.borderwidth,t:el.y+N.borderwidth};ee.each(function(j,G){var Z=x.select(this);Z.call(drawItem,N,j,i).call(setItemPosition,N,el),Z.on("click",function(){x.event.defaultPrevented||(j.execute&&(j.args2&&N.active===G?(setActive(i,N,j,o,s,F,-1),_.executeAPICommand(i,j.method,j.args2)):(setActive(i,N,j,o,s,F,G),_.executeAPICommand(i,j.method,j.args))),i.emit("plotly_buttonclicked",{menu:N,button:j,active:N.active}))}),Z.on("mouseover",function(){Z.call(styleOnMouseOver)}),Z.on("mouseout",function(){Z.call(styleOnMouseOut,N),ee.call(styleButtons,N)})}),ee.call(styleButtons,N),es?(ec.w=Math.max(eo.openWidth,eo.headerWidth),ec.h=el.y-ec.t):(ec.w=el.x-ec.l,ec.h=Math.max(eo.openHeight,eo.headerHeight)),ec.direction=N.direction,F&&(ee.size()?function(i,o,s,x,_,F){var N,j,G,Z=_.direction,X=_._dims,$=_.active;if("up"===Z||"down"===Z)for(G=0,j=0;G<$;G++)j+=X.heights[G]+J.gapButton;else for(G=0,N=0;G<$;G++)N+=X.widths[G]+J.gapButton;x.enable(F,N,j),x.hbar&&x.hbar.attr("opacity","0").transition().attr("opacity","1"),x.vbar&&x.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,F,N,ec):(G=!!F.hbar,Z=!!F.vbar,G&&F.hbar.transition().attr("opacity","0").each("end",function(){G=!1,Z||F.disable()}),Z&&F.vbar.transition().attr("opacity","0").each("end",function(){Z=!1,G||F.disable()})))}function drawItem(i,o,s,x){i.call(drawItemRect,o).call(drawItemText,o,s,x)}function drawItemRect(i,o){j.ensureSingle(i,"rect",J.itemRectClassName,function(i){i.attr({rx:J.rx,ry:J.ry,"shape-rendering":"crispEdges"})}).call(F.stroke,o.bordercolor).call(F.fill,o.bgcolor).style("stroke-width",o.borderwidth+"px")}function drawItemText(i,o,s,x){var _=j.ensureSingle(i,"text",J.itemTextClassName,function(i){i.attr({"text-anchor":"start","data-notex":1})}),F=s.label,Z=x._fullLayout._meta;Z&&(F=j.templateString(F,Z)),_.call(N.font,o.font).text(F).call(G.convertToTspans,x)}function styleButtons(i,o){var s=o.active;i.each(function(i,_){var N=x.select(this);_===s&&o.showactive&&N.select("rect."+J.itemRectClassName).call(F.fill,J.activeColor)})}function styleOnMouseOver(i){i.select("rect."+J.itemRectClassName).call(F.fill,J.hoverColor)}function styleOnMouseOut(i,o){i.select("rect."+J.itemRectClassName).call(F.fill,o.bgcolor)}function autoMarginId(i){return J.autoMarginIdRoot+i._index}function setItemPosition(i,o,s,x){x=x||{};var _=i.select("."+J.itemRectClassName),F=i.select("."+J.itemTextClassName),j=o.borderwidth,Z=s.index,$=o._dims;N.setTranslate(i,j+s.x,j+s.y);var ee=-1!==["up","down"].indexOf(o.direction),et=x.height||(ee?$.heights[Z]:$.height1);_.attr({x:0,y:0,width:x.width||(ee?$.width1:$.widths[Z]),height:et});var er=o.font.size*X,en=G.lineCount(F);G.positionText(F,J.textOffsetX,et/2-(en-1)*er/2+J.textOffsetY),ee?s.y+=$.heights[Z]+s.yPad:s.x+=$.widths[Z]+s.xPad,s.index++}function removeAllButtons(i,o){i.attr(J.menuIndexAttrName,o||"-1").selectAll("g."+J.dropdownButtonClassName).remove()}i.exports=function(i){var o=i._fullLayout,s=j.filterVisible(o[J.name]);function clearAutoMargin(o){_.autoMargin(i,autoMarginId(o))}var F=o._menulayer.selectAll("g."+J.containerClassName).data(s.length>0?[0]:[]);if(F.enter().append("g").classed(J.containerClassName,!0).style("cursor","pointer"),F.exit().each(function(){x.select(this).selectAll("g."+J.headerGroupClassName).each(clearAutoMargin)}).remove(),0!==s.length){var Z=F.selectAll("g."+J.headerGroupClassName).data(s,keyFunction);Z.enter().append("g").classed(J.headerGroupClassName,!0);for(var ee=j.ensureSingle(F,"g",J.dropdownButtonGroupClassName,function(i){i.style("pointer-events","all")}),et=0;et<s.length;et++)(function(i,o){var s=o._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},F=N.tester.selectAll("g."+J.dropdownButtonClassName).data(j.filterVisible(o.buttons));F.enter().append("g").classed(J.dropdownButtonClassName,!0);var Z=-1!==["up","down"].indexOf(o.direction);F.each(function(_,F){var j=x.select(this);j.call(drawItem,o,_,i);var $=j.select("."+J.itemTextClassName),ee=Math.max(($.node()&&N.bBox($.node()).width)+J.textPadX,J.minWidth),et=Math.max(o.font.size*X*G.lineCount($),J.minHeight)+J.textOffsetY;et=Math.ceil(et),ee=Math.ceil(ee),s.widths[F]=ee,s.heights[F]=et,s.height1=Math.max(s.height1,et),s.width1=Math.max(s.width1,ee),Z?(s.totalWidth=Math.max(s.totalWidth,ee),s.openWidth=s.totalWidth,s.totalHeight+=et+J.gapButton,s.openHeight+=et+J.gapButton):(s.totalWidth+=ee+J.gapButton,s.openWidth+=ee+J.gapButton,s.totalHeight=Math.max(s.totalHeight,et),s.openHeight=s.totalHeight)}),Z?s.totalHeight-=J.gapButton:s.totalWidth-=J.gapButton,s.headerWidth=s.width1+J.arrowPadX,s.headerHeight=s.height1,"dropdown"===o.type&&(Z?(s.width1+=J.arrowPadX,s.totalHeight=s.height1):s.totalWidth=s.width1,s.totalWidth+=J.arrowPadX),F.remove();var $=s.totalWidth+o.pad.l+o.pad.r,ee=s.totalHeight+o.pad.t+o.pad.b,et=i._fullLayout._size;s.lx=et.l+et.w*o.x,s.ly=et.t+et.h*(1-o.y);var er="left";j.isRightAnchor(o)&&(s.lx-=$,er="right"),j.isCenterAnchor(o)&&(s.lx-=$/2,er="center");var en="top";j.isBottomAnchor(o)&&(s.ly-=ee,en="bottom"),j.isMiddleAnchor(o)&&(s.ly-=ee/2,en="middle"),s.totalWidth=Math.ceil(s.totalWidth),s.totalHeight=Math.ceil(s.totalHeight),s.lx=Math.round(s.lx),s.ly=Math.round(s.ly),_.autoMargin(i,autoMarginId(o),{x:o.x,y:o.y,l:$*(({right:1,center:.5})[er]||0),r:$*(({left:1,center:.5})[er]||0),b:ee*(({top:1,middle:.5})[en]||0),t:ee*(({bottom:1,middle:.5})[en]||0)})})(i,s[et]);var er="updatemenus"+o._uid,en=new $(i,ee,er);Z.enter().size()&&(ee.node().parentNode.appendChild(ee.node()),ee.call(removeAllButtons)),Z.exit().each(function(i){ee.call(removeAllButtons),clearAutoMargin(i)}).remove(),Z.each(function(o){var s=x.select(this),F="dropdown"===o.type?ee:null;_.manageCommandObserver(i,o,o.buttons,function(x){setActive(i,o,o.buttons[x.index],s,F,en,x.index,!0)}),"dropdown"===o.type?(drawHeader(i,s,ee,en,o),isActive(ee,o)&&drawButtons(i,s,ee,en,o)):drawButtons(i,s,null,null,o)})}}},20763:function(i,o,s){"use strict";var x=s(75909);i.exports={moduleType:"component",name:x.name,layoutAttributes:s(7163),supplyLayoutDefaults:s(64897),draw:s(13689)}},25849:function(i,o,s){"use strict";i.exports=ScrollBox;var x=s(39898),_=s(7901),F=s(91424),N=s(71828);function ScrollBox(i,o,s){this.gd=i,this.container=o,this.id=s,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}ScrollBox.barWidth=2,ScrollBox.barLength=20,ScrollBox.barRadius=2,ScrollBox.barPad=1,ScrollBox.barColor="#808BA4",ScrollBox.prototype.enable=function(i,o,s){var N,j,G,Z,X=this.gd._fullLayout,J=X.width,$=X.height;this.position=i;var ee=this.position.l,et=this.position.w,er=this.position.t,en=this.position.h,ei=this.position.direction,eo="down"===ei,es="left"===ei,el="up"===ei,ec=et,eu=en;eo||es||"right"===ei||el||(this.position.direction="down",eo=!0),eo||el?(j=(N=ee)+ec,eo?eu=(Z=Math.min((G=er)+eu,$))-G:(G=Math.max((Z=er+eu)-eu,0),eu=Z-G)):(Z=(G=er)+eu,es?(N=Math.max((j=ee+ec)-ec,0),ec=j-N):ec=(j=Math.min((N=ee)+ec,J))-N),this._box={l:N,t:G,w:ec,h:eu};var ef=et>ec,eh=ScrollBox.barLength+2*ScrollBox.barPad,ed=ScrollBox.barWidth+2*ScrollBox.barPad,ep=er+en;ep+ed>$&&(ep=$-ed);var eg=this.container.selectAll("rect.scrollbar-horizontal").data(ef?[0]:[]);eg.exit().on(".drag",null).remove(),eg.enter().append("rect").classed("scrollbar-horizontal",!0).call(_.fill,ScrollBox.barColor),ef?(this.hbar=eg.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:ee,y:ep,width:eh,height:ed}),this._hbarXMin=ee+eh/2,this._hbarTranslateMax=ec-eh):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var em=en>eu,ey=ScrollBox.barWidth+2*ScrollBox.barPad,ev=ScrollBox.barLength+2*ScrollBox.barPad,ex=ee+et;ex+ey>J&&(ex=J-ey);var e_=this.container.selectAll("rect.scrollbar-vertical").data(em?[0]:[]);e_.exit().on(".drag",null).remove(),e_.enter().append("rect").classed("scrollbar-vertical",!0).call(_.fill,ScrollBox.barColor),em?(this.vbar=e_.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:ex,y:er,width:ey,height:ev}),this._vbarYMin=er+ev/2,this._vbarTranslateMax=eu-ev):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ew=this.id,eT=N-.5,ek=em?j+ey+.5:j+.5,eA=G-.5,eS=ef?Z+ed+.5:Z+.5,eM=X._topdefs.selectAll("#"+ew).data(ef||em?[0]:[]);if(eM.exit().remove(),eM.enter().append("clipPath").attr("id",ew).append("rect"),ef||em?(this._clipRect=eM.select("rect").attr({x:Math.floor(eT),y:Math.floor(eA),width:Math.ceil(ek)-Math.floor(eT),height:Math.ceil(eS)-Math.floor(eA)}),this.container.call(F.setClipUrl,ew,this.gd),this.bg.attr({x:ee,y:er,width:et,height:en})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(F.setClipUrl,null),delete this._clipRect),ef||em){var eC=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(eC);var eE=x.behavior.drag().on("dragstart",function(){x.event.sourceEvent.preventDefault(),x.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));ef&&this.hbar.on(".drag",null).call(eE),em&&this.vbar.on(".drag",null).call(eE)}this.setTranslate(o,s)},ScrollBox.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(F.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},ScrollBox.prototype._onBoxDrag=function(){var i=this.translateX,o=this.translateY;this.hbar&&(i-=x.event.dx),this.vbar&&(o-=x.event.dy),this.setTranslate(i,o)},ScrollBox.prototype._onBoxWheel=function(){var i=this.translateX,o=this.translateY;this.hbar&&(i+=x.event.deltaY),this.vbar&&(o+=x.event.deltaY),this.setTranslate(i,o)},ScrollBox.prototype._onBarDrag=function(){var i=this.translateX,o=this.translateY;if(this.hbar){var s=i+this._hbarXMin,_=s+this._hbarTranslateMax;i=(N.constrain(x.event.x,s,_)-s)/(_-s)*(this.position.w-this._box.w)}if(this.vbar){var F=o+this._vbarYMin,j=F+this._vbarTranslateMax;o=(N.constrain(x.event.y,F,j)-F)/(j-F)*(this.position.h-this._box.h)}this.setTranslate(i,o)},ScrollBox.prototype.setTranslate=function(i,o){var s=this.position.w-this._box.w,x=this.position.h-this._box.h;if(i=N.constrain(i||0,0,s),o=N.constrain(o||0,0,x),this.translateX=i,this.translateY=o,this.container.call(F.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var _=i/s;this.hbar.call(F.setTranslate,i+_*this._hbarTranslateMax,o)}if(this.vbar){var j=o/x;this.vbar.call(F.setTranslate,i,o+j*this._vbarTranslateMax)}}},18783:function(i){"use strict";i.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(i){"use strict";i.exports={axisRefDescription:function(i,o,s){return["If set to a",i,"axis id (e.g. *"+i+"* or","*"+i+"2*), the `"+i+"` position refers to a",i,"coordinate. If set to *paper*, the `"+i+"`","position refers to the distance from the",o,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",o,"("+s+"). If set to a",i,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",o,"of the domain of that axis: e.g.,","*"+i+"2 domain* refers to the domain of the second",i," axis and a",i,"position of 0.5 refers to the","point between the",o,"and the",s,"of the domain of the","second",i,"axis."].join(" ")}}},22372:function(i){"use strict";i.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function(i){"use strict";i.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(i){"use strict";i.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(i){"use strict";i.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(i){"use strict";i.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function(i){"use strict";i.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(i){"use strict";i.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:""}},32396:function(i,o){"use strict";o.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],o.STYLE=o.CSS_DECLARATIONS.map(function(i){return i.join(": ")+"; "}).join("")},77922:function(i,o){"use strict";o.xmlns="http://www.w3.org/2000/xmlns/",o.svg="http://www.w3.org/2000/svg",o.xlink="http://www.w3.org/1999/xlink",o.svgAttrs={xmlns:o.svg,"xmlns:xlink":o.xlink}},8729:function(i,o,s){"use strict";o.version=s(11506).version,s(7417),s(98847);for(var x=s(73972),_=o.register=x.register,F=s(10641),N=Object.keys(F),j=0;j<N.length;j++){var G=N[j];"_"!==G.charAt(0)&&(o[G]=F[G]),_({moduleType:"apiMethod",name:G,fn:F[G]})}_(s(67368)),_([s(32745),s(2468),s(47322),s(89853),s(68804),s(20763),s(23243),s(13137),s(97218),s(83312),s(37369),s(21081),s(12311),s(2199),s(30211),s(64168)]),_([s(92177),s(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(_(window.PlotlyLocales),delete window.PlotlyLocales),o.Icons=s(24255);var Z=s(30211),X=s(74875);o.Plots={resize:X.resize,graphJson:X.graphJson,sendDataToCloud:X.sendDataToCloud},o.Fx={hover:Z.hover,unhover:Z.unhover,loneHover:Z.loneHover,loneUnhover:Z.loneUnhover},o.Snapshot=s(44511),o.PlotSchema=s(86281)},24255:function(i){"use strict";i.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs> <style>  .cls-0{fill:#000;}  .cls-1{fill:#FFF;}  .cls-2{fill:#F26;}  .cls-3{fill:#D69;}  .cls-4{fill:#BAC;}  .cls-5{fill:#9EF;} </style></defs> <title>plotly-logomark</title> <g id='symbol'>  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>  <circle class='cls-5' cx='102' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='54' r='6'/>  <circle class='cls-3' cx='54' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='54' r='6'/>  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/> </g></svg>"}}},99863:function(i,o){"use strict";o.isLeftAnchor=function(i){return"left"===i.xanchor||"auto"===i.xanchor&&i.x<=1/3},o.isCenterAnchor=function(i){return"center"===i.xanchor||"auto"===i.xanchor&&i.x>1/3&&i.x<2/3},o.isRightAnchor=function(i){return"right"===i.xanchor||"auto"===i.xanchor&&i.x>=2/3},o.isTopAnchor=function(i){return"top"===i.yanchor||"auto"===i.yanchor&&i.y>=2/3},o.isMiddleAnchor=function(i){return"middle"===i.yanchor||"auto"===i.yanchor&&i.y>1/3&&i.y<2/3},o.isBottomAnchor=function(i){return"bottom"===i.yanchor||"auto"===i.yanchor&&i.y<=1/3}},26348:function(i,o,s){"use strict";var x=s(64872),_=x.mod,F=x.modHalf,N=Math.PI,j=2*N;function isFullCircle(i){return Math.abs(i[1]-i[0])>j-1e-14}function angleDelta(i,o){return F(o-i,j)}function isAngleInsideSector(i,o){if(isFullCircle(o))return!0;o[0]<o[1]?(s=o[0],x=o[1]):(s=o[1],x=o[0]),(s=_(s,j))>(x=_(x,j))&&(x+=j);var s,x,F=_(i,j),N=F+j;return F>=s&&F<=x||N>=s&&N<=x}function _path(i,o,s,x,_,F,G){_=_||0,F=F||0;var Z,X,J,$,ee,et,er=isFullCircle([s,x]);function pt(i,o){return[i*Math.cos(o)+_,F-i*Math.sin(o)]}er?(Z=0,X=N,J=j):s<x?(Z=s,J=x):(Z=x,J=s),i<o?($=i,ee=o):($=o,ee=i);var en=Math.abs(J-Z)<=N?0:1;function arc(i,o,s){return"A"+[i,i]+" "+[0,en,s]+" "+pt(i,o)}return er?et=null===$?"M"+pt(ee,Z)+arc(ee,X,0)+arc(ee,J,0)+"Z":"M"+pt($,Z)+arc($,X,0)+arc($,J,0)+"ZM"+pt(ee,Z)+arc(ee,X,1)+arc(ee,J,1)+"Z":null===$?(et="M"+pt(ee,Z)+arc(ee,J,0),G&&(et+="L0,0Z")):et="M"+pt($,Z)+"L"+pt(ee,Z)+arc(ee,J,0)+"L"+pt($,J)+arc($,Z,1)+"Z",et}i.exports={deg2rad:function(i){return i/180*N},rad2deg:function(i){return i/N*180},angleDelta:angleDelta,angleDist:function(i,o){return Math.abs(angleDelta(i,o))},isFullCircle:isFullCircle,isAngleInsideSector:isAngleInsideSector,isPtInsideSector:function(i,o,s,x){var _,F;return!!isAngleInsideSector(o,x)&&(s[0]<s[1]?(_=s[0],F=s[1]):(_=s[1],F=s[0]),i>=_&&i<=F)},pathArc:function(i,o,s,x,_){return _path(null,i,o,s,x,_,0)},pathSector:function(i,o,s,x,_){return _path(null,i,o,s,x,_,1)},pathAnnulus:function(i,o,s,x,_,F){return _path(i,o,s,x,_,F,1)}}},73627:function(i,o){"use strict";var s=Array.isArray,x=ArrayBuffer,_=DataView;function isTypedArray(i){return x.isView(i)&&!(i instanceof _)}function isArrayOrTypedArray(i){return s(i)||isTypedArray(i)}function _rowLength(i,o,s){if(isArrayOrTypedArray(i)){if(!isArrayOrTypedArray(i[0]))return i.length;for(var x=s,_=0;_<i.length;_++)x=o(x,i[_].length);return x}return 0}o.isTypedArray=isTypedArray,o.isArrayOrTypedArray=isArrayOrTypedArray,o.isArray1D=function(i){return!isArrayOrTypedArray(i[0])},o.ensureArray=function(i,o){return s(i)||(i=[]),i.length=o,i},o.concat=function(){var i,o,x,_,F,N,j,G,Z=[],X=!0,J=0;for(x=0;x<arguments.length;x++)_=arguments[x],(N=_.length)&&(o?Z.push(_):(o=_,F=N),s(_)?i=!1:(X=!1,J?i!==_.constructor&&(i=!1):i=_.constructor),J+=N);if(!J)return[];if(!Z.length)return o;if(X)return o.concat.apply(o,Z);if(i){for((j=new i(J)).set(o),x=0;x<Z.length;x++)_=Z[x],j.set(_,F),F+=_.length;return j}for(G=0,j=Array(J);G<o.length;G++)j[G]=o[G];for(x=0;x<Z.length;x++){for(G=0,_=Z[x];G<_.length;G++)j[F+G]=_[G];F+=G}return j},o.maxRowLength=function(i){return _rowLength(i,Math.max,0)},o.minRowLength=function(i){return _rowLength(i,Math.min,1/0)}},95218:function(i,o,s){"use strict";var x=s(92770),_=s(50606).BADNUM,F=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;i.exports=function(i){return("string"==typeof i&&(i=i.replace(F,"")),x(i))?Number(i):_}},33306:function(i){"use strict";i.exports=function(i){var o=i._fullLayout;o._glcanvas&&o._glcanvas.size()&&o._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}},86367:function(i){"use strict";i.exports=function(i){i._responsiveChartHandler&&(window.removeEventListener("resize",i._responsiveChartHandler),delete i._responsiveChartHandler)}},96554:function(i,o,s){"use strict";var x=s(92770),_=s(84267),F=s(9012),N=s(63282),j=s(7901),G=s(37822).DESELECTDIM,Z=s(65487),X=s(30587).counter,J=s(64872).modHalf,$=s(73627).isArrayOrTypedArray;function validate(i,s){var x=o.valObjectMeta[s.valType];if(s.arrayOk&&$(i))return!0;if(x.validateFunction)return x.validateFunction(i,s);var _={},F=_;return x.coerceFunction(i,{set:function(i){F=i}},_,s),F!==_}o.valObjectMeta={data_array:{coerceFunction:function(i,o,s){$(i)?o.set(i):void 0!==s&&o.set(s)}},enumerated:{coerceFunction:function(i,o,s,x){x.coerceNumber&&(i=+i),-1===x.values.indexOf(i)?o.set(s):o.set(i)},validateFunction:function(i,o){o.coerceNumber&&(i=+i);for(var s=o.values,x=0;x<s.length;x++){var _=String(s[x]);if("/"===_.charAt(0)&&"/"===_.charAt(_.length-1)){if(new RegExp(_.substr(1,_.length-2)).test(i))return!0}else if(i===s[x])return!0}return!1}},boolean:{coerceFunction:function(i,o,s){!0===i||!1===i?o.set(i):o.set(s)}},number:{coerceFunction:function(i,o,s,_){!x(i)||void 0!==_.min&&i<_.min||void 0!==_.max&&i>_.max?o.set(s):o.set(+i)}},integer:{coerceFunction:function(i,o,s,_){i%1||!x(i)||void 0!==_.min&&i<_.min||void 0!==_.max&&i>_.max?o.set(s):o.set(+i)}},string:{coerceFunction:function(i,o,s,x){if("string"!=typeof i){var _="number"==typeof i;!0!==x.strict&&_?o.set(String(i)):o.set(s)}else x.noBlank&&!i?o.set(s):o.set(i)}},color:{coerceFunction:function(i,o,s){_(i).isValid()?o.set(i):o.set(s)}},colorlist:{coerceFunction:function(i,o,s){Array.isArray(i)&&i.length&&i.every(function(i){return _(i).isValid()})?o.set(i):o.set(s)}},colorscale:{coerceFunction:function(i,o,s){o.set(N.get(i,s))}},angle:{coerceFunction:function(i,o,s){"auto"===i?o.set("auto"):x(i)?o.set(J(+i,360)):o.set(s)}},subplotid:{coerceFunction:function(i,o,s,x){var _=x.regex||X(s);if("string"==typeof i&&_.test(i)){o.set(i);return}o.set(s)},validateFunction:function(i,o){var s=o.dflt;return i===s||"string"==typeof i&&!!X(s).test(i)}},flaglist:{coerceFunction:function(i,o,s,x){if(-1!==(x.extras||[]).indexOf(i)){o.set(i);return}if("string"!=typeof i){o.set(s);return}for(var _=i.split("+"),F=0;F<_.length;){var N=_[F];-1===x.flags.indexOf(N)||_.indexOf(N)<F?_.splice(F,1):F++}_.length?o.set(_.join("+")):o.set(s)}},any:{coerceFunction:function(i,o,s){void 0===i?o.set(s):o.set(i)}},info_array:{coerceFunction:function(i,s,x,_){function coercePart(i,s,x){var _;return void 0===x&&(x=s.dflt),o.valObjectMeta[s.valType].coerceFunction(i,{set:function(i){_=i}},x,s),_}var F,N,j,G,Z,X,J=2===_.dimensions||"1-2"===_.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){s.set(x);return}var $=_.items,ee=[],et=Array.isArray($),er=et&&J&&Array.isArray($[0]),en=J&&et&&!er,ei=et&&!en?$.length:i.length;if(x=Array.isArray(x)?x:[],J)for(F=0;F<ei;F++)for(N=0,ee[F]=[],j=Array.isArray(i[F])?i[F]:[],Z=en?$.length:et?$[F].length:j.length;N<Z;N++)G=en?$[N]:et?$[F][N]:$,void 0!==(X=coercePart(j[N],G,(x[F]||[])[N]))&&(ee[F][N]=X);else for(F=0;F<ei;F++)void 0!==(X=coercePart(i[F],et?$[F]:$,x[F]))&&(ee[F]=X);s.set(ee)},validateFunction:function(i,o){if(!Array.isArray(i))return!1;var s=o.items,x=Array.isArray(s),_=2===o.dimensions;if(!o.freeLength&&i.length!==s.length)return!1;for(var F=0;F<i.length;F++)if(_){if(!Array.isArray(i[F])||!o.freeLength&&i[F].length!==s[F].length)return!1;for(var N=0;N<i[F].length;N++)if(!validate(i[F][N],x?s[F][N]:s))return!1}else if(!validate(i[F],x?s[F]:s))return!1;return!0}}},o.coerce=function(i,s,x,_,F){var N=Z(x,_).get(),j=Z(i,_),G=Z(s,_),X=j.get(),J=s._template;if(void 0===X&&J&&(X=Z(J,_).get(),J=0),void 0===F&&(F=N.dflt),N.arrayOk&&$(X))return G.set(X),X;var ee=o.valObjectMeta[N.valType].coerceFunction;ee(X,G,F,N);var et=G.get();return J&&et===F&&!validate(X,N)&&(ee(X=Z(J,_).get(),G,F,N),et=G.get()),et},o.coerce2=function(i,s,x,_,F){var N=Z(i,_),j=o.coerce(i,s,x,_,F);return null!=N.get()&&j},o.coerceFont=function(i,o,s){var x={};return s=s||{},x.family=i(o+".family",s.family),x.size=i(o+".size",s.size),x.color=i(o+".color",s.color),x},o.coercePattern=function(i,o,s,x){if(i(o+".shape")){i(o+".solidity"),i(o+".size");var _="overlay"===i(o+".fillmode");if(!x){var F=i(o+".bgcolor",_?s:void 0);i(o+".fgcolor",_?j.contrast(F):s)}i(o+".fgopacity",_?.5:1)}},o.coerceHoverinfo=function(i,s,x){var _,N=s._module.attributes,j=N.hoverinfo?N:F,G=j.hoverinfo;if(1===x._dataLength){var Z="all"===G.dflt?G.flags.slice():G.dflt.split("+");Z.splice(Z.indexOf("name"),1),_=Z.join("+")}return o.coerce(i,s,j,"hoverinfo",_)},o.coerceSelectionMarkerOpacity=function(i,o){if(i.marker){var s,x,_=i.marker.opacity;void 0!==_&&($(_)||i.selected||i.unselected||(s=_,x=G*_),o("selected.marker.opacity",s),o("unselected.marker.opacity",x))}},o.validate=validate},41631:function(i,o,s){"use strict";var x,_,F=s(84096).i$,N=s(92770),j=s(47769),G=s(64872).mod,Z=s(50606),X=Z.BADNUM,J=Z.ONEDAY,$=Z.ONEHOUR,ee=Z.ONEMIN,et=Z.ONESEC,er=Z.EPOCHJD,en=s(73972),ei=s(84096).g0,eo=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,es=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,el=new Date().getFullYear()-70;function isWorldCalendar(i){return i&&en.componentsRegistry.calendars&&"string"==typeof i&&"gregorian"!==i}function lpad(i,o){return String(i+Math.pow(10,o)).substr(1)}o.dateTick0=function(i,s){var x,_=(x=!!s,isWorldCalendar(i)?x?en.getComponentMethod("calendars","CANONICAL_SUNDAY")[i]:en.getComponentMethod("calendars","CANONICAL_TICK")[i]:x?"2000-01-02":"2000-01-01");if(s<2)return _;var F=o.dateTime2ms(_,i);return F+=J*(s-1),o.ms2DateTime(F,0,i)},o.dfltRange=function(i){return isWorldCalendar(i)?en.getComponentMethod("calendars","DFLTRANGE")[i]:["2000-01-01","2001-01-01"]},o.isJSDate=function(i){return"object"==typeof i&&null!==i&&"function"==typeof i.getTime},o.dateTime2ms=function(i,s){if(o.isJSDate(i)){var F=i.getTimezoneOffset()*ee,N=(i.getUTCMinutes()-i.getMinutes())*ee+(i.getUTCSeconds()-i.getSeconds())*et+(i.getUTCMilliseconds()-i.getMilliseconds());if(N){var j=3*ee;F=F-j/2+G(N-F+j/2,j)}return(i=Number(i)-F)>=x&&i<=_?i:X}if("string"!=typeof i&&"number"!=typeof i)return X;i=String(i);var Z=isWorldCalendar(s),ei=i.charAt(0);Z&&("G"===ei||"g"===ei)&&(i=i.substr(1),s="");var ec=Z&&"chinese"===s.substr(0,7),eu=i.match(ec?es:eo);if(!eu)return X;var ef=eu[1],eh=eu[3]||"1",ed=Number(eu[5]||1),ep=Number(eu[7]||0),eg=Number(eu[9]||0),em=Number(eu[11]||0);if(Z){if(2===ef.length)return X;ef=Number(ef);try{var ey,ev=en.getComponentMethod("calendars","getCal")(s);if(ec){var ex="i"===eh.charAt(eh.length-1);eh=parseInt(eh,10),ey=ev.newDate(ef,ev.toMonthIndex(ef,eh,ex),ed)}else ey=ev.newDate(ef,Number(eh),ed)}catch(i){return X}return ey?(ey.toJD()-er)*J+ep*$+eg*ee+em*et:X}ef=2===ef.length?(Number(ef)+2e3-el)%100+el:Number(ef),eh-=1;var e_=new Date(Date.UTC(2e3,eh,ed,ep,eg));return(e_.setUTCFullYear(ef),e_.getUTCMonth()!==eh||e_.getUTCDate()!==ed)?X:e_.getTime()+em*et},x=o.MIN_MS=o.dateTime2ms("-9999"),_=o.MAX_MS=o.dateTime2ms("9999-12-31 23:59:59.9999"),o.isDateTime=function(i,s){return o.dateTime2ms(i,s)!==X};var ec=90*J,eu=3*$,ef=5*ee;function includeTime(i,o,s,x,_){if((o||s||x||_)&&(i+=" "+lpad(o,2)+":"+lpad(s,2),(x||_)&&(i+=":"+lpad(x,2),_))){for(var F=4;_%10==0;)F-=1,_/=10;i+="."+lpad(_,F)}return i}o.ms2DateTime=function(i,o,s){if("number"!=typeof i||!(i>=x&&i<=_))return X;o||(o=0);var F,N,j,Z,eo,es,el=Math.floor(10*G(i+.05,1)),eh=Math.round(i-el/10);if(isWorldCalendar(s)){var ed=Math.floor(eh/J)+er,ep=Math.floor(G(i,J));try{F=en.getComponentMethod("calendars","getCal")(s).fromJD(ed).formatDate("yyyy-mm-dd")}catch(i){F=ei("G%Y-%m-%d")(new Date(eh))}if("-"===F.charAt(0))for(;F.length<11;)F="-0"+F.substr(1);else for(;F.length<10;)F="0"+F;N=o<ec?Math.floor(ep/$):0,j=o<ec?Math.floor(ep%$/ee):0,Z=o<eu?Math.floor(ep%ee/et):0,eo=o<ef?ep%et*10+el:0}else es=new Date(eh),F=ei("%Y-%m-%d")(es),N=o<ec?es.getUTCHours():0,j=o<ec?es.getUTCMinutes():0,Z=o<eu?es.getUTCSeconds():0,eo=o<ef?10*es.getUTCMilliseconds()+el:0;return includeTime(F,N,j,Z,eo)},o.ms2DateTimeLocal=function(i){if(!(i>=x+J&&i<=_-J))return X;var o=Math.floor(10*G(i+.05,1)),s=new Date(Math.round(i-o/10));return includeTime(F("%Y-%m-%d")(s),s.getHours(),s.getMinutes(),s.getSeconds(),10*s.getUTCMilliseconds()+o)},o.cleanDate=function(i,s,x){if(i===X)return s;if(o.isJSDate(i)||"number"==typeof i&&isFinite(i)){if(isWorldCalendar(x))return j.error("JS Dates and milliseconds are incompatible with world calendars",i),s;if(!(i=o.ms2DateTimeLocal(+i))&&void 0!==s)return s}else if(!o.isDateTime(i,x))return j.error("unrecognized date",i),s;return i};var eh=/%\d?f/g,ed=/%h/g,ep={1:"1",2:"1",3:"2",4:"2"};function modDateFormat(i,o,s,x){i=i.replace(eh,function(i){var s=Math.min(+i.charAt(1)||6,6);return(o/1e3%1+2).toFixed(s).substr(2).replace(/0+$/,"")||"0"});var _=new Date(Math.floor(o+.05));if(i=i.replace(ed,function(){return ep[s("%q")(_)]}),isWorldCalendar(x))try{i=en.getComponentMethod("calendars","worldCalFmt")(i,o,x)}catch(i){return"Invalid"}return s(i)(_)}var eg=[59,59.9,59.99,59.999,59.9999];o.formatDate=function(i,o,s,x,_,F){if(_=isWorldCalendar(_)&&_,!o){if("y"===s)o=F.year;else if("m"===s)o=F.month;else{if("d"!==s)return function(i,o){var s=G(i+.05,J),x=lpad(Math.floor(s/$),2)+":"+lpad(G(Math.floor(s/ee),60),2);if("M"!==o){N(o)||(o=0);var _=(100+Math.min(G(i/et,60),eg[o])).toFixed(o).substr(1);o>0&&(_=_.replace(/0+$/,"").replace(/[\.]$/,"")),x+=":"+_}return x}(i,s)+"\n"+modDateFormat(F.dayMonthYear,i,x,_);o=F.dayMonth+"\n"+F.year}}return modDateFormat(o,i,x,_)};var em=3*J;o.incrementMonth=function(i,o,s){s=isWorldCalendar(s)&&s;var x=G(i,J);if(i=Math.round(i-x),s)try{var _=Math.round(i/J)+er,F=en.getComponentMethod("calendars","getCal")(s),N=F.fromJD(_);return o%12?F.add(N,o,"m"):F.add(N,o/12,"y"),(N.toJD()-er)*J+x}catch(o){j.error("invalid ms "+i+" in calendar "+s)}var Z=new Date(i+em);return Z.setUTCMonth(Z.getUTCMonth()+o)+x-em},o.findExactDates=function(i,o){for(var s,x,_=0,F=0,j=0,G=0,Z=isWorldCalendar(o)&&en.getComponentMethod("calendars","getCal")(o),X=0;X<i.length;X++){if(!N(x=i[X])){G++;continue}if(!(x%J)){if(Z)try{s=Z.fromJD(x/J+er),1===s.day()?1===s.month()?_++:F++:j++}catch(i){}else 1===(s=new Date(x)).getUTCDate()?0===s.getUTCMonth()?_++:F++:j++}}F+=_,j+=F;var $=i.length-G;return{exactYears:_/$,exactMonths:F/$,exactDays:j/$}}},24401:function(i,o,s){"use strict";var x=s(39898),_=s(47769),F=s(35657),N=s(79576);function removeElement(i){var o=i&&i.parentNode;o&&o.removeChild(i)}function addRelatedStyleRule(i,o,s){var x="plotly.js-style-"+i,F=document.getElementById(x);F||((F=document.createElement("style")).setAttribute("id",x),F.appendChild(document.createTextNode("")),document.head.appendChild(F));var N=F.sheet;N.insertRule?N.insertRule(o+"{"+s+"}",0):N.addRule?N.addRule(o,s,0):_.warn("addStyleRule failed")}function getElementTransformMatrix(i){var o=window.getComputedStyle(i,null),s=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function getElementAndAncestors(i){for(var o,s=[];(o=i)&&(o instanceof Element||o instanceof HTMLElement);)s.push(i),i=i.parentNode;return s}i.exports={getGraphDiv:function(i){var o;if("string"==typeof i){if(null===(o=document.getElementById(i)))throw Error("No DOM element with id '"+i+"' exists on the page.");return o}if(null==i)throw Error("DOM element provided is null or undefined");return i},isPlotDiv:function(i){var o=x.select(i);return o.node() instanceof HTMLElement&&o.size()&&o.classed("js-plotly-plot")},removeElement:removeElement,addStyleRule:function(i,o){addRelatedStyleRule("global",i,o)},addRelatedStyleRule:addRelatedStyleRule,deleteRelatedStyleRule:function(i){var o=document.getElementById("plotly.js-style-"+i);o&&removeElement(o)},getFullTransformMatrix:function(i){var o=getElementAndAncestors(i),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return o.forEach(function(i){var o=getElementTransformMatrix(i);if(o){var x=F.convertCssMatrix(o);s=N.multiply(s,s,x)}}),s},getElementTransformMatrix:getElementTransformMatrix,getElementAndAncestors:getElementAndAncestors,equalDomRects:function(i,o){return i&&o&&i.top===o.top&&i.left===o.left&&i.right===o.right&&i.bottom===o.bottom}}},11086:function(i,o,s){"use strict";var x=s(15398).EventEmitter;i.exports={init:function(i){if(i._ev instanceof x)return i;var o=new x,s=new x;return i._ev=o,i._internalEv=s,i.on=o.on.bind(o),i.once=o.once.bind(o),i.removeListener=o.removeListener.bind(o),i.removeAllListeners=o.removeAllListeners.bind(o),i._internalOn=s.on.bind(s),i._internalOnce=s.once.bind(s),i._removeInternalListener=s.removeListener.bind(s),i._removeAllInternalListeners=s.removeAllListeners.bind(s),i.emit=function(x,_){"undefined"!=typeof jQuery&&jQuery(i).trigger(x,_),o.emit(x,_),s.emit(x,_)},i},triggerHandler:function(i,o,s){"undefined"!=typeof jQuery&&(x=jQuery(i).triggerHandler(o,s));var x,_,F,N=i._ev;if(!N)return x;var j=N._events[o];if(!j)return x;function apply(i){return i.listener?(N.removeListener(o,i.listener),i.fired)?void 0:(i.fired=!0,i.listener.apply(N,[s])):i.apply(N,[s])}for(F=0,j=Array.isArray(j)?j:[j];F<j.length-1;F++)apply(j[F]);return _=apply(j[F]),void 0!==x?x:_},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}}},1426:function(i,o,s){"use strict";var x=s(41965),_=Array.isArray;function _extend(i,o,s,F){var N,j,G,Z,X,J,$=i[0],ee=i.length;if(2===ee&&_($)&&_(i[1])&&0===$.length){if(function(i,o){var s,x;for(s=0;s<i.length;s++){if(null!==(x=i[s])&&"object"==typeof x)return!1;void 0!==x&&(o[s]=x)}return!0}(i[1],$))return $;$.splice(0,$.length)}for(var et=1;et<ee;et++)for(j in N=i[et])G=$[j],Z=N[j],F&&_(Z)?$[j]=Z:o&&Z&&(x(Z)||(X=_(Z)))?(X?(X=!1,J=G&&_(G)?G:[]):J=G&&x(G)?G:{},$[j]=_extend([J,Z],o,s,F)):(void 0!==Z||s)&&($[j]=Z);return $}o.extendFlat=function(){return _extend(arguments,!1,!1,!1)},o.extendDeep=function(){return _extend(arguments,!0,!1,!1)},o.extendDeepAll=function(){return _extend(arguments,!0,!0,!1)},o.extendDeepNoArrays=function(){return _extend(arguments,!0,!1,!0)}},75744:function(i){"use strict";i.exports=function(i){for(var o={},s=[],x=0,_=0;_<i.length;_++){var F=i[_];1!==o[F]&&(o[F]=1,s[x++]=F)}return s}},76756:function(i){"use strict";function baseFilter(i){return!0===i.visible}function calcDataFilter(i){var o=i[0].trace;return!0===o.visible&&0!==o._length}i.exports=function(i){for(var o=Array.isArray(i)&&Array.isArray(i[0])&&i[0][0]&&i[0][0].trace?calcDataFilter:baseFilter,s=[],x=0;x<i.length;x++){var _=i[x];o(_)&&s.push(_)}return s}},41327:function(i,o,s){"use strict";var x=s(39898),_=s(24138),F=s(30774),N=s(29261),j=s(85268),G=s(23389),Z=s(47769),X=s(41965),J=s(65487),$=s(61082),ee=Object.keys(_),et={"ISO-3":G,"USA-states":G,"country names":function(i){for(var o=0;o<ee.length;o++){var s=ee[o];if(new RegExp(_[s]).test(i.trim().toLowerCase()))return s}return Z.log("Unrecognized country name: "+i+"."),!1}};function getTraceGeojson(i){var o=i.geojson,s=window.PlotlyGeoAssets||{},x="string"==typeof o?s[o]:o;return X(x)?x:(Z.error("Oops ... something went wrong when fetching "+o),!1)}i.exports={locationToFeature:function(i,o,s){if(!o||"string"!=typeof o)return!1;var x,_,F,N=et[i](o);if(N){if("USA-states"===i)for(F=0,x=[];F<s.length;F++)(_=s[F]).properties&&_.properties.gu&&"USA"===_.properties.gu&&x.push(_);else x=s;for(F=0;F<x.length;F++)if((_=x[F]).id===N)return _;Z.log(["Location with id",N,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(i){var o,s,x,_,F=i.geometry,N=F.coordinates,j=i.id,G=[];function doesCrossAntiMerdian(i){for(var o=0;o<i.length-1;o++)if(i[o][0]>0&&i[o+1][0]<0)return o;return null}switch(o="RUS"===j||"FJI"===j?function(i){var o;if(null===doesCrossAntiMerdian(i))o=i;else for(_=0,o=Array(i.length);_<i.length;_++)o[_]=[i[_][0]<0?i[_][0]+360:i[_][0],i[_][1]];G.push($.tester(o))}:"ATA"===j?function(i){var o=doesCrossAntiMerdian(i);if(null===o)return G.push($.tester(i));var s=Array(i.length+1),x=0;for(_=0;_<i.length;_++)_>o?s[x++]=[i[_][0]+360,i[_][1]]:_===o?(s[x++]=i[_],s[x++]=[i[_][0],-90]):s[x++]=i[_];var F=$.tester(s);F.pts.pop(),G.push(F)}:function(i){G.push($.tester(i))},F.type){case"MultiPolygon":for(s=0;s<N.length;s++)for(x=0;x<N[s].length;x++)o(N[s][x]);break;case"Polygon":for(s=0;s<N.length;s++)o(N[s])}return G},getTraceGeojson:getTraceGeojson,extractTraceFeature:function(i){var o,s=i[0].trace,x=getTraceGeojson(s);if(!x)return!1;var _={},j=[];for(o=0;o<s._length;o++){var G=i[o];(G.loc||0===G.loc)&&(_[G.loc]=G)}function appendFeature(i){var o=J(i,s.featureidkey||"id").get(),x=_[o];if(x){var G=i.geometry;if("Polygon"===G.type||"MultiPolygon"===G.type){var X={type:"Feature",id:o,geometry:G,properties:{}};X.properties.ct=function(i){var o,s=i.geometry;if("MultiPolygon"===s.type)for(var x=s.coordinates,_=0,j=0;j<x.length;j++){var G={type:"Polygon",coordinates:x[j]},Z=F.default(G);Z>_&&(_=Z,o=G)}else o=s;return N.default(o).geometry.coordinates}(X),x.fIn=i,x.fOut=X,j.push(X)}else Z.log(["Location",x.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[o]}switch(x.type){case"FeatureCollection":var X=x.features;for(o=0;o<X.length;o++)appendFeature(X[o]);break;case"Feature":appendFeature(x);break;default:return Z.warn(["Invalid GeoJSON type",(x.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var $ in _)Z.log(["Location *"+$+"*","does not have a matching feature with id-key","*"+s.featureidkey+"*."].join(" "));return j},fetchTraceGeoData:function(i){for(var o=window.PlotlyGeoAssets||{},s=[],_=0;_<i.length;_++){var F=i[_][0].trace.geojson;"string"==typeof F&&(o[F]?"pending"===o[F]&&s.push(function(i){return new Promise(function(s,x){var _=0,F=setInterval(function(){return o[i]&&"pending"!==o[i]?(clearInterval(F),s(o[i])):_>100?(clearInterval(F),x("Unexpected error while fetching from "+i)):void _++},50)})}(F)):(o[F]="pending",s.push(function(i){return new Promise(function(s,_){x.json(i,function(x,F){return x?(delete o[i],_(Error(404===x.status?'GeoJSON at URL "'+i+'" does not exist.':"Unexpected error while fetching from "+i))):(o[i]=F,s(F))})})}(F))))}return s},computeBbox:function(i){return j.default(i)}}},18214:function(i,o,s){"use strict";var x=s(50606).BADNUM;o.calcTraceToLineCoords=function(i){for(var o=i[0].trace.connectgaps,s=[],_=[],F=0;F<i.length;F++){var N=i[F].lonlat;N[0]!==x?_.push(N):!o&&_.length>0&&(s.push(_),_=[])}return _.length>0&&s.push(_),s},o.makeLine=function(i){return 1===i.length?{type:"LineString",coordinates:i[0]}:{type:"MultiLineString",coordinates:i}},o.makePolygon=function(i){if(1===i.length)return{type:"Polygon",coordinates:i};for(var o=Array(i.length),s=0;s<i.length;s++)o[s]=[i[s]];return{type:"MultiPolygon",coordinates:o}},o.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(i,o,s){"use strict";var x,_,F,N=s(64872).mod;function segmentsIntersect(i,o,s,x,_,F,N,j){var G=s-i,Z=_-i,X=N-_,J=x-o,$=F-o,ee=j-F,et=G*ee-X*J;if(0===et)return null;var er=(Z*ee-X*$)/et,en=(Z*J-G*$)/et;return en<0||en>1||er<0||er>1?null:{x:i+G*er,y:o+J*er}}function perpDistance2(i,o,s,x,_){var F=x*i+_*o;if(F<0)return x*x+_*_;if(F>s){var N=x-i,j=_-o;return N*N+j*j}var G=x*o-_*i;return G*G/s}o.segmentsIntersect=segmentsIntersect,o.segmentDistance=function(i,o,s,x,_,F,N,j){if(segmentsIntersect(i,o,s,x,_,F,N,j))return 0;var G=s-i,Z=x-o,X=N-_,J=j-F,$=G*G+Z*Z,ee=X*X+J*J;return Math.sqrt(Math.min(perpDistance2(G,Z,$,_-i,F-o),perpDistance2(G,Z,$,N-i,j-o),perpDistance2(X,J,ee,i-_,o-F),perpDistance2(X,J,ee,s-_,x-F)))},o.getTextLocation=function(i,o,s,j){if((i!==_||j!==F)&&(x={},_=i,F=j),x[s])return x[s];var G=i.getPointAtLength(N(s-j/2,o)),Z=i.getPointAtLength(N(s+j/2,o)),X=Math.atan((Z.y-G.y)/(Z.x-G.x)),J=i.getPointAtLength(N(s,o)),$={x:(4*J.x+G.x+Z.x)/6,y:(4*J.y+G.y+Z.y)/6,theta:X};return x[s]=$,$},o.clearLocationCache=function(){_=null},o.getVisibleSegment=function(i,o,s){var x,_,F=o.left,N=o.right,j=o.top,G=o.bottom,Z=0,X=i.getTotalLength(),J=X;function getDistToPlot(o){var s=i.getPointAtLength(o);0===o?x=s:o===X&&(_=s);var Z=s.x<F?F-s.x:s.x>N?s.x-N:0,J=s.y<j?j-s.y:s.y>G?s.y-G:0;return Math.sqrt(Z*Z+J*J)}for(var $=getDistToPlot(Z);$;){if((Z+=$+s)>J)return;$=getDistToPlot(Z)}for($=getDistToPlot(J);$;){if(Z>(J-=$+s))return;$=getDistToPlot(J)}return{min:Z,max:J,len:J-Z,total:X,isClosed:0===Z&&J===X&&.1>Math.abs(x.x-_.x)&&.1>Math.abs(x.y-_.y)}},o.findPointOnPath=function(i,o,s,x){for(var _,F,N,j=(x=x||{}).pathLength||i.getTotalLength(),G=x.tolerance||.001,Z=x.iterationLimit||30,X=i.getPointAtLength(0)[s]>i.getPointAtLength(j)[s]?-1:1,J=0,$=0,ee=j;J<Z&&(_=($+ee)/2,!(Math.abs(N=(F=i.getPointAtLength(_))[s]-o)<G));)X*N>0?ee=_:$=_,J++;return F}},81697:function(i,o,s){"use strict";var x=s(92770),_=s(84267),F=s(25075),N=s(21081),j=s(22399).defaultLine,G=s(73627).isArrayOrTypedArray,Z=F(j);function validateColor(i){if(x(i))return Z;var o=F(i);return o.length?o:Z}function validateOpacity(i){return x(i)?i:1}i.exports={formatColor:function(i,o,s){var x,_,j,X,J,$,ee=i.color,et=G(ee),er=G(o),en=N.extractOpts(i),ei=[];if(_=void 0!==en.colorscale?N.makeColorScaleFuncFromTrace(i):validateColor,j=et?function(i,o){return void 0===i[o]?Z:F(_(i[o]))}:validateColor,X=er?function(i,o){return void 0===i[o]?1:validateOpacity(i[o])}:validateOpacity,et||er)for(var eo=0;eo<s;eo++)J=j(ee,eo),$=X(o,eo),ei[eo]=(J[3]*=$,J);else x=F(ee),x[3]*=o,ei=x;return ei},parseColorScale:function(i){var o=N.extractOpts(i),s=o.colorscale;return o.reversescale&&(s=N.flipScale(o.colorscale)),s.map(function(i){var o=i[0],s=_(i[1]).toRgb();return{index:o,rgb:[s.r,s.g,s.b,s.a]}})}}},28984:function(i,o,s){"use strict";var x=s(23389);function wrap(i){return[i]}i.exports={keyFun:function(i){return i.key},repeat:wrap,descend:x,wrap:wrap,unwrap:function(i){return i[0]}}},23389:function(i){"use strict";i.exports=function(i){return i}},39240:function(i){"use strict";i.exports=function(i,o){if(!o)return i;var s=1/Math.abs(o),x=s>1?(s*i+s*o)/s:i+o,_=String(x).length;if(_>16){var F=String(o).length;if(_>=String(i).length+F){var N=parseFloat(x).toPrecision(12);-1===N.indexOf("e+")&&(x=+N)}}return x}},71828:function(i,o,s){"use strict";var x=s(39898),_=s(84096).g0,F=s(60721).WU,N=s(92770),j=s(50606),G=j.FP_SAFE,Z=-G,X=j.BADNUM,J=i.exports={};J.adjustFormat=function(i){return!i||/^\d[.]\df/.test(i)||/[.]\d%/.test(i)?i:"0.f"===i?"~f":/^\d%/.test(i)?"~%":/^\ds/.test(i)?"~s":!/^[~,.0$]/.test(i)&&/[&fps]/.test(i)?"~"+i:i};var $={};J.warnBadFormat=function(i){var o=String(i);$[o]||($[o]=1,J.warn('encountered bad format: "'+o+'"'))},J.noFormat=function(i){return String(i)},J.numberFormat=function(i){var o;try{o=F(J.adjustFormat(i))}catch(o){return J.warnBadFormat(i),J.noFormat}return o},J.nestedProperty=s(65487),J.keyedContainer=s(66636),J.relativeAttr=s(6962),J.isPlainObject=s(41965),J.toLogRange=s(58163),J.relinkPrivateKeys=s(51332);var ee=s(73627);J.isTypedArray=ee.isTypedArray,J.isArrayOrTypedArray=ee.isArrayOrTypedArray,J.isArray1D=ee.isArray1D,J.ensureArray=ee.ensureArray,J.concat=ee.concat,J.maxRowLength=ee.maxRowLength,J.minRowLength=ee.minRowLength;var et=s(64872);J.mod=et.mod,J.modHalf=et.modHalf;var er=s(96554);J.valObjectMeta=er.valObjectMeta,J.coerce=er.coerce,J.coerce2=er.coerce2,J.coerceFont=er.coerceFont,J.coercePattern=er.coercePattern,J.coerceHoverinfo=er.coerceHoverinfo,J.coerceSelectionMarkerOpacity=er.coerceSelectionMarkerOpacity,J.validate=er.validate;var en=s(41631);J.dateTime2ms=en.dateTime2ms,J.isDateTime=en.isDateTime,J.ms2DateTime=en.ms2DateTime,J.ms2DateTimeLocal=en.ms2DateTimeLocal,J.cleanDate=en.cleanDate,J.isJSDate=en.isJSDate,J.formatDate=en.formatDate,J.incrementMonth=en.incrementMonth,J.dateTick0=en.dateTick0,J.dfltRange=en.dfltRange,J.findExactDates=en.findExactDates,J.MIN_MS=en.MIN_MS,J.MAX_MS=en.MAX_MS;var ei=s(65888);J.findBin=ei.findBin,J.sorterAsc=ei.sorterAsc,J.sorterDes=ei.sorterDes,J.distinctVals=ei.distinctVals,J.roundUp=ei.roundUp,J.sort=ei.sort,J.findIndexOfMin=ei.findIndexOfMin,J.sortObjectKeys=s(78607);var eo=s(80038);J.aggNums=eo.aggNums,J.len=eo.len,J.mean=eo.mean,J.median=eo.median,J.midRange=eo.midRange,J.variance=eo.variance,J.stdev=eo.stdev,J.interp=eo.interp;var es=s(35657);J.init2dArray=es.init2dArray,J.transposeRagged=es.transposeRagged,J.dot=es.dot,J.translationMatrix=es.translationMatrix,J.rotationMatrix=es.rotationMatrix,J.rotationXYMatrix=es.rotationXYMatrix,J.apply3DTransform=es.apply3DTransform,J.apply2DTransform=es.apply2DTransform,J.apply2DTransform2=es.apply2DTransform2,J.convertCssMatrix=es.convertCssMatrix,J.inverseTransformMatrix=es.inverseTransformMatrix;var el=s(26348);J.deg2rad=el.deg2rad,J.rad2deg=el.rad2deg,J.angleDelta=el.angleDelta,J.angleDist=el.angleDist,J.isFullCircle=el.isFullCircle,J.isAngleInsideSector=el.isAngleInsideSector,J.isPtInsideSector=el.isPtInsideSector,J.pathArc=el.pathArc,J.pathSector=el.pathSector,J.pathAnnulus=el.pathAnnulus;var ec=s(99863);J.isLeftAnchor=ec.isLeftAnchor,J.isCenterAnchor=ec.isCenterAnchor,J.isRightAnchor=ec.isRightAnchor,J.isTopAnchor=ec.isTopAnchor,J.isMiddleAnchor=ec.isMiddleAnchor,J.isBottomAnchor=ec.isBottomAnchor;var eu=s(87642);J.segmentsIntersect=eu.segmentsIntersect,J.segmentDistance=eu.segmentDistance,J.getTextLocation=eu.getTextLocation,J.clearLocationCache=eu.clearLocationCache,J.getVisibleSegment=eu.getVisibleSegment,J.findPointOnPath=eu.findPointOnPath;var ef=s(1426);J.extendFlat=ef.extendFlat,J.extendDeep=ef.extendDeep,J.extendDeepAll=ef.extendDeepAll,J.extendDeepNoArrays=ef.extendDeepNoArrays;var eh=s(47769);J.log=eh.log,J.warn=eh.warn,J.error=eh.error;var ed=s(30587);J.counterRegex=ed.counter;var ep=s(79990);J.throttle=ep.throttle,J.throttleDone=ep.done,J.clearThrottle=ep.clear;var eg=s(24401);function makePtIndex2PtNumber(i){var o={};for(var s in i)for(var x=i[s],_=0;_<x.length;_++)o[x[_]]=+s;return o}J.getGraphDiv=eg.getGraphDiv,J.isPlotDiv=eg.isPlotDiv,J.removeElement=eg.removeElement,J.addStyleRule=eg.addStyleRule,J.addRelatedStyleRule=eg.addRelatedStyleRule,J.deleteRelatedStyleRule=eg.deleteRelatedStyleRule,J.getFullTransformMatrix=eg.getFullTransformMatrix,J.getElementTransformMatrix=eg.getElementTransformMatrix,J.getElementAndAncestors=eg.getElementAndAncestors,J.equalDomRects=eg.equalDomRects,J.clearResponsive=s(86367),J.preserveDrawingBuffer=s(45142),J.makeTraceGroups=s(77310),J._=s(15867),J.notifier=s(75046),J.filterUnique=s(75744),J.filterVisible=s(76756),J.pushUnique=s(75138),J.increment=s(39240),J.cleanNumber=s(95218),J.ensureNumber=function(i){return N(i)?(i=Number(i))>G||i<Z?X:i:X},J.isIndex=function(i,o){return(void 0===o||!(i>=o))&&N(i)&&i>=0&&i%1==0},J.noop=s(64213),J.identity=s(23389),J.repeat=function(i,o){for(var s=Array(o),x=0;x<o;x++)s[x]=i;return s},J.swapAttrs=function(i,o,s,x){s||(s="x"),x||(x="y");for(var _=0;_<o.length;_++){var F=o[_],N=J.nestedProperty(i,F.replace("?",s)),j=J.nestedProperty(i,F.replace("?",x)),G=N.get();N.set(j.get()),j.set(G)}},J.raiseToTop=function(i){i.parentNode.appendChild(i)},J.cancelTransition=function(i){return i.transition().duration(0)},J.constrain=function(i,o,s){return o>s?Math.max(s,Math.min(o,i)):Math.max(o,Math.min(s,i))},J.bBoxIntersect=function(i,o,s){return s=s||0,i.left<=o.right+s&&o.left<=i.right+s&&i.top<=o.bottom+s&&o.top<=i.bottom+s},J.simpleMap=function(i,o,s,x,_){for(var F=i.length,N=Array(F),j=0;j<F;j++)N[j]=o(i[j],s,x,_);return N},J.randstr=function randstr(i,o,s,x){if(s||(s=16),void 0===o&&(o=24),o<=0)return"0";var _,F=Math.log(Math.pow(2,o))/Math.log(s),N="";for(_=2;F===1/0;_*=2)F=Math.log(Math.pow(2,o/_))/Math.log(s)*_;var j=F-Math.floor(F);for(_=0;_<Math.floor(F);_++)N=Math.floor(Math.random()*s).toString(s)+N;j&&(N=Math.floor(Math.random()*Math.pow(s,j)).toString(s)+N);var G=parseInt(N,s);return i&&i[N]||G!==1/0&&G>=Math.pow(2,o)?x>10?(J.warn("randstr failed uniqueness"),N):randstr(i,o,s,(x||0)+1):N},J.OptionControl=function(i,o){i||(i={}),o||(o="opt");var s={};return s.optionList=[],s._newoption=function(x){x[o]=i,s[x.name]=x,s.optionList.push(x)},s["_"+o]=i,s},J.smooth=function(i,o){if((o=Math.round(o)||0)<2)return i;var s,x,_,F,N=i.length,j=2*N,G=2*o-1,Z=Array(G),X=Array(N);for(s=0;s<G;s++)Z[s]=(1-Math.cos(Math.PI*(s+1)/o))/(2*o);for(s=0;s<N;s++){for(x=0,F=0;x<G;x++)(_=s+x+1-o)<-N?_-=j*Math.round(_/j):_>=j&&(_-=j*Math.floor(_/j)),_<0?_=-1-_:_>=N&&(_=j-1-_),F+=i[_]*Z[x];X[s]=F}return X},J.syncOrAsync=function(i,o,s){var x;function continueAsync(){return J.syncOrAsync(i,o,s)}for(;i.length;)if((x=(0,i.splice(0,1)[0])(o))&&x.then)return x.then(continueAsync);return s&&s(o)},J.stripTrailingSlash=function(i){return"/"===i.substr(-1)?i.substr(0,i.length-1):i},J.noneOrAll=function(i,o,s){if(i){var x,_=!1,F=!0;for(x=0;x<s.length;x++)null!=i[s[x]]?_=!0:F=!1;if(_&&!F)for(x=0;x<s.length;x++)i[s[x]]=o[s[x]]}},J.mergeArray=function(i,o,s,x){var _="function"==typeof x;if(J.isArrayOrTypedArray(i))for(var F=Math.min(i.length,o.length),N=0;N<F;N++){var j=i[N];o[N][s]=_?x(j):j}},J.mergeArrayCastPositive=function(i,o,s){return J.mergeArray(i,o,s,function(i){var o=+i;return isFinite(o)&&o>0?o:0})},J.fillArray=function(i,o,s,x){if(x=x||J.identity,J.isArrayOrTypedArray(i))for(var _=0;_<o.length;_++)o[_][s]=x(i[_])},J.castOption=function(i,o,s,x){x=x||J.identity;var _=J.nestedProperty(i,s).get();return J.isArrayOrTypedArray(_)?x(Array.isArray(o)&&J.isArrayOrTypedArray(_[o[0]])?_[o[0]][o[1]]:_[o]):_},J.extractOption=function(i,o,s,x){if(s in i)return i[s];var _=J.nestedProperty(o,x).get();if(!Array.isArray(_))return _},J.tagSelected=function(i,o,s){var x,_=o.selectedpoints,F=o._indexToPoints;F&&(x=makePtIndex2PtNumber(F));for(var N=0;N<_.length;N++){var j=_[N];if(J.isIndex(j)||J.isArrayOrTypedArray(j)&&J.isIndex(j[0])&&J.isIndex(j[1])){var G=x?x[j]:j,Z=s?s[G]:G;void 0!==Z&&Z<i.length&&(i[Z].selected=1)}}},J.selIndices2selPoints=function(i){var o=i.selectedpoints,s=i._indexToPoints;if(!s)return o;for(var x=makePtIndex2PtNumber(s),_=[],F=0;F<o.length;F++){var N=o[F];if(J.isIndex(N)){var j=x[N];J.isIndex(j)&&_.push(j)}}return _},J.getTargetArray=function(i,o){var s=o.target;if("string"==typeof s&&s){var x=J.nestedProperty(i,s).get();return!!Array.isArray(x)&&x}return!!Array.isArray(s)&&s},J.minExtend=function minExtend(i,o,s){var x,_,F,N={};"object"!=typeof o&&(o={});var j="pieLike"===s?-1:3,G=Object.keys(i);for(x=0;x<G.length;x++)F=i[_=G[x]],"_"!==_.charAt(0)&&"function"!=typeof F&&("module"===_?N[_]=F:Array.isArray(F)?"colorscale"===_||-1===j?N[_]=F.slice():N[_]=F.slice(0,j):J.isTypedArray(F)?-1===j?N[_]=F.subarray():N[_]=F.subarray(0,j):F&&"object"==typeof F?N[_]=minExtend(i[_],o[_],s):N[_]=F);for(x=0,G=Object.keys(o);x<G.length;x++)"object"==typeof(F=o[_=G[x]])&&_ in N&&"object"==typeof N[_]||(N[_]=F);return N},J.titleCase=function(i){return i.charAt(0).toUpperCase()+i.substr(1)},J.containsAny=function(i,o){for(var s=0;s<o.length;s++)if(-1!==i.indexOf(o[s]))return!0;return!1},J.isIE=function(){return void 0!==window.navigator.msSaveBlob};var em=/Version\/[\d\.]+.*Safari/;J.isSafari=function(){return em.test(window.navigator.userAgent)};var ey=/iPad|iPhone|iPod/;J.isIOS=function(){return ey.test(window.navigator.userAgent)};var ev=/Firefox\/(\d+)\.\d+/;J.getFirefoxVersion=function(){var i=ev.exec(window.navigator.userAgent);if(i&&2===i.length){var o=parseInt(i[1]);if(!isNaN(o))return o}return null},J.isD3Selection=function(i){return i instanceof x.selection},J.ensureSingle=function(i,o,s,x){var _=i.select(o+(s?"."+s:""));if(_.size())return _;var F=i.append(o);return s&&F.classed(s,!0),x&&F.call(x),F},J.ensureSingleById=function(i,o,s,x){var _=i.select(o+"#"+s);if(_.size())return _;var F=i.append(o).attr("id",s);return x&&F.call(x),F},J.objectFromPath=function(i,o){for(var s,x=i.split("."),_=s={},F=0;F<x.length;F++){var N=x[F],j=null,G=x[F].match(/(.*)\[([0-9]+)\]/);G?(N=G[1],j=G[2],s=s[N]=[],F===x.length-1?s[j]=o:s[j]={},s=s[j]):(F===x.length-1?s[N]=o:s[N]={},s=s[N])}return _};var ex=/^([^\[\.]+)\.(.+)?/,e_=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function notValid(i){return"__"===i.slice(0,2)}J.expandObjectPaths=function(i){var o,s,x,_,F,N,j;if("object"==typeof i&&!Array.isArray(i)){for(s in i)if(i.hasOwnProperty(s)){if(o=s.match(ex)){if(_=i[s],notValid(x=o[1]))continue;delete i[s],i[x]=J.extendDeepNoArrays(i[x]||{},J.objectFromPath(s,J.expandObjectPaths(_))[x])}else if(o=s.match(e_)){if(_=i[s],notValid(x=o[1]))continue;if(F=parseInt(o[2]),delete i[s],i[x]=i[x]||[],"."===o[3])j=o[4],N=i[x][F]=i[x][F]||{},J.extendDeepNoArrays(N,J.objectFromPath(j,J.expandObjectPaths(_)));else{if(notValid(x))continue;i[x][F]=J.expandObjectPaths(_)}}else{if(notValid(s))continue;i[s]=J.expandObjectPaths(i[s])}}}return i},J.numSeparate=function(i,o,s){if(s||(s=!1),"string"!=typeof o||0===o.length)throw Error("Separator string required for formatting!");"number"==typeof i&&(i=String(i));var x=/(\d+)(\d{3})/,_=o.charAt(0),F=o.charAt(1),N=i.split("."),j=N[0],G=N.length>1?_+N[1]:"";if(F&&(N.length>1||j.length>4||s))for(;x.test(j);)j=j.replace(x,"$1"+F+"$2");return j+G},J.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var ew=/^\w*$/;J.templateString=function(i,o){var s={};return i.replace(J.TEMPLATE_STRING_REGEX,function(i,x){var _;return ew.test(x)?_=o[x]:(s[x]=s[x]||J.nestedProperty(o,x).get,_=s[x]()),J.isValidTextValue(_)?_:""})};var eT={max:10,count:0,name:"hovertemplate"};J.hovertemplateString=function(){return templateFormatString.apply(eT,arguments)};var ek={max:10,count:0,name:"texttemplate"};J.texttemplateString=function(){return templateFormatString.apply(ek,arguments)};var eA=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,eS={max:10,count:0,name:"texttemplate",parseMultDiv:!0};J.texttemplateStringForShapes=function(){return templateFormatString.apply(eS,arguments)};var eM=/^[:|\|]/;function templateFormatString(i,o,s){var x=this,F=arguments;o||(o={});var N={};return i.replace(J.TEMPLATE_STRING_REGEX,function(i,j,G){var Z="_xother"===j||"_yother"===j,X="_xother_"===j||"_yother_"===j,$="xother_"===j||"yother_"===j,ee="xother"===j||"yother"===j||Z||$||X,et=j;(Z||X)&&(et=et.substring(1)),($||X)&&(et=et.substring(0,et.length-1));var er=null,en=null;if(x.parseMultDiv){var ei,eo,es,el,ec,eu,ef=(eu=(ec=et).match(eA))?{key:eu[1],op:eu[2],number:Number(eu[3])}:{key:ec,op:null,number:null};et=ef.key,er=ef.op,en=ef.number}if(ee){if(void 0===(ei=o[et]))return""}else for(es=3;es<F.length;es++)if(eo=F[es]){if(eo.hasOwnProperty(et)){ei=eo[et];break}if(!ew.test(et)&&(ei=J.nestedProperty(eo,et).get(),(ei=N[et]||J.nestedProperty(eo,et).get())&&(N[et]=ei)),void 0!==ei)break}if(void 0!==ei&&("*"===er&&(ei*=en),"/"===er&&(ei/=en)),void 0===ei&&x)return x.count<x.max&&(J.warn("Variable '"+et+"' in "+x.name+" could not be found!"),ei=i),x.count===x.max&&J.warn("Too many "+x.name+" warnings - additional warnings will be suppressed"),x.count++,i;if(G){if(":"===G[0]&&(ei=(el=s?s.numberFormat:J.numberFormat)(G.replace(eM,""))(ei)),"|"===G[0]){el=s?s.timeFormat:_;var eh=J.dateTime2ms(ei);ei=J.formatDate(eh,G.replace(eM,""),!1,el)}}else{var ed=et+"Label";o.hasOwnProperty(ed)&&(ei=o[ed])}return ee&&(ei="("+ei+")",(Z||X)&&(ei=" "+ei),($||X)&&(ei+=" ")),ei})}J.subplotSort=function(i,o){for(var s=Math.min(i.length,o.length)+1,x=0,_=0,F=0;F<s;F++){var N=i.charCodeAt(F)||0,j=o.charCodeAt(F)||0,G=N>=48&&N<=57,Z=j>=48&&j<=57;if(G&&(x=10*x+N-48),Z&&(_=10*_+j-48),!G||!Z){if(x!==_)return x-_;if(N!==j)return N-j}}return _-x};var eC=2e9;J.seedPseudoRandom=function(){eC=2e9},J.pseudoRandom=function(){var i=eC;return 429496729>Math.abs((eC=(69069*eC+1)%4294967296)-i)?J.pseudoRandom():eC/4294967296},J.fillText=function(i,o,s){var x=Array.isArray(s)?function(i){s.push(i)}:function(i){s.text=i},_=J.extractOption(i,o,"htx","hovertext");if(J.isValidTextValue(_))return x(_);var F=J.extractOption(i,o,"tx","text");if(J.isValidTextValue(F))return x(F)},J.isValidTextValue=function(i){return i||0===i},J.formatPercent=function(i,o){for(var s=(Math.round(100*i*Math.pow(10,o=o||0))*Math.pow(.1,o)).toFixed(o)+"%",x=0;x<o;x++)-1!==s.indexOf(".")&&(s=(s=s.replace("0%","%")).replace(".%","%"));return s},J.isHidden=function(i){var o=window.getComputedStyle(i).display;return!o||"none"===o},J.strTranslate=function(i,o){return i||o?"translate("+i+","+o+")":""},J.strRotate=function(i){return i?"rotate("+i+")":""},J.strScale=function(i){return 1!==i?"scale("+i+")":""},J.getTextTransform=function(i){var o=i.noCenter,s=i.textX,x=i.textY,_=i.targetX,F=i.targetY,N=i.anchorX||0,j=i.anchorY||0,G=i.rotate,Z=i.scale;return Z?Z>1&&(Z=1):Z=0,J.strTranslate(_-Z*(s+N),F-Z*(x+j))+J.strScale(Z)+(G?"rotate("+G+(o?"":" "+s+" "+x)+")":"")},J.setTransormAndDisplay=function(i,o){i.attr("transform",J.getTextTransform(o)),i.style("display",o.scale?null:"none")},J.ensureUniformFontSize=function(i,o){var s=J.extendFlat({},o);return s.size=Math.max(o.size,i._fullLayout.uniformtext.minsize||0),s},J.join2=function(i,o,s){var x=i.length;return x>1?i.slice(0,-1).join(o)+s+i[x-1]:i.join(o)},J.bigFont=function(i){return Math.round(1.2*i)};var eE=J.getFirefoxVersion(),eL=null!==eE&&eE<86;J.getPositionFromD3Event=function(){return eL?[x.event.layerX,x.event.layerY]:[x.event.offsetX,x.event.offsetY]}},41965:function(i){"use strict";i.exports=function(i){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(i):"[object Object]"===Object.prototype.toString.call(i)&&Object.getPrototypeOf(i).hasOwnProperty("hasOwnProperty")}},66636:function(i,o,s){"use strict";var x=s(65487),_=/^\w*$/;i.exports=function(i,o,s,F){s=s||"name",F=F||"value";var N,j,G,Z={};j=o&&o.length?(G=x(i,o)).get():i,o=o||"";var X={};if(j)for(N=0;N<j.length;N++)X[j[N][s]]=N;var J=_.test(F),$={set:function(i,o){var _=null===o?4:0;if(!j){if(!G||4===_)return;j=[],G.set(j)}var N=X[i];if(void 0===N){if(4===_)return;_|=3,N=j.length,X[i]=N}else o!==(J?j[N][F]:x(j[N],F).get())&&(_|=2);var ee=j[N]=j[N]||{};return ee[s]=i,J?ee[F]=o:x(ee,F).set(o),null!==o&&(_&=-5),Z[N]=Z[N]|_,$},get:function(i){if(j){var o=X[i];return void 0===o?void 0:J?j[o][F]:x(j[o],F).get()}},rename:function(i,o){var x=X[i];return void 0===x||(Z[x]=1|Z[x],X[o]=x,delete X[i],j[x][s]=o),$},remove:function(i){var o=X[i];if(void 0===o)return $;var _=j[o];if(Object.keys(_).length>2)return Z[o]=2|Z[o],$.set(i,null);if(J){for(N=o;N<j.length;N++)Z[N]=3|Z[N];for(N=o;N<j.length;N++)X[j[N][s]]--;j.splice(o,1),delete X[i]}else x(_,F).set(null),Z[o]=6|Z[o];return $},constructUpdate:function(){for(var i,_,N={},G=Object.keys(Z),X=0;X<G.length;X++)_=G[X],i=o+"["+_+"]",j[_]?(1&Z[_]&&(N[i+"."+s]=j[_][s]),2&Z[_]&&(J?N[i+"."+F]=4&Z[_]?null:j[_][F]:N[i+"."+F]=4&Z[_]?null:x(j[_],F).get())):N[i]=null;return N}};return $}},15867:function(i,o,s){"use strict";var x=s(73972);i.exports=function(i,o){for(var s=i._context.locale,_=0;_<2;_++){for(var F=i._context.locales,N=0;N<2;N++){var j=(F[s]||{}).dictionary;if(j){var G=j[o];if(G)return G}F=x.localeRegistry}var Z=s.split("-")[0];if(Z===s)break;s=Z}return o}},47769:function(i,o,s){"use strict";var x=s(72075).dfltConfig,_=s(75046),F=i.exports={};F.log=function(){var i;if(x.logging>1){var o=["LOG:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.trace.apply(console,o)}if(x.notifyOnLogging>1){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);_(s.join("<br>"),"long")}},F.warn=function(){var i;if(x.logging>0){var o=["WARN:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.trace.apply(console,o)}if(x.notifyOnLogging>0){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);_(s.join("<br>"),"stick")}},F.error=function(){var i;if(x.logging>0){var o=["ERROR:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.error.apply(console,o)}if(x.notifyOnLogging>0){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);_(s.join("<br>"),"stick")}}},77310:function(i,o,s){"use strict";var x=s(39898);i.exports=function(i,o,s){var _=i.selectAll("g."+s.replace(/\s/g,".")).data(o,function(i){return i[0].trace.uid});_.exit().remove(),_.enter().append("g").attr("class",s),_.order();var F=i.classed("rangeplot")?"nodeRangePlot3":"node3";return _.each(function(i){i[0][F]=x.select(this)}),_}},35657:function(i,o,s){"use strict";var x=s(79576);o.init2dArray=function(i,o){for(var s=Array(i),x=0;x<i;x++)s[x]=Array(o);return s},o.transposeRagged=function(i){var o,s,x=0,_=i.length;for(o=0;o<_;o++)x=Math.max(x,i[o].length);var F=Array(x);for(o=0;o<x;o++)for(s=0,F[o]=Array(_);s<_;s++)F[o][s]=i[s][o];return F},o.dot=function(i,s){if(!(i.length&&s.length)||i.length!==s.length)return null;var x,_,F=i.length;if(i[0].length)for(_=0,x=Array(F);_<F;_++)x[_]=o.dot(i[_],s);else if(s[0].length){var N=o.transposeRagged(s);for(_=0,x=Array(N.length);_<N.length;_++)x[_]=o.dot(i,N[_])}else for(_=0,x=0;_<F;_++)x+=i[_]*s[_];return x},o.translationMatrix=function(i,o){return[[1,0,i],[0,1,o],[0,0,1]]},o.rotationMatrix=function(i){var o=i*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},o.rotationXYMatrix=function(i,s,x){return o.dot(o.dot(o.translationMatrix(s,x),o.rotationMatrix(i)),o.translationMatrix(-s,-x))},o.apply3DTransform=function(i){return function(){var s=arguments,x=1==arguments.length?s[0]:[s[0],s[1],s[2]||0];return o.dot(i,[x[0],x[1],x[2],1]).slice(0,3)}},o.apply2DTransform=function(i){return function(){var s=arguments;3===s.length&&(s=s[0]);var x=1==arguments.length?s[0]:[s[0],s[1]];return o.dot(i,[x[0],x[1],1]).slice(0,2)}},o.apply2DTransform2=function(i){var s=o.apply2DTransform(i);return function(i){return s(i.slice(0,2)).concat(s(i.slice(2,4)))}},o.convertCssMatrix=function(i){if(i){var o=i.length;if(16===o)return i;if(6===o)return[i[0],i[1],0,0,i[2],i[3],0,0,0,0,1,0,i[4],i[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(i){var o=[];return x.invert(o,i),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},64872:function(i){"use strict";i.exports={mod:function(i,o){var s=i%o;return s<0?s+o:s},modHalf:function(i,o){return Math.abs(i)>o/2?i-Math.round(i/o)*o:i}}},65487:function(i,o,s){"use strict";var x=s(92770),_=s(73627).isArrayOrTypedArray;i.exports=function(i,o){if(x(o))o=String(o);else if("string"!=typeof o||"[-1]"===o.substr(o.length-4))throw"bad property string";var s,F,N,j,G=o.split(".");for(j=0;j<G.length;j++)if("__"===String(G[j]).slice(0,2))throw"bad property string";for(j=0;j<G.length;){if(s=String(G[j]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])G[j]=s[1];else if(0===j)G.splice(0,1);else throw"bad property string";for(N=0,F=s[2].substr(1,s[2].length-2).split("][");N<F.length;N++)j++,G.splice(j,0,Number(F[N]))}j++}return"object"!=typeof i?{set:function(){throw"bad container"},get:function(){},astr:o,parts:G,obj:i}:{set:function npSet(i,o,s){return function(F){var N,j,G=i,Z="",X=[[i,Z]],J=isDeletable(F,s);for(j=0;j<o.length-1;j++){if("number"==typeof(N=o[j])&&!_(G))throw"array index but container is not an array";if(-1===N){if(!(J=!function(i,o,s,x){var F,N=_(s),j=!0,G=s,Z=x.replace("-1",0),X=!N&&isDeletable(s,Z),J=o[0];for(F=0;F<i.length;F++)Z=x.replace("-1",F),N&&(X=isDeletable(G=s[F%s.length],Z)),X&&(j=!1),checkNewContainer(i,F,J,X)&&npSet(i[F],o,x.replace("-1",F))(G);return j}(G,o.slice(j+1),F,s)))return;break}if(!checkNewContainer(G,N,o[j+1],J))break;if("object"!=typeof(G=G[N])||null===G)throw"container is not an object";Z=function(i,o){var s=o;return x(o)?s="["+o+"]":i&&(s="."+o),i+s}(Z,N),X.push([G,Z])}if(J){if(j===o.length-1&&(delete G[o[j]],Array.isArray(G)&&+o[j]==G.length-1))for(;G.length&&void 0===G[G.length-1];)G.pop()}else G[o[j]]=F}}(i,G,o),get:function npGet(i,o){return function(){var s,x,F,N,j,G=i;for(N=0;N<o.length-1;N++){if(-1===(s=o[N])){for(j=0,x=!0,F=[];j<G.length;j++)F[j]=npGet(G[j],o.slice(N+1))(),F[j]!==F[0]&&(x=!1);return x?F[0]:F}if("number"==typeof s&&!_(G)||"object"!=typeof(G=G[s])||null===G)return}if("object"==typeof G&&null!==G&&null!==(F=G[o[N]]))return F}}(i,G),astr:o,parts:G,obj:i}};var F=/(^|\.)args\[/;function isDeletable(i,o){return void 0===i||null===i&&!o.match(F)}function checkNewContainer(i,o,s,x){if(void 0===i[o]){if(x)return!1;"number"==typeof s?i[o]=[]:i[o]={}}return!0}},64213:function(i){"use strict";i.exports=function(){}},75046:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=[];i.exports=function(i,o){if(-1===F.indexOf(i)){F.push(i);var s=1e3;_(o)?s=o:"long"===o&&(s=3e3);var N=x.select("body").selectAll(".plotly-notifier").data([0]);N.enter().append("div").classed("plotly-notifier",!0),N.selectAll(".notifier-note").data(F).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var _=x.select(this);_.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){_.transition().call(killNote)});for(var F=_.append("p"),N=i.split(/<br\s*\/?>/g),j=0;j<N.length;j++)j&&F.append("br"),F.append("span").text(N[j]);"stick"===o?_.transition().duration(350).style("opacity",1):_.transition().duration(700).style("opacity",1).transition().delay(s).call(killNote)})}function killNote(i){i.duration(700).style("opacity",0).each("end",function(i){var o=F.indexOf(i);-1!==o&&F.splice(o,1),x.select(this).remove()})}}},39918:function(i,o,s){"use strict";var x=s(6964),_="data-savedcursor";i.exports=function(i,o){var s=i.attr(_);if(o){if(!s){for(var F=(i.attr("class")||"").split(" "),N=0;N<F.length;N++){var j=F[N];0===j.indexOf("cursor-")&&i.attr(_,j.substr(7)).classed(j,!1)}i.attr(_)||i.attr(_,"!!")}x(i,o)}else s&&(i.attr(_,null),"!!"===s?x(i):x(i,s))}},61082:function(i,o,s){"use strict";var x=s(35657).dot,_=s(50606).BADNUM,F=i.exports={};F.tester=function(i){var o,s,x=i.slice(),F=x[0][0],N=F,j=x[0][1],G=j;for((x[x.length-1][0]!==x[0][0]||x[x.length-1][1]!==x[0][1])&&x.push(x[0]),o=1;o<x.length;o++)F=Math.min(F,x[o][0]),N=Math.max(N,x[o][0]),j=Math.min(j,x[o][1]),G=Math.max(G,x[o][1]);var Z=!1;5===x.length&&(x[0][0]===x[1][0]?x[2][0]===x[3][0]&&x[0][1]===x[3][1]&&x[1][1]===x[2][1]&&(Z=!0,s=function(i){return i[0]===x[0][0]}):x[0][1]===x[1][1]&&x[2][1]===x[3][1]&&x[0][0]===x[3][0]&&x[1][0]===x[2][0]&&(Z=!0,s=function(i){return i[1]===x[0][1]}));var X=!0,J=x[0];for(o=1;o<x.length;o++)if(J[0]!==x[o][0]||J[1]!==x[o][1]){X=!1;break}return{xmin:F,xmax:N,ymin:j,ymax:G,pts:x,contains:Z?function(i,o){var x=i[0],Z=i[1];return!(x===_||x<F||x>N||Z===_||Z<j||Z>G||o&&s(i))}:function(i,o){var s,Z,X,J,$,ee=i[0],et=i[1];if(ee===_||ee<F||ee>N||et===_||et<j||et>G)return!1;var er=x.length,en=x[0][0],ei=x[0][1],eo=0;for(s=1;s<er;s++)if(Z=en,X=ei,en=x[s][0],ei=x[s][1],!(ee<(J=Math.min(Z,en))||ee>Math.max(Z,en)||et>Math.max(X,ei))){if(et<Math.min(X,ei))ee!==J&&eo++;else{if($=en===Z?et:X+(ee-Z)*(ei-X)/(en-Z),et===$){if(1===s&&o)return!1;return!0}et<=$&&ee!==J&&eo++}}return eo%2==1},isRect:Z,degenerate:X}},F.isSegmentBent=function(i,o,s,_){var F,N,j,G=i[o],Z=[i[s][0]-G[0],i[s][1]-G[1]],X=x(Z,Z),J=Math.sqrt(X),$=[-Z[1]/J,Z[0]/J];for(F=o+1;F<s;F++)if((j=x(N=[i[F][0]-G[0],i[F][1]-G[1]],Z))<0||j>X||Math.abs(x(N,$))>_)return!0;return!1},F.filter=function(i,o){var s=[i[0]],x=0,_=0;function addPt(N){i.push(N);var j=s.length,G=x;s.splice(_+1);for(var Z=G+1;Z<i.length;Z++)(Z===i.length-1||F.isSegmentBent(i,G,Z+1,o))&&(s.push(i[Z]),s.length<j-2&&(x=Z,_=s.length-1),G=Z)}return i.length>1&&addPt(i.pop()),{addPt:addPt,raw:i,filtered:s}}},79749:function(i,o,s){"use strict";var x=s(58617),_=s(98580);i.exports=function(i,o,F){var N=i._fullLayout,j=!0;return N._glcanvas.each(function(x){if(x.regl){x.regl.preloadCachedCode(F);return}if(!x.pick||N._has("parcoords")){try{x.regl=_({canvas:this,attributes:{antialias:!x.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||s.g.devicePixelRatio,extensions:o||[],cachedCode:F||{}})}catch(i){j=!1}x.regl||(j=!1),j&&this.addEventListener("webglcontextlost",function(o){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:o,layer:x.key})},!1)}}),j||x({container:N._glcontainer.node()}),j}},45142:function(i,o,s){"use strict";var x=s(92770),_=s(35791);i.exports=function(i){if("string"!=typeof(s=i&&i.hasOwnProperty("userAgent")?i.userAgent:("undefined"!=typeof navigator&&(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),o)))return!0;var o,s,F=_({ua:{headers:{"user-agent":s}},tablet:!0,featureDetect:!1});if(!F){for(var N=s.split(" "),j=1;j<N.length;j++)if(-1!==N[j].indexOf("Safari"))for(var G=j-1;G>-1;G--){var Z=N[G];if("Version/"===Z.substr(0,8)){var X=Z.substr(8).split(".")[0];if(x(X)&&(X=+X),X>=13)return!0}}}return F}},75138:function(i){"use strict";i.exports=function(i,o){if(o instanceof RegExp){for(var s=o.toString(),x=0;x<i.length;x++)if(i[x]instanceof RegExp&&i[x].toString()===s)return i;i.push(o)}else(o||0===o)&&-1===i.indexOf(o)&&i.push(o);return i}},10847:function(i,o,s){"use strict";var x=s(71828),_=s(72075).dfltConfig,F={};F.add=function(i,o,s,x,F){var N,j;if(i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},j=i.undoQueue.index,i.autoplay){i.undoQueue.inSequence||(i.autoplay=!1);return}!i.undoQueue.sequence||i.undoQueue.beginSequence?(N={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},i.undoQueue.queue.splice(j,i.undoQueue.queue.length-j,N),i.undoQueue.index+=1):N=i.undoQueue.queue[j-1],i.undoQueue.beginSequence=!1,N&&(N.undo.calls.unshift(o),N.undo.args.unshift(s),N.redo.calls.push(x),N.redo.args.push(F)),i.undoQueue.queue.length>_.queueLength&&(i.undoQueue.queue.shift(),i.undoQueue.index--)},F.startSequence=function(i){i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},i.undoQueue.sequence=!0,i.undoQueue.beginSequence=!0},F.stopSequence=function(i){i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},i.undoQueue.sequence=!1,i.undoQueue.beginSequence=!1},F.undo=function(i){var o,s;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index))&&!(i.undoQueue.index<=0)){for(i.undoQueue.index--,o=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,s=0;s<o.undo.calls.length;s++)F.plotDo(i,o.undo.calls[s],o.undo.args[s]);i.undoQueue.inSequence=!1,i.autoplay=!1}},F.redo=function(i){var o,s;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index))&&!(i.undoQueue.index>=i.undoQueue.queue.length)){for(s=0,o=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0;s<o.redo.calls.length;s++)F.plotDo(i,o.redo.calls[s],o.redo.args[s]);i.undoQueue.inSequence=!1,i.autoplay=!1,i.undoQueue.index++}},F.plotDo=function(i,o,s){i.autoplay=!0,s=function(i,o){for(var s,_=[],F=0;F<o.length;F++)(s=o[F])===i?_[F]=s:"object"==typeof s?_[F]=Array.isArray(s)?x.extendDeep([],s):x.extendDeepAll({},s):_[F]=s;return _}(i,s),o.apply(null,s)},i.exports=F},30587:function(i,o){"use strict";o.counter=function(i,o,s,x){var _=(o||"")+(s?"":"$"),F=!1===x?"":"^";return"xy"===i?RegExp(F+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+_):RegExp(F+i+"([2-9]|[1-9][0-9]+)?"+_)}},6962:function(i){"use strict";var o=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;i.exports=function(i,x){for(;x;){var _=i.match(o);if(_)i=_[1];else if(i.match(s))i="";else throw Error("bad relativeAttr call:"+[i,x]);if("^"===x.charAt(0))x=x.slice(1);else break}return i&&"["!==x.charAt(0)?i+"."+x:i+x}},51332:function(i,o,s){"use strict";var x=s(73627).isArrayOrTypedArray,_=s(41965);i.exports=function relinkPrivateKeys(i,o){for(var s in o){var F=o[s],N=i[s];if(N!==F){if("_"===s.charAt(0)||"function"==typeof F){if(s in i)continue;i[s]=F}else if(x(F)&&x(N)&&_(F[0])){if("customdata"===s||"ids"===s)continue;for(var j=Math.min(F.length,N.length),G=0;G<j;G++)N[G]!==F[G]&&_(F[G])&&_(N[G])&&relinkPrivateKeys(N[G],F[G])}else _(F)&&_(N)&&(relinkPrivateKeys(N,F),Object.keys(N).length||delete i[s])}}}},65888:function(i,o,s){"use strict";var x=s(92770),_=s(47769),F=s(23389),N=s(50606).BADNUM;function lessThan(i,o){return i<o}function lessOrEqual(i,o){return i<=o}function greaterThan(i,o){return i>o}function greaterOrEqual(i,o){return i>=o}o.findBin=function(i,o,s){if(x(o.start))return s?Math.ceil((i-o.start)/o.size-1e-9)-1:Math.floor((i-o.start)/o.size+1e-9);var F,N,j=0,G=o.length,Z=0,X=G>1?(o[G-1]-o[0])/(G-1):1;for(N=X>=0?s?lessThan:lessOrEqual:s?greaterOrEqual:greaterThan,i+=1e-9*X*(s?-1:1)*(X>=0?1:-1);j<G&&Z++<100;)N(o[F=Math.floor((j+G)/2)],i)?j=F+1:G=F;return Z>90&&_.log("Long binary search..."),j-1},o.sorterAsc=function(i,o){return i-o},o.sorterDes=function(i,o){return o-i},o.distinctVals=function(i){var s,x,_=i.slice();for(_.sort(o.sorterAsc),s=_.length-1;s>-1&&_[s]===N;s--);for(var F=_[s]-_[0]||1,j=F/(s||1)/1e4,G=[],Z=0;Z<=s;Z++){var X=_[Z],J=X-x;void 0===x?(G.push(X),x=X):J>j&&(F=Math.min(F,J),G.push(X),x=X)}return{vals:G,minDiff:F}},o.roundUp=function(i,o,s){for(var x,_=0,F=o.length-1,N=0,j=s?0:1,G=s?1:0,Z=s?Math.ceil:Math.floor;_<F&&N++<100;)o[x=Z((_+F)/2)]<=i?_=x+j:F=x-G;return o[_]},o.sort=function(i,o){for(var s=0,x=0,_=1;_<i.length;_++){var F=o(i[_],i[_-1]);if(F<0?s=1:F>0&&(x=1),s&&x)return i.sort(o)}return x?i:i.reverse()},o.findIndexOfMin=function(i,o){o=o||F;for(var s,x=1/0,_=0;_<i.length;_++){var N=o(i[_]);N<x&&(x=N,s=_)}return s}},6964:function(i){"use strict";i.exports=function(i,o){(i.attr("class")||"").split(" ").forEach(function(o){0===o.indexOf("cursor-")&&i.classed(o,!1)}),o&&i.classed("cursor-"+o,!0)}},58617:function(i,o,s){"use strict";var x=s(7901),noop=function(){};i.exports=function(i){for(var o in i)"function"==typeof i[o]&&(i[o]=noop);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var s=document.createElement("div");s.className="no-webgl",s.style.cursor="pointer",s.style.fontSize="24px",s.style.color=x.defaults[0],s.style.position="absolute",s.style.left=s.style.top="0px",s.style.width=s.style.height="100%",s.style["background-color"]=x.lightLine,s.style["z-index"]=30;var _=document.createElement("p");return _.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",_.style.position="relative",_.style.top="50%",_.style.left="50%",_.style.height="30%",_.style.width="50%",_.style.margin="-15% 0 0 -25%",s.appendChild(_),i.container.appendChild(s),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(i){"use strict";i.exports=function(i){return Object.keys(i).sort()}},80038:function(i,o,s){"use strict";var x=s(92770),_=s(73627).isArrayOrTypedArray;o.aggNums=function(i,s,F,N){var j,G;if((!N||N>F.length)&&(N=F.length),x(s)||(s=!1),_(F[0])){for(j=0,G=Array(N);j<N;j++)G[j]=o.aggNums(i,s,F[j]);F=G}for(j=0;j<N;j++)x(s)?x(F[j])&&(s=i(+s,+F[j])):s=F[j];return s},o.len=function(i){return o.aggNums(function(i){return i+1},0,i)},o.mean=function(i,s){return s||(s=o.len(i)),o.aggNums(function(i,o){return i+o},0,i)/s},o.midRange=function(i){if(void 0!==i&&0!==i.length)return(o.aggNums(Math.max,null,i)+o.aggNums(Math.min,null,i))/2},o.variance=function(i,s,_){return s||(s=o.len(i)),x(_)||(_=o.mean(i,s)),o.aggNums(function(i,o){return i+Math.pow(o-_,2)},0,i)/s},o.stdev=function(i,s,x){return Math.sqrt(o.variance(i,s,x))},o.median=function(i){var s=i.slice().sort();return o.interp(s,.5)},o.interp=function(i,o){if(!x(o))throw"n should be a finite number";if((o=o*i.length-.5)<0)return i[0];if(o>i.length-1)return i[i.length-1];var s=o%1;return s*i[Math.ceil(o)]+(1-s)*i[Math.floor(o)]}},78614:function(i,o,s){"use strict";var x=s(25075);i.exports=function(i){return i?x(i):[0,0,0,1]}},3883:function(i,o,s){"use strict";var x=s(32396),_=s(91424),F=s(71828),N=null;i.exports=function(){if(null!==N)return N;N=!1;var i=F.isIE()||F.isSafari()||F.isIOS();if(window.navigator.userAgent&&!i){var o=Array.from(x.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof s)N=o.some(function(i){return s.apply(null,i)});else{var j=_.tester.append("image").attr("style",x.STYLE),G=window.getComputedStyle(j.node()).imageRendering;N=o.some(function(i){var o=i[1];return G===o||G===o.toLowerCase()}),j.remove()}}return N}},63893:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=_.strTranslate,N=s(77922),j=s(18783).LINE_SPACING,G=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;o.convertToTspans=function(i,s,er){var ed=i.text(),ep=!i.attr("data-notex")&&s&&s._context.typesetMath&&"undefined"!=typeof MathJax&&ed.match(G),eg=x.select(i.node().parentNode);if(!eg.empty()){var em=i.attr("class")?i.attr("class").split(" ")[0]:"text";return em+="-math",eg.selectAll("svg."+em).remove(),eg.selectAll("g."+em+"-group").remove(),i.style("display",null).attr({"data-unformatted":ed,"data-math":"N"}),ep?(s&&s._promises||[]).push(new Promise(function(o){i.style("display","none");var s=parseInt(i.node().style.fontSize,10);(function(i,o,s){var F,N,j,G,$=parseInt((MathJax.version||"").split(".")[0]);if(2!==$&&3!==$){_.warn("No MathJax version:",MathJax.version);return}var initiateMathJax=function(){var s="math-output-"+_.randstr({},64),F=(G=x.select("body").append("div").attr({id:s}).style({visibility:"hidden",position:"absolute","font-size":o.fontSize+"px"}).text(i.replace(Z,"\\lt ").replace(X,"\\gt "))).node();return 2===$?MathJax.Hub.Typeset(F):MathJax.typeset([F])},finalizeMathJax=function(){var o=G.select(2===$?".MathJax_SVG":".MathJax"),F=!o.empty()&&G.select("svg").node();if(F){var N,j=F.getBoundingClientRect();N=2===$?x.select("body").select("#MathJax_SVG_glyphs"):o.select("defs"),s(o,N,j)}else _.log("There was an error in the tex syntax.",i),s();G.remove()},resetRenderer3=function(){"svg"!==F&&(MathJax.config.startup.output=F)},resetConfig3=function(){MathJax.config=N};2===$?MathJax.Hub.Queue(function(){return N=_.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:J},displayAlign:"left"})},function(){if("SVG"!==(F=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},initiateMathJax,finalizeMathJax,function(){if("SVG"!==F)return MathJax.Hub.setRenderer(F)},function(){return void 0!==j&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(N)}):3===$&&(N=_.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=J,"svg"!==(F=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){initiateMathJax(),finalizeMathJax(),resetRenderer3(),resetConfig3()}))})(ep[2],{fontSize:s},function(x,_,N){eg.selectAll("svg."+em).remove(),eg.selectAll("g."+em+"-group").remove();var j=x&&x.select("svg");if(!j||!j.node()){showText(),o();return}var G=eg.append("g").classed(em+"-group",!0).attr({"pointer-events":"none","data-unformatted":ed,"data-math":"Y"});G.node().appendChild(j.node()),_&&_.node()&&j.node().insertBefore(_.node().cloneNode(!0),j.node().firstChild);var Z=N.width,X=N.height;j.attr({class:em,height:X,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var J=i.node().style.fill||"black",$=j.select("g");$.attr({fill:J,stroke:J});var ee=$.node().getBoundingClientRect(),et=ee.width,en=ee.height;(et>Z||en>X)&&(j.style("overflow","hidden"),et=(ee=j.node().getBoundingClientRect()).width,en=ee.height);var ei=+i.attr("x"),eo=+i.attr("y"),es=-(s||i.node().getBoundingClientRect().height)/4;if("y"===em[0])G.attr({transform:"rotate("+[-90,ei,eo]+")"+F(-et/2,es-en/2)});else if("l"===em[0])eo=es-en/2;else if("a"===em[0]&&0!==em.indexOf("atitle"))ei=0,eo=es;else{var el=i.attr("text-anchor");ei-=et*("middle"===el?.5:"end"===el?1:0),eo=eo+es-en/2}j.attr({x:ei,y:eo}),er&&er.call(i,G),o(G)})})):showText(),i}function showText(){eg.empty()||(em=i.attr("class")+"-math",eg.select("svg."+em).remove()),i.text("").style("white-space","pre"),function(i,o){o=o.replace(en," ");var s,F=!1,G=[],Z=-1;function newLine(){Z++;var o=document.createElementNS(N.svg,"tspan");x.select(o).attr({class:"line",dy:Z*j+"em"}),i.appendChild(o),s=o;var _=G;if(G=[{node:o}],_.length>1)for(var F=1;F<_.length;F++)enterNode(_[F])}function enterNode(i){var o,_=i.type,F={};if("a"===_){o="a";var j=i.target,Z=i.href,X=i.popup;Z&&(F={"xlink:xlink:show":"_blank"===j||"_"!==j.charAt(0)?"new":"replace",target:j,"xlink:xlink:href":Z},X&&(F.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+X+'");return false;'))}else o="tspan";i.style&&(F.style=i.style);var J=document.createElementNS(N.svg,o);if("sup"===_||"sub"===_){addTextNode(s,""),s.appendChild(J);var $=document.createElementNS(N.svg,"tspan");addTextNode($,""),x.select($).attr("dy",et[_]),F.dy=ee[_],s.appendChild(J),s.appendChild($)}else s.appendChild(J);x.select(J).attr(F),s=i.node=J,G.push(i)}function addTextNode(i,o){i.appendChild(document.createTextNode(o))}es.test(o)?newLine():(s=i,G=[{node:i}]);for(var X=o.split(ei),J=0;J<X.length;J++){var er=X[J],ed=er.match(eo),ep=ed&&ed[2].toLowerCase(),eg=$[ep];if("br"===ep)newLine();else if(void 0===eg)addTextNode(s,convertEntities(er));else if(ed[1])!function(i){if(1===G.length){_.log("Ignoring unexpected end tag </"+i+">.",o);return}var x=G.pop();i!==x.type&&_.log("Start tag <"+x.type+"> doesnt match end tag <"+i+">. Pretending it did match.",o),s=G[G.length-1].node}(ep);else{var em=ed[4],ey={type:ep},ev=getQuotedMatch(em,el);if(ev?(ev=ev.replace(eh,"$1 fill:"),eg&&(ev+=";"+eg)):eg&&(ev=eg),ev&&(ey.style=ev),"a"===ep){F=!0;var ex=getQuotedMatch(em,ec);if(ex){var e_=sanitizeHref(ex);e_&&(ey.href=e_,ey.target=getQuotedMatch(em,eu)||"_blank",ey.popup=getQuotedMatch(em,ef))}}enterNode(ey)}}return F}(i.node(),ed)&&i.style("pointer-events","all"),o.positionText(i),er&&er.call(i)}};var Z=/(<|&lt;|&#60;)/g,X=/(>|&gt;|&#62;)/g,J=[["$","$"],["\\(","\\)"]],$={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},ee={sub:"0.3em",sup:"-0.6em"},et={sub:"-0.21em",sup:"0.42em"},er=["http:","https:","mailto:","",void 0,":"],en=o.NEWLINES=/(\r\n?|\n)/g,ei=/(<[^<>]*>)/,eo=/<(\/?)([^ >]*)(\s+(.*))?>/i,es=/<br(\s+.*)?>/i;o.BR_TAG_ALL=/<br(\s+.*)?>/gi;var el=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,ec=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,eu=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,ef=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function getQuotedMatch(i,o){if(!i)return null;var s=i.match(o),x=s&&(s[3]||s[4]);return x&&convertEntities(x)}var eh=/(^|;)\s*color:/;o.plainText=function(i,o){for(var s=void 0!==(o=o||{}).len&&-1!==o.len?o.len:1/0,x=void 0!==o.allowedTags?o.allowedTags:["br"],_=i.split(ei),F=[],N="",j=0,G=0;G<_.length;G++){var Z=_[G],X=Z.match(eo),J=X&&X[2].toLowerCase();if(J)-1!==x.indexOf(J)&&(F.push(Z),N=J);else{var $=Z.length;if(j+$<s)F.push(Z),j+=$;else if(j<s){var ee=s-j;N&&("br"!==N||ee<=3||$<=3)&&F.pop(),s>3?F.push(Z.substr(0,ee-3)+"..."):F.push(Z.substr(0,ee));break}N=""}}return F.join("")};var ed={mu:"",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},ep=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function convertEntities(i){return i.replace(ep,function(i,o){return("#"===o.charAt(0)?function(i){if(!(i>1114111)){var o=String.fromCodePoint;if(o)return o(i);var s=String.fromCharCode;return i<=65535?s(i):s((i>>10)+55232,i%1024+56320)}}("x"===o.charAt(1)?parseInt(o.substr(2),16):parseInt(o.substr(1),10)):ed[o])||i})}function sanitizeHref(i){var o=encodeURI(decodeURI(i)),s=document.createElement("a"),x=document.createElement("a");s.href=i,x.href=o;var _=s.protocol,F=x.protocol;return -1!==er.indexOf(_)&&-1!==er.indexOf(F)?o:""}function alignHTMLWith(i,o,s){var x,F,N,j=s.horizontalAlign,G=s.verticalAlign||"top",Z=i.node().getBoundingClientRect(),X=o.node().getBoundingClientRect();return F="bottom"===G?function(){return Z.bottom-x.height}:"middle"===G?function(){return Z.top+(Z.height-x.height)/2}:function(){return Z.top},N="right"===j?function(){return Z.right-x.width}:"center"===j?function(){return Z.left+(Z.width-x.width)/2}:function(){return Z.left},function(){x=this.node().getBoundingClientRect();var i=N()-X.left,o=F()-X.top,j=s.gd||{};if(s.gd){j._fullLayout._calcInverseTransform(j);var G=_.apply3DTransform(j._fullLayout._invTransform)(i,o);i=G[0],o=G[1]}return this.style({top:o+"px",left:i+"px","z-index":1e3}),this}}o.convertEntities=convertEntities,o.sanitizeHTML=function(i){i=i.replace(en," ");for(var o=document.createElement("p"),s=o,_=[],F=i.split(ei),N=0;N<F.length;N++){var j=F[N],G=j.match(eo),Z=G&&G[2].toLowerCase();if(Z in $){if(G[1])_.length&&(s=_.pop());else{var X=G[4],J=getQuotedMatch(X,el),ee=J?{style:J}:{};if("a"===Z){var et=getQuotedMatch(X,ec);if(et){var er=sanitizeHref(et);if(er){ee.href=er;var es=getQuotedMatch(X,eu);es&&(ee.target=es)}}}var ef=document.createElement(Z);s.appendChild(ef),x.select(ef).attr(ee),s=ef,_.push(ef)}}else s.appendChild(document.createTextNode(convertEntities(j)))}return o.innerHTML},o.lineCount=function(i){return i.selectAll("tspan.line").size()||1},o.positionText=function(i,o,s){return i.each(function(){var i=x.select(this);function setOrGet(o,s){return void 0===s?null===(s=i.attr(o))&&(i.attr(o,0),s=0):i.attr(o,s),s}var _=setOrGet("x",o),F=setOrGet("y",s);"text"===this.nodeName&&i.selectAll("tspan.line").attr({x:_,y:F})})};var eg="1px ";o.makeTextShadow=function(i){return eg+eg+eg+i+", -"+eg+"-"+eg+eg+i+", "+eg+"-"+eg+eg+i+", -"+eg+eg+eg+i},o.makeEditable=function(i,o){var s=o.gd,_=o.delegate,F=x.dispatch("edit","input","cancel"),N=_||i;if(i.style({"pointer-events":_?"none":"all"}),1!==i.size())throw Error("boo");function handleClick(){j=(_=x.select(s).select(".svg-container")).append("div"),Z=parseFloat((G=i.node().style).fontSize||12),void 0===(X=o.text)&&(X=i.attr("data-unformatted")),j.classed("plugin-editable editable",!0).style({position:"absolute","font-family":G.fontFamily||"Arial","font-size":Z,color:o.fill||G.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Z/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(X).call(alignHTMLWith(i,_,o)).on("blur",function(){s._editing=!1,i.text(this.textContent).style({opacity:1});var o,_=x.select(this).attr("class");(o=_?"."+_.split(" ")[0]+"-math-group":"[class*=-math-group]")&&x.select(i.node().parentNode).select(o).style({opacity:0});var N=this.textContent;x.select(this).transition().duration(0).remove(),x.select(document).on("mouseup",null),F.edit.call(i,N)}).on("focus",function(){var i=this;s._editing=!0,x.select(document).on("mouseup",function(){if(x.event.target===i)return!1;document.activeElement===j.node()&&j.node().blur()})}).on("keyup",function(){27===x.event.which?(s._editing=!1,i.style({opacity:1}),x.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),F.cancel.call(i,this.textContent)):(F.input.call(i,this.textContent),x.select(this).call(alignHTMLWith(i,_,o)))}).on("keydown",function(){13===x.event.which&&this.blur()}).call(selectElementContents),i.style({opacity:0});var _,j,G,Z,X,J,$=N.attr("class");(J=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&x.select(i.node().parentNode).select(J).style({opacity:0})}function selectElementContents(i){var o=i.node(),s=document.createRange();s.selectNodeContents(o);var x=window.getSelection();x.removeAllRanges(),x.addRange(s),o.focus()}return o.immediate?handleClick():N.on("click",handleClick),x.rebind(i,F,"on")}},79990:function(i,o){"use strict";var s={};function _clearTimeout(i){i&&null!==i.timer&&(clearTimeout(i.timer),i.timer=null)}o.throttle=function(i,o,x){var _=s[i],F=Date.now();if(!_){for(var N in s)s[N].ts<F-6e4&&delete s[N];_=s[i]={ts:0,timer:null}}function exec(){x(),_.ts=Date.now(),_.onDone&&(_.onDone(),_.onDone=null)}if(_clearTimeout(_),F>_.ts+o){exec();return}_.timer=setTimeout(function(){exec(),_.timer=null},o)},o.done=function(i){var o=s[i];return o&&o.timer?new Promise(function(i){var s=o.onDone;o.onDone=function(){s&&s(),i(),o.onDone=null}}):Promise.resolve()},o.clear=function(i){if(i)_clearTimeout(s[i]),delete s[i];else for(var x in s)o.clear(x)}},58163:function(i,o,s){"use strict";var x=s(92770);i.exports=function(i,o){if(i>0)return Math.log(i)/Math.LN10;var s=Math.log(Math.min(o[0],o[1]))/Math.LN10;return x(s)||(s=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),s}},90973:function(i,o,s){"use strict";var x=i.exports={},_=s(78776).locationmodeToLayer,F=s(96892).zL;x.getTopojsonName=function(i){return[i.scope.replace(/ /g,"-"),"_",i.resolution.toString(),"m"].join("")},x.getTopojsonPath=function(i,o){return i+o+".json"},x.getTopojsonFeatures=function(i,o){var s=_[i.locationmode],x=o.objects[s];return F(o,x).features}},37815:function(i){"use strict";i.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(i){"use strict";i.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(i,o,s){"use strict";var x=s(73972);i.exports=function(i){for(var o,s,_=x.layoutArrayContainers,F=x.layoutArrayRegexes,N=i.split("[")[0],j=0;j<F.length;j++)if((s=i.match(F[j]))&&0===s.index){o=s[0];break}if(o||(o=_[_.indexOf(N)]),!o)return!1;var G=i.substr(o.length);return G?!!(s=G.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(s[1]),property:s[3]||""}:{array:o,index:"",property:""}}},30962:function(i,o,s){"use strict";var x=s(1426).extendFlat,_=s(41965),F={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},N={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},j=F.flags.slice().concat(["fullReplot"]),G=N.flags.slice().concat("layoutReplot");function falseObj(i){for(var o={},s=0;s<i.length;s++)o[i[s]]=!1;return o}i.exports={traces:F,layout:N,traceFlags:function(){return falseObj(j)},layoutFlags:function(){return falseObj(G)},update:function(i,o){var s=o.editType;if(s&&"none"!==s)for(var x=s.split("+"),_=0;_<x.length;_++)i[x[_]]=!0},overrideAll:function overrideAll(i,o,s){var F=x({},i);for(var N in F){var j=F[N];_(j)&&(F[N]=function overrideOne(i,o,s,_){if(!i.valType)return overrideAll(i,o,"_"===_.charAt(0)?"nested":"from-root");var F=x({},i);if(F.editType=o,Array.isArray(i.items)){F.items=Array(i.items.length);for(var N=0;N<i.items.length;N++)F.items[N]=overrideOne(i.items[N],o,"from-root")}return F}(j,o,s,N))}return"from-root"===s&&(F.editType=o),F}}},58377:function(i,o,s){"use strict";var x=s(92770),_=s(27812),F=s(73972),N=s(71828),j=s(74875),G=s(41675),Z=s(7901),X=G.cleanId,J=G.getFromTrace,$=F.traceIs;function cleanAxRef(i,o){var s=i[o],x=o.charAt(0);s&&"paper"!==s&&(i[o]=X(s,x,!0))}function cleanTitle(i){i&&(("string"==typeof i.title||"number"==typeof i.title)&&(i.title={text:i.title}),rewireAttr("titlefont","font"),rewireAttr("titleposition","position"),rewireAttr("titleside","side"),rewireAttr("titleoffset","offset"));function rewireAttr(o,s){var x=i[o],_=i.title&&i.title[s];x&&!_&&(i.title||(i.title={}),i.title[s]=i[o],delete i[o])}}function cleanFinanceDir(i){if(!N.isPlainObject(i))return!1;var o=i.name;return delete i.name,delete i.showlegend,("string"==typeof o||"number"==typeof o)&&String(o)}function cleanTextPosition(i){var o="middle",s="center";return"string"==typeof i&&(-1!==i.indexOf("top")?o="top":-1!==i.indexOf("bottom")&&(o="bottom"),-1!==i.indexOf("left")?s="left":-1!==i.indexOf("right")&&(s="right")),o+" "+s}function emptyContainer(i,o){return o in i&&"object"==typeof i[o]&&0===Object.keys(i[o]).length}o.clearPromiseQueue=function(i){Array.isArray(i._promises)&&i._promises.length>0&&N.log("Clearing previous rejected promises from queue."),i._promises=[]},o.cleanLayout=function(i){i||(i={}),i.xaxis1&&(i.xaxis||(i.xaxis=i.xaxis1),delete i.xaxis1),i.yaxis1&&(i.yaxis||(i.yaxis=i.yaxis1),delete i.yaxis1),i.scene1&&(i.scene||(i.scene=i.scene1),delete i.scene1);var s,x,F=(j.subplotsRegistry.cartesian||{}).attrRegex,G=(j.subplotsRegistry.polar||{}).attrRegex,J=(j.subplotsRegistry.ternary||{}).attrRegex,$=(j.subplotsRegistry.gl3d||{}).attrRegex,ee=Object.keys(i);for(s=0;s<ee.length;s++){var et=ee[s];if(F&&F.test(et)){var er=i[et];er.anchor&&"free"!==er.anchor&&(er.anchor=X(er.anchor)),er.overlaying&&(er.overlaying=X(er.overlaying)),er.type||(er.isdate?er.type="date":er.islog?er.type="log":!1!==er.isdate||!1!==er.islog||(er.type="linear")),("withzero"===er.autorange||"tozero"===er.autorange)&&(er.autorange=!0,er.rangemode="tozero"),delete er.islog,delete er.isdate,delete er.categories,emptyContainer(er,"domain")&&delete er.domain,void 0!==er.autotick&&(void 0===er.tickmode&&(er.tickmode=er.autotick?"auto":"linear"),delete er.autotick),cleanTitle(er)}else if(G&&G.test(et))cleanTitle(i[et].radialaxis);else if(J&&J.test(et)){var en=i[et];cleanTitle(en.aaxis),cleanTitle(en.baxis),cleanTitle(en.caxis)}else if($&&$.test(et)){var ei=i[et],eo=ei.cameraposition;if(Array.isArray(eo)&&4===eo[0].length){var es=eo[0],el=eo[1],ec=eo[2],eu=_([],es),ef=[];for(x=0;x<3;++x)ef[x]=el[x]+ec*eu[2+4*x];ei.camera={eye:{x:ef[0],y:ef[1],z:ef[2]},center:{x:el[0],y:el[1],z:el[2]},up:{x:0,y:0,z:1}},delete ei.cameraposition}cleanTitle(ei.xaxis),cleanTitle(ei.yaxis),cleanTitle(ei.zaxis)}}var eh=Array.isArray(i.annotations)?i.annotations.length:0;for(s=0;s<eh;s++){var ed=i.annotations[s];N.isPlainObject(ed)&&(ed.ref&&("paper"===ed.ref?(ed.xref="paper",ed.yref="paper"):"data"===ed.ref&&(ed.xref="x",ed.yref="y"),delete ed.ref),cleanAxRef(ed,"xref"),cleanAxRef(ed,"yref"))}var ep=Array.isArray(i.shapes)?i.shapes.length:0;for(s=0;s<ep;s++){var eg=i.shapes[s];N.isPlainObject(eg)&&(cleanAxRef(eg,"xref"),cleanAxRef(eg,"yref"))}var em=Array.isArray(i.images)?i.images.length:0;for(s=0;s<em;s++){var ey=i.images[s];N.isPlainObject(ey)&&(cleanAxRef(ey,"xref"),cleanAxRef(ey,"yref"))}var ev=i.legend;return ev&&(ev.x>3?(ev.x=1.02,ev.xanchor="left"):ev.x<-2&&(ev.x=-.02,ev.xanchor="right"),ev.y>3?(ev.y=1.02,ev.yanchor="bottom"):ev.y<-2&&(ev.y=-.02,ev.yanchor="top")),cleanTitle(i),"rotate"===i.dragmode&&(i.dragmode="orbit"),Z.clean(i),i.template&&i.template.layout&&o.cleanLayout(i.template.layout),i},o.cleanData=function(i){for(var s=0;s<i.length;s++){var x,_=i[s];if("histogramy"===_.type&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var G=Z.defaults,J=_.error_y.color||($(_,"bar")?Z.defaultLine:G[s%G.length]);_.error_y.color=Z.addOpacity(Z.rgb(J),Z.opacity(J)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&("h"===_.bardir&&($(_,"bar")||"histogram"===_.type.substr(0,9))&&(_.orientation="h",o.swapXYData(_)),delete _.bardir),"histogramy"===_.type&&o.swapXYData(_),("histogramx"===_.type||"histogramy"===_.type)&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=X(_.xaxis,"x")),_.yaxis&&(_.yaxis=X(_.yaxis,"y")),$(_,"gl3d")&&_.scene&&(_.scene=j.subplotsRegistry.gl3d.cleanId(_.scene)),!$(_,"pie-like")&&!$(_,"bar-like")){if(Array.isArray(_.textposition))for(x=0;x<_.textposition.length;x++)_.textposition[x]=cleanTextPosition(_.textposition[x]);else _.textposition&&(_.textposition=cleanTextPosition(_.textposition))}var ee=F.getModule(_);if(ee&&ee.colorbar){var et=ee.colorbar.container,er=et?_[et]:_;er&&er.colorscale&&("YIGnBu"===er.colorscale&&(er.colorscale="YlGnBu"),"YIOrRd"===er.colorscale&&(er.colorscale="YlOrRd"))}if("surface"===_.type&&N.isPlainObject(_.contours)){var en=["x","y","z"];for(x=0;x<en.length;x++){var ei=_.contours[en[x]];N.isPlainObject(ei)&&(ei.highlightColor&&(ei.highlightcolor=ei.highlightColor,delete ei.highlightColor),ei.highlightWidth&&(ei.highlightwidth=ei.highlightWidth,delete ei.highlightWidth))}}if("candlestick"===_.type||"ohlc"===_.type){var eo=!1!==(_.increasing||{}).showlegend,es=!1!==(_.decreasing||{}).showlegend,el=cleanFinanceDir(_.increasing),ec=cleanFinanceDir(_.decreasing);if(!1!==el&&!1!==ec){var eu=function(i,o,s,x){if(s&&!x)return i;if(x&&!s||!i.trim())return o;if(!o.trim())return i;var _,F=Math.min(i.length,o.length);for(_=0;_<F&&i.charAt(_)===o.charAt(_);_++);return i.substr(0,_).trim()}(el,ec,eo,es);eu&&(_.name=eu)}else(el||ec)&&!_.name&&(_.name=el||ec)}if(Array.isArray(_.transforms)){var ef=_.transforms;for(x=0;x<ef.length;x++){var eh=ef[x];if(N.isPlainObject(eh))switch(eh.type){case"filter":eh.filtersrc&&(eh.target=eh.filtersrc,delete eh.filtersrc),eh.calendar&&(eh.valuecalendar||(eh.valuecalendar=eh.calendar),delete eh.calendar);break;case"groupby":if(eh.styles=eh.styles||eh.style,eh.styles&&!Array.isArray(eh.styles)){var ed=eh.styles,ep=Object.keys(ed);eh.styles=[];for(var eg=0;eg<ep.length;eg++)eh.styles.push({target:ep[eg],value:ed[ep[eg]]})}}}}emptyContainer(_,"line")&&delete _.line,"marker"in _&&(emptyContainer(_.marker,"line")&&delete _.marker.line,emptyContainer(_,"marker")&&delete _.marker),Z.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),cleanTitle(_),_.colorbar&&cleanTitle(_.colorbar),_.marker&&_.marker.colorbar&&cleanTitle(_.marker.colorbar),_.line&&_.line.colorbar&&cleanTitle(_.line.colorbar),_.aaxis&&cleanTitle(_.aaxis),_.baxis&&cleanTitle(_.baxis)}},o.swapXYData=function(i){var o;if(N.swapAttrs(i,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(i.z)&&Array.isArray(i.z[0])&&(i.transpose?delete i.transpose:i.transpose=!0),i.error_x&&i.error_y){var s=i.error_y,x="copy_ystyle"in s?s.copy_ystyle:!(s.color||s.thickness||s.width);N.swapAttrs(i,["error_?.copy_ystyle"]),x&&N.swapAttrs(i,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof i.hoverinfo){var _=i.hoverinfo.split("+");for(o=0;o<_.length;o++)"x"===_[o]?_[o]="y":"y"===_[o]&&(_[o]="x");i.hoverinfo=_.join("+")}},o.coerceTraceIndices=function(i,o){if(x(o))return[o];if(!Array.isArray(o)||!o.length)return i.data.map(function(i,o){return o});if(Array.isArray(o)){for(var s=[],_=0;_<o.length;_++)N.isIndex(o[_],i.data.length)?s.push(o[_]):N.warn("trace index (",o[_],") is not a number or is out of bounds");return s}return o},o.manageArrayContainers=function(i,o,s){var _=i.obj,F=i.parts,j=F.length,G=F[j-1],Z=x(G);if(Z&&null===o){var X=F.slice(0,j-1).join(".");N.nestedProperty(_,X).get().splice(G,1)}else Z&&void 0===i.get()&&void 0===i.get()&&(s[i.astr]=null),i.set(o)};var ee=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function getParent(i){var o=i.search(ee);if(o>0)return i.substr(0,o)}o.hasParent=function(i,o){for(var s=getParent(o);s;){if(s in i)return!0;s=getParent(s)}return!1};var et=["x","y","z"];o.clearAxisTypes=function(i,o,s){for(var x=0;x<o.length;x++)for(var _=i._fullData[x],F=0;F<3;F++){var j=J(i,_,et[F]);if(j&&"log"!==j.type){var G=j._name,Z=j._id.substr(1);if("scene"===Z.substr(0,5)){if(void 0!==s[Z])continue;G=Z+"."+G}var X=G+".type";void 0===s[G]&&void 0===s[X]&&N.nestedProperty(i.layout,X).set(null)}}}},10641:function(i,o,s){"use strict";var x=s(72391);o._doPlot=x._doPlot,o.newPlot=x.newPlot,o.restyle=x.restyle,o.relayout=x.relayout,o.redraw=x.redraw,o.update=x.update,o._guiRestyle=x._guiRestyle,o._guiRelayout=x._guiRelayout,o._guiUpdate=x._guiUpdate,o._storeDirectGUIEdit=x._storeDirectGUIEdit,o.react=x.react,o.extendTraces=x.extendTraces,o.prependTraces=x.prependTraces,o.addTraces=x.addTraces,o.deleteTraces=x.deleteTraces,o.moveTraces=x.moveTraces,o.purge=x.purge,o.addFrames=x.addFrames,o.deleteFrames=x.deleteFrames,o.animate=x.animate,o.setPlotConfig=x.setPlotConfig;var _=s(24401).getGraphDiv,F=s(34031).eraseActiveShape;o.deleteActiveShape=function(i){return F(_(i))},o.toImage=s(403),o.validate=s(84936),o.downloadImage=s(7239);var N=s(96318);o.makeTemplate=N.makeTemplate,o.validateTemplate=N.validateTemplate},6611:function(i,o,s){"use strict";var x=s(41965),_=s(64213),F=s(47769),N=s(65888).sorterAsc,j=s(73972);o.containerArrayMatch=s(14458);var G=o.isAddVal=function(i){return"add"===i||x(i)},Z=o.isRemoveVal=function(i){return null===i||"remove"===i};o.applyContainerArrayChanges=function(i,o,s,x,X){var J,$,ee,et,er,en,ei,eo,es,el=o.astr,ec=j.getComponentMethod(el,"supplyLayoutDefaults"),eu=j.getComponentMethod(el,"draw"),ef=j.getComponentMethod(el,"drawOne"),eh=x.replot||x.recalc||ec===_||eu===_,ed=i.layout,ep=i._fullLayout;if(s[""]){Object.keys(s).length>1&&F.warn("Full array edits are incompatible with other edits",el);var eg=s[""][""];if(Z(eg))o.set(null);else{if(!Array.isArray(eg))return F.warn("Unrecognized full array edit value",el,eg),!0;o.set(eg)}return!eh&&(ec(ed,ep),eu(i),!0)}var em=Object.keys(s).map(Number).sort(N),ey=o.get(),ev=ey||[],ex=X(ep,el).get(),e_=[],ew=-1,eT=ev.length;for(J=0;J<em.length;J++){if(er=Object.keys(et=s[ee=em[J]]),ei=G(en=et[""]),ee<0||ee>ev.length-(ei?0:1)){F.warn("index out of range",el,ee);continue}if(void 0!==en)er.length>1&&F.warn("Insertion & removal are incompatible with edits to the same index.",el,ee),Z(en)?e_.push(ee):ei?("add"===en&&(en={}),ev.splice(ee,0,en),ex&&ex.splice(ee,0,{})):F.warn("Unrecognized full object edit value",el,ee,en),-1===ew&&(ew=ee);else for($=0;$<er.length;$++)eo=el+"["+ee+"].",X(ev[ee],er[$],eo).set(et[er[$]])}for(J=e_.length-1;J>=0;J--)ev.splice(e_[J],1),ex&&ex.splice(e_[J],1);if(ev.length?ey||o.set(ev):o.set(null),eh)return!1;if(ec(ed,ep),ef!==_){if(-1===ew)es=em;else{for(J=0,eT=Math.max(ev.length,eT),es=[];J<em.length&&!((ee=em[J])>=ew);J++)es.push(ee);for(J=ew;J<eT;J++)es.push(J)}for(J=0;J<es.length;J++)ef(i,es[J])}else eu(i);return!0}},72391:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(57035),N=s(71828),j=N.nestedProperty,G=s(11086),Z=s(10847),X=s(73972),J=s(86281),$=s(74875),ee=s(89298),et=s(91424),er=s(7901),en=s(4305).initInteractions,ei=s(77922),eo=s(47322).clearOutline,es=s(72075).dfltConfig,el=s(6611),ec=s(58377),eu=s(61549),ef=s(30962),eh=s(85555).AX_NAME_PATTERN,ed=0;function emitAfterPlot(i){var o=i._fullLayout;o._redrawFromAutoMarginCount?o._redrawFromAutoMarginCount--:i.emit("plotly_afterplot")}function setBackground(i,o){try{i._fullLayout._paper.style("background",o)}catch(i){N.error(i)}}function opaqueSetBackground(i,o){setBackground(i,er.combine(o,"white"))}function setPlotContext(i,o){if(!i._context){i._context=N.extendDeep({},es);var s,_,j,G=x.select("base");i._context._baseUrl=G.size()&&G.attr("href")?window.location.href.split("#")[0]:""}var Z=i._context;if(o){for(s=0,_=Object.keys(o);s<_.length;s++)"editable"!==(j=_[s])&&"edits"!==j&&j in Z&&("setBackground"===j&&"opaque"===o[j]?Z[j]=opaqueSetBackground:Z[j]=o[j]);o.plot3dPixelRatio&&!Z.plotGlPixelRatio&&(Z.plotGlPixelRatio=Z.plot3dPixelRatio);var X=o.editable;if(void 0!==X)for(s=0,Z.editable=X,_=Object.keys(Z.edits);s<_.length;s++)Z.edits[_[s]]=X;if(o.edits)for(s=0,_=Object.keys(o.edits);s<_.length;s++)(j=_[s])in Z.edits&&(Z.edits[j]=o.edits[j]);Z._exportedPlot=o._exportedPlot}Z.staticPlot&&(Z.editable=!1,Z.edits={},Z.autosizable=!1,Z.scrollZoom=!1,Z.doubleClick=!1,Z.showTips=!1,Z.showLink=!1,Z.displayModeBar=!1),"hover"!==Z.displayModeBar||F||(Z.displayModeBar=!0),("transparent"===Z.setBackground||"function"!=typeof Z.setBackground)&&(Z.setBackground=setBackground),Z._hasZeroHeight=Z._hasZeroHeight||0===i.clientHeight,Z._hasZeroWidth=Z._hasZeroWidth||0===i.clientWidth;var J=Z.scrollZoom,$=Z._scrollZoom={};if(!0===J)$.cartesian=1,$.gl3d=1,$.geo=1,$.mapbox=1;else if("string"==typeof J){var ee=J.split("+");for(s=0;s<ee.length;s++)$[ee[s]]=1}else!1!==J&&($.gl3d=1,$.geo=1,$.mapbox=1)}function positivifyIndices(i,o){var s,x,_=o+1,F=[];for(s=0;s<i.length;s++)(x=i[s])<0?F.push(_+x):F.push(x);return F}function assertIndexArray(i,o,s){var x,_;for(x=0;x<o.length;x++){if((_=o[x])!==parseInt(_,10))throw Error("all values in "+s+" must be integers");if(_>=i.data.length||_<-i.data.length)throw Error(s+" must be valid indices for gd.data.");if(o.indexOf(_,x+1)>-1||_>=0&&o.indexOf(-i.data.length+_)>-1||_<0&&o.indexOf(i.data.length+_)>-1)throw Error("each index in "+s+" must be unique.")}}function checkMoveTracesArgs(i,o,s){if(!Array.isArray(i.data))throw Error("gd.data must be an array.");if(void 0===o)throw Error("currentIndices is a required argument.");if(Array.isArray(o)||(o=[o]),assertIndexArray(i,o,"currentIndices"),void 0===s||Array.isArray(s)||(s=[s]),void 0!==s&&assertIndexArray(i,s,"newIndices"),void 0!==s&&o.length!==s.length)throw Error("current and new indices must be of equal length.")}function spliceTraces(i,o,s,x,F){!function(i,o,s,x){var _=N.isPlainObject(x);if(!Array.isArray(i.data))throw Error("gd.data must be an array");if(!N.isPlainObject(o))throw Error("update must be a key:value object");if(void 0===s)throw Error("indices must be an integer or array of integers");for(var F in assertIndexArray(i,s,"indices"),o){if(!Array.isArray(o[F])||o[F].length!==s.length)throw Error("attribute "+F+" must be an array of length equal to indices array length");if(_&&(!(F in x)||!Array.isArray(x[F])||x[F].length!==o[F].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(i,o,s,x);for(var G=function(i,o,s,x){var F,G,Z,X,J=N.isPlainObject(x),$=[];for(var ee in Array.isArray(s)||(s=[s]),s=positivifyIndices(s,i.data.length-1),o)for(var et=0;et<s.length;et++){if(F=(G=j(i.data[s[et]],ee)).get(),Z=o[ee][et],!N.isArrayOrTypedArray(Z))throw Error("attribute: "+ee+" index: "+et+" must be an array");if(!N.isArrayOrTypedArray(F))throw Error("cannot extend missing or non-array attribute: "+ee);if(F.constructor!==Z.constructor)throw Error("cannot extend array with an array of a different type: "+ee);_(X=J?x[ee][et]:x)||(X=-1),$.push({prop:G,target:F,insert:Z,maxp:Math.floor(X)})}return $}(i,o,s,x),Z={},X={},J=0;J<G.length;J++){var $=G[J].prop,ee=G[J].maxp,et=F(G[J].target,G[J].insert,ee);$.set(et[0]),Array.isArray(Z[$.astr])||(Z[$.astr]=[]),Z[$.astr].push(et[1]),Array.isArray(X[$.astr])||(X[$.astr]=[]),X[$.astr].push(G[J].target.length)}return{update:Z,maxPoints:X}}function concatTypedArray(i,o){var s=new i.constructor(i.length+o.length);return s.set(i),s.set(o,i.length),s}function restyle(i,s,x,_){i=N.getGraphDiv(i),ec.clearPromiseQueue(i);var F={};if("string"==typeof s)F[s]=x;else{if(!N.isPlainObject(s))return N.warn("Restyle fail.",s,x,_),Promise.reject();F=N.extendFlat({},s),void 0===_&&(_=x)}Object.keys(F).length&&(i.changed=!0);var j=ec.coerceTraceIndices(i,_),G=_restyle(i,F,j),X=G.flags;X.calc&&(i.calcdata=void 0),X.clearAxisTypes&&ec.clearAxisTypes(i,j,{});var J=[];X.fullReplot?J.push(o._doPlot):(J.push($.previousPromises),$.supplyDefaults(i),X.markerSize&&($.doCalcdata(i),addAxRangeSequence(J)),X.style&&J.push(eu.doTraceStyle),X.colorbars&&J.push(eu.doColorBars),J.push(emitAfterPlot)),J.push($.rehover,$.redrag,$.reselect),Z.add(i,restyle,[i,G.undoit,G.traces],restyle,[i,G.redoit,G.traces]);var ee=N.syncOrAsync(J,i);return ee&&ee.then||(ee=Promise.resolve()),ee.then(function(){return i.emit("plotly_restyle",G.eventData),i})}function undefinedToNull(i){return void 0===i?null:i}function makeNP(i,o){return o?function(o,s,x){var _=j(o,s),F=_.set;return _.set=function(o){storeCurrent((x||"")+s,_.get(),o,i),F(o)},_}:j}function storeCurrent(i,o,s,x){if(Array.isArray(o)||Array.isArray(s))for(var _=Array.isArray(o)?o:[],F=Array.isArray(s)?s:[],j=Math.max(_.length,F.length),G=0;G<j;G++)storeCurrent(i+"["+G+"]",_[G],F[G],x);else if(N.isPlainObject(o)||N.isPlainObject(s)){var Z=N.isPlainObject(o)?o:{},X=N.isPlainObject(s)?s:{},J=N.extendFlat({},Z,X);for(var $ in J)storeCurrent(i+"."+$,Z[$],X[$],x)}else void 0===x[i]&&(x[i]=undefinedToNull(o))}function _restyle(i,o,s){var x=i._fullLayout,_=i._fullData,F=i.data,G=x._guiEditing,Z=makeNP(x._preGUI,G),et=N.extendDeepAll({},o);cleanDeprecatedAttributeKeys(o);var er=ef.traceFlags(),en={},ei={};function a0(){return s.map(function(){})}function addToAxlist(i){var o=ee.id2name(i);-1===el.indexOf(o)&&el.push(o)}function autorangeAttr(i){return"LAYOUT"+i+".autorange"}function rangeAttr(i){return"LAYOUT"+i+".range"}function getFullTrace(i){for(var o=i;o<_.length;o++)if(_[o]._input===F[i])return _[o]}function doextra(_,N,j){if(Array.isArray(_)){_.forEach(function(i){doextra(i,N,j)});return}if(!(_ in o||ec.hasParent(o,_))){if("LAYOUT"===_.substr(0,6))X=Z(i.layout,_.replace("LAYOUT",""));else{var X,J=s[j];X=makeNP(x._tracePreGUI[getFullTrace(J)._fullInput.uid],G)(F[J],_)}_ in ei||(ei[_]=a0()),void 0===ei[_][j]&&(ei[_][j]=undefinedToNull(X.get())),void 0!==N&&X.set(N)}}for(var eo in o){if(ec.hasParent(o,eo))throw Error("cannot set "+eo+" and a parent attribute simultaneously");var es,el,eu,eh,ed,ep,eg,em,ey=o[eo];if(("autobinx"===eo||"autobiny"===eo)&&(eo=eo.charAt(eo.length-1)+"bins",ey=Array.isArray(ey)?ey.map(function(i){return function(o,x){return!1===o?_[s[x]][i]:null}}(eo)):!1===ey?s.map(function(i){return function(o){return _[o][i]}}(eo)):null),en[eo]=ey,"LAYOUT"===eo.substr(0,6)){ed=Z(i.layout,eo.replace("LAYOUT","")),ei[eo]=[undefinedToNull(ed.get())],ed.set(Array.isArray(ey)?ey[0]:ey),er.calc=!0;continue}for(es=0,ei[eo]=a0();es<s.length;es++)if(eu=F[s[es]],eh=getFullTrace(s[es]),ep=(ed=makeNP(x._tracePreGUI[eh._fullInput.uid],G)(eu,eo)).get(),void 0!==(eg=Array.isArray(ey)?ey[es%ey.length]:ey)){var ev=ed.parts[ed.parts.length-1],ex=eo.substr(0,eo.length-ev.length-1),e_=ex?ex+".":"",ew=ex?j(eh,ex).get():eh;if((em=J.getTraceValObject(eh,ed.parts))&&em.impliedEdits&&null!==eg)for(var eT in em.impliedEdits)doextra(N.relativeAttr(eo,eT),em.impliedEdits[eT],es);else if(("thicknessmode"===ev||"lenmode"===ev)&&ep!==eg&&("fraction"===eg||"pixels"===eg)&&ew){var ek=x._size,eA=ew.orient,eS="top"===eA||"bottom"===eA;if("thicknessmode"===ev){var eM=eS?ek.h:ek.w;doextra(e_+"thickness",ew.thickness*("fraction"===eg?1/eM:eM),es)}else{var eC=eS?ek.w:ek.h;doextra(e_+"len",ew.len*("fraction"===eg?1/eC:eC),es)}}else if("type"===eo&&("pie"===eg!=("pie"===ep)||"funnelarea"===eg!=("funnelarea"===ep))){var eE="x",eL="y";("bar"===eg||"bar"===ep)&&"h"===eu.orientation&&(eE="y",eL="x"),N.swapAttrs(eu,["?","?src"],"labels",eE),N.swapAttrs(eu,["d?","?0"],"label",eE),N.swapAttrs(eu,["?","?src"],"values",eL),"pie"===ep||"funnelarea"===ep?(j(eu,"marker.color").set(j(eu,"marker.colors").get()),x._pielayer.selectAll("g.trace").remove()):X.traceIs(eu,"cartesian")&&j(eu,"marker.colors").set(j(eu,"marker.color").get())}if(ei[eo][es]=undefinedToNull(ep),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(eo)){if("orientation"===eo){ed.set(eg);var eP=eu.x&&!eu.y?"h":"v";if((ed.get()||eP)===eh.orientation)continue}else"orientationaxes"===eo&&(eu.orientation=({v:"h",h:"v"})[eh.orientation]);ec.swapXYData(eu),er.calc=er.clearAxisTypes=!0}else -1!==$.dataArrayContainers.indexOf(ed.parts[0])?(ec.manageArrayContainers(ed,eg,ei),er.calc=!0):(em?em.arrayOk&&!X.traceIs(eh,"regl")&&(N.isArrayOrTypedArray(eg)||N.isArrayOrTypedArray(ep))?er.calc=!0:ef.update(er,em):er.calc=!0,ed.set(eg))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(eo)&&ee.swap(i,s),"orientationaxes"===eo){var eI=j(i.layout,"hovermode"),eO=eI.get();"x"===eO?eI.set("y"):"y"===eO?eI.set("x"):"x unified"===eO?eI.set("y unified"):"y unified"===eO&&eI.set("x unified")}if(-1!==["orientation","type"].indexOf(eo)){for(es=0,el=[];es<s.length;es++){var eD=F[s[es]];X.traceIs(eD,"cartesian")&&(addToAxlist(eD.xaxis||"x"),addToAxlist(eD.yaxis||"y"))}doextra(el.map(autorangeAttr),!0,0),doextra(el.map(rangeAttr),[0,1],0)}}return(er.calc||er.plot)&&(er.fullReplot=!0),{flags:er,undoit:ei,redoit:en,traces:s,eventData:N.extendDeepNoArrays([],[et,s])}}function cleanDeprecatedAttributeKeys(i){var o,s,x,_=N.counterRegex("axis",".title",!1,!1),F=/colorbar\.title$/,j=Object.keys(i);for(o=0;o<j.length;o++)x=i[s=j[o]],("title"===s||_.test(s)||F.test(s))&&("string"==typeof x||"number"==typeof x)?replace(s,s.replace("title","title.text")):s.indexOf("titlefont")>-1&&-1===s.indexOf("grouptitlefont")?replace(s,s.replace("titlefont","title.font")):s.indexOf("titleposition")>-1?replace(s,s.replace("titleposition","title.position")):s.indexOf("titleside")>-1?replace(s,s.replace("titleside","title.side")):s.indexOf("titleoffset")>-1&&replace(s,s.replace("titleoffset","title.offset"));function replace(o,s){i[s]=i[o],delete i[o]}}function relayout(i,o,s){i=N.getGraphDiv(i),ec.clearPromiseQueue(i);var x={};if("string"==typeof o)x[o]=s;else{if(!N.isPlainObject(o))return N.warn("Relayout fail.",o,s),Promise.reject();x=N.extendFlat({},o)}Object.keys(x).length&&(i.changed=!0);var _=_relayout(i,x),F=_.flags;F.calc&&(i.calcdata=void 0);var j=[$.previousPromises];F.layoutReplot?j.push(eu.layoutReplot):Object.keys(x).length&&(axRangeSupplyDefaultsByPass(i,F,_)||$.supplyDefaults(i),F.legend&&j.push(eu.doLegend),F.layoutstyle&&j.push(eu.layoutStyles),F.axrange&&addAxRangeSequence(j,_.rangesAltered),F.ticks&&j.push(eu.doTicksRelayout),F.modebar&&j.push(eu.doModeBar),F.camera&&j.push(eu.doCamera),F.colorbars&&j.push(eu.doColorBars),j.push(emitAfterPlot)),j.push($.rehover,$.redrag,$.reselect),Z.add(i,relayout,[i,_.undoit],relayout,[i,_.redoit]);var G=N.syncOrAsync(j,i);return G&&G.then||(G=Promise.resolve(i)),G.then(function(){return i.emit("plotly_relayout",_.eventData),i})}function axRangeSupplyDefaultsByPass(i,o,s){var x=i._fullLayout;if(!o.axrange)return!1;for(var _ in o)if("axrange"!==_&&o[_])return!1;for(var F in s.rangesAltered){var N=ee.id2name(F),j=i.layout[N],G=x[N];G.autorange=j.autorange;var Z=G._rangeInitial0,X=G._rangeInitial1;if(void 0===Z&&void 0!==X||void 0!==Z&&void 0===X)return!1;if(j.range&&(G.range=j.range.slice()),G.cleanRange(),G._matchGroup){for(var J in G._matchGroup)if(J!==F){var $=x[ee.id2name(J)];$.autorange=G.autorange,$.range=G.range.slice(),$._input.range=G.range.slice()}}}return!0}function addAxRangeSequence(i,o){var s=o?function(i){var s=[];for(var x in o){var _=ee.getFromId(i,x);if(s.push(x),-1!==(_.ticklabelposition||"").indexOf("inside")&&_._anchorAxis&&s.push(_._anchorAxis._id),_._matchGroup)for(var F in _._matchGroup)o[F]||s.push(F)}return ee.draw(i,s,{skipTitle:!0})}:function(i){return ee.draw(i,"redraw")};i.push(eo,eu.doAutoRangeAndConstraints,s,eu.drawData,eu.finalDraw)}var ep=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,eg=/^[xyz]axis[0-9]*\.autorange$/,em=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function _relayout(i,o){var s,x,_,F,G=i.layout,Z=i._fullLayout,$=Z._guiEditing,et=makeNP(Z._preGUI,$),er=Object.keys(o),en=ee.list(i),ei=N.extendDeepAll({},o),eo={};for(cleanDeprecatedAttributeKeys(o),er=Object.keys(o),x=0;x<er.length;x++)if(0===er[x].indexOf("allaxes")){for(_=0;_<en.length;_++){var es=en[_]._id.substr(1),eu=-1!==es.indexOf("scene")?es+".":"",ed=er[x].replace("allaxes",eu+en[_]._name);o[ed]||(o[ed]=o[er[x]])}delete o[er[x]]}var ey=ef.layoutFlags(),ev={},ex={};function doextra(i,s){if(Array.isArray(i)){i.forEach(function(i){doextra(i,s)});return}if(!(i in o||ec.hasParent(o,i))){var x=et(G,i);i in ex||(ex[i]=undefinedToNull(x.get())),void 0!==s&&x.set(s)}}var e_={};function recordAlteredAxis(i){var o=ee.name2id(i.split(".")[0]);return e_[o]=1,o}for(var ew in o){if(ec.hasParent(o,ew))throw Error("cannot set "+ew+" and a parent attribute simultaneously");for(var eT=et(G,ew),ek=o[ew],eA=eT.parts.length-1;eA>0&&"string"!=typeof eT.parts[eA];)eA--;var eS=eT.parts[eA],eM=eT.parts[eA-1]+"."+eS,eC=eT.parts.slice(0,eA).join("."),eE=j(i.layout,eC).get(),eL=j(Z,eC).get(),eP=eT.get();if(void 0!==ek){ev[ew]=ek,ex[ew]="reverse"===eS?ek:undefinedToNull(eP);var eI=J.getLayoutValObject(Z,eT.parts);if(eI&&eI.impliedEdits&&null!==ek)for(var eO in eI.impliedEdits)doextra(N.relativeAttr(ew,eO),eI.impliedEdits[eO]);if(-1!==["width","height"].indexOf(ew)){if(ek){doextra("autosize",null);var eD="height"===ew?"width":"height";doextra(eD,Z[eD])}else Z[ew]=i._initialAutoSize[ew]}else if("autosize"===ew)doextra("width",ek?null:Z.width),doextra("height",ek?null:Z.height);else if(eM.match(ep))recordAlteredAxis(eM),j(Z,eC+"._inputRange").set(null);else if(eM.match(eg)){recordAlteredAxis(eM),j(Z,eC+"._inputRange").set(null);var eR=j(Z,eC).get();eR._inputDomain&&(eR._input.domain=eR._inputDomain.slice())}else eM.match(em)&&j(Z,eC+"._inputDomain").set(null);if("type"===eS){F=eE;var eB="linear"===eL.type&&"log"===ek,ez="log"===eL.type&&"linear"===ek;if(eB||ez){if(F&&F.range){if(eL.autorange)eB&&(F.range=F.range[1]>F.range[0]?[1,2]:[2,1]);else{var eF=F.range[0],eN=F.range[1];eB?(eF<=0&&eN<=0&&doextra(eC+".autorange",!0),eF<=0?eF=eN/1e6:eN<=0&&(eN=eF/1e6),doextra(eC+".range[0]",Math.log(eF)/Math.LN10),doextra(eC+".range[1]",Math.log(eN)/Math.LN10)):(doextra(eC+".range[0]",Math.pow(10,eF)),doextra(eC+".range[1]",Math.pow(10,eN)))}}else doextra(eC+".autorange",!0);Array.isArray(Z._subplots.polar)&&Z._subplots.polar.length&&Z[eT.parts[0]]&&"radialaxis"===eT.parts[1]&&delete Z[eT.parts[0]]._subplot.viewInitial["radialaxis.range"],X.getComponentMethod("annotations","convertCoords")(i,eL,ek,doextra),X.getComponentMethod("images","convertCoords")(i,eL,ek,doextra)}else doextra(eC+".autorange",!0),doextra(eC+".range",null);j(Z,eC+"._inputRange").set(null)}else if(eS.match(eh)){var ej=j(Z,ew).get(),eU=(ek||{}).type;eU&&"-"!==eU||(eU="linear"),X.getComponentMethod("annotations","convertCoords")(i,ej,eU,doextra),X.getComponentMethod("images","convertCoords")(i,ej,eU,doextra)}var eV=el.containerArrayMatch(ew);if(eV){s=eV.array,x=eV.index;var eH=eV.property,eG=eI||{editType:"calc"};""!==x&&""===eH&&(el.isAddVal(ek)?ex[ew]=null:el.isRemoveVal(ek)?ex[ew]=(j(G,s).get()||[])[x]:N.warn("unrecognized full object value",o)),ef.update(ey,eG),eo[s]||(eo[s]={});var eW=eo[s][x];eW||(eW=eo[s][x]={}),eW[eH]=ek,delete o[ew]}else"reverse"===eS?(eE.range?eE.range.reverse():(doextra(eC+".autorange",!0),eE.range=[1,0]),eL.autorange?ey.calc=!0:ey.plot=!0):("dragmode"===ew&&(!1===ek&&!1!==eP||!1!==ek&&!1===eP)?ey.plot=!0:Z._has("scatter-like")&&Z._has("regl")&&"dragmode"===ew&&("lasso"===ek||"select"===ek)&&!("lasso"===eP||"select"===eP)?ey.plot=!0:Z._has("gl2d")?ey.plot=!0:eI?ef.update(ey,eI):ey.calc=!0,eT.set(ek))}}for(s in eo)el.applyContainerArrayChanges(i,et(G,s),eo[s],ey,et)||(ey.plot=!0);for(var eZ in e_){var eY=(F=ee.getFromId(i,eZ))&&F._constraintGroup;if(eY)for(var eX in ey.calc=!0,eY)e_[eX]||(ee.getFromId(i,eX)._constraintShrinkable=!0)}(updateAutosize(i)||o.height||o.width)&&(ey.plot=!0);var eK=Z.shapes;for(x=0;x<eK.length;x++)if(eK[x].showlegend){ey.calc=!0;break}return(ey.plot||ey.calc)&&(ey.layoutReplot=!0),{flags:ey,rangesAltered:e_,undoit:ex,redoit:ev,eventData:ei}}function updateAutosize(i){var o=i._fullLayout,s=o.width,x=o.height;return i.layout.autosize&&$.plotAutoSize(i,i.layout,o),o.width!==s||o.height!==x}function update(i,s,x,_){i=N.getGraphDiv(i),ec.clearPromiseQueue(i),N.isPlainObject(s)||(s={}),N.isPlainObject(x)||(x={}),Object.keys(s).length&&(i.changed=!0),Object.keys(x).length&&(i.changed=!0);var F=ec.coerceTraceIndices(i,_),j=_restyle(i,N.extendFlat({},s),F),G=j.flags,X=_relayout(i,N.extendFlat({},x)),J=X.flags;(G.calc||J.calc)&&(i.calcdata=void 0),G.clearAxisTypes&&ec.clearAxisTypes(i,F,x);var ee=[];J.layoutReplot?ee.push(eu.layoutReplot):G.fullReplot?ee.push(o._doPlot):(ee.push($.previousPromises),axRangeSupplyDefaultsByPass(i,J,X)||$.supplyDefaults(i),G.style&&ee.push(eu.doTraceStyle),(G.colorbars||J.colorbars)&&ee.push(eu.doColorBars),J.legend&&ee.push(eu.doLegend),J.layoutstyle&&ee.push(eu.layoutStyles),J.axrange&&addAxRangeSequence(ee,X.rangesAltered),J.ticks&&ee.push(eu.doTicksRelayout),J.modebar&&ee.push(eu.doModeBar),J.camera&&ee.push(eu.doCamera),ee.push(emitAfterPlot)),ee.push($.rehover,$.redrag,$.reselect),Z.add(i,update,[i,j.undoit,X.undoit,j.traces],update,[i,j.redoit,X.redoit,j.traces]);var et=N.syncOrAsync(ee,i);return et&&et.then||(et=Promise.resolve(i)),et.then(function(){return i.emit("plotly_update",{data:j.eventData,layout:X.eventData}),i})}function guiEdit(i){return function(o){o._fullLayout._guiEditing=!0;var s=i.apply(null,arguments);return o._fullLayout._guiEditing=!1,s}}var ey=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ev=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function findUIPattern(i,o){for(var s=0;s<o.length;s++){var x=o[s],_=i.match(x.pattern);if(_){var F=_[1]||"";return{head:F,tail:i.substr(F.length+1),attr:x.attr}}}}function getNewRev(i,o){var s=j(o,i).get();if(void 0!==s)return s;var x=i.split(".");for(x.pop();x.length>1;)if(x.pop(),void 0!==(s=j(o,x.join(".")+".uirevision").get()))return s;return o.uirevision}function valsMatch(i,o){var s=N.isPlainObject(i),x=Array.isArray(i);return s||x?(s&&N.isPlainObject(o)||x&&Array.isArray(o))&&JSON.stringify(i)===JSON.stringify(o):i===o}function getDiffFlags(i,o,s,x){var _=x.getValObject,F=x.flags,G=x.immutable,Z=x.inArray,X=x.arrayIndex;function changed(){var i=J.editType;if(Z&&-1!==i.indexOf("arraydraw")){N.pushUnique(F.arrays[Z],X);return}ef.update(F,J),"none"!==i&&F.nChanges++,x.transition&&J.anim&&F.nChangesAnim++,(ep.test(ee)||eg.test(ee))&&(F.rangesAltered[s[0]]=1),em.test(ee)&&j(o,"_inputDomain").set(null),"datarevision"===$&&(F.newDataRevision=1)}function valObjectCanBeDataArray(i){return"data_array"===i.valType||i.arrayOk}for($ in i){if(F.calc&&!x.transition)return;var J,$,ee,et,er=i[$],en=o[$],ei=s.concat($);if(ee=ei.join("."),"_"!==$.charAt(0)&&"function"!=typeof er&&er!==en){if(("tick0"===$||"dtick"===$)&&"geo"!==s[0]){var eo=o.tickmode;if("auto"===eo||"array"===eo||!eo)continue}if(("range"!==$||!o.autorange)&&("zmin"!==$&&"zmax"!==$||"contourcarpet"!==o.type)&&(J=_(ei))&&(!J._compareAsJSON||JSON.stringify(er)!==JSON.stringify(en))){var es=J.valType,el=valObjectCanBeDataArray(J),ec=Array.isArray(er),eu=Array.isArray(en);if(ec&&eu){var eh="_input_"+$,ed=i[eh],ey=o[eh];if(Array.isArray(ed)&&ed===ey)continue}if(void 0===en)el&&ec?F.calc=!0:changed();else if(J._isLinkedToArray){var ev=[],ex=!1;Z||(F.arrays[$]=ev);var e_=Math.min(er.length,en.length),ew=Math.max(er.length,en.length);if(e_!==ew){if("arraydraw"===J.editType)ex=!0;else{changed();continue}}for(et=0;et<e_;et++)getDiffFlags(er[et],en[et],ei.concat(et),N.extendFlat({inArray:$,arrayIndex:et},x));if(ex)for(et=e_;et<ew;et++)ev.push(et)}else!es&&N.isPlainObject(er)?getDiffFlags(er,en,ei,x):el?ec&&eu?(G&&(F.calc=!0),(G||x.newDataRevision)&&changed()):ec!==eu?F.calc=!0:changed():ec&&eu?(er.length!==en.length||String(er)!==String(en))&&changed():changed()}}}for($ in o)if(!($ in i||"_"===$.charAt(0)||"function"==typeof o[$])){if(valObjectCanBeDataArray(J=_(s.concat($)))&&Array.isArray(o[$])){F.calc=!0;return}changed()}}function calcInverseTransform(i){var o=i._fullLayout,s=i.getBoundingClientRect();if(!N.equalDomRects(s,o._lastBBox)){var x=o._invTransform=N.inverseTransformMatrix(N.getFullTransformMatrix(i));o._invScaleX=Math.sqrt(x[0][0]*x[0][0]+x[0][1]*x[0][1]+x[0][2]*x[0][2]),o._invScaleY=Math.sqrt(x[1][0]*x[1][0]+x[1][1]*x[1][1]+x[1][2]*x[1][2]),o._lastBBox=s}}o.animate=function(i,o,s){if(i=N.getGraphDiv(i),!N.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var x=i._transitionData;x._frameQueue||(x._frameQueue=[]);var _=(s=$.supplyAnimationDefaults(s)).transition,F=s.frame;return void 0===x._frameWaitingCnt&&(x._frameWaitingCnt=0),new Promise(function(j,G){var Z,X,J=0;function setTransitionConfig(i){return Array.isArray(_)?J>=_.length?i.transitionOpts=_[J]:i.transitionOpts=_[0]:i.transitionOpts=_,J++,i}var ee=[],et=null==o,er=Array.isArray(o);if(!et&&!er&&N.isPlainObject(o))ee.push({type:"object",data:setTransitionConfig(N.extendFlat({},o))});else if(et||-1!==["string","number"].indexOf(typeof o))for(Z=0;Z<x._frames.length;Z++)(X=x._frames[Z])&&(et||String(X.group)===String(o))&&ee.push({type:"byname",name:String(X.name),data:setTransitionConfig({name:X.name})});else if(er)for(Z=0;Z<o.length;Z++){var en=o[Z];-1!==["number","string"].indexOf(typeof en)?(en=String(en),ee.push({type:"byname",name:en,data:setTransitionConfig({name:en})})):N.isPlainObject(en)&&ee.push({type:"object",data:setTransitionConfig(N.extendFlat({},en))})}for(Z=0;Z<ee.length;Z++)if("byname"===(X=ee[Z]).type&&!x._frameHash[X.data.name]){N.warn('animate failure: frame not found: "'+X.data.name+'"'),G();return}-1!==["next","immediate"].indexOf(s.mode)&&function(){if(0!==x._frameQueue.length){for(;x._frameQueue.length;){var o=x._frameQueue.pop();o.onInterrupt&&o.onInterrupt()}i.emit("plotly_animationinterrupted",[])}}(),"reverse"===s.direction&&ee.reverse();var ei=i._fullLayout._currentFrame;if(ei&&s.fromcurrent){var eo=-1;for(Z=0;Z<ee.length;Z++)if("byname"===(X=ee[Z]).type&&X.name===ei){eo=Z;break}if(eo>0&&eo<ee.length-1){var es=[];for(Z=0;Z<ee.length;Z++)X=ee[Z],("byname"!==ee[Z].type||Z>eo)&&es.push(X);ee=es}}ee.length>0?function(o){if(0!==o.length){for(var N,Z=0;Z<o.length;Z++){ee="byname"===o[Z].type?$.computeFrame(i,o[Z].name):o[Z].data;var X,J,ee,et=(J=Z,Array.isArray(F)?J>=F.length?F[0]:F[J]:F),er=(X=Z,Array.isArray(_)?X>=_.length?_[0]:_[X]:_);er.duration=Math.min(er.duration,et.duration);var en={frame:ee,name:o[Z].name,frameOpts:et,transitionOpts:er};Z===o.length-1&&(en.onComplete=function(i,o){var s=0;return function(){if(i&&2==++s)return i()}}(j,0),en.onInterrupt=G),x._frameQueue.push(en)}"immediate"===s.mode&&(x._lastFrameAt=-1/0),x._animationRaf||(i.emit("plotly_animating"),x._lastFrameAt=-1/0,x._timeToNext=0,x._runningTransitions=0,x._currentFrame=null,(N=function(){x._animationRaf=window.requestAnimationFrame(N),Date.now()-x._lastFrameAt>x._timeToNext&&function(){x._currentFrame&&x._currentFrame.onComplete&&x._currentFrame.onComplete();var o=x._currentFrame=x._frameQueue.shift();if(o){var s=o.name?o.name.toString():null;i._fullLayout._currentFrame=s,x._lastFrameAt=Date.now(),x._timeToNext=o.frameOpts.duration,$.transition(i,o.frame.data,o.frame.layout,ec.coerceTraceIndices(i,o.frame.traces),o.frameOpts,o.transitionOpts).then(function(){o.onComplete&&o.onComplete()}),i.emit("plotly_animatingframe",{name:s,frame:o.frame,animation:{frame:o.frameOpts,transition:o.transitionOpts}})}else i.emit("plotly_animated"),window.cancelAnimationFrame(x._animationRaf),x._animationRaf=null}()})())}}(ee):(i.emit("plotly_animated"),j())})},o.addFrames=function(i,o,s){if(i=N.getGraphDiv(i),null==o)return Promise.resolve();if(!N.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var x,_,F,j,G=i._transitionData._frames,X=i._transitionData._frameHash;if(!Array.isArray(o))throw Error("addFrames failure: frameList must be an Array of frame definitions"+o);var J=G.length+2*o.length,ee=[],et={};for(x=o.length-1;x>=0;x--)if(N.isPlainObject(o[x])){var er=o[x].name,en=(X[er]||et[er]||{}).name,ei=o[x].name,eo=X[en]||et[en];en&&ei&&"number"==typeof ei&&eo&&ed<5&&(ed++,N.warn('addFrames: overwriting frame "'+(X[en]||et[en]).name+'" with a frame whose name of type "number" also equates to "'+en+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===ed&&N.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),et[er]={name:er},ee.push({frame:$.supplyFrameDefaults(o[x]),index:s&&void 0!==s[x]&&null!==s[x]?s[x]:J+x})}ee.sort(function(i,o){return i.index>o.index?-1:i.index<o.index?1:0});var es=[],el=[],ec=G.length;for(x=ee.length-1;x>=0;x--){if("number"==typeof(_=ee[x].frame).name&&N.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!_.name)for(;X[_.name="frame "+i._transitionData._counter++];);if(X[_.name]){for(F=0;F<G.length&&(G[F]||{}).name!==_.name;F++);es.push({type:"replace",index:F,value:_}),el.unshift({type:"replace",index:F,value:G[F]})}else j=Math.max(0,Math.min(ee[x].index,ec)),es.push({type:"insert",index:j,value:_}),el.unshift({type:"delete",index:j}),ec++}var eu=$.modifyFrames,ef=$.modifyFrames,eh=[i,el],ep=[i,es];return Z&&Z.add(i,eu,eh,ef,ep),$.modifyFrames(i,es)},o.deleteFrames=function(i,o){if(i=N.getGraphDiv(i),!N.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i);var s,x,_=i._transitionData._frames,F=[],j=[];if(!o)for(s=0,o=[];s<_.length;s++)o.push(s);for((o=o.slice()).sort(),s=o.length-1;s>=0;s--)x=o[s],F.push({type:"delete",index:x}),j.unshift({type:"insert",index:x,value:_[x]});var G=$.modifyFrames,X=$.modifyFrames,J=[i,j],ee=[i,F];return Z&&Z.add(i,G,J,X,ee),$.modifyFrames(i,F)},o.addTraces=function addTraces(i,s,x){i=N.getGraphDiv(i);var _,F,j=[],G=o.deleteTraces,X=[i,j],J=[i,s];for(function(i,o,s){var x,_;if(!Array.isArray(i.data))throw Error("gd.data must be an array.");if(void 0===o)throw Error("traces must be defined.");for(Array.isArray(o)||(o=[o]),x=0;x<o.length;x++)if("object"!=typeof(_=o[x])||Array.isArray(_)||null===_)throw Error("all values in traces array must be non-array objects");if(void 0===s||Array.isArray(s)||(s=[s]),void 0!==s&&s.length!==o.length)throw Error("if indices is specified, traces.length must equal indices.length")}(i,s,x),Array.isArray(s)||(s=[s]),s=s.map(function(i){return N.extendFlat({},i)}),ec.cleanData(s),_=0;_<s.length;_++)i.data.push(s[_]);for(_=0;_<s.length;_++)j.push(-s.length+_);if(void 0===x)return F=o.redraw(i),Z.add(i,G,X,addTraces,J),F;Array.isArray(x)||(x=[x]);try{checkMoveTracesArgs(i,j,x)}catch(o){throw i.data.splice(i.data.length-s.length,s.length),o}return Z.startSequence(i),Z.add(i,G,X,addTraces,J),F=o.moveTraces(i,j,x),Z.stopSequence(i),F},o.deleteTraces=function deleteTraces(i,s){i=N.getGraphDiv(i);var x,_,F=[],j=o.addTraces,G=[i,F,s],X=[i,s];if(void 0===s)throw Error("indices must be an integer or array of integers.");for(Array.isArray(s)||(s=[s]),assertIndexArray(i,s,"indices"),(s=positivifyIndices(s,i.data.length-1)).sort(N.sorterDes),x=0;x<s.length;x+=1)_=i.data.splice(s[x],1)[0],F.push(_);var J=o.redraw(i);return Z.add(i,j,G,deleteTraces,X),J},o.extendTraces=function extendTraces(i,s,x,_){var F=spliceTraces(i=N.getGraphDiv(i),s,x,_,function(i,o,s){var x,_;if(N.isTypedArray(i)){if(s<0){var F=new i.constructor(0),j=concatTypedArray(i,o);s<0?(x=j,_=F):(x=F,_=j)}else if(x=new i.constructor(s),_=new i.constructor(i.length+o.length-s),s===o.length)x.set(o),_.set(i);else if(s<o.length){var G=o.length-s;x.set(o.subarray(G)),_.set(i),_.set(o.subarray(0,G),i.length)}else{var Z=s-o.length,X=i.length-Z;x.set(i.subarray(X)),x.set(o,Z),_.set(i.subarray(0,X))}}else x=i.concat(o),_=s>=0&&s<x.length?x.splice(0,x.length-s):[];return[x,_]}),j=o.redraw(i),G=[i,F.update,x,F.maxPoints];return Z.add(i,o.prependTraces,G,extendTraces,arguments),j},o.moveTraces=function moveTraces(i,s,x){i=N.getGraphDiv(i);var _,F=[],j=[],G=[i,x,s],X=[i,s,x];if(checkMoveTracesArgs(i,s,x),s=Array.isArray(s)?s:[s],void 0===x)for(_=0,x=[];_<s.length;_++)x.push(-s.length+_);for(_=0,x=Array.isArray(x)?x:[x],s=positivifyIndices(s,i.data.length-1),x=positivifyIndices(x,i.data.length-1);_<i.data.length;_++)-1===s.indexOf(_)&&F.push(i.data[_]);for(_=0;_<s.length;_++)j.push({newIndex:x[_],trace:i.data[s[_]]});for(j.sort(function(i,o){return i.newIndex-o.newIndex}),_=0;_<j.length;_+=1)F.splice(j[_].newIndex,0,j[_].trace);i.data=F;var J=o.redraw(i);return Z.add(i,moveTraces,G,moveTraces,X),J},o.prependTraces=function prependTraces(i,s,x,_){var F=spliceTraces(i=N.getGraphDiv(i),s,x,_,function(i,o,s){var x,_;if(N.isTypedArray(i)){if(s<=0){var F=new i.constructor(0),j=concatTypedArray(o,i);s<0?(x=j,_=F):(x=F,_=j)}else if(x=new i.constructor(s),_=new i.constructor(i.length+o.length-s),s===o.length)x.set(o),_.set(i);else if(s<o.length){var G=o.length-s;x.set(o.subarray(0,G)),_.set(o.subarray(G)),_.set(i,G)}else{var Z=s-o.length;x.set(o),x.set(i.subarray(0,Z),o.length),_.set(i.subarray(Z))}}else x=o.concat(i),_=s>=0&&s<x.length?x.splice(s,x.length):[];return[x,_]}),j=o.redraw(i),G=[i,F.update,x,F.maxPoints];return Z.add(i,o.extendTraces,G,prependTraces,arguments),j},o.newPlot=function(i,s,x,_){return i=N.getGraphDiv(i),$.cleanPlot([],{},i._fullData||[],i._fullLayout||{}),$.purge(i),o._doPlot(i,s,x,_)},o._doPlot=function(i,s,_,F){if(i=N.getGraphDiv(i),G.init(i),N.isPlainObject(s)){var j,Z=s;s=Z.data,_=Z.layout,F=Z.config,j=Z.frames}if(!1===G.triggerHandler(i,"plotly_beforeplot",[s,_,F]))return Promise.reject();s||_||N.isPlotDiv(i)||N.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),setPlotContext(i,F),_||(_={}),x.select(i).classed("js-plotly-plot",!0),et.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var J=0===(i.data||[]).length&&Array.isArray(s);Array.isArray(s)&&(ec.cleanData(s),J?i.data=s:i.data.push.apply(i.data,s),i.empty=!1),(!i.layout||J)&&(i.layout=ec.cleanLayout(_)),$.supplyDefaults(i);var er=i._fullLayout,eo=er._has("cartesian");er._replotting=!0,(J||er._shouldCreateBgLayer)&&(function(i){var o=x.select(i),s=i._fullLayout;if(s._calcInverseTransform=calcInverseTransform,s._calcInverseTransform(i),s._container=o.selectAll(".plot-container").data([0]),s._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),s._paperdiv=s._container.selectAll(".svg-container").data([0]),s._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),s._glcontainer=s._paperdiv.selectAll(".gl-container").data([{}]),s._glcontainer.enter().append("div").classed("gl-container",!0),s._paperdiv.selectAll(".main-svg").remove(),s._paperdiv.select(".modebar-container").remove(),s._paper=s._paperdiv.insert("svg",":first-child").classed("main-svg",!0),s._toppaper=s._paperdiv.append("svg").classed("main-svg",!0),s._modebardiv=s._paperdiv.append("div"),delete s._modeBar,s._hoverpaper=s._paperdiv.append("svg").classed("main-svg",!0),!s._uid){var _={};x.selectAll("defs").each(function(){this.id&&(_[this.id.split("-")[1]]=1)}),s._uid=N.randstr(_)}s._paperdiv.selectAll(".main-svg").attr(ei.svgAttrs),s._defs=s._paper.append("defs").attr("id","defs-"+s._uid),s._clips=s._defs.append("g").classed("clips",!0),s._topdefs=s._toppaper.append("defs").attr("id","topdefs-"+s._uid),s._topclips=s._topdefs.append("g").classed("clips",!0),s._bgLayer=s._paper.append("g").classed("bglayer",!0),s._draggers=s._paper.append("g").classed("draglayer",!0);var F=s._paper.append("g").classed("layer-below",!0);s._imageLowerLayer=F.append("g").classed("imagelayer",!0),s._shapeLowerLayer=F.append("g").classed("shapelayer",!0),s._cartesianlayer=s._paper.append("g").classed("cartesianlayer",!0),s._polarlayer=s._paper.append("g").classed("polarlayer",!0),s._smithlayer=s._paper.append("g").classed("smithlayer",!0),s._ternarylayer=s._paper.append("g").classed("ternarylayer",!0),s._geolayer=s._paper.append("g").classed("geolayer",!0),s._funnelarealayer=s._paper.append("g").classed("funnelarealayer",!0),s._pielayer=s._paper.append("g").classed("pielayer",!0),s._iciclelayer=s._paper.append("g").classed("iciclelayer",!0),s._treemaplayer=s._paper.append("g").classed("treemaplayer",!0),s._sunburstlayer=s._paper.append("g").classed("sunburstlayer",!0),s._indicatorlayer=s._toppaper.append("g").classed("indicatorlayer",!0),s._glimages=s._paper.append("g").classed("glimages",!0);var j=s._toppaper.append("g").classed("layer-above",!0);s._imageUpperLayer=j.append("g").classed("imagelayer",!0),s._shapeUpperLayer=j.append("g").classed("shapelayer",!0),s._selectionLayer=s._toppaper.append("g").classed("selectionlayer",!0),s._infolayer=s._toppaper.append("g").classed("infolayer",!0),s._menulayer=s._toppaper.append("g").classed("menulayer",!0),s._zoomlayer=s._toppaper.append("g").classed("zoomlayer",!0),s._hoverlayer=s._hoverpaper.append("g").classed("hoverlayer",!0),s._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),i.emit("plotly_framework")}(i),er._shouldCreateBgLayer&&delete er._shouldCreateBgLayer),et.initGradients(i),et.initPatterns(i),J&&ee.saveShowSpikeInitial(i);var es=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;es&&$.doCalcdata(i);for(var el=0;el<i.calcdata.length;el++)i.calcdata[el][0].trace=i._fullData[el];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){N.isHidden(i)||$.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):N.clearResponsive(i);var ef=N.extendFlat({},er._size),eh=0;function marginPushers(){if($.clearAutoMarginIds(i),eu.drawMarginPushers(i),ee.allowAutoMargin(i),i._fullLayout.title.text&&i._fullLayout.title.automargin&&$.allowAutoMargin(i,"title.automargin"),er._has("pie"))for(var o=i._fullData,s=0;s<o.length;s++){var x=o[s];"pie"===x.type&&x.automargin&&$.allowAutoMargin(i,"pie."+x.uid+".automargin")}return $.doAutoMargin(i),$.previousPromises(i)}function doAutoRangeAndConstraints(){i._transitioning||(eu.doAutoRangeAndConstraints(i),J&&ee.saveRangeInitial(i),X.getComponentMethod("rangeslider","calcAutorange")(i))}var ed=[$.previousPromises,function(){if(j)return o.addFrames(i,j)},function drawFramework(){for(var o=er._basePlotModules,s=0;s<o.length;s++)o[s].drawFramework&&o[s].drawFramework(i);!er._glcanvas&&er._has("gl")&&(er._glcanvas=er._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(i){return i.key}),er._glcanvas.enter().append("canvas").attr("class",function(i){return"gl-canvas gl-canvas-"+i.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var x=i._context.plotGlPixelRatio;if(er._glcanvas){er._glcanvas.attr("width",er.width*x).attr("height",er.height*x).style("width",er.width+"px").style("height",er.height+"px");var _=er._glcanvas.data()[0].regl;if(_&&(Math.floor(er.width*x)!==_._gl.drawingBufferWidth||Math.floor(er.height*x)!==_._gl.drawingBufferHeight)){var F="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!eh)return N.log(F+" Clearing graph and plotting again."),$.cleanPlot([],{},i._fullData,er),$.supplyDefaults(i),er=i._fullLayout,$.doCalcdata(i),eh++,drawFramework();N.error(F)}}return"h"===er.modebar.orientation?er._modebardiv.style("height",null).style("width","100%"):er._modebardiv.style("width",null).style("height",er.height+"px"),$.previousPromises(i)},marginPushers,function(){if($.didMarginChange(ef,er._size))return N.syncOrAsync([marginPushers,eu.layoutStyles],i)}];eo&&ed.push(function(){if(!es){doAutoRangeAndConstraints();return}return N.syncOrAsync([X.getComponentMethod("shapes","calcAutorange"),X.getComponentMethod("annotations","calcAutorange"),doAutoRangeAndConstraints],i)}),ed.push(eu.layoutStyles),eo&&ed.push(function(){return ee.draw(i,J?"":"redraw")},function(i){i._fullLayout._insideTickLabelsAutorange&&relayout(i,i._fullLayout._insideTickLabelsAutorange).then(function(){i._fullLayout._insideTickLabelsAutorange=void 0})}),ed.push(eu.drawData,eu.finalDraw,en,$.addLinks,$.rehover,$.redrag,$.reselect,$.doAutoMargin,function(i){i._fullLayout._insideTickLabelsAutorange&&J&&ee.saveRangeInitial(i,!0)},$.previousPromises);var ep=N.syncOrAsync(ed,i);return ep&&ep.then||(ep=Promise.resolve()),ep.then(function(){return emitAfterPlot(i),i})},o.purge=function(i){var o=(i=N.getGraphDiv(i))._fullLayout||{},s=i._fullData||[];return $.cleanPlot([],{},s,o),$.purge(i),G.purge(i),o._container&&o._container.remove(),delete i._context,i},o.react=function(i,s,x,_){i=N.getGraphDiv(i),ec.clearPromiseQueue(i);var F,G,Z=i._fullData,ee=i._fullLayout;if(N.isPlotDiv(i)&&Z&&ee){if(N.isPlainObject(s)){var et,er,en=s;s=en.data,x=en.layout,_=en.config,F=en.frames}var ei=!1;if(_){var eo=N.extendDeep({},i._context);i._context=void 0,setPlotContext(i,_),ei=function diffConfig(i,o){var s;for(s in i)if("_"!==s.charAt(0)){var x=i[s],_=o[s];if(x!==_){if(N.isPlainObject(x)&&N.isPlainObject(_)){if(diffConfig(x,_))return!0}else{if(!(Array.isArray(x)&&Array.isArray(_))||x.length!==_.length)return!0;for(var F=0;F<x.length;F++)if(x[F]!==_[F]&&(!(N.isPlainObject(x[F])&&N.isPlainObject(_[F]))||diffConfig(x[F],_[F])))return!0}}}}(eo,i._context)}i.data=s||[],ec.cleanData(i.data),i.layout=x||{},ec.cleanLayout(i.layout),function(i,o,s,x){var _=x._preGUI,F=[],G={},Z={};for(es in _){if(ef=findUIPattern(es,ey)){if(eg=ef.head,em=ef.tail,(eu=(ec=j(x,el=ef.attr||eg+".uirevision").get())&&getNewRev(el,o))&&eu===ec){if(null===(eh=_[es])&&(eh=void 0),valsMatch(ep=(ed=j(o,es)).get(),eh)){void 0===ep&&"autorange"===em&&F.push(eg),ed.set(undefinedToNull(j(x,es).get()));continue}if("autorange"===em||"range["===em.substr(0,6)){var X=_[eg+".range[0]"],J=_[eg+".range[1]"],$=_[eg+".autorange"];if($||null===$&&null===X&&null===J){if(!(eg in G)){var ee=j(o,eg).get();G[eg]=ee&&(ee.autorange||!1!==ee.autorange&&(!ee.range||2!==ee.range.length))}if(G[eg]){ed.set(undefinedToNull(j(x,es).get()));continue}}}}}else N.warn("unrecognized GUI edit: "+es);delete _[es],ef&&"range["===ef.tail.substr(0,6)&&(Z[ef.head]=1)}for(var et=0;et<F.length;et++){var er=F[et];if(Z[er]){var en=j(o,er).get();en&&delete en.autorange}}var ei=x._tracePreGUI;for(var eo in ei){var es,el,ec,eu,ef,eh,ed,ep,eg,em,ex,e_=ei[eo],ew=null;for(es in e_){if(!ew){var eT=function(i,o){for(var s=0;s<o.length;s++)if(o[s]._fullInput.uid===i)return s;return -1}(eo,s);if(eT<0){delete ei[eo];break}var ek=function(i,o,s){for(var x=0;x<o.length;x++)if(o[x].uid===i)return x;return!o[s]||o[s].uid?-1:s}(eo,i,(ex=s[eT]._fullInput).index);if(ek<0){delete ei[eo];break}ew=i[ek]}if(ef=findUIPattern(es,ev)){if(ef.attr?eu=(ec=j(x,ef.attr).get())&&getNewRev(ef.attr,o):(ec=ex.uirevision,void 0===(eu=ew.uirevision)&&(eu=o.uirevision)),eu&&eu===ec&&(null===(eh=e_[es])&&(eh=void 0),valsMatch(ep=(ed=j(ew,es)).get(),eh))){ed.set(undefinedToNull(j(ex,es).get()));continue}}else N.warn("unrecognized GUI edit: "+es+" in trace uid "+eo);delete e_[es]}}}(i.data,i.layout,Z,ee),$.supplyDefaults(i,{skipUpdateCalc:!0});var es=i._fullData,el=i._fullLayout,eh=void 0===el.datarevision,ed=el.transition,ep=(et=i,(er=ef.layoutFlags()).arrays={},er.rangesAltered={},er.nChanges=0,er.nChangesAnim=0,getDiffFlags(ee,el,[],{getValObject:function(i){return J.getLayoutValObject(el,i)},flags:er,immutable:eh,transition:ed,gd:et}),(er.plot||er.calc)&&(er.layoutReplot=!0),ed&&er.nChanges&&er.nChangesAnim&&(er.anim=er.nChanges===er.nChangesAnim?"all":"some"),er),eg=ep.newDataRevision,em=function(i,o,s,x,_,F){var N,j,G=o.length===s.length;if(!_&&!G)return{fullReplot:!0,calc:!0};var Z=ef.traceFlags();Z.arrays={},Z.nChanges=0,Z.nChangesAnim=0;var X={getValObject:function(i){var o=J.getTraceValObject(j,i);return!j._module.animatable&&o.anim&&(o.anim=!1),o},flags:Z,immutable:x,transition:_,newDataRevision:F,gd:i},ee={};for(N=0;N<o.length;N++)if(s[N]){if(j=s[N]._fullInput,$.hasMakesDataTransform(j)&&(j=s[N]),ee[j.uid])continue;ee[j.uid]=1,getDiffFlags(o[N]._fullInput,j,[],X)}return(Z.calc||Z.plot)&&(Z.fullReplot=!0),_&&Z.nChanges&&Z.nChangesAnim&&(Z.anim=Z.nChanges===Z.nChangesAnim&&G?"all":"some"),Z}(i,Z,es,eh,ed,eg);if(updateAutosize(i)&&(ep.layoutReplot=!0),em.calc||ep.calc){i.calcdata=void 0;for(var ex=Object.getOwnPropertyNames(el),e_=0;e_<ex.length;e_++){var ew=ex[e_],eT=ew.substring(0,5);if("xaxis"===eT||"yaxis"===eT){var ek=el[ew]._emptyCategories;ek&&ek()}}}else $.supplyDefaultsUpdateCalc(i.calcdata,es);var eA=[];if(F&&(i._transitionData={},$.createTransitionData(i),eA.push(function(){return o.addFrames(i,F)})),el.transition&&!ei&&(em.anim||ep.anim))ep.ticks&&eA.push(eu.doTicksRelayout),$.doCalcdata(i),eu.doAutoRangeAndConstraints(i),eA.push(function(){return $.transitionFromReact(i,em,ep,ee)});else if(em.fullReplot||ep.layoutReplot||ei)i._fullLayout._skipDefaults=!0,eA.push(o._doPlot);else{for(var eS in ep.arrays){var eM=ep.arrays[eS];if(eM.length){var eC=X.getComponentMethod(eS,"drawOne");if(eC!==N.noop)for(var eE=0;eE<eM.length;eE++)eC(i,eM[eE]);else{var eL=X.getComponentMethod(eS,"draw");if(eL===N.noop)throw Error("cannot draw components: "+eS);eL(i)}}}eA.push($.previousPromises),em.style&&eA.push(eu.doTraceStyle),(em.colorbars||ep.colorbars)&&eA.push(eu.doColorBars),ep.legend&&eA.push(eu.doLegend),ep.layoutstyle&&eA.push(eu.layoutStyles),ep.axrange&&addAxRangeSequence(eA),ep.ticks&&eA.push(eu.doTicksRelayout),ep.modebar&&eA.push(eu.doModeBar),ep.camera&&eA.push(eu.doCamera),eA.push(emitAfterPlot)}eA.push($.rehover,$.redrag,$.reselect),(G=N.syncOrAsync(eA,i))&&G.then||(G=Promise.resolve(i))}else G=o.newPlot(i,s,x,_);return G.then(function(){return i.emit("plotly_react",{data:s,layout:x}),i})},o.redraw=function(i){if(i=N.getGraphDiv(i),!N.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i);return ec.cleanData(i.data),ec.cleanLayout(i.layout),i.calcdata=void 0,o._doPlot(i).then(function(){return i.emit("plotly_redraw"),i})},o.relayout=relayout,o.restyle=restyle,o.setPlotConfig=function(i){return N.extendFlat(es,i)},o.update=update,o._guiRelayout=guiEdit(relayout),o._guiRestyle=guiEdit(restyle),o._guiUpdate=guiEdit(update),o._storeDirectGUIEdit=function(i,o,s){for(var x in s){var _=j(i,x);storeCurrent(x,_.get(),s[x],o)}}},72075:function(i){"use strict";var o={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};(function crawl(i,o){for(var s in i){var x=i[s];x.valType?o[s]=x.dflt:(o[s]||(o[s]={}),crawl(x,o[s]))}})(o,s),i.exports={configAttributes:o,dfltConfig:s}},86281:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(9012),N=s(10820),j=s(31391),G=s(85594),Z=s(72075).configAttributes,X=s(30962),J=_.extendDeepAll,$=_.isPlainObject,ee=_.isArrayOrTypedArray,et=_.nestedProperty,er=_.valObjectMeta,en="_isSubplotObj",ei="_isLinkedToArray",eo="_deprecated",es=[en,ei,"_arrayAttrRegexps",eo];function recurseIntoValObject(i,o,s){if(!i)return!1;if(i._isLinkedToArray){if(isIndex(o[s]))s++;else if(s<o.length)return!1}for(;s<o.length;s++){var x=i[o[s]];if($(x))i=x;else break;if(s===o.length-1)break;if(i._isLinkedToArray){if(!isIndex(o[++s]))return!1}else if("info_array"===i.valType){var _=o[++s];if(!isIndex(_))return!1;var F=i.items;if(Array.isArray(F)){if(_>=F.length)return!1;if(2===i.dimensions){if(s++,o.length===s)return i;var N=o[s];if(!isIndex(N))return!1;i=F[_][N]}else i=F[_]}else i=F}}return i}function isIndex(i){return i===Math.round(i)&&i>=0}function formatAttributes(i){return o.crawl(i,function(i,s,x){o.isValObject(i)?(!0===i.arrayOk||"data_array"===i.valType)&&(x[s+"src"]={valType:"string",editType:"none"}):$(i)&&(i.role="object")}),o.crawl(i,function(i,o,s){if(i){var x=i[ei];x&&(delete i[ei],s[o]={items:{}},s[o].items[x]=i,s[o].role="object")}}),function walk(i){for(var o in i)if($(i[o]))walk(i[o]);else if(Array.isArray(i[o]))for(var s=0;s<i[o].length;s++)walk(i[o][s]);else i[o]instanceof RegExp&&(i[o]=i[o].toString())}(i),i}function handleBasePlotModule(i,o,s){var x=et(i,s),_=J({},o.layoutAttributes);_[en]=!0,x.set(_)}function insertAttrs(i,o,s){var x=et(i,s);x.set(J(x.get()||{},o))}o.IS_SUBPLOT_OBJ=en,o.IS_LINKED_TO_ARRAY=ei,o.DEPRECATED=eo,o.UNDERSCORE_ATTRS=es,o.get=function(){var i,s={};x.allTypes.forEach(function(i){s[i]=function(i){_=(s=x.modules[i]._module).basePlotModule;var s,_,N={};N.type=null;var j=J({},F),G=J({},s.attributes);o.crawl(G,function(i,o,s,x,_){et(j,_).set(void 0),void 0===i&&et(G,_).set(void 0)}),J(N,j),x.traceIs(i,"noOpacity")&&delete N.opacity,x.traceIs(i,"showLegend")||(delete N.showlegend,delete N.legendgroup),x.traceIs(i,"noHover")&&(delete N.hoverinfo,delete N.hoverlabel),s.selectPoints||delete N.selectedpoints,J(N,G),_.attributes&&J(N,_.attributes),N.type=i;var Z={meta:s.meta||{},categories:s.categories||{},animatable:!!s.animatable,type:i,attributes:formatAttributes(N)};if(s.layoutAttributes){var X={};J(X,s.layoutAttributes),Z.layoutAttributes=formatAttributes(X)}return s.animatable||o.crawl(Z,function(i){o.isValObject(i)&&"anim"in i&&delete i.anim}),Z}(i)});var _={};return Object.keys(x.transformsRegistry).forEach(function(i){var o;_[i]=(o=J({},x.transformsRegistry[i].attributes),Object.keys(x.componentsRegistry).forEach(function(s){var _=x.componentsRegistry[s];_.schema&&_.schema.transforms&&_.schema.transforms[i]&&Object.keys(_.schema.transforms[i]).forEach(function(s){insertAttrs(o,_.schema.transforms[i][s],s)})}),{attributes:formatAttributes(o)})}),{defs:{valObjects:er,metaKeys:es.concat(["description","role","editType","impliedEdits"]),editType:{traces:X.traces,layout:X.layout},impliedEdits:{}},traces:s,layout:function(){var i,o,s={};for(i in J(s,N),x.subplotsRegistry)if((o=x.subplotsRegistry[i]).layoutAttributes){if(Array.isArray(o.attr))for(var _=0;_<o.attr.length;_++)handleBasePlotModule(s,o,o.attr[_]);else{var F="subplot"===o.attr?o.name:o.attr;handleBasePlotModule(s,o,F)}}for(i in x.componentsRegistry){var j=(o=x.componentsRegistry[i]).schema;if(j&&(j.subplots||j.layout)){var G=j.subplots;if(G&&G.xaxis&&!G.yaxis)for(var Z in G.xaxis)delete s.yaxis[Z];delete s.xaxis.shift,delete s.xaxis.autoshift}else"colorscale"===o.name?J(s,o.layoutAttributes):o.layoutAttributes&&insertAttrs(s,o.layoutAttributes,o.name)}return{layoutAttributes:formatAttributes(s)}}(),transforms:_,frames:(formatAttributes(i={frames:J({},j)}),i.frames),animation:formatAttributes(G),config:formatAttributes(Z)}},o.crawl=function(i,s,x,_){var F=x||0;_=_||"",Object.keys(i).forEach(function(x){var N=i[x];if(-1===es.indexOf(x)){var j=(_?_+".":"")+x;s(N,x,i,F,j),!o.isValObject(N)&&$(N)&&"impliedEdits"!==x&&o.crawl(N,s,F+1,j)}})},o.isValObject=function(i){return i&&void 0!==i.valType},o.findArrayAttributes=function(i){var s,x,_=[],N=[],j=[];function callback(i,o,F,G){N=N.slice(0,G).concat([o]),j=j.slice(0,G).concat([i&&i._isLinkedToArray]),i&&("data_array"===i.valType||!0===i.arrayOk)&&!("colorbar"===N[G-1]&&("ticktext"===o||"tickvals"===o))&&function crawlIntoTrace(i,o,s){var F=i[N[o]],G=s+N[o];if(o===N.length-1)ee(F)&&_.push(x+G);else if(j[o]){if(Array.isArray(F))for(var Z=0;Z<F.length;Z++)$(F[Z])&&crawlIntoTrace(F[Z],o+1,G+"["+Z+"].")}else $(F)&&crawlIntoTrace(F,o+1,G+".")}(s,0,"")}s=i,x="",o.crawl(F,callback),i._module&&i._module.attributes&&o.crawl(i._module.attributes,callback);var G=i.transforms;if(G)for(var Z=0;Z<G.length;Z++){var X=G[Z],J=X._module;J&&(x="transforms["+Z+"].",s=X,o.crawl(J.attributes,callback))}return _},o.getTraceValObject=function(i,o){var s,_,N=o[0],j=1;if("transforms"===N){if(1===o.length)return F.transforms;var G=i.transforms;if(!Array.isArray(G)||!G.length)return!1;var Z=o[1];if(!isIndex(Z)||Z>=G.length)return!1;_=(s=(x.transformsRegistry[G[Z].type]||{}).attributes)&&s[o[2]],j=3}else{var X=i._module;if(X||(X=(x.modules[i.type||F.type.dflt]||{})._module),!X)return!1;if(!(_=(s=X.attributes)&&s[N])){var J=X.basePlotModule;J&&J.attributes&&(_=J.attributes[N])}_||(_=F[N])}return recurseIntoValObject(_,o,j)},o.getLayoutValObject=function(i,o){return recurseIntoValObject(function(i,o){var s,_,F,j,G,Z=i._basePlotModules;if(Z){for(s=0;s<Z.length;s++){if((F=Z[s]).attrRegex&&F.attrRegex.test(o)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!G&&F.layoutAttributes&&(G=F.layoutAttributes)}var X=F.baseLayoutAttrOverrides;if(X&&o in X)return X[o]}if(G)return G}var J=i._modules;if(J){for(s=0;s<J.length;s++)if((j=J[s].layoutAttributes)&&o in j)return j[o]}for(_ in x.componentsRegistry){if("colorscale"===(F=x.componentsRegistry[_]).name&&0===o.indexOf("coloraxis"))return F.layoutAttributes[o];if(!F.schema&&o===F.name)return F.layoutAttributes}return o in N&&N[o]}(i,o[0]),o,1)}},44467:function(i,o,s){"use strict";var x=s(71828),_=s(9012),F="templateitemname",N={name:{valType:"string",editType:"none"}};function validItemName(i){return i&&"string"==typeof i}function arrayDefaultKey(i){var o=i.length-1;return"s"!==i.charAt(o)&&x.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}N[F]={valType:"string",editType:"calc"},o.templatedArray=function(i,o){return o._isLinkedToArray=i,o.name=N.name,o[F]=N[F],o},o.traceTemplater=function(i){var o,s,F={};for(o in i)Array.isArray(s=i[o])&&s.length&&(F[o]=0);return{newTrace:function(N){var j={type:o=x.coerce(N,{},_,"type"),_template:null};if(o in F){s=i[o];var G=F[o]%s.length;F[o]++,j._template=s[G]}return j}}},o.newContainer=function(i,o,s){var _=i._template,F=_&&(_[o]||s&&_[s]);return x.isPlainObject(F)||(F=null),i[o]={_template:F}},o.arrayTemplater=function(i,o,s){var x=i._template,_=x&&x[arrayDefaultKey(o)],N=x&&x[o];Array.isArray(N)&&N.length||(N=[]);var j={};return{newItem:function(i){var o={name:i.name,_input:i},x=o[F]=i[F];if(!validItemName(x))return o._template=_,o;for(var G=0;G<N.length;G++){var Z=N[G];if(Z.name===x)return j[x]=1,o._template=Z,o}return o[s]=i[s]||!1,o._template=!1,o},defaultItems:function(){for(var i=[],o=0;o<N.length;o++){var s=N[o],x=s.name;if(validItemName(x)&&!j[x]){var _={_template:s,name:x,_input:{_templateitemname:x}};_[F]=s[F],i.push(_),j[x]=1}}return i}}},o.arrayDefaultKey=arrayDefaultKey,o.arrayEditor=function(i,o,s){var _,N=(x.nestedProperty(i,o).get()||[]).length,j=s._index,G=j>=N&&(s._input||{})._templateitemname;G&&(j=N);var Z=o+"["+j+"]";function resetUpdate(){_={},G&&(_[Z]={},_[Z][F]=G)}function modifyItem(i,o){G?x.nestedProperty(_[Z],i).set(o):_[Z+"."+i]=o}function getUpdateObj(){var i=_;return resetUpdate(),i}return resetUpdate(),{modifyBase:function(i,o){_[i]=o},modifyItem:modifyItem,getUpdateObj:getUpdateObj,applyUpdate:function(o,s){o&&modifyItem(o,s);var _=getUpdateObj();for(var F in _)x.nestedProperty(i,F).set(_[F])}}}},61549:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(74875),N=s(71828),j=s(63893),G=s(33306),Z=s(7901),X=s(91424),J=s(92998),$=s(64168),ee=s(89298),et=s(18783),er=s(99082),en=er.enforce,ei=er.clean,eo=s(71739).doAutoRange,es="start";function lsInner(i){var s,_,j,G,J,er,en,ei,eo,es,el,ec,eu,ef=i._fullLayout,eh=ef._size,ed=eh.p,ep=ee.list(i,"",!0);if(ef._paperdiv.style({width:i._context.responsive&&ef.autosize&&!i._context._hasZeroWidth&&!i.layout.width?"100%":ef.width+"px",height:i._context.responsive&&ef.autosize&&!i._context._hasZeroHeight&&!i.layout.height?"100%":ef.height+"px"}).selectAll(".main-svg").call(X.setSize,ef.width,ef.height),i._context.setBackground(i,ef.paper_bgcolor),o.drawMainTitle(i),$.manage(i),!ef._has("cartesian"))return F.previousPromises(i);function getLinePosition(i,o,s){var x=i._lw/2;return"x"===i._id.charAt(0)?o?"top"===s?o._offset-ed-x:o._offset+o._length+ed+x:eh.t+eh.h*(1-(i.position||0))+x%1:o?"right"===s?o._offset+o._length+ed+x:o._offset-ed-x:eh.l+eh.w*(i.position||0)+x%1}for(eM=0;eM<ep.length;eM++){var eg=(eL=ep[eM])._anchorAxis;eL._linepositions={},eL._lw=X.crispRound(i,eL.linewidth,1),eL._mainLinePosition=getLinePosition(eL,eg,eL.side),eL._mainMirrorPosition=eL.mirror&&eg?getLinePosition(eL,eg,et.OPPOSITE_SIDE[eL.side]):null}var em=[],ey=[],ev=[],ex=1===Z.opacity(ef.paper_bgcolor)&&1===Z.opacity(ef.plot_bgcolor)&&ef.paper_bgcolor===ef.plot_bgcolor;for(eC in ef._plots)if((eE=ef._plots[eC]).mainplot)eE.bg&&eE.bg.remove(),eE.bg=void 0;else{var e_=eE.xaxis.domain,ew=eE.yaxis.domain,eT=eE.plotgroup;if(function(i,o,s){for(var x=0;x<s.length;x++){var _=s[x][0],F=s[x][1];if(!(_[0]>=i[1])&&!(_[1]<=i[0])&&F[0]<o[1]&&F[1]>o[0])return!0}return!1}(e_,ew,ev)){var ek=eT.node(),eA=eE.bg=N.ensureSingle(eT,"rect","bg");ek.insertBefore(eA.node(),ek.childNodes[0]),ey.push(eC)}else eT.select("rect.bg").remove(),ev.push([e_,ew]),ex||(em.push(eC),ey.push(eC))}var eS=ef._bgLayer.selectAll(".bg").data(em);for(eS.enter().append("rect").classed("bg",!0),eS.exit().remove(),eS.each(function(i){ef._plots[i].bg=x.select(this)}),eM=0;eM<ey.length;eM++)eP=(eE=ef._plots[ey[eM]]).xaxis,eI=eE.yaxis,eE.bg&&void 0!==eP._offset&&void 0!==eI._offset&&eE.bg.call(X.setRect,eP._offset-ed,eI._offset-ed,eP._length+2*ed,eI._length+2*ed).call(Z.fill,ef.plot_bgcolor).style("stroke-width",0);if(!ef._hasOnlyLargeSploms)for(eC in ef._plots){eP=(eE=ef._plots[eC]).xaxis,eI=eE.yaxis;var eM,eC,eE,eL,eP,eI,eO,eD,eR=eE.clipId="clip"+ef._uid+eC+"plot",eB=N.ensureSingleById(ef._clips,"clipPath",eR,function(i){i.classed("plotclip",!0).append("rect")});eE.clipRect=eB.select("rect").attr({width:eP._length,height:eI._length}),X.setTranslate(eE.plot,eP._offset,eI._offset),eE._hasClipOnAxisFalse?(eO=null,eD=eR):(eO=eR,eD=null),X.setClipUrl(eE.plot,eO,i),eE.layerClipId=eD}function xLinePath(i){return"M"+s+","+i+"H"+_}function xLinePathFree(i){return"M"+eP._offset+","+i+"h"+eP._length}function yLinePath(i){return"M"+i+","+ei+"V"+en}function yLinePathFree(i){return void 0!==eI._shift&&(i+=eI._shift),"M"+i+","+eI._offset+"v"+eI._length}function mainPath(i,o,s){if(!i.showline||eC!==i._mainSubplot)return"";if(!i._anchorAxis)return s(i._mainLinePosition);var x=o(i._mainLinePosition);return i.mirror&&(x+=o(i._mainMirrorPosition)),x}for(eC in ef._plots){eP=(eE=ef._plots[eC]).xaxis,eI=eE.yaxis;var ez="M0,0";shouldShowLinesOrTicks(eP,eC)&&(J=findCounterAxisLineWidth(eP,"left",eI,ep),s=eP._offset-(J?ed+J:0),er=findCounterAxisLineWidth(eP,"right",eI,ep),_=eP._offset+eP._length+(er?ed+er:0),j=getLinePosition(eP,eI,"bottom"),G=getLinePosition(eP,eI,"top"),(eu=!eP._anchorAxis||eC!==eP._mainSubplot)&&("allticks"===eP.mirror||"all"===eP.mirror)&&(eP._linepositions[eC]=[j,G]),ez=mainPath(eP,xLinePath,xLinePathFree),eu&&eP.showline&&("all"===eP.mirror||"allticks"===eP.mirror)&&(ez+=xLinePath(j)+xLinePath(G)),eE.xlines.style("stroke-width",eP._lw+"px").call(Z.stroke,eP.showline?eP.linecolor:"rgba(0,0,0,0)")),eE.xlines.attr("d",ez);var eF="M0,0";shouldShowLinesOrTicks(eI,eC)&&(el=findCounterAxisLineWidth(eI,"bottom",eP,ep),en=eI._offset+eI._length+(el?ed:0),ec=findCounterAxisLineWidth(eI,"top",eP,ep),ei=eI._offset-(ec?ed:0),eo=getLinePosition(eI,eP,"left"),es=getLinePosition(eI,eP,"right"),(eu=!eI._anchorAxis||eC!==eI._mainSubplot)&&("allticks"===eI.mirror||"all"===eI.mirror)&&(eI._linepositions[eC]=[eo,es]),eF=mainPath(eI,yLinePath,yLinePathFree),eu&&eI.showline&&("all"===eI.mirror||"allticks"===eI.mirror)&&(eF+=yLinePath(eo)+yLinePath(es)),eE.ylines.style("stroke-width",eI._lw+"px").call(Z.stroke,eI.showline?eI.linecolor:"rgba(0,0,0,0)")),eE.ylines.attr("d",eF)}return ee.makeClipPaths(i),F.previousPromises(i)}function shouldShowLinesOrTicks(i,o){return(i.ticks||i.showline)&&(o===i._mainSubplot||"all"===i.mirror||"allticks"===i.mirror)}function shouldShowLineThisSide(i,o,s){if(!s.showline||!s._lw)return!1;if("all"===s.mirror||"allticks"===s.mirror)return!0;var x=s._anchorAxis;if(!x)return!1;var _=et.FROM_BL[o];return s.side===o?x.domain[_]===i.domain[_]:s.mirror&&x.domain[1-_]===i.domain[1-_]}function findCounterAxisLineWidth(i,o,s,x){if(shouldShowLineThisSide(i,o,s))return s._lw;for(var _=0;_<x.length;_++){var F=x[_];if(F._mainAxis===s._mainAxis&&shouldShowLineThisSide(i,o,F))return F._lw}return 0}o.layoutStyles=function(i){return N.syncOrAsync([F.doAutoMargin,lsInner],i)},o.drawMainTitle=function(i){var o=i._fullLayout.title,s=i._fullLayout,_=(eA=s.title,eS="middle",N.isRightAnchor(eA)?eS="end":N.isLeftAnchor(eA)&&(eS=es),eS),G=(eM=s.title,eC="0em",N.isTopAnchor(eM)?eC=et.CAP_SHIFT+"em":N.isMiddleAnchor(eM)&&(eC=et.MID_SHIFT+"em"),eC),Z=(eE=s.title,eL=s._size,eP=0,("0em"!==G&&G?G===et.CAP_SHIFT+"em"&&(eP=eE.pad.t):eP=-eE.pad.b,"auto"===eE.y)?eL.t/2:"paper"===eE.yref?eL.t+eL.h-eL.h*eE.y+eP:s.height-s.height*eE.y+eP),$=(eI=s.title,eO=s._size,eD=0,(_===es?eD=eI.pad.l:"end"===_&&(eD=-eI.pad.r),"paper"===eI.xref)?eO.l+eO.w*eI.x+eD:s.width*eI.x+eD);if(J.draw(i,"gtitle",{propContainer:s,propName:"title.text",placeholder:s._dfltTitle.plot,attributes:{x:$,y:Z,"text-anchor":_,dy:G}}),o.text&&o.automargin){var ee,er,en,ei,eo,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC,eE,eL,eP,eI,eO,eD,eR,eB=x.selectAll(".gtitle"),ez=X.bBox(eB.node()).height,eF=(ep=i,eg=o,em=ez,ex=eg.y,e_=eg.yanchor,ew=ex>.5?"t":"b",eT=ep._fullLayout.margin[ew],ek=0,"paper"===eg.yref?ek=em+eg.pad.t+eg.pad.b:"container"===eg.yref&&(ey=ep._fullLayout.height,ev=0,"middle"===e_&&(ev+=em/2),"t"===ew?("top"===e_&&(ev+=em),ev+=ey-ex*ey):("bottom"===e_&&(ev+=em),ev+=ex*ey),ek=ev+eg.pad.t+eg.pad.b),ek>eT?ek:0);eF>0&&(ee=i,er=Z,en=eF,ei=ez,ec="title.automargin",ef=(eu=ee._fullLayout.title).y>.5?"t":"b",eh={x:eu.x,y:eu.y,t:0,b:0},ed={},"paper"===eu.yref&&(eo="paper"===eu.yref?ee._fullLayout._size.h:ee._fullLayout.height,el=N.isTopAnchor(eu)?er:er-ei,!(N.isTopAnchor(eu)&&"t"===ef||N.isBottomAnchor(eu)&&"b"===ef)&&("b"===ef?eo-el:el)<ei)?eh[ef]=en:"container"===eu.yref&&(ed[ef]=en,ee._fullLayout._reservedMargin[ec]=ed),F.allowAutoMargin(ee,ec),F.autoMargin(ee,ec,eh),eB.attr({x:$,y:Z,"text-anchor":_,dy:"top"===(eR=o.yanchor)?et.CAP_SHIFT+.3+"em":"bottom"===eR?"-0.3em":et.MID_SHIFT+"em"}).call(j.positionText,$,Z))}},o.doTraceStyle=function(i){var s,x=i.calcdata,N=[];for(s=0;s<x.length;s++){var j=x[s],Z=j[0]||{},X=Z.trace||{},J=X._module||{},$=J.arraysToCalcdata;$&&$(j,X);var ee=J.editStyle;ee&&N.push({fn:ee,cd0:Z})}if(N.length){for(s=0;s<N.length;s++){var et=N[s];et.fn(i,et.cd0)}G(i),o.redrawReglTraces(i)}return F.style(i),_.getComponentMethod("legend","draw")(i),F.previousPromises(i)},o.doColorBars=function(i){return _.getComponentMethod("colorbar","draw")(i),F.previousPromises(i)},o.layoutReplot=function(i){var o=i.layout;return i.layout=void 0,_.call("_doPlot",i,"",o)},o.doLegend=function(i){return _.getComponentMethod("legend","draw")(i),F.previousPromises(i)},o.doTicksRelayout=function(i){return ee.draw(i,"redraw"),i._fullLayout._hasOnlyLargeSploms&&(_.subplotsRegistry.splom.updateGrid(i),G(i),o.redrawReglTraces(i)),o.drawMainTitle(i),F.previousPromises(i)},o.doModeBar=function(i){var o=i._fullLayout;$.manage(i);for(var s=0;s<o._basePlotModules.length;s++){var x=o._basePlotModules[s].updateFx;x&&x(i)}return F.previousPromises(i)},o.doCamera=function(i){for(var o=i._fullLayout,s=o._subplots.gl3d,x=0;x<s.length;x++){var _=o[s[x]];_._scene.setViewport(_)}},o.drawData=function(i){var s=i._fullLayout;G(i);for(var x=s._basePlotModules,N=0;N<x.length;N++)x[N].plot(i);return o.redrawReglTraces(i),F.style(i),_.getComponentMethod("selections","draw")(i),_.getComponentMethod("shapes","draw")(i),_.getComponentMethod("annotations","draw")(i),_.getComponentMethod("images","draw")(i),s._replotting=!1,F.previousPromises(i)},o.redrawReglTraces=function(i){var o=i._fullLayout;if(o._has("regl")){var s,x,_=i._fullData,F=[],j=[];for(o._hasOnlyLargeSploms&&o._splomGrid.draw(),s=0;s<_.length;s++){var G=_[s];!0===G.visible&&0!==G._length&&("splom"===G.type?o._splomScenes[G.uid].draw():"scattergl"===G.type?N.pushUnique(F,G.xaxis+G.yaxis):"scatterpolargl"===G.type&&N.pushUnique(j,G.subplot))}for(s=0;s<F.length;s++)(x=o._plots[F[s]])._scene&&x._scene.draw();for(s=0;s<j.length;s++)(x=o[j[s]]._subplot)._scene&&x._scene.draw()}},o.doAutoRangeAndConstraints=function(i){for(var o,s=ee.list(i,"",!0),x={},_=0;_<s.length;_++)if(!x[(o=s[_])._id]){x[o._id]=1,ei(i,o),eo(i,o);var F=o._matchGroup;if(F)for(var N in F){var j=ee.getFromId(i,N);eo(i,j,o.range),x[N]=1}}en(i)},o.finalDraw=function(i){_.getComponentMethod("rangeslider","draw")(i),_.getComponentMethod("rangeselector","draw")(i)},o.drawMarginPushers=function(i){_.getComponentMethod("legend","draw")(i),_.getComponentMethod("rangeselector","draw")(i),_.getComponentMethod("sliders","draw")(i),_.getComponentMethod("updatemenus","draw")(i),_.getComponentMethod("colorbar","draw")(i)}},96318:function(i,o,s){"use strict";var x=s(71828),_=x.isPlainObject,F=s(86281),N=s(74875),j=s(9012),G=s(44467),Z=s(72075).dfltConfig;function mergeTemplates(i,o){var s,F,N=Object.keys(i=x.extendDeep({},i)).sort();function mergeOne(o,s,x){if(_(s)&&_(o))mergeTemplates(o,s);else if(Array.isArray(s)&&Array.isArray(o)){var N=G.arrayTemplater({_template:i},x);for(F=0;F<s.length;F++){var j=s[F],Z=N.newItem(j)._template;Z&&mergeTemplates(Z,j)}var X=N.defaultItems();for(F=0;F<X.length;F++)s.push(X[F]._template);for(F=0;F<s.length;F++)delete s[F].templateitemname}}for(s=0;s<N.length;s++){var j=N[s],Z=i[j];if(j in o?mergeOne(Z,o[j],j):o[j]=Z,getBaseKey(j)===j)for(var X in o){var J=getBaseKey(X);X===J||J!==j||X in i||mergeOne(Z,o[X],j)}}}function getBaseKey(i){return i.replace(/[0-9]+$/,"")}function walkStyleKeys(i,o,s,F,N){var j=N&&s(N);for(var Z in i){var X=i[Z],J=getNextPath(i,Z,F),$=getNextPath(i,Z,N),ee=s($);if(!ee){var et=getBaseKey(Z);et!==Z&&(ee=s($=getNextPath(i,et,N)))}if(!j||j!==ee){if(!ee||ee._noTemplating||"data_array"===ee.valType||ee.arrayOk&&Array.isArray(X))continue;if(!ee.valType&&_(X))walkStyleKeys(X,o,s,J,$);else if(ee._isLinkedToArray&&Array.isArray(X))for(var er=!1,en=0,ei={},eo=0;eo<X.length;eo++){var es=X[eo];if(_(es)){var el=es.name;if(el)ei[el]||(walkStyleKeys(es,o,s,getNextPath(X,en,J),getNextPath(X,en,$)),en++,ei[el]=1);else if(!er){var ec=getNextPath(i,G.arrayDefaultKey(Z),F),eu=getNextPath(X,en,J);walkStyleKeys(es,o,s,eu,getNextPath(X,en,$));var ef=x.nestedProperty(o,eu);x.nestedProperty(o,ec).set(ef.get()),ef.set(null),er=!0}}}else x.nestedProperty(o,J).set(X)}}}function getLayoutInfo(i,o){return F.getLayoutValObject(i,x.nestedProperty({},o).parts)}function getTraceInfo(i,o){return F.getTraceValObject(i,x.nestedProperty({},o).parts)}function getNextPath(i,o,s){return s?Array.isArray(i)?s+"["+o+"]":s+"."+o:o}function format(i){var o;switch(i.code){case"data":o="The template has no key data.";break;case"layout":o="The template has no key layout.";break;case"missing":o=i.path?"There are no templates for item "+i.path+" with name "+i.templateitemname:"There are no templates for trace "+i.index+", of type "+i.traceType+".";break;case"unused":o=i.path?"The template item at "+i.path+" was not used in constructing the plot.":i.dataCount?"Some of the templates of type "+i.traceType+" were not used. The template has "+i.templateCount+" traces, the data only has "+i.dataCount+" of this type.":"The template has "+i.templateCount+" traces of type "+i.traceType+" but there are none in the data.";break;case"reused":o="Some of the templates of type "+i.traceType+" were used more than once. The template has "+i.templateCount+" traces, the data has "+i.dataCount+" of this type."}return i.msg=o,i}o.makeTemplate=function(i){i=x.isPlainObject(i)?i:x.getGraphDiv(i),i=x.extendDeep({_context:Z},{data:i.data,layout:i.layout}),N.supplyDefaults(i);var o=i.data||[],s=i.layout||{};s._basePlotModules=i._fullLayout._basePlotModules,s._modules=i._fullLayout._modules;var F={data:{},layout:{}};o.forEach(function(i){var o={};walkStyleKeys(i,o,getTraceInfo.bind(null,i));var s=x.coerce(i,{},j,"type"),_=F.data[s];_||(_=F.data[s]=[]),_.push(o)}),walkStyleKeys(s,F.layout,getLayoutInfo.bind(null,s)),delete F.layout.template;var G=s.template;if(_(G)){var X,J,$,ee,et,er,en=G.layout;_(en)&&mergeTemplates(en,F.layout);var ei=G.data;if(_(ei)){for(J in F.data)if(Array.isArray($=ei[J])){for(X=0,er=(et=F.data[J]).length,ee=$.length;X<er;X++)mergeTemplates($[X%ee],et[X]);for(X=er;X<ee;X++)et.push(x.extendDeep({},$[X]))}for(J in ei)J in F.data||(F.data[J]=x.extendDeep([],ei[J]))}}return F},o.validateTemplate=function(i,o){var s=x.extendDeep({},{_context:Z,data:i.data,layout:i.layout}),F=s.layout||{};_(o)||(o=F.template||{});var j=o.layout,G=o.data,X=[];s.layout=F,s.layout.template=o,N.supplyDefaults(s);var J=s._fullLayout,$=s._fullData,ee={};if(_(j)?(function crawlLayoutForContainers(i,o){for(var s in i)if("_"!==s.charAt(0)&&_(i[s])){var x,F=getBaseKey(s),N=[];for(x=0;x<o.length;x++)N.push(getNextPath(i,s,o[x])),F!==s&&N.push(getNextPath(i,F,o[x]));for(x=0;x<N.length;x++)ee[N[x]]=1;crawlLayoutForContainers(i[s],N)}}(J,["layout"]),function crawlLayoutTemplateForContainers(i,o){for(var s in i)if(-1===s.indexOf("defaults")&&_(i[s])){var x=getNextPath(i,s,o);ee[x]?crawlLayoutTemplateForContainers(i[s],x):X.push({code:"unused",path:x})}}(j,"layout")):X.push({code:"layout"}),_(G)){for(var et,er={},en=0;en<$.length;en++){var ei=$[en];er[et=ei.type]=(er[et]||0)+1,ei._fullInput._template||X.push({code:"missing",index:ei._fullInput.index,traceType:et})}for(et in G){var eo=G[et].length,es=er[et]||0;eo>es?X.push({code:"unused",traceType:et,templateCount:eo,dataCount:es}):es>eo&&X.push({code:"reused",traceType:et,templateCount:eo,dataCount:es})}}else X.push({code:"data"});if(function crawlForMissingTemplates(i,o){for(var s in i)if("_"!==s.charAt(0)){var x=i[s],F=getNextPath(i,s,o);_(x)?(Array.isArray(i)&&!1===x._template&&x.templateitemname&&X.push({code:"missing",path:F,templateitemname:x.templateitemname}),crawlForMissingTemplates(x,F)):Array.isArray(x)&&function(i){for(var o=0;o<i.length;o++)if(_(i[o]))return!0}(x)&&crawlForMissingTemplates(x,F)}}({data:$,layout:J},""),X.length)return X.map(format)}},403:function(i,o,s){"use strict";var x=s(92770),_=s(72391),F=s(74875),N=s(71828),j=s(25095),G=s(5900),Z=s(70942),X=s(11506).version,J={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};i.exports=function(i,o){function isImpliedOrValid(i){return!(i in o)||N.validate(o[i],J[i])}if(o=o||{},N.isPlainObject(i)?(s=i.data||[],$=i.layout||{},ee=i.config||{},et={}):(i=N.getGraphDiv(i),s=N.extendDeep([],i.data),$=N.extendDeep({},i.layout),ee=i._context,et=i._fullLayout||{}),!isImpliedOrValid("width")&&null!==o.width||!isImpliedOrValid("height")&&null!==o.height)throw Error("Height and width should be pixel values.");if(!isImpliedOrValid("format"))throw Error("Export format is not "+N.join2(J.format.values,", "," or ")+".");var s,$,ee,et,er={};function coerce(i,s){return N.coerce(o,er,J,i,s)}var en=coerce("format"),ei=coerce("width"),eo=coerce("height"),es=coerce("scale"),el=coerce("setBackground"),ec=coerce("imageDataOnly"),eu=document.createElement("div");eu.style.position="absolute",eu.style.left="-5000px",document.body.appendChild(eu);var ef=N.extendFlat({},$);ei?ef.width=ei:null===o.width&&x(et.width)&&(ef.width=et.width),eo?ef.height=eo:null===o.height&&x(et.height)&&(ef.height=et.height);var eh=N.extendFlat({},ee,{_exportedPlot:!0,staticPlot:!0,setBackground:el}),ed=j.getRedrawFunc(eu);function wait(){return new Promise(function(i){setTimeout(i,j.getDelay(eu._fullLayout))})}function convert(){return new Promise(function(i,o){var s=G(eu,en,es),x=eu._fullLayout.width,J=eu._fullLayout.height;function cleanup(){_.purge(eu),document.body.removeChild(eu)}if("full-json"===en){var $=F.graphJson(eu,!1,"keepdata","object",!0,!0);return i(($.version=X,$=JSON.stringify($),cleanup(),ec)?$:j.encodeJSON($))}if(cleanup(),"svg"===en)return i(ec?s:j.encodeSVG(s));var ee=document.createElement("canvas");ee.id=N.randstr(),Z({format:en,width:x,height:J,scale:es,canvas:ee,svg:s,promise:!0}).then(i).catch(o)})}return new Promise(function(i,o){_.newPlot(eu,s,ef,eh).then(ed).then(wait).then(convert).then(function(o){i(ec?o.replace(j.IMAGE_URL_PREFIX,""):o)}).catch(function(i){o(i)})})}},84936:function(i,o,s){"use strict";var x=s(71828),_=s(74875),F=s(86281),N=s(72075).dfltConfig,j=x.isPlainObject,G=Array.isArray,Z=x.isArrayOrTypedArray;function crawl(i,o,s,_,F,N){N=N||[];for(var X=Object.keys(i),J=0;J<X.length;J++){var $=X[J];if("transforms"!==$){var ee=N.slice();ee.push($);var et=i[$],er=o[$],en=$ in s?s[$]:s[splitKey($).keyMinusId],ei=(en||{}).valType,eo="info_array"===ei,es="colorscale"===ei,el=(en||{}).items;if(function(i,o){var s=splitKey(o),x=s.keyMinusId,_=s.id;return x in i&&!!i[x]._isSubplotObj&&!!_||o in i}(s,$)){if(j(et)&&j(er)&&"any"!==ei)crawl(et,er,en,_,F,ee);else if(eo&&G(et)){et.length>er.length&&_.push(format("unused",F,ee.concat(er.length)));var ec,eu,ef,eh,ed,ep=er.length,eg=Array.isArray(el);if(eg&&(ep=Math.min(ep,el.length)),2===en.dimensions)for(eu=0;eu<ep;eu++)if(G(et[eu])){et[eu].length>er[eu].length&&_.push(format("unused",F,ee.concat(eu,er[eu].length)));var em=er[eu].length;for(ec=0;ec<(eg?Math.min(em,el[eu].length):em);ec++)ef=eg?el[eu][ec]:el,eh=et[eu][ec],ed=er[eu][ec],x.validate(eh,ef)?ed!==eh&&ed!==+eh&&_.push(format("dynamic",F,ee.concat(eu,ec),eh,ed)):_.push(format("value",F,ee.concat(eu,ec),eh))}else _.push(format("array",F,ee.concat(eu),et[eu]));else for(eu=0;eu<ep;eu++)ef=eg?el[eu]:el,eh=et[eu],ed=er[eu],x.validate(eh,ef)?ed!==eh&&ed!==+eh&&_.push(format("dynamic",F,ee.concat(eu),eh,ed)):_.push(format("value",F,ee.concat(eu),eh))}else if(en.items&&!eo&&G(et)){var ey,ev,ex=el[Object.keys(el)[0]],e_=[];for(ey=0;ey<er.length;ey++){var ew=er[ey]._index||ey;if((ev=ee.slice()).push(ew),j(et[ew])&&j(er[ey])){e_.push(ew);var eT=et[ew],ek=er[ey];j(eT)&&!1!==eT.visible&&!1===ek.visible?_.push(format("invisible",F,ev)):crawl(eT,ek,ex,_,F,ev)}}for(ey=0;ey<et.length;ey++)(ev=ee.slice()).push(ey),j(et[ey])?-1===e_.indexOf(ey)&&_.push(format("unused",F,ev)):_.push(format("object",F,ev,et[ey]))}else!j(et)&&j(er)?_.push(format("object",F,ee,et)):!Z(et)&&Z(er)&&!eo&&!es?_.push(format("array",F,ee,et)):$ in o?x.validate(et,en)?"enumerated"===en.valType&&(en.coerceNumber&&et!==+er||et!==er)&&_.push(format("dynamic",F,ee,et,er)):_.push(format("value",F,ee,et)):_.push(format("unused",F,ee,et))}else _.push(format("schema",F,ee))}}return _}i.exports=function(i,o){void 0===i&&(i=[]),void 0===o&&(o={});var s,Z,X=F.get(),J=[],$={_context:x.extendFlat({},N)};G(i)?($.data=x.extendDeep([],i),s=i):($.data=[],s=[],J.push(format("array","data"))),j(o)?($.layout=x.extendDeep({},o),Z=o):($.layout={},Z={},arguments.length>1&&J.push(format("object","layout"))),_.supplyDefaults($);for(var ee=$._fullData,et=s.length,er=0;er<et;er++){var en=s[er],ei=["data",er];if(!j(en)){J.push(format("object",ei));continue}var eo=ee[er],es=eo.type,el=X.traces[es].attributes;el.type={valType:"enumerated",values:[es]},!1===eo.visible&&!1!==en.visible&&J.push(format("invisible",ei)),crawl(en,eo,el,J,ei);var ec=en.transforms,eu=eo.transforms;if(ec){G(ec)||J.push(format("array",ei,["transforms"])),ei.push("transforms");for(var ef=0;ef<ec.length;ef++){var eh=["transforms",ef],ed=ec[ef].type;if(!j(ec[ef])){J.push(format("object",ei,eh));continue}var ep=X.transforms[ed]?X.transforms[ed].attributes:{};ep.type={valType:"enumerated",values:Object.keys(X.transforms)},crawl(ec[ef],eu[ef],ep,J,ei,eh)}}}return crawl(Z,$._fullLayout,function(i,o){for(var s=i.layout.layoutAttributes,_=0;_<o.length;_++){var F=o[_],N=i.traces[F.type],j=N.layoutAttributes;j&&(F.subplot?x.extendFlat(s[N.attributes.subplot.dflt],j):x.extendFlat(s,j))}return s}(X,ee),J,"layout"),0===J.length?void 0:J};var X={object:function(i,o){return("layout"===i&&""===o?"The layout argument":"data"===i[0]&&""===o?"Trace "+i[1]+" in the data argument":inBase(i)+"key "+o)+" must be linked to an object container"},array:function(i,o){return("data"===i?"The data argument":inBase(i)+"key "+o)+" must be linked to an array container"},schema:function(i,o){return inBase(i)+"key "+o+" is not part of the schema"},unused:function(i,o,s){var x=j(s)?"container":"key";return inBase(i)+x+" "+o+" did not get coerced"},dynamic:function(i,o,s,x){return[inBase(i)+"key",o,"(set to '"+s+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(i,o){return(o?inBase(i)+"item "+o:"Trace "+i[1])+" got defaulted to be not visible"},value:function(i,o,s){return[inBase(i)+"key "+o,"is set to an invalid value ("+s+")"].join(" ")}};function inBase(i){return G(i)?"In data trace "+i[1]+", ":"In "+i+", "}function format(i,o,s,_,F){s=s||"",G(o)?(N=o[0],j=o[1]):(N=o,j=null);var N,j,Z=function(i){if(!G(i))return String(i);for(var o="",s=0;s<i.length;s++){var x=i[s];"number"==typeof x?o=o.substr(0,o.length-1)+"["+x+"]":o+=x,s<i.length-1&&(o+=".")}return o}(s),J=X[i](o,Z,_,F);return x.log(J),{code:i,container:N,trace:j,path:s,astr:Z,msg:J}}var J=x.counterRegex("([a-z]+)");function splitKey(i){var o=i.match(J);return{keyMinusId:o&&o[1],id:o&&o[2]}}},85594:function(i){"use strict";i.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(i,o,s){"use strict";var x=s(71828),_=s(44467);i.exports=function(i,o,s){var F,N,j=s.name,G=s.inclusionAttr||"visible",Z=o[j],X=x.isArrayOrTypedArray(i[j])?i[j]:[],J=o[j]=[],$=_.arrayTemplater(o,j,G);for(F=0;F<X.length;F++){var ee=X[F];x.isPlainObject(ee)?N=$.newItem(ee):(N=$.newItem({}))[G]=!1,N._index=F,!1!==N[G]&&s.handleItemDefaults(ee,N,o,s),J.push(N)}var et=$.defaultItems();for(F=0;F<et.length;F++)(N=et[F])._index=J.length,s.handleItemDefaults({},N,o,s,{}),J.push(N);if(x.isArrayOrTypedArray(Z)){var er=Math.min(Z.length,J.length);for(F=0;F<er;F++)x.relinkPrivateKeys(J[F],Z[F])}return J}},9012:function(i,o,s){"use strict";var x=s(41940),_=s(77914);i.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:x({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:_.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=_.dateTime2ms,N=_.incrementMonth,j=s(50606).ONEAVGMONTH;i.exports=function(i,o,s,_){if("date"!==o.type)return{vals:_};var G=i[s+"periodalignment"];if(!G)return{vals:_};var Z=i[s+"period"];if(x(Z)){if((Z=+Z)<=0)return{vals:_}}else if("string"==typeof Z&&"M"===Z.charAt(0)){var X=+Z.substring(1);if(!(X>0)||Math.round(X)!==X)return{vals:_};el=X}for(var J=o.calendar,$="start"===G,ee="end"===G,et=F(i[s+"period0"],J)||0,er=[],en=[],ei=[],eo=_.length,es=0;es<eo;es++){var el,ec,eu,ef,eh=_[es];if(el){for(ec=Math.round((eh-et)/(el*j)),ef=N(et,el*ec,J);ef>eh;)ef=N(ef,-el,J);for(;ef<=eh;)ef=N(ef,el,J);eu=N(ef,-el,J)}else{for(ec=Math.round((eh-et)/Z),ef=et+ec*Z;ef>eh;)ef-=Z;for(;ef<=eh;)ef+=Z;eu=ef-Z}er[es]=$?eu:ee?ef:(eu+ef)/2,en[es]=eu,ei[es]=ef}return{vals:er,starts:en,ends:ei}}},89502:function(i){"use strict";i.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(71828),N=s(50606).FP_SAFE,j=s(73972),G=s(91424),Z=s(41675),X=Z.getFromId,J=Z.isLinked;function getAutoRange(i,o){var s,x,_,N,j,G,Z,X,J=[],$=i._fullLayout,ee=makePadFn($,o,0),et=makePadFn($,o,1),er=concatExtremes(i,o),en=er.min,ei=er.max;if(0===en.length||0===ei.length)return F.simpleMap(o.range,o.r2l);var eo=en[0].val,es=ei[0].val;for(s=1;s<en.length&&eo===es;s++)eo=Math.min(eo,en[s].val);for(s=1;s<ei.length&&eo===es;s++)es=Math.max(es,ei[s].val);var el=o.autorange,ec="reversed"===el||"min reversed"===el||"max reversed"===el;if(!ec&&o.range){var eu=F.simpleMap(o.range,o.r2l);ec=eu[1]<eu[0]}"reversed"===o.autorange&&(o.autorange=!0);var ef=o.rangemode,eh="tozero"===ef,ed="nonnegative"===ef,ep=o._length,eg=ep/10,em=0;for(s=0;s<en.length;s++)for(x=0,_=en[s];x<ei.length;x++)(X=(N=ei[x]).val-_.val-calcBreaksLength(o,_.val,N.val))>0&&((Z=ep-ee(_)-et(N))>eg?X/Z>em&&(j=_,G=N,em=X/Z):X/ep>em&&(j={val:_.val,nopad:1},G={val:N.val,nopad:1},em=X/ep));if(eo===es){var ey=eo-1,ev=eo+1;if(eh){if(0===eo)J=[0,1];else{var ex=(eo>0?ei:en).reduce(function(i,o){return Math.max(i,et(o))},0),e_=eo/(1-Math.min(.5,ex/ep));J=eo>0?[0,e_]:[e_,0]}}else J=ed?[Math.max(0,ey),Math.max(1,ev)]:[ey,ev]}else eh?(j.val>=0&&(j={val:0,nopad:1}),G.val<=0&&(G={val:0,nopad:1})):ed&&(j.val-em*ee(j)<0&&(j={val:0,nopad:1}),G.val<=0&&(G={val:1,nopad:1})),em=(G.val-j.val-calcBreaksLength(o,_.val,N.val))/(ep-ee(j)-et(G)),J=[j.val-em*ee(j),G.val+em*et(G)];return J=applyAutorangeOptions(J,o),o.limitRange&&o.limitRange(),ec&&J.reverse(),F.simpleMap(J,o.l2r||Number)}function calcBreaksLength(i,o,s){var x=0;if(i.rangebreaks)for(var _=i.locateBreaks(o,s),F=0;F<_.length;F++){var N=_[F];x+=N.max-N.min}return x}function makePadFn(i,o,s){var _=.05*o._length,N=o._anchorAxis||{};if(-1!==(o.ticklabelposition||"").indexOf("inside")||-1!==(N.ticklabelposition||"").indexOf("inside")){var j=o.isReversed();if(!j){var Z=F.simpleMap(o.range,o.r2l);j=Z[1]<Z[0]}j&&(s=!s)}var X=0;return J(i,o._id)||(X=function(i,o,s){var _=0,N="x"===o._id.charAt(0);for(var j in i._plots){var Z=i._plots[j];if(o._id===Z.xaxis._id||o._id===Z.yaxis._id){var X=(N?Z.yaxis:Z.xaxis)||{};if(-1!==(X.ticklabelposition||"").indexOf("inside")&&(!s&&("left"===X.side||"bottom"===X.side)||s&&("top"===X.side||"right"===X.side))){if(X._vals){var J=F.deg2rad(X._tickAngles[X._id+"tick"]||0),$=Math.abs(Math.cos(J)),ee=Math.abs(Math.sin(J));if(!X._vals[0].bb){var et=X._id+"tick";X._selections[et].each(function(i){var o=x.select(this);o.select(".text-math-group").empty()&&(i.bb=G.bBox(o.node()))})}for(var er=0;er<X._vals.length;er++){var en=X._vals[er].bb;if(en){var ei=6+en.width,eo=6+en.height;_=Math.max(_,N?Math.max(ei*$,eo*ee):Math.max(eo*$,ei*ee))}}}"inside"===X.ticks&&"inside"===X.ticklabelposition&&(_+=X.ticklen||0)}}}return _}(i,o,s)),_=Math.max(X,_),"domain"===o.constrain&&o._inputDomain&&(_*=(o._inputDomain[1]-o._inputDomain[0])/(o.domain[1]-o.domain[0])),function(i){return i.nopad?0:i.pad+(i.extrapad?_:X)}}function concatExtremes(i,o,s){var x,_,F,N=o._id,j=i._fullData,G=i._fullLayout,Z=[],J=[];function _concat(i,o){for(x=0;x<o.length;x++){var s,j,G,X,$=i[o[x]],ee=($._extremes||{})[N];if(!0===$.visible&&ee){for(_=0;_<ee.min.length;_++)s=(F=ee.min[_]).val,collapseArray(Z,s,F.pad,{extrapad:F.extrapad},lessOrEqual);for(_=0;_<ee.max.length;_++)G=(F=ee.max[_]).val,collapseArray(J,G,F.pad,{extrapad:F.extrapad},greaterOrEqual)}}}if(_concat(j,o._traceIndices),_concat(G.annotations||[],o._annIndices||[]),_concat(G.shapes||[],o._shapeIndices||[]),o._matchGroup&&!s){for(var $ in o._matchGroup)if($!==o._id){var ee,et,er,en,ei=X(i,$),eo=concatExtremes(i,ei,!0),es=o._length/ei._length;for(_=0;_<eo.min.length;_++)ee=(F=eo.min[_]).val,collapseArray(Z,ee,F.pad*es,{extrapad:F.extrapad},lessOrEqual);for(_=0;_<eo.max.length;_++)er=(F=eo.max[_]).val,collapseArray(J,er,F.pad*es,{extrapad:F.extrapad},greaterOrEqual)}}return{min:Z,max:J}}function collapseArray(i,o,s,x,_){for(var F=x.tozero,N=x.extrapad,j=!0,G=0;G<i.length&&j;G++){var Z=i[G];if(_(Z.val,o)&&Z.pad>=s&&(Z.extrapad||!N)){j=!1;break}_(o,Z.val)&&Z.pad<=s&&(N||!Z.extrapad)&&(i.splice(G,1),G--)}if(j){var X=F&&0===o;i.push({val:o,pad:X?0:s,extrapad:!X&&N})}}function goodNumber(i){return _(i)&&Math.abs(i)<N}function lessOrEqual(i,o){return i<=o}function greaterOrEqual(i,o){return i>=o}function hasValidMinAndMax(i,o,s){return void 0===o||void 0===s||(o=i.d2l(o))<(s=i.d2l(s))}function applyAutorangeOptions(i,o){if(!o||!o.autorangeoptions)return i;var s,x,_,N,j=i[0],G=i[1],Z=o.autorangeoptions.include;if(void 0!==Z){var X=o.d2l(j),J=o.d2l(G);F.isArrayOrTypedArray(Z)||(Z=[Z]);for(var $=0;$<Z.length;$++){var ee=o.d2l(Z[$]);X>=ee&&(X=ee,j=ee),J<=ee&&(J=ee,G=ee)}}return s=j,j=(x=o.autorangeoptions)&&void 0!==x.minallowed&&hasValidMinAndMax(o,x.minallowed,x.maxallowed)?x.minallowed:x&&void 0!==x.clipmin&&hasValidMinAndMax(o,x.clipmin,x.clipmax)?Math.max(s,o.d2l(x.clipmin)):s,_=G,[j,G=(N=o.autorangeoptions)&&void 0!==N.maxallowed&&hasValidMinAndMax(o,N.minallowed,N.maxallowed)?N.maxallowed:N&&void 0!==N.clipmax&&hasValidMinAndMax(o,N.clipmin,N.clipmax)?Math.min(_,o.d2l(N.clipmax)):_]}i.exports={applyAutorangeOptions:applyAutorangeOptions,getAutoRange:getAutoRange,makePadFn:makePadFn,doAutoRange:function(i,o,s){if(o.setScale(),o.autorange){o.range=s?s.slice():getAutoRange(i,o),o._r=o.range.slice(),o._rl=F.simpleMap(o._r,o.r2l);var x=o._input,_={};_[o._attr+".range"]=o.range,_[o._attr+".autorange"]=o.autorange,j.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,_),x.range=o.range.slice(),x.autorange=o.autorange}var N=o._anchorAxis;if(N&&N.rangeslider){var G=N.rangeslider[o._name];G&&"auto"===G.rangemode&&(G.range=getAutoRange(i,o)),N._input.rangeslider[o._name]=F.extendFlat({},G)}},findExtremes:function(i,o,s){s||(s={}),i._m||i.setScale();var x,F,j,G,Z,X,J,$,ee,et=[],er=[],en=o.length,ei=s.padded||!1,eo=s.tozero&&("linear"===i.type||"-"===i.type),es="log"===i.type,el=!1,ec=s.vpadLinearized||!1;function makePadAccessor(i){if(Array.isArray(i))return el=!0,function(o){return Math.max(Number(i[o]||0),0)};var o=Math.max(Number(i||0),0);return function(){return o}}var eu=makePadAccessor((i._m>0?s.ppadplus:s.ppadminus)||s.ppad||0),ef=makePadAccessor((i._m>0?s.ppadminus:s.ppadplus)||s.ppad||0),eh=makePadAccessor(s.vpadplus||s.vpad),ed=makePadAccessor(s.vpadminus||s.vpad);if(!el){if($=1/0,ee=-1/0,es)for(x=0;x<en;x++)(F=o[x])<$&&F>0&&($=F),F>ee&&F<N&&(ee=F);else for(x=0;x<en;x++)(F=o[x])<$&&F>-N&&($=F),F>ee&&F<N&&(ee=F);o=[$,ee],en=2}var ep={tozero:eo,extrapad:ei};function addItem(s){var x,F;_(j=o[s])&&(X=eu(s),J=ef(s),ec?(G=i.c2l(j)-ed(s),Z=i.c2l(j)+eh(s)):($=j-ed(s),ee=j+eh(s),es&&$<ee/10&&($=ee/10),G=i.c2l($),Z=i.c2l(ee)),eo&&(G=Math.min(0,G),Z=Math.max(0,Z)),goodNumber(G)&&collapseArray(et,G,J,ep,lessOrEqual),goodNumber(Z)&&collapseArray(er,Z,X,ep,greaterOrEqual))}var eg=Math.min(6,en);for(x=0;x<eg;x++)addItem(x);for(x=en-1;x>=eg;x--)addItem(x);return{min:et,max:er,opts:s}},concatExtremes:concatExtremes}},23074:function(i){"use strict";i.exports=function(i,o,s){if(s){var x,_,F="reversed"===o||"min reversed"===o||"max reversed"===o;x=s[F?1:0],_=s[F?0:1]}var N=i("autorangeoptions.minallowed",null===_?x:void 0),j=i("autorangeoptions.maxallowed",null===x?_:void 0);void 0===N&&i("autorangeoptions.clipmin"),void 0===j&&i("autorangeoptions.clipmax"),i("autorangeoptions.include")}},89298:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(74875),N=s(73972),j=s(71828),G=j.strTranslate,Z=s(63893),X=s(92998),J=s(7901),$=s(91424),ee=s(13838),et=s(66287),er=s(50606),en=er.ONEMAXYEAR,ei=er.ONEAVGYEAR,eo=er.ONEMINYEAR,es=er.ONEMAXQUARTER,el=er.ONEAVGQUARTER,ec=er.ONEMINQUARTER,eu=er.ONEMAXMONTH,ef=er.ONEAVGMONTH,eh=er.ONEMINMONTH,ed=er.ONEWEEK,ep=er.ONEDAY,eg=ep/2,em=er.ONEHOUR,ey=er.ONEMIN,ev=er.ONESEC,ex=er.MINUS_SIGN,e_=er.BADNUM,ew={K:"zeroline"},eT={K:"gridline",L:"path"},ek={K:"minor-gridline",L:"path"},eA={K:"tick",L:"path"},eS={K:"tick",L:"text"},eM={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},eC=s(18783),eE=eC.MID_SHIFT,eL=eC.CAP_SHIFT,eP=eC.LINE_SPACING,eI=eC.OPPOSITE_SIDE,eO=i.exports={};eO.setConvert=s(21994);var eD=s(4322),eR=s(41675),eB=eR.idSort,ez=eR.isLinked;eO.id2name=eR.id2name,eO.name2id=eR.name2id,eO.cleanId=eR.cleanId,eO.list=eR.list,eO.listIds=eR.listIds,eO.getFromId=eR.getFromId,eO.getFromTrace=eR.getFromTrace;var eF=s(71739);function expandRange(i){var o=(i[1]-i[0])*1e-4;return[i[0]-o,i[1]+o]}eO.getAutoRange=eF.getAutoRange,eO.findExtremes=eF.findExtremes,eO.coerceRef=function(i,o,s,x,_,F){var N=x.charAt(x.length-1),G=s._fullLayout._subplots[N+"axis"],Z=x+"ref",X={};return _||(_=G[0]||("string"==typeof F?F:F[0])),F||(F=_),G=G.concat(G.map(function(i){return i+" domain"})),X[Z]={valType:"enumerated",values:G.concat(F?"string"==typeof F?[F]:F:[]),dflt:_},j.coerce(i,o,X,Z)},eO.getRefType=function(i){return void 0===i?i:"paper"===i?"paper":"pixel"===i?"pixel":/( domain)$/.test(i)?"domain":"range"},eO.coercePosition=function(i,o,s,x,_,F){var N,G;if("range"!==eO.getRefType(x))N=j.ensureNumber,G=s(_,F);else{var Z=eO.getFromId(o,x);G=s(_,F=Z.fraction2r(F)),N=Z.cleanPos}i[_]=N(G)},eO.cleanPosition=function(i,o,s){return("paper"===s||"pixel"===s?j.ensureNumber:eO.getFromId(o,s).cleanPos)(i)},eO.redrawComponents=function(i,o){o=o||eO.listIds(i);var s=i._fullLayout;function _redrawOneComp(x,_,F,j){for(var G=N.getComponentMethod(x,_),Z={},X=0;X<o.length;X++)for(var J=s[eO.id2name(o[X])][F],$=0;$<J.length;$++){var ee=J[$];if(!Z[ee]&&(G(i,ee),Z[ee]=1,j))return}}_redrawOneComp("annotations","drawOne","_annIndices"),_redrawOneComp("shapes","drawOne","_shapeIndices"),_redrawOneComp("images","draw","_imgIndices",!0),_redrawOneComp("selections","drawOne","_selectionIndices")};var eN=eO.getDataConversions=function(i,o,s,x){var _,F="x"===s||"y"===s||"z"===s?s:x;if(Array.isArray(F)){if(_={type:eD(x,void 0,{autotypenumbers:i._fullLayout.autotypenumbers}),_categories:[]},eO.setConvert(_),"category"===_.type)for(var N=0;N<x.length;N++)_.d2c(x[N])}else _=eO.getFromTrace(i,o,F);return _?{d2c:_.d2c,c2d:_.c2d}:"ids"===F?{d2c:toString,c2d:toString}:{d2c:toNum,c2d:toNum}};function toNum(i){return+i}function toString(i){return String(i)}function isMultiple(i,o){return .001>Math.abs((i/o+.5)%1-.5)}function isClose(i,o){return .001>Math.abs(i/o-1)}function nMonths(i){return+i.substring(1)}function filterRangeBreaks(i,o){return i.rangebreaks&&(o=o.filter(function(o){return i.maskBreaks(o.x)!==e_})),o}function arrayTicks(i){var o=expandRange(j.simpleMap(i.range,i.r2l)),s=Math.min(o[0],o[1]),x=Math.max(o[0],o[1]),_="category"===i.type?i.d2l_noadd:i.d2l;"log"===i.type&&"L"!==String(i.dtick).charAt(0)&&(i.dtick="L"+Math.pow(10,Math.floor(Math.min(i.range[0],i.range[1]))-1));for(var F=[],N=0;N<=1;N++)if(!N||i.minor){var G=N?i.minor.tickvals:i.tickvals,Z=N?[]:i.ticktext;if(G){Array.isArray(Z)||(Z=[]);for(var X=0;X<G.length;X++){var J=_(G[X]);if(J>s&&J<x){var $=void 0===Z[X]?eO.tickText(i,J):tickTextObj(i,J,String(Z[X]));N&&($.minor=!0,$.text=""),F.push($)}}}}return filterRangeBreaks(i,F)}eO.getDataToCoordFunc=function(i,o,s,x){return eN(i,o,s,x).d2c},eO.counterLetter=function(i){var o=i.charAt(0);return"x"===o?"y":"y"===o?"x":void 0},eO.minDtick=function(i,o,s,x){-1===["log","category","multicategory"].indexOf(i.type)&&x?void 0===i._minDtick?(i._minDtick=o,i._forceTick0=s):i._minDtick&&((i._minDtick/o+1e-6)%1<2e-6&&((s-i._forceTick0)/o%1+1.000001)%1<2e-6?(i._minDtick=o,i._forceTick0=s):((o/i._minDtick+1e-6)%1>2e-6||((s-i._forceTick0)/i._minDtick%1+1.000001)%1>2e-6)&&(i._minDtick=0)):i._minDtick=0},eO.saveRangeInitial=function(i,o){for(var s=eO.list(i,"",!0),x=!1,_=0;_<s.length;_++){var F=s[_],N=void 0===F._rangeInitial0&&void 0===F._rangeInitial1,j=N||F.range[0]!==F._rangeInitial0||F.range[1]!==F._rangeInitial1,G=F.autorange;(N&&!0!==G||o&&j)&&(F._rangeInitial0="min"===G||"max reversed"===G?void 0:F.range[0],F._rangeInitial1="max"===G||"min reversed"===G?void 0:F.range[1],F._autorangeInitial=G,x=!0)}return x},eO.saveShowSpikeInitial=function(i,o){for(var s=eO.list(i,"",!0),x=!1,_="on",F=0;F<s.length;F++){var N=s[F],j=void 0===N._showSpikeInitial,G=j||N.showspikes!==N._showspikes;(j||o&&G)&&(N._showSpikeInitial=N.showspikes,x=!0),"on"!==_||N.showspikes||(_="off")}return i._fullLayout._cartesianSpikesEnabled=_,x},eO.autoBin=function(i,o,s,x,F,N){var G,Z,X,J,$=j.aggNums(Math.min,null,i),ee=j.aggNums(Math.max,null,i);if("category"===o.type||"multicategory"===o.type)return{start:$-.5,end:ee+.5,size:Math.max(1,Math.round(N)||1),_dataSpan:ee-$};if(F||(F=o.calendar),G="log"===o.type?{type:"linear",range:[$,ee]}:{type:o.type,range:j.simpleMap([$,ee],o.c2r,0,F),calendar:F},eO.setConvert(G),N=N&&et.dtick(N,G.type))G.dtick=N,G.tick0=et.tick0(void 0,G.type,F);else{if(s)Z=(ee-$)/s;else{var er=j.distinctVals(i),en=Math.pow(10,Math.floor(Math.log(er.minDiff)/Math.LN10));_(Z=Math.max(en*j.roundUp(er.minDiff/en,[.9,1.9,4.9,9.9],!0),2*j.stdev(i)/Math.pow(i.length,x?.25:.4)))||(Z=1)}eO.autoTicks(G,Z)}var ei=G.dtick,eo=eO.tickIncrement(eO.tickFirst(G),ei,"reverse",F);if("number"==typeof ei)eo=function(i,o,s,x,F){var N=0,j=0,G=0,Z=0;function nearEdge(o){return(1+(o-i)*100/s.dtick)%100<2}for(var X=0;X<o.length;X++)o[X]%1==0?G++:!_(o[X])&&Z++,nearEdge(o[X])&&N++,nearEdge(o[X]+s.dtick/2)&&j++;var J=o.length-Z;if(G===J&&"date"!==s.type)s.dtick<1?i=x-.5*s.dtick:(i-=.5)+s.dtick<x&&(i+=s.dtick);else if(j<.1*J&&(N>.3*J||nearEdge(x)||nearEdge(F))){var $=s.dtick/2;i+=i+$<x?$:-$}return i}(eo,i,G,$,ee),J=1+Math.floor((ee-eo)/ei),X=eo+J*ei;else for("M"===G.dtick.charAt(0)&&(eo=function(i,o,s,x,_){var F=j.findExactDates(o,_);if(F.exactDays>.8){var N=Number(s.substr(1));F.exactYears>.8&&N%12==0?i=eO.tickIncrement(i,"M6","reverse")+1.5*ep:F.exactMonths>.8?i=eO.tickIncrement(i,"M1","reverse")+15.5*ep:i-=eg;var G=eO.tickIncrement(i,s);if(G<=x)return G}return i}(eo,i,ei,$,F)),X=eo,J=0;X<=ee;)X=eO.tickIncrement(X,ei,!1,F),J++;return{start:o.c2r(eo,0,F),end:o.c2r(X,0,F),size:ei,_dataSpan:ee-$}},eO.prepMinorTicks=function(i,o,s){if(!o.minor.dtick){delete i.dtick;var x,F=o.dtick&&_(o._tmin);if(F){var N=eO.tickIncrement(o._tmin,o.dtick,!0);x=[o._tmin,.99*N+.01*o._tmin]}else{var G=j.simpleMap(o.range,o.r2l);x=[G[0],.8*G[0]+.2*G[1]]}if(i.range=j.simpleMap(x,o.l2r),i._isMinor=!0,eO.prepTicks(i,s),F){var Z=_(o.dtick),X=_(i.dtick),J=Z?o.dtick:+o.dtick.substring(1),$=X?i.dtick:+i.dtick.substring(1);Z&&X?isMultiple(J,$)?J===2*ed&&$===2*ep&&(i.dtick=ed):J===2*ed&&$===3*ep?i.dtick=ed:J!==ed||(o._input.minor||{}).nticks?isClose(J/$,2.5)?i.dtick=J/2:i.dtick=J:i.dtick=ep:"M"===String(o.dtick).charAt(0)?X?i.dtick="M1":isMultiple(J,$)?J>=12&&2===$&&(i.dtick="M3"):i.dtick=o.dtick:"L"===String(i.dtick).charAt(0)?"L"===String(o.dtick).charAt(0)?isMultiple(J,$)||(i.dtick=isClose(J/$,2.5)?o.dtick/2:o.dtick):i.dtick="D1":"D2"===i.dtick&&+o.dtick>1&&(i.dtick=1)}i.range=o.range}void 0===o.minor._tick0Init&&(i.tick0=o.tick0)},eO.prepTicks=function(i,o){var s=j.simpleMap(i.range,i.r2l,void 0,void 0,o);if("auto"===i.tickmode||!i.dtick){var x,F=i.nticks;F||("category"===i.type||"multicategory"===i.type?(x=i.tickfont?j.bigFont(i.tickfont.size||12):15,F=i._length/x):(x="y"===i._id.charAt(0)?40:80,F=j.constrain(i._length/x,4,9)+1),"radialaxis"!==i._name||(F*=2)),i.minor&&"array"!==i.minor.tickmode||"array"!==i.tickmode||(F*=100),i._roughDTick=Math.abs(s[1]-s[0])/F,eO.autoTicks(i,i._roughDTick),i._minDtick>0&&i.dtick<2*i._minDtick&&(i.dtick=i._minDtick,i.tick0=i.l2r(i._forceTick0))}"period"===i.ticklabelmode&&function(i){function mDate(){return!(_(i.dtick)||"M"!==i.dtick.charAt(0))}var o,s=mDate(),x=eO.getTickFormat(i);if(x){var F=i._dtickInit!==i.dtick;!/%[fLQsSMX]/.test(x)&&(/%[HI]/.test(x)?(o=em,F&&!s&&i.dtick<em&&(i.dtick=em)):/%p/.test(x)?(o=eg,F&&!s&&i.dtick<eg&&(i.dtick=eg)):/%[Aadejuwx]/.test(x)?(o=ep,F&&!s&&i.dtick<ep&&(i.dtick=ep)):/%[UVW]/.test(x)?(o=ed,F&&!s&&i.dtick<ed&&(i.dtick=ed)):/%[Bbm]/.test(x)?(o=ef,F&&(s?1>nMonths(i.dtick):i.dtick<eh)&&(i.dtick="M1")):/%[q]/.test(x)?(o=el,F&&(s?3>nMonths(i.dtick):i.dtick<ec)&&(i.dtick="M3")):/%[Yy]/.test(x)&&(o=ei,F&&(s?12>nMonths(i.dtick):i.dtick<eo)&&(i.dtick="M12")))}(s=mDate())&&i.tick0===i._dowTick0&&(i.tick0=i._rawTick0),i._definedDelta=o}(i),i.tick0||(i.tick0="date"===i.type?"2000-01-01":0),"date"===i.type&&i.dtick<.1&&(i.dtick=.1),autoTickRound(i)},eO.calcTicks=function(i,o){for(var s,x,F,N,G=i.type,Z=i.calendar,X=i.ticklabelstep,J="period"===i.ticklabelmode,$=j.simpleMap(i.range,i.r2l,void 0,void 0,o),ee=$[1]<$[0],et=Math.min($[0],$[1]),er=Math.max($[0],$[1]),ey=Math.max(1e3,i._length||0),ev=[],ex=[],ew=[],eT=[],ek=i.minor&&(i.minor.ticks||i.minor.showgrid),eA=1;eA>=(ek?0:1);eA--){var eS,eM,eC=!eA;eA?(i._dtickInit=i.dtick,i._tick0Init=i.tick0):(i.minor._dtickInit=i.minor.dtick,i.minor._tick0Init=i.minor.tick0);var eE=eA?i:j.extendFlat({},i,i.minor);if(eC?eO.prepMinorTicks(eE,i,o):eO.prepTicks(eE,o),"array"===eE.tickmode){eA?(ew=[],ev=arrayTicks(i)):(eT=[],ex=arrayTicks(i));continue}if("sync"===eE.tickmode){ew=[],ev=function(i){var o=i._mainAxis,s=[];if(o._vals){for(var x=0;x<o._vals.length;x++)if(!o._vals[x].noTick){var _=o.l2p(o._vals[x].x),F=i.p2l(_),N=eO.tickText(i,F);o._vals[x].minor&&(N.minor=!0,N.text=""),s.push(N)}}return filterRangeBreaks(i,s)}(i);continue}var eL=expandRange($),eP=eL[0],eI=eL[1],eD=_(eE.dtick),eR="log"===G&&!(eD||"L"===eE.dtick.charAt(0)),eB=eO.tickFirst(eE,o);if(eA){if(i._tmin=eB,eB<eP!==ee)break;("category"===G||"multicategory"===G)&&(eI=ee?Math.max(-.5,eI):Math.min(i._categories.length-.5,eI))}var ez=null,eF=eB;eA&&(eD?eM=i.dtick:"date"===G?"string"==typeof i.dtick&&"M"===i.dtick.charAt(0)&&(eM=ef*i.dtick.substring(1)):eM=i._roughDTick,eS=Math.round((i.r2l(eF)-i.r2l(i.tick0))/eM)-1);var eN=eE.dtick;for(eE.rangebreaks&&eE._tick0Init!==eE.tick0&&(eF=moveOutsideBreak(eF,i),ee||(eF=eO.tickIncrement(eF,eN,!ee,Z))),eA&&J&&(eF=eO.tickIncrement(eF,eN,!ee,Z),eS--);ee?eF>=eI:eF<=eI;eF=eO.tickIncrement(eF,eN,ee,Z)){if(eA&&eS++,eE.rangebreaks&&!ee){if(eF<eP)continue;if(eE.maskBreaks(eF)===e_&&moveOutsideBreak(eF,eE)>=er)break}if(ew.length>ey||eF===ez)break;ez=eF;var ej={value:eF};eA?(eR&&eF!==(0|eF)&&(ej.simpleLabel=!0),X>1&&eS%X&&(ej.skipLabel=!0),ew.push(ej)):(ej.minor=!0,eT.push(ej))}}if(ek&&!("inside"===i.minor.ticks&&"outside"===i.ticks||"outside"===i.minor.ticks&&"inside"===i.ticks)){for(var eU=ew.map(function(i){return i.value}),eV=[],eH=0;eH<eT.length;eH++){var eG=eT[eH],eW=eG.value;if(-1===eU.indexOf(eW)){for(var eZ=!1,eY=0;!eZ&&eY<ew.length;eY++)1e7+ew[eY].value===1e7+eW&&(eZ=!0);eZ||eV.push(eG)}}eT=eV}if(J&&function(i,o,s){for(var x=0;x<i.length;x++){var _,F=i[x].value,N=x,j=x+1;x<i.length-1?(N=x,j=x+1):(N=x>0?x-1:x,j=x);var G=i[N].value,Z=Math.abs(i[j].value-G),X=s||Z,J=0;X>=eo?J=Z>=eo&&Z<=en?Z:ei:s===el&&X>=ec?J=Z>=ec&&Z<=es?Z:el:X>=eh?J=Z>=eh&&Z<=eu?Z:ef:s===ed&&X>=ed?J=ed:X>=ep?J=ep:s===eg&&X>=eg?J=eg:s===em&&X>=em&&(J=em),J>=Z&&(J=Z,_=!0);var $=F+J;if(o.rangebreaks&&J>0){for(var ee=0,et=0;et<84;et++){var er=(et+.5)/84;o.maskBreaks(F*(1-er)+er*$)!==e_&&ee++}(J*=ee/84)||(i[x].drop=!0),_&&Z>ed&&(J=Z)}(J>0||0===x)&&(i[x].periodX=F+J/2)}}(ew,i,i._definedDelta),i.rangebreaks){var eX="y"===i._id.charAt(0),eK=1;"auto"===i.tickmode&&(eK=i.tickfont?i.tickfont.size:12);var eJ=NaN;for(s=ew.length-1;s>-1;s--){if(ew[s].drop){ew.splice(s,1);continue}ew[s].value=moveOutsideBreak(ew[s].value,i);var e$=i.c2p(ew[s].value);(eX?eJ>e$-eK:eJ<e$+eK)?ew.splice(ee?s+1:s,1):eJ=e$}}isAngular(i)&&360===Math.abs($[1]-$[0])&&ew.pop(),i._tmax=(ew[ew.length-1]||{}).value,i._prevDateHead="",i._inCalcTicks=!0;var hideLabel=function(o){o.text="",i._prevDateHead=x};for(s=0,ew=ew.concat(eT);s<ew.length;s++){var eQ=ew[s].minor,e0=ew[s].value;eQ?ex.push({x:e0,minor:!0}):(x=i._prevDateHead,F=eO.tickText(i,e0,!1,ew[s].simpleLabel),void 0!==(N=ew[s].periodX)&&(F.periodX=N,(N>er||N<et)&&(N>er&&(F.periodX=er),N<et&&(F.periodX=et),hideLabel(F))),ew[s].skipLabel&&hideLabel(F),ev.push(F))}return ev=ev.concat(ex),i._inCalcTicks=!1,J&&ev.length&&(ev[0].noTick=!0),ev};var ej=[2,5,10],eU=[1,2,3,6,12],eV=[1,2,5,10,15,30],eH=[1,2,3,7,14],eG=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],eW=[-.301,0,.301,.699,1],eZ=[15,30,45,90,180];function roundDTick(i,o,s){return o*j.roundUp(i/o,s)}function autoTickRound(i){var o=i.dtick;if(i._tickexponent=0,_(o)||"string"==typeof o||(o=1),("category"===i.type||"multicategory"===i.type)&&(i._tickround=null),"date"===i.type){var s=i.r2l(i.tick0),x=i.l2r(s).replace(/(^-|i)/g,""),F=x.length;if("M"===String(o).charAt(0))F>10||"01-01"!==x.substr(5)?i._tickround="d":i._tickround=+o.substr(1)%12==0?"y":"m";else if(o>=ep&&F<=10||o>=15*ep)i._tickround="d";else if(o>=ey&&F<=16||o>=em)i._tickround="M";else if(o>=ev&&F<=19||o>=ey)i._tickround="S";else{var N=i.l2r(s+o).replace(/^-/,"").length;i._tickround=Math.max(F,N)-20,i._tickround<0&&(i._tickround=4)}}else if(_(o)||"L"===o.charAt(0)){var j=i.range.map(i.r2d||Number);_(o)||(o=Number(o.substr(1))),i._tickround=2-Math.floor(Math.log(o)/Math.LN10+.01);var G=Math.floor(Math.log(Math.max(Math.abs(j[0]),Math.abs(j[1])))/Math.LN10+.01);Math.abs(G)>(void 0===i.minexponent?3:i.minexponent)&&(isSIFormat(i.exponentformat)&&!beyondSI(G)?i._tickexponent=3*Math.round((G-1)/3):i._tickexponent=G)}else i._tickround=null}function tickTextObj(i,o,s){var x=i.tickfont||{};return{x:o,dx:0,dy:0,text:s||"",fontSize:x.size,font:x.family,fontColor:x.color}}eO.autoTicks=function(i,o,s){var x;function getBase(i){return Math.pow(i,Math.floor(Math.log(o)/Math.LN10))}if("date"===i.type){i.tick0=j.dateTick0(i.calendar,0);var F=2*o;if(F>ei)o/=ei,x=getBase(10),i.dtick="M"+12*roundDTick(o,x,ej);else if(F>ef)o/=ef,i.dtick="M"+roundDTick(o,1,eU);else if(F>ep){if(i.dtick=roundDTick(o,ep,i._hasDayOfWeekBreaks?[1,2,7,14]:eH),!s){var N=eO.getTickFormat(i),G="period"===i.ticklabelmode;G&&(i._rawTick0=i.tick0),/%[uVW]/.test(N)?i.tick0=j.dateTick0(i.calendar,2):i.tick0=j.dateTick0(i.calendar,1),G&&(i._dowTick0=i.tick0)}}else F>em?i.dtick=roundDTick(o,em,eU):F>ey?i.dtick=roundDTick(o,ey,eV):F>ev?i.dtick=roundDTick(o,ev,eV):(x=getBase(10),i.dtick=roundDTick(o,x,ej))}else if("log"===i.type){i.tick0=0;var Z=j.simpleMap(i.range,i.r2l);if(i._isMinor&&(o*=1.5),o>.7)i.dtick=Math.ceil(o);else if(1>Math.abs(Z[1]-Z[0])){var X=1.5*Math.abs((Z[1]-Z[0])/o);o=Math.abs(Math.pow(10,Z[1])-Math.pow(10,Z[0]))/X,x=getBase(10),i.dtick="L"+roundDTick(o,x,ej)}else i.dtick=o>.3?"D2":"D1"}else"category"===i.type||"multicategory"===i.type?(i.tick0=0,i.dtick=Math.ceil(Math.max(o,1))):isAngular(i)?(i.tick0=0,x=1,i.dtick=roundDTick(o,x,eZ)):(i.tick0=0,x=getBase(10),i.dtick=roundDTick(o,x,ej));if(0===i.dtick&&(i.dtick=1),!_(i.dtick)&&"string"!=typeof i.dtick){var J=i.dtick;throw i.dtick=1,"ax.dtick error: "+String(J)}},eO.tickIncrement=function(i,o,s,F){var N=s?-1:1;if(_(o))return j.increment(i,N*o);var G=o.charAt(0),Z=N*Number(o.substr(1));if("M"===G)return j.incrementMonth(i,Z,F);if("L"===G)return Math.log(Math.pow(10,i)+Z)/Math.LN10;if("D"===G){var X="D2"===o?eW:eG,J=i+.01*N,$=j.roundUp(j.mod(J,1),X,s);return Math.floor(J)+Math.log(x.round(Math.pow(10,$),1))/Math.LN10}throw"unrecognized dtick "+String(o)},eO.tickFirst=function(i,o){var s=i.r2l||Number,F=j.simpleMap(i.range,s,void 0,void 0,o),N=F[1]<F[0],G=N?Math.floor:Math.ceil,Z=expandRange(F)[0],X=i.dtick,J=s(i.tick0);if(_(X)){var $=G((Z-J)/X)*X+J;return("category"===i.type||"multicategory"===i.type)&&($=j.constrain($,0,i._categories.length-1)),$}var ee=X.charAt(0),et=Number(X.substr(1));if("M"===ee){for(var er,en,ei,eo=0,es=J;eo<10;){if(((er=eO.tickIncrement(es,X,N,i.calendar))-Z)*(es-Z)<=0){if(N)return Math.min(es,er);return Math.max(es,er)}ei=ee+(Math.abs(Math.round(en=(Z-(es+er)/2)/(er-es)))||1)*et,es=eO.tickIncrement(es,ei,en<0?!N:N,i.calendar),eo++}return j.error("tickFirst did not converge",i),es}if("L"===ee)return Math.log(G((Math.pow(10,Z)-J)/et)*et+J)/Math.LN10;if("D"===ee){var el="D2"===X?eW:eG,ec=j.roundUp(j.mod(Z,1),el,N);return Math.floor(Z)+Math.log(x.round(Math.pow(10,ec),1))/Math.LN10}throw"unrecognized dtick "+String(X)},eO.tickText=function(i,o,s,x){var F,N,G,Z,X,J,$,ee=tickTextObj(i,o),et="array"===i.tickmode,er=s||et,en=i.type,ei="category"===en?i.d2l_noadd:i.d2l;if(et&&Array.isArray(i.ticktext)){var eo=j.simpleMap(i.range,i.r2l),es=(Math.abs(eo[1]-eo[0])-(i._lBreaks||0))/1e4;for($=0;$<i.ticktext.length&&!(Math.abs(o-ei(i.tickvals[$]))<es);$++);if($<i.ticktext.length)return ee.text=String(i.ticktext[$]),ee}function isHidden(x){if(void 0===x)return!0;if(s)return"none"===x;var _={first:i._tmin,last:i._tmax}[x];return"all"!==x&&o!==_}var el=s?"never":"none"!==i.exponentformat&&isHidden(i.showexponent)?"hide":"";if("date"===en?function(i,o,s,x){var F,N=i._tickround,G=s&&i.hoverformat||eO.getTickFormat(i);x&&(N=_(N)?4:({y:"m",m:"d",d:"M",M:"S",S:4})[N]);var Z=j.formatDate(o.x,G,N,i._dateFormat,i.calendar,i._extraFormat),X=Z.indexOf("\n");if(-1!==X&&(F=Z.substr(X+1),Z=Z.substr(0,X)),x&&("00:00:00"===Z||"00:00"===Z?(Z=F,F=""):8===Z.length&&(Z=Z.replace(/:00$/,""))),F){if(s)"d"===N?Z+=", "+F:Z=F+(Z?", "+Z:"");else if(i._inCalcTicks&&i._prevDateHead===F){var J=insideTicklabelposition(i),$=i._trueSide||i.side;(!J&&"top"===$||J&&"bottom"===$)&&(Z+="<br> ")}else i._prevDateHead=F,Z+="<br>"+F}o.text=Z}(i,ee,s,er):"log"===en?function(i,o,s,x,F){var N=i.dtick,G=o.x,Z=i.tickformat,X="string"==typeof N&&N.charAt(0);if("never"===F&&(F=""),x&&"L"!==X&&(N="L3",X="L"),Z||"L"===X)o.text=numFormat(Math.pow(10,G),i,F,x);else if(_(N)||"D"===X&&.1>j.mod(G+.01,1)){var J=Math.round(G),$=Math.abs(J),ee=i.exponentformat;"power"===ee||isSIFormat(ee)&&beyondSI(J)?(0===J?o.text=1:1===J?o.text="10":o.text="10<sup>"+(J>1?"":ex)+$+"</sup>",o.fontSize*=1.25):("e"===ee||"E"===ee)&&$>2?o.text="1"+ee+(J>0?"+":ex)+$:(o.text=numFormat(Math.pow(10,G),i,"","fakehover"),"D1"===N&&"y"===i._id.charAt(0)&&(o.dy-=o.fontSize/6))}else if("D"===X)o.text=String(Math.round(Math.pow(10,j.mod(G,1)))),o.fontSize*=.75;else throw"unrecognized dtick "+String(N);if("D1"===i.dtick){var et=String(o.text).charAt(0);("0"===et||"1"===et)&&("y"===i._id.charAt(0)?o.dx-=o.fontSize/4:(o.dy+=o.fontSize/2,o.dx+=(i.range[1]>i.range[0]?1:-1)*o.fontSize*(G<0?.5:.25)))}}(i,ee,0,er,el):"category"===en?(void 0===(F=i._categories[Math.round(ee.x)])&&(F=""),ee.text=String(F)):"multicategory"===en?(N=Math.round(ee.x),Z=void 0===(G=i._categories[N]||[])[1]?"":String(G[1]),X=void 0===G[0]?"":String(G[0]),s?ee.text=X+" - "+Z:(ee.text=Z,ee.text2=X)):isAngular(i)?function(i,o,s,x,_){if("radians"!==i.thetaunit||s)o.text=numFormat(o.x,i,_,x);else{var F=o.x/180;if(0===F)o.text="0";else{var N=function(i){function almostEq(i,o){return 1e-6>=Math.abs(i-o)}var o=function(i){for(var o=1;!almostEq(Math.round(i*o)/o,i);)o*=10;return o}(i),s=i*o,x=Math.abs(function findGCD(i,o){return almostEq(o,0)?i:findGCD(o,i%o)}(s,o));return[Math.round(s/x),Math.round(o/x)]}(F);if(N[1]>=100)o.text=numFormat(j.deg2rad(o.x),i,_,x);else{var G=o.x<0;1===N[1]?1===N[0]?o.text="":o.text=N[0]+"":o.text=["<sup>",N[0],"</sup>","","<sub>",N[1],"</sub>",""].join(""),G&&(o.text=ex+o.text)}}}}(i,ee,s,er,el):("never"===(J=el)?J="":"all"===i.showexponent&&1e-6>Math.abs(ee.x/i.dtick)&&(J="hide"),ee.text=numFormat(ee.x,i,J,er)),x||(i.tickprefix&&!isHidden(i.showtickprefix)&&(ee.text=i.tickprefix+ee.text),!i.ticksuffix||isHidden(i.showticksuffix)||(ee.text+=i.ticksuffix)),i.labelalias&&i.labelalias.hasOwnProperty(ee.text)){var ec=i.labelalias[ee.text];"string"==typeof ec&&(ee.text=ec)}if("boundaries"===i.tickson||i.showdividers){var inbounds=function(o){var s=i.l2p(o);return s>=0&&s<=i._length?o:null};ee.xbnd=[inbounds(ee.x-.5),inbounds(ee.x+i.dtick-.5)]}return ee},eO.hoverLabelText=function(i,o,s){s&&(i=j.extendFlat({},i,{hoverformat:s}));var x=Array.isArray(o)?o[0]:o,_=Array.isArray(o)?o[1]:void 0;if(void 0!==_&&_!==x)return eO.hoverLabelText(i,x,s)+" - "+eO.hoverLabelText(i,_,s);var F="log"===i.type&&x<=0,N=eO.tickText(i,i.c2l(F?-x:x),"hover").text;return F?0===x?"0":ex+N:N};var eY=["f","p","n","","m","","k","M","G","T"];function isSIFormat(i){return"SI"===i||"B"===i}function beyondSI(i){return i>14||i<-15}function numFormat(i,o,s,x){var F,N=i<0,G=o._tickround,Z=s||o.exponentformat||"B",X=o._tickexponent,J=eO.getTickFormat(o),$=o.separatethousands;if(x){var ee={exponentformat:Z,minexponent:o.minexponent,dtick:"none"===o.showexponent?o.dtick:_(i)&&Math.abs(i)||1,range:"none"===o.showexponent?o.range.map(o.r2d):[0,i||1]};autoTickRound(ee),G=(Number(ee._tickround)||0)+4,X=ee._tickexponent,o.hoverformat&&(J=o.hoverformat)}if(J)return o._numFormat(J)(i).replace(/-/g,ex);var et=Math.pow(10,-G)/2;if("none"===Z&&(X=0),(i=Math.abs(i))<et)i="0",N=!1;else{if(i+=et,X&&(i*=Math.pow(10,-X),G+=X),0===G)i=String(Math.floor(i));else if(G<0){i=(i=String(Math.round(i))).substr(0,i.length+G);for(var er=G;er<0;er++)i+="0"}else{var en=(i=String(i)).indexOf(".")+1;en&&(i=i.substr(0,en+G).replace(/\.?0+$/,""))}i=j.numSeparate(i,o._separators,$)}return(X&&"hide"!==Z&&(isSIFormat(Z)&&beyondSI(X)&&(Z="power"),F=X<0?ex+-X:"power"!==Z?"+"+X:String(X),"e"===Z||"E"===Z?i+=Z+F:"power"===Z?i+="\xd710<sup>"+F+"</sup>":"B"===Z&&9===X?i+="B":isSIFormat(Z)&&(i+=eY[X/3+5])),N)?ex+i:i}function filterPush(i,o){if(i){var s=Object.keys(eM).reduce(function(i,s){return -1!==o.indexOf(s)&&eM[s].forEach(function(o){i[o]=1}),i},{});Object.keys(i).forEach(function(o){s[o]||(1===o.length?i[o]=0:delete i[o])})}}function getPosX(i){return void 0!==i.periodX?i.periodX:i.x}function tickDataFn(i){return[i.text,i.x,i.axInfo,i.font,i.fontSize,i.fontColor].join("_")}function approxTitleDepth(i){var o=i.title.font.size,s=(i.title.text.match(Z.BR_TAG_ALL)||[]).length;return i.title.hasOwnProperty("standoff")?s?o*(eL+s*eP):o*eL:s?o*(s+1)*eP:o}function clipEnds(i,o){var s=i.l2p(o);return s>1&&s<i._length-1}function selectTickLabel(i){var o=x.select(i),s=o.select(".text-math-group");return s.empty()?o.select("text"):s}function axAutoMarginID(i){return i._id+".automargin"}function axMirrorAutoMarginID(i){return axAutoMarginID(i)+".mirror"}function rangeSliderAutoMarginID(i){return i._id+".rangeslider"}function mergeAxisGroups(i,o){for(var s=0;s<o.length;s++)-1===i.indexOf(o[s])&&i.push(o[s])}function isAngular(i){return"angularaxis"===i._id}function moveOutsideBreak(i,o){for(var s=o._rangebreaks.length,x=0;x<s;x++){var _=o._rangebreaks[x];if(i>=_.min&&i<_.max)return _.max}return i}function insideTicklabelposition(i){return -1!==(i.ticklabelposition||"").indexOf("inside")}function hideCounterAxisInsideTickLabels(i,o){insideTicklabelposition(i._anchorAxis||{})&&i._hideCounterAxisInsideTickLabels&&i._hideCounterAxisInsideTickLabels(o)}function incrementShift(i,o,s,x){var _,F="free"!==i.anchor&&(void 0===i.overlaying||!1===i.overlaying)?i._id:i.overlaying;_=x?"right"===i.side?o:-o:o,F in s||(s[F]={}),i.side in s[F]||(s[F][i.side]=0),s[F][i.side]+=_}eO.getTickFormat=function(i){var o,s,x;function convertToMs(i){return"string"!=typeof i?i:Number(i.replace("M",""))*ef}function compareLogTicks(i,o){var s=["L","D"];if(typeof i!=typeof o)return"number"==typeof i?1:-1;if("number"==typeof i)return i-o;var x=s.indexOf(i.charAt(0)),_=s.indexOf(o.charAt(0));return x===_?Number(i.replace(/(L|D)/g,""))-Number(o.replace(/(L|D)/g,"")):x-_}if(i.tickformatstops&&i.tickformatstops.length>0)switch(i.type){case"date":case"linear":for(o=0;o<i.tickformatstops.length;o++)if((x=i.tickformatstops[o]).enabled&&function(i,o,s){var x=s||function(i){return i},_=o[0],F=o[1];return(!_&&"number"!=typeof _||x(_)<=x(i))&&(!F&&"number"!=typeof F||x(F)>=x(i))}(i.dtick,x.dtickrange,convertToMs)){s=x;break}break;case"log":for(o=0;o<i.tickformatstops.length;o++)if((x=i.tickformatstops[o]).enabled&&function(i,o){var s=null===o[0],x=null===o[1],_=compareLogTicks(i,o[0])>=0,F=0>=compareLogTicks(i,o[1]);return(s||_)&&(x||F)}(i.dtick,x.dtickrange)){s=x;break}}return s?s.value:i.tickformat},eO.getSubplots=function(i,o){var s=i._fullLayout._subplots,x=s.cartesian.concat(s.gl2d||[]),_=o?eO.findSubplotsWithAxis(x,o):x;return _.sort(function(i,o){var s=i.substr(1).split("y"),x=o.substr(1).split("y");return s[0]===x[0]?+s[1]-+x[1]:+s[0]-+x[0]}),_},eO.findSubplotsWithAxis=function(i,o){for(var s=new RegExp("x"===o._id.charAt(0)?"^"+o._id+"y":o._id+"$"),x=[],_=0;_<i.length;_++){var F=i[_];s.test(F)&&x.push(F)}return x},eO.makeClipPaths=function(i){var o,s,_=i._fullLayout;if(!_._hasOnlyLargeSploms){var F={_offset:0,_length:_.width,_id:""},N={_offset:0,_length:_.height,_id:""},j=eO.list(i,"x",!0),G=eO.list(i,"y",!0),Z=[];for(o=0;o<j.length;o++)for(Z.push({x:j[o],y:N}),s=0;s<G.length;s++)0===o&&Z.push({x:F,y:G[s]}),Z.push({x:j[o],y:G[s]});var X=_._clips.selectAll(".axesclip").data(Z,function(i){return i.x._id+i.y._id});X.enter().append("clipPath").classed("axesclip",!0).attr("id",function(i){return"clip"+_._uid+i.x._id+i.y._id}).append("rect"),X.exit().remove(),X.each(function(i){x.select(this).select("rect").attr({x:i.x._offset||0,y:i.y._offset||0,width:i.x._length||1,height:i.y._length||1})})}},eO.draw=function(i,o,s){var x=i._fullLayout;"redraw"===o&&x._paper.selectAll("g.subplot").each(function(i){var o=i[0],s=x._plots[o];if(s){var _=s.xaxis,F=s.yaxis;s.xaxislayer.selectAll("."+_._id+"tick").remove(),s.yaxislayer.selectAll("."+F._id+"tick").remove(),s.xaxislayer.selectAll("."+_._id+"tick2").remove(),s.yaxislayer.selectAll("."+F._id+"tick2").remove(),s.xaxislayer.selectAll("."+_._id+"divider").remove(),s.yaxislayer.selectAll("."+F._id+"divider").remove(),s.minorGridlayer&&s.minorGridlayer.selectAll("path").remove(),s.gridlayer&&s.gridlayer.selectAll("path").remove(),s.zerolinelayer&&s.zerolinelayer.selectAll("path").remove(),x._infolayer.select(".g-"+_._id+"title").remove(),x._infolayer.select(".g-"+F._id+"title").remove()}});var _=o&&"redraw"!==o?o:eO.listIds(i),F=eO.list(i).filter(function(i){return i.autoshift}).map(function(i){return i.overlaying});_.map(function(o){var s=eO.getFromId(i,o);if("sync"===s.tickmode&&s.overlaying){var x=_.findIndex(function(i){return i===s.overlaying});x>=0&&_.unshift(_.splice(x,1).shift())}});var N={false:{left:0,right:0}};return j.syncOrAsync(_.map(function(o){return function(){if(o){var x=eO.getFromId(i,o);s||(s={}),s.axShifts=N,s.overlayingShiftedAx=F;var _=eO.drawOne(i,x,s);return x._shiftPusher&&incrementShift(x,x._fullDepth||0,N,!0),x._r=x.range.slice(),x._rl=j.simpleMap(x._r,x.r2l),_}}}))},eO.drawOne=function(i,o,s){var x=(s=s||{}).axShifts||{},_=s.overlayingShiftedAx||[];o.setScale();var G=i._fullLayout,Z=o._id,ee=Z.charAt(0),et=eO.counterLetter(Z),er=G._plots[o._mainSubplot];if(er){if(o._shiftPusher=o.autoshift||-1!==_.indexOf(o._id)||-1!==_.indexOf(o.overlaying),o._shiftPusher&"free"===o.anchor){var en=o.linewidth/2||0;"inside"===o.ticks&&(en+=o.ticklen),incrementShift(o,en,x,!0),incrementShift(o,o.shift||0,x,!1)}(!0!==s.skipTitle||void 0===o._shift)&&(o._shift=o.autoshift?x[o.overlaying][o.side]:o.shift||0);var ei=er[ee+"axislayer"],eo=o._mainLinePosition,es=eo+=o._shift,el=o._mainMirrorPosition,ec=o._vals=eO.calcTicks(o),eu=[o.mirror,es,el].join("_");for(eM=0;eM<ec.length;eM++)ec[eM].axInfo=eu;o._selections={},o._tickAngles&&(o._prevTickAngles=o._tickAngles),o._tickAngles={},o._depth=null;var ef={};if(o.visible){var eh=eO.makeTransTickFn(o),ed=eO.makeTransTickLabelFn(o),ep="inside"===o.ticks,eg="outside"===o.ticks;if("boundaries"===o.tickson){var em=function(i,o){var s,x=[],_push=function(i,o){var s=i.xbnd[o];null!==s&&x.push(j.extendFlat({},i,{x:s}))};if(o.length){for(s=0;s<o.length;s++)_push(o[s],0);_push(o[s-1],1)}return x}(0,ec);eD=eO.clipEnds(o,em),eL=ep?eD:em}else eD=eO.clipEnds(o,ec),eL=ep&&"period"!==o.ticklabelmode?eD:ec;var ey=o._gridVals=eD,ev=function(i,o){var s,x,_=[],F=o.length&&o[o.length-1].x<o[0].x,_push=function(i,o){var s=i.xbnd[o];null!==s&&_.push(j.extendFlat({},i,{x:s}))};if(i.showdividers&&o.length){for(s=0;s<o.length;s++){var N=o[s];N.text2!==x&&_push(N,F?1:0),x=N.text2}_push(o[s-1],F?0:1)}return _}(o,ec);if(!G._hasOnlyLargeSploms){var ex=o._subplotsWith,e_={};for(eM=0;eM<ex.length;eM++){eC=ex[eM];var ew=(eE=G._plots[eC])[et+"axis"],eT=ew._mainAxis._id;if(!e_[eT]){e_[eT]=1;var ek="x"===ee?"M0,"+ew._offset+"v"+ew._length:"M"+ew._offset+",0h"+ew._length;eO.drawGrid(i,o,{vals:ey,counterAxis:ew,layer:eE.gridlayer.select("."+Z),minorLayer:eE.minorGridlayer.select("."+Z),path:ek,transFn:eh}),eO.drawZeroLine(i,o,{counterAxis:ew,layer:eE.zerolinelayer,path:ek,transFn:eh})}}}var eA=eO.getTickSigns(o),eS=eO.getTickSigns(o,"minor");if(o.ticks||o.minor&&o.minor.ticks){var eM,eC,eE,eL,eD,eR,eB,ez,eF,eN,ej=eO.makeTickPath(o,es,eA[2]),eU=eO.makeTickPath(o,es,eS[2],{minor:!0});if(o._anchorAxis&&o.mirror&&!0!==o.mirror?(eB=eO.makeTickPath(o,el,eA[3]),ez=eO.makeTickPath(o,el,eS[3],{minor:!0}),eF=ej+eB,eN=eU+ez):(eB="",ez="",eF=ej,eN=eU),o.showdividers&&eg&&"boundaries"===o.tickson){var eV={};for(eM=0;eM<ev.length;eM++)eV[ev[eM].x]=1;eR=function(i){return eV[i.x]?eB:eF}}else eR=function(i){return i.minor?eN:eF}}if(eO.drawTicks(i,o,{vals:eL,layer:ei,path:eR,transFn:eh}),"allticks"===o.mirror){var eH=Object.keys(o._linepositions||{});for(eM=0;eM<eH.length;eM++){eC=eH[eM],eE=G._plots[eC];var eG=o._linepositions[eC]||[],eW=eG[0],eZ=eG[1],eY=eG[2],eX=eO.makeTickPath(o,eW,eY?eA[0]:eS[0],{minor:eY})+eO.makeTickPath(o,eZ,eY?eA[1]:eS[1],{minor:eY});eO.drawTicks(i,o,{vals:eL,layer:eE[ee+"axislayer"],path:eX,transFn:eh})}}var eK=[];if(eK.push(function(){return eO.drawLabels(i,o,{vals:ec,layer:ei,plotinfo:eE,transFn:ed,labelFns:eO.makeLabelFns(o,es)})}),"multicategory"===o.type){var eJ={x:2,y:10}[ee];eK.push(function(){var s=getLabelLevelBbox()[({x:"height",y:"width"})[ee]]+eJ+(o._tickAngles[Z+"tick"]?o.tickfont.size*eP:0);return eO.drawLabels(i,o,{vals:function(i,o){for(var s=[],x={},_=0;_<o.length;_++){var F=o[_];x[F.text2]?x[F.text2].push(F.x):x[F.text2]=[F.x]}for(var N in x)s.push(tickTextObj(i,j.interp(x[N],.5),N));return s}(o,ec),layer:ei,cls:Z+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:eh,labelFns:eO.makeLabelFns(o,es+s*eA[4])})}),eK.push(function(){var s,x,_,F;return o._depth=eA[4]*(getLabelLevelBbox("tick2")[o.side]-es),s={vals:ev,layer:ei,path:eO.makeTickPath(o,es,eA[4],{len:o._depth}),transFn:eh},x=o._id+"divider",_=s.vals,void((F=s.layer.selectAll("path."+x).data(_,tickDataFn)).exit().remove(),F.enter().insert("path",":first-child").classed(x,1).classed("crisp",1).call(J.stroke,o.dividercolor).style("stroke-width",$.crispRound(i,o.dividerwidth,1)+"px"),F.attr("transform",s.transFn).attr("d",s.path))})}else o.title.hasOwnProperty("standoff")&&eK.push(function(){o._depth=eA[4]*(getLabelLevelBbox()[o.side]-es)});var e$=N.getComponentMethod("rangeslider","isVisible")(o);return s.skipTitle||e$&&"bottom"===o.side||eK.push(function(){return function(i,o){var s,x,_,F,N,j=i._fullLayout,G=o._id,Z=G.charAt(0),J=o.title.font.size;if(o.title.hasOwnProperty("standoff"))s=o._depth+o.title.standoff+approxTitleDepth(o);else{var ee=insideTicklabelposition(o);if("multicategory"===o.type)s=o._depth;else{var et=1.5*J;ee&&(et=.5*J,"outside"===o.ticks&&(et+=o.ticklen)),s=10+et+(o.linewidth?o.linewidth-1:0)}ee||("x"===Z?s+="top"===o.side?J*(o.showticklabels?1:0):J*(o.showticklabels?1.5:.5):s+="right"===o.side?J*(o.showticklabels?1:.5):J*(o.showticklabels?.5:0))}var er=eO.getPxPosition(i,o);if("x"===Z?(_=o._offset+o._length/2,F="top"===o.side?er-s:er+s):(F=o._offset+o._length/2,_="right"===o.side?er+s:er-s,x={rotate:"-90",offset:0}),"multicategory"!==o.type){var en=o._selections[o._id+"tick"];if(N={selection:en,side:o.side},en&&en.node()&&en.node().parentNode){var ei=$.getTranslate(en.node().parentNode);N.offsetLeft=ei.x,N.offsetTop=ei.y}o.title.hasOwnProperty("standoff")&&(N.pad=0)}return o._titleStandoff=s,X.draw(i,G+"title",{propContainer:o,propName:o._name+".title.text",placeholder:j._dfltTitle[Z],avoid:N,transform:x,attributes:{x:_,y:F,"text-anchor":"middle"}})}(i,o)}),eK.push(function(){var s,x,_,j,Z=o.side.charAt(0),X=eI[o.side].charAt(0),J=eO.getPxPosition(i,o),$=eg?o.ticklen:0;(o.automargin||e$||o._shiftPusher)&&("multicategory"===o.type?s=getLabelLevelBbox("tick2"):(s=getLabelLevelBbox(),"x"===ee&&"b"===Z&&(o._depth=Math.max(s.width>0?s.bottom-J:0,$))));var er=0,en=0;if(o._shiftPusher&&(er=Math.max($,s.height>0?"l"===Z?J-s.left:s.right-J:0),o.title.text!==G._dfltTitle[ee]&&(en=(o._titleStandoff||0)+(o._titleScoot||0),"l"===Z&&(en+=approxTitleDepth(o))),o._fullDepth=Math.max(er,en)),o.automargin){x={x:0,y:0,r:0,l:0,t:0,b:0};var ei=[0,1],eo="number"==typeof o._shift?o._shift:0;if("x"===ee){if("b"===Z?x[Z]=o._depth:(x[Z]=o._depth=Math.max(s.width>0?J-s.top:0,$),ei.reverse()),s.width>0){var es=s.right-(o._offset+o._length);es>0&&(x.xr=1,x.r=es);var el=o._offset-s.left;el>0&&(x.xl=0,x.l=el)}}else if("l"===Z?(o._depth=Math.max(s.height>0?J-s.left:0,$),x[Z]=o._depth-eo):(o._depth=Math.max(s.height>0?s.right-J:0,$),x[Z]=o._depth+eo,ei.reverse()),s.height>0){var ec=s.bottom-(o._offset+o._length);ec>0&&(x.yb=0,x.b=ec);var eu=o._offset-s.top;eu>0&&(x.yt=1,x.t=eu)}x[et]="free"===o.anchor?o.position:o._anchorAxis.domain[ei[0]],o.title.text!==G._dfltTitle[ee]&&(x[Z]+=approxTitleDepth(o)+(o.title.standoff||0)),o.mirror&&"free"!==o.anchor&&((_={x:0,y:0,r:0,l:0,t:0,b:0})[X]=o.linewidth,o.mirror&&!0!==o.mirror&&(_[X]+=$),!0===o.mirror||"ticks"===o.mirror?_[et]=o._anchorAxis.domain[ei[1]]:("all"===o.mirror||"allticks"===o.mirror)&&(_[et]=[o._counterDomainMin,o._counterDomainMax][ei[1]]))}e$&&(j=N.getComponentMethod("rangeslider","autoMarginOpts")(i,o)),"string"==typeof o.automargin&&(filterPush(x,o.automargin),filterPush(_,o.automargin)),F.autoMargin(i,axAutoMarginID(o),x),F.autoMargin(i,axMirrorAutoMarginID(o),_),F.autoMargin(i,rangeSliderAutoMarginID(o),j)}),j.syncOrAsync(eK)}}function getLabelLevelBbox(i){var s,x,_,F,N=Z+(i||"tick");return ef[N]||(ef[N]=(o._selections[N].size()?(s=1/0,x=-1/0,_=1/0,F=-1/0,o._selections[N].each(function(){var i=selectTickLabel(this),o=$.bBox(i.node().parentNode);s=Math.min(s,o.top),x=Math.max(x,o.bottom),_=Math.min(_,o.left),F=Math.max(F,o.right)})):(s=0,x=0,_=0,F=0),{top:s,bottom:x,left:_,right:F,height:x-s,width:F-_})),ef[N]}},eO.getTickSigns=function(i,o){var s=i._id.charAt(0),x=i.side===({x:"top",y:"right"})[s]?1:-1,_=[-1,1,x,-x];return"inside"!==(o?(i.minor||{}).ticks:i.ticks)==("x"===s)&&(_=_.map(function(i){return-i})),i.side&&_.push({l:-1,t:-1,r:1,b:1}[i.side.charAt(0)]),_},eO.makeTransTickFn=function(i){return"x"===i._id.charAt(0)?function(o){return G(i._offset+i.l2p(o.x),0)}:function(o){return G(0,i._offset+i.l2p(o.x))}},eO.makeTransTickLabelFn=function(i){var o=function(i){var o=i.ticklabelposition||"",has=function(i){return -1!==o.indexOf(i)},s=has("top"),x=has("left"),_=has("right"),F=has("bottom"),N=has("inside"),j=F||x||s||_;if(!j&&!N)return[0,0];var G=i.side,Z=j?(i.tickwidth||0)/2:0,X=3,J=i.tickfont?i.tickfont.size:12;return(F||s)&&(Z+=J*eL,X+=(i.linewidth||0)/2),(x||_)&&(Z+=(i.linewidth||0)/2,X+=3),N&&"top"===G&&(X-=J*(1-eL)),(x||s)&&(Z=-Z),("bottom"===G||"right"===G)&&(X=-X),[j?Z:0,N?X:0]}(i),s=o[0],x=o[1];return"x"===i._id.charAt(0)?function(o){return G(s+i._offset+i.l2p(getPosX(o)),x)}:function(o){return G(x,s+i._offset+i.l2p(getPosX(o)))}},eO.makeTickPath=function(i,o,s,x){x||(x={});var _=x.minor;if(_&&!i.minor)return"";var F=void 0!==x.len?x.len:_?i.minor.ticklen:i.ticklen,N=i._id.charAt(0),j=(i.linewidth||1)/2;return"x"===N?"M0,"+(o+j*s)+"v"+F*s:"M"+(o+j*s)+",0h"+F*s},eO.makeLabelFns=function(i,o,s){var x,F,N,G,Z,X=i.ticklabelposition||"",has=function(i){return -1!==X.indexOf(i)},J=has("top"),$=has("left"),ee=has("right"),et=has("bottom")||$||J||ee,er=has("inside"),en="inside"===X&&"inside"===i.ticks||!er&&"outside"===i.ticks&&"boundaries"!==i.tickson,ei=0,eo=0,es=en?i.ticklen:0;if(er?es*=-1:et&&(es=0),en&&(ei+=es,s)){var el=j.deg2rad(s);ei=es*Math.cos(el)+1,eo=es*Math.sin(el)}i.showticklabels&&(en||i.showline)&&(ei+=.2*i.tickfont.size);var ec={labelStandoff:ei+=(i.linewidth||1)/2*(er?-1:1),labelShift:eo},eu=0,ef=i.side,eh=i._id.charAt(0),ed=i.tickangle;if("x"===eh)G=(Z=!er&&"bottom"===ef||er&&"top"===ef)?1:-1,er&&(G*=-1),x=eo*G,F=o+ei*G,N=Z?1:-.2,90===Math.abs(ed)&&(er?N+=eE:N=-90===ed&&"bottom"===ef?eL:90===ed&&"top"===ef?eE:.5,eu=eE/2*(ed/90)),ec.xFn=function(i){return i.dx+x+eu*i.fontSize},ec.yFn=function(i){return i.dy+F+i.fontSize*N},ec.anchorFn=function(i,o){if(et){if($)return"end";if(ee)return"start"}return _(o)&&0!==o&&180!==o?o*G<0!==er?"end":"start":"middle"},ec.heightFn=function(o,s,x){return s<-60||s>60?-.5*x:"top"===i.side!==er?-x:0};else if("y"===eh){if(G=(Z=!er&&"left"===ef||er&&"right"===ef)?1:-1,er&&(G*=-1),x=ei,F=eo*G,N=0,er||90!==Math.abs(ed)||(N=-90===ed&&"left"===ef||90===ed&&"right"===ef?eL:.5),er){var ep=_(ed)?+ed:0;0!==ep&&(eu=Math.abs(Math.sin(j.deg2rad(ep)))*eL*G,N=0)}ec.xFn=function(i){return i.dx+o-(x+i.fontSize*N)*G+eu*i.fontSize},ec.yFn=function(i){return i.dy+F+i.fontSize*eE},ec.anchorFn=function(i,o){return _(o)&&90===Math.abs(o)?"middle":Z?"end":"start"},ec.heightFn=function(o,s,x){return"right"===i.side&&(s*=-1),s<-30?-x:s<30?-.5*x:0}}return ec},eO.drawTicks=function(i,o,s){s=s||{};var _=o._id+"tick",F=[].concat(o.minor&&o.minor.ticks?s.vals.filter(function(i){return i.minor&&!i.noTick}):[]).concat(o.ticks?s.vals.filter(function(i){return!i.minor&&!i.noTick}):[]),N=s.layer.selectAll("path."+_).data(F,tickDataFn);N.exit().remove(),N.enter().append("path").classed(_,1).classed("ticks",1).classed("crisp",!1!==s.crisp).each(function(i){return J.stroke(x.select(this),i.minor?o.minor.tickcolor:o.tickcolor)}).style("stroke-width",function(s){return $.crispRound(i,s.minor?o.minor.tickwidth:o.tickwidth,1)+"px"}).attr("d",s.path).style("display",null),hideCounterAxisInsideTickLabels(o,[eA]),N.attr("transform",s.transFn)},eO.drawGrid=function(i,o,s){if(s=s||{},"sync"!==o.tickmode){var _=o._id+"grid",F=o.minor&&o.minor.showgrid,N=F?s.vals.filter(function(i){return i.minor}):[],j=o.showgrid?s.vals.filter(function(i){return!i.minor}):[],G=s.counterAxis;if(G&&eO.shouldShowZeroLine(i,o,G))for(var Z="array"===o.tickmode,X=0;X<j.length;X++){var ee=j[X].x;if(Z?!ee:Math.abs(ee)<o.dtick/100){if(j=j.slice(0,X).concat(j.slice(X+1)),Z)X--;else break}}o._gw=$.crispRound(i,o.gridwidth,1);for(var et=F?$.crispRound(i,o.minor.gridwidth,1):0,er=s.layer,en=s.minorLayer,ei=1;ei>=0;ei--){var eo=ei?er:en;if(eo){var es=eo.selectAll("path."+_).data(ei?j:N,tickDataFn);es.exit().remove(),es.enter().append("path").classed(_,1).classed("crisp",!1!==s.crisp),es.attr("transform",s.transFn).attr("d",s.path).each(function(i){return J.stroke(x.select(this),i.minor?o.minor.gridcolor:o.gridcolor||"#ddd")}).style("stroke-dasharray",function(i){return $.dashStyle(i.minor?o.minor.griddash:o.griddash,i.minor?o.minor.gridwidth:o.gridwidth)}).style("stroke-width",function(i){return(i.minor?et:o._gw)+"px"}).style("display",null),"function"==typeof s.path&&es.attr("d",s.path)}}hideCounterAxisInsideTickLabels(o,[eT,ek])}},eO.drawZeroLine=function(i,o,s){s=s||s;var x=o._id+"zl",_=eO.shouldShowZeroLine(i,o,s.counterAxis),F=s.layer.selectAll("path."+x).data(_?[{x:0,id:o._id}]:[]);F.exit().remove(),F.enter().append("path").classed(x,1).classed("zl",1).classed("crisp",!1!==s.crisp).each(function(){s.layer.selectAll("path").sort(function(i,o){return eB(i.id,o.id)})}),F.attr("transform",s.transFn).attr("d",s.path).call(J.stroke,o.zerolinecolor||J.defaultLine).style("stroke-width",$.crispRound(i,o.zerolinewidth,o._gw||1)+"px").style("display",null),hideCounterAxisInsideTickLabels(o,[ew])},eO.drawLabels=function(i,o,s){s=s||{};var F=i._fullLayout,N=o._id,X=N.charAt(0),J=s.cls||N+"tick",ee=s.vals.filter(function(i){return i.text}),et=s.labelFns,er=s.secondary?0:o.tickangle,en=(o._prevTickAngles||{})[J],ei=s.layer.selectAll("g."+J).data(o.showticklabels?ee:[],tickDataFn),eo=[];function positionLabels(i,F){i.each(function(i){var N=x.select(this),j=N.select(".text-math-group"),X=et.anchorFn(i,F),J=s.transFn.call(N.node(),i)+(_(F)&&0!=+F?" rotate("+F+","+et.xFn(i)+","+(et.yFn(i)-i.fontSize/2)+")":""),ee=Z.lineCount(N),er=eP*i.fontSize,en=et.heightFn(i,_(F)?+F:0,(ee-1)*er);if(en&&(J+=G(0,en)),j.empty()){var ei=N.select("text");ei.attr({transform:J,"text-anchor":X}),ei.style("opacity",1),o._adjustTickLabelsOverflow&&o._adjustTickLabelsOverflow()}else{var eo=$.bBox(j.node()).width;j.attr("transform",J+G(eo*({end:-.5,start:.5})[X],0))}})}ei.enter().append("g").classed(J,1).append("text").attr("text-anchor","middle").each(function(o){var s=x.select(this),_=i._promises.length;s.call(Z.positionText,et.xFn(o),et.yFn(o)).call($.font,o.font,o.fontSize,o.fontColor).text(o.text).call(Z.convertToTspans,i),i._promises[_]?eo.push(i._promises.pop().then(function(){positionLabels(s,er)})):positionLabels(s,er)}),hideCounterAxisInsideTickLabels(o,[eS]),ei.exit().remove(),s.repositionOnUpdate&&ei.each(function(i){x.select(this).select("text").call(Z.positionText,et.xFn(i),et.yFn(i))}),o._adjustTickLabelsOverflow=function(){var s=o.ticklabeloverflow;if(s&&"allow"!==s){var _=-1!==s.indexOf("hide"),N="x"===o._id.charAt(0),G=0,Z=N?i._fullLayout.width:i._fullLayout.height;if(-1!==s.indexOf("domain")){var X=j.simpleMap(o.range,o.r2l);G=o.l2p(X[0])+o._offset,Z=o.l2p(X[1])+o._offset}var J=Math.min(G,Z),ee=Math.max(G,Z),et=o.side,er=1/0,en=-1/0;for(var eo in ei.each(function(i){var s=x.select(this);if(s.select(".text-math-group").empty()){var F=$.bBox(s.node()),j=0;N?F.right>ee?j=1:F.left<J&&(j=1):F.bottom>ee?j=1:F.top+(o.tickangle?0:i.fontSize/4)<J&&(j=1);var G=s.select("text");j?_&&G.style("opacity",0):(G.style("opacity",1),er="bottom"===et||"right"===et?Math.min(er,N?F.top:F.left):-1/0,en="top"===et||"left"===et?Math.max(en,N?F.bottom:F.right):1/0)}}),F._plots){var es=F._plots[eo];if(o._id===es.xaxis._id||o._id===es.yaxis._id){var el=N?es.yaxis:es.xaxis;el&&(el["_visibleLabelMin_"+o._id]=er,el["_visibleLabelMax_"+o._id]=en)}}}},o._hideCounterAxisInsideTickLabels=function(i){var s="x"===o._id.charAt(0),_=[];for(var N in F._plots){var j=F._plots[N];(o._id===j.xaxis._id||o._id===j.yaxis._id)&&_.push(s?j.yaxis:j.xaxis)}_.forEach(function(s,_){s&&insideTicklabelposition(s)&&(i||[ew,ek,eT,eA,eS]).forEach(function(i){var N="tick"===i.K&&"text"===i.L&&"period"===o.ticklabelmode,j=F._plots[o._mainSubplot];(i.K===ew.K?j.zerolinelayer.selectAll("."+o._id+"zl"):i.K===ek.K?j.minorGridlayer.selectAll("."+o._id):i.K===eT.K?j.gridlayer.selectAll("."+o._id):j[o._id.charAt(0)+"axislayer"]).each(function(){var F=x.select(this);i.L&&(F=F.selectAll(i.L)),F.each(function(F){var j=o.l2p(N?getPosX(F):F.x)+o._offset,G=x.select(this);j<o["_visibleLabelMax_"+s._id]&&j>o["_visibleLabelMin_"+s._id]?G.style("display","none"):"tick"!==i.K||_||G.style("display",null)})})})})},positionLabels(ei,en+1?en:er);var es=null;o._selections&&(o._selections[J]=ei);var el=[function(){return eo.length&&Promise.all(eo)}];o.automargin&&F._redrawFromAutoMarginCount&&90===en?(es=90,el.push(function(){positionLabels(ei,en)})):el.push(function(){if(positionLabels(ei,er),ee.length&&"x"===X&&!_(er)&&("log"!==o.type||"D"!==String(o.dtick).charAt(0))){es=0;var i,x=0,F=[];if(ei.each(function(i){x=Math.max(x,i.fontSize);var s=o.l2p(i.x),_=selectTickLabel(this),N=$.bBox(_.node());F.push({top:0,bottom:10,height:10,left:s-N.width/2,right:s+N.width/2+2,width:N.width+2})}),("boundaries"===o.tickson||o.showdividers)&&!s.secondary){var N=2;for(o.ticks&&(N+=o.tickwidth/2),i=0;i<F.length;i++){var G=ee[i].xbnd,Z=F[i];if(null!==G[0]&&Z.left-o.l2p(G[0])<N||null!==G[1]&&o.l2p(G[1])-Z.right<N){es=90;break}}}else{var J=ee.length,et=Math.abs((ee[J-1].x-ee[0].x)*o._m)/(J-1),en=o.ticklabelposition||"",has=function(i){return -1!==en.indexOf(i)},eo=has("top"),el=has("left"),ec=has("right"),eu=has("bottom")||el||eo||ec?(o.tickwidth||0)+6:0,ef=et<2.5*x||"multicategory"===o.type||"realaxis"===o._name;for(i=0;i<F.length-1;i++)if(j.bBoxIntersect(F[i],F[i+1],eu)){es=ef?90:30;break}}es&&positionLabels(ei,es)}}),o._tickAngles&&el.push(function(){o._tickAngles[J]=null===es?_(er)?er:0:es});var ec=o._anchorAxis;ec&&ec.autorange&&insideTicklabelposition(o)&&!ez(F,o._id)&&(F._insideTickLabelsAutorange||(F._insideTickLabelsAutorange={}),F._insideTickLabelsAutorange[ec._name+".autorange"]=ec.autorange,el.push(function(){ei.each(function(i,s){var x=selectTickLabel(this);x.select(".text-math-group").empty()&&(o._vals[s].bb=$.bBox(x.node()))})}));var eu=j.syncOrAsync(el);return eu&&eu.then&&i._promises.push(eu),eu},eO.getPxPosition=function(i,o){var s,x=i._fullLayout._size,_=o._id.charAt(0),F=o.side;return("free"!==o.anchor?s=o._anchorAxis:"x"===_?s={_offset:x.t+(1-(o.position||0))*x.h,_length:0}:"y"===_&&(s={_offset:x.l+(o.position||0)*x.w+o._shift,_length:0}),"top"===F||"left"===F)?s._offset:"bottom"===F||"right"===F?s._offset+s._length:void 0},eO.shouldShowZeroLine=function(i,o,s){var x=j.simpleMap(o.range,o.r2l);return x[0]*x[1]<=0&&o.zeroline&&("linear"===o.type||"-"===o.type)&&!(o.rangebreaks&&o.maskBreaks(0)===e_)&&(clipEnds(o,0)||!function(i,o,s,x){var _=s._mainAxis;if(_){var F=i._fullLayout,N=o._id.charAt(0),j=eO.counterLetter(o._id),G=o._offset+(Math.abs(x[0])<Math.abs(x[1])==("x"===N)?0:o._length),Z=F._plots[s._mainSubplot];if(!(Z.mainplotinfo||Z).overlays.length)return lineNearZero(s,G);for(var X=eO.list(i,j),J=0;J<X.length;J++){var $=X[J];if($._mainAxis===_&&lineNearZero($,G))return!0}}function lineNearZero(i){if(!i.showline||!i.linewidth)return!1;var s=Math.max((i.linewidth+o.zerolinewidth)/2,1);function closeEnough(i){return"number"==typeof i&&Math.abs(i-G)<s}if(closeEnough(i._mainLinePosition)||closeEnough(i._mainMirrorPosition))return!0;var x=i._linepositions||{};for(var _ in x)if(closeEnough(x[_][0])||closeEnough(x[_][1]))return!0}}(i,o,s,x)||function(i,o){for(var s=i._fullData,x=o._mainSubplot,_=o._id.charAt(0),F=0;F<s.length;F++){var j=s[F];if(!0===j.visible&&j.xaxis+j.yaxis===x&&(N.traceIs(j,"bar-like")&&j.orientation===({x:"h",y:"v"})[_]||j.fill&&j.fill.charAt(j.fill.length-1)===_))return!0}return!1}(i,o))},eO.clipEnds=function(i,o){return o.filter(function(o){return clipEnds(i,o.x)})},eO.allowAutoMargin=function(i){for(var o=eO.list(i,"",!0),s=0;s<o.length;s++){var x=o[s];x.automargin&&(F.allowAutoMargin(i,axAutoMarginID(x)),x.mirror&&F.allowAutoMargin(i,axMirrorAutoMarginID(x))),N.getComponentMethod("rangeslider","isVisible")(x)&&F.allowAutoMargin(i,rangeSliderAutoMarginID(x))}},eO.swap=function(i,o){for(var s=function(i,o){var s=[];for(x=0;x<o.length;x++){var x,_,F,N=[],j=i._fullData[o[x]].xaxis,G=i._fullData[o[x]].yaxis;if(j&&G){for(_=0;_<s.length;_++)(-1!==s[_].x.indexOf(j)||-1!==s[_].y.indexOf(G))&&N.push(_);if(!N.length){s.push({x:[j],y:[G]});continue}var Z=s[N[0]];if(N.length>1)for(_=1;_<N.length;_++)F=s[N[_]],mergeAxisGroups(Z.x,F.x),mergeAxisGroups(Z.y,F.y);mergeAxisGroups(Z.x,[j]),mergeAxisGroups(Z.y,[G])}}return s}(i,o),x=0;x<s.length;x++)(function(i,o,s){var x,_,F=[],N=[],G=i.layout;for(x=0;x<o.length;x++)F.push(eO.getFromId(i,o[x]));for(x=0;x<s.length;x++)N.push(eO.getFromId(i,s[x]));var Z=Object.keys(ee),X=["anchor","domain","overlaying","position","side","tickangle","editType"],J=["linear","log"];for(x=0;x<Z.length;x++){var $=Z[x],et=F[0][$],er=N[0][$],en=!0,ei=!1,eo=!1;if("_"!==$.charAt(0)&&"function"!=typeof et&&-1===X.indexOf($)){for(_=1;_<F.length&&en;_++){var es=F[_][$];"type"===$&&-1!==J.indexOf(et)&&-1!==J.indexOf(es)&&et!==es?ei=!0:es!==et&&(en=!1)}for(_=1;_<N.length&&en;_++){var el=N[_][$];"type"===$&&-1!==J.indexOf(er)&&-1!==J.indexOf(el)&&er!==el?eo=!0:N[_][$]!==er&&(en=!1)}en&&(ei&&(G[F[0]._name].type="linear"),eo&&(G[N[0]._name].type="linear"),function(i,o,s,x,_){var F,N=j.nestedProperty,G=N(i[s[0]._name],o).get(),Z=N(i[x[0]._name],o).get();for("title"===o&&(G&&G.text===_.x&&(G.text=_.y),Z&&Z.text===_.y&&(Z.text=_.x)),F=0;F<s.length;F++)N(i,s[F]._name+"."+o).set(Z);for(F=0;F<x.length;F++)N(i,x[F]._name+"."+o).set(G)}(G,$,F,N,i._fullLayout._dfltTitle))}}for(x=0;x<i._fullLayout.annotations.length;x++){var ec=i._fullLayout.annotations[x];-1!==o.indexOf(ec.xref)&&-1!==s.indexOf(ec.yref)&&j.swapAttrs(G.annotations[x],["?"])}})(i,s[x].x,s[x].y)}},4322:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(50606).BADNUM,N=_.isArrayOrTypedArray,j=_.isDateTime,G=_.cleanNumber,Z=Math.round;function getIncrement(i){return Math.max(1,(i-1)/1e3)}i.exports=function(i,o,s){var _,X=i,J=s.noMultiCategory;if(N(X)&&!X.length)return"-";if(!J&&N((_=X)[0])&&N(_[1]))return"multicategory";if(J&&Array.isArray(X[0])){for(var $=[],ee=0;ee<X.length;ee++)if(N(X[ee]))for(var et=0;et<X[ee].length;et++)$.push(X[ee][et]);X=$}if(function(i,o){for(var s=i.length,_=getIncrement(s),F=0,N=0,G={},X=0;X<s;X+=_){var J=i[Z(X)],$=String(J);!G[$]&&(G[$]=1,j(J,o)&&F++,x(J)&&N++)}return F>2*N}(X,o))return"date";var er="strict"!==s.autotypenumbers;return!function(i,o){for(var s=i.length,x=getIncrement(s),_=0,N=0,j={},X=0;X<s;X+=x){var J=i[Z(X)],$=String(J);if(!j[$]){j[$]=1;var ee=typeof J;"boolean"===ee?N++:(o?G(J)!==F:"number"===ee)?_++:"string"===ee&&N++}}return N>2*_}(X,er)?!function(i,o){for(var s,_=i.length,F=0;F<_;F++)if(s=i[F],o?x(s):"number"==typeof s)return!0;return!1}(X,er)?"-":"linear":"category"}},71453:function(i,o,s){"use strict";var x=s(92770),_=s(73972),F=s(71828),N=s(44467),j=s(85501),G=s(13838),Z=s(26218),X=s(38701),J=s(96115),$=s(89426),ee=s(15258),et=s(92128),er=s(23074),en=s(21994),ei=s(85555).WEEKDAY_PATTERN,eo=s(85555).HOUR_PATTERN;function rangebreaksDefaults(i,o,s){function coerce(s,x){return F.coerce(i,o,G.rangebreaks,s,x)}if(coerce("enabled")){var _=coerce("bounds");if(_&&_.length>=2){var N,j,Z="";if(2===_.length){for(N=0;N<2;N++)if(j=indexOfDay(_[N])){Z=ei;break}}var X=coerce("pattern",Z);if(X===ei)for(N=0;N<2;N++)(j=indexOfDay(_[N]))&&(o.bounds[N]=_[N]=j-1);if(X)for(N=0;N<2;N++)switch(j=_[N],X){case ei:if(!x(j)||(j=+j)!==Math.floor(j)||j<0||j>=7){o.enabled=!1;return}o.bounds[N]=_[N]=j;break;case eo:if(!x(j)||(j=+j)<0||j>24){o.enabled=!1;return}o.bounds[N]=_[N]=j}if(!1===s.autorange){var J=s.range;if(J[0]<J[1]){if(_[0]<J[0]&&_[1]>J[1]){o.enabled=!1;return}}else if(_[0]>J[0]&&_[1]<J[1]){o.enabled=!1;return}}}else{var $=coerce("values");if($&&$.length)coerce("dvalue");else{o.enabled=!1;return}}}}i.exports=function(i,o,s,x,eo){var es,el,ec,eu=x.letter,ef=x.font||{},eh=x.splomStash||{},ed=s("visible",!x.visibleDflt),ep=o._template||{},eg=o.type||ep.type||"-";"date"!==eg||(_.getComponentMethod("calendars","handleDefaults")(i,o,"calendar",x.calendar),x.noTicklabelmode||(es=s("ticklabelmode")));var em="";x.noTicklabelposition&&"multicategory"!==eg||(em=F.coerce(i,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===es?["outside","inside"]:"x"===eu?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),x.noTicklabeloverflow||s("ticklabeloverflow",-1!==em.indexOf("inside")?"hide past domain":"category"===eg||"multicategory"===eg?"allow":"hide past div"),en(o,eo),s("minallowed"),s("maxallowed");var ey=s("range"),ev=o.getAutorangeDflt(ey,x),ex=s("autorange",ev);ey&&(null===ey[0]&&null===ey[1]||(null===ey[0]||null===ey[1])&&("reversed"===ex||!0===ex)||null!==ey[0]&&("min"===ex||"max reversed"===ex)||null!==ey[1]&&("max"===ex||"min reversed"===ex))&&(ey=void 0,delete o.range,o.autorange=!0,el=!0),el||(ex=s("autorange",ev=o.getAutorangeDflt(ey,x))),ex&&(er(s,ex,ey),("linear"===eg||"-"===eg)&&s("rangemode")),o.cleanRange(),ee(i,o,s,x),"category"===eg||x.noHover||s("hoverformat");var e_=s("color"),ew=e_!==G.color.dflt?e_:ef.color,eT=eh.label||eo._dfltTitle[eu];if($(i,o,s,eg,x),!ed)return o;s("title.text",eT),F.coerceFont(s,"title.font",{family:ef.family,size:F.bigFont(ef.size),color:ew}),Z(i,o,s,eg);var ek=x.hasMinor;if(ek&&(N.newContainer(o,"minor"),Z(i,o,s,eg,{isMinor:!0})),J(i,o,s,eg,x),X(i,o,s,x),ek){var eA=x.isMinor;x.isMinor=!0,X(i,o,s,x),x.isMinor=eA}et(i,o,s,{dfltColor:e_,bgColor:x.bgColor,showGrid:x.showGrid,hasMinor:ek,attributes:G}),!ek||o.minor.ticks||o.minor.showgrid||delete o.minor,(o.showline||o.ticks)&&s("mirror");var eS="multicategory"===eg;if(!x.noTickson&&("category"===eg||eS)&&(o.ticks||o.showgrid)&&(eS&&(ec="boundaries"),"boundaries"===s("tickson",ec)&&delete o.ticklabelposition),eS&&s("showdividers")&&(s("dividercolor"),s("dividerwidth")),"date"===eg){if(j(i,o,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:rangebreaksDefaults}),o.rangebreaks.length){for(var eM=0;eM<o.rangebreaks.length;eM++)if(o.rangebreaks[eM].pattern===ei){o._hasDayOfWeekBreaks=!0;break}if(en(o,eo),eo._has("scattergl")||eo._has("splom"))for(var eC=0;eC<x.data.length;eC++){var eE=x.data[eC];("scattergl"===eE.type||"splom"===eE.type)&&(eE.visible=!1,F.warn(eE.type+" traces do not work on axes with rangebreaks. Setting trace "+eE.index+" to `visible: false`."))}}else delete o.rangebreaks}return o};var es={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function indexOfDay(i){if("string"==typeof i)return es[i.substr(0,3).toLowerCase()]}},12663:function(i,o,s){"use strict";var x=s(31562),_=x.FORMAT_LINK,F=x.DATE_FORMAT_LINK;function descriptionOnlyNumbers(i,o){return["Sets the "+i+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+_+"."].join(" ")}function descriptionWithDates(i,o){return descriptionOnlyNumbers(i,o)+[" And for dates see: "+F+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}i.exports={axisHoverFormat:function(i,o){return{valType:"string",dflt:"",editType:"none",description:(o?descriptionOnlyNumbers:descriptionWithDates)("hover text",i)+["By default the values are formatted using "+(o?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:descriptionOnlyNumbers,descriptionWithDates:descriptionWithDates}},41675:function(i,o,s){"use strict";var x=s(73972),_=s(85555);function isFound(i,o){if(o&&o.length){for(var s=0;s<o.length;s++)if(o[s][i])return!0}return!1}o.id2name=function(i){if("string"==typeof i&&i.match(_.AX_ID_PATTERN)){var o=i.split(" ")[0].substr(1);return"1"===o&&(o=""),i.charAt(0)+"axis"+o}},o.name2id=function(i){if(i.match(_.AX_NAME_PATTERN)){var o=i.substr(5);return"1"===o&&(o=""),i.charAt(0)+o}},o.cleanId=function(i,o,s){var x=/( domain)$/.test(i);if("string"==typeof i&&i.match(_.AX_ID_PATTERN)&&(!o||i.charAt(0)===o)&&(!x||s)){var F=i.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===F&&(F=""),i.charAt(0)+F+(x&&s?" domain":"")}},o.list=function(i,s,x){var _,F=i._fullLayout;if(!F)return[];var N=o.listIds(i,s),j=Array(N.length);for(_=0;_<N.length;_++){var G=N[_];j[_]=F[G.charAt(0)+"axis"+G.substr(1)]}if(!x){var Z=F._subplots.gl3d||[];for(_=0;_<Z.length;_++){var X=F[Z[_]];s?j.push(X[s+"axis"]):j.push(X.xaxis,X.yaxis,X.zaxis)}}return j},o.listIds=function(i,o){var s=i._fullLayout;if(!s)return[];var x=s._subplots;return o?x[o+"axis"]:x.xaxis.concat(x.yaxis)},o.getFromId=function(i,s,x){var _=i._fullLayout;return s=void 0===s||"string"!=typeof s?s:s.replace(" domain",""),"x"===x?s=s.replace(/y[0-9]*/,""):"y"===x&&(s=s.replace(/x[0-9]*/,"")),_[o.id2name(s)]},o.getFromTrace=function(i,s,_){var F=i._fullLayout,N=null;if(x.traceIs(s,"gl3d")){var j=s.scene;"scene"===j.substr(0,5)&&(N=F[j][_+"axis"])}else N=o.getFromId(i,s[_+"axis"]||_);return N},o.idSort=function(i,o){var s=i.charAt(0),x=o.charAt(0);return s!==x?s>x?1:-1:+(i.substr(1)||1)-+(o.substr(1)||1)},o.ref2id=function(i){return!!/^[xyz]/.test(i)&&i.split(" ")[0]},o.isLinked=function(i,o){return isFound(o,i._axisMatchGroups)||isFound(o,i._axisConstraintGroups)}},15258:function(i){"use strict";i.exports=function(i,o,s,x){if("category"===o.type){var _,F,N=i.categoryarray,j=Array.isArray(N)&&N.length>0;j&&(_="array");var G=s("categoryorder",_);"array"===G&&(F=s("categoryarray")),j||"array"!==G||(G=o.categoryorder="trace"),"trace"===G?o._initialCategories=[]:"array"===G?o._initialCategories=F.slice():(F=(function(i,o){var s,x,_,F=o.dataAttr||i._id.charAt(0),N={};if(o.axData)s=o.axData;else for(x=0,s=[];x<o.data.length;x++){var j=o.data[x];j[F+"axis"]===i._id&&s.push(j)}for(x=0;x<s.length;x++){var G=s[x][F];for(_=0;_<G.length;_++){var Z=G[_];null!=Z&&(N[Z]=1)}}return Object.keys(N)})(o,x).sort(),"category ascending"===G?o._initialCategories=F:"category descending"===G&&(o._initialCategories=F.reverse()))}}},66287:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(50606),N=F.ONEDAY,j=F.ONEWEEK;o.dtick=function(i,o){var s="log"===o,_="date"===o,F=_?N:1;if(!i)return F;if(x(i))return(i=Number(i))<=0?F:"category"===o?Math.max(1,Math.round(i)):_?Math.max(.1,i):i;if("string"!=typeof i||!(_||s))return F;var j=i.charAt(0),G=i.substr(1);return(G=x(G)?Number(G):0)<=0||!(_&&"M"===j&&G===Math.round(G)||s&&"L"===j||s&&"D"===j&&(1===G||2===G))?F:i},o.tick0=function(i,o,s,F){return"date"===o?_.cleanDate(i,_.dateTick0(s,F%j==0?1:0)):"D1"!==F&&"D2"!==F?x(i)?Number(i):0:void 0}},85555:function(i,o,s){"use strict";var x=s(30587).counter;i.exports={idRegex:{x:x("x","( domain)?"),y:x("y","( domain)?")},attrRegex:x("[xy]axis"),xAxisMatch:x("xaxis"),yAxisMatch:x("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(i,o,s){"use strict";var x=s(71828),_=s(71739),F=s(41675).id2name,N=s(13838),j=s(42449),G=s(21994),Z=s(50606).ALMOST_EQUAL,X=s(18783).FROM_BL;function extent(i,o){var s=o.domain;return s||(s=i[F(o.overlaying)].domain),s[1]-s[0]}function getConstraintGroup(i,o){for(var s=0;s<i.length;s++)if(i[s][o])return i[s];return null}function updateConstraintGroups(i,o,s,x){var _,F,N,j,G,Z=getConstraintGroup(i,o);null===Z?((Z={})[o]=1,G=i.length,i.push(Z)):G=i.indexOf(Z);var X=Object.keys(Z);for(_=0;_<i.length;_++)if(N=i[_],_!==G&&N[s]){var J=N[s];for(F=0;F<X.length;F++)N[j=X[F]]=multiplyScales(J,multiplyScales(x,Z[j]));i.splice(G,1);return}if(1!==x)for(F=0;F<X.length;F++){var $=X[F];Z[$]=multiplyScales(x,Z[$])}Z[s]=1}function multiplyScales(i,o){var s,x,_="",F="";"string"==typeof i&&(s=(_=i.match(/^[xy]*/)[0]).length,i=+i.substr(s)),"string"==typeof o&&(x=(F=o.match(/^[xy]*/)[0]).length,o=+o.substr(x));var N=i*o;return s||x?s&&x&&_.charAt(0)!==F.charAt(0)?s===x?N:(s>x?_.substr(x):F.substr(s))+N:_+F+i*o:N}function updateDomain(i,o){var s=i._inputDomain,x=X[i.constraintoward],_=s[0]+(s[1]-s[0])*x;i.domain=i._input.domain=[_+(s[0]-_)/o,_+(s[1]-_)/o],i.setScale()}o.handleDefaults=function(i,o,s){var _=s.axIds,j=s.axHasImage,Z=o._axisConstraintGroups=[],X=o._axisMatchGroups=[];for(en=0;en<_.length;en++)(function(i,o,s){var _,j,G,Z,X=s.axIds,J=s.layoutOut,$=s.hasImage,ee=J._axisConstraintGroups,et=J._axisMatchGroups,er=o._id,en=er.charAt(0),ei=((J._splomAxes||{})[en]||{})[er]||{},eo=o._id,es="x"===eo.charAt(0);function coerce(s,_){return x.coerce(i,o,N,s,_)}o._matchGroup=null,o._constraintGroup=null,coerce("constrain",$?"domain":"range"),x.coerce(i,o,{constraintoward:{valType:"enumerated",values:es?["left","center","right"]:["bottom","middle","top"],dflt:es?"center":"middle"}},"constraintoward");var el=o.type,ec=[];for(_=0;_<X.length;_++)(j=X[_])!==eo&&J[F(j)].type===el&&ec.push(j);var eu=getConstraintGroup(ee,eo);if(eu){var ef=[];for(_=0;_<ec.length;_++)eu[j=ec[_]]||ef.push(j);ec=ef}var eh=ec.length;eh&&(i.matches||ei.matches)&&(G=x.coerce(i,o,{matches:{valType:"enumerated",values:ec,dflt:-1!==ec.indexOf(ei.matches)?ei.matches:void 0}},"matches"));var ed=$&&!es?o.anchor:void 0;if(eh&&!G&&(i.scaleanchor||ed)&&(Z=x.coerce(i,o,{scaleanchor:{valType:"enumerated",values:ec.concat([!1])}},"scaleanchor",ed)),G){o._matchGroup=updateConstraintGroups(et,eo,G,1);var ep=J[F(G)],eg=extent(J,o)/extent(J,ep);es!==("x"===G.charAt(0))&&(eg=(es?"x":"y")+eg),updateConstraintGroups(ee,eo,G,eg)}else i.matches&&-1!==X.indexOf(i.matches)&&x.warn("ignored "+o._name+'.matches: "'+i.matches+'" to avoid an infinite loop');if(Z){var em=coerce("scaleratio");em||(em=o.scaleratio=1),updateConstraintGroups(ee,eo,Z,em)}else i.scaleanchor&&-1!==X.indexOf(i.scaleanchor)&&x.warn("ignored "+o._name+'.scaleanchor: "'+i.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')})(el=i[es=F(_[en])],ec=o[es],{axIds:_,layoutOut:o,hasImage:j[es]});function stash(i,s){for(en=0;en<i.length;en++)for(eo in ei=i[en])o[F(eo)][s]=ei}for(stash(X,"_matchGroup"),en=0;en<Z.length;en++)for(eo in ei=Z[en])if((ec=o[F(eo)]).fixedrange){for(var J in ei){var $=F(J);!1===(i[$]||{}).fixedrange&&x.warn("fixedrange was specified as false for axis "+$+" but was overridden because another axis in its constraint group has fixedrange true"),o[$].fixedrange=!0}break}for(en=0;en<Z.length;){for(eo in ei=Z[en]){(ec=o[F(eo)])._matchGroup&&Object.keys(ec._matchGroup).length===Object.keys(ei).length&&(Z.splice(en,1),en--);break}en++}stash(Z,"_constraintGroup");var ee=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],et=!1,er=!1;function setAttrVal(){ef=ec[eu],"rangebreaks"===eu&&(er=ec._hasDayOfWeekBreaks)}for(en=0;en<X.length;en++){ei=X[en];for(var en,ei,eo,es,el,ec,eu,ef,eh,ed=0;ed<ee.length;ed++){for(eo in eu=ee[ed],ef=null,ei)if(el=i[es=F(eo)],ec=o[es],eu in ec){if(!ec.matches&&(eh=ec,eu in el)){setAttrVal();break}null===ef&&eu in el&&setAttrVal()}if("range"===eu&&ef&&el.range&&2===el.range.length&&null!==el.range[0]&&null!==el.range[1]&&(et=!0),"autorange"===eu&&null===ef&&et&&(ef=!1),null===ef&&eu in eh&&(ef=eh[eu]),null!==ef)for(eo in ei)(ec=o[F(eo)])[eu]="range"===eu?ef.slice():ef,"rangebreaks"===eu&&(ec._hasDayOfWeekBreaks=er,G(ec,o))}}},o.enforce=function(i){var o=i._fullLayout,s=o._axisConstraintGroups||[];for(ei=0;ei<s.length;ei++){var x=Object.keys(es=function(i,o){for(var s=o._size,x=s.h/s.w,_={},F=Object.keys(i),N=0;N<F.length;N++){var j=F[N],G=i[j];if("string"==typeof G){var Z=G.match(/^[xy]*/)[0],X=Z.length;G=+G.substr(X);for(var J="y"===Z.charAt(0)?x:1/x,$=0;$<X;$++)G*=J}_[j]=G}return _}(s[ei],o)),N=1/0,G=0,X=1/0,J={},$={},ee=!1;for(eo=0;eo<x.length;eo++)$[el=x[eo]]=ec=o[F(el)],ec._inputDomain?ec.domain=ec._inputDomain.slice():ec._inputDomain=ec.domain.slice(),ec._inputRange||(ec._inputRange=ec.range.slice()),ec.setScale(),J[el]=eu=Math.abs(ec._m)/es[el],N=Math.min(N,eu),"domain"!==ec.constrain&&ec._constraintShrinkable||(X=Math.min(X,eu)),delete ec._constraintShrinkable,G=Math.max(G,eu),"domain"===ec.constrain&&(ee=!0);if(!(N>Z*G)||ee){for(eo=0;eo<x.length;eo++)if(eu=J[el=x[eo]],ef=(ec=$[el]).constrain,eu!==X||"domain"===ef){if(eh=eu/X,"range"===ef)j(ec,eh);else{var et=ec._inputDomain,er=(ec.domain[1]-ec.domain[0])/(et[1]-et[0]),en=(ec.r2l(ec.range[1])-ec.r2l(ec.range[0]))/(ec.r2l(ec._inputRange[1])-ec.r2l(ec._inputRange[0]));if((eh/=er)*en<1){ec.domain=ec._input.domain=et.slice(),j(ec,eh);continue}if(en<1&&(ec.range=ec._input.range=ec._inputRange.slice(),eh*=en),ec.autorange){var ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg=ec.r2l(ec.range[0]),em=ec.r2l(ec.range[1]),ey=(eg+em)/2,ev=ey,ex=ey,e_=Math.abs(em-ey),ew=ey-e_*eh*1.0001,eT=ey+e_*eh*1.0001,ek=_.makePadFn(o,ec,0),eA=_.makePadFn(o,ec,1);updateDomain(ec,eh);var eS=Math.abs(ec._m),eM=_.concatExtremes(i,ec),eC=eM.min,eE=eM.max;for(ep=0;ep<eC.length;ep++)(ed=eC[ep].val-ek(eC[ep])/eS)>ew&&ed<ev&&(ev=ed);for(ep=0;ep<eE.length;ep++)(ed=eE[ep].val+eA(eE[ep])/eS)<eT&&ed>ex&&(ex=ed);eh/=(ex-ev)/(2*e_),ev=ec.l2r(ev),ex=ec.l2r(ex),ec.range=ec._input.range=eg<em?[ev,ex]:[ex,ev]}updateDomain(ec,eh)}}}}},o.getAxisGroup=function(i,o){for(var s=i._axisMatchGroups,x=0;x<s.length;x++)if(s[x][o])return"g"+x;return o},o.clean=function(i,o){if(o._inputDomain){for(var s=!1,x=o._id,_=i._fullLayout._axisConstraintGroups,F=0;F<_.length;F++)if(_[F][x]){s=!0;break}s&&"domain"===o.constrain||(o._input.domain=o.domain=o._inputDomain,delete o._inputDomain)}}},29323:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=_.numberFormat,N=s(84267),j=s(38520),G=s(73972),Z=_.strTranslate,X=s(63893),J=s(7901),$=s(91424),ee=s(30211),et=s(89298),er=s(6964),en=s(28569),ei=s(64505),eo=ei.selectingOrDrawing,es=ei.freeMode,el=s(18783).FROM_TL,ec=s(33306),eu=s(61549).redrawReglTraces,ef=s(74875),eh=s(41675).getFromId,ed=s(47322).prepSelect,ep=s(47322).clearOutline,eg=s(47322).selectOnClick,em=s(42449),ey=s(85555),ev=ey.MINDRAG,ex=ey.MINZOOM,e_=!0;function makeDragger(i,o,s,x){var F=_.ensureSingle(i.draglayer,o,s,function(o){o.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",i.id)});return F.call(er,x),F.node()}function makeRectDragger(i,o,s,_,F,N,j){var G=makeDragger(i,"rect",o,s);return x.select(G).call($.setRect,_,F,N,j),G}function isDirectionActive(i,o){for(var s=0;s<i.length;s++)if(!i[s].fixedrange)return o;return""}function zoomAxRanges(i,o,s,x,_){for(var F=0;F<i.length;F++){var N=i[F];if(!N.fixedrange){if(N.rangebreaks){var j="y"===N._id.charAt(0),G=j?1-o:o,Z=j?1-s:s;x[N._name+".range[0]"]=N.l2r(N.p2l(G*N._length)),x[N._name+".range[1]"]=N.l2r(N.p2l(Z*N._length))}else{var X=N._rl[0],J=N._rl[1]-X;x[N._name+".range[0]"]=N.l2r(X+J*o),x[N._name+".range[1]"]=N.l2r(X+J*s)}}}if(_&&_.length){var $=(o+(1-s))/2;zoomAxRanges(_,$,1-$,x,[])}}function dragAxList(i,o){for(var s=0;s<i.length;s++){var x=i[s];if(!x.fixedrange){if(x.rangebreaks){var _=x._length,F=(x.p2l(0+o)-x.p2l(0)+(x.p2l(_+o)-x.p2l(_)))/2;x.range=[x.l2r(x._rl[0]-F),x.l2r(x._rl[1]-F)]}else x.range=[x.l2r(x._rl[0]-o/x._m),x.l2r(x._rl[1]-o/x._m)];x.limitRange&&x.limitRange()}}}function makeZoombox(i,o,s,x,_){return i.append("path").attr("class","zoombox").style({fill:o>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",Z(s,x)).attr("d",_+"Z")}function makeCorners(i,o,s){return i.append("path").attr("class","zoombox-corners").style({fill:J.background,stroke:J.defaultLine,"stroke-width":1,opacity:0}).attr("transform",Z(o,s)).attr("d","M0,0Z")}function updateZoombox(i,o,s,x,_,F){i.attr("d",x+"M"+s.l+","+s.t+"v"+s.h+"h"+s.w+"v-"+s.h+"h-"+s.w+"Z"),transitionZoombox(i,o,_,F)}function transitionZoombox(i,o,s,x){s||(i.transition().style("fill",x>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),o.transition().style("opacity",1).duration(200))}function removeZoombox(i){x.select(i).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function showDoubleClickNotifier(i){e_&&i.data&&i._context.showTips&&(_.notifier(_._(i,"Double-click to zoom back out"),"long"),e_=!1)}function xyCorners(i){var o=Math.floor(Math.min(i.b-i.t,i.r-i.l,ex)/2);return"M"+(i.l-3.5)+","+(i.t-.5+o)+"h3v"+-o+"h"+o+"v-3h-"+(o+3)+"ZM"+(i.r+3.5)+","+(i.t-.5+o)+"h-3v"+-o+"h"+-o+"v-3h"+(o+3)+"ZM"+(i.r+3.5)+","+(i.b+.5-o)+"h-3v"+o+"h"+-o+"v3h"+(o+3)+"ZM"+(i.l-3.5)+","+(i.b+.5-o)+"h3v"+o+"h"+o+"v3h-"+(o+3)+"Z"}function calcLinks(i,o,s,x,F){for(var N,j,G,Z,X=!1,J={},$={},ee=(F||{}).xaHash,et=(F||{}).yaHash,er=0;er<o.length;er++){var en=o[er];for(N in s)if(en[N]){for(G in en)F&&(ee[G]||et[G])||("x"===G.charAt(0)?s:x)[G]||(J[G]=N);for(j in x)!(F&&(ee[j]||et[j]))&&en[j]&&(X=!0)}for(j in x)if(en[j])for(Z in en)F&&(ee[Z]||et[Z])||("x"===Z.charAt(0)?s:x)[Z]||($[Z]=j)}X&&(_.extendFlat(J,$),$={});var ei={},eo=[];for(G in J){var es=eh(i,G);eo.push(es),ei[es._id]=es}var el={},ec=[];for(Z in $){var eu=eh(i,Z);ec.push(eu),el[eu._id]=eu}return{xaHash:ei,yaHash:el,xaxes:eo,yaxes:ec,xLinks:J,yLinks:$,isSubplotConstrained:X}}function attachWheelEventHandler(i,o){if(j){var s=void 0!==i.onwheel?"wheel":"mousewheel";i._onwheel&&i.removeEventListener(s,i._onwheel),i._onwheel=o,i.addEventListener(s,o,{passive:!1})}else void 0!==i.onwheel?i.onwheel=o:void 0!==i.onmousewheel?i.onmousewheel=o:i.isAddedWheelEvent||(i.isAddedWheelEvent=!0,i.addEventListener("wheel",o,{passive:!1}))}function hashValues(i){var o=[];for(var s in i)o.push(i[s]);return o}i.exports={makeDragBox:function(i,o,s,j,Z,J,er,ei){var e_,ew,eT,ek,eA,eS,eM,eC,eE,eL,eP,eI,eO,eD,eR,eB,ez,eF,eN,ej,eU,eV,eH,eG,eW,eZ,eY,eX,eK,eJ,e$,eQ,e0,e1,e2,e3=i._fullLayout._zoomlayer,e5=er+ei==="nsew",e4=1===(er+ei).length;function recomputeAxisLists(){if(eT=o.xaxis,ek=o.yaxis,eP=eT._length,eI=ek._length,eE=eT._offset,eL=ek._offset,(eA={})[eT._id]=eT,(eS={})[ek._id]=ek,er&&ei)for(var s=o.overlays,x=0;x<s.length;x++){var _=s[x].xaxis;eA[_._id]=_;var F=s[x].yaxis;eS[F._id]=F}eM=hashValues(eA),eC=hashValues(eS),eR=isDirectionActive(eM,ei),ez=!(eB=isDirectionActive(eC,er))&&!eR,eD=calcLinks(i,i._fullLayout._axisMatchGroups,eA,eS);var N=(eO=calcLinks(i,i._fullLayout._axisConstraintGroups,eA,eS,eD)).isSubplotConstrained||eD.isSubplotConstrained;eF=ei||N,eN=er||N;var j=i._fullLayout;ej=j._has("scattergl"),eU=j._has("splom"),eV=j._has("svg")}s+=o.yaxis._shift,recomputeAxisLists();var e6=makeRectDragger(o,er+ei+"drag",(e_=eB+eR,ew=i._fullLayout.dragmode,e_?"nsew"===e_?e5?"":"pan"===ew?"move":"crosshair":e_.toLowerCase()+"-resize":"pointer"),s,j,Z,J);if(ez&&!e5)return e6.onmousedown=null,e6.style.pointerEvents="none",e6;var e8={element:e6,gd:i,plotinfo:o};function clearAndResetSelect(){e8.plotinfo.selection=!1,ep(i)}function clickFn(s,_){var N=e8.gd;if(N._fullLayout._activeShapeIndex>=0){N._fullLayout._deactivateShape(N);return}var j=N._fullLayout.clickmode;if(removeZoombox(N),2!==s||e4||function(){if(!i._transitioningWithDuration){var o,s,x=i._context.doubleClick,_=[];eR&&(_=_.concat(eM)),eB&&(_=_.concat(eC)),eD.xaxes&&(_=_.concat(eD.xaxes)),eD.yaxes&&(_=_.concat(eD.yaxes));var F={};if("reset+autosize"===x)for(s=0,x="autosize";s<_.length;s++){var N=(o=_[s])._rangeInitial0,j=o._rangeInitial1,Z=void 0!==N||void 0!==j;if(Z&&(void 0!==N&&N!==o.range[0]||void 0!==j&&j!==o.range[1])||!Z&&!0!==o.autorange){x="reset";break}}if("autosize"===x)for(s=0;s<_.length;s++)(o=_[s]).fixedrange||(F[o._name+".autorange"]=!0);else if("reset"===x){for((eR||eO.isSubplotConstrained)&&(_=_.concat(eO.xaxes)),eB&&!eO.isSubplotConstrained&&(_=_.concat(eO.yaxes)),eO.isSubplotConstrained&&(eR?eB||(_=_.concat(eC)):_=_.concat(eM)),s=0;s<_.length;s++)if(!(o=_[s]).fixedrange){var X=o._name,J=o._autorangeInitial;void 0===o._rangeInitial0&&void 0===o._rangeInitial1?F[X+".autorange"]=!0:void 0===o._rangeInitial0?(F[X+".autorange"]=J,F[X+".range"]=[null,o._rangeInitial1]):void 0===o._rangeInitial1?(F[X+".range"]=[o._rangeInitial0,null],F[X+".autorange"]=J):F[X+".range"]=[o._rangeInitial0,o._rangeInitial1]}}i.emit("plotly_doubleclick",null),G.call("_guiRelayout",i,F)}}(),e5)j.indexOf("select")>-1&&eg(_,N,eM,eC,o.id,e8),j.indexOf("event")>-1&&ee.click(N,_,o.id);else if(1===s&&e4){var Z,J,$=er?ek:eT,et="s"===er||"w"===ei?0:1,en=$._name+".range["+et+"]",eo=(J=Math.abs((Z=$.range[et])-$.range[1-et]),"date"===$.type?Z:"log"===$.type?F("."+(Math.ceil(Math.max(0,-Math.log(J)/Math.LN10))+3)+"g")(Math.pow(10,Z)):F("."+String(Math.floor(Math.log(Math.abs(Z))/Math.LN10)-Math.floor(Math.log(J)/Math.LN10)+4)+"g")(Z)),es="left",el="middle";if($.fixedrange)return;er?(el="n"===er?"top":"bottom","right"===$.side&&(es="right")):"e"===ei&&(es="right"),N._context.showAxisRangeEntryBoxes&&x.select(e6).call(X.makeEditable,{gd:N,immediate:!0,background:N._fullLayout.paper_bgcolor,text:String(eo),fill:$.tickfont?$.tickfont.color:"#444",horizontalAlign:es,verticalAlign:el}).on("edit",function(i){var o=$.d2r(i);void 0!==o&&G.call("_guiRelayout",N,en,o)})}}function zoomMove(o,s){if(i._transitioningWithDuration)return!1;var x,_,F,N,j=Math.max(0,Math.min(eP,eG*o+eZ)),G=Math.max(0,Math.min(eI,eW*s+eY)),Z=Math.abs(j-eZ),X=Math.abs(G-eY);function noZoom(){eQ="",eX.r=eX.l,eX.t=eX.b,e1.attr("d","M0,0Z")}if(eX.l=Math.min(eZ,j),eX.r=Math.max(eZ,j),eX.t=Math.min(eY,G),eX.b=Math.max(eY,G),eO.isSubplotConstrained)Z>ex||X>ex?(eQ="xy",Z/eP>X/eI?(X=Z*eI/eP,eY>G?eX.t=eY-X:eX.b=eY+X):(Z=X*eP/eI,eZ>j?eX.l=eZ-Z:eX.r=eZ+Z),e1.attr("d",xyCorners(eX))):noZoom();else if(eD.isSubplotConstrained){if(Z>ex||X>ex){eQ="xy";var J=Math.min(eX.l/eP,(eI-eX.b)/eI),$=Math.max(eX.r/eP,(eI-eX.t)/eI);eX.l=J*eP,eX.r=$*eP,eX.b=(1-J)*eI,eX.t=(1-$)*eI,e1.attr("d",xyCorners(eX))}else noZoom()}else!eB||X<Math.min(Math.max(.6*Z,ev),ex)?Z<ev||!eR?noZoom():(eX.t=0,eX.b=eI,eQ="x",e1.attr("d",(x=eX,_=eY,"M"+(x.l-.5)+","+(_-ex-.5)+"h-3v"+(2*ex+1)+"h3ZM"+(x.r+.5)+","+(_-ex-.5)+"h3v"+(2*ex+1)+"h-3Z"))):!eR||Z<Math.min(.6*X,ex)?(eX.l=0,eX.r=eP,eQ="y",e1.attr("d",(F=eX,"M"+((N=eZ)-ex-.5)+","+(F.t-.5)+"v-3h"+(2*ex+1)+"v3ZM"+(N-ex-.5)+","+(F.b+.5)+"v3h"+(2*ex+1)+"v-3Z"))):(eQ="xy",e1.attr("d",xyCorners(eX)));eX.w=eX.r-eX.l,eX.h=eX.b-eX.t,eQ&&(e2=!0),i._dragged=e2,updateZoombox(e0,e1,eX,eJ,e$,eK),computeZoomUpdates(),i.emit("plotly_relayouting",eH),e$=!0}function computeZoomUpdates(){eH={},("xy"===eQ||"x"===eQ)&&(zoomAxRanges(eM,eX.l/eP,eX.r/eP,eH,eO.xaxes),updateMatchedAxRange("x",eH)),("xy"===eQ||"y"===eQ)&&(zoomAxRanges(eC,(eI-eX.b)/eI,(eI-eX.t)/eI,eH,eO.yaxes),updateMatchedAxRange("y",eH))}function zoomDone(){computeZoomUpdates(),removeZoombox(i),dragTail(),showDoubleClickNotifier(i)}e8.prepFn=function(o,s,x){var F,j,G=e8.dragmode,Z=i._fullLayout.dragmode;Z!==G&&(e8.dragmode=Z),recomputeAxisLists(),eG=i._fullLayout._invScaleX,eW=i._fullLayout._invScaleY,ez||(e5?o.shiftKey?"pan"===Z?Z="zoom":eo(Z)||(Z="pan"):o.ctrlKey&&(Z="pan"):Z="pan"),es(Z)?e8.minDrag=1:e8.minDrag=void 0,eo(Z)?(e8.xaxes=eM,e8.yaxes=eC,ed(o,s,x,e8,Z)):(e8.clickFn=clickFn,eo(G)&&clearAndResetSelect(),ez||("zoom"===Z?(e8.moveFn=zoomMove,e8.doneFn=zoomDone,e8.minDrag=1,eZ=s-(F=e6.getBoundingClientRect()).left,eY=x-F.top,i._fullLayout._calcInverseTransform(i),eZ=(j=_.apply3DTransform(i._fullLayout._invTransform)(eZ,eY))[0],eY=j[1],eX={l:eZ,r:eZ,w:0,t:eY,b:eY,h:0},eK=i._hmpixcount?i._hmlumcount/i._hmpixcount:N(i._fullLayout.plot_bgcolor).getLuminance(),e$=!1,eQ="xy",e2=!1,e0=makeZoombox(e3,eK,eE,eL,eJ="M0,0H"+eP+"V"+eI+"H0V0"),e1=makeCorners(e3,eE,eL)):"pan"!==Z||(e8.moveFn=plotDrag,e8.doneFn=dragTail))),i._fullLayout._redrag=function(){var o=i._dragdata;o&&o.element===e6&&!eo(i._fullLayout.dragmode)&&(recomputeAxisLists(),updateSubplots([0,0,eP,eI]),e8.moveFn(o.dx,o.dy))}},en.init(e8);var e7=[0,0,eP,eI],e9=null,te=ey.REDRAWDELAY,tt=o.mainplot?i._fullLayout._plots[o.mainplot]:o;function plotDrag(o,s){if(o*=eG,s*=eW,!i._transitioningWithDuration){if(i._fullLayout._replotting=!0,"ew"===eR||"ns"===eB){var x,_,F,N=eR?-o:0,j=eB?-s:0;if(eD.isSubplotConstrained){if(eR&&eB){var G=(o/eP-s/eI)/2;o=G*eP,s=-G*eI,N=-o,j=-s}eB?N=-j*eP/eI:j=-N*eI/eP}eR&&(dragAxList(eM,o),updateMatchedAxRange("x")),eB&&(dragAxList(eC,s),updateMatchedAxRange("y")),updateSubplots([N,j,eP,eI]),ticksAndAnnotations(),i.emit("plotly_relayouting",eH);return}var Z="w"===eR==("n"===eB)?1:-1;if(eR&&eB&&(eO.isSubplotConstrained||eD.isSubplotConstrained)){var X=(o/eP+Z*s/eI)/2;o=X*eP,s=Z*X*eI}if("w"===eR?o=dz(eM,0,o):"e"===eR?o=dz(eM,1,-o):eR||(o=0),"n"===eB?s=dz(eC,1,s):"s"===eB?s=dz(eC,0,-s):eB||(s=0),x="w"===eR?o:0,_="n"===eB?s:0,eO.isSubplotConstrained&&!eD.isSubplotConstrained||eD.isSubplotConstrained&&eR&&eB&&Z>0){if(eD.isSubplotConstrained||!eR&&1===eB.length){for(F=0;F<eM.length;F++)eM[F].range=eM[F]._r.slice(),em(eM[F],1-s/eI);x=(o=s*eP/eI)/2}if(eD.isSubplotConstrained||!eB&&1===eR.length){for(F=0;F<eC.length;F++)eC[F].range=eC[F]._r.slice(),em(eC[F],1-o/eP);_=(s=o*eI/eP)/2}}eD.isSubplotConstrained&&eB||updateMatchedAxRange("x"),eD.isSubplotConstrained&&eR||updateMatchedAxRange("y");var J=eP-o,$=eI-s;eD.isSubplotConstrained&&!(eR&&eB)&&(eR?(_=x?0:o*eI/eP,$=J*eI/eP):(x=_?0:s*eP/eI,J=$*eP/eI)),updateSubplots([x,_,J,$]),ticksAndAnnotations(),i.emit("plotly_relayouting",eH)}function dz(i,o,s){for(var x,_,F=1-o,N=0;N<i.length;N++){var j=i[N];if(!j.fixedrange){x=j,_=j._rl[F]+(j._rl[o]-j._rl[F])/(1-((G=s/j._length)>=0?Math.min(G,.9):1/(1/Math.max(G,-.3)+3.222)));var G,Z=j.l2r(_);!1!==Z&&void 0!==Z&&(j.range[o]=Z)}}return x._length*(x._rl[o]-_)/(x._rl[o]-x._rl[F])}}function updateMatchedAxRange(i,o){for(var s=eD.isSubplotConstrained?({x:eC,y:eM})[i]:eD[i+"axes"],x=eD.isSubplotConstrained?({x:eM,y:eC})[i]:[],_=0;_<s.length;_++){var F=s[_],N=F._id,j=eD.xLinks[N]||eD.yLinks[N],G=x[0]||eA[j]||eS[j];G&&(o?(o[F._name+".range[0]"]=o[G._name+".range[0]"],o[F._name+".range[1]"]=o[G._name+".range[1]"]):F.range=G.range.slice())}}function ticksAndAnnotations(){var s,x=[];function pushActiveAxIds(i){for(s=0;s<i.length;s++)i[s].fixedrange||x.push(i[s]._id)}function pushActiveAxIdsSynced(i,o){for(s=0;s<i.length;s++){var _=i[s],F=_[o];_.fixedrange||"sync"!==F.tickmode||x.push(F._id)}}for(eF&&(pushActiveAxIds(eM),pushActiveAxIds(eO.xaxes),pushActiveAxIds(eD.xaxes),pushActiveAxIdsSynced(o.overlays,"xaxis")),eN&&(pushActiveAxIds(eC),pushActiveAxIds(eO.yaxes),pushActiveAxIds(eD.yaxes),pushActiveAxIdsSynced(o.overlays,"yaxis")),eH={},s=0;s<x.length;s++){var _=eh(i,x[s]);et.drawOne(i,_,{skipTitle:!0}),eH[_._name+".range[0]"]=_.range[0],eH[_._name+".range[1]"]=_.range[1]}et.redrawComponents(i,x)}function dragTail(){updateSubplots([0,0,eP,eI]),_.syncOrAsync([ef.previousPromises,function(){i._fullLayout._replotting=!1,G.call("_guiRelayout",i,eH)}],i)}function updateSubplots(o){var s=i._fullLayout,x=s._plots,F=s._subplots.cartesian;if(eU&&G.subplotsRegistry.splom.drag(i),ej){for(J=0;J<F.length;J++)if(et=(ee=x[F[J]]).xaxis,en=ee.yaxis,ee._scene){var N=_.simpleMap(et.range,et.r2l),j=_.simpleMap(en.range,en.r2l);et.limitRange&&et.limitRange(),en.limitRange&&en.limitRange(),N=et.range,j=en.range,ee._scene.update({range:[N[0],j[0],N[1],j[1]]})}}if((eU||ej)&&(ec(i),eu(i)),eV){var Z=o[2]/eT._length,X=o[3]/ek._length;for(J=0;J<F.length;J++){et=(ee=x[F[J]]).xaxis,en=ee.yaxis;var J,ee,et,en,eo,es,el,ef,eh=(eF||eD.isSubplotConstrained)&&!et.fixedrange&&eA[et._id],ed=(eN||eD.isSubplotConstrained)&&!en.fixedrange&&eS[en._id];if(eh?(eo=Z,el=ei||eD.isSubplotConstrained?o[0]:getShift(et,eo)):eD.xaHash[et._id]?(eo=Z,el=o[0]*et._length/eT._length):eD.yaHash[et._id]?(eo=X,el="ns"===eB?-o[1]*et._length/ek._length:getShift(et,eo,{n:"top",s:"bottom"}[eB])):(eo=getLinkedScaleFactor(et,Z,X),el=scaleAndGetShift(et,eo)),eo>1&&(void 0!==et.maxallowed&&eF===(et.range[0]<et.range[1]?"e":"w")||void 0!==et.minallowed&&eF===(et.range[0]<et.range[1]?"w":"e"))&&(eo=1,el=0),ed?(es=X,ef=er||eD.isSubplotConstrained?o[1]:getShift(en,es)):eD.yaHash[en._id]?(es=X,ef=o[1]*en._length/ek._length):eD.xaHash[en._id]?(es=Z,ef="ew"===eR?-o[0]*en._length/eT._length:getShift(en,es,{e:"right",w:"left"}[eR])):(es=getLinkedScaleFactor(en,Z,X),ef=scaleAndGetShift(en,es)),es>1&&(void 0!==en.maxallowed&&eN===(en.range[0]<en.range[1]?"n":"s")||void 0!==en.minallowed&&eN===(en.range[0]<en.range[1]?"s":"n"))&&(es=1,ef=0),eo||es){eo||(eo=1),es||(es=1);var ep=et._offset-el/eo,eg=en._offset-ef/es;ee.clipRect.call($.setTranslate,el,ef).call($.setScale,eo,es),ee.plot.call($.setTranslate,ep,eg).call($.setScale,1/eo,1/es),(eo!==ee.xScaleFactor||es!==ee.yScaleFactor)&&($.setPointGroupScale(ee.zoomScalePts,eo,es),$.setTextPointsScale(ee.zoomScaleTxt,eo,es)),$.hideOutsideRangePoints(ee.clipOnAxisFalseTraces,ee),ee.xScaleFactor=eo,ee.yScaleFactor=es}}}}function getLinkedScaleFactor(i,o,s){return i.fixedrange?0:eF&&eO.xaHash[i._id]?o:eN&&(eO.isSubplotConstrained?eO.xaHash:eO.yaHash)[i._id]?s:0}function scaleAndGetShift(i,o){return o?(i.range=i._r.slice(),em(i,o),getShift(i,o)):0}function getShift(i,o,s){return i._length*(1-o)*el[s||i.constraintoward||"middle"]}return er.length*ei.length!=1&&attachWheelEventHandler(e6,function(o){if(i._context._scrollZoom.cartesian||i._fullLayout._enablescrollzoom){if(clearAndResetSelect(),i._transitioningWithDuration){o.preventDefault(),o.stopPropagation();return}recomputeAxisLists(),clearTimeout(e9);var s,x=-o.deltaY;if(isFinite(x)||(x=o.wheelDelta/10),!isFinite(x)){_.log("Did not find wheel motion attributes: ",o);return}var F=Math.exp(-Math.min(Math.max(x,-20),20)/200),N=tt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),j=(o.clientX-N.left)/N.width,G=(N.bottom-o.clientY)/N.height;if(eF){for(ei||(j=.5),s=0;s<eM.length;s++)zoomWheelOneAxis(eM[s],j,F);updateMatchedAxRange("x"),e7[2]*=F,e7[0]+=e7[2]*j*(1/F-1)}if(eN){for(er||(G=.5),s=0;s<eC.length;s++)zoomWheelOneAxis(eC[s],G,F);updateMatchedAxRange("y"),e7[3]*=F,e7[1]+=e7[3]*(1-G)*(1/F-1)}updateSubplots(e7),ticksAndAnnotations(),i.emit("plotly_relayouting",eH),e9=setTimeout(function(){i._fullLayout&&(e7=[0,0,eP,eI],dragTail())},te),o.preventDefault()}function zoomWheelOneAxis(i,o,s){if(!i.fixedrange){var x=_.simpleMap(i.range,i.r2l),F=x[0]+(x[1]-x[0])*o;i.range=x.map(function(o){return i.l2r(F+(o-F)*s)})}}}),e6},makeDragger:makeDragger,makeRectDragger:makeRectDragger,makeZoombox:makeZoombox,makeCorners:makeCorners,updateZoombox:updateZoombox,xyCorners:xyCorners,transitionZoombox:transitionZoombox,removeZoombox:removeZoombox,showDoubleClickNotifier:showDoubleClickNotifier,attachWheelEventHandler:attachWheelEventHandler}},4305:function(i,o,s){"use strict";var x=s(39898),_=s(30211),F=s(28569),N=s(6964),j=s(29323).makeDragBox,G=s(85555).DRAGGERSIZE;o.initInteractions=function(i){var s=i._fullLayout;if(i._context.staticPlot){x.select(i).selectAll(".drag").remove();return}if(s._has("cartesian")||s._has("splom")){Object.keys(s._plots||{}).sort(function(i,o){if((s._plots[i].mainplot&&!0)===(s._plots[o].mainplot&&!0)){var x=i.split("y"),_=o.split("y");return x[0]===_[0]?Number(x[1]||1)-Number(_[1]||1):Number(x[0]||1)-Number(_[0]||1)}return s._plots[i].mainplot?1:-1}).forEach(function(o){var x=s._plots[o],N=x.xaxis,Z=x.yaxis;if(!x.mainplot){var X=j(i,x,N._offset,Z._offset,N._length,Z._length,"ns","ew");X.onmousemove=function(s){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===o&&i._fullLayout._plots[o]&&_.hover(i,s,o)},_.hover(i,s,o),i._fullLayout._lasthover=X,i._fullLayout._hoversubplot=o},X.onmouseout=function(o){i._dragging||(i._fullLayout._hoversubplot=null,F.unhover(i,o))},i._context.showAxisDragHandles&&(j(i,x,N._offset-G,Z._offset-G,G,G,"n","w"),j(i,x,N._offset+N._length,Z._offset-G,G,G,"n","e"),j(i,x,N._offset-G,Z._offset+Z._length,G,G,"s","w"),j(i,x,N._offset+N._length,Z._offset+Z._length,G,G,"s","e"))}if(i._context.showAxisDragHandles){if(o===N._mainSubplot){var J=N._mainLinePosition;"top"===N.side&&(J-=G),j(i,x,N._offset+.1*N._length,J,.8*N._length,G,"","ew"),j(i,x,N._offset,J,.1*N._length,G,"","w"),j(i,x,N._offset+.9*N._length,J,.1*N._length,G,"","e")}if(o===Z._mainSubplot){var $=Z._mainLinePosition;"right"!==Z.side&&($-=G),j(i,x,$,Z._offset+.1*Z._length,G,.8*Z._length,"ns",""),j(i,x,$,Z._offset+.9*Z._length,G,.1*Z._length,"s",""),j(i,x,$,Z._offset,G,.1*Z._length,"n","")}}});var N=s._hoverlayer.node();N.onmousemove=function(o){o.target=i._fullLayout._lasthover,_.hover(i,o,s._hoversubplot)},N.onclick=function(o){o.target=i._fullLayout._lasthover,_.click(i,o)},N.onmousedown=function(o){i._fullLayout._lasthover.onmousedown(o)},o.updateFx(i)}},o.updateFx=function(i){var o=i._fullLayout,s="pan"===o.dragmode?"move":"crosshair";N(o._draggers,s)}},76325:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(41675);i.exports=function(i){return function(o,s){var N=o[i];if(Array.isArray(N))for(var j=x.subplotsRegistry.cartesian,G=j.idRegex,Z=s._subplots,X=Z.xaxis,J=Z.yaxis,$=Z.cartesian,ee=s._has("cartesian")||s._has("gl2d"),et=0;et<N.length;et++){var er=N[et];if(_.isPlainObject(er)){var en=F.cleanId(er.xref,"x",!1),ei=F.cleanId(er.yref,"y",!1),eo=G.x.test(en),es=G.y.test(ei);if(eo||es){ee||_.pushUnique(s._basePlotModules,j);var el=!1;eo&&-1===X.indexOf(en)&&(X.push(en),el=!0),es&&-1===J.indexOf(ei)&&(J.push(ei),el=!0),el&&eo&&es&&$.push(en+ei)}}}}}},93612:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(71828),N=s(74875),j=s(91424),G=s(27659).a0,Z=s(41675),X=s(85555),J=s(77922),$=F.ensureSingle;function ensureSingleAndAddDatum(i,o,s){return F.ensureSingle(i,o,s,function(i){i.datum(s)})}function plotOne(i,o,s,F,N){for(var Z,J,$,ee=X.traceLayerClasses,et=i._fullLayout,er=et._modules,en=[],ei=[],eo=0;eo<er.length;eo++){var es=(Z=er[eo]).name,el=_.modules[es].categories;if(el.svg){var ec=Z.layerName||es+"layer",eu=Z.plot;$=(J=G(s,eu))[0],s=J[1],$.length&&en.push({i:ee.indexOf(ec),className:ec,plotMethod:eu,cdModule:$}),el.zoomScale&&ei.push("."+ec)}}en.sort(function(i,o){return i.i-o.i});var ef=o.plot.selectAll("g.mlayer").data(en,function(i){return i.className});if(ef.enter().append("g").attr("class",function(i){return i.className}).classed("mlayer",!0).classed("rangeplot",o.isRangePlot),ef.exit().remove(),ef.order(),ef.each(function(s){var _=x.select(this),G=s.className;s.plotMethod(i,o,s.cdModule,_,F,N),-1===X.clipOnAxisFalseQuery.indexOf("."+G)&&j.setClipUrl(_,o.layerClipId,i)}),et._has("scattergl")&&($=G(s,Z=_.getModule("scattergl"))[0],Z.plot(i,o,$)),!i._context.staticPlot&&(o._hasClipOnAxisFalse&&(o.clipOnAxisFalseTraces=o.plot.selectAll(X.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),ei.length)){var eh=o.plot.selectAll(ei.join(",")).selectAll(".trace");o.zoomScalePts=eh.selectAll("path.point"),o.zoomScaleTxt=eh.selectAll(".textpoint")}}function makeSubplotLayer(i,o){var s=o.plotgroup,x=o.id,_=X.layerValue2layerClass[o.xaxis.layer],F=X.layerValue2layerClass[o.yaxis.layer],N=i._fullLayout._hasOnlyLargeSploms;if(o.mainplot){var j=o.mainplotinfo,G=j.plotgroup,J=x+"-x",ee=x+"-y";o.minorGridlayer=j.minorGridlayer,o.gridlayer=j.gridlayer,o.zerolinelayer=j.zerolinelayer,$(j.overlinesBelow,"path",J),$(j.overlinesBelow,"path",ee),$(j.overaxesBelow,"g",J),$(j.overaxesBelow,"g",ee),o.plot=$(j.overplot,"g",x),$(j.overlinesAbove,"path",J),$(j.overlinesAbove,"path",ee),$(j.overaxesAbove,"g",J),$(j.overaxesAbove,"g",ee),o.xlines=G.select(".overlines-"+_).select("."+J),o.ylines=G.select(".overlines-"+F).select("."+ee),o.xaxislayer=G.select(".overaxes-"+_).select("."+J),o.yaxislayer=G.select(".overaxes-"+F).select("."+ee)}else if(N)o.xlines=$(s,"path","xlines-above"),o.ylines=$(s,"path","ylines-above"),o.xaxislayer=$(s,"g","xaxislayer-above"),o.yaxislayer=$(s,"g","yaxislayer-above");else{var et=$(s,"g","layer-subplot");o.shapelayer=$(et,"g","shapelayer"),o.imagelayer=$(et,"g","imagelayer"),o.minorGridlayer=$(s,"g","minor-gridlayer"),o.gridlayer=$(s,"g","gridlayer"),o.zerolinelayer=$(s,"g","zerolinelayer"),$(s,"path","xlines-below"),$(s,"path","ylines-below"),o.overlinesBelow=$(s,"g","overlines-below"),$(s,"g","xaxislayer-below"),$(s,"g","yaxislayer-below"),o.overaxesBelow=$(s,"g","overaxes-below"),o.plot=$(s,"g","plot"),o.overplot=$(s,"g","overplot"),o.xlines=$(s,"path","xlines-above"),o.ylines=$(s,"path","ylines-above"),o.overlinesAbove=$(s,"g","overlines-above"),$(s,"g","xaxislayer-above"),$(s,"g","yaxislayer-above"),o.overaxesAbove=$(s,"g","overaxes-above"),o.xlines=s.select(".xlines-"+_),o.ylines=s.select(".ylines-"+F),o.xaxislayer=s.select(".xaxislayer-"+_),o.yaxislayer=s.select(".yaxislayer-"+F)}N||(ensureSingleAndAddDatum(o.minorGridlayer,"g",o.xaxis._id),ensureSingleAndAddDatum(o.minorGridlayer,"g",o.yaxis._id),o.minorGridlayer.selectAll("g").map(function(i){return i[0]}).sort(Z.idSort),ensureSingleAndAddDatum(o.gridlayer,"g",o.xaxis._id),ensureSingleAndAddDatum(o.gridlayer,"g",o.yaxis._id),o.gridlayer.selectAll("g").map(function(i){return i[0]}).sort(Z.idSort)),o.xlines.style("fill","none").classed("crisp",!0),o.ylines.style("fill","none").classed("crisp",!0)}function purgeSubplotLayers(i,o){if(i){var s={};for(var _ in i.each(function(i){var _=i[0];x.select(this).remove(),removeSubplotExtras(_,o),s[_]=!0}),o._plots)for(var F=o._plots[_].overlays||[],N=0;N<F.length;N++){var j=F[N];s[j.id]&&j.plot.selectAll(".trace").remove()}}}function removeSubplotExtras(i,o){o._draggers.selectAll("g."+i).remove(),o._defs.select("#clip"+o._uid+i+"plot").remove()}o.name="cartesian",o.attr=["xaxis","yaxis"],o.idRoot=["x","y"],o.idRegex=X.idRegex,o.attrRegex=X.attrRegex,o.attributes=s(89502),o.layoutAttributes=s(13838),o.supplyLayoutDefaults=s(86763),o.transitionAxes=s(66847),o.finalizeSubplots=function(i,o){var s,x,_,N=o._subplots,j=N.xaxis,G=N.yaxis,J=N.cartesian,$=J.concat(N.gl2d||[]),ee={},et={};for(s=0;s<$.length;s++){var er=$[s].split("y");ee[er[0]]=1,et["y"+er[1]]=1}for(s=0;s<j.length;s++)ee[x=j[s]]||(_=(i[Z.id2name(x)]||{}).anchor,X.idRegex.y.test(_)||(_="y"),J.push(x+_),$.push(x+_),et[_]||(et[_]=1,F.pushUnique(G,_)));for(s=0;s<G.length;s++)et[_=G[s]]||(x=(i[Z.id2name(_)]||{}).anchor,X.idRegex.x.test(x)||(x="x"),J.push(x+_),$.push(x+_),ee[x]||(ee[x]=1,F.pushUnique(j,x)));if(!$.length){for(var en in x="",_="",i)X.attrRegex.test(en)&&("x"===en.charAt(0)?(!x||+en.substr(5)<+x.substr(5))&&(x=en):(!_||+en.substr(5)<+_.substr(5))&&(_=en));x=x?Z.name2id(x):"x",_=_?Z.name2id(_):"y",j.push(x),G.push(_),J.push(x+_)}},o.plot=function(i,o,s,x){var _=i._fullLayout,F=_._subplots.cartesian,N=i.calcdata;if(!Array.isArray(o))for(j=0,o=[];j<N.length;j++)o.push(j);for(j=0;j<F.length;j++){for(var j,G,Z=F[j],X=_._plots[Z],J=[],$=0;$<N.length;$++){var ee=N[$],et=ee[0].trace;et.xaxis+et.yaxis===Z&&((-1!==o.indexOf(et.index)||et.carpet)&&(G&&G[0].trace.xaxis+G[0].trace.yaxis===Z&&-1!==["tonextx","tonexty","tonext"].indexOf(et.fill)&&-1===J.indexOf(G)&&J.push(G),J.push(ee)),G=ee)}plotOne(i,X,J,s,x)}},o.clean=function(i,o,s,x){var _,F,N,j=x._plots||{},G=o._plots||{},X=x._subplots||{};if(x._hasOnlyLargeSploms&&!o._hasOnlyLargeSploms)for(N in j)(_=j[N]).plotgroup&&_.plotgroup.remove();var J=x._has&&x._has("gl"),$=o._has&&o._has("gl");if(J&&!$)for(N in j)(_=j[N])._scene&&_._scene.destroy();if(X.xaxis&&X.yaxis){var ee=Z.listIds({_fullLayout:x});for(F=0;F<ee.length;F++){var et=ee[F];o[Z.id2name(et)]||x._infolayer.selectAll(".g-"+et+"title").remove()}}var er=x._has&&x._has("cartesian"),en=o._has&&o._has("cartesian");if(er&&!en)purgeSubplotLayers(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(X.cartesian)for(F=0;F<X.cartesian.length;F++){var ei=X.cartesian[F];if(!G[ei]){var eo="."+ei+",."+ei+"-x,."+ei+"-y";x._cartesianlayer.selectAll(eo).remove(),removeSubplotExtras(ei,x)}}},o.drawFramework=function(i){var o=i._fullLayout,s=function(i){var o,s,x,_,F,N,j=i._fullLayout,G=j._subplots.cartesian,Z=G.length,X=[],J=[];for(o=0;o<Z;o++){x=G[o],F=(_=j._plots[x]).xaxis,N=_.yaxis;var $=F._mainAxis,ee=N._mainAxis,et=$._id+ee._id,er=j._plots[et];_.overlays=[],et!==x&&er?(_.mainplot=et,_.mainplotinfo=er,J.push(x)):(_.mainplot=void 0,_.mainplotinfo=void 0,X.push(x))}for(o=0;o<J.length;o++)x=J[o],(_=j._plots[x]).mainplotinfo.overlays.push(_);var en=X.concat(J),ei=Array(Z);for(o=0;o<Z;o++){x=en[o],F=(_=j._plots[x]).xaxis,N=_.yaxis;var eo=[x,F.layer,N.layer,F.overlaying||"",N.overlaying||""];for(s=0;s<_.overlays.length;s++)eo.push(_.overlays[s].id);ei[o]=eo}return ei}(i),_=o._cartesianlayer.selectAll(".subplot").data(s,String);_.enter().append("g").attr("class",function(i){return"subplot "+i[0]}),_.order(),_.exit().call(purgeSubplotLayers,o),_.each(function(s){var _=s[0],F=o._plots[_];F.plotgroup=x.select(this),makeSubplotLayer(i,F),F.draglayer=$(o._draggers,"g",_)})},o.rangePlot=function(i,o,s){makeSubplotLayer(i,o),plotOne(i,o,s),N.style(i)},o.toSVG=function(i){var o=i._fullLayout._glimages,s=x.select(i).selectAll(".svg-container");s.filter(function(i,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var i=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:J.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},o.updateFx=s(4305).updateFx},13838:function(i,o,s){"use strict";var x=s(41940),_=s(22399),F=s(79952).P,N=s(1426).extendFlat,j=s(44467).templatedArray,G=s(12663).descriptionWithDates,Z=s(50606).ONEDAY,X=s(85555),J=X.HOUR_PATTERN,$=X.WEEKDAY_PATTERN,ee={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},et=N({},ee,{values:ee.values.slice().concat(["sync"])});function makeNticks(i){return{valType:"integer",min:0,dflt:i?5:0,editType:"ticks"}}var er={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},en={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ei={valType:"data_array",editType:"ticks"},eo={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function makeTicklen(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=5),o}function makeTickwidth(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=1),o}var es={valType:"color",dflt:_.defaultLine,editType:"ticks"},el={valType:"color",dflt:_.lightLine,editType:"ticks"};function makeGridwidth(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=1),o}var ec=N({},F,{editType:"ticks"}),eu={valType:"boolean",editType:"ticks"};i.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:_.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:x({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[X.idRegex.x.toString(),X.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[X.idRegex.x.toString(),X.idRegex.y.toString()],editType:"calc"},rangebreaks:j("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[$,J,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:Z},editType:"calc"}),tickmode:et,nticks:makeNticks(),tick0:er,dtick:en,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:ei,ticktext:{valType:"data_array",editType:"ticks"},ticks:eo,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:makeTicklen(),tickwidth:makeTickwidth(),tickcolor:es,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:N({},F,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:x({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:G("tick label")},tickformatstops:j("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:G("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:_.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:eu,gridcolor:el,gridwidth:makeGridwidth(),griddash:ec,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:_.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:_.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",X.idRegex.x.toString(),X.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",X.idRegex.x.toString(),X.idRegex.y.toString()],editType:"plot"},minor:{tickmode:ee,nticks:makeNticks("minor"),tick0:er,dtick:en,tickvals:ei,ticks:eo,ticklen:makeTicklen("minor"),tickwidth:makeTickwidth("minor"),tickcolor:es,gridcolor:el,gridwidth:makeGridwidth("minor"),griddash:ec,showgrid:eu,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:x({editType:"ticks"})}}},86763:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(23469).isUnifiedHover,N=s(98212),j=s(44467),G=s(10820),Z=s(13838),X=s(951),J=s(71453),$=s(99082),ee=s(52830),et=s(41675),er=et.id2name,en=et.name2id,ei=s(85555).AX_ID_PATTERN,eo=s(73972),es=eo.traceIs,el=eo.getComponentMethod;function appendList(i,o,s){Array.isArray(i[o])?i[o].push(s):i[o]=[s]}i.exports=function(i,o,s){var eo,ec,eu,ef,eh,ed=o.autotypenumbers,ep={},eg={},em={},ey={},ev={},ex={},e_={},ew={},eT={},ek={};for(eA=0;eA<s.length;eA++){var eA,eS,eM,eC,eE=s[eA];if(es(eE,"cartesian")||es(eE,"gl2d")){if(eE.xaxis)appendList(ep,eM=er(eE.xaxis),eE);else if(eE.xaxes)for(eS=0;eS<eE.xaxes.length;eS++)appendList(ep,er(eE.xaxes[eS]),eE);if(eE.yaxis)appendList(ep,eC=er(eE.yaxis),eE);else if(eE.yaxes)for(eS=0;eS<eE.yaxes.length;eS++)appendList(ep,er(eE.yaxes[eS]),eE);"funnel"===eE.type?"h"===eE.orientation?(eM&&(eg[eM]=!0),eC&&(e_[eC]=!0)):eC&&(em[eC]=!0):"image"===eE.type?(eC&&(ew[eC]=!0),eM&&(ew[eM]=!0)):(eC&&(ev[eC]=!0,ex[eC]=!0),es(eE,"carpet")&&("carpet"!==eE.type||eE._cheater)||!eM||(ey[eM]=!0)),"carpet"===eE.type&&eE._cheater&&eM&&(eg[eM]=!0),es(eE,"2dMap")&&(eT[eM]=!0,eT[eC]=!0),es(eE,"oriented")&&(ek["h"===eE.orientation?eC:eM]=!0)}}var eL=o._subplots,eP=eL.xaxis,eI=eL.yaxis,eO=x.simpleMap(eP,er),eD=x.simpleMap(eI,er),eR=eO.concat(eD),eB=_.background;eP.length&&eI.length&&(eB=x.coerce(i,o,G,"plot_bgcolor"));var ez=_.combine(eB,o.paper_bgcolor);function newAxLayoutOut(){var i=ep[eo]||[];eh._traceIndices=i.map(function(i){return i._expandedIndex}),eh._annIndices=[],eh._shapeIndices=[],eh._selectionIndices=[],eh._imgIndices=[],eh._subplotsWith=[],eh._counterAxes=[],eh._name=eh._attr=eo,eh._id=ec}function coerce(i,o){return x.coerce(ef,eh,Z,i,o)}function coerce2(i,o){return x.coerce2(ef,eh,Z,i,o)}function getOverlayableAxes(o,s){for(var x="x"===o?eO:eD,_=[],F=0;F<x.length;F++){var N=x[F];N===s||(i[N]||{}).overlaying||_.push(en(N))}return _}var eF={x:eI,y:eP},eN=eF.x.concat(eF.y),ej={},eU=[];function addMissingMatchedAxis(){var i=ef.matches;ei.test(i)&&-1===eN.indexOf(i)&&(ej[i]=ef.type,eU=Object.keys(ej))}var eV=N(i,o),eH=F(eV);for(eA=0;eA<eR.length;eA++){ec=en(eo=eR[eA]),eu=eo.charAt(0),x.isPlainObject(i[eo])||(i[eo]={}),ef=i[eo],eh=j.newContainer(o,eo,eu+"axis"),newAxLayoutOut();var eG="x"===eu&&!ey[eo]&&eg[eo]||"y"===eu&&!ev[eo]&&em[eo],eW="y"===eu&&(!ex[eo]&&e_[eo]||ew[eo]),eZ={hasMinor:!0,letter:eu,font:o.font,outerTicks:eT[eo],showGrid:!ek[eo],data:ep[eo]||[],bgColor:ez,calendar:o.calendar,automargin:!0,visibleDflt:eG,reverseDflt:eW,autotypenumbersDflt:ed,splomStash:((o._splomAxes||{})[eu]||{})[ec]};coerce("uirevision",o.uirevision),X(ef,eh,coerce,eZ),J(ef,eh,coerce,eZ,o);var eY=eH&&eu===eV.charAt(0),eX=coerce2("spikecolor",eH?eh.color:void 0),eK=coerce2("spikethickness",eH?1.5:void 0),eJ=coerce2("spikedash",eH?"dot":void 0),e$=coerce2("spikemode",eH?"across":void 0),eQ=coerce2("spikesnap");coerce("showspikes",!!eY||!!eX||!!eK||!!eJ||!!e$||!!eQ)||(delete eh.spikecolor,delete eh.spikethickness,delete eh.spikedash,delete eh.spikemode,delete eh.spikesnap);var e0=er(ef.overlaying),e1=[0,1];if(void 0!==o[e0]){var e2=er(o[e0].anchor);void 0!==o[e2]&&(e1=o[e2].domain)}ee(ef,eh,coerce,{letter:eu,counterAxes:eF[eu],overlayableAxes:getOverlayableAxes(eu,eo),grid:o.grid,overlayingDomain:e1}),coerce("title.standoff"),addMissingMatchedAxis(),eh._input=ef}for(eA=0;eA<eU.length;){eu=(eo=er(ec=eU[eA++])).charAt(0),x.isPlainObject(i[eo])||(i[eo]={}),ef=i[eo],eh=j.newContainer(o,eo,eu+"axis"),newAxLayoutOut();var e3={letter:eu,font:o.font,outerTicks:eT[eo],showGrid:!ek[eo],data:[],bgColor:ez,calendar:o.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:ed,splomStash:((o._splomAxes||{})[eu]||{})[ec]};coerce("uirevision",o.uirevision),eh.type=ej[ec]||"linear",J(ef,eh,coerce,e3,o),ee(ef,eh,coerce,{letter:eu,counterAxes:eF[eu],overlayableAxes:getOverlayableAxes(eu,eo),grid:o.grid}),coerce("fixedrange"),addMissingMatchedAxis(),eh._input=ef}var e5=el("rangeslider","handleDefaults"),e4=el("rangeselector","handleDefaults");for(eA=0;eA<eO.length;eA++)ef=i[eo=eO[eA]],eh=o[eo],e5(i,o,eo),"date"===eh.type&&e4(ef,eh,o,eD,eh.calendar),coerce("fixedrange");for(eA=0;eA<eD.length;eA++){ef=i[eo=eD[eA]],eh=o[eo];var e6=o[er(eh.anchor)];coerce("fixedrange",el("rangeslider","isVisible")(e6))}$.handleDefaults(i,o,{axIds:eN.concat(eU).sort(et.idSort),axHasImage:ew})}},92128:function(i,o,s){"use strict";var x=s(84267).mix,_=s(22399),F=s(71828);i.exports=function(i,o,s,N){var j=(N=N||{}).dfltColor;function coerce2(s,x){return F.coerce2(i,o,N.attributes,s,x)}var G=coerce2("linecolor",j),Z=coerce2("linewidth");s("showline",N.showLine||!!G||!!Z)||(delete o.linecolor,delete o.linewidth);var X=coerce2("gridcolor",x(j,N.bgColor,N.blend||_.lightFraction).toRgbString()),J=coerce2("gridwidth"),$=coerce2("griddash");if(s("showgrid",N.showGrid||!!X||!!J||!!$)||(delete o.gridcolor,delete o.gridwidth,delete o.griddash),N.hasMinor){var ee=coerce2("minor.gridcolor",x(o.gridcolor,N.bgColor,67).toRgbString()),et=coerce2("minor.gridwidth",o.gridwidth||1),er=coerce2("minor.griddash",o.griddash||"solid");s("minor.showgrid",!!ee||!!et||!!er)||(delete o.minor.gridcolor,delete o.minor.gridwidth,delete o.minor.griddash)}if(!N.noZeroLine){var en=coerce2("zerolinecolor",j),ei=coerce2("zerolinewidth");s("zeroline",N.showGrid||!!en||!!ei)||(delete o.zerolinecolor,delete o.zerolinewidth)}}},52830:function(i,o,s){"use strict";var x=s(92770),_=s(71828);i.exports=function(i,o,s,F){var N,j,G,Z,X,J,$=F.counterAxes||[],ee=F.overlayableAxes||[],et=F.letter,er=F.grid,en=F.overlayingDomain;er&&(j=er._domains[et][er._axisMap[o._id]],N=er._anchors[o._id],j&&(G=er[et+"side"].split(" ")[0],Z=er.domain[et]["right"===G||"top"===G?1:0])),j=j||[0,1],N=N||(x(i.position)?"free":$[0]||"free"),G=G||("x"===et?"bottom":"left"),Z=Z||0,X=0,J=!1;var ei=_.coerce(i,o,{anchor:{valType:"enumerated",values:["free"].concat($),dflt:N}},"anchor"),eo=_.coerce(i,o,{side:{valType:"enumerated",values:"x"===et?["bottom","top"]:["left","right"],dflt:G}},"side");"free"===ei&&("y"===et&&(s("autoshift")&&(Z="left"===eo?en[0]:en[1],J=!o.automargin||o.automargin,X="left"===eo?-3:3),s("shift",X)),s("position",Z)),s("automargin",J);var es=!1;if(ee.length&&(es=_.coerce(i,o,{overlaying:{valType:"enumerated",values:[!1].concat(ee),dflt:!1}},"overlaying")),!es){var el=s("domain",j);el[0]>el[1]-1/4096&&(o.domain=j),_.noneOrAll(i.domain,o.domain,j),"sync"===o.tickmode&&(o.tickmode="auto")}return s("layer"),o}},89426:function(i,o,s){"use strict";var x=s(59652);i.exports=function(i,o,s,_,F){F||(F={});var N=F.tickSuffixDflt,j=x(i);s("tickprefix")&&s("showtickprefix",j),s("ticksuffix",N)&&s("showticksuffix",j)}},42449:function(i,o,s){"use strict";var x=s(18783).FROM_BL;i.exports=function(i,o,s){void 0===s&&(s=x[i.constraintoward||"center"]);var _=[i.r2l(i.range[0]),i.r2l(i.range[1])],F=_[0]+(_[1]-_[0])*s;i.range=i._input.range=[i.l2r(F+(_[0]-F)*o),i.l2r(F+(_[1]-F)*o)],i.setScale()}},21994:function(i,o,s){"use strict";var x=s(39898),_=s(84096).g0,F=s(71828),N=F.numberFormat,j=s(92770),G=F.cleanNumber,Z=F.ms2DateTime,X=F.dateTime2ms,J=F.ensureNumber,$=F.isArrayOrTypedArray,ee=s(50606),et=ee.FP_SAFE,er=ee.BADNUM,en=ee.LOG_CLIP,ei=ee.ONEWEEK,eo=ee.ONEDAY,es=ee.ONEHOUR,el=ee.ONEMIN,ec=ee.ONESEC,eu=s(41675),ef=s(85555),eh=ef.HOUR_PATTERN,ed=ef.WEEKDAY_PATTERN;function fromLog(i){return Math.pow(10,i)}i.exports=function(i,o){o=o||{};var s=i._id||"x",ee=s.charAt(0);function toLog(o,s){if(o>0)return Math.log(o)/Math.LN10;if(!(o<=0)||!s||!i.range||2!==i.range.length)return er;var x=i.range[0],_=i.range[1];return .5*(x+_-2*en*Math.abs(x-_))}function dt2ms(o,s,x,_){if((_||{}).msUTC&&j(o))return+o;var N=X(o,x||i.calendar);if(N===er){if(!j(o))return er;o=+o;var G=Math.floor(10*F.mod(o+.05,1)),Z=Math.round(o-G/10);N=X(new Date(Z))+G/10}return N}function ms2dt(o,s,x){return Z(o,s,x||i.calendar)}function getCategoryName(o){return i._categories[Math.round(o)]}function setCategoryIndex(o){if(null!=o){if(void 0===i._categoriesMap&&(i._categoriesMap={}),void 0!==i._categoriesMap[o])return i._categoriesMap[o];i._categories.push("number"==typeof o?String(o):o);var s=i._categories.length-1;return i._categoriesMap[o]=s,s}return er}function getCategoryIndex(o){if(i._categoriesMap)return i._categoriesMap[o]}function getCategoryPosition(i){var o=getCategoryIndex(i);return void 0!==o?o:j(i)?+i:void 0}function getRangePosition(i){return j(i)?+i:getCategoryIndex(i)}function _l2p(i,o,s){return x.round(s+o*i,2)}var l2p=function(o){return j(o)?_l2p(o,i._m,i._b):er},p2l=function(o){var s;return s=i._m,(o-i._b)/s};if(i.rangebreaks){var ep="y"===ee;l2p=function(o){if(!j(o))return er;var s=i._rangebreaks.length;if(!s)return _l2p(o,i._m,i._b);var x=ep;i.range[0]>i.range[1]&&(x=!x);for(var _=x?-1:1,F=_*o,N=0,G=0;G<s;G++){var Z=_*i._rangebreaks[G].min,X=_*i._rangebreaks[G].max;if(F<Z)break;if(F>X)N=G+1;else{N=F<(Z+X)/2?G:G+1;break}}var J=i._B[N]||0;return isFinite(J)?_l2p(o,i._m2,J):0},p2l=function(o){var s,x,_=i._rangebreaks.length;if(!_)return s=i._m,(o-i._b)/s;for(var F=0,N=0;N<_&&!(o<i._rangebreaks[N].pmin);N++)o>i._rangebreaks[N].pmax&&(F=N+1);return x=i._m2,(o-i._B[F])/x}}i.c2l="log"===i.type?toLog:J,i.l2c="log"===i.type?fromLog:J,i.l2p=l2p,i.p2l=p2l,i.c2p="log"===i.type?function(i,o){return l2p(toLog(i,o))}:l2p,i.p2c="log"===i.type?function(i){return fromLog(p2l(i))}:p2l,-1!==["linear","-"].indexOf(i.type)?(i.d2r=i.r2d=i.d2c=i.r2c=i.d2l=i.r2l=G,i.c2d=i.c2r=i.l2d=i.l2r=J,i.d2p=i.r2p=function(o){return i.l2p(G(o))},i.p2d=i.p2r=p2l,i.cleanPos=J):"log"===i.type?(i.d2r=i.d2l=function(i,o){return toLog(G(i),o)},i.r2d=i.r2c=function(i){return fromLog(G(i))},i.d2c=i.r2l=G,i.c2d=i.l2r=J,i.c2r=toLog,i.l2d=fromLog,i.d2p=function(o,s){return i.l2p(i.d2r(o,s))},i.p2d=function(i){return fromLog(p2l(i))},i.r2p=function(o){return i.l2p(G(o))},i.p2r=p2l,i.cleanPos=J):"date"===i.type?(i.d2r=i.r2d=F.identity,i.d2c=i.r2c=i.d2l=i.r2l=dt2ms,i.c2d=i.c2r=i.l2d=i.l2r=ms2dt,i.d2p=i.r2p=function(o,s,x){return i.l2p(dt2ms(o,0,x))},i.p2d=i.p2r=function(i,o,s){return ms2dt(p2l(i),o,s)},i.cleanPos=function(o){return F.cleanDate(o,er,i.calendar)}):"category"===i.type?(i.d2c=i.d2l=setCategoryIndex,i.r2d=i.c2d=i.l2d=getCategoryName,i.d2r=i.d2l_noadd=getCategoryPosition,i.r2c=function(o){var s=getRangePosition(o);return void 0!==s?s:i.fraction2r(.5)},i.l2r=i.c2r=J,i.r2l=getRangePosition,i.d2p=function(o){return i.l2p(i.r2c(o))},i.p2d=function(i){return getCategoryName(p2l(i))},i.r2p=i.d2p,i.p2r=p2l,i.cleanPos=function(i){return"string"==typeof i&&""!==i?i:J(i)}):"multicategory"===i.type&&(i.r2d=i.c2d=i.l2d=getCategoryName,i.d2r=i.d2l_noadd=getCategoryPosition,i.r2c=function(o){var s=getCategoryPosition(o);return void 0!==s?s:i.fraction2r(.5)},i.r2c_just_indices=getCategoryIndex,i.l2r=i.c2r=J,i.r2l=getCategoryPosition,i.d2p=function(o){return i.l2p(i.r2c(o))},i.p2d=function(i){return getCategoryName(p2l(i))},i.r2p=i.d2p,i.p2r=p2l,i.cleanPos=function(i){return Array.isArray(i)||"string"==typeof i&&""!==i?i:J(i)},i.setupMultiCategory=function(x){var _,N,j=i._traceIndices,G=i._matchGroup;if(G&&0===i._categories.length){for(var Z in G)if(Z!==s){var X=o[eu.id2name(Z)];j=j.concat(X._traceIndices)}}var J=[[0,{}],[0,{}]],et=[];for(_=0;_<j.length;_++){var er=x[j[_]];if(ee in er){var en=er[ee],ei=er._length||F.minRowLength(en);if($(en[0])&&$(en[1]))for(N=0;N<ei;N++){var eo=en[0][N],es=en[1][N];null!=eo&&null!=es&&(et.push([eo,es]),eo in J[0][1]||(J[0][1][eo]=J[0][0]++),es in J[1][1]||(J[1][1][es]=J[1][0]++))}}}for(et.sort(function(i,o){var s=J[0][1],x=s[i[0]]-s[o[0]];if(x)return x;var _=J[1][1];return _[i[1]]-_[o[1]]}),_=0;_<et.length;_++)setCategoryIndex(et[_])}),i.fraction2r=function(o){var s=i.r2l(i.range[0]),x=i.r2l(i.range[1]);return i.l2r(s+o*(x-s))},i.r2fraction=function(o){var s=i.r2l(i.range[0]),x=i.r2l(i.range[1]);return(i.r2l(o)-s)/(x-s)},i.limitRange=function(o){var s=i.minallowed,x=i.maxallowed;if(void 0!==s||void 0!==x){o||(o="range");var _=F.nestedProperty(i,o).get(),N=F.simpleMap(_,i.r2l),j=N[1]<N[0];j&&N.reverse();var G=F.simpleMap([s,x],i.r2l);void 0!==s&&N[0]<G[0]&&(_[j?1:0]=s),void 0!==x&&N[1]>G[1]&&(_[j?0:1]=x)}},i.cleanRange=function(o,s){i._cleanRange(o,s),i.limitRange(o)},i._cleanRange=function(o,s){s||(s={}),o||(o="range");var x,_,N=F.nestedProperty(i,o).get();if(_=(_="date"===i.type?F.dfltRange(i.calendar):"y"===ee?ef.DFLTRANGEY:"realaxis"===i._name?[0,1]:s.dfltRange||ef.DFLTRANGEX).slice(),("tozero"===i.rangemode||"nonnegative"===i.rangemode)&&(_[0]=0),!N||2!==N.length){F.nestedProperty(i,o).set(_);return}var G=null===N[0],Z=null===N[1];for("date"!==i.type||i.autorange||(N[0]=F.cleanDate(N[0],er,i.calendar),N[1]=F.cleanDate(N[1],er,i.calendar)),x=0;x<2;x++)if("date"===i.type){if(!F.isDateTime(N[x],i.calendar)){i[o]=_;break}if(i.r2l(N[0])===i.r2l(N[1])){var X=F.constrain(i.r2l(N[0]),F.MIN_MS+1e3,F.MAX_MS-1e3);N[0]=i.l2r(X-1e3),N[1]=i.l2r(X+1e3);break}}else{if(!j(N[x])){if(!(G||Z)&&j(N[1-x]))N[x]=N[1-x]*(x?10:.1);else{i[o]=_;break}}if(N[x]<-et?N[x]=-et:N[x]>et&&(N[x]=et),N[0]===N[1]){var J=Math.max(1,Math.abs(1e-6*N[0]));N[0]-=J,N[1]+=J}}},i.setScale=function(s){var x,_,F=o._size;if(i.overlaying){var N=eu.getFromId({_fullLayout:o},i.overlaying);i.domain=N.domain}var j=s&&i._r?"_r":"range",G=i.calendar;i.cleanRange(j);var Z=i.r2l(i[j][0],G),X=i.r2l(i[j][1],G),J="y"===ee;if(J?(i._offset=F.t+(1-i.domain[1])*F.h,i._length=F.h*(i.domain[1]-i.domain[0]),i._m=i._length/(Z-X),i._b=-i._m*X):(i._offset=F.l+i.domain[0]*F.w,i._length=F.w*(i.domain[1]-i.domain[0]),i._m=i._length/(X-Z),i._b=-i._m*Z),i._rangebreaks=[],i._lBreaks=0,i._m2=0,i._B=[],i.rangebreaks&&(i._rangebreaks=i.locateBreaks(Math.min(Z,X),Math.max(Z,X)),i._rangebreaks.length)){for(x=0;x<i._rangebreaks.length;x++)_=i._rangebreaks[x],i._lBreaks+=Math.abs(_.max-_.min);var $=J;Z>X&&($=!$),$&&i._rangebreaks.reverse();var et=$?-1:1;for(i._m2=et*i._length/(Math.abs(X-Z)-i._lBreaks),i._B.push(-i._m2*(J?X:Z)),x=0;x<i._rangebreaks.length;x++)_=i._rangebreaks[x],i._B.push(i._B[i._B.length-1]-et*i._m2*(_.max-_.min));for(x=0;x<i._rangebreaks.length;x++)(_=i._rangebreaks[x]).pmin=l2p(_.min),_.pmax=l2p(_.max)}if(!isFinite(i._m)||!isFinite(i._b)||i._length<0)throw o._replotting=!1,Error("Something went wrong with axis scaling")},i.maskBreaks=function(o){var s,x,_,N,j,Z=i.rangebreaks||[];Z._cachedPatterns||(Z._cachedPatterns=Z.map(function(o){return o.enabled&&o.bounds?F.simpleMap(o.bounds,o.pattern?G:i.d2c):null})),Z._cachedValues||(Z._cachedValues=Z.map(function(o){return o.enabled&&o.values?F.simpleMap(o.values,i.d2c).sort(F.sorterAsc):null}));for(var X=0;X<Z.length;X++){var J=Z[X];if(J.enabled){if(J.bounds){var $=J.pattern;switch(x=(s=Z._cachedPatterns[X])[0],_=s[1],$){case ed:N=(j=new Date(o)).getUTCDay(),x>_&&(_+=7,N<x&&(N+=7));break;case eh:N=(j=new Date(o)).getUTCHours()+(j.getUTCMinutes()/60+j.getUTCSeconds()/3600+j.getUTCMilliseconds()/36e5),x>_&&(_+=24,N<x&&(N+=24));break;case"":N=o}if(N>=x&&N<_)return er}else for(var ee=Z._cachedValues[X],et=0;et<ee.length;et++)if(_=(x=ee[et])+J.dvalue,o>=x&&o<_)return er}}return o},i.locateBreaks=function(o,s){var x=[];if(!i.rangebreaks)return x;var _=i.rangebreaks.slice().sort(function(i,o){return i.pattern===ed&&o.pattern===eh?-1:o.pattern===ed&&i.pattern===eh?1:0}),addBreak=function(i,_){if((i=F.constrain(i,o,s))!==(_=F.constrain(_,o,s))){for(var N=!0,j=0;j<x.length;j++){var G=x[j];i<G.max&&_>=G.min&&(i<G.min&&(G.min=i),_>G.max&&(G.max=_),N=!1)}N&&x.push({min:i,max:_})}};for(j=0;j<_.length;j++){var N=_[j];if(N.enabled){if(N.bounds){var j,Z,X,J,$,ee,et=o,er=s;N.pattern&&(et=Math.floor(et)),X=(Z=F.simpleMap(N.bounds,N.pattern?G:i.r2l))[0],J=Z[1];var en=new Date(et);switch(N.pattern){case ed:ee=ei,$=((J<X?7:0)+(J-X))*eo,et+=X*eo-(en.getUTCDay()*eo+en.getUTCHours()*es+en.getUTCMinutes()*el+en.getUTCSeconds()*ec+en.getUTCMilliseconds());break;case eh:ee=eo,$=((J<X?24:0)+(J-X))*es,et+=X*es-(en.getUTCHours()*es+en.getUTCMinutes()*el+en.getUTCSeconds()*ec+en.getUTCMilliseconds());break;default:et=Math.min(Z[0],Z[1]),$=ee=(er=Math.max(Z[0],Z[1]))-et}for(var eu=et;eu<er;eu+=ee)addBreak(eu,eu+$)}else for(var ef=F.simpleMap(N.values,i.d2c),ep=0;ep<ef.length;ep++)J=(X=ef[ep])+N.dvalue,addBreak(X,J)}}return x.sort(function(i,o){return i.min-o.min}),x},i.makeCalcdata=function(o,s,x){var _,N,j,G,Z=i.type,X="date"===Z&&o[s+"calendar"];if(s in o){if(_=o[s],G=o._length||F.minRowLength(_),F.isTypedArray(_)&&("linear"===Z||"log"===Z)){if(G===_.length)return _;if(_.subarray)return _.subarray(0,G)}if("multicategory"===Z)return function(i,o){for(var s=Array(o),x=0;x<o;x++){var _=(i[0]||[])[x],F=(i[1]||[])[x];s[x]=getCategoryIndex([_,F])}return s}(_,G);for(j=0,N=Array(G);j<G;j++)N[j]=i.d2c(_[j],0,X,x)}else{var J=s+"0" in o?i.d2c(o[s+"0"],0,X):0,$=o["d"+s]?Number(o["d"+s]):1;for(j=0,_=o[({x:"y",y:"x"})[s]],N=Array(G=o._length||_.length);j<G;j++)N[j]=J+j*$}if(i.rangebreaks)for(j=0;j<G;j++)N[j]=i.maskBreaks(N[j]);return N},i.isValidRange=function(o,s){return Array.isArray(o)&&2===o.length&&(s&&null===o[0]||j(i.r2l(o[0])))&&(s&&null===o[1]||j(i.r2l(o[1])))},i.getAutorangeDflt=function(o,s){var x=!i.isValidRange(o,"nullOk");return x&&s&&s.reverseDflt?x="reversed":o&&(null===o[0]&&null===o[1]?x=!0:null===o[0]&&null!==o[1]?x="min":null!==o[0]&&null===o[1]&&(x="max")),x},i.isReversed=function(){var o=i.autorange;return"reversed"===o||"min reversed"===o||"max reversed"===o},i.isPtWithinRange=function(o,s){var x=i.c2l(o[ee],null,s),_=i.r2l(i.range[0]),F=i.r2l(i.range[1]);return _<F?_<=x&&x<=F:F<=x&&x<=_},i._emptyCategories=function(){i._categories=[],i._categoriesMap={}},i.clearCalc=function(){var s=i._matchGroup;if(s){var x=null,_=null;for(var F in s){var N=o[eu.id2name(F)];if(N._categories){x=N._categories,_=N._categoriesMap;break}}x&&_?(i._categories=x,i._categoriesMap=_):i._emptyCategories()}else i._emptyCategories();if(i._initialCategories)for(var j=0;j<i._initialCategories.length;j++)setCategoryIndex(i._initialCategories[j])},i.sortByInitialCategories=function(){var x=[];if(i._emptyCategories(),i._initialCategories)for(var _=0;_<i._initialCategories.length;_++)setCategoryIndex(i._initialCategories[_]);x=x.concat(i._traceIndices);var F=i._matchGroup;for(var N in F)if(s!==N){var j=o[eu.id2name(N)];j._categories=i._categories,j._categoriesMap=i._categoriesMap,x=x.concat(j._traceIndices)}return x};var eg=o._d3locale;"date"===i.type&&(i._dateFormat=eg?eg.timeFormat:_,i._extraFormat=o._extraFormat),i._separators=o.separators,i._numFormat=eg?eg.numberFormat:N,delete i._minDtick,delete i._forceTick0}},59652:function(i){"use strict";i.exports=function(i){var o=["showexponent","showtickprefix","showticksuffix"].filter(function(o){return void 0!==i[o]});if(o.every(function(s){return i[s]===i[o[0]]})||1===o.length)return i[o[0]]}},96115:function(i,o,s){"use strict";var x=s(71828),_=s(7901).contrast,F=s(13838),N=s(59652),j=s(85501);function tickformatstopDefaults(i,o){function coerce(s,_){return x.coerce(i,o,F.tickformatstops,s,_)}coerce("enabled")&&(coerce("dtickrange"),coerce("value"))}i.exports=function(i,o,s,G,Z){Z||(Z={});var X=s("labelalias");x.isPlainObject(X)||delete o.labelalias;var J=N(i);if(s("showticklabels")){var $=Z.font||{},ee=o.color,et=-1!==(o.ticklabelposition||"").indexOf("inside")?_(Z.bgColor):ee&&ee!==F.color.dflt?ee:$.color;if(x.coerceFont(s,"tickfont",{family:$.family,size:$.size,color:et}),Z.noTicklabelstep||"multicategory"===G||"log"===G||s("ticklabelstep"),Z.noAng||s("tickangle"),"category"!==G){var er=s("tickformat");j(i,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:tickformatstopDefaults}),o.tickformatstops.length||delete o.tickformatstops,Z.noExp||er||"date"===G||(s("showexponent",J),s("exponentformat"),s("minexponent"),s("separatethousands"))}}}},38701:function(i,o,s){"use strict";var x=s(71828),_=s(13838);i.exports=function(i,o,s,F){var N=F.isMinor,j=N?i.minor||{}:i,G=N?o.minor:o,Z=N?_.minor:_,X=N?"minor.":"",J=x.coerce2(j,G,Z,"ticklen",N?.6*(o.ticklen||5):void 0),$=x.coerce2(j,G,Z,"tickwidth",N?o.tickwidth||1:void 0),ee=x.coerce2(j,G,Z,"tickcolor",(N?o.tickcolor:void 0)||G.color);s(X+"ticks",!N&&F.outerTicks||J||$||ee?"outside":"")||(delete G.ticklen,delete G.tickwidth,delete G.tickcolor)}},26218:function(i,o,s){"use strict";var x=s(66287),_=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,F,N){N||(N={});var j=N.isMinor,G=j?i.minor||{}:i,Z=j?o.minor:o,X=j?"minor.":"";function readInput(i){var o=G[i];return void 0!==o?o:(Z._template||{})[i]}var J=readInput("tick0"),$=readInput("dtick"),ee=s(X+"tickmode",_(readInput("tickvals"))?"array":$?"linear":"auto");if("auto"===ee||"sync"===ee)s(X+"nticks");else if("linear"===ee){var et=Z.dtick=x.dtick($,F);Z.tick0=x.tick0(J,F,o.calendar,et)}else"multicategory"===F||(void 0===s(X+"tickvals")?Z.tickmode="auto":j||s("ticktext"))}},66847:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(71828),N=s(91424),j=s(89298);i.exports=function(i,o,s,G){var Z,X,J,$,ee=i._fullLayout;if(0===o.length){j.redrawComponents(i);return}function unsetSubplotTransform(i){var o=i.xaxis,s=i.yaxis;ee._defs.select("#"+i.clipId+"> rect").call(N.setTranslate,0,0).call(N.setScale,1,1),i.plot.call(N.setTranslate,o._offset,s._offset).call(N.setScale,1,1);var x=i.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(N.setPointGroupScale,1,1),x.selectAll(".textpoint").call(N.setTextPointsScale,1,1),x.call(N.hideOutsideRangePoints,i)}G&&(Z=G());var et=x.ease(s.easing);return i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame($),$=null,function(){for(var s={},x=0;x<o.length;x++){var F=o[x],N=F.plotinfo.xaxis,j=F.plotinfo.yaxis;F.xr0&&(s[N._name+".range"]=F.xr0.slice()),F.yr0&&(s[j._name+".range"]=F.yr0.slice())}return _.call("relayout",i,s).then(function(){for(var i=0;i<o.length;i++)unsetSubplotTransform(o[i].plotinfo)})}()}),X=Date.now(),$=window.requestAnimationFrame(function doFrame(){for(var x=et(Math.min(1,((J=Date.now())-X)/s.duration)),G=0;G<o.length;G++)!function(o,s){var x=o.plotinfo,_=x.xaxis,G=x.yaxis,Z=_._length,X=G._length,J=!!o.xr1,$=!!o.yr1,ee=[];if(J){var et=F.simpleMap(o.xr0,_.r2l),er=F.simpleMap(o.xr1,_.r2l),en=et[1]-et[0],ei=er[1]-er[0];ee[0]=(et[0]*(1-s)+s*er[0]-et[0])/(et[1]-et[0])*Z,ee[2]=Z*(1-s+s*ei/en),_.range[0]=_.l2r(et[0]*(1-s)+s*er[0]),_.range[1]=_.l2r(et[1]*(1-s)+s*er[1])}else ee[0]=0,ee[2]=Z;if($){var eo=F.simpleMap(o.yr0,G.r2l),es=F.simpleMap(o.yr1,G.r2l),el=eo[1]-eo[0],ec=es[1]-es[0];ee[1]=(eo[1]*(1-s)+s*es[1]-eo[1])/(eo[0]-eo[1])*X,ee[3]=X*(1-s+s*ec/el),G.range[0]=_.l2r(eo[0]*(1-s)+s*es[0]),G.range[1]=G.l2r(eo[1]*(1-s)+s*es[1])}else ee[1]=0,ee[3]=X;j.drawOne(i,_,{skipTitle:!0}),j.drawOne(i,G,{skipTitle:!0}),j.redrawComponents(i,[_._id,G._id]);var eu=J?Z/ee[2]:1,ef=$?X/ee[3]:1,eh=J?ee[0]:0,ed=$?ee[1]:0,ep=J?ee[0]/ee[2]*Z:0,eg=$?ee[1]/ee[3]*X:0,em=_._offset-ep,ey=G._offset-eg;x.clipRect.call(N.setTranslate,eh,ed).call(N.setScale,1/eu,1/ef),x.plot.call(N.setTranslate,em,ey).call(N.setScale,eu,ef),N.setPointGroupScale(x.zoomScalePts,1/eu,1/ef),N.setTextPointsScale(x.zoomScaleTxt,1/eu,1/ef)}(o[G],x);J-X>s.duration?(function(){for(var s={},x=0;x<o.length;x++){var F=o[x],N=F.plotinfo.xaxis,j=F.plotinfo.yaxis;F.xr1&&(s[N._name+".range"]=F.xr1.slice()),F.yr1&&(s[j._name+".range"]=F.yr1.slice())}Z&&Z(),_.call("relayout",i,s).then(function(){for(var i=0;i<o.length;i++)unsetSubplotTransform(o[i].plotinfo)})}(),$=window.cancelAnimationFrame(doFrame)):$=window.requestAnimationFrame(doFrame)}),Promise.resolve()}},951:function(i,o,s){"use strict";var x=s(73972).traceIs,_=s(4322);function getBoxPosLetter(i){return({v:"x",h:"y"})[i.orientation||"v"]}function isBoxWithoutPositionCoords(i,o){var s=getBoxPosLetter(i),_=x(i,"box-violin"),F=x(i._fullInput||{},"candlestick");return _&&!F&&o===s&&void 0===i[s]&&void 0===i[s+"0"]}i.exports=function(i,o,s,F){s("autotypenumbers",F.autotypenumbersDflt),"-"===s("type",(F.splomStash||{}).type)&&(function(i,o){if("-"===i.type){var s,F=i._id,N=F.charAt(0);-1!==F.indexOf("scene")&&(F=N);var j=function(i,o,s){for(var x=0;x<i.length;x++){var _=i[x];if("splom"===_.type&&_._length>0&&(_["_"+s+"axes"]||{})[o]||(_[s+"axis"]||s)===o&&(isBoxWithoutPositionCoords(_,s)||(_[s]||[]).length||_[s+"0"]))return _}}(o,F,N);if(j){if("histogram"===j.type&&N===({v:"y",h:"x"})[j.orientation||"v"]){i.type="linear";return}var G=N+"calendar",Z=j[G],X={noMultiCategory:!x(j,"cartesian")||x(j,"noMultiCategory")};if("box"===j.type&&j._hasPreCompStats&&N===({h:"x",v:"y"})[j.orientation||"v"]&&(X.noMultiCategory=!0),X.autotypenumbers=i.autotypenumbers,isBoxWithoutPositionCoords(j,N)){var J=getBoxPosLetter(j),$=[];for(s=0;s<o.length;s++){var ee=o[s];x(ee,"box-violin")&&(ee[N+"axis"]||N)===F&&(void 0!==ee[J]?$.push(ee[J][0]):void 0!==ee.name?$.push(ee.name):$.push("text"),ee[G]!==Z&&(Z=void 0))}i.type=_($,Z,X)}else if("splom"===j.type){var et=j.dimensions[j._axesDim[F]];et.visible&&(i.type=_(et.values,Z,X))}else i.type=_(j[N]||[j[N+"0"]],Z,X)}}}(o,F.data),"-"===o.type?o.type="linear":i.type=o.type)}},31137:function(i,o,s){"use strict";var x=s(73972),_=s(71828);function bindingValueHasChanged(i,o,s){var x,F,N,j=!1;if("data"===o.type)x=i._fullData[null!==o.traces?o.traces[0]:0];else{if("layout"!==o.type)return!1;x=i._fullLayout}return F=_.nestedProperty(x,o.prop).get(),(N=s[o.type]=s[o.type]||{}).hasOwnProperty(o.prop)&&N[o.prop]!==F&&(j=!0),N[o.prop]=F,{changed:j,value:F}}function computeLayoutBindings(i,o){var s=[],x=o[0],F={};if("string"==typeof x)F[x]=o[1];else{if(!_.isPlainObject(x))return s;F=x}return crawl(F,function(i,o,x){s.push({type:"layout",prop:i,value:x})},"",0),s}function computeDataBindings(i,o){var s,x,F,N,j=[];if(x=o[0],F=o[1],s=o[2],N={},"string"==typeof x)N[x]=F;else{if(!_.isPlainObject(x))return j;N=x,void 0===s&&(s=F)}return void 0===s&&(s=null),crawl(N,function(o,x,_){if(Array.isArray(_)){var F,N,G=Math.min((N=_.slice()).length,i.data.length);s&&(G=Math.min(G,s.length)),F=[];for(var Z=0;Z<G;Z++)F[Z]=s?s[Z]:Z}else N=_,F=s?s.slice():null;if(null===F)Array.isArray(N)&&(N=N[0]);else if(Array.isArray(F)){if(!Array.isArray(N)){var X=N;N=[];for(var J=0;J<F.length;J++)N[J]=X}N.length=Math.min(F.length,N.length)}j.push({type:"data",prop:o,traces:F,value:N})},"",0),j}function crawl(i,o,s,x){Object.keys(i).forEach(function(F){var N=i[F];if("_"!==F[0]){var j=s+(x>0?".":"")+F;_.isPlainObject(N)?crawl(N,o,j,x+1):o(j,F,N)}})}o.manageCommandObserver=function(i,s,x,F){var N={},j=!0;s&&s._commandObserver&&(N=s._commandObserver),N.cache||(N.cache={}),N.lookupTable={};var G=o.hasSimpleAPICommandBindings(i,x,N.lookupTable);if(s&&s._commandObserver){if(G)return N;if(s._commandObserver.remove)return s._commandObserver.remove(),s._commandObserver=null,N}if(G){bindingValueHasChanged(i,G,N.cache),N.check=function(){if(j){var o=bindingValueHasChanged(i,G,N.cache);return o.changed&&F&&void 0!==N.lookupTable[o.value]&&(N.disable(),Promise.resolve(F({value:o.value,type:G.type,prop:G.prop,traces:G.traces,index:N.lookupTable[o.value]})).then(N.enable,N.enable)),o.changed}};for(var Z=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],X=0;X<Z.length;X++)i._internalOn(Z[X],N.check);N.remove=function(){for(var o=0;o<Z.length;o++)i._removeInternalListener(Z[o],N.check)}}else _.log("Unable to automatically bind plot updates to API command"),N.lookupTable={},N.remove=function(){};return N.disable=function(){j=!1},N.enable=function(){j=!0},s&&(s._commandObserver=N),N},o.hasSimpleAPICommandBindings=function(i,s,x){var _=s.length;for(F=0;F<_;F++){var F,N,j,G=s[F],Z=G.method,X=G.args;if(Array.isArray(X)||(X=[]),!Z)return!1;var J=o.computeAPICommandBindings(i,Z,X);if(1!==J.length)return!1;if(N){if((j=J[0]).type!==N.type||j.prop!==N.prop)return!1;if(Array.isArray(N.traces)){if(!Array.isArray(j.traces))return!1;j.traces.sort();for(var $=0;$<N.traces.length;$++)if(N.traces[$]!==j.traces[$])return!1}else if(j.prop!==N.prop)return!1}else Array.isArray((N=J[0]).traces)&&N.traces.sort();var ee=(j=J[0]).value;if(Array.isArray(ee)){if(1!==ee.length)return!1;ee=ee[0]}x&&(x[ee]=F)}return N},o.executeAPICommand=function(i,o,s){if("skip"===o)return Promise.resolve();var F=x.apiMethodRegistry[o],N=[i];Array.isArray(s)||(s=[]);for(var j=0;j<s.length;j++)N.push(s[j]);return F.apply(null,N).catch(function(i){return _.warn("API call to Plotly."+o+" rejected.",i),Promise.reject(i)})},o.computeAPICommandBindings=function(i,o,s){var x,_;switch(Array.isArray(s)||(s=[]),o){case"restyle":x=computeDataBindings(i,s);break;case"relayout":x=computeLayoutBindings(i,s);break;case"update":x=computeDataBindings(i,[s[0],s[2]]).concat(computeLayoutBindings(i,[s[1]]));break;case"animate":x=Array.isArray((_=s)[0])&&1===_[0].length&&-1!==["string","number"].indexOf(typeof _[0][0])?[{type:"layout",prop:"_currentFrame",value:_[0][0].toString()}]:[];break;default:x=[]}return x}},27670:function(i,o,s){"use strict";var x=s(1426).extendFlat;o.Y=function(i,o){o=o||{};var s={valType:"info_array",editType:(i=i||{}).editType,items:[{valType:"number",min:0,max:1,editType:i.editType},{valType:"number",min:0,max:1,editType:i.editType}],dflt:[0,1]};i.name&&i.name,i.trace,o.description&&o.description;var _={x:x({},s,{}),y:x({},s,{}),editType:i.editType};return i.noGridCell||(_.row={valType:"integer",min:0,dflt:0,editType:i.editType},_.column={valType:"integer",min:0,dflt:0,editType:i.editType}),_},o.c=function(i,o,s,x){var _=x&&x.x||[0,1],F=x&&x.y||[0,1],N=o.grid;if(N){var j=s("domain.column");void 0!==j&&(j<N.columns?_=N._domains.x[j]:delete i.domain.column);var G=s("domain.row");void 0!==G&&(G<N.rows?F=N._domains.y[G]:delete i.domain.row)}var Z=s("domain.x",_),X=s("domain.y",F);Z[0]<Z[1]||(i.domain.x=_.slice()),X[0]<X[1]||(i.domain.y=F.slice())}},41940:function(i){"use strict";i.exports=function(i){var o=i.editType,s=i.colorEditType;void 0===s&&(s=o);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:o},size:{valType:"number",min:1,editType:o},color:{valType:"color",editType:s},editType:o};return i.autoSize&&(x.size.dflt="auto"),i.autoColor&&(x.color.dflt="auto"),i.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},31391:function(i){"use strict";i.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(i,o){"use strict";o.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},o.axesNames=["lonaxis","lataxis"],o.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},o.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},o.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},o.clipPad=.001,o.precision=.1,o.landColor="#F0DC82",o.waterColor="#3399FF",o.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},o.sphereSVG={type:"Sphere"},o.fillLayers={ocean:1,land:1,lakes:1},o.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},o.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],o.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],o.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(i,o,s){"use strict";var x=s(39898),_=s(27362),F=_.geoPath,N=_.geoDistance,j=s(65704),G=s(73972),Z=s(71828),X=Z.strTranslate,J=s(7901),$=s(91424),ee=s(30211),et=s(74875),er=s(89298),en=s(71739).getAutoRange,ei=s(28569),eo=s(47322).prepSelect,es=s(47322).clearOutline,el=s(47322).selectOnClick,ec=s(74455),eu=s(78776),ef=s(41327),eh=s(90973),ed=s(96892).zL;function Geo(i){this.id=i.id,this.graphDiv=i.graphDiv,this.container=i.container,this.topojsonURL=i.topojsonURL,this.isStatic=i.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var ep=Geo.prototype;function makeRangeBox(i,o){var s=eu.clipPad,x=i[0]+s,_=i[1]-s,F=o[0]+s,N=o[1]-s;x>0&&_<0&&(_+=360);var j=(_-x)/4;return{type:"Polygon",coordinates:[[[x,F],[x,N],[x+j,N],[x+2*j,N],[x+3*j,N],[_,N],[_,F],[_-j,F],[_-2*j,F],[_-3*j,F],[x,F]]]}}i.exports=function(i){return new Geo(i)},ep.plot=function(i,o,s,x){var _=this;if(x)return _.update(i,o,!0);_._geoCalcData=i,_._fullLayout=o;var F=o[this.id],N=[],j=!1;for(var G in eu.layerNameToAdjective)if("frame"!==G&&F["show"+G]){j=!0;break}for(var Z=!1,X=0;X<i.length;X++){var J=i[0][0].trace;J._geo=_,J.locationmode&&(j=!0);var $=J.marker;if($){var ee=$.angle,et=$.angleref;(ee||"north"===et||"previous"===et)&&(Z=!0)}}if(this._hasMarkerAngles=Z,j){var er=eh.getTopojsonName(F);(null===_.topojson||er!==_.topojsonName)&&(_.topojsonName=er,void 0===PlotlyGeoAssets.topojson[_.topojsonName]&&N.push(_.fetchTopojson()))}N=N.concat(ef.fetchTraceGeoData(i)),s.push(new Promise(function(s,x){Promise.all(N).then(function(){_.topojson=PlotlyGeoAssets.topojson[_.topojsonName],_.update(i,o),s()}).catch(x)}))},ep.fetchTopojson=function(){var i=this,o=eh.getTopojsonPath(i.topojsonURL,i.topojsonName);return new Promise(function(s,_){x.json(o,function(x,F){if(x)return 404===x.status?_(Error(["plotly.js could not find topojson file at",o+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):_(Error(["unexpected error while fetching topojson file at",o].join(" ")));PlotlyGeoAssets.topojson[i.topojsonName]=F,s()})})},ep.update=function(i,o,s){var x=o[this.id];this.hasChoropleth=!1;for(var _=0;_<i.length;_++){var F=i[_],N=F[0].trace;"choropleth"===N.type&&(this.hasChoropleth=!0),!0===N.visible&&N._length>0&&N._module.calcGeoJSON(F,o)}if(!s){if(this.updateProjection(i,o))return;this.viewInitial&&this.scope===x.scope||this.saveViewInitial(x)}this.scope=x.scope,this.updateBaseLayers(o,x),this.updateDims(o,x),this.updateFx(o,x),et.generalUpdatePerTraceModule(this.graphDiv,this,i,x);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this._render()},ep.updateProjection=function(i,o){var s=this.graphDiv,x=o[this.id],G=o._size,X=x.domain,J=x.projection,$=x.lonaxis,ee=x.lataxis,et=$._ax,er=ee._ax,ei=this.projection=function(i){for(var o=i.projection,s=o.type,x=eu.projNames[s],G=(_[x="geo"+Z.titleCase(x)]||j[x])(),X=i._isSatellite?180*Math.acos(1/o.distance)/Math.PI:i._isClipped?eu.lonaxisSpan[s]/2:null,J=["center","rotate","parallels","clipExtent"],dummyFn=function(i){return i?G:[]},$=0;$<J.length;$++){var ee=J[$];"function"!=typeof G[ee]&&(G[ee]=dummyFn)}return G.isLonLatOverEdges=function(i){if(null===G(i))return!0;if(!X)return!1;var o=G.rotate();return N(i,[-o[0],-o[1]])>X*Math.PI/180},G.getPath=function(){return F().projection(G)},G.getBounds=function(i){return G.getPath().bounds(i)},G.precision(eu.precision),i._isSatellite&&G.tilt(o.tilt).distance(o.distance),X&&G.clipAngle(X-eu.clipPad),G}(x),eo=[[G.l+G.w*X.x[0],G.t+G.h*(1-X.y[1])],[G.l+G.w*X.x[1],G.t+G.h*(1-X.y[0])]],es=x.center||{},el=J.rotation||{},ec=$.range||[],ef=ee.range||[];if(x.fitbounds){et._length=eo[1][0]-eo[0][0],er._length=eo[1][1]-eo[0][1],et.range=en(s,et),er.range=en(s,er);var eh=(et.range[0]+et.range[1])/2,ed=(er.range[0]+er.range[1])/2;if(x._isScoped)es={lon:eh,lat:ed};else if(x._isClipped){es={lon:eh,lat:ed},el={lon:eh,lat:ed,roll:el.roll};var ep=J.type,eg=eu.lonaxisSpan[ep]/2||180,em=eu.lataxisSpan[ep]/2||90;ec=[eh-eg,eh+eg],ef=[ed-em,ed+em]}else es={lon:eh,lat:ed},el={lon:eh,lat:el.lat,roll:el.roll}}ei.center([es.lon-el.lon,es.lat-el.lat]).rotate([-el.lon,-el.lat,el.roll]).parallels(J.parallels);var ey=makeRangeBox(ec,ef);ei.fitExtent(eo,ey);var ev=this.bounds=ei.getBounds(ey),ex=this.fitScale=ei.scale(),e_=ei.translate();if(x.fitbounds){var ew=ei.getBounds(makeRangeBox(et.range,er.range)),eT=Math.min((ev[1][0]-ev[0][0])/(ew[1][0]-ew[0][0]),(ev[1][1]-ev[0][1])/(ew[1][1]-ew[0][1]));isFinite(eT)?ei.scale(eT*ex):Z.warn("Something went wrong during"+this.id+"fitbounds computations.")}else ei.scale(J.scale*ex);var ek=this.midPt=[(ev[0][0]+ev[1][0])/2,(ev[0][1]+ev[1][1])/2];if(ei.translate([e_[0]+(ek[0]-e_[0]),e_[1]+(ek[1]-e_[1])]).clipExtent(ev),x._isAlbersUsa){var eA=ei([es.lon,es.lat]),eS=ei.translate();ei.translate([eS[0]-(eA[0]-eS[0]),eS[1]-(eA[1]-eS[1])])}},ep.updateBaseLayers=function(i,o){var s=this,_=s.topojson,F=s.layers,N=s.basePaths;function isAxisLayer(i){return"lonaxis"===i||"lataxis"===i}function isLineLayer(i){return!!eu.lineLayers[i]}function isFillLayer(i){return!!eu.fillLayers[i]}var j=(this.hasChoropleth?eu.layersForChoropleth:eu.layers).filter(function(i){return isLineLayer(i)||isFillLayer(i)?o["show"+i]:!isAxisLayer(i)||o[i].showgrid}),G=s.framework.selectAll(".layer").data(j,String);G.exit().each(function(i){delete F[i],delete N[i],x.select(this).remove()}),G.enter().append("g").attr("class",function(i){return"layer "+i}).each(function(i){var o=F[i]=x.select(this);"bg"===i?s.bgRect=o.append("rect").style("pointer-events","all"):isAxisLayer(i)?N[i]=o.append("path").style("fill","none"):"backplot"===i?o.append("g").classed("choroplethlayer",!0):"frontplot"===i?o.append("g").classed("scatterlayer",!0):isLineLayer(i)?N[i]=o.append("path").style("fill","none").style("stroke-miterlimit",2):isFillLayer(i)&&(N[i]=o.append("path").style("stroke","none"))}),G.order(),G.each(function(s){var x=N[s],F=eu.layerNameToAdjective[s];"frame"===s?x.datum(eu.sphereSVG):isLineLayer(s)||isFillLayer(s)?x.datum(ed(_,_.objects[s])):isAxisLayer(s)&&x.datum(function(i,o,s){var x,_,F,N=o[i],j=eu.scopeDefaults[o.scope];"lonaxis"===i?(x=j.lonaxisRange,_=j.lataxisRange,F=function(i,o){return[i,o]}):"lataxis"===i&&(x=j.lataxisRange,_=j.lonaxisRange,F=function(i,o){return[o,i]});var G={type:"linear",range:[x[0],x[1]-1e-6],tick0:N.tick0,dtick:N.dtick};er.setConvert(G,s);var Z=er.calcTicks(G);o.isScoped||"lonaxis"!==i||Z.pop();for(var X=Z.length,J=Array(X),$=0;$<X;$++)for(var ee=Z[$].x,et=J[$]=[],en=_[0];en<_[1]+2.5;en+=2.5)et.push(F(ee,en));return{type:"MultiLineString",coordinates:J}}(s,o,i)).call(J.stroke,o[s].gridcolor).call($.dashLine,o[s].griddash,o[s].gridwidth),isLineLayer(s)?x.call(J.stroke,o[F+"color"]).call($.dashLine,"",o[F+"width"]):isFillLayer(s)&&x.call(J.fill,o[F+"color"])})},ep.updateDims=function(i,o){var s=this.bounds,x=(o.framewidth||0)/2,_=s[0][0]-x,F=s[0][1]-x,N=s[1][0]-_+x,j=s[1][1]-F+x;$.setRect(this.clipRect,_,F,N,j),this.bgRect.call($.setRect,_,F,N,j).call(J.fill,o.bgcolor),this.xaxis._offset=_,this.xaxis._length=N,this.yaxis._offset=F,this.yaxis._length=j},ep.updateFx=function(i,o){var s=this,_=s.graphDiv,F=s.bgRect,N=i.dragmode,j=i.clickmode;if(!s.isStatic){var X={element:s.bgRect.node(),gd:_,plotinfo:{id:s.id,xaxis:s.xaxis,yaxis:s.yaxis,fillRangeItems:function(i,o){o.isRect?(i.range={})[s.id]=[invert([o.xmin,o.ymin]),invert([o.xmax,o.ymax])]:(i.lassoPoints={})[s.id]=o.map(invert)}},xaxes:[s.xaxis],yaxes:[s.yaxis],subplot:s.id,clickFn:function(i){2===i&&es(_)}};"pan"===N?(F.node().onmousedown=null,F.call(ec(s,o)),F.on("dblclick.zoom",function(){var i=s.viewInitial,o={};for(var x in i)o[s.id+"."+x]=i[x];G.call("_guiRelayout",_,o),_.emit("plotly_doubleclick",null)}),_._context._scrollZoom.geo||F.on("wheel.zoom",null)):("select"===N||"lasso"===N)&&(F.on(".zoom",null),X.prepFn=function(i,o,s){eo(i,o,s,X,N)},ei.init(X)),F.on("mousemove",function(){var i=s.projection.invert(Z.getPositionFromD3Event());if(!i)return ei.unhover(_,x.event);s.xaxis.p2c=function(){return i[0]},s.yaxis.p2c=function(){return i[1]},ee.hover(_,x.event,s.id)}),F.on("mouseout",function(){_._dragging||ei.unhover(_,x.event)}),F.on("click",function(){"select"!==N&&"lasso"!==N&&(j.indexOf("select")>-1&&el(x.event,_,[s.xaxis],[s.yaxis],s.id,X),j.indexOf("event")>-1&&ee.click(_,x.event))})}function invert(i){return s.projection.invert([i[0]+s.xaxis._offset,i[1]+s.yaxis._offset])}},ep.makeFramework=function(){var i=this,o=i.graphDiv,s=o._fullLayout,_="clip"+s._uid+i.id;i.clipDef=s._clips.append("clipPath").attr("id",_),i.clipRect=i.clipDef.append("rect"),i.framework=x.select(i.container).append("g").attr("class","geo "+i.id).call($.setClipUrl,_,o),i.project=function(o){var s=i.projection(o);return s?[s[0]-i.xaxis._offset,s[1]-i.yaxis._offset]:[null,null]},i.xaxis={_id:"x",c2p:function(o){return i.project(o)[0]}},i.yaxis={_id:"y",c2p:function(o){return i.project(o)[1]}},i.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},er.setConvert(i.mockAxis,s)},ep.saveViewInitial=function(i){var o,s=i.center||{},x=i.projection,_=x.rotation||{};this.viewInitial={fitbounds:i.fitbounds,"projection.scale":x.scale},o=i._isScoped?{"center.lon":s.lon,"center.lat":s.lat}:i._isClipped?{"projection.rotation.lon":_.lon,"projection.rotation.lat":_.lat}:{"center.lon":s.lon,"center.lat":s.lat,"projection.rotation.lon":_.lon},Z.extendFlat(this.viewInitial,o)},ep.render=function(i){this._hasMarkerAngles&&i?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},ep._render=function(){var i,o=this.projection,s=o.getPath();function translatePoints(i){var s=o(i.lonlat);return s?X(s[0],s[1]):null}function hideShowPoints(i){return o.isLonLatOverEdges(i.lonlat)?"none":null}for(i in this.basePaths)this.basePaths[i].attr("d",s);for(i in this.dataPaths)this.dataPaths[i].attr("d",function(i){return s(i.geojson)});for(i in this.dataPoints)this.dataPoints[i].attr("display",hideShowPoints).attr("transform",translatePoints)}},44622:function(i,o,s){"use strict";var x=s(27659).AU,_=s(71828).counterRegex,F=s(69082),N=_("geo"),j={};j.geo={valType:"subplotid",dflt:"geo",editType:"calc"},i.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:N,attrRegex:N,attributes:j,layoutAttributes:s(77519),supplyLayoutDefaults:s(82161),plot:function(i){for(var o=i._fullLayout,s=i.calcdata,_=o._subplots.geo,N=0;N<_.length;N++){var j=_[N],G=x(s,"geo",j),Z=o[j]._subplot;Z||(Z=F({id:j,graphDiv:i,container:o._geolayer.node(),topojsonURL:i._context.topojsonURL,staticPlot:i._context.staticPlot}),o[j]._subplot=Z),Z.plot(G,o,i._promises)}},updateFx:function(i){for(var o=i._fullLayout,s=o._subplots.geo,x=0;x<s.length;x++){var _=o[s[x]];_._subplot.updateFx(o,_)}},clean:function(i,o,s,x){for(var _=x._subplots.geo||[],F=0;F<_.length;F++){var N=_[F],j=x[N]._subplot;!o[N]&&j&&(j.framework.remove(),j.clipDef.remove())}}}},77519:function(i,o,s){"use strict";var x=s(22399),_=s(27670).Y,F=s(79952).P,N=s(78776),j=s(30962).overrideAll,G=s(78607),Z={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:x.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:F};(i.exports=j({domain:_({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:G(N.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:G(N.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:x.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:N.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:N.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:N.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:N.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:x.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:x.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:x.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:x.background},lonaxis:Z,lataxis:Z},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(i,o,s){"use strict";var x=s(71828),_=s(49119),F=s(27659).NG,N=s(78776),j=s(77519),G=N.axesNames;function handleGeoDefaults(i,o,s,_){var j=F(_.fullData,"geo",_.id).map(function(i){return i._expandedIndex}),Z=s("resolution"),X=s("scope"),J=N.scopeDefaults[X],$=s("projection.type",J.projType),ee=o._isAlbersUsa="albers usa"===$;ee&&(X=o.scope="usa");var et=o._isScoped="world"!==X,er=o._isSatellite="satellite"===$,en=o._isConic=-1!==$.indexOf("conic")||"albers"===$,ei=o._isClipped=!!N.lonaxisSpan[$];if(!1===i.visible){var eo=x.extendDeep({},o._template);eo.showcoastlines=!1,eo.showcountries=!1,eo.showframe=!1,eo.showlakes=!1,eo.showland=!1,eo.showocean=!1,eo.showrivers=!1,eo.showsubunits=!1,eo.lonaxis&&(eo.lonaxis.showgrid=!1),eo.lataxis&&(eo.lataxis.showgrid=!1),o._template=eo}for(var es=s("visible"),el=0;el<G.length;el++){var ec,eu,ef,eh,ed=G[el],ep=[30,10][el];if(et)eh=J[ed+"Range"];else{var eg=N[ed+"Span"],em=(eg[$]||eg["*"])/2,ey=s("projection.rotation."+ed.substr(0,3),J.projRotate[el]);eh=[ey-em,ey+em]}var ev=s(ed+".range",eh);s(ed+".tick0"),s(ed+".dtick",ep),s(ed+".showgrid",!!es&&void 0)&&(s(ed+".gridcolor"),s(ed+".gridwidth"),s(ed+".griddash")),o[ed]._ax={type:"linear",_id:ed.slice(0,3),_traceIndices:j,setScale:x.identity,c2l:x.identity,r2l:x.identity,autorange:!0,range:ev.slice(),_m:1,_input:{}}}var ex=o.lonaxis.range,e_=o.lataxis.range,ew=ex[0],eT=ex[1];ew>0&&eT<0&&(eT+=360);var ek=(ew+eT)/2;if(!ee){var eA=et?J.projRotate:[ek,0,0];ec=s("projection.rotation.lon",eA[0]),s("projection.rotation.lat",eA[1]),s("projection.rotation.roll",eA[2]),s("showcoastlines",!et&&es)&&(s("coastlinecolor"),s("coastlinewidth")),s("showocean",!!es&&void 0)&&s("oceancolor")}ee?(eu=-96.6,ef=38.7):(eu=et?ek:ec,ef=(e_[0]+e_[1])/2),s("center.lon",eu),s("center.lat",ef),er&&(s("projection.tilt"),s("projection.distance")),en&&s("projection.parallels",J.projParallels||[0,60]),s("projection.scale"),s("showland",!!es&&void 0)&&s("landcolor"),s("showlakes",!!es&&void 0)&&s("lakecolor"),s("showrivers",!!es&&void 0)&&(s("rivercolor"),s("riverwidth")),s("showcountries",et&&"usa"!==X&&es)&&(s("countrycolor"),s("countrywidth")),("usa"===X||"north america"===X&&50===Z)&&(s("showsubunits",es),s("subunitcolor"),s("subunitwidth")),!et&&s("showframe",es)&&(s("framecolor"),s("framewidth")),s("bgcolor"),s("fitbounds")&&(delete o.projection.scale,et?(delete o.center.lon,delete o.center.lat):ei?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}i.exports=function(i,o,s){_(i,o,s,{type:"geo",attributes:j,handleDefaults:handleGeoDefaults,fullData:s,partition:"y"})}},74455:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(73972),N=Math.PI/180,j=180/Math.PI,G={cursor:"pointer"},Z={cursor:"auto"};function initZoom(i,o){return x.behavior.zoom().translate(o.translate()).scale(o.scale())}function sync(i,o,s){var x=i.id,N=i.graphDiv,j=N.layout,G=j[x],Z=N._fullLayout,X=Z[x],J={},$={};function set(i,o){J[x+"."+i]=_.nestedProperty(G,i).get(),F.call("_storeDirectGUIEdit",j,Z._preGUI,J);var s=_.nestedProperty(X,i);s.get()!==o&&(s.set(o),_.nestedProperty(G,i).set(o),$[x+"."+i]=o)}s(set),set("projection.scale",o.scale()/i.fitScale),set("fitbounds",!1),N.emit("plotly_relayout",$)}function position(i,o){var s,x,_,F=i.invert(o);return F&&isFinite(F[0])&&isFinite(F[1])&&(s=F[0]*N,[(_=Math.cos(x=F[1]*N))*Math.cos(s),_*Math.sin(s),Math.sin(x)])}function angleDistance(i,o,s,x){var _=angleMod(s-i),F=angleMod(x-o);return Math.sqrt(_*_+F*F)}function angleMod(i){return(i%360+540)%360-180}function rotateCartesian(i,o,s){var x=s*N,_=i.slice(),F=0===o?1:0,j=2===o?1:2,G=Math.cos(x),Z=Math.sin(x);return _[F]=i[F]*G-i[j]*Z,_[j]=i[j]*G+i[F]*Z,_}function dot(i,o){for(var s=0,x=0,_=i.length;x<_;++x)s+=i[x]*o[x];return s}i.exports=function(i,o){var s=i.projection;return(o._isScoped?function(i,o){var s=initZoom(i,o);function syncCb(s){var x=o.invert(i.midPt);s("center.lon",x[0]),s("center.lat",x[1])}return s.on("zoomstart",function(){x.select(this).style(G)}).on("zoom",function(){o.scale(x.event.scale).translate(x.event.translate),i.render(!0);var s=o.invert(i.midPt);i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}).on("zoomend",function(){x.select(this).style(Z),sync(i,o,syncCb)}),s}:o._isClipped?function(i,o){var s,_={r:o.rotate(),k:o.scale()},F=initZoom(i,o),X=function(i){for(var o=0,s=arguments.length,_=[];++o<s;)_.push(arguments[o]);var F=x.dispatch.apply(null,_);return F.of=function(o,s){return function(_){var N;try{N=_.sourceEvent=x.event,_.target=i,x.event=_,F[_.type].apply(o,s)}finally{x.event=N}}},F}(F,"zoomstart","zoom","zoomend"),J=0,$=F.on;function syncCb(i){var s=o.rotate();i("projection.rotation.lon",-s[0]),i("projection.rotation.lat",-s[1])}return F.on("zoomstart",function(){x.select(this).style(G);var i,Z,ee,et,er,en,ei,eo,es,el,ec=x.mouse(this),eu=o.rotate(),ef=eu,eh=o.translate(),ed=(i=.5*eu[0]*N,Z=.5*eu[1]*N,ee=.5*eu[2]*N,et=Math.sin(i),er=Math.cos(i),en=Math.sin(Z),ei=Math.cos(Z),eo=Math.sin(ee),[er*ei*(es=Math.cos(ee))+et*en*eo,et*ei*es-er*en*eo,er*en*es+et*ei*eo,er*ei*eo-et*en*es]);s=position(o,ec),$.call(F,"zoom",function(){var i,F=x.mouse(this);if(o.scale(_.k=x.event.scale),s){if(position(o,F)){o.rotate(eu).translate(eh);var N,G,Z,J,$,ee,et,er,en,ei,eo,es,el,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC=position(o,F),eE=[Math.atan2(2*((N=function(i,o){if(i&&o){var s=[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]],x=Math.sqrt(dot(s,s)),_=.5*Math.acos(Math.max(-1,Math.min(1,dot(i,o)))),F=Math.sin(_)/x;return x&&[Math.cos(_),s[2]*F,-s[1]*F,s[0]*F]}}(s,eC),G=ed[0],Z=ed[1],J=ed[2],$=ed[3],ee=N[0],et=N[1],ei=[G*ee-Z*et-J*(er=N[2])-$*(en=N[3]),G*et+Z*ee+J*en-$*er,G*er-Z*en+J*ee+$*et,G*en+Z*er-J*et+$*ee])[0]*ei[1]+ei[2]*ei[3]),1-2*(ei[1]*ei[1]+ei[2]*ei[2]))*j,Math.asin(Math.max(-1,Math.min(1,2*(ei[0]*ei[2]-ei[3]*ei[1]))))*j,Math.atan2(2*(ei[0]*ei[3]+ei[1]*ei[2]),1-2*(ei[2]*ei[2]+ei[3]*ei[3]))*j],eL=_.r=(eo=s,es=ef,eg=rotateCartesian(eo,2,eE[0]),eg=rotateCartesian(eg,1,eE[1]),eg=rotateCartesian(eg,0,eE[2]-es[2]),em=eo[0],ey=eo[1],ev=eo[2],ex=eg[0],e_=eg[1],ew=eg[2],eT=Math.atan2(ey,em)*j,Math.abs(e_)>(ek=Math.sqrt(em*em+ey*ey))?(ep=(e_>0?90:-90)-eT,el=0):(ep=Math.asin(e_/ek)*j-eT,el=Math.sqrt(ek*ek-e_*e_)),eA=180-ep-2*eT,eS=(Math.atan2(ew,ex)-Math.atan2(ev,el))*j,eM=(Math.atan2(ew,ex)-Math.atan2(ev,-el))*j,angleDistance(es[0],es[1],ep,eS)<=angleDistance(es[0],es[1],eA,eM)?[ep,eS,es[2]]:[eA,eM,es[2]]);isFinite(eL[0])&&isFinite(eL[1])&&isFinite(eL[2])||(eL=ef),o.rotate(eL),ef=eL}}else s=position(o,ec=F);i=X.of(this,arguments),i({type:"zoom"})}),el=X.of(this,arguments),J++||el({type:"zoomstart"})}).on("zoomend",function(){var s;x.select(this).style(Z),$.call(F,"zoom",null),s=X.of(this,arguments),--J||s({type:"zoomend"}),sync(i,o,syncCb)}).on("zoom.redraw",function(){i.render(!0);var s=o.rotate();i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.projection.rotation.lon":-s[0],"geo.projection.rotation.lat":-s[1]})}),x.rebind(F,X,"on")}:function(i,o){var s,_,F,N,j,X,J,$,ee,et=initZoom(i,o);function position(i){return o.invert(i)}function syncCb(s){var x=o.rotate(),_=o.invert(i.midPt);s("projection.rotation.lon",-x[0]),s("center.lon",_[0]),s("center.lat",_[1])}return et.on("zoomstart",function(){x.select(this).style(G),s=x.mouse(this),_=o.rotate(),F=o.translate(),N=_,j=position(s)}).on("zoom",function(){if(X=x.mouse(this),function(i){var s=position(i);if(!s)return!0;var x=o(s);return Math.abs(x[0]-i[0])>2||Math.abs(x[1]-i[1])>2}(s)){et.scale(o.scale()),et.translate(o.translate());return}o.scale(x.event.scale),o.translate([F[0],x.event.translate[1]]),j?position(X)&&($=position(X),J=[N[0]+($[0]-j[0]),_[1],_[2]],o.rotate(J),N=J):j=position(s=X),ee=!0,i.render(!0);var G=o.rotate(),Z=o.invert(i.midPt);i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.center.lon":Z[0],"geo.center.lat":Z[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){x.select(this).style(Z),ee&&sync(i,o,syncCb)}),et})(i,s)}},27659:function(i,o,s){"use strict";var x=s(73972),_=s(85555).SUBPLOT_PATTERN;o.AU=function(i,o,s){var _=x.subplotsRegistry[o];if(!_)return[];for(var F=_.attr,N=[],j=0;j<i.length;j++){var G=i[j];G[0].trace[F]===s&&N.push(G)}return N},o.a0=function(i,o){var s,_=[],F=[];if(!(s="string"==typeof o?x.getModule(o).plot:"function"==typeof o?o:o.plot))return[_,i];for(var N=0;N<i.length;N++){var j=i[N],G=j[0].trace;!0===G.visible&&0!==G._length&&(G._module&&G._module.plot===s?_.push(j):F.push(j))}return[_,F]},o.NG=function(i,o,s){if(!x.subplotsRegistry[o])return[];var F,N,j,G=x.subplotsRegistry[o].attr,Z=[];if("gl2d"===o){var X=s.match(_);N="x"+X[1],j="y"+X[2]}for(var J=0;J<i.length;J++)F=i[J],"gl2d"===o&&x.traceIs(F,"gl2d")?F[G[0]]===N&&F[G[1]]===j&&Z.push(F):F[G]===s&&Z.push(F);return Z}},75071:function(i,o,s){"use strict";var x=s(16825),_=s(1195),F=s(48956),N=s(85555),j=s(38520);function Camera2D(i,o){this.element=i,this.plot=o,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}i.exports=function(i){var o=i.mouseContainer,s=i.glplot,G=new Camera2D(o,s);function unSetAutoRange(){i.xaxis.autorange=!1,i.yaxis.autorange=!1}function handleInteraction(o,x,_){var F,j,Z=i.calcDataBox(),X=s.viewBox,J=G.lastPos[0],$=G.lastPos[1],ee=N.MINDRAG*s.pixelRatio,et=N.MINZOOM*s.pixelRatio;function updateRange(o,s,x){var _=Math.min(s,x),F=Math.max(s,x);_!==F?(Z[o]=_,Z[o+2]=F,G.dataBox=Z,i.setRanges(Z)):(i.selectBox.selectBox=[0,0,1,1],i.glplot.setDirty())}switch(x*=s.pixelRatio,_*=s.pixelRatio,_=X[3]-X[1]-_,i.fullLayout.dragmode){case"zoom":if(o){var er=x/(X[2]-X[0])*(Z[2]-Z[0])+Z[0],en=_/(X[3]-X[1])*(Z[3]-Z[1])+Z[1];G.boxInited||(G.boxStart[0]=er,G.boxStart[1]=en,G.dragStart[0]=x,G.dragStart[1]=_),G.boxEnd[0]=er,G.boxEnd[1]=en,G.boxInited=!0,G.boxEnabled||G.boxStart[0]===G.boxEnd[0]&&G.boxStart[1]===G.boxEnd[1]||(G.boxEnabled=!0);var ei=Math.abs(G.dragStart[0]-x)<et,eo=Math.abs(G.dragStart[1]-_)<et;if(function(){for(var o=i.graphDiv._fullLayout._axisConstraintGroups,s=i.xaxis._id,x=i.yaxis._id,_=0;_<o.length;_++)if(-1!==o[_][s]){if(-1!==o[_][x])return!0;break}return!1}()&&!(ei&&eo)){F=G.boxEnd[0]-G.boxStart[0],j=G.boxEnd[1]-G.boxStart[1];var es=(Z[3]-Z[1])/(Z[2]-Z[0]);Math.abs(F*es)>Math.abs(j)?(G.boxEnd[1]=G.boxStart[1]+Math.abs(F)*es*(j>=0?1:-1),G.boxEnd[1]<Z[1]?(G.boxEnd[1]=Z[1],G.boxEnd[0]=G.boxStart[0]+(Z[1]-G.boxStart[1])/Math.abs(es)):G.boxEnd[1]>Z[3]&&(G.boxEnd[1]=Z[3],G.boxEnd[0]=G.boxStart[0]+(Z[3]-G.boxStart[1])/Math.abs(es))):(G.boxEnd[0]=G.boxStart[0]+Math.abs(j)/es*(F>=0?1:-1),G.boxEnd[0]<Z[0]?(G.boxEnd[0]=Z[0],G.boxEnd[1]=G.boxStart[1]+(Z[0]-G.boxStart[0])*Math.abs(es)):G.boxEnd[0]>Z[2]&&(G.boxEnd[0]=Z[2],G.boxEnd[1]=G.boxStart[1]+(Z[2]-G.boxStart[0])*Math.abs(es)))}else ei&&(G.boxEnd[0]=G.boxStart[0]),eo&&(G.boxEnd[1]=G.boxStart[1])}else G.boxEnabled?(F=G.boxStart[0]!==G.boxEnd[0],j=G.boxStart[1]!==G.boxEnd[1],F||j?(F&&(updateRange(0,G.boxStart[0],G.boxEnd[0]),i.xaxis.autorange=!1),j&&(updateRange(1,G.boxStart[1],G.boxEnd[1]),i.yaxis.autorange=!1),i.relayoutCallback()):i.glplot.setDirty(),G.boxEnabled=!1,G.boxInited=!1):G.boxInited&&(G.boxInited=!1);break;case"pan":G.boxEnabled=!1,G.boxInited=!1,o?(G.panning||(G.dragStart[0]=x,G.dragStart[1]=_),Math.abs(G.dragStart[0]-x)<ee&&(x=G.dragStart[0]),Math.abs(G.dragStart[1]-_)<ee&&(_=G.dragStart[1]),F=(J-x)*(Z[2]-Z[0])/(s.viewBox[2]-s.viewBox[0]),j=($-_)*(Z[3]-Z[1])/(s.viewBox[3]-s.viewBox[1]),Z[0]+=F,Z[2]+=F,Z[1]+=j,Z[3]+=j,i.setRanges(Z),G.panning=!0,G.lastInputTime=Date.now(),unSetAutoRange(),i.cameraChanged(),i.handleAnnotations()):G.panning&&(G.panning=!1,i.relayoutCallback())}G.lastPos[0]=x,G.lastPos[1]=_}return G.mouseListener=x(o,handleInteraction),o.addEventListener("touchstart",function(i){var s=F(i.changedTouches[0],o);handleInteraction(0,s[0],s[1]),handleInteraction(1,s[0],s[1]),i.preventDefault()},!!j&&{passive:!1}),o.addEventListener("touchmove",function(i){i.preventDefault();var s=F(i.changedTouches[0],o);handleInteraction(1,s[0],s[1]),i.preventDefault()},!!j&&{passive:!1}),o.addEventListener("touchend",function(i){handleInteraction(0,G.lastPos[0],G.lastPos[1]),i.preventDefault()},!!j&&{passive:!1}),G.wheelListener=_(o,function(o,x){if(!i.scrollZoom)return!1;var _=i.calcDataBox(),F=s.viewBox,N=G.lastPos[0],j=G.lastPos[1],Z=Math.exp(5*x/(F[3]-F[1])),X=N/(F[2]-F[0])*(_[2]-_[0])+_[0],J=j/(F[3]-F[1])*(_[3]-_[1])+_[1];return _[0]=(_[0]-X)*Z+X,_[2]=(_[2]-X)*Z+X,_[1]=(_[1]-J)*Z+J,_[3]=(_[3]-J)*Z+J,i.setRanges(_),G.lastInputTime=Date.now(),unSetAutoRange(),i.cameraChanged(),i.handleAnnotations(),i.relayoutCallback(),!0},!0),G}},82961:function(i,o,s){"use strict";var x=s(89298),_=s(78614);function Axes2DOptions(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var F=Axes2DOptions.prototype,N=["xaxis","yaxis"];F.merge=function(i){for($=0,this.titleEnable=!1,this.backgroundColor=_(i.plot_bgcolor);$<2;++$){var o,s,x,F,j,G,Z,X,J,$,ee,et=(o=N[$]).charAt(0);for(ee=0,x=(s=i[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[et]?"":s.title.text;ee<=2;ee+=2)this.labelEnable[$+ee]=!1,this.labels[$+ee]=x,this.labelColor[$+ee]=_(s.title.font.color),this.labelFont[$+ee]=s.title.font.family,this.labelSize[$+ee]=s.title.font.size,this.labelPad[$+ee]=this.getLabelPad(o,s),this.tickEnable[$+ee]=!1,this.tickColor[$+ee]=_((s.tickfont||{}).color),this.tickAngle[$+ee]="auto"===s.tickangle?0:-(Math.PI*s.tickangle)/180,this.tickPad[$+ee]=this.getTickPad(s),this.tickMarkLength[$+ee]=0,this.tickMarkWidth[$+ee]=s.tickwidth||0,this.tickMarkColor[$+ee]=_(s.tickcolor),this.borderLineEnable[$+ee]=!1,this.borderLineColor[$+ee]=_(s.linecolor),this.borderLineWidth[$+ee]=s.linewidth||0;Z=this.hasSharedAxis(s),j=this.hasAxisInDfltPos(o,s)&&!Z,G=this.hasAxisInAltrPos(o,s)&&!Z,F=s.mirror||!1,X=Z?-1!==String(F).indexOf("all"):!!F,J=Z?"allticks"===F:-1!==String(F).indexOf("ticks"),j?this.labelEnable[$]=!0:G&&(this.labelEnable[$+2]=!0),j?this.tickEnable[$]=s.showticklabels:G&&(this.tickEnable[$+2]=s.showticklabels),(j||X)&&(this.borderLineEnable[$]=s.showline),(G||X)&&(this.borderLineEnable[$+2]=s.showline),(j||J)&&(this.tickMarkLength[$]=this.getTickMarkLength(s)),(G||J)&&(this.tickMarkLength[$+2]=this.getTickMarkLength(s)),this.gridLineEnable[$]=s.showgrid,this.gridLineColor[$]=_(s.gridcolor),this.gridLineWidth[$]=s.gridwidth,this.zeroLineEnable[$]=s.zeroline,this.zeroLineColor[$]=_(s.zerolinecolor),this.zeroLineWidth[$]=s.zerolinewidth}},F.hasSharedAxis=function(i){var o=this.scene,s=o.fullLayout._subplots.gl2d;return 0!==x.findSubplotsWithAxis(s,i).indexOf(o.id)},F.hasAxisInDfltPos=function(i,o){var s=o.side;return"xaxis"===i?"bottom"===s:"yaxis"===i?"left"===s:void 0},F.hasAxisInAltrPos=function(i,o){var s=o.side;return"xaxis"===i?"top"===s:"yaxis"===i?"right"===s:void 0},F.getLabelPad=function(i,o){var s=o.title.font.size,x=o.showticklabels;return"xaxis"===i?"top"===o.side?-10+s*(1.5+(x?1:0)):-10+s*(1.5+(x?.5:0)):"yaxis"===i?"right"===o.side?10+s*(1.5+(x?1:.5)):10+s*(1.5+(x?.5:0)):void 0},F.getTickPad=function(i){return"outside"===i.ticks?10+i.ticklen:15},F.getTickMarkLength=function(i){if(!i.ticks)return 0;var o=i.ticklen;return"inside"===i.ticks?-o:o},i.exports=function(i){return new Axes2DOptions(i)}},4796:function(i,o,s){"use strict";var x=s(30962).overrideAll,_=s(92918),F=s(10820),N=s(77922),j=s(85555),G=s(93612),Z=s(528),X=s(27659).NG;o.name="gl2d",o.attr=["xaxis","yaxis"],o.idRoot=["x","y"],o.idRegex=j.idRegex,o.attrRegex=j.attrRegex,o.attributes=s(89502),o.supplyLayoutDefaults=function(i,o,s){o._has("cartesian")||G.supplyLayoutDefaults(i,o,s)},o.layoutAttrOverrides=x(G.layoutAttributes,"plot","from-root"),o.baseLayoutAttrOverrides=x({plot_bgcolor:F.plot_bgcolor,hoverlabel:Z.hoverlabel},"plot","nested"),o.plot=function(i){for(var o=i._fullLayout,s=i._fullData,x=o._subplots.gl2d,F=0;F<x.length;F++){var N=x[F],j=o._plots[N],G=X(s,"gl2d",N),Z=j._scene2d;void 0===Z&&(Z=new _({id:N,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},o),j._scene2d=Z),Z.plot(G,i.calcdata,o,i.layout)}},o.clean=function(i,o,s,x){for(var _=x._subplots.gl2d||[],F=0;F<_.length;F++){var N=_[F],j=x._plots[N];j._scene2d&&0===X(i,"gl2d",N).length&&(j._scene2d.destroy(),delete x._plots[N])}G.clean.apply(this,arguments)},o.drawFramework=function(i){i._context.staticPlot||G.drawFramework(i)},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots.gl2d,x=0;x<s.length;x++){var _=o._plots[s[x]]._scene2d,F=_.toImage("png");o._glimages.append("svg:image").attr({xmlns:N.svg,"xlink:href":F,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),_.destroy()}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots.gl2d,x=0;x<s.length;x++)o._plots[s[x]]._scene2d.updateFx(o.dragmode)}},92918:function(i,o,s){"use strict";var x,_,F=s(73972),N=s(89298),j=s(30211),G=s(9330).gl_plot2d,Z=s(9330).gl_spikes2d,X=s(9330).gl_select_box,J=s(40372),$=s(82961),ee=s(75071),et=s(58617),er=s(99082),en=er.enforce,ei=er.clean,eo=s(71739).doAutoRange,es=s(64505),el=es.drawMode,ec=es.selectMode,eu=["xaxis","yaxis"],ef=s(85555).SUBPLOT_PATTERN;function Scene2D(i,o){this.container=i.container,this.graphDiv=i.graphDiv,this.pixelRatio=i.plotGlPixelRatio||window.devicePixelRatio,this.id=i.id,this.staticPlot=!!i.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(o),this.makeFramework(),this.stopped||(this.glplotOptions=$(this),this.glplotOptions.merge(o),this.glplot=G(this.glplotOptions),this.camera=ee(this),this.traces={},this.spikes=Z(this.glplot),this.selectBox=X(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}i.exports=Scene2D;var eh=Scene2D.prototype;eh.makeFramework=function(){if(this.staticPlot){if(!_&&!(_=J({canvas:x=document.createElement("canvas"),preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0})))throw Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=_}else{var i=this.container.querySelector(".gl-canvas-focus"),o=J({canvas:i,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!o){et(this),this.stopped=!0;return}this.canvas=i,this.gl=o}var s=this.canvas;s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style["pointer-events"]="none",this.updateSize(s);var F=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none";var N=this.mouseContainer=document.createElement("div");N.style.position="absolute",N.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var j=this.container;j.appendChild(F),j.appendChild(N);var G=this;N.addEventListener("mouseout",function(){G.isMouseOver=!1,G.unhover()}),N.addEventListener("mouseover",function(){G.isMouseOver=!0})},eh.toImage=function(i){i||(i="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var o,s=this.glplot.gl,_=s.drawingBufferWidth,F=s.drawingBufferHeight;s.clearColor(1,1,1,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),s.bindFramebuffer(s.FRAMEBUFFER,null);var N=new Uint8Array(_*F*4);s.readPixels(0,0,_,F,s.RGBA,s.UNSIGNED_BYTE,N);for(var j=0,G=F-1;j<G;++j,--G)for(var Z=0;Z<_;++Z)for(var X=0;X<4;++X){var J=N[4*(_*j+Z)+X];N[4*(_*j+Z)+X]=N[4*(_*G+Z)+X],N[4*(_*G+Z)+X]=J}var $=document.createElement("canvas");$.width=_,$.height=F;var ee=$.getContext("2d",{willReadFrequently:!0}),et=ee.createImageData(_,F);switch(et.data.set(N),ee.putImageData(et,0,0),i){case"jpeg":o=$.toDataURL("image/jpeg");break;case"webp":o=$.toDataURL("image/webp");break;default:o=$.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),o},eh.updateSize=function(i){i||(i=this.canvas);var o=this.pixelRatio,s=this.fullLayout,x=s.width,_=s.height,F=0|Math.ceil(o*x),N=0|Math.ceil(o*_);return(i.width!==F||i.height!==N)&&(i.width=F,i.height=N),i},eh.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var i=[N.calcTicks(this.xaxis),N.calcTicks(this.yaxis)],o=0;o<2;++o)for(var s=0;s<i[o].length;++s)i[o][s].text=i[o][s].text+"";return i},eh.updateRefs=function(i){this.fullLayout=i;var o=this.id.match(ef),s="xaxis"+o[1],x="yaxis"+o[2];this.xaxis=this.fullLayout[s],this.yaxis=this.fullLayout[x]},eh.relayoutCallback=function(){var i=this.graphDiv,o=this.xaxis,s=this.yaxis,x=i.layout,_={},N=_[o._name+".range"]=o.range.slice(),j=_[s._name+".range"]=s.range.slice();_[o._name+".autorange"]=o.autorange,_[s._name+".autorange"]=s.autorange,F.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,_);var G=x[o._name];G.range=N,G.autorange=o.autorange;var Z=x[s._name];Z.range=j,Z.autorange=s.autorange,_.lastInputTime=this.camera.lastInputTime,i.emit("plotly_relayout",_)},eh.cameraChanged=function(){var i=this.camera;this.glplot.setDataBox(this.calcDataBox());var o=this.computeTickMarks();(function(i,o){for(var s=0;s<2;++s){var x=i[s],_=o[s];if(x.length!==_.length)return!0;for(var F=0;F<x.length;++F)if(x[F].x!==_[F].x)return!0}return!1})(o,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=o,this.glplotOptions.dataBox=i.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},eh.handleAnnotations=function(){for(var i=this.graphDiv,o=this.fullLayout.annotations,s=0;s<o.length;s++){var x=o[s];x.xref===this.xaxis._id&&x.yref===this.yaxis._id&&F.getComponentMethod("annotations","drawOne")(i,s)}},eh.destroy=function(){if(this.glplot){var i=this.traces;i&&Object.keys(i).map(function(o){i[o].dispose(),delete i[o]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},eh.plot=function(i,o,s){var x,_,F=this.glplot;this.updateRefs(s),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(i,o),this.updateFx(s.dragmode);var N=s.width,j=s.height;this.updateSize(this.canvas);var G=this.glplotOptions;G.merge(s),G.screenBox=[0,0,N,j];var Z={_fullLayout:{_axisConstraintGroups:s._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:s._size}};ei(Z,this.xaxis),ei(Z,this.yaxis);var X=s._size,J=this.xaxis.domain,$=this.yaxis.domain;for(_=0,G.viewBox=[X.l+J[0]*X.w,X.b+$[0]*X.h,N-X.r-(1-J[1])*X.w,j-X.t-(1-$[1])*X.h],this.mouseContainer.style.width=X.w*(J[1]-J[0])+"px",this.mouseContainer.style.height=X.h*($[1]-$[0])+"px",this.mouseContainer.height=X.h*($[1]-$[0]),this.mouseContainer.style.left=X.l+J[0]*X.w+"px",this.mouseContainer.style.top=X.t+(1-$[1])*X.h+"px";_<2;++_)(x=this[eu[_]])._length=G.viewBox[_+2]-G.viewBox[_],eo(this.graphDiv,x),x.setScale();en(Z),G.ticks=this.computeTickMarks(),G.dataBox=this.calcDataBox(),G.merge(s),F.update(G),this.glplot.draw()},eh.calcDataBox=function(){var i=this.xaxis,o=this.yaxis,s=i.range,x=o.range,_=i.r2l,F=o.r2l;return[_(s[0]),F(x[0]),_(s[1]),F(x[1])]},eh.setRanges=function(i){var o=this.xaxis,s=this.yaxis,x=o.l2r,_=s.l2r;o.range=[x(i[0]),x(i[2])],s.range=[_(i[1]),_(i[3])]},eh.updateTraces=function(i,o){var s,x,_,F=Object.keys(this.traces);this.fullData=i;e:for(s=0;s<F.length;s++){var N=F[s],j=this.traces[N];for(x=0;x<i.length;x++)if((_=i[x]).uid===N&&_.type===j.type)continue e;j.dispose(),delete this.traces[N]}for(s=0;s<i.length;s++){_=i[s];var G=o[s],Z=this.traces[_.uid];Z?Z.update(_,G):(Z=_._module.plot(this,_,G),this.traces[_.uid]=Z)}this.glplot.objects.sort(function(i,o){return i._trace.index-o._trace.index})},eh.updateFx=function(i){ec(i)||el(i)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),"pan"===i?this.mouseContainer.style.cursor="move":"zoom"===i?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},eh.emitPointAction=function(i,o){for(var s,x=i.trace.uid,_=i.pointIndex,F=0;F<this.fullData.length;F++)this.fullData[F].uid===x&&(s=this.fullData[F]);var N={x:i.traceCoord[0],y:i.traceCoord[1],curveNumber:s.index,pointNumber:_,data:s._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};j.appendArrayPointValue(N,s,_),this.graphDiv.emit(o,{points:[N]})},eh.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var i,o=this.glplot,s=this.camera,x=s.mouseListener,_=1===this.lastButtonState&&0===x.buttons,F=this.fullLayout;this.lastButtonState=x.buttons,this.cameraChanged();var N=x.x*o.pixelRatio,G=this.canvas.height-o.pixelRatio*x.y;if(s.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;for(var Z=this.selectBox.selectBox=[Math.min(s.boxStart[0],s.boxEnd[0]),Math.min(s.boxStart[1],s.boxEnd[1]),Math.max(s.boxStart[0],s.boxEnd[0]),Math.max(s.boxStart[1],s.boxEnd[1])],X=0;X<2;X++)s.boxStart[X]===s.boxEnd[X]&&(Z[X]=o.dataBox[X],Z[X+2]=o.dataBox[X+2]);o.setDirty()}else if(!s.panning&&this.isMouseOver){this.selectBox.enabled=!1;var J=F._size,$=this.xaxis.domain,ee=this.yaxis.domain,et=(i=o.pick(N/o.pixelRatio+J.l+$[0]*J.w,G/o.pixelRatio-(J.t+(1-ee[1])*J.h)))&&i.object._trace.handlePick(i);if(et&&_&&this.emitPointAction(et,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&F.hovermode&&et&&(!this.lastPickResult||this.lastPickResult.traceUid!==et.trace.uid||this.lastPickResult.dataCoord[0]!==et.dataCoord[0]||this.lastPickResult.dataCoord[1]!==et.dataCoord[1])){this.lastPickResult={traceUid:et.trace?et.trace.uid:null,dataCoord:et.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),et.screenCoord=[((o.viewBox[2]-o.viewBox[0])*(i.dataCoord[0]-o.dataBox[0])/(o.dataBox[2]-o.dataBox[0])+o.viewBox[0])/o.pixelRatio,(this.canvas.height-(o.viewBox[3]-o.viewBox[1])*(i.dataCoord[1]-o.dataBox[1])/(o.dataBox[3]-o.dataBox[1])-o.viewBox[1])/o.pixelRatio],this.emitPointAction(et,"plotly_hover");var er=this.fullData[et.trace.index]||{},en=et.pointIndex,ei=j.castHoverinfo(er,F,en);if(ei&&"all"!==ei){var eo=ei.split("+");-1===eo.indexOf("x")&&(et.traceCoord[0]=void 0),-1===eo.indexOf("y")&&(et.traceCoord[1]=void 0),-1===eo.indexOf("z")&&(et.traceCoord[2]=void 0),-1===eo.indexOf("text")&&(et.textLabel=void 0),-1===eo.indexOf("name")&&(et.name=void 0)}j.loneHover({x:et.screenCoord[0],y:et.screenCoord[1],xLabel:this.hoverFormatter("xaxis",et.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",et.traceCoord[1]),zLabel:et.traceCoord[2],text:et.textLabel,name:et.name,color:j.castHoverOption(er,en,"bgcolor")||et.color,borderColor:j.castHoverOption(er,en,"bordercolor"),fontFamily:j.castHoverOption(er,en,"font.family"),fontSize:j.castHoverOption(er,en,"font.size"),fontColor:j.castHoverOption(er,en,"font.color"),nameLength:j.castHoverOption(er,en,"namelength"),textAlign:j.castHoverOption(er,en,"align")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),o.draw()}},eh.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),j.loneUnhover(this.svgContainer))},eh.hoverFormatter=function(i,o){if(void 0!==o){var s=this[i];return N.tickText(s,s.c2l(o),"hover").text}}},58547:function(i,o,s){"use strict";var x=s(30962).overrideAll,_=s(528),F=s(33539),N=s(27659).NG,j=s(71828),G=s(77922),Z="gl3d",X="scene";o.name=Z,o.attr=X,o.idRoot=X,o.idRegex=o.attrRegex=j.counterRegex("scene"),o.attributes=s(59084),o.layoutAttributes=s(65500),o.baseLayoutAttrOverrides=x({hoverlabel:_.hoverlabel},"plot","nested"),o.supplyLayoutDefaults=s(24682),o.plot=function(i){for(var o=i._fullLayout,s=i._fullData,x=o._subplots[Z],_=0;_<x.length;_++){var j=x[_],G=N(s,Z,j),X=o[j],J=X.camera,$=X._scene;$||($=new F({id:j,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:J},o),X._scene=$),$.viewInitial||($.viewInitial={up:{x:J.up.x,y:J.up.y,z:J.up.z},eye:{x:J.eye.x,y:J.eye.y,z:J.eye.z},center:{x:J.center.x,y:J.center.y,z:J.center.z}}),$.plot(G,o,i.layout)}},o.clean=function(i,o,s,x){for(var _=x._subplots[Z]||[],F=0;F<_.length;F++){var N=_[F];!o[N]&&x[N]._scene&&(x[N]._scene.destroy(),x._infolayer&&x._infolayer.selectAll(".annotation-"+N).remove())}},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots[Z],x=o._size,_=0;_<s.length;_++){var F=o[s[_]],N=F.domain,j=F._scene,X=j.toImage("png");o._glimages.append("svg:image").attr({xmlns:G.svg,"xlink:href":X,x:x.l+x.w*N.x[0],y:x.t+x.h*(1-N.y[1]),width:x.w*(N.x[1]-N.x[0]),height:x.h*(N.y[1]-N.y[0]),preserveAspectRatio:"none"}),j.destroy()}},o.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var o=i.substr(5);return"1"===o&&(o=""),X+o}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots[Z],x=0;x<s.length;x++)o[s[x]]._scene.updateFx(o.dragmode,o.hovermode)}},59084:function(i){"use strict";i.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(i,o,s){"use strict";var x=s(7901),_=s(13838),F=s(1426).extendFlat,N=s(30962).overrideAll;i.exports=N({visible:_.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:x.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:_.color,categoryorder:_.categoryorder,categoryarray:_.categoryarray,title:{text:_.title.text,font:_.title.font},type:F({},_.type,{values:["-","linear","log","date","category"]}),autotypenumbers:_.autotypenumbers,autorange:_.autorange,autorangeoptions:{minallowed:_.autorangeoptions.minallowed,maxallowed:_.autorangeoptions.maxallowed,clipmin:_.autorangeoptions.clipmin,clipmax:_.autorangeoptions.clipmax,include:_.autorangeoptions.include,editType:"plot"},rangemode:_.rangemode,minallowed:_.minallowed,maxallowed:_.maxallowed,range:F({},_.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:_.minor.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:_.ticks,mirror:_.mirror,ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,showticklabels:_.showticklabels,labelalias:_.labelalias,tickfont:_.tickfont,tickangle:_.tickangle,tickprefix:_.tickprefix,showtickprefix:_.showtickprefix,ticksuffix:_.ticksuffix,showticksuffix:_.showticksuffix,showexponent:_.showexponent,exponentformat:_.exponentformat,minexponent:_.minexponent,separatethousands:_.separatethousands,tickformat:_.tickformat,tickformatstops:_.tickformatstops,hoverformat:_.hoverformat,showline:_.showline,linecolor:_.linecolor,linewidth:_.linewidth,showgrid:_.showgrid,gridcolor:F({},_.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:_.gridwidth,zeroline:_.zeroline,zerolinecolor:_.zerolinecolor,zerolinewidth:_.zerolinewidth,_deprecated:{title:_._deprecated.title,titlefont:_._deprecated.titlefont}},"plot","from-root")},3277:function(i,o,s){"use strict";var x=s(84267).mix,_=s(71828),F=s(44467),N=s(77894),j=s(951),G=s(71453),Z=["xaxis","yaxis","zaxis"];i.exports=function(i,o,s){var X,J;function coerce(i,o){return _.coerce(X,J,N,i,o)}for(var $=0;$<Z.length;$++){var ee=Z[$];X=i[ee]||{},(J=F.newContainer(o,ee))._id=ee[0]+s.scene,J._name=ee,j(X,J,coerce,s),G(X,J,coerce,{font:s.font,letter:ee[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),coerce("gridcolor",x(J.color,s.bgColor,72.72727272727273).toRgbString()),coerce("title.text",ee[0]),J.setScale=_.noop,coerce("showspikes")&&(coerce("spikesides"),coerce("spikethickness"),coerce("spikecolor",J.color)),coerce("showaxeslabels"),coerce("showbackground")&&coerce("backgroundcolor")}}},30422:function(i,o,s){"use strict";var x=s(78614),_=s(71828),F=["xaxis","yaxis","zaxis"];function AxesOptions(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}AxesOptions.prototype.merge=function(i,o){for(var s=0;s<3;++s){var N=o[F[s]];if(!N.visible){this.tickEnable[s]=!1,this.labelEnable[s]=!1,this.lineEnable[s]=!1,this.lineTickEnable[s]=!1,this.gridEnable[s]=!1,this.zeroEnable[s]=!1,this.backgroundEnable[s]=!1;continue}this.labels[s]=i._meta?_.templateString(N.title.text,i._meta):N.title.text,"font"in N.title&&(N.title.font.color&&(this.labelColor[s]=x(N.title.font.color)),N.title.font.family&&(this.labelFont[s]=N.title.font.family),N.title.font.size&&(this.labelSize[s]=N.title.font.size)),"showline"in N&&(this.lineEnable[s]=N.showline),"linecolor"in N&&(this.lineColor[s]=x(N.linecolor)),"linewidth"in N&&(this.lineWidth[s]=N.linewidth),"showgrid"in N&&(this.gridEnable[s]=N.showgrid),"gridcolor"in N&&(this.gridColor[s]=x(N.gridcolor)),"gridwidth"in N&&(this.gridWidth[s]=N.gridwidth),"log"===N.type?this.zeroEnable[s]=!1:"zeroline"in N&&(this.zeroEnable[s]=N.zeroline),"zerolinecolor"in N&&(this.zeroLineColor[s]=x(N.zerolinecolor)),"zerolinewidth"in N&&(this.zeroLineWidth[s]=N.zerolinewidth),"ticks"in N&&N.ticks?this.lineTickEnable[s]=!0:this.lineTickEnable[s]=!1,"ticklen"in N&&(this.lineTickLength[s]=this._defaultLineTickLength[s]=N.ticklen),"tickcolor"in N&&(this.lineTickColor[s]=x(N.tickcolor)),"tickwidth"in N&&(this.lineTickWidth[s]=N.tickwidth),"tickangle"in N&&(this.tickAngle[s]="auto"===N.tickangle?-3600:-(Math.PI*N.tickangle)/180),"showticklabels"in N&&(this.tickEnable[s]=N.showticklabels),"tickfont"in N&&(N.tickfont.color&&(this.tickColor[s]=x(N.tickfont.color)),N.tickfont.family&&(this.tickFont[s]=N.tickfont.family),N.tickfont.size&&(this.tickSize[s]=N.tickfont.size)),"mirror"in N?-1!==["ticks","all","allticks"].indexOf(N.mirror)?(this.lineTickMirror[s]=!0,this.lineMirror[s]=!0):!0===N.mirror?(this.lineTickMirror[s]=!1,this.lineMirror[s]=!0):(this.lineTickMirror[s]=!1,this.lineMirror[s]=!1):this.lineMirror[s]=!1,"showbackground"in N&&!1!==N.showbackground?(this.backgroundEnable[s]=!0,this.backgroundColor[s]=x(N.backgroundcolor)):this.backgroundEnable[s]=!1}},i.exports=function(i,o){var s=new AxesOptions;return s.merge(i,o),s}},24682:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(73972),N=s(49119),j=s(3277),G=s(65500),Z=s(27659).NG,X="gl3d";function handleGl3dDefaults(i,o,s,x){for(var N=s("bgcolor"),G=_.combine(N,x.paper_bgcolor),J=["up","center","eye"],$=0;$<J.length;$++)s("camera."+J[$]+".x"),s("camera."+J[$]+".y"),s("camera."+J[$]+".z");s("camera.projection.type");var ee=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),et=s("aspectmode",ee?"manual":"auto");ee||(i.aspectratio=o.aspectratio={x:1,y:1,z:1},"manual"===et&&(o.aspectmode="auto"),i.aspectmode=o.aspectmode);var er=Z(x.fullData,X,x.id);j(i,o,{font:x.font,scene:x.id,data:er,bgColor:G,calendar:x.calendar,autotypenumbersDflt:x.autotypenumbersDflt,fullLayout:x.fullLayout}),F.getComponentMethod("annotations3d","handleDefaults")(i,o,x);var en=x.getDfltFromLayout("dragmode");if(!1!==en&&!en){if(en="orbit",i.camera&&i.camera.up){var ei=i.camera.up.x,eo=i.camera.up.y,es=i.camera.up.z;0!==es&&(ei&&eo&&es?es/Math.sqrt(ei*ei+eo*eo+es*es)>.999&&(en="turntable"):en="turntable")}else en="turntable"}s("dragmode",en),s("hovermode",x.getDfltFromLayout("hovermode"))}i.exports=function(i,o,s){var _=o._basePlotModules.length>1;N(i,o,s,{type:X,attributes:G,handleDefaults:handleGl3dDefaults,fullLayout:o,font:o.font,fullData:s,getDfltFromLayout:function(o){if(!_&&x.validate(i[o],G[o]))return i[o]},autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})}},65500:function(i,o,s){"use strict";var x=s(77894),_=s(27670).Y,F=s(1426).extendFlat,N=s(71828).counterRegex;function makeCameraVector(i,o,s){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:s,editType:"camera"},editType:"camera"}}i.exports={_arrayAttrRegexps:[N("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:F(makeCameraVector(0,0,1),{}),center:F(makeCameraVector(0,0,0),{}),eye:F(makeCameraVector(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:_({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:x,yaxis:x,zaxis:x,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(i,o,s){"use strict";var x=s(78614),_=["xaxis","yaxis","zaxis"];function SpikeOptions(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}SpikeOptions.prototype.merge=function(i){for(var o=0;o<3;++o){var s=i[_[o]];if(!s.visible){this.enabled[o]=!1,this.drawSides[o]=!1;continue}this.enabled[o]=s.showspikes,this.colors[o]=x(s.spikecolor),this.drawSides[o]=s.spikesides,this.lineWidth[o]=s.spikethickness}},i.exports=function(i){var o=new SpikeOptions;return o.merge(i),o}},96085:function(i,o,s){"use strict";i.exports=function(i){for(var o=i.axesOptions,s=i.glplot.axesPixels,j=i.fullSceneLayout,G=[[],[],[]],Z=0;Z<3;++Z){var X=j[F[Z]];if(X._length=(s[Z].hi-s[Z].lo)*s[Z].pixelsPerDataUnit/i.dataScale[Z],Math.abs(X._length)===1/0||isNaN(X._length))G[Z]=[];else{X._input_range=X.range.slice(),X.range[0]=s[Z].lo/i.dataScale[Z],X.range[1]=s[Z].hi/i.dataScale[Z],X._m=1/(i.dataScale[Z]*s[Z].pixelsPerDataUnit),X.range[0]===X.range[1]&&(X.range[0]-=1,X.range[1]+=1);var J=X.tickmode;if("auto"===X.tickmode){X.tickmode="linear";var $=X.nticks||_.constrain(X._length/40,4,9);x.autoTicks(X,Math.abs(X.range[1]-X.range[0])/$)}for(var ee=x.calcTicks(X,{msUTC:!0}),et=0;et<ee.length;++et)ee[et].x=ee[et].x*i.dataScale[Z],"date"===X.type&&(ee[et].text=ee[et].text.replace(/\<br\>/g," "));G[Z]=ee,X.tickmode=J}}o.ticks=G;for(var Z=0;Z<3;++Z){N[Z]=.5*(i.glplot.bounds[0][Z]+i.glplot.bounds[1][Z]);for(var et=0;et<2;++et)o.bounds[et][Z]=i.glplot.bounds[et][Z]}i.contourLevels=function(i){for(var o=[,,,],s=0;s<3;++s){for(var x=i[s],_=Array(x.length),F=0;F<x.length;++F)_[F]=x[F].x;o[s]=_}return o}(G)};var x=s(89298),_=s(71828),F=["xaxis","yaxis","zaxis"],N=[0,0,0]},63538:function(i){"use strict";function xformMatrix(i,o){var s,x,_=[0,0,0,0];for(s=0;s<4;++s)for(x=0;x<4;++x)_[x]+=i[4*s+x]*o[s];return _}i.exports=function(i,o){return xformMatrix(i.projection,xformMatrix(i.view,xformMatrix(i.model,[o[0],o[1],o[2],1])))}},33539:function(i,o,s){"use strict";var x,_,F=s(9330).gl_plot3d,N=F.createCamera,j=F.createScene,G=s(40372),Z=s(38520),X=s(73972),J=s(71828),$=J.preserveDrawingBuffer(),ee=s(89298),et=s(30211),er=s(78614),en=s(58617),ei=s(63538),eo=s(30422),es=s(13133),el=s(96085),ec=s(71739).applyAutorangeOptions,eu=!1;function Scene(i,o){var s=document.createElement("div"),x=i.container;this.graphDiv=i.graphDiv;var _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.style.position="absolute",_.style.top=_.style.left="0px",_.style.width=_.style.height="100%",_.style["z-index"]=20,_.style["pointer-events"]="none",s.appendChild(_),this.svgContainer=_,s.id=i.id,s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",x.appendChild(s),this.fullLayout=o,this.id=i.id||"scene",this.fullSceneLayout=o[this.id],this.plotArgs=[[],{},{}],this.axesOptions=eo(o,o[this.id]),this.spikeOptions=es(o[this.id]),this.container=s,this.staticMode=!!i.staticPlot,this.pixelRatio=this.pixelRatio||i.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=X.getComponentMethod("annotations3d","convert"),this.drawAnnotations=X.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var ef=Scene.prototype;ef.prepareOptions=function(){var i={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:$,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!_&&!(_=G({canvas:x=document.createElement("canvas"),preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})))throw Error("error creating static canvas/context for image server");i.gl=_,i.canvas=x}return i};var eh=!0;ef.tryCreatePlot=function(){var i=this.prepareOptions(),o=!0;try{this.glplot=j(i)}catch(s){if(this.staticMode||!eh||$)o=!1;else{J.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");try{$=i.glOptions.preserveDrawingBuffer=!0,this.glplot=j(i)}catch(s){$=i.glOptions.preserveDrawingBuffer=!1,o=!1}}}return eh=!1,o},ef.initializeGLCamera=function(){var i=this.fullSceneLayout.camera,o="orthographic"===i.projection.type;this.camera=N(this.container,{center:[i.center.x,i.center.y,i.center.z],eye:[i.eye.x,i.eye.y,i.eye.z],up:[i.up.x,i.up.y,i.up.z],_ortho:o,zoomMin:.01,zoomMax:100,mode:"orbit"})},ef.initializeGLPlot=function(){var i=this;if(i.initializeGLCamera(),!i.tryCreatePlot())return en(i);i.traces={},i.make4thDimension();var o=i.graphDiv,s=o.layout,makeUpdate=function(){var o={};return i.isCameraChanged(s)&&(o[i.id+".camera"]=i.getCamera()),i.isAspectChanged(s)&&(o[i.id+".aspectratio"]=i.glplot.getAspectratio(),"manual"!==s[i.id].aspectmode&&(i.fullSceneLayout.aspectmode=s[i.id].aspectmode=o[i.id+".aspectmode"]="manual")),o},relayoutCallback=function(i){if(!1!==i.fullSceneLayout.dragmode){var o=makeUpdate();i.saveLayout(s),i.graphDiv.emit("plotly_relayout",o)}};return i.glplot.canvas&&(i.glplot.canvas.addEventListener("mouseup",function(){relayoutCallback(i)}),i.glplot.canvas.addEventListener("touchstart",function(){eu=!0}),i.glplot.canvas.addEventListener("wheel",function(s){if(o._context._scrollZoom.gl3d){if(i.camera._ortho){var x=s.deltaX>s.deltaY?1.1:1/1.1,_=i.glplot.getAspectratio();i.glplot.setAspectratio({x:x*_.x,y:x*_.y,z:x*_.z})}relayoutCallback(i)}},!!Z&&{passive:!1}),i.glplot.canvas.addEventListener("mousemove",function(){if(!1!==i.fullSceneLayout.dragmode&&0!==i.camera.mouseListener.buttons){var o=makeUpdate();i.graphDiv.emit("plotly_relayouting",o)}}),i.staticMode||i.glplot.canvas.addEventListener("webglcontextlost",function(s){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:s,layer:i.id})},!1)),i.glplot.oncontextloss=function(){i.recoverContext()},i.glplot.onrender=function(){i.render()},!0},ef.render=function(){var i=this,o=i.graphDiv,s=i.svgContainer,x=i.container.getBoundingClientRect();o._fullLayout._calcInverseTransform(o);var _=o._fullLayout._invScaleX,F=o._fullLayout._invScaleY,N=x.width*_,j=x.height*F;s.setAttributeNS(null,"viewBox","0 0 "+N+" "+j),s.setAttributeNS(null,"width",N),s.setAttributeNS(null,"height",j),el(i),i.glplot.axes.update(i.axesOptions);for(var G=Object.keys(i.traces),Z=null,X=i.glplot.selection,$=0;$<G.length;++$)"skip"!==(er=i.traces[G[$]]).data.hoverinfo&&er.handlePick(X)&&(Z=er),er.setContourLevels&&er.setContourLevels();function formatter(o,s,x){var _=i.fullSceneLayout[o+"axis"];return"log"!==_.type&&(s=_.d2l(s)),ee.hoverLabelText(_,s,x)}if(null!==Z){var er,en,eo=ei(i.glplot.cameraParams,X.dataCoordinate);er=Z.data;var es=o._fullData[er.index],ec=X.index,ef={xLabel:formatter("x",X.traceCoordinate[0],er.xhoverformat),yLabel:formatter("y",X.traceCoordinate[1],er.yhoverformat),zLabel:formatter("z",X.traceCoordinate[2],er.zhoverformat)},eh=et.castHoverinfo(es,i.fullLayout,ec),ed=(eh||"").split("+"),ep=eh&&"all"===eh;es.hovertemplate||ep||(-1===ed.indexOf("x")&&(ef.xLabel=void 0),-1===ed.indexOf("y")&&(ef.yLabel=void 0),-1===ed.indexOf("z")&&(ef.zLabel=void 0),-1===ed.indexOf("text")&&(X.textLabel=void 0),-1!==ed.indexOf("name")||(Z.name=void 0));var eg=[];"cone"===er.type||"streamtube"===er.type?(ef.uLabel=formatter("x",X.traceCoordinate[3],er.uhoverformat),(ep||-1!==ed.indexOf("u"))&&eg.push("u: "+ef.uLabel),ef.vLabel=formatter("y",X.traceCoordinate[4],er.vhoverformat),(ep||-1!==ed.indexOf("v"))&&eg.push("v: "+ef.vLabel),ef.wLabel=formatter("z",X.traceCoordinate[5],er.whoverformat),(ep||-1!==ed.indexOf("w"))&&eg.push("w: "+ef.wLabel),ef.normLabel=X.traceCoordinate[6].toPrecision(3),(ep||-1!==ed.indexOf("norm"))&&eg.push("norm: "+ef.normLabel),"streamtube"===er.type&&(ef.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(ep||-1!==ed.indexOf("divergence"))&&eg.push("divergence: "+ef.divergenceLabel)),X.textLabel&&eg.push(X.textLabel),en=eg.join("<br>")):"isosurface"===er.type||"volume"===er.type?(ef.valueLabel=ee.hoverLabelText(i._mockAxis,i._mockAxis.d2l(X.traceCoordinate[3]),er.valuehoverformat),eg.push("value: "+ef.valueLabel),X.textLabel&&eg.push(X.textLabel),en=eg.join("<br>")):en=X.textLabel;var em={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:es._input,fullData:es,curveNumber:es.index,pointNumber:ec};et.appendArrayPointValue(em,es,ec),er._module.eventData&&(em=es._module.eventData(em,X,es,{},ec));var ey={points:[em]};i.fullSceneLayout.hovermode&&(et.loneHover({trace:es,x:(.5+.5*eo[0]/eo[3])*N,y:(.5-.5*eo[1]/eo[3])*j,xLabel:ef.xLabel,yLabel:ef.yLabel,zLabel:ef.zLabel,text:en,name:Z.name,color:et.castHoverOption(es,ec,"bgcolor")||Z.color,borderColor:et.castHoverOption(es,ec,"bordercolor"),fontFamily:et.castHoverOption(es,ec,"font.family"),fontSize:et.castHoverOption(es,ec,"font.size"),fontColor:et.castHoverOption(es,ec,"font.color"),nameLength:et.castHoverOption(es,ec,"namelength"),textAlign:et.castHoverOption(es,ec,"align"),hovertemplate:J.castOption(es,ec,"hovertemplate"),hovertemplateLabels:J.extendFlat({},em,ef),eventData:[em]},{container:s,gd:o,inOut_bbox:[]}),em.bbox=[][0]),X.distance<5&&(X.buttons||eu)?o.emit("plotly_click",ey):o.emit("plotly_hover",ey),this.oldEventData=ey}else et.loneUnhover(s),this.oldEventData&&o.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;i.drawAnnotations(i)},ef.recoverContext=function(){var i=this;i.glplot.dispose();var tryRecover=function(){if(i.glplot.gl.isContextLost()){requestAnimationFrame(tryRecover);return}if(!i.initializeGLPlot()){J.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}i.plot.apply(i,i.plotArgs)};requestAnimationFrame(tryRecover)};var ed=["xaxis","yaxis","zaxis"];ef.plot=function(i,o,s){var x;if(this.plotArgs=[i,o,s],!this.glplot.contextLost){var _=o[this.id],F=s[this.id];this.fullLayout=o,this.fullSceneLayout=_,this.axesOptions.merge(o,_),this.spikeOptions.merge(_),this.setViewport(_),this.updateFx(_.dragmode,_.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(er(_.bgcolor)),this.setConvert(eo),i?Array.isArray(i)||(i=[i]):i=[];var N=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(en=0;en<i.length;++en)!0===(ee=i[en]).visible&&0!==ee._length&&function(i,o,s){for(var x=i.fullSceneLayout,_=0;_<3;_++){var F,N=ed[_],j=N.charAt(0),G=x[N],Z=o[j],X=o[j+"calendar"],$=o["_"+j+"length"];if(J.isArrayOrTypedArray(Z))for(var ee=0;ee<($||Z.length);ee++)if(J.isArrayOrTypedArray(Z[ee]))for(var et=0;et<Z[ee].length;++et)!isNaN(F=G.d2l(Z[ee][et],0,X))&&isFinite(F)&&(s[0][_]=Math.min(s[0][_],F),s[1][_]=Math.max(s[1][_],F));else!isNaN(F=G.d2l(Z[ee],0,X))&&isFinite(F)&&(s[0][_]=Math.min(s[0][_],F),s[1][_]=Math.max(s[1][_],F));else s[0][_]=Math.min(s[0][_],0),s[1][_]=Math.max(s[1][_],$-1)}}(this,ee,N);!function(i,o){for(var s=i.fullSceneLayout,x=s.annotations||[],_=0;_<3;_++)for(var F=ed[_],N=F.charAt(0),j=s[F],G=0;G<x.length;G++){var Z=x[G];if(Z.visible){var X=j.r2l(Z[N]);!isNaN(X)&&isFinite(X)&&(o[0][_]=Math.min(o[0][_],X),o[1][_]=Math.max(o[1][_],X))}}}(this,N);var j=[1,1,1];for(ei=0;ei<3;++ei)N[1][ei]===N[0][ei]?j[ei]=1:j[ei]=1/(N[1][ei]-N[0][ei]);for(this.dataScale=j,this.convertAnnotations(this),en=0;en<i.length;++en)!0===(ee=i[en]).visible&&0!==ee._length&&((et=this.traces[ee.uid])?et.data.type===ee.type?et.update(ee):(et.dispose(),et=ee._module.plot(this,ee),this.traces[ee.uid]=et):(et=ee._module.plot(this,ee),this.traces[ee.uid]=et),et.name=ee.name);var G=Object.keys(this.traces);e:for(en=0;en<G.length;++en){for(ei=0;ei<i.length;++ei)if(i[ei].uid===G[en]&&!0===i[ei].visible&&0!==i[ei]._length)continue e;(et=this.traces[G[en]]).dispose(),delete this.traces[G[en]]}this.glplot.objects.sort(function(i,o){return i._trace.data.index-o._trace.data.index});var Z=[[0,0,0],[0,0,0]],X=[],$={};for(en=0;en<3;++en){if((es=(eo=_[ed[en]]).type)in $?($[es].acc*=j[en],$[es].count+=1):$[es]={acc:j[en],count:1},eo.autorange){Z[0][en]=1/0,Z[1][en]=-1/0;var ee,et,en,ei,eo,es,el,eu=this.glplot.objects,ef=this.fullSceneLayout.annotations||[],eh=eo._name.charAt(0);for(ei=0;ei<eu.length;ei++){var ep=eu[ei],eg=ep.bounds,em=ep._trace.data._pad||0;"ErrorBars"===ep.constructor.name&&eo._lowerLogErrorBound?Z[0][en]=Math.min(Z[0][en],eo._lowerLogErrorBound):Z[0][en]=Math.min(Z[0][en],eg[0][en]/j[en]-em),Z[1][en]=Math.max(Z[1][en],eg[1][en]/j[en]+em)}for(ei=0;ei<ef.length;ei++){var ey=ef[ei];if(ey.visible){var ev=eo.r2l(ey[eh]);Z[0][en]=Math.min(Z[0][en],ev),Z[1][en]=Math.max(Z[1][en],ev)}}if("rangemode"in eo&&"tozero"===eo.rangemode&&(Z[0][en]=Math.min(Z[0][en],0),Z[1][en]=Math.max(Z[1][en],0)),Z[0][en]>Z[1][en])Z[0][en]=-1,Z[1][en]=1;else{var ex=Z[1][en]-Z[0][en];Z[0][en]-=ex/32,Z[1][en]+=ex/32}if(el=ec(el=[Z[0][en],Z[1][en]],eo),Z[0][en]=el[0],Z[1][en]=el[1],eo.isReversed()){var e_=Z[0][en];Z[0][en]=Z[1][en],Z[1][en]=e_}}else el=eo.range,Z[0][en]=eo.r2l(el[0]),Z[1][en]=eo.r2l(el[1]);Z[0][en]===Z[1][en]&&(Z[0][en]-=1,Z[1][en]+=1),X[en]=Z[1][en]-Z[0][en],eo.range=[Z[0][en],Z[1][en]],eo.limitRange(),this.glplot.setBounds(en,{min:eo.range[0]*j[en],max:eo.range[1]*j[en]})}var ew=_.aspectmode;if("cube"===ew)x=[1,1,1];else if("manual"===ew){var eT=_.aspectratio;x=[eT.x,eT.y,eT.z]}else if("auto"===ew||"data"===ew){var ek=[1,1,1];for(en=0;en<3;++en){var eA=$[es=(eo=_[ed[en]]).type];ek[en]=Math.pow(eA.acc,1/eA.count)/j[en]}x="data"===ew?ek:Math.max.apply(null,ek)/Math.min.apply(null,ek)<=4?ek:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");_.aspectratio.x=F.aspectratio.x=x[0],_.aspectratio.y=F.aspectratio.y=x[1],_.aspectratio.z=F.aspectratio.z=x[2],this.glplot.setAspectratio(_.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:_.aspectratio.x,y:_.aspectratio.y,z:_.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=_.aspectmode);var eS=_.domain||null,eM=o._size||null;if(eS&&eM){var eC=this.container.style;eC.position="absolute",eC.left=eM.l+eS.x[0]*eM.w+"px",eC.top=eM.t+(1-eS.y[1])*eM.h+"px",eC.width=eM.w*(eS.x[1]-eS.x[0])+"px",eC.height=eM.h*(eS.y[1]-eS.y[0])+"px"}this.glplot.redraw()}},ef.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},ef.getCamera=function(){var i;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(i=this.camera).up[0],y:i.up[1],z:i.up[2]},center:{x:i.center[0],y:i.center[1],z:i.center[2]},eye:{x:i.eye[0],y:i.eye[1],z:i.eye[2]},projection:{type:!0===i._ortho?"orthographic":"perspective"}}},ef.setViewport=function(i){var o=i.camera;this.camera.lookAt.apply(this,[[o.eye.x,o.eye.y,o.eye.z],[o.center.x,o.center.y,o.center.z],[o.up.x,o.up.y,o.up.z]]),this.glplot.setAspectratio(i.aspectratio),"orthographic"===o.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},ef.isCameraChanged=function(i){var o=this.getCamera(),s=J.nestedProperty(i,this.id+".camera").get(),x=!1;if(void 0===s)x=!0;else{for(var _=0;_<3;_++)for(var F=0;F<3;F++)if(!function(i,o,s,x){var _=["up","center","eye"],F=["x","y","z"];return o[_[s]]&&i[_[s]][F[x]]===o[_[s]][F[x]]}(o,s,_,F)){x=!0;break}(!s.projection||o.projection&&o.projection.type!==s.projection.type)&&(x=!0)}return x},ef.isAspectChanged=function(i){var o=this.glplot.getAspectratio(),s=J.nestedProperty(i,this.id+".aspectratio").get();return void 0===s||s.x!==o.x||s.y!==o.y||s.z!==o.z},ef.saveLayout=function(i){var o,s,x,_,F,N,j=this.fullLayout,G=this.isCameraChanged(i),Z=this.isAspectChanged(i),$=G||Z;if($){var ee={};G&&(o=this.getCamera(),x=(s=J.nestedProperty(i,this.id+".camera")).get(),ee[this.id+".camera"]=x),Z&&(_=this.glplot.getAspectratio(),N=(F=J.nestedProperty(i,this.id+".aspectratio")).get(),ee[this.id+".aspectratio"]=N),X.call("_storeDirectGUIEdit",i,j._preGUI,ee),G&&(s.set(o),J.nestedProperty(j,this.id+".camera").set(o)),Z&&(F.set(_),J.nestedProperty(j,this.id+".aspectratio").set(_),this.glplot.redraw())}return $},ef.updateFx=function(i,o){var s=this.camera;if(s){if("orbit"===i)s.mode="orbit",s.keyBindingMode="rotate";else if("turntable"===i){s.up=[0,0,1],s.mode="turntable",s.keyBindingMode="rotate";var x=this.graphDiv,_=x._fullLayout,F=this.fullSceneLayout.camera,N=F.up.x,j=F.up.y,G=F.up.z;if(G/Math.sqrt(N*N+j*j+G*G)<.999){var Z=this.id+".camera.up",$={x:0,y:0,z:1},ee={};ee[Z]=$;var et=x.layout;X.call("_storeDirectGUIEdit",et,_._preGUI,ee),F.up=$,J.nestedProperty(et,Z).set($)}}else s.keyBindingMode=i}this.fullSceneLayout.hovermode=o},ef.toImage=function(i){i||(i="png"),this.staticMode&&this.container.appendChild(x),this.glplot.redraw();var o,s=this.glplot.gl,_=s.drawingBufferWidth,F=s.drawingBufferHeight;s.bindFramebuffer(s.FRAMEBUFFER,null);var N=new Uint8Array(_*F*4);s.readPixels(0,0,_,F,s.RGBA,s.UNSIGNED_BYTE,N),function(i,o,s){for(var x=0,_=s-1;x<_;++x,--_)for(var F=0;F<o;++F)for(var N=0;N<4;++N){var j=4*(o*x+F)+N,G=4*(o*_+F)+N,Z=i[j];i[j]=i[G],i[G]=Z}}(N,_,F),function(i,o,s){for(var x=0;x<s;++x)for(var _=0;_<o;++_){var F=4*(o*x+_),N=i[F+3];if(N>0)for(var j=255/N,G=0;G<3;++G)i[F+G]=Math.min(j*i[F+G],255)}}(N,_,F);var j=document.createElement("canvas");j.width=_,j.height=F;var G=j.getContext("2d",{willReadFrequently:!0}),Z=G.createImageData(_,F);switch(Z.data.set(N),G.putImageData(Z,0,0),i){case"jpeg":o=j.toDataURL("image/jpeg");break;case"webp":o=j.toDataURL("image/webp");break;default:o=j.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(x),o},ef.setConvert=function(){for(var i=0;i<3;i++){var o=this.fullSceneLayout[ed[i]];ee.setConvert(o,this.fullLayout),o.setScale=J.noop}},ef.make4thDimension=function(){var i=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},ee.setConvert(this._mockAxis,i)},i.exports=Scene},90060:function(i){"use strict";i.exports=function(i,o,s,x){for(var _=Array(x=x||i.length),F=0;F<x;F++)_[F]=[i[F],o[F],s[F]];return _}},10820:function(i,o,s){"use strict";var x=s(41940),_=s(85594),F=s(22399),N=s(29241),j=s(53777),G=s(35025),Z=s(1426).extendFlat,X=x({editType:"calc"});X.family.dflt='"Open Sans", verdana, arial, sans-serif',X.size.dflt=12,X.color.dflt=F.defaultLine,i.exports={font:X,title:{text:{valType:"string",editType:"layoutstyle"},font:x({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:Z(G({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:F.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:F.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:F.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:N.newshape,activeshape:N.activeshape,newselection:j.newselection,activeselection:j.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:Z({},_.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:x({editType:"layoutstyle"})}}},77734:function(i,o,s){"use strict";var x=s(78607),_="1.10.1",F='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',N=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',F].join(" "),j='Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>',G={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:F,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:N,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:N,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:j,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:j,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>',tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},Z=x(G);i.exports={requiredVersion:_,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:G,styleValuesNonMapbox:Z,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+_+"."].join("\n"),noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",Z.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){var s=i.split(" "),_=s[0],F=s[1],N=x.isArrayOrTypedArray(o)?x.mean(o):o,j=.5+N/100,G=1.5+N/100,Z=["",""],X=[0,0];switch(_){case"top":Z[0]="top",X[1]=-G;break;case"bottom":Z[0]="bottom",X[1]=G}switch(F){case"left":Z[1]="right",X[0]=-j;break;case"right":Z[1]="left",X[0]=j}return{anchor:Z[0]&&Z[1]?Z.join("-"):Z[0]?Z[0]:Z[1]?Z[1]:"center",offset:X}}},50101:function(i,o,s){"use strict";var x=s(44517),_=s(71828),F=_.strTranslate,N=_.strScale,j=s(27659).AU,G=s(77922),Z=s(39898),X=s(91424),J=s(63893),$=s(10481),ee="mapbox",et=o.constants=s(77734);function isMapboxStyle(i){return"string"==typeof i&&(-1!==et.styleValuesMapbox.indexOf(i)||0===i.indexOf("mapbox://"))}o.name=ee,o.attr="subplot",o.idRoot=ee,o.idRegex=o.attrRegex=_.counterRegex(ee),o.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},o.layoutAttributes=s(23585),o.supplyLayoutDefaults=s(77882),o.plot=function(i){var o=i._fullLayout,s=i.calcdata,F=o._subplots[ee];if(x.version!==et.requiredVersion)throw Error(et.wrongVersionErrorMsg);var N=function(i,o){var s=i._fullLayout;if(""===i._context.mapboxAccessToken)return"";for(var x=[],F=[],N=!1,j=!1,G=0;G<o.length;G++){var Z=s[o[G]],X=Z.accesstoken;isMapboxStyle(Z.style)&&(X?_.pushUnique(x,X):(isMapboxStyle(Z._input.style)&&(_.error("Uses Mapbox map style, but did not set an access token."),N=!0),j=!0)),X&&_.pushUnique(F,X)}if(j){var J=N?et.noAccessTokenErrorMsg:et.missingStyleErrorMsg;throw _.error(J),Error(J)}return x.length?(x.length>1&&_.warn(et.multipleTokensErrorMsg),x[0]):(F.length&&_.log(["Listed mapbox access token(s)",F.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(i,F);x.accessToken=N;for(var G=0;G<F.length;G++){var Z=F[G],X=j(s,ee,Z),J=o[Z],er=J._subplot;er||(er=new $(i,Z),o[Z]._subplot=er),er.viewInitial||(er.viewInitial={center:_.extendFlat({},J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),er.plot(X,o,i._promises)}},o.clean=function(i,o,s,x){for(var _=x._subplots[ee]||[],F=0;F<_.length;F++){var N=_[F];!o[N]&&x[N]._subplot&&x[N]._subplot.destroy()}},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots[ee],x=o._size,_=0;_<s.length;_++){var j=o[s[_]],$=j.domain,er=j._subplot.toImage("png");o._glimages.append("svg:image").attr({xmlns:G.svg,"xlink:href":er,x:x.l+x.w*$.x[0],y:x.t+x.h*(1-$.y[1]),width:x.w*($.x[1]-$.x[0]),height:x.h*($.y[1]-$.y[0]),preserveAspectRatio:"none"});var en=Z.select(j._subplot.div);if(null!==en.select(".mapboxgl-ctrl-logo").node().offsetParent){var ei=o._glimages.append("g");ei.attr("transform",F(x.l+x.w*$.x[0]+10,x.t+x.h*(1-$.y[0])-31)),ei.append("path").attr("d",et.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),ei.append("path").attr("d",et.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),ei.append("path").attr("d",et.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),ei.append("polygon").attr("points",et.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var eo=en.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),es=o._glimages.append("g"),el=es.append("text");el.text(eo).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":eo});var ec=X.bBox(el.node()),eu=x.w*($.x[1]-$.x[0]);if(ec.width>eu/2){var ef=eo.split("|").join("<br>");el.text(ef).attr("data-unformatted",ef).call(J.convertToTspans,i),ec=X.bBox(el.node())}el.attr("transform",F(-3,-ec.height+8)),es.insert("rect",".static-attribution").attr({x:-ec.width-6,y:-ec.height-3,width:ec.width+6,height:ec.height+3,fill:"rgba(255, 255, 255, 0.75)"});var eh=1;ec.width+6>eu&&(eh=eu/(ec.width+6));var ed=[x.l+x.w*$.x[1],x.t+x.h*(1-$.y[0])];es.attr("transform",F(ed[0],ed[1])+N(eh))}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots[ee],x=0;x<s.length;x++)o[s[x]]._subplot.updateFx(o)}},67911:function(i,o,s){"use strict";var x=s(71828),_=s(63893).sanitizeHTML,F=s(13056),N=s(77734);function MapboxLayer(i,o){this.subplot=i,this.uid=i.uid+"-"+o,this.index=o,this.idSource="source-"+this.uid,this.idLayer=N.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var j=MapboxLayer.prototype;function isVisible(i){if(!i.visible)return!1;var o=i.source;if(Array.isArray(o)&&o.length>0){for(var s=0;s<o.length;s++)if("string"!=typeof o[s]||0===o[s].length)return!1;return!0}return x.isPlainObject(o)||"string"==typeof o&&o.length>0}function convertOpts(i){var o={},s={};switch(i.type){case"circle":x.extendFlat(s,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":x.extendFlat(s,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":x.extendFlat(s,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var _=i.symbol,N=F(_.textposition,_.iconsize);x.extendFlat(o,{"icon-image":_.icon+"-15","icon-size":_.iconsize/10,"text-field":_.text,"text-size":_.textfont.size,"text-anchor":N.anchor,"text-offset":N.offset,"symbol-placement":_.placement}),x.extendFlat(s,{"icon-color":i.color,"text-color":_.textfont.color,"text-opacity":i.opacity});break;case"raster":x.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:o,paint:s}}j.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=isVisible(i)},j.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},j.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},j.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},j.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},j.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());null!==o&&this.subplot.map.moveLayer(this.idLayer,o)},j.updateSource=function(i){var o=this.subplot.map;if(o.getSource(this.idSource)&&o.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,isVisible(i)){var s,x,F,N,j=(x=i.sourcetype,F=i.source,N={type:x},"geojson"===x?s="data":"vector"===x?s="string"==typeof F?"url":"tiles":"raster"===x?(s="tiles",N.tileSize=256):"image"===x&&(s="url",N.coordinates=i.coordinates),N[s]=F,i.sourceattribution&&(N.attribution=_(i.sourceattribution)),N);o.addSource(this.idSource,j)}},j.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var o=this.subplot.getMapLayers(),s=0;s<o.length;s++){var x=o[s].id;if("string"==typeof x&&0===x.indexOf(N.traceLayerPrefix)){i=x;break}}return i},j.updateLayer=function(i){var o=this.subplot,s=convertOpts(i),x=this.lookupBelow(),_=this.findFollowingMapboxLayerId(x);this.removeLayer(),isVisible(i)&&o.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:s.layout,paint:s.paint},_),this.layerType=i.type,this.below=x},j.updateStyle=function(i){if(isVisible(i)){var o=convertOpts(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",o.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",o.paint)}},j.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},j.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},i.exports=function(i,o,s){var x=new MapboxLayer(i,o);return x.update(s),x}},23585:function(i,o,s){"use strict";var x=s(71828),_=s(7901).defaultLine,F=s(27670).Y,N=s(41940),j=s(82196).textposition,G=s(30962).overrideAll,Z=s(44467).templatedArray,X=s(77734),J=N({});J.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(i.exports=G({_arrayAttrRegexps:[x.counterRegex("mapbox",".layers",!0)],domain:F({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:X.styleValuesMapbox.concat(X.styleValuesNonMapbox),dflt:X.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:Z("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:_},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:_}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:J,textposition:x.extendFlat({},j,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(i,o,s){"use strict";var x=s(71828),_=s(49119),F=s(85501),N=s(23585);function handleDefaults(i,o,s,x){s("accesstoken",x.accessToken),s("style"),s("center.lon"),s("center.lat"),s("zoom"),s("bearing"),s("pitch");var _=s("bounds.west"),N=s("bounds.east"),j=s("bounds.south"),G=s("bounds.north");(void 0===_||void 0===N||void 0===j||void 0===G)&&delete o.bounds,F(i,o,{name:"layers",handleItemDefaults:handleLayerDefaults}),o._input=i}function handleLayerDefaults(i,o){function coerce(s,_){return x.coerce(i,o,N.layers,s,_)}if(coerce("visible")){var s,_=coerce("sourcetype"),F="raster"===_||"image"===_;coerce("source"),coerce("sourceattribution"),"vector"===_&&coerce("sourcelayer"),"image"===_&&coerce("coordinates"),F&&(s="raster");var j=coerce("type",s);F&&"raster"!==j&&(j=o.type="raster",x.log("Source types *raster* and *image* must drawn *raster* layer type.")),coerce("below"),coerce("color"),coerce("opacity"),coerce("minzoom"),coerce("maxzoom"),"circle"===j&&coerce("circle.radius"),"line"===j&&(coerce("line.width"),coerce("line.dash")),"fill"===j&&coerce("fill.outlinecolor"),"symbol"===j&&(coerce("symbol.icon"),coerce("symbol.iconsize"),coerce("symbol.text"),x.coerceFont(coerce,"symbol.textfont"),coerce("symbol.textposition"),coerce("symbol.placement"))}}i.exports=function(i,o,s){_(i,o,s,{type:"mapbox",attributes:N,handleDefaults:handleDefaults,partition:"y",accessToken:o._mapboxAccessToken})}},10481:function(i,o,s){"use strict";var x=s(44517),_=s(71828),F=s(41327),N=s(73972),j=s(89298),G=s(28569),Z=s(30211),X=s(64505),J=X.drawMode,$=X.selectMode,ee=s(47322).prepSelect,et=s(47322).clearOutline,er=s(47322).clearSelectionsCache,en=s(47322).selectOnClick,ei=s(77734),eo=s(67911);function Mapbox(i,o){this.id=o,this.gd=i;var s=i._fullLayout,x=i._context;this.container=s._glcontainer.node(),this.isStatic=x.staticPlot,this.uid=s._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(s),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var es=Mapbox.prototype;es.plot=function(i,o,s){var x,_=this,F=o[_.id];_.map&&F.accesstoken!==_.accessToken&&(_.map.remove(),_.map=null,_.styleObj=null,_.traceHash={},_.layerList=[]),x=new Promise(_.map?function(s,x){_.updateMap(i,o,s,x)}:function(s,x){_.createMap(i,o,s,x)}),s.push(x)},es.createMap=function(i,o,s,_){var N=this,j=o[N.id],G=N.styleObj=getStyleObj(j.style);N.accessToken=j.accesstoken;var Z=j.bounds,X=Z?[[Z.west,Z.south],[Z.east,Z.north]]:null,J=N.map=new x.Map({container:N.div,style:G.style,center:convertCenter(j.center),zoom:j.zoom,bearing:j.bearing,pitch:j.pitch,maxBounds:X,interactive:!N.isStatic,preserveDrawingBuffer:N.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new x.AttributionControl({compact:!0}));J._canvas.style.left="0px",J._canvas.style.top="0px",N.rejectOnError(_),N.isStatic||N.initFx(i,o);var $=[];$.push(new Promise(function(i){J.once("load",i)})),Promise.all($=$.concat(F.fetchTraceGeoData(i))).then(function(){N.fillBelowLookup(i,o),N.updateData(i),N.updateLayout(o),N.resolveOnRender(s)}).catch(_)},es.updateMap=function(i,o,s,x){var _=this,N=_.map,j=o[this.id];_.rejectOnError(x);var G=[],Z=getStyleObj(j.style);JSON.stringify(_.styleObj)!==JSON.stringify(Z)&&(_.styleObj=Z,N.setStyle(Z.style),_.traceHash={},G.push(new Promise(function(i){N.once("styledata",i)}))),Promise.all(G=G.concat(F.fetchTraceGeoData(i))).then(function(){_.fillBelowLookup(i,o),_.updateData(i),_.updateLayout(o),_.resolveOnRender(s)}).catch(x)},es.fillBelowLookup=function(i,o){var s,x,_,F,N=o[this.id].layers,j=this.belowLookup={},G=!1;for(s=0;s<i.length;s++){var Z=i[s][0].trace,X=Z._module;"string"==typeof Z.below?x=Z.below:X.getBelow&&(x=X.getBelow(Z,this)),""===x&&(G=!0),j["trace-"+Z.uid]=x||""}for(s=0;s<N.length;s++){var J=N[s];x="string"==typeof J.below?J.below:G?"traces":"",j["layout-"+s]=x}var $={};for(_ in j)$[x=j[_]]?$[x].push(_):$[x]=[_];for(x in $){var ee=$[x];if(ee.length>1)for(s=0;s<ee.length;s++)0===(_=ee[s]).indexOf("trace-")?(F=_.split("trace-")[1],this.traceHash[F]&&(this.traceHash[F].below=null)):0===_.indexOf("layout-")&&(F=_.split("layout-")[1],this.layerList[F]&&(this.layerList[F].below=null))}};var el={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function getStyleObj(i){var o={};return _.isPlainObject(i)?(o.id=i.id,o.style=i):"string"==typeof i?(o.id=i,-1!==ei.styleValuesMapbox.indexOf(i)?o.style=convertStyleVal(i):ei.stylesNonMapbox[i]?o.style=ei.stylesNonMapbox[i]:o.style=i):(o.id=ei.styleValueDflt,o.style=convertStyleVal(ei.styleValueDflt)),o.transition={duration:0,delay:0},o}function convertStyleVal(i){return ei.styleUrlPrefix+i+"-"+ei.styleUrlSuffix}function convertCenter(i){return[i.lon,i.lat]}es.updateData=function(i){var o,s,x,_,F=this.traceHash,N=i.slice().sort(function(i,o){return el[i[0].trace.type]-el[o[0].trace.type]});for(x=0;x<N.length;x++){var j=N[x];o=F[(s=j[0].trace).uid];var G=!1;o&&(o.type===s.type?(o.update(j),G=!0):o.dispose()),!G&&s._module&&(F[s.uid]=s._module.plot(this,j))}var Z=Object.keys(F);t:for(x=0;x<Z.length;x++){var X=Z[x];for(_=0;_<i.length;_++)if(X===(s=i[_][0].trace).uid)continue t;(o=F[X]).dispose(),delete F[X]}},es.updateLayout=function(i){var o=this.map,s=i[this.id];this.dragging||this.wheeling||(o.setCenter(convertCenter(s.center)),o.setZoom(s.zoom),o.setBearing(s.bearing),o.setPitch(s.pitch)),this.updateLayers(i),this.updateFramework(i),this.updateFx(i),this.map.resize(),this.gd._context._scrollZoom.mapbox?o.scrollZoom.enable():o.scrollZoom.disable()},es.resolveOnRender=function(i){var o=this.map;o.on("render",function onRender(){o.loaded()&&(o.off("render",onRender),setTimeout(i,10))})},es.rejectOnError=function(i){var o=this.map;function handler(){i(Error(ei.mapOnErrorMsg))}o.once("error",handler),o.once("style.error",handler),o.once("source.error",handler),o.once("tile.error",handler),o.once("layer.error",handler)},es.createFramework=function(i){var o=this,s=o.div=document.createElement("div");s.id=o.uid,s.style.position="absolute",o.container.appendChild(s),o.xaxis={_id:"x",c2p:function(i){return o.project(i).x}},o.yaxis={_id:"y",c2p:function(i){return o.project(i).y}},o.updateFramework(i),o.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},j.setConvert(o.mockAxis,i)},es.initFx=function(i,o){var s=this,x=s.gd,_=s.map;function unhover(){Z.loneUnhover(o._hoverlayer)}function emitUpdate(){var i=s.getView();x.emit("plotly_relayouting",s.getViewEditsWithDerived(i))}_.on("moveend",function(i){if(s.map){var o=x._fullLayout;if(i.originalEvent||s.wheeling){var _=o[s.id];N.call("_storeDirectGUIEdit",x.layout,o._preGUI,s.getViewEdits(_));var F=s.getView();_._input.center=_.center=F.center,_._input.zoom=_.zoom=F.zoom,_._input.bearing=_.bearing=F.bearing,_._input.pitch=_.pitch=F.pitch,x.emit("plotly_relayout",s.getViewEditsWithDerived(F))}i.originalEvent&&"mouseup"===i.originalEvent.type?s.dragging=!1:s.wheeling&&(s.wheeling=!1),o._rehover&&o._rehover()}}),_.on("wheel",function(){s.wheeling=!0}),_.on("mousemove",function(i){var o=s.div.getBoundingClientRect(),F=[i.originalEvent.offsetX,i.originalEvent.offsetY];i.target.getBoundingClientRect=function(){return o},s.xaxis.p2c=function(){return _.unproject(F).lng},s.yaxis.p2c=function(){return _.unproject(F).lat},x._fullLayout._rehover=function(){x._fullLayout._hoversubplot===s.id&&x._fullLayout[s.id]&&Z.hover(x,i,s.id)},Z.hover(x,i,s.id),x._fullLayout._hoversubplot=s.id}),_.on("dragstart",function(){s.dragging=!0,unhover()}),_.on("zoomstart",unhover),_.on("mouseout",function(){x._fullLayout._hoversubplot=null}),_.on("drag",emitUpdate),_.on("zoom",emitUpdate),_.on("dblclick",function(){var i=x._fullLayout[s.id];N.call("_storeDirectGUIEdit",x.layout,x._fullLayout._preGUI,s.getViewEdits(i));var o=s.viewInitial;_.setCenter(convertCenter(o.center)),_.setZoom(o.zoom),_.setBearing(o.bearing),_.setPitch(o.pitch);var F=s.getView();i._input.center=i.center=F.center,i._input.zoom=i.zoom=F.zoom,i._input.bearing=i.bearing=F.bearing,i._input.pitch=i.pitch=F.pitch,x.emit("plotly_doubleclick",null),x.emit("plotly_relayout",s.getViewEditsWithDerived(F))}),s.clearOutline=function(){er(s.dragOptions),et(s.dragOptions.gd)},s.onClickInPanFn=function(i){return function(o){var _=x._fullLayout.clickmode;_.indexOf("select")>-1&&en(o.originalEvent,x,[s.xaxis],[s.yaxis],s.id,i),_.indexOf("event")>-1&&Z.click(x,o.originalEvent)}}},es.updateFx=function(i){var o=this,s=o.map,x=o.gd;if(!o.isStatic){var F=i.dragmode,N=o.dragOptions;o.dragOptions=_.extendDeep(N||{},{dragmode:i.dragmode,element:o.div,gd:x,plotinfo:{id:o.id,domain:i[o.id].domain,xaxis:o.xaxis,yaxis:o.yaxis,fillRangeItems:function(i,s){s.isRect?(i.range={})[o.id]=[invert([s.xmin,s.ymin]),invert([s.xmax,s.ymax])]:(i.lassoPoints={})[o.id]=s.map(invert)}},xaxes:[o.xaxis],yaxes:[o.yaxis],subplot:o.id}),s.off("click",o.onClickInPanHandler),$(F)||J(F)?(s.dragPan.disable(),s.on("zoomstart",o.clearOutline),o.dragOptions.prepFn=function(i,s,x){ee(i,s,x,o.dragOptions,F)},G.init(o.dragOptions)):(s.dragPan.enable(),s.off("zoomstart",o.clearOutline),o.div.onmousedown=null,o.div.ontouchstart=null,o.div.removeEventListener("touchstart",o.div._ontouchstart),o.onClickInPanHandler=o.onClickInPanFn(o.dragOptions),s.on("click",o.onClickInPanHandler))}function invert(i){var s=o.map.unproject(i);return[s.lng,s.lat]}},es.updateFramework=function(i){var o=i[this.id].domain,s=i._size,x=this.div.style;x.width=s.w*(o.x[1]-o.x[0])+"px",x.height=s.h*(o.y[1]-o.y[0])+"px",x.left=s.l+o.x[0]*s.w+"px",x.top=s.t+(1-o.y[1])*s.h+"px",this.xaxis._offset=s.l+o.x[0]*s.w,this.xaxis._length=s.w*(o.x[1]-o.x[0]),this.yaxis._offset=s.t+(1-o.y[1])*s.h,this.yaxis._length=s.h*(o.y[1]-o.y[0])},es.updateLayers=function(i){var o,s=i[this.id].layers,x=this.layerList;if(s.length!==x.length){for(o=0;o<x.length;o++)x[o].dispose();for(o=0,x=this.layerList=[];o<s.length;o++)x.push(eo(this,o,s[o]))}else for(o=0;o<s.length;o++)x[o].update(s[o])},es.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},es.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},es.setOptions=function(i,o,s){for(var x in s)this.map[o](i,x,s[x])},es.getMapLayers=function(){return this.map.getStyle().layers},es.addLayer=function(i,o){var s=this.map;if("string"==typeof o){if(""===o){s.addLayer(i,o);return}for(var x=this.getMapLayers(),F=0;F<x.length;F++)if(o===x[F].id){s.addLayer(i,o);return}_.warn(["Trying to add layer with *below* value",o,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}s.addLayer(i)},es.project=function(i){return this.map.project(new x.LngLat(i[0],i[1]))},es.getView=function(){var i=this.map,o=i.getCenter(),s=o.lng,x=o.lat,_=i.getCanvas(),F=parseInt(_.style.width),N=parseInt(_.style.height);return{center:{lon:s,lat:x},zoom:i.getZoom(),bearing:i.getBearing(),pitch:i.getPitch(),_derived:{coordinates:[i.unproject([0,0]).toArray(),i.unproject([F,0]).toArray(),i.unproject([F,N]).toArray(),i.unproject([0,N]).toArray()]}}},es.getViewEdits=function(i){for(var o=this.id,s=["center","zoom","bearing","pitch"],x={},_=0;_<s.length;_++){var F=s[_];x[o+"."+F]=i[F]}return x},es.getViewEditsWithDerived=function(i){var o=this.id,s=this.getViewEdits(i);return s[o+"._derived"]=i._derived,s},i.exports=Mapbox},35025:function(i){"use strict";i.exports=function(i){var o=i.editType;return{t:{valType:"number",dflt:0,editType:o},r:{valType:"number",dflt:0,editType:o},b:{valType:"number",dflt:0,editType:o},l:{valType:"number",dflt:0,editType:o},editType:o}}},74875:function(i,o,s){"use strict";var x=s(39898),_=s(84096).Dq,F=s(60721).FF,N=s(92770),j=s(73972),G=s(86281),Z=s(44467),X=s(71828),J=s(7901),$=s(50606).BADNUM,ee=s(41675),et=s(51873).clearOutline,er=s(21479),en=s(85594),ei=s(31391),eo=s(27659).a0,es=X.relinkPrivateKeys,el=X._,ec=i.exports={};X.extendFlat(ec,j),ec.attributes=s(9012),ec.attributes.type.values=ec.allTypes,ec.fontAttrs=s(41940),ec.layoutAttributes=s(10820),ec.fontWeight="normal";var eu=ec.transformsRegistry,ef=s(31137);ec.executeAPICommand=ef.executeAPICommand,ec.computeAPICommandBindings=ef.computeAPICommandBindings,ec.manageCommandObserver=ef.manageCommandObserver,ec.hasSimpleAPICommandBindings=ef.hasSimpleAPICommandBindings,ec.redrawText=function(i){return i=X.getGraphDiv(i),new Promise(function(o){setTimeout(function(){i._fullLayout&&(j.getComponentMethod("annotations","draw")(i),j.getComponentMethod("legend","draw")(i),j.getComponentMethod("colorbar","draw")(i),o(ec.previousPromises(i)))},300)})},ec.resize=function(i){i=X.getGraphDiv(i);var o,s=new Promise(function(s,x){(!i||X.isHidden(i))&&x(Error("Resize must be passed a displayed plot div element.")),i._redrawTimer&&clearTimeout(i._redrawTimer),i._resolveResize&&(o=i._resolveResize),i._resolveResize=s,i._redrawTimer=setTimeout(function(){if(!i.layout||i.layout.width&&i.layout.height||X.isHidden(i)){s(i);return}delete i.layout.width,delete i.layout.height;var o=i.changed;i.autoplay=!0,j.call("relayout",i,{autosize:!0}).then(function(){i.changed=o,i._resolveResize===s&&(delete i._resolveResize,s(i))})},100)});return o&&o(s),s},ec.previousPromises=function(i){if((i._promises||[]).length)return Promise.all(i._promises).then(function(){i._promises=[]})},ec.addLinks=function(i){if(i._context.showLink||i._context.showSources){var o=i._fullLayout,s=X.ensureSingle(o._paper,"text","js-plot-link-container",function(i){i.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:J.defaultLine,"pointer-events":"all"}).each(function(){var i=x.select(this);i.append("tspan").classed("js-link-to-tool",!0),i.append("tspan").classed("js-link-spacer",!0),i.append("tspan").classed("js-sourcelinks",!0)})}),_=s.node(),F={y:o._paper.attr("height")-9};document.body.contains(_)&&_.getComputedTextLength()>=o.width-20?(F["text-anchor"]="start",F.x=5):(F["text-anchor"]="end",F.x=o._paper.attr("width")-7),s.attr(F);var N=s.select(".js-link-to-tool"),j=s.select(".js-link-spacer"),G=s.select(".js-sourcelinks");i._context.showSources&&i._context.showSources(i),i._context.showLink&&function(i,o){o.text("");var s=o.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(i._context.linkText+" "+String.fromCharCode(187));if(i._context.sendData)s.on("click",function(){ec.sendDataToCloud(i)});else{var x=window.location.pathname.split("/"),_=window.location.search;s.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+x[2].split(".")[0]+"/"+x[1]+_})}}(i,N),j.text(N.text()&&G.text()?" - ":"")}},ec.sendDataToCloud=function(i){var o=(window.PLOTLYENV||{}).BASE_URL||i._context.plotlyServerURL;if(o){i.emit("plotly_beforeexport");var s=x.select(i).append("div").attr("id","hiddenform").style("display","none"),_=s.append("form").attr({action:o+"/external",method:"post",target:"_blank"});return _.append("input").attr({type:"text",name:"data"}).node().value=ec.graphJson(i,!1,"keepdata"),_.node().submit(),s.remove(),i.emit("plotly_afterexport"),!1}};var eh=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],ed=["year","month","dayMonth","dayMonthYear"];function getFormatObj(i,o){var s=i._context.locale;s||(s="en-US");var x=!1,_={};function includeFormat(i){for(var s=!0,F=0;F<o.length;F++){var N=o[F];_[N]||(i[N]?_[N]=i[N]:s=!1)}s&&(x=!0)}for(var F=0;F<2;F++){for(var N=i._context.locales,G=0;G<2;G++){var Z=(N[s]||{}).format;if(Z&&(includeFormat(Z),x))break;N=j.localeRegistry}var X=s.split("-")[0];if(x||X===s)break;s=X}return x||includeFormat(j.localeRegistry.en.format),_}function hasMakesDataTransform(i){var o=i.transforms;if(Array.isArray(o)&&o.length)for(var s=0;s<o.length;s++){var x=o[s],_=x._module||eu[x.type];if(_&&_.makesData)return!0}return!1}function getComputedSize(i){return"string"==typeof i&&"px"===i.substr(i.length-2)&&parseFloat(i)}function initMargins(i){var o=i.margin;if(!i._size){var s=i._size={l:Math.round(o.l),r:Math.round(o.r),t:Math.round(o.t),b:Math.round(o.b),p:Math.round(o.pad)};s.w=Math.round(i.width)-s.l-s.r,s.h=Math.round(i.height)-s.t-s.b}i._pushmargin||(i._pushmargin={}),i._pushmarginIds||(i._pushmarginIds={}),i._reservedMargin||(i._reservedMargin={})}ec.supplyDefaults=function(i,o){var s,x,N,G=o&&o.skipUpdateCalc,Z=i._fullLayout||{};if(Z._skipDefaults){delete Z._skipDefaults;return}var J=i._fullLayout={},$=i.layout||{},ee=i._fullData||[],er=i._fullData=[],en=i.data||[],ei=i.calcdata||[],eo=i._context||{};i._transitionData||ec.createTransitionData(i),J._dfltTitle={plot:el(i,"Click to enter Plot title"),x:el(i,"Click to enter X axis title"),y:el(i,"Click to enter Y axis title"),colorbar:el(i,"Click to enter Colorscale title"),annotation:el(i,"new text")},J._traceWord=el(i,"trace");var eu=getFormatObj(i,eh);if(J._mapboxAccessToken=eo.mapboxAccessToken,Z._initialAutoSizeIsDone){var ef=Z.width,ep=Z.height;ec.supplyLayoutGlobalDefaults($,J,eu),$.width||(J.width=ef),$.height||(J.height=ep),ec.sanitizeMargins(J)}else{ec.supplyLayoutGlobalDefaults($,J,eu);var eg=!$.width||!$.height,em=J.autosize,ey=eo.autosizable;eg&&(em||ey)?ec.plotAutoSize(i,$,J):eg&&ec.sanitizeMargins(J),!em&&eg&&($.width=J.width,$.height=J.height)}J._d3locale=(s=J.separators,eu.decimal=s.charAt(0),eu.thousands=s.charAt(1),{numberFormat:function(i){try{i=F(eu).format(X.adjustFormat(i))}catch(o){return X.warnBadFormat(i),X.noFormat}return i},timeFormat:_(eu).utcFormat}),J._extraFormat=getFormatObj(i,ed),J._initialAutoSizeIsDone=!0,J._dataLength=en.length,J._modules=[],J._visibleModules=[],J._basePlotModules=[];var ev=J._subplots=function(){var i,o,s=j.collectableSubplotTypes,x={};if(!s){s=[];var _=j.subplotsRegistry;for(var F in _){var N=_[F].attr;if(N&&(s.push(F),Array.isArray(N)))for(o=0;o<N.length;o++)X.pushUnique(s,N[o])}}for(i=0;i<s.length;i++)x[s[i]]=[];return x}(),ex=J._splomAxes={x:{},y:{}},e_=J._splomSubplots={};J._splomGridDflt={},J._scatterStackOpts={},J._firstScatter={},J._alignmentOpts={},J._colorAxes={},J._requestRangeslider={},J._traceUids=function(i,o){var s,x,_=o.length,F=[];for(s=0;s<i.length;s++){var N=i[s]._fullInput;N!==x&&F.push(N),x=N}var j=F.length,G=Array(_),Z={};function tryUid(i,o){if(i&&"string"==typeof i&&!Z[i])return G[o]=i,Z[i]=1,!0}for(s=0;s<_;s++){var J,$=o[s].uid;"number"==typeof $&&($=String($)),tryUid($,s)||s<j&&tryUid(F[s].uid,s)||(J=X.randstr(Z),G[s]=J,Z[J]=1)}return G}(ee,en),J._globalTransforms=(i._context||{}).globalTransforms,ec.supplyDataDefaults(en,er,$,J);var ew=Object.keys(ex.x),eT=Object.keys(ex.y);if(ew.length>1&&eT.length>1){for(j.getComponentMethod("grid","sizeDefaults")($,J),x=0;x<ew.length;x++)X.pushUnique(ev.xaxis,ew[x]);for(x=0;x<eT.length;x++)X.pushUnique(ev.yaxis,eT[x]);for(var ek in e_)X.pushUnique(ev.cartesian,ek)}if(J._has=ec._hasPlotType.bind(J),ee.length===er.length)for(x=0;x<er.length;x++)es(er[x],ee[x]);ec.supplyLayoutModuleDefaults($,J,er,i._transitionData);var eA=J._visibleModules,eS=[];for(x=0;x<eA.length;x++){var eM=eA[x].crossTraceDefaults;eM&&X.pushUnique(eS,eM)}for(x=0;x<eS.length;x++)eS[x](er,J);J._hasOnlyLargeSploms=1===J._basePlotModules.length&&"splom"===J._basePlotModules[0].name&&ew.length>15&&eT.length>15&&0===J.shapes.length&&0===J.images.length,ec.linkSubplots(er,J,ee,Z),ec.cleanPlot(er,J,ee,Z);var eC=!!(Z._has&&Z._has("gl2d")),eE=!!(J._has&&J._has("gl2d")),eL=!!(Z._has&&Z._has("cartesian")),eP=!!(J._has&&J._has("cartesian")),eI=eL||eC,eO=eP||eE;eI&&!eO?Z._bgLayer.remove():eO&&!eI&&(J._shouldCreateBgLayer=!0),Z._zoomlayer&&!i._dragging&&et({_fullLayout:Z}),function(i,o){var s,x=[];o.meta&&(s=o._meta={meta:o.meta,layout:{meta:o.meta}});for(var _=0;_<i.length;_++){var F=i[_];F.meta?x[F.index]=F._meta={meta:F.meta}:o.meta&&(F._meta={meta:o.meta}),o.meta&&(F._meta.layout={meta:o.meta})}x.length&&(s||(s=o._meta={}),s.data=x)}(er,J),es(J,Z),j.getComponentMethod("colorscale","crossTraceDefaults")(er,J),J._preGUI||(J._preGUI={}),J._tracePreGUI||(J._tracePreGUI={});var eD=J._tracePreGUI,eR={};for(N in eD)eR[N]="old";for(x=0;x<er.length;x++)eR[N=er[x]._fullInput.uid]||(eD[N]={}),eR[N]="new";for(N in eR)"old"===eR[N]&&delete eD[N];initMargins(J),j.getComponentMethod("rangeslider","makeData")(J),G||ei.length!==er.length||ec.supplyDefaultsUpdateCalc(ei,er)},ec.supplyDefaultsUpdateCalc=function(i,o){for(var s=0;s<o.length;s++){var x=o[s],_=(i[s]||[])[0];if(_&&_.trace){var F=_.trace;if(F._hasCalcTransform){var N,j,G,Z=F._arrayAttrs;for(N=0;N<Z.length;N++)j=Z[N],G=X.nestedProperty(F,j).get().slice(),X.nestedProperty(x,j).set(G)}_.trace=x}}},ec.createTransitionData=function(i){i._transitionData||(i._transitionData={}),i._transitionData._frames||(i._transitionData._frames=[]),i._transitionData._frameHash||(i._transitionData._frameHash={}),i._transitionData._counter||(i._transitionData._counter=0),i._transitionData._interruptCallbacks||(i._transitionData._interruptCallbacks=[])},ec._hasPlotType=function(i){var o,s=this._basePlotModules||[];for(o=0;o<s.length;o++)if(s[o].name===i)return!0;var x=this._modules||[];for(o=0;o<x.length;o++){var _=x[o].name;if(_===i)return!0;var F=j.modules[_];if(F&&F.categories[i])return!0}return!1},ec.cleanPlot=function(i,o,s,x){var _,F,N=x._basePlotModules||[];for(_=0;_<N.length;_++){var j=N[_];j.clean&&j.clean(i,o,s,x)}var G=x._has&&x._has("gl"),Z=o._has&&o._has("gl");G&&!Z&&void 0!==x._glcontainer&&(x._glcontainer.selectAll(".gl-canvas").remove(),x._glcontainer.selectAll(".no-webgl").remove(),x._glcanvas=null);var X=!!x._infolayer;r:for(_=0;_<s.length;_++){var J=s[_].uid;for(F=0;F<i.length;F++)if(J===i[F].uid)continue r;X&&x._infolayer.select(".cb"+J).remove()}},ec.linkSubplots=function(i,o,s,x){var _,F=x._plots||{},N=o._plots={},G=o._subplots,Z={_fullData:i,_fullLayout:o},J=G.cartesian.concat(G.gl2d||[]);for($=0;$<J.length;$++){var $,et,er,en=J[$],ei=F[en],eo=ee.getFromId(Z,en,"x"),es=ee.getFromId(Z,en,"y");for(ei?er=N[en]=ei:(er=N[en]={}).id=en,eo._counterAxes.push(es._id),es._counterAxes.push(eo._id),eo._subplotsWith.push(en),es._subplotsWith.push(en),er.xaxis=eo,er.yaxis=es,er._hasClipOnAxisFalse=!1,et=0;et<i.length;et++){var el=i[et];if(el.xaxis===er.xaxis._id&&el.yaxis===er.yaxis._id&&!1===el.cliponaxis){er._hasClipOnAxisFalse=!0;break}}}var ec=ee.list(Z,null,!0);for($=0;$<ec.length;$++){_=ec[$];var eu=null;_.overlaying&&(eu=ee.getFromId(Z,_.overlaying))&&eu.overlaying&&(_.overlaying=!1,eu=null),_._mainAxis=eu||_,eu&&(_.domain=eu.domain.slice()),_._anchorAxis="free"===_.anchor?null:ee.getFromId(Z,_.anchor)}for($=0;$<ec.length;$++)if((_=ec[$])._counterAxes.sort(ee.idSort),_._subplotsWith.sort(X.subplotSort),_._mainSubplot=function(i,o){var s={_fullLayout:o},x="x"===i._id.charAt(0),_=i._mainAxis._anchorAxis,F="",N="",j="";if(_&&(j=_._mainAxis._id,F=x?i._id+j:j+i._id),!F||!o._plots[F]){F="";for(var G=i._counterAxes,Z=0;Z<G.length;Z++){var X=G[Z],J=x?i._id+X:X+i._id;N||(N=J);var $=ee.getFromId(s,X);if(j&&$.overlaying===j){F=J;break}}}return F||N}(_,o),_._counterAxes.length&&(_.spikemode&&-1!==_.spikemode.indexOf("across")||_.automargin&&_.mirror&&"free"!==_.anchor||j.getComponentMethod("rangeslider","isVisible")(_))){var ef=1,eh=0;for(et=0;et<_._counterAxes.length;et++){var ed=ee.getFromId(Z,_._counterAxes[et]);ef=Math.min(ef,ed.domain[0]),eh=Math.max(eh,ed.domain[1])}ef<eh&&(_._counterDomainMin=ef,_._counterDomainMax=eh)}},ec.clearExpandedTraceDefaultColors=function(i){var o,s,x;for(s=[],(o=i._module._colorAttrs)||(i._module._colorAttrs=o=[],G.crawl(i._module.attributes,function(i,x,_,F){s[F]=x,s.length=F+1,"color"===i.valType&&void 0===i.dflt&&o.push(s.join("."))})),x=0;x<o.length;x++)X.nestedProperty(i,"_input."+o[x]).get()||X.nestedProperty(i,o[x]).set(null)},ec.supplyDataDefaults=function(i,o,s,x){var _,F,N,G=x._modules,J=x._visibleModules,$=x._basePlotModules,ee=0,et=0;function pushModule(i){o.push(i);var s=i._module;s&&(X.pushUnique(G,s),!0===i.visible&&X.pushUnique(J,s),X.pushUnique($,i._module.basePlotModule),ee++,!1!==i._input.visible&&et++)}x._transformModules=[];var er={},en=[],ei=(s.template||{}).data||{},eo=Z.traceTemplater(ei);for(_=0;_<i.length;_++){if(N=i[_],(F=eo.newTrace(N)).uid=x._traceUids[_],ec.supplyTraceDefaults(N,F,et,x,_),F.index=_,F._input=N,F._expandedIndex=ee,F.transforms&&F.transforms.length)for(var el=!1!==N.visible&&!1===F.visible,ef=function(i,o,s,x){for(var _=i.transforms,F=[i],N=0;N<_.length;N++){var j=_[N],G=eu[j.type];G&&G.transform&&(F=G.transform(F,{transform:j,fullTrace:i,fullData:o,layout:s,fullLayout:x,transformIndex:N}))}return F}(F,o,s,x),eh=0;eh<ef.length;eh++){var ed=ef[eh],ep={_template:F._template,type:F.type,uid:F.uid+eh};el&&!1===ed.visible&&delete ed.visible,ec.supplyTraceDefaults(ed,ep,ee,x,_),es(ep,ed),ep.index=_,ep._input=N,ep._fullInput=F,ep._expandedIndex=ee,ep._expandedInput=ed,pushModule(ep)}else F._fullInput=F,F._expandedInput=F,pushModule(F);j.traceIs(F,"carpetAxis")&&(er[F.carpet]=F),j.traceIs(F,"carpetDependent")&&en.push(_)}for(_=0;_<en.length;_++)if((F=o[en[_]]).visible){var eg=er[F.carpet];if(F._carpet=eg,!eg||!eg.visible){F.visible=!1;continue}F.xaxis=eg.xaxis,F.yaxis=eg.yaxis}},ec.supplyAnimationDefaults=function(i){i=i||{};var o,s={};function coerce(o,x){return X.coerce(i||{},s,en,o,x)}if(coerce("mode"),coerce("direction"),coerce("fromcurrent"),Array.isArray(i.frame))for(o=0,s.frame=[];o<i.frame.length;o++)s.frame[o]=ec.supplyAnimationFrameDefaults(i.frame[o]||{});else s.frame=ec.supplyAnimationFrameDefaults(i.frame||{});if(Array.isArray(i.transition))for(o=0,s.transition=[];o<i.transition.length;o++)s.transition[o]=ec.supplyAnimationTransitionDefaults(i.transition[o]||{});else s.transition=ec.supplyAnimationTransitionDefaults(i.transition||{});return s},ec.supplyAnimationFrameDefaults=function(i){var o={};function coerce(s,x){return X.coerce(i||{},o,en.frame,s,x)}return coerce("duration"),coerce("redraw"),o},ec.supplyAnimationTransitionDefaults=function(i){var o={};function coerce(s,x){return X.coerce(i||{},o,en.transition,s,x)}return coerce("duration"),coerce("easing"),o},ec.supplyFrameDefaults=function(i){var o={};function coerce(s,x){return X.coerce(i,o,ei,s,x)}return coerce("group"),coerce("name"),coerce("traces"),coerce("baseframe"),coerce("data"),coerce("layout"),o},ec.supplyTraceDefaults=function(i,o,s,x,_){var F,N=x.colorway||J.defaults,G=N[s%N.length];function coerce(s,x){return X.coerce(i,o,ec.attributes,s,x)}var Z=coerce("visible");coerce("type"),coerce("name",x._traceWord+" "+_),coerce("uirevision",x.uirevision);var $=ec.getModule(o);if(o._module=$,$){var ee=$.basePlotModule,et=ee.attr,er=ee.attributes;if(et&&er){var en=x._subplots,ei="";if(Z||"gl2d"!==ee.name){if(Array.isArray(et))for(F=0;F<et.length;F++){var eo=et[F],es=X.coerce(i,o,er,eo);en[eo]&&X.pushUnique(en[eo],es),ei+=es}else ei=X.coerce(i,o,er,et);en[ee.name]&&X.pushUnique(en[ee.name],ei)}}}return Z&&(coerce("customdata"),coerce("ids"),coerce("meta"),j.traceIs(o,"showLegend")?(X.coerce(i,o,$.attributes.showlegend?$.attributes:ec.attributes,"showlegend"),coerce("legend"),coerce("legendwidth"),coerce("legendgroup"),coerce("legendgrouptitle.text"),coerce("legendrank"),o._dfltShowLegend=!0):o._dfltShowLegend=!1,$&&$.supplyDefaults(i,o,G,x),j.traceIs(o,"noOpacity")||coerce("opacity"),j.traceIs(o,"notLegendIsolatable")&&(o.visible=!!o.visible),j.traceIs(o,"noHover")||(o.hovertemplate||X.coerceHoverinfo(i,o,x),"parcats"!==o.type&&j.getComponentMethod("fx","supplyDefaults")(i,o,G,x)),$&&$.selectPoints&&coerce("selectedpoints"),ec.supplyTransformDefaults(i,o,x)),o},ec.hasMakesDataTransform=hasMakesDataTransform,ec.supplyTransformDefaults=function(i,o,s){if(o._length||hasMakesDataTransform(i)){var x=s._globalTransforms||[],_=s._transformModules||[];if(Array.isArray(i.transforms)||0!==x.length)for(var F=i.transforms||[],N=x.concat(F),j=o.transforms=[],G=0;G<N.length;G++){var Z,J=N[G],$=J.type,ee=eu[$],et=!(J._module&&J._module===ee),er=ee&&"function"==typeof ee.transform;ee||X.warn("Unrecognized transform type "+$+"."),ee&&ee.supplyDefaults&&(et||er)?((Z=ee.supplyDefaults(J,o,s,i)).type=$,Z._module=ee,X.pushUnique(_,ee)):Z=X.extendFlat({},J),j.push(Z)}}},ec.supplyLayoutGlobalDefaults=function(i,o,s){function coerce(s,x){return X.coerce(i,o,ec.layoutAttributes,s,x)}var x=i.template;X.isPlainObject(x)&&(o.template=x,o._template=x.layout,o._dataTemplate=x.data),coerce("autotypenumbers");var _=X.coerceFont(coerce,"font"),F=_.size;X.coerceFont(coerce,"title.font",X.extendFlat({},_,{size:Math.round(1.4*F)})),coerce("title.text",o._dfltTitle.plot),coerce("title.xref");var N=coerce("title.yref");coerce("title.pad.t"),coerce("title.pad.r"),coerce("title.pad.b"),coerce("title.pad.l");var G=coerce("title.automargin");coerce("title.x"),coerce("title.xanchor"),coerce("title.y"),coerce("title.yanchor"),G&&("paper"===N&&(0!==o.title.y&&(o.title.y=1),"auto"===o.title.yanchor&&(o.title.yanchor=0===o.title.y?"top":"bottom")),"container"===N&&("auto"===o.title.y&&(o.title.y=1),"auto"===o.title.yanchor&&(o.title.yanchor=o.title.y<.5?"bottom":"top"))),coerce("uniformtext.mode")&&coerce("uniformtext.minsize"),coerce("autosize",!(i.width&&i.height)),coerce("width"),coerce("height"),coerce("minreducedwidth"),coerce("minreducedheight"),coerce("margin.l"),coerce("margin.r"),coerce("margin.t"),coerce("margin.b"),coerce("margin.pad"),coerce("margin.autoexpand"),i.width&&i.height&&ec.sanitizeMargins(o),j.getComponentMethod("grid","sizeDefaults")(i,o),coerce("paper_bgcolor"),coerce("separators",s.decimal+s.thousands),coerce("hidesources"),coerce("colorway"),coerce("datarevision");var Z=coerce("uirevision");coerce("editrevision",Z),coerce("selectionrevision",Z),j.getComponentMethod("modebar","supplyLayoutDefaults")(i,o),j.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(i,o,coerce),j.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(i,o,coerce),coerce("meta"),X.isPlainObject(i.transition)&&(coerce("transition.duration"),coerce("transition.easing"),coerce("transition.ordering")),j.getComponentMethod("calendars","handleDefaults")(i,o,"calendar"),j.getComponentMethod("fx","supplyLayoutGlobalDefaults")(i,o,coerce),X.coerce(i,o,er,"scattermode")},ec.plotAutoSize=function(i,o,s){var x,_,F=i._context||{},j=F.frameMargins,G=X.isPlotDiv(i);if(G&&i.emit("plotly_autosize"),F.fillFrame)x=window.innerWidth,_=window.innerHeight,document.body.style.overflow="hidden";else{var Z=G?window.getComputedStyle(i):{};if(x=getComputedSize(Z.width)||getComputedSize(Z.maxWidth)||s.width,_=getComputedSize(Z.height)||getComputedSize(Z.maxHeight)||s.height,N(j)&&j>0){var J=1-2*j;x=Math.round(J*x),_=Math.round(J*_)}}var $=ec.layoutAttributes.width.min,ee=ec.layoutAttributes.height.min;x<$&&(x=$),_<ee&&(_=ee);var et=!o.width&&Math.abs(s.width-x)>1,er=!o.height&&Math.abs(s.height-_)>1;(er||et)&&(et&&(s.width=x),er&&(s.height=_)),i._initialAutoSize||(i._initialAutoSize={width:x,height:_}),ec.sanitizeMargins(s)},ec.supplyLayoutModuleDefaults=function(i,o,s,x){var _,F,N,G=j.componentsRegistry,Z=o._basePlotModules,J=j.subplotsRegistry.cartesian;for(_ in G)(N=G[_]).includeBasePlot&&N.includeBasePlot(i,o);for(var $ in Z.length||Z.push(J),o._has("cartesian")&&(j.getComponentMethod("grid","contentDefaults")(i,o),J.finalizeSubplots(i,o)),o._subplots)o._subplots[$].sort(X.subplotSort);for(F=0;F<Z.length;F++)(N=Z[F]).supplyLayoutDefaults&&N.supplyLayoutDefaults(i,o,s);var ee=o._modules;for(F=0;F<ee.length;F++)(N=ee[F]).supplyLayoutDefaults&&N.supplyLayoutDefaults(i,o,s);var et=o._transformModules;for(F=0;F<et.length;F++)(N=et[F]).supplyLayoutDefaults&&N.supplyLayoutDefaults(i,o,s,x);for(_ in G)(N=G[_]).supplyLayoutDefaults&&N.supplyLayoutDefaults(i,o,s)},ec.purge=function(i){var o=i._fullLayout||{};void 0!==o._glcontainer&&(o._glcontainer.selectAll(".gl-canvas").remove(),o._glcontainer.remove(),o._glcanvas=null),o._modeBar&&o._modeBar.destroy(),i._transitionData&&(i._transitionData._interruptCallbacks&&(i._transitionData._interruptCallbacks.length=0),i._transitionData._animationRaf&&window.cancelAnimationFrame(i._transitionData._animationRaf)),X.clearThrottle(),X.clearResponsive(i),delete i.data,delete i.layout,delete i._fullData,delete i._fullLayout,delete i.calcdata,delete i.empty,delete i.fid,delete i.undoqueue,delete i.undonum,delete i.autoplay,delete i.changed,delete i._promises,delete i._redrawTimer,delete i._hmlumcount,delete i._hmpixcount,delete i._transitionData,delete i._transitioning,delete i._initialAutoSize,delete i._transitioningWithDuration,delete i._dragging,delete i._dragged,delete i._dragdata,delete i._hoverdata,delete i._snapshotInProgress,delete i._editing,delete i._mouseDownTime,delete i._legendMouseDownTime,i.removeAllListeners&&i.removeAllListeners()},ec.style=function(i){var o,s=i._fullLayout._visibleModules,x=[];for(o=0;o<s.length;o++){var _=s[o];_.style&&X.pushUnique(x,_.style)}for(o=0;o<x.length;o++)x[o](i)},ec.sanitizeMargins=function(i){if(i&&i.margin){var o,s=i.width,x=i.height,_=i.margin,F=s-(_.l+_.r),N=x-(_.t+_.b);F<0&&(o=(s-1)/(_.l+_.r),_.l=Math.floor(o*_.l),_.r=Math.floor(o*_.r)),N<0&&(o=(x-1)/(_.t+_.b),_.t=Math.floor(o*_.t),_.b=Math.floor(o*_.b))}},ec.clearAutoMarginIds=function(i){i._fullLayout._pushmarginIds={}},ec.allowAutoMargin=function(i,o){i._fullLayout._pushmarginIds[o]=1},ec.autoMargin=function(i,o,s){var x=i._fullLayout,_=x.width,F=x.height,N=x.margin,j=x.minreducedwidth,G=x.minreducedheight,Z=X.constrain(_-N.l-N.r,2,j),J=X.constrain(F-N.t-N.b,2,G),$=Math.max(0,_-Z),ee=Math.max(0,F-J),et=x._pushmargin,er=x._pushmarginIds;if(!1!==N.autoexpand){if(s){var en=s.pad;if(void 0===en&&(en=Math.min(12,N.l,N.r,N.t,N.b)),$){var ei=(s.l+s.r)/$;ei>1&&(s.l/=ei,s.r/=ei)}if(ee){var eo=(s.t+s.b)/ee;eo>1&&(s.t/=eo,s.b/=eo)}var es=void 0!==s.xl?s.xl:s.x,el=void 0!==s.xr?s.xr:s.x,eu=void 0!==s.yt?s.yt:s.y,ef=void 0!==s.yb?s.yb:s.y;et[o]={l:{val:es,size:s.l+en},r:{val:el,size:s.r+en},b:{val:ef,size:s.b+en},t:{val:eu,size:s.t+en}},er[o]=1}else delete et[o],delete er[o];if(!x._replotting)return ec.doAutoMargin(i)}},ec.doAutoMargin=function(i){var o,s=i._fullLayout,x=s.width,_=s.height;s._size||(s._size={}),initMargins(s);var F=s._size,G=s.margin,Z={t:0,b:0,l:0,r:0},J=X.extendFlat({},F),$=G.l,et=G.r,er=G.t,en=G.b,ei=s._pushmargin,eo=s._pushmarginIds,es=s.minreducedwidth,el=s.minreducedheight;if(!1!==G.autoexpand){for(var eu in ei)eo[eu]||delete ei[eu];var ef=i._fullLayout._reservedMargin;for(var eh in ef)for(var ed in ef[eh]){var ep=ef[eh][ed];Z[ed]=Math.max(Z[ed],ep)}for(var eg in ei.base={l:{val:0,size:$},r:{val:1,size:et},t:{val:1,size:er},b:{val:0,size:en}},Z){var em=0;for(var ey in ei)"base"!==ey&&N(ei[ey][eg].size)&&(em=ei[ey][eg].size>em?ei[ey][eg].size:em);var ev=Math.max(0,G[eg]-em);Z[eg]=Math.max(0,Z[eg]-ev)}for(var ex in ei){var e_=ei[ex].l||{},ew=ei[ex].b||{},eT=e_.val,ek=e_.size,eA=ew.val,eS=ew.size,eM=x-Z.r-Z.l,eC=_-Z.t-Z.b;for(var eE in ei){if(N(ek)&&ei[eE].r){var eL=ei[eE].r.val,eP=ei[eE].r.size;if(eL>eT){var eI=(ek*eL+(eP-eM)*eT)/(eL-eT),eO=(eP*(1-eT)+(ek-eM)*(1-eL))/(eL-eT);eI+eO>$+et&&($=eI,et=eO)}}if(N(eS)&&ei[eE].t){var eD=ei[eE].t.val,eR=ei[eE].t.size;if(eD>eA){var eB=(eS*eD+(eR-eC)*eA)/(eD-eA),ez=(eR*(1-eA)+(eS-eC)*(1-eD))/(eD-eA);eB+ez>en+er&&(en=eB,er=ez)}}}}}var eF=X.constrain(x-G.l-G.r,2,es),eN=X.constrain(_-G.t-G.b,2,el),ej=Math.max(0,x-eF),eU=Math.max(0,_-eN);if(ej){var eV=($+et)/ej;eV>1&&($/=eV,et/=eV)}if(eU){var eH=(en+er)/eU;eH>1&&(en/=eH,er/=eH)}if(F.l=Math.round($)+Z.l,F.r=Math.round(et)+Z.r,F.t=Math.round(er)+Z.t,F.b=Math.round(en)+Z.b,F.p=Math.round(G.pad),F.w=Math.round(x)-F.l-F.r,F.h=Math.round(_)-F.t-F.b,!s._replotting&&(ec.didMarginChange(J,F)||function(i){if("_redrawFromAutoMarginCount"in i._fullLayout)return!1;var o=ee.list(i,"",!0);for(var s in o)if(o[s].autoshift||o[s].shift)return!0;return!1}(i))){"_redrawFromAutoMarginCount"in s?s._redrawFromAutoMarginCount++:s._redrawFromAutoMarginCount=1;var eG=3*(1+Object.keys(eo).length);if(s._redrawFromAutoMarginCount<eG)return j.call("_doPlot",i);s._size=J,X.warn("Too many auto-margin redraws.")}o=ee.list(i,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(i){for(var s=0;s<o.length;s++){var x=o[s][i];x&&x()}})};var ep=["l","r","t","b","p","w","h"];function _transition(i,o,s){var x=!1,_=[ec.previousPromises,function(){if(i._transitionData)return i._transitioning=!1,function(i){var o=Promise.resolve();if(!i)return o;for(;i.length;)o=o.then(i.shift());return o}(i._transitionData._interruptCallbacks)},s.prepareFn,ec.rehover,ec.reselect,function(){return i.emit("plotly_transitioning",[]),new Promise(function(_){i._transitioning=!0,o.duration>0&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){x=!0}),s.redraw&&i._transitionData._interruptCallbacks.push(function(){return j.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var F=0,N=0;function makeCallback(){return F++,function(){N++,x||N!==F||i._transitionData&&(function(i){if(i)for(;i.length;)i.shift()}(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(s.redraw)return j.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(_))}}s.runFn(makeCallback),setTimeout(makeCallback())})}],F=X.syncOrAsync(_,i);return F&&F.then||(F=Promise.resolve()),F.then(function(){return i})}ec.didMarginChange=function(i,o){for(var s=0;s<ep.length;s++){var x=ep[s],_=i[x],F=o[x];if(!N(_)||Math.abs(F-_)>1)return!0}return!1},ec.graphJson=function(i,o,s,x,_,F){(_&&o&&!i._fullData||_&&!o&&!i._fullLayout)&&ec.supplyDefaults(i);var N=_?i._fullData:i.data,j=_?i._fullLayout:i.layout,G=(i._transitionData||{})._frames;function stripObj(i,o){if("function"==typeof i)return o?"_function_":null;if(X.isPlainObject(i)){var x,_={};return Object.keys(i).sort().forEach(function(F){if(-1===["_","["].indexOf(F.charAt(0))){if("function"==typeof i[F]){o&&(_[F]="_function");return}if("keepdata"===s){if("src"===F.substr(F.length-3))return}else if("keepstream"===s){if("string"==typeof(x=i[F+"src"])&&x.indexOf(":")>0&&!X.isPlainObject(i.stream))return}else if("keepall"!==s&&"string"==typeof(x=i[F+"src"])&&x.indexOf(":")>0)return;_[F]=stripObj(i[F],o)}}),_}return Array.isArray(i)?i.map(function(i){return stripObj(i,o)}):X.isTypedArray(i)?X.simpleMap(i,X.identity):X.isJSDate(i)?X.ms2DateTimeLocal(+i):i}var Z={data:(N||[]).map(function(i){var s=stripObj(i);return o&&delete s.fit,s})};if(!o&&(Z.layout=stripObj(j),_)){var J=j._size;Z.layout.computed={margin:{b:J.b,l:J.l,r:J.r,t:J.t}}}return G&&(Z.frames=stripObj(G)),F&&(Z.config=stripObj(i._context,!0)),"object"===x?Z:JSON.stringify(Z)},ec.modifyFrames=function(i,o){var s,x,_,F=i._transitionData._frames,N=i._transitionData._frameHash;for(s=0;s<o.length;s++)switch((x=o[s]).type){case"replace":_=x.value;var j=(F[x.index]||{}).name,G=_.name;F[x.index]=N[G]=_,G!==j&&(delete N[j],N[G]=_);break;case"insert":N[(_=x.value).name]=_,F.splice(x.index,0,_);break;case"delete":_=F[x.index],delete N[_.name],F.splice(x.index,1)}return Promise.resolve()},ec.computeFrame=function(i,o){var s,x,_,F,N=i._transitionData._frameHash;if(!o)throw Error("computeFrame must be given a string frame name");var j=N[o.toString()];if(!j)return!1;for(var G=[j],Z=[j.name];j.baseframe&&(j=N[j.baseframe.toString()])&&-1===Z.indexOf(j.name);)G.push(j),Z.push(j.name);for(var X={};j=G.pop();)if(j.layout&&(X.layout=ec.extendLayout(X.layout,j.layout)),j.data){if(X.data||(X.data=[]),!(x=j.traces))for(s=0,x=[];s<j.data.length;s++)x[s]=s;for(X.traces||(X.traces=[]),s=0;s<j.data.length;s++)null!=(_=x[s])&&(-1===(F=X.traces.indexOf(_))&&(F=X.data.length,X.traces[F]=_),X.data[F]=ec.extendTrace(X.data[F],j.data[s]))}return X},ec.recomputeFrameHash=function(i){for(var o=i._transitionData._frameHash={},s=i._transitionData._frames,x=0;x<s.length;x++){var _=s[x];_&&_.name&&(o[_.name]=_)}},ec.extendObjectWithContainers=function(i,o,s){var x,_,F,N,j,G,Z,J=X.extendDeepNoArrays({},o||{}),$=X.expandObjectPaths(J),ee={};if(s&&s.length)for(F=0;F<s.length;F++)void 0===(_=(x=X.nestedProperty($,s[F])).get())?X.nestedProperty(ee,s[F]).set(null):(x.set(null),X.nestedProperty(ee,s[F]).set(_));if(i=X.extendDeepNoArrays(i||{},$),s&&s.length){for(F=0;F<s.length;F++)if(G=X.nestedProperty(ee,s[F]).get()){for(Array.isArray(Z=(j=X.nestedProperty(i,s[F])).get())||(Z=[],j.set(Z)),N=0;N<G.length;N++){var et=G[N];null===et?Z[N]=null:Z[N]=ec.extendObjectWithContainers(Z[N],et)}j.set(Z)}}return i},ec.dataArrayContainers=["transforms","dimensions"],ec.layoutArrayContainers=j.layoutArrayContainers,ec.extendTrace=function(i,o){return ec.extendObjectWithContainers(i,o,ec.dataArrayContainers)},ec.extendLayout=function(i,o){return ec.extendObjectWithContainers(i,o,ec.layoutArrayContainers)},ec.transition=function(i,o,s,x,_,F){var N={redraw:_.redraw},j={},G=[];return N.prepareFn=function(){for(var _=Array.isArray(o)?o.length:0,F=x.slice(0,_),N=0;N<F.length;N++){var Z=F[N],J=i._fullData[Z]._module;if(J){if(J.animatable){var $=J.basePlotModule.name;j[$]||(j[$]=[]),j[$].push(Z)}i.data[F[N]]=ec.extendTrace(i.data[F[N]],o[N])}}var ee=X.expandObjectPaths(X.extendDeepNoArrays({},s)),et=/^[xy]axis[0-9]*$/;for(var er in ee)et.test(er)&&delete ee[er].range;ec.extendLayout(i.layout,ee),delete i.calcdata,ec.supplyDefaults(i),ec.doCalcdata(i);var en=X.expandObjectPaths(s);if(en){var ei=i._fullLayout._plots;for(var eo in ei){var es=ei[eo],el=es.xaxis,eu=es.yaxis,ef=el.range.slice(),eh=eu.range.slice(),ed=null,ep=null,eg=null,em=null;Array.isArray(en[el._name+".range"])?ed=en[el._name+".range"].slice():Array.isArray((en[el._name]||{}).range)&&(ed=en[el._name].range.slice()),Array.isArray(en[eu._name+".range"])?ep=en[eu._name+".range"].slice():Array.isArray((en[eu._name]||{}).range)&&(ep=en[eu._name].range.slice()),ef&&ed&&(el.r2l(ef[0])!==el.r2l(ed[0])||el.r2l(ef[1])!==el.r2l(ed[1]))&&(eg={xr0:ef,xr1:ed}),eh&&ep&&(eu.r2l(eh[0])!==eu.r2l(ep[0])||eu.r2l(eh[1])!==eu.r2l(ep[1]))&&(em={yr0:eh,yr1:ep}),(eg||em)&&G.push(X.extendFlat({plotinfo:es},eg,em))}}return Promise.resolve()},N.runFn=function(o){var x,_,N=i._fullLayout._basePlotModules,Z=G.length;if(s)for(_=0;_<N.length;_++)N[_].transitionAxes&&N[_].transitionAxes(i,G,F,o);for(var J in Z?((x=X.extendFlat({},F)).duration=0,delete j.cartesian):x=F,j){var $=j[J];i._fullData[$[0]]._module.basePlotModule.plot(i,$,x,o)}},_transition(i,F,N)},ec.transitionFromReact=function(i,o,s,x){var _=i._fullLayout,F=_.transition,N={},j=[];return N.prepareFn=function(){var i=_._plots;for(var F in N.redraw=!1,"some"===o.anim&&(N.redraw=!0),"some"===s.anim&&(N.redraw=!0),i){var G=i[F],Z=G.xaxis,J=G.yaxis,$=x[Z._name].range.slice(),ee=x[J._name].range.slice(),et=Z.range.slice(),er=J.range.slice();Z.setScale(),J.setScale();var en=null,ei=null;(Z.r2l($[0])!==Z.r2l(et[0])||Z.r2l($[1])!==Z.r2l(et[1]))&&(en={xr0:$,xr1:et}),(J.r2l(ee[0])!==J.r2l(er[0])||J.r2l(ee[1])!==J.r2l(er[1]))&&(ei={yr0:ee,yr1:er}),(en||ei)&&j.push(X.extendFlat({plotinfo:G},en,ei))}return Promise.resolve()},N.runFn=function(s){for(var x,_,N,G=i._fullData,Z=i._fullLayout._basePlotModules,J=[],$=0;$<G.length;$++)J.push($);function transitionAxes(){if(i._fullLayout)for(var o=0;o<Z.length;o++)Z[o].transitionAxes&&Z[o].transitionAxes(i,j,x,s)}function transitionTraces(){if(i._fullLayout)for(var o=0;o<Z.length;o++)Z[o].plot(i,N,_,s)}j.length&&o.anim?"traces first"===F.ordering?(x=X.extendFlat({},F,{duration:0}),N=J,_=F,setTimeout(transitionAxes,F.duration),transitionTraces()):(x=F,N=null,_=X.extendFlat({},F,{duration:0}),setTimeout(transitionTraces,x.duration),transitionAxes()):j.length?(x=F,transitionAxes()):o.anim&&(N=J,_=F,transitionTraces())},_transition(i,F,N)},ec.doCalcdata=function(i,o){var s,x,_,F,N=ee.list(i),Z=i._fullData,J=i._fullLayout,et=Array(Z.length),er=(i.calcdata||[]).slice();for(_=0,i.calcdata=et,J._numBoxes=0,J._numViolins=0,J._violinScaleGroupStats={},i._hmpixcount=0,i._hmlumcount=0,J._piecolormap={},J._sunburstcolormap={},J._treemapcolormap={},J._iciclecolormap={},J._funnelareacolormap={};_<Z.length;_++)if(Array.isArray(o)&&-1===o.indexOf(_)){et[_]=er[_];continue}for(_=0;_<Z.length;_++)(s=Z[_])._arrayAttrs=G.findArrayAttributes(s),s._extremes={};var en=J._subplots.polar||[];for(_=0;_<en.length;_++)N.push(J[en[_]].radialaxis,J[en[_]].angularaxis);for(var ei in J._colorAxes){var eo=J[ei];!1!==eo.cauto&&(delete eo.cmin,delete eo.cmax)}var es=!1;function calci(o,_){if(!!(x=(s=Z[o])._module).isContainer===_){var N=[];if(!0===s.visible&&0!==s._length){delete s._indexToPoints;var j=s.transforms||[];for(F=j.length-1;F>=0;F--)if(j[F].enabled){s._indexToPoints=j[F]._indexToPoints;break}x&&x.calc&&(N=x.calc(i,s))}Array.isArray(N)&&N[0]||(N=[{x:$,y:$}]),N[0].t||(N[0].t={}),N[0].trace=s,et[o]=N}}for(setupAxisCategories(N,Z,J),_=0;_<Z.length;_++)calci(_,!0);for(_=0;_<Z.length;_++)!function(o){if(x=(s=Z[o])._module,!0===s.visible&&s.transforms){if(x&&x.calc){var _=x.calc(i,s);_[0]&&_[0].t&&_[0].t._scene&&delete _[0].t._scene.dirty}for(F=0;F<s.transforms.length;F++){var N=s.transforms[F];(x=eu[N.type])&&x.calcTransform&&(s._hasCalcTransform=!0,es=!0,x.calcTransform(i,s,N))}}}(_);for(es&&setupAxisCategories(N,Z,J),_=0;_<Z.length;_++)calci(_,!0);for(_=0;_<Z.length;_++)calci(_,!1);doCrossTraceCalc(i);var el=function(i,o){var s=[],x={min:function(i){return X.aggNums(Math.min,null,i)},max:function(i){return X.aggNums(Math.max,null,i)},sum:function(i){return X.aggNums(function(i,o){return i+o},null,i)},total:function(i){return X.aggNums(function(i,o){return i+o},null,i)},mean:function(i){return X.mean(i)},median:function(i){return X.median(i)}};for(el=0;el<i.length;el++){var _=i[el];if("category"===_.type){var F=_.categoryorder.match(eg);if(F){var N=F[1],G=F[2],Z=_._id.charAt(0),J="x"===Z,$=[];for(ec=0;ec<_._categories.length;ec++)$.push([_._categories[ec],[]]);for(ec=0;ec<_._traceIndices.length;ec++){var et=_._traceIndices[ec],er=o._fullData[et];if(!0===er.visible){var en=er.type;j.traceIs(er,"histogram")&&(delete er._xautoBinFinished,delete er._yautoBinFinished);var ei="splom"===en,eo="scattergl"===en,es=o.calcdata[et];for(eu=0;eu<es.length;eu++){var el,ec,eu,ef,eh,ed,ep,em=es[eu];if(ei){var ey=er._axesDim[_._id];if(!J){var ev=er._diag[ey][0];ev&&(_=o._fullLayout[ee.id2name(ev)])}var ex=em.trace.dimensions[ey].values;for(ef=0;ef<ex.length;ef++)for(eh=0,ed=_._categoriesMap[ex[ef]];eh<em.trace.dimensions.length;eh++)if(eh!==ey){var e_=em.trace.dimensions[eh];$[ed][1].push(e_.values[ef])}}else if(eo){for(ef=0;ef<em.t.x.length;ef++)J?(ed=em.t.x[ef],ep=em.t.y[ef]):(ed=em.t.y[ef],ep=em.t.x[ef]),$[ed][1].push(ep);em.t&&em.t._scene&&delete em.t._scene.dirty}else if(em.hasOwnProperty("z")){ep=em.z;var ew=function(i,s,x){var _=s._id.charAt(0);if("histogram2dcontour"!==i)return function(i,o){return"y"===_?o:i};var F=s._counterAxes[0],N=ee.getFromId(o,F),j="x"===_||"x"===F&&"category"===N.type,G="y"===_||"y"===F&&"category"===N.type;return function(i,o){return 0===i||0===o||j&&i===x[o].length-1||G&&o===x.length-1?-1:("y"===_?o:i)-1}}(er.type,_,ep);for(ef=0;ef<ep.length;ef++)for(eh=0;eh<ep[ef].length;eh++)(ed=ew(eh,ef))+1&&$[ed][1].push(ep[ef][eh])}else for(void 0===(ed=em.p)&&(ed=em[Z]),void 0===(ep=em.s)&&(ep=em.v),void 0===ep&&(ep=J?em.y:em.x),Array.isArray(ep)||(ep=void 0===ep?[]:[ep]),ef=0;ef<ep.length;ef++)$[ed][1].push(ep[ef])}}}_._categoriesValue=$;var eT=[];for(ec=0;ec<$.length;ec++)eT.push([$[ec][0],x[N]($[ec][1])]);eT.sort(function(i,o){return i[1]-o[1]}),_._categoriesAggregatedValue=eT,_._initialCategories=eT.map(function(i){return i[0]}),"descending"===G&&_._initialCategories.reverse(),s=s.concat(_.sortByInitialCategories())}}}return s}(N,i);if(el.length){for(_=0,J._numBoxes=0,J._numViolins=0;_<el.length;_++)calci(el[_],!0);for(_=0;_<el.length;_++)calci(el[_],!1);doCrossTraceCalc(i)}j.getComponentMethod("fx","calc")(i),j.getComponentMethod("errorbars","calc")(i)};var eg=/(total|sum|min|max|mean|median) (ascending|descending)/;function setupAxisCategories(i,o,s){var x={};function setupOne(i){i.clearCalc(),"multicategory"===i.type&&i.setupMultiCategory(o),x[i._id]=1}X.simpleMap(i,setupOne);for(var _=s._axisMatchGroups||[],F=0;F<_.length;F++)for(var N in _[F])x[N]||setupOne(s[ee.id2name(N)])}function doCrossTraceCalc(i){var o,s,x,_=i._fullLayout,F=_._visibleModules,N={};for(s=0;s<F.length;s++){var j=F[s],G=j.crossTraceCalc;if(G){var Z=j.basePlotModule.name;N[Z]?X.pushUnique(N[Z],G):N[Z]=[G]}}for(x in N){var J=N[x],$=_._subplots[x];if(Array.isArray($))for(o=0;o<$.length;o++){var ee=$[o],et="cartesian"===x?_._plots[ee]:_[ee];for(s=0;s<J.length;s++)J[s](i,et,ee)}else for(s=0;s<J.length;s++)J[s](i)}}ec.rehover=function(i){i._fullLayout._rehover&&i._fullLayout._rehover()},ec.redrag=function(i){i._fullLayout._redrag&&i._fullLayout._redrag()},ec.reselect=function(i){var o=i._fullLayout,s=(i.layout||{}).selections,x=o._previousSelections;o._previousSelections=s;var _=o._reselect||JSON.stringify(s)!==JSON.stringify(x);j.getComponentMethod("selections","reselect")(i,_)},ec.generalUpdatePerTraceModule=function(i,o,s,x){var _,F=o.traceHash,N={};for(_=0;_<s.length;_++){var j=s[_],G=j[0].trace;G.visible&&(N[G.type]=N[G.type]||[],N[G.type].push(j))}for(var Z in F)if(!N[Z]){var J=F[Z][0];J[0].trace.visible=!1,N[Z]=[J]}for(var $ in N){var ee=N[$];ee[0][0].trace._module.plot(i,o,X.filterVisible(ee),x)}o.traceHash=N},ec.plotBasePlot=function(i,o,s,x,_){var F=j.getModule(i),N=eo(o.calcdata,F)[0];F.plot(o,N,x,_)},ec.cleanBasePlot=function(i,o,s,x,_){var F=_._has&&_._has(i),N=s._has&&s._has(i);F&&!N&&_["_"+i+"layer"].selectAll("g.trace").remove()}},9813:function(i){"use strict";i.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(i,o,s){"use strict";var x=s(71828),_=s(61082).tester,F=x.findIndexOfMin,N=x.isAngleInsideSector,j=x.angleDelta,G=x.angleDist;function findIntersectionXY(i,o,s,x){var _,F,N=x[0],j=x[1],G=clampTiny(Math.sin(o)-Math.sin(i)),Z=clampTiny(Math.cos(o)-Math.cos(i)),X=Math.tan(s),J=clampTiny(1/X),$=G/Z,ee=j-$*N;return J?G&&Z?(_=ee/(X-$),F=X*_):Z?(_=j*J,F=j):(_=N,F=N*X):G&&Z?(_=0,F=ee):Z?(_=0,F=j):_=F=NaN,[_,F]}function makePolygon(i,o,s,_){return x.isFullCircle([o,s])?function(i,o){var s,x=o.length,_=Array(x+1);for(s=0;s<x;s++){var F=o[s];_[s]=[i*Math.cos(F),i*Math.sin(F)]}return _[s]=_[0].slice(),_}(i,_):function(i,o,s,_){var j,Z,X,J,$=_.length,ee=[];function a2xy(o){return[i*Math.cos(o),i*Math.sin(o)]}function cycleIndex(i){return x.mod(i,$)}function isInside(i){return N(i,[o,s])}var et=F(_,function(i){return isInside(i)?G(i,o):1/0}),er=findIntersectionXY(j=_[et],_[cycleIndex(et-1)],o,a2xy(j));for(ee.push(er),X=et,J=0;J<$;X++,J++){var en=_[cycleIndex(X)];if(!isInside(en))break;ee.push(a2xy(en))}var ei=F(_,function(i){return isInside(i)?G(i,s):1/0}),eo=findIntersectionXY(Z=_[ei],_[cycleIndex(ei+1)],s,a2xy(Z));return ee.push(eo),ee.push([0,0]),ee.push(ee[0].slice()),ee}(i,o,s,_)}function clampTiny(i){return Math.abs(i)>1e-10?i:0}function transformForSVG(i,o,s){o=o||0,s=s||0;for(var x=i.length,_=Array(x),F=0;F<x;F++){var N=i[F];_[F]=[o+N[0],s-N[1]]}return _}i.exports={isPtInsidePolygon:function(i,o,s,x,F){if(!N(o,x))return!1;s[0]<s[1]?(j=s[0],G=s[1]):(j=s[1],G=s[0]);var j,G,Z=_(makePolygon(j,x[0],x[1],F)),X=_(makePolygon(G,x[0],x[1],F)),J=[i*Math.cos(o),i*Math.sin(o)];return X.contains(J)&&!Z.contains(J)},findPolygonOffset:function(i,o,s,x){for(var _=1/0,F=1/0,N=makePolygon(i,o,s,x),j=0;j<N.length;j++){var G=N[j];_=Math.min(_,G[0]),F=Math.min(F,-G[1])}return[_,F]},findEnclosingVertexAngles:function(i,o){var s=F(o,function(o){var s=j(o,i);return s>0?s:1/0}),_=x.mod(s+1,o.length);return[o[s],o[_]]},findIntersectionXY:findIntersectionXY,findXYatLength:function(i,o,s,x){var _=-o*s,F=o*o+1,N=2*(o*_-s),j=Math.sqrt(N*N-4*F*(_*_+s*s-i*i)),G=(-N+j)/(2*F),Z=(-N-j)/(2*F);return[[G,o*G+_+x],[Z,o*Z+_+x]]},clampTiny:clampTiny,pathPolygon:function(i,o,s,x,_,F){return"M"+transformForSVG(makePolygon(i,o,s,x),_,F).join("L")},pathPolygonAnnulus:function(i,o,s,x,_,F,N){i<o?(j=i,G=o):(j=o,G=i);var j,G,Z=transformForSVG(makePolygon(j,s,x,_),F,N);return"M"+transformForSVG(makePolygon(G,s,x,_),F,N).reverse().join("L")+"M"+Z.join("L")}}},23580:function(i,o,s){"use strict";var x=s(27659).AU,_=s(71828).counterRegex,F=s(77997),N=s(9813),j=N.attr,G=N.name,Z=_(G),X={};X[j]={valType:"subplotid",dflt:G,editType:"calc"},i.exports={attr:j,name:G,idRoot:G,idRegex:Z,attrRegex:Z,attributes:X,layoutAttributes:s(73812),supplyLayoutDefaults:s(68993),plot:function(i){for(var o=i._fullLayout,s=i.calcdata,_=o._subplots[G],N=0;N<_.length;N++){var j=_[N],Z=x(s,G,j),X=o[j]._subplot;X||(X=F(i,j),o[j]._subplot=X),X.plot(Z,o,i._promises)}},clean:function(i,o,s,x){for(var _=x._subplots[G]||[],F=x._has&&x._has("gl"),N=o._has&&o._has("gl"),j=F&&!N,Z=0;Z<_.length;Z++){var X=_[Z],J=x[X]._subplot;if(!o[X]&&J)for(var $ in J.framework.remove(),J.layers["radial-axis-title"].remove(),J.clipPaths)J.clipPaths[$].remove();j&&J._scene&&(J._scene.destroy(),J._scene=null)}},toSVG:s(93612).toSVG}},73812:function(i,o,s){"use strict";var x=s(22399),_=s(13838),F=s(27670).Y,N=s(71828).extendFlat,j=s(30962).overrideAll,G=j({color:_.color,showline:N({},_.showline,{dflt:!0}),linecolor:_.linecolor,linewidth:_.linewidth,showgrid:N({},_.showgrid,{dflt:!0}),gridcolor:_.gridcolor,gridwidth:_.gridwidth,griddash:_.griddash},"plot","from-root"),Z=j({tickmode:_.minor.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:_.ticks,ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,ticklabelstep:_.ticklabelstep,showticklabels:_.showticklabels,labelalias:_.labelalias,showtickprefix:_.showtickprefix,tickprefix:_.tickprefix,showticksuffix:_.showticksuffix,ticksuffix:_.ticksuffix,showexponent:_.showexponent,exponentformat:_.exponentformat,minexponent:_.minexponent,separatethousands:_.separatethousands,tickfont:_.tickfont,tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,layer:_.layer},"plot","from-root"),X={visible:N({},_.visible,{dflt:!0}),type:N({},_.type,{values:["-","linear","log","date","category"]}),autotypenumbers:_.autotypenumbers,autorangeoptions:{minallowed:_.autorangeoptions.minallowed,maxallowed:_.autorangeoptions.maxallowed,clipmin:_.autorangeoptions.clipmin,clipmax:_.autorangeoptions.clipmax,include:_.autorangeoptions.include,editType:"plot"},autorange:N({},_.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:N({},_.minallowed,{editType:"plot"}),maxallowed:N({},_.maxallowed,{editType:"plot"}),range:N({},_.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:_.categoryorder,categoryarray:_.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:N({},_.title.text,{editType:"plot",dflt:""}),font:N({},_.title.font,{editType:"plot"}),editType:"plot"},hoverformat:_.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:_._deprecated.title,titlefont:_._deprecated.titlefont}};N(X,G,Z);var J={visible:N({},_.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:_.autotypenumbers,categoryorder:_.categoryorder,categoryarray:_.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:_.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};N(J,G,Z),i.exports={domain:F({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:x.background},radialaxis:X,angularaxis:J,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(44467),N=s(49119),j=s(27659).NG,G=s(26218),Z=s(38701),X=s(96115),J=s(89426),$=s(15258),ee=s(92128),et=s(23074),er=s(4322),en=s(73812),ei=s(12101),eo=s(9813),es=eo.axisNames;function handleDefaults(i,o,s,N){var el=s("bgcolor");N.bgColor=_.combine(el,N.paper_bgcolor);var ec=s("sector");s("hole");var eu=j(N.fullData,eo.name,N.id),ef=N.layoutOut;function coerceAxis(i,o){return s(ev+"."+i,o)}for(var eh=0;eh<es.length;eh++){ev=es[eh],x.isPlainObject(i[ev])||(i[ev]={});var ed=i[ev],ep=F.newContainer(o,ev);ep._id=ep._name=ev,ep._attr=N.id+"."+ev,ep._traceIndices=eu.map(function(i){return i._expandedIndex});var eg=eo.axisName2dataArray[ev],em=function(i,o,s,x,_,F){var N,j=s("autotypenumbers",F.autotypenumbersDflt);if("-"===s("type")){for(var G=0;G<x.length;G++)if(x[G].visible){N=x[G];break}N&&N[_]&&(o.type=er(N[_],"gregorian",{noMultiCategory:!0,autotypenumbers:j})),"-"===o.type?o.type="linear":i.type=o.type}return o.type}(ed,ep,coerceAxis,eu,eg,N);$(ed,ep,coerceAxis,{axData:eu,dataAttr:eg});var ey=coerceAxis("visible");switch(ei(ep,o,ef),coerceAxis("uirevision",o.uirevision),ep._m=1,ev){case"radialaxis":coerceAxis("minallowed"),coerceAxis("maxallowed");var ev,ex,e_=coerceAxis("range"),ew=ep.getAutorangeDflt(e_),eT=coerceAxis("autorange",ew);e_&&(null===e_[0]&&null===e_[1]||(null===e_[0]||null===e_[1])&&("reversed"===eT||!0===eT)||null!==e_[0]&&("min"===eT||"max reversed"===eT)||null!==e_[1]&&("max"===eT||"min reversed"===eT))&&(e_=void 0,delete ep.range,ep.autorange=!0,ex=!0),ex||(eT=coerceAxis("autorange",ew=ep.getAutorangeDflt(e_))),ed.autorange=eT,eT&&(et(coerceAxis,eT,e_),("linear"===em||"-"===em)&&coerceAxis("rangemode"),ep.isReversed()&&(ep._m=-1)),ep.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===em){x.log("Polar plots do not support date angular axes yet.");for(var ek=0;ek<eu.length;ek++)eu[ek].visible=!1;em=ed.type=ep.type="linear"}coerceAxis("linear"===em?"thetaunit":"period");var eA=coerceAxis("direction");coerceAxis("rotation",{counterclockwise:0,clockwise:90}[eA])}if(J(ed,ep,coerceAxis,ep.type,{tickSuffixDflt:"degrees"===ep.thetaunit?"\xb0":void 0}),ey){var eS,eM,eC,eE,eL=N.font||{};eM=(eS=coerceAxis("color"))===ed.color?eS:eL.color,eC=eL.size,eE=eL.family,G(ed,ep,coerceAxis,ep.type),X(ed,ep,coerceAxis,ep.type,{font:{color:eM,size:eC,family:eE}}),Z(ed,ep,coerceAxis,{outerTicks:!0}),ee(ed,ep,coerceAxis,{dfltColor:eS,bgColor:N.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:en[ev]}),coerceAxis("layer"),"radialaxis"===ev&&(coerceAxis("side"),coerceAxis("angle",ec[0]),coerceAxis("title.text"),x.coerceFont(coerceAxis,"title.font",{color:eM,size:x.bigFont(eC),family:eE}))}"category"!==em&&coerceAxis("hoverformat"),ep._input=ed}"category"===o.angularaxis.type&&s("gridshape")}i.exports=function(i,o,s){N(i,o,s,{type:eo.name,attributes:en,handleDefaults:handleDefaults,font:o.font,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,fullData:s,layoutOut:o})}},77997:function(i,o,s){"use strict";var x=s(39898),_=s(84267),F=s(73972),N=s(71828),j=N.strRotate,G=N.strTranslate,Z=s(7901),X=s(91424),J=s(74875),$=s(89298),ee=s(21994),et=s(12101),er=s(71739).doAutoRange,en=s(29323),ei=s(28569),eo=s(30211),es=s(92998),el=s(47322).prepSelect,ec=s(47322).selectOnClick,eu=s(47322).clearOutline,ef=s(6964),eh=s(33306),ed=s(61549).redrawReglTraces,ep=s(18783).MID_SHIFT,eg=s(9813),em=s(10869),ey=s(23893),ev=ey.smith,ex=ey.reactanceArc,e_=ey.resistanceArc,ew=ey.smithTransform,eT=N._,ek=N.mod,eA=N.deg2rad,eS=N.rad2deg;function Polar(i,o,s){this.isSmith=s||!1,this.id=o,this.gd=i,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var x=i._fullLayout,_="clip"+x._uid+o;this.clipIds.forTraces=_+"-for-traces",this.clipPaths.forTraces=x._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=x["_"+(s?"smith":"polar")+"layer"].append("g").attr("class",o),this.getHole=function(i){return this.isSmith?0:i.hole},this.getSector=function(i){return this.isSmith?[0,360]:i.sector},this.getRadial=function(i){return this.isSmith?i.realaxis:i.radialaxis},this.getAngular=function(i){return this.isSmith?i.imaginaryaxis:i.angularaxis},s||(this.radialTickLayout=null,this.angularTickLayout=null)}var eM=Polar.prototype;function strTickLayout(i){var o=i.ticks+String(i.ticklen)+String(i.showticklabels);return"side"in i&&(o+=i.side),o}function snapToVertexAngle(i,o){var s=N.findIndexOfMin(o,function(o){return N.angleDist(i,o)});return o[s]}function updateElement(i,o,s){return o?(i.attr("display",null),i.attr(s)):i&&i.attr("display","none"),i}i.exports=function(i,o,s){return new Polar(i,o,s)},eM.plot=function(i,o){for(var s=o[this.id],x=!1,_=0;_<i.length;_++)if(!1===i[_][0].trace.cliponaxis){x=!0;break}this._hasClipOnAxisFalse=x,this.updateLayers(o,s),this.updateLayout(o,s),J.generalUpdatePerTraceModule(this.gd,this,i,s),this.updateFx(o,s),this.isSmith&&(delete s.realaxis.range,delete s.imaginaryaxis.range)},eM.updateLayers=function(i,o){var s=this.isSmith,_=this.layers,F=this.getRadial(o),N=this.getAngular(o),j=eg.layerNames,G=j.indexOf("frontplot"),Z=j.slice(0,G),X="below traces"===N.layer,J="below traces"===F.layer;X&&Z.push("angular-line"),J&&Z.push("radial-line"),X&&Z.push("angular-axis"),J&&Z.push("radial-axis"),Z.push("frontplot"),X||Z.push("angular-line"),J||Z.push("radial-line"),X||Z.push("angular-axis"),J||Z.push("radial-axis");var $=(s?"smith":"polar")+"sublayer",ee=this.framework.selectAll("."+$).data(Z,String);ee.enter().append("g").attr("class",function(i){return $+" "+i}).each(function(i){var o=_[i]=x.select(this);switch(i){case"frontplot":s||o.append("g").classed("barlayer",!0),o.append("g").classed("scatterlayer",!0);break;case"backplot":o.append("g").classed("maplayer",!0);break;case"plotbg":_.bg=o.append("path");break;case"radial-grid":case"angular-grid":o.style("fill","none");break;case"radial-line":o.append("line").style("fill","none");break;case"angular-line":o.append("path").style("fill","none")}}),ee.order()},eM.updateLayout=function(i,o){var s,x,_,F,N,j,J,$,ee,et,er,en,ei,eo,es,el=this.layers,ec=i._size,eu=this.getRadial(o),ef=this.getAngular(o),eh=o.domain.x,ed=o.domain.y;this.xOffset=ec.l+ec.w*eh[0],this.yOffset=ec.t+ec.h*(1-ed[1]);var ep=this.xLength=ec.w*(eh[1]-eh[0]),eg=this.yLength=ec.h*(ed[1]-ed[0]),em=this.getSector(o);this.sectorInRad=em.map(eA);var ey=this.sectorBBox=(x=em[0],_=em[1]-x,N=(F=ek(x,360))+_,j=Math.cos(eA(F)),J=Math.sin(eA(F)),$=Math.cos(eA(N)),ee=Math.sin(eA(N)),s=F<=90&&N>=90||F>90&&N>=450?1:J<=0&&ee<=0?0:Math.max(J,ee),[F<=180&&N>=180||F>180&&N>=540?-1:j>=0&&$>=0?0:Math.min(j,$),F<=270&&N>=270||F>270&&N>=630?-1:J>=0&&ee>=0?0:Math.min(J,ee),N>=360?1:j<=0&&$<=0?0:Math.max(j,$),s]),ev=ey[2]-ey[0],ex=Math.abs((ey[3]-ey[1])/ev);eg/ep>ex?(et=ep,eo=(eg-(er=ep*ex))/ec.h/2,en=[eh[0],eh[1]],ei=[ed[0]+eo,ed[1]-eo]):(et=eg/ex,er=eg,eo=(ep-et)/ec.w/2,en=[eh[0]+eo,eh[1]-eo],ei=[ed[0],ed[1]]),this.xLength2=et,this.yLength2=er,this.xDomain2=en,this.yDomain2=ei;var e_=this.xOffset2=ec.l+ec.w*en[0],ew=this.yOffset2=ec.t+ec.h*(1-ei[1]),eT=this.radius=et/ev,eS=this.innerRadius=this.getHole(o)*eT,eM=this.cx=e_-eT*ey[0],eC=this.cy=ew+eT*ey[3],eE=this.cxx=eM-e_,eL=this.cyy=eC-ew,eP=eu.side;"counterclockwise"===eP?(es=eP,eP="top"):"clockwise"===eP&&(es=eP,eP="bottom"),this.radialAxis=this.mockAxis(i,o,eu,{_id:"x",side:eP,_trueSide:es,domain:[eS/ec.w,eT/ec.w]}),this.angularAxis=this.mockAxis(i,o,ef,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(i,o),this.updateAngularAxis(i,o),this.updateRadialAxis(i,o),this.updateRadialAxisTitle(i,o),this.xaxis=this.mockCartesianAxis(i,o,{_id:"x",domain:en}),this.yaxis=this.mockCartesianAxis(i,o,{_id:"y",domain:ei});var eI=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",eI).attr("transform",G(eE,eL)),el.frontplot.attr("transform",G(e_,ew)).call(X.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),el.bg.attr("d",eI).attr("transform",G(eM,eC)).call(Z.fill,o.bgcolor)},eM.mockAxis=function(i,o,s,x){var _=N.extendFlat({},s,x);return et(_,o,i),_},eM.mockCartesianAxis=function(i,o,s){var x=this,_=x.isSmith,F=s._id,j=N.extendFlat({type:"linear"},s);ee(j,i);var G={x:[0,2],y:[1,3]};return j.setRange=function(){var i=x.sectorBBox,s=G[F],_=x.radialAxis._rl,N=(_[1]-_[0])/(1-x.getHole(o));j.range=[i[s[0]]*N,i[s[1]]*N]},j.isPtWithinRange="x"!==F||_?function(){return!0}:function(i){return x.isPtInside(i)},j.setRange(),j.setScale(),j},eM.doAutoRange=function(i,o){var s=this.gd,x=this.radialAxis,_=this.getRadial(o);er(s,x);var F=x.range;_.range=F.slice(),_._input.range=F.slice(),x._rl=[x.r2l(F[0],null,"gregorian"),x.r2l(F[1],null,"gregorian")]},eM.updateRadialAxis=function(i,o){var s=this,x=s.gd,_=s.layers,F=s.radius,X=s.innerRadius,J=s.cx,ee=s.cy,et=s.getRadial(o),er=ek(s.getSector(o)[0],360),en=s.radialAxis,ei=X<F,eo=s.isSmith;eo||(s.fillViewInitialKey("radialaxis.angle",et.angle),s.fillViewInitialKey("radialaxis.range",en.range.slice()),en.setGeometry()),"auto"===en.tickangle&&er>90&&er<=270&&(en.tickangle=180);var es=eo?function(i){var o=ew(s,ev([i.x,0]));return G(o[0]-J,o[1]-ee)}:function(i){return G(en.l2p(i.x)+X,0)},el=eo?function(i){return e_(s,i.x,-1/0,1/0)}:function(i){return s.pathArc(en.r2p(i.x)+X)},ec=strTickLayout(et);if(s.radialTickLayout!==ec&&(_["radial-axis"].selectAll(".xtick").remove(),s.radialTickLayout=ec),ei){en.setScale();var eu=0,ef=eo?(en.tickvals||[]).filter(function(i){return i>=0}).map(function(i){return $.tickText(en,i,!0,!1)}):$.calcTicks(en),eh=eo?ef:$.clipEnds(en,ef),ed=$.getTickSigns(en)[2];eo&&(("top"===en.ticks&&"bottom"===en.side||"bottom"===en.ticks&&"top"===en.side)&&(ed=-ed),"top"===en.ticks&&"top"===en.side&&(eu=-en.ticklen),"bottom"===en.ticks&&"bottom"===en.side&&(eu=en.ticklen)),$.drawTicks(x,en,{vals:ef,layer:_["radial-axis"],path:$.makeTickPath(en,0,ed),transFn:es,crisp:!1}),$.drawGrid(x,en,{vals:eh,layer:_["radial-grid"],path:el,transFn:N.noop,crisp:!1}),$.drawLabels(x,en,{vals:ef,layer:_["radial-axis"],transFn:es,labelFns:$.makeLabelFns(en,eu)})}var ep=s.radialAxisAngle=s.vangles?eS(snapToVertexAngle(eA(et.angle),s.vangles)):et.angle,eg=G(J,ee),em=eg+j(-ep);updateElement(_["radial-axis"],ei&&(et.showticklabels||et.ticks),{transform:em}),updateElement(_["radial-grid"],ei&&et.showgrid,{transform:eo?"":eg}),updateElement(_["radial-line"].select("line"),ei&&et.showline,{x1:eo?-F:X,y1:0,x2:F,y2:0,transform:em}).attr("stroke-width",et.linewidth).call(Z.stroke,et.linecolor)},eM.updateRadialAxisTitle=function(i,o,s){if(!this.isSmith){var x=this.gd,_=this.radius,F=this.cx,N=this.cy,j=this.getRadial(o),G=this.id+"title",Z=0;if(j.title){var J=X.bBox(this.layers["radial-axis"].node()).height,$=j.title.font.size,ee=j.side;Z="top"===ee?$:"counterclockwise"===ee?-(J+.4*$):J+.8*$}var et=void 0!==s?s:this.radialAxisAngle,er=eA(et),en=Math.cos(er),ei=Math.sin(er),eo=F+_/2*en+Z*ei,el=N-_/2*ei+Z*en;this.layers["radial-axis-title"]=es.draw(x,G,{propContainer:j,propName:this.id+".radialaxis.title",placeholder:eT(x,"Click to enter radial axis title"),attributes:{x:eo,y:el,"text-anchor":"middle"},transform:{rotate:-et}})}},eM.updateAngularAxis=function(i,o){var s,x=this,_=x.gd,F=x.layers,X=x.radius,J=x.innerRadius,ee=x.cx,et=x.cy,er=x.getAngular(o),en=x.angularAxis,ei=x.isSmith;ei||(x.fillViewInitialKey("angularaxis.rotation",er.rotation),en.setGeometry(),en.setScale());var eo=ei?function(i){var o=ew(x,ev([0,i.x]));return Math.atan2(o[0]-ee,o[1]-et)-Math.PI/2}:function(i){return en.t2g(i.x)};"linear"===en.type&&"radians"===en.thetaunit&&(en.tick0=eS(en.tick0),en.dtick=eS(en.dtick));var _transFn=function(i){return G(ee+X*Math.cos(i),et-X*Math.sin(i))},es=ei?function(i){var o=ew(x,ev([0,i.x]));return G(o[0],o[1])}:function(i){return _transFn(eo(i))},el=ei?function(i){var o=ew(x,ev([0,i.x])),s=Math.atan2(o[0]-ee,o[1]-et)-Math.PI/2;return G(o[0],o[1])+j(-eS(s))}:function(i){var o=eo(i);return _transFn(o)+j(-eS(o))},ec=ei?function(i){return ex(x,i.x,0,1/0)}:function(i){var o=eo(i),s=Math.cos(o),x=Math.sin(o);return"M"+[ee+J*s,et-J*x]+"L"+[ee+X*s,et-X*x]},eu=$.makeLabelFns(en,0).labelStandoff,ef={};ef.xFn=function(i){return Math.cos(eo(i))*eu},ef.yFn=function(i){var o=eo(i),s=Math.sin(o)>0?.2:1;return-Math.sin(o)*(eu+i.fontSize*s)+Math.abs(Math.cos(o))*(i.fontSize*ep)},ef.anchorFn=function(i){var o=Math.cos(eo(i));return .1>Math.abs(o)?"middle":o>0?"start":"end"},ef.heightFn=function(i,o,s){return -.5*(1+Math.sin(eo(i)))*s};var eh=strTickLayout(er);x.angularTickLayout!==eh&&(F["angular-axis"].selectAll("."+en._id+"tick").remove(),x.angularTickLayout=eh);var ed=ei?[1/0].concat(en.tickvals||[]).map(function(i){return $.tickText(en,i,!0,!1)}):$.calcTicks(en);if(ei&&(ed[0].text="",ed[0].fontSize*=1.75),"linear"===o.gridshape?(s=ed.map(eo),0>N.angleDelta(s[0],s[1])&&(s=s.slice().reverse())):s=null,x.vangles=s,"category"===en.type&&(ed=ed.filter(function(i){return N.isAngleInsideSector(eo(i),x.sectorInRad)})),en.visible){var eg="inside"===en.ticks?-1:1,em=(en.linewidth||1)/2;$.drawTicks(_,en,{vals:ed,layer:F["angular-axis"],path:"M"+eg*em+",0h"+eg*en.ticklen,transFn:el,crisp:!1}),$.drawGrid(_,en,{vals:ed,layer:F["angular-grid"],path:ec,transFn:N.noop,crisp:!1}),$.drawLabels(_,en,{vals:ed,layer:F["angular-axis"],repositionOnUpdate:!0,transFn:es,labelFns:ef})}updateElement(F["angular-line"].select("path"),er.showline,{d:x.pathSubplot(),transform:G(ee,et)}).attr("stroke-width",er.linewidth).call(Z.stroke,er.linecolor)},eM.updateFx=function(i,o){this.gd._context.staticPlot||(this.isSmith||(this.updateAngularDrag(i),this.updateRadialDrag(i,o,0),this.updateRadialDrag(i,o,1)),this.updateHoverAndMainDrag(i))},eM.updateHoverAndMainDrag=function(i){var o,s,j,Z,X,J,$,ee,et,er,es,ef=this,eh=ef.isSmith,ed=ef.gd,ep=ef.layers,ey=i._zoomlayer,ev=eg.MINZOOM,ex=eg.OFFEDGE,e_=ef.radius,ew=ef.innerRadius,eT=ef.cx,ek=ef.cy,eA=ef.cxx,eS=ef.cyy,eM=ef.sectorInRad,eC=ef.vangles,eE=ef.radialAxis,eL=em.clampTiny,eP=em.findXYatLength,eI=em.findEnclosingVertexAngles,eO=eg.cornerHalfWidth,eD=eg.cornerLen/2,eR=en.makeDragger(ep,"path","maindrag",!1===i.dragmode?"none":"crosshair");x.select(eR).attr("d",ef.pathSubplot()).attr("transform",G(eT,ek)),eR.onmousemove=function(i){eo.hover(ed,i,ef.id),ed._fullLayout._lasthover=eR,ed._fullLayout._hoversubplot=ef.id},eR.onmouseout=function(i){ed._dragging||ei.unhover(ed,i)};var eB={element:eR,gd:ed,subplot:ef.id,plotinfo:{id:ef.id,xaxis:ef.xaxis,yaxis:ef.yaxis},xaxes:[ef.xaxis],yaxes:[ef.yaxis]};function norm(i,o){return Math.sqrt(i*i+o*o)}function xy2a(i,o){return Math.atan2(eS-o,i-eA)}function ra2xy(i,o){return[i*Math.cos(o),i*Math.sin(-o)]}function pathCorner(i,o){if(0===i)return ef.pathSector(2*eO);var s=eD/i,x=o-s,_=o+s,F=Math.max(0,Math.min(i,e_)),N=F-eO,j=F+eO;return"M"+ra2xy(N,x)+"A"+[N,N]+" 0,0,0 "+ra2xy(N,_)+"L"+ra2xy(j,_)+"A"+[j,j]+" 0,0,1 "+ra2xy(j,x)+"Z"}function pathCornerForPolygons(i,o,s){if(0===i)return ef.pathSector(2*eO);var x,_,F,N,j=ra2xy(i,o),G=ra2xy(i,s),Z=eL((j[0]+G[0])/2),X=eL((j[1]+G[1])/2);if(Z&&X){var J=X/Z,$=-1/J,ee=eP(eO,J,Z,X);x=eP(eD,$,ee[0][0],ee[0][1]),_=eP(eD,$,ee[1][0],ee[1][1])}else X?(F=eD,N=eO):(F=eO,N=eD),x=[[Z-F,X-N],[Z+F,X-N]],_=[[Z-F,X+N],[Z+F,X+N]];return"M"+x.join("L")+"L"+_.reverse().join("L")+"Z"}function clampAndSetR0R1(i,o){return(o=Math.max(Math.min(o,e_),ew),i<ex?i=0:e_-i<ex?i=e_:o<ex?o=0:e_-o<ex&&(o=e_),Math.abs(o-i)>ev)?(i<o?(X=i,J=o):(X=o,J=i),!0):(X=null,J=null,!1)}function applyZoomMove(i,o){i=i||$,o=o||"M0,0Z",er.attr("d",i),es.attr("d",o),en.transitionZoombox(er,es,ee,et),ee=!0;var s={};computeZoomUpdates(s),ed.emit("plotly_relayouting",s)}function zoomMove(i,x){i*=o,x*=s;var _,F,N=j+i,G=Z+x,ee=norm(j-eA,Z-eS),et=Math.min(norm(N-eA,G-eS),e_),er=xy2a(j,Z);clampAndSetR0R1(ee,et)&&(_=$+ef.pathSector(J),X&&(_+=ef.pathSector(X)),F=pathCorner(X,er)+pathCorner(J,er)),applyZoomMove(_,F)}function findPolygonRadius(i,o,s,x){var _=em.findIntersectionXY(s,x,s,[i-eA,eS-o]);return norm(_[0],_[1])}function zoomMoveForPolygons(i,o){var s,x,_=j+i,F=Z+o,N=xy2a(j,Z),G=xy2a(_,F),ee=eI(N,eC),et=eI(G,eC);clampAndSetR0R1(findPolygonRadius(j,Z,ee[0],ee[1]),Math.min(findPolygonRadius(_,F,et[0],et[1]),e_))&&(s=$+ef.pathSector(J),X&&(s+=ef.pathSector(X)),x=[pathCornerForPolygons(X,ee[0],ee[1]),pathCornerForPolygons(J,ee[0],ee[1])].join(" ")),applyZoomMove(s,x)}function zoomDone(){if(en.removeZoombox(ed),null!==X&&null!==J){var i={};computeZoomUpdates(i),en.showDoubleClickNotifier(ed),F.call("_guiRelayout",ed,i)}}function computeZoomUpdates(i){var o=eE._rl,s=(o[1]-o[0])/(1-ew/e_)/e_,x=[o[0]+(X-ew)*s,o[0]+(J-ew)*s];i[ef.id+".radialaxis.range"]=x}function zoomClick(i,o){var s=ed._fullLayout.clickmode;if(en.removeZoombox(ed),2===i){var x={};for(var _ in ef.viewInitial)x[ef.id+"."+_]=ef.viewInitial[_];ed.emit("plotly_doubleclick",null),F.call("_guiRelayout",ed,x)}s.indexOf("select")>-1&&1===i&&ec(o,ed,[ef.xaxis],[ef.yaxis],ef.id,eB),s.indexOf("event")>-1&&eo.click(ed,o,ef.id)}eB.prepFn=function(i,x,F){var G=ed._fullLayout.dragmode,ei=eR.getBoundingClientRect();ed._fullLayout._calcInverseTransform(ed);var eo=ed._fullLayout._invTransform;o=ed._fullLayout._invScaleX,s=ed._fullLayout._invScaleY;var ec=N.apply3DTransform(eo)(x-ei.left,F-ei.top);if(j=ec[0],Z=ec[1],eC){var ep=em.findPolygonOffset(e_,eM[0],eM[1],eC);j+=eA+ep[0],Z+=eS+ep[1]}switch(G){case"zoom":eB.clickFn=zoomClick,eh||(eC?eB.moveFn=zoomMoveForPolygons:eB.moveFn=zoomMove,eB.doneFn=zoomDone,X=null,J=null,$=ef.pathSubplot(),ee=!1,et=_(ed._fullLayout[ef.id].bgcolor).getLuminance(),(er=en.makeZoombox(ey,et,eT,ek,$)).attr("fill-rule","evenodd"),es=en.makeCorners(ey,eT,ek),eu(ed));break;case"select":case"lasso":el(i,x,F,eB,G)}},ei.init(eB)},eM.updateRadialDrag=function(i,o,s){var _,Z,X,J,$,ee,et=this,er=et.gd,eo=et.layers,es=et.radius,el=et.innerRadius,ec=et.cx,ef=et.cy,ep=et.radialAxis,em=eg.radialDragBoxSize,ey=em/2;if(ep.visible){var ev=eA(et.radialAxisAngle),ex=ep._rl,e_=ex[0],ew=ex[1],eT=ex[s],ek=.75*(ex[1]-ex[0])/(1-et.getHole(o))/es;s?(_=ec+(es+ey)*Math.cos(ev),Z=ef-(es+ey)*Math.sin(ev),X="radialdrag"):(_=ec+(el-ey)*Math.cos(ev),Z=ef-(el-ey)*Math.sin(ev),X="radialdrag-inner");var eM=en.makeRectDragger(eo,X,"crosshair",-ey,-ey,em,em),eC={element:eM,gd:er};!1===i.dragmode&&(eC.dragmode=!1),updateElement(x.select(eM),ep.visible&&el<es,{transform:G(_,Z)}),eC.prepFn=function(){J=null,$=null,ee=null,eC.moveFn=moveFn,eC.doneFn=doneFn,eu(er)},eC.clampFn=function(i,o){return Math.sqrt(i*i+o*o)<eg.MINDRAG&&(i=0,o=0),[i,o]},ei.init(eC)}function moveFn(i,o){if(J)J(i,o);else{var x=[i,-o],_=[Math.cos(ev),Math.sin(ev)],F=Math.abs(N.dot(x,_)/Math.sqrt(N.dot(x,x)));isNaN(F)||(J=F<.5?rotateMove:rerangeMove)}var j={};null!==$?j[et.id+".radialaxis.angle"]=$:null!==ee&&(j[et.id+".radialaxis.range["+s+"]"]=ee),er.emit("plotly_relayouting",j)}function doneFn(){null!==$?F.call("_guiRelayout",er,et.id+".radialaxis.angle",$):null!==ee&&F.call("_guiRelayout",er,et.id+".radialaxis.range["+s+"]",ee)}function rotateMove(i,o){if(0!==s){$=Math.atan2(ef-(Z+o),_+i-ec),et.vangles&&($=snapToVertexAngle($,et.vangles)),$=eS($);var x=G(ec,ef)+j(-$);eo["radial-axis"].attr("transform",x),eo["radial-line"].select("line").attr("transform",x);var F=et.gd._fullLayout,N=F[et.id];et.updateRadialAxisTitle(F,N,$)}}function rerangeMove(i,o){var x=N.dot([i,-o],[Math.cos(ev),Math.sin(ev)]);if(ee=eT-ek*x,ek>0!=(s?ee>e_:ee<ew)){ee=null;return}var _=er._fullLayout,j=_[et.id];ep.range[s]=ee,ep._rl[s]=ee,et.updateRadialAxis(_,j),et.xaxis.setRange(),et.xaxis.setScale(),et.yaxis.setRange(),et.yaxis.setScale();var G=!1;for(var Z in et.traceHash){var X=et.traceHash[Z],J=N.filterVisible(X);X[0][0].trace._module.plot(er,et,J,j),F.traceIs(Z,"gl")&&J.length&&(G=!0)}G&&(eh(er),ed(er))}},eM.updateAngularDrag=function(i){var o,s,_,Z,J,$,ee=this,et=ee.gd,er=ee.layers,eo=ee.radius,es=ee.angularAxis,el=ee.cx,ec=ee.cy,ep=ee.cxx,em=ee.cyy,ey=eg.angularDragBoxSize,ev=en.makeDragger(er,"path","angulardrag",!1===i.dragmode?"none":"move"),ex={element:ev,gd:et};function xy2a(i,o){return Math.atan2(em+ey-o,i-ep-ey)}!1===i.dragmode?ex.dragmode=!1:x.select(ev).attr("d",ee.pathAnnulus(eo,eo+ey)).attr("transform",G(el,ec)).call(ef,"move");var e_=er.frontplot.select(".scatterlayer").selectAll(".trace"),ew=e_.selectAll(".point"),eT=e_.selectAll(".textpoint");function moveFn(en,ei){var eo=ee.gd._fullLayout,eu=eo[ee.id],ef=eS(xy2a(o+en*i._invScaleX,s+ei*i._invScaleY)-$);if(Z=_+ef,er.frontplot.attr("transform",G(ee.xOffset2,ee.yOffset2)+j([-ef,ep,em])),ee.vangles){J=ee.radialAxisAngle+ef;var eg=G(el,ec)+j(-ef),ey=G(el,ec)+j(-J);er.bg.attr("transform",eg),er["radial-grid"].attr("transform",eg),er["radial-axis"].attr("transform",ey),er["radial-line"].select("line").attr("transform",ey),ee.updateRadialAxisTitle(eo,eu,J)}else ee.clipPaths.forTraces.select("path").attr("transform",G(ep,em)+j(ef));ew.each(function(){var i=x.select(this),o=X.getTranslate(i);i.attr("transform",G(o.x,o.y)+j([ef]))}),eT.each(function(){var i=x.select(this),o=i.select("text"),s=X.getTranslate(i);i.attr("transform",j([ef,o.attr("x"),o.attr("y")])+G(s.x,s.y))}),es.rotation=N.modHalf(Z,360),ee.updateAngularAxis(eo,eu),ee._hasClipOnAxisFalse&&!N.isFullCircle(ee.sectorInRad)&&e_.call(X.hideOutsideRangePoints,ee);var ev=!1;for(var ex in ee.traceHash)if(F.traceIs(ex,"gl")){var ek=ee.traceHash[ex],eA=N.filterVisible(ek);ek[0][0].trace._module.plot(et,ee,eA,eu),eA.length&&(ev=!0)}ev&&(eh(et),ed(et));var eM={};computeRotationUpdates(eM),et.emit("plotly_relayouting",eM)}function computeRotationUpdates(i){i[ee.id+".angularaxis.rotation"]=Z,ee.vangles&&(i[ee.id+".radialaxis.angle"]=J)}function doneFn(){eT.select("text").attr("transform",null);var i={};computeRotationUpdates(i),F.call("_guiRelayout",et,i)}ex.prepFn=function(x,F,j){_=i[ee.id].angularaxis.rotation;var G=ev.getBoundingClientRect();o=F-G.left,s=j-G.top,et._fullLayout._calcInverseTransform(et);var Z=N.apply3DTransform(i._invTransform)(o,s);o=Z[0],s=Z[1],$=xy2a(o,s),ex.moveFn=moveFn,ex.doneFn=doneFn,eu(et)},ee.vangles&&!N.isFullCircle(ee.sectorInRad)&&(ex.prepFn=N.noop,ef(x.select(ev),null)),ei.init(ex)},eM.isPtInside=function(i){if(this.isSmith)return!0;var o=this.sectorInRad,s=this.vangles,x=this.angularAxis.c2g(i.theta),_=this.radialAxis,F=_.c2l(i.r),j=_._rl;return(s?em.isPtInsidePolygon:N.isPtInsideSector)(F,x,j,o,s)},eM.pathArc=function(i){var o=this.sectorInRad,s=this.vangles;return(s?em.pathPolygon:N.pathArc)(i,o[0],o[1],s)},eM.pathSector=function(i){var o=this.sectorInRad,s=this.vangles;return(s?em.pathPolygon:N.pathSector)(i,o[0],o[1],s)},eM.pathAnnulus=function(i,o){var s=this.sectorInRad,x=this.vangles;return(x?em.pathPolygonAnnulus:N.pathAnnulus)(i,o,s[0],s[1],x)},eM.pathSubplot=function(){var i=this.innerRadius,o=this.radius;return i?this.pathAnnulus(i,o):this.pathSector(o)},eM.fillViewInitialKey=function(i,o){i in this.viewInitial||(this.viewInitial[i]=o)}},12101:function(i,o,s){"use strict";var x=s(71828),_=s(21994),F=x.deg2rad,N=x.rad2deg;i.exports=function(i,o,s){switch(_(i,s),i._id){case"x":case"radialaxis":var j;j=o._subplot,i.setGeometry=function(){var o=i._rl[0],s=i._rl[1],x=j.innerRadius,_=(j.radius-x)/(s-o),F=x/_,N=o>s?function(i){return i<=0}:function(i){return i>=0};i.c2g=function(s){var x=i.c2l(s)-o;return(N(x)?x:0)+F},i.g2c=function(s){return i.l2c(s+o-F)},i.g2p=function(i){return i*_},i.c2p=function(o){return i.g2p(i.c2g(o))}};break;case"angularaxis":(function(i,o){var s=i.type;if("linear"===s){var _=i.d2c,j=i.c2d;i.d2c=function(i,o){var s;return s=_(i),"degrees"===o?F(s):s},i.c2d=function(i,o){return j("degrees"===o?N(i):i)}}i.makeCalcdata=function(o,_){var F,N,j=o[_],G=o._length,_d2c=function(s){return i.d2c(s,o.thetaunit)};if(j){if(x.isTypedArray(j)&&"linear"===s){if(G===j.length)return j;if(j.subarray)return j.subarray(0,G)}for(N=0,F=Array(G);N<G;N++)F[N]=_d2c(j[N])}else{var Z=_+"0",X="d"+_,J=Z in o?_d2c(o[Z]):0,$=o[X]?_d2c(o[X]):(i.period||2*Math.PI)/G;for(N=0,F=Array(G);N<G;N++)F[N]=J+N*$}return F},i.setGeometry=function(){var _,j,G,Z,X=o.sector,J=X.map(F),$={clockwise:-1,counterclockwise:1}[i.direction],ee=F(i.rotation),rad2g=function(i){return $*i+ee},g2rad=function(i){return(i-ee)/$};switch(s){case"linear":j=_=x.identity,Z=F,G=N,i.range=x.isFullCircle(J)?[X[0],X[0]+360]:J.map(g2rad).map(N);break;case"category":var et=i._categories.length,er=i.period?Math.max(i.period,et):et;0===er&&(er=1),j=Z=function(i){return 2*i*Math.PI/er},_=G=function(i){return i*er/Math.PI/2},i.range=[0,er]}i.c2g=function(i){return rad2g(j(i))},i.g2c=function(i){return _(g2rad(i))},i.t2g=function(i){return rad2g(Z(i))},i.g2t=function(i){return G(g2rad(i))}}})(i,o)}}},39779:function(i){"use strict";i.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(i){"use strict";function sign(i){return i<0?-1:i>0?1:0}function smith(i){var o=i[0],s=i[1];if(!isFinite(o)||!isFinite(s))return[1,0];var x=(o+1)*(o+1)+s*s;return[(o*o+s*s-1)/x,2*s/x]}function transform(i,o){var s=o[0],x=o[1];return[s*i.radius+i.cx,-x*i.radius+i.cy]}i.exports={smith:smith,reactanceArc:function(i,o,s,x){var _=transform(i,smith([s,o])),F=_[0],N=_[1],j=transform(i,smith([x,o])),G=j[0],Z=j[1];if(0===o)return["M"+F+","+N,"L"+G+","+Z].join(" ");var X=1/Math.abs(o)*i.radius;return["M"+F+","+N,"A"+X+","+X+" 0 0,"+(o<0?1:0)+" "+G+","+Z].join(" ")},resistanceArc:function(i,o,s,x){var _=1/(o+1)*i.radius,F=transform(i,smith([o,s])),N=F[0],j=F[1],G=transform(i,smith([o,x])),Z=G[0],X=G[1];if(sign(s)!==sign(x)){var J=transform(i,smith([o,0]));return["M"+N+","+j,"A"+_+","+_+" 0 0,"+(0<s?0:1)+" "+J[0]+","+J[1],"A"+_+","+_+" 0 0,"+(x<0?0:1)+Z+","+X].join(" ")}return["M"+N+","+j,"A"+_+","+_+" 0 0,"+(x<s?0:1)+" "+Z+","+X].join(" ")},smithTransform:transform}},7504:function(i,o,s){"use strict";var x=s(27659).AU,_=s(71828).counterRegex,F=s(77997),N=s(39779),j=N.attr,G=N.name,Z=_(G),X={};X[j]={valType:"subplotid",dflt:G,editType:"calc"},i.exports={attr:j,name:G,idRoot:G,idRegex:Z,attrRegex:Z,attributes:X,layoutAttributes:s(33419),supplyLayoutDefaults:s(9558),plot:function(i){for(var o=i._fullLayout,s=i.calcdata,_=o._subplots[G],N=0;N<_.length;N++){var j=_[N],Z=x(s,G,j),X=o[j]._subplot;X||(X=F(i,j,!0),o[j]._subplot=X),X.plot(Z,o,i._promises)}},clean:function(i,o,s,x){for(var _=x._subplots[G]||[],F=0;F<_.length;F++){var N=_[F],j=x[N]._subplot;if(!o[N]&&j)for(var Z in j.framework.remove(),j.clipPaths)j.clipPaths[Z].remove()}},toSVG:s(93612).toSVG}},33419:function(i,o,s){"use strict";var x=s(22399),_=s(13838),F=s(27670).Y,N=s(71828).extendFlat,j=s(30962).overrideAll,G=j({color:_.color,showline:N({},_.showline,{dflt:!0}),linecolor:_.linecolor,linewidth:_.linewidth,showgrid:N({},_.showgrid,{dflt:!0}),gridcolor:_.gridcolor,gridwidth:_.gridwidth,griddash:_.griddash},"plot","from-root"),Z=j({ticklen:_.ticklen,tickwidth:N({},_.tickwidth,{dflt:2}),tickcolor:_.tickcolor,showticklabels:_.showticklabels,labelalias:_.labelalias,showtickprefix:_.showtickprefix,tickprefix:_.tickprefix,showticksuffix:_.showticksuffix,ticksuffix:_.ticksuffix,tickfont:_.tickfont,tickformat:_.tickformat,hoverformat:_.hoverformat,layer:_.layer},"plot","from-root"),X=N({visible:N({},_.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:N({},_.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},G,Z),J=N({visible:N({},_.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:_.ticks,editType:"calc"},G,Z);i.exports={domain:F({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:x.background},realaxis:X,imaginaryaxis:J,editType:"calc"}},9558:function(i,o,s){"use strict";var x,_,F=s(71828),N=s(7901),j=s(44467),G=s(49119),Z=s(27659).NG,X=s(89426),J=s(96115),$=s(92128),ee=s(21994),et=s(33419),er=s(39779),en=er.axisNames,ei=(x=String,_={},function(i){var o,s=x?x(i):i;if(s in _)return _[s];var F=(o=i).slice().reverse().map(function(i){return-i}).concat([0]).concat(o);return _[s]=F,F});function handleDefaults(i,o,s,x){var _=s("bgcolor");x.bgColor=N.combine(_,x.paper_bgcolor);var G=Z(x.fullData,er.name,x.id),eo=x.layoutOut;function coerceAxis(i,o){return s(ef+"."+i,o)}for(var es=0;es<en.length;es++){ef=en[es],F.isPlainObject(i[ef])||(i[ef]={});var el=i[ef],ec=j.newContainer(o,ef);ec._id=ec._name=ef,ec._attr=x.id+"."+ef,ec._traceIndices=G.map(function(i){return i._expandedIndex});var eu=coerceAxis("visible");if(ec.type="linear",ee(ec,eo),X(el,ec,coerceAxis,ec.type),eu){var ef,eh,ed,ep,eg,em="realaxis"===ef;em&&coerceAxis("side"),em?coerceAxis("tickvals"):coerceAxis("tickvals",ei(o.realaxis.tickvals||et.realaxis.tickvals.dflt));var ey=x.font||{};eu&&(ed=(eh=coerceAxis("color"))===el.color?eh:ey.color,ep=ey.size,eg=ey.family),J(el,ec,coerceAxis,ec.type,{noTicklabelstep:!0,noAng:!em,noExp:!0,font:{color:ed,size:ep,family:eg}}),F.coerce2(i,o,et,ef+".ticklen"),F.coerce2(i,o,et,ef+".tickwidth"),F.coerce2(i,o,et,ef+".tickcolor",o.color),coerceAxis("ticks")||(delete o[ef].ticklen,delete o[ef].tickwidth,delete o[ef].tickcolor),$(el,ec,coerceAxis,{dfltColor:eh,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:et[ef]}),coerceAxis("layer")}coerceAxis("hoverformat"),delete ec.type,ec._input=el}}i.exports=function(i,o,s){G(i,o,s,{noUirevision:!0,type:er.name,attributes:et,handleDefaults:handleDefaults,font:o.font,paper_bgcolor:o.paper_bgcolor,fullData:s,layoutOut:o})}},49119:function(i,o,s){"use strict";var x=s(71828),_=s(44467),F=s(27670).c;i.exports=function(i,o,s,N){var j,G,Z=N.type,X=N.attributes,J=N.handleDefaults,$=N.partition||"x",ee=o._subplots[Z],et=ee.length,er=et&&ee[0].replace(/\d+$/,"");function coerce(i,o){return x.coerce(j,G,X,i,o)}for(var en=0;en<et;en++){var ei=ee[en];j=i[ei]?i[ei]:i[ei]={},G=_.newContainer(o,ei,er),N.noUirevision||coerce("uirevision",o.uirevision);var eo={};eo[$]=[en/et,(en+1)/et],F(G,o,coerce,eo),N.id=ei,J(j,G,coerce,N)}}},5386:function(i,o,s){"use strict";var x=s(31562);function describeVariables(i){var o=i.description?" "+i.description:"",s=i.keys||[];if(s.length>0){for(var x=[],_=0;_<s.length;_++)x[_]="`"+s[_]+"`";o+="Finally, the template string has access to ",o=1===s.length?o+"variable "+x[0]:o+"variables "+x.slice(0,-1).join(", ")+" and "+x.slice(-1)+"."}return o}x.FORMAT_LINK,x.DATE_FORMAT_LINK,o.fF=function(i,o){i=i||{},describeVariables(o=o||{});var s={valType:"string",dflt:"",editType:i.editType||"none"};return!1!==i.arrayOk&&(s.arrayOk=!0),s},o.si=function(i,o){i=i||{},describeVariables(o=o||{});var s={valType:"string",dflt:"",editType:i.editType||"calc"};return!1!==i.arrayOk&&(s.arrayOk=!0),s},o.R=function(i,o){return o=o||{},(i=i||{}).newshape,describeVariables(o),{valType:"string",dflt:"",editType:i.editType||"arraydraw"}}},61639:function(i,o,s){"use strict";var x=s(64380),_=s(27659).AU,F=s(71828).counterRegex,N="ternary";o.name=N;var j=o.attr="subplot";o.idRoot=N,o.idRegex=o.attrRegex=F(N),(o.attributes={})[j]={valType:"subplotid",dflt:"ternary",editType:"calc"},o.layoutAttributes=s(81367),o.supplyLayoutDefaults=s(25369),o.plot=function(i){for(var o=i._fullLayout,s=i.calcdata,F=o._subplots[N],j=0;j<F.length;j++){var G=F[j],Z=_(s,N,G),X=o[G]._subplot;X||(X=new x({id:G,graphDiv:i,container:o._ternarylayer.node()},o),o[G]._subplot=X),X.plot(Z,o,i._promises)}},o.clean=function(i,o,s,x){for(var _=x._subplots[N]||[],F=0;F<_.length;F++){var j=_[F],G=x[j]._subplot;!o[j]&&G&&(G.plotContainer.remove(),G.clipDef.remove(),G.clipDefRelative.remove(),G.layers["a-title"].remove(),G.layers["b-title"].remove(),G.layers["c-title"].remove())}}},81367:function(i,o,s){"use strict";var x=s(22399),_=s(27670).Y,F=s(13838),N=s(30962).overrideAll,j=s(1426).extendFlat,G={title:{text:F.title.text,font:F.title.font},color:F.color,tickmode:F.minor.tickmode,nticks:j({},F.nticks,{dflt:6,min:1}),tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:F.ticks,ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,ticklabelstep:F.ticklabelstep,showticklabels:F.showticklabels,labelalias:F.labelalias,showtickprefix:F.showtickprefix,tickprefix:F.tickprefix,showticksuffix:F.showticksuffix,ticksuffix:F.ticksuffix,showexponent:F.showexponent,exponentformat:F.exponentformat,minexponent:F.minexponent,separatethousands:F.separatethousands,tickfont:F.tickfont,tickangle:F.tickangle,tickformat:F.tickformat,tickformatstops:F.tickformatstops,hoverformat:F.hoverformat,showline:j({},F.showline,{dflt:!0}),linecolor:F.linecolor,linewidth:F.linewidth,showgrid:j({},F.showgrid,{dflt:!0}),gridcolor:F.gridcolor,gridwidth:F.gridwidth,griddash:F.griddash,layer:F.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:F._deprecated.title,titlefont:F._deprecated.titlefont}},Z=i.exports=N({domain:_({name:"ternary"}),bgcolor:{valType:"color",dflt:x.background},sum:{valType:"number",dflt:1,min:0},aaxis:G,baxis:G,caxis:G},"plot","from-root");Z.uirevision={valType:"any",editType:"none"},Z.aaxis.uirevision=Z.baxis.uirevision=Z.caxis.uirevision={valType:"any",editType:"none"}},25369:function(i,o,s){"use strict";var x=s(7901),_=s(44467),F=s(71828),N=s(49119),j=s(96115),G=s(89426),Z=s(38701),X=s(26218),J=s(92128),$=s(81367),ee=["aaxis","baxis","caxis"];function handleTernaryDefaults(i,o,s,N){var et,er,en,ei=s("bgcolor"),eo=s("sum");N.bgColor=x.combine(ei,N.paper_bgcolor);for(var es=0;es<ee.length;es++)er=i[et=ee[es]]||{},(en=_.newContainer(o,et))._name=et,function(i,o,s,x){var _=$[o._name];function coerce(s,x){return F.coerce(i,o,_,s,x)}coerce("uirevision",x.uirevision),o.type="linear";var N=coerce("color"),ee=N!==_.color.dflt?N:s.font.color,et=o._name.charAt(0).toUpperCase(),er="Component "+et,en=coerce("title.text",er);o._hovertitle=en===er?en:et,F.coerceFont(coerce,"title.font",{family:s.font.family,size:F.bigFont(s.font.size),color:ee}),coerce("min"),X(i,o,coerce,"linear"),G(i,o,coerce,"linear"),j(i,o,coerce,"linear"),Z(i,o,coerce,{outerTicks:!0}),coerce("showticklabels")&&(F.coerceFont(coerce,"tickfont",{family:s.font.family,size:s.font.size,color:ee}),coerce("tickangle"),coerce("tickformat")),J(i,o,coerce,{dfltColor:N,bgColor:s.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:_}),coerce("hoverformat"),coerce("layer")}(er,en,N,o);var el=o.aaxis,ec=o.baxis,eu=o.caxis;el.min+ec.min+eu.min>=eo&&(el.min=0,ec.min=0,eu.min=0,i.aaxis&&delete i.aaxis.min,i.baxis&&delete i.baxis.min,i.caxis&&delete i.caxis.min)}i.exports=function(i,o,s){N(i,o,s,{type:"ternary",attributes:$,handleDefaults:handleTernaryDefaults,font:o.font,paper_bgcolor:o.paper_bgcolor})}},64380:function(i,o,s){"use strict";var x=s(39898),_=s(84267),F=s(73972),N=s(71828),j=N.strTranslate,G=N._,Z=s(7901),X=s(91424),J=s(21994),$=s(1426).extendFlat,ee=s(74875),et=s(89298),er=s(28569),en=s(30211),ei=s(64505),eo=ei.freeMode,es=ei.rectMode,el=s(92998),ec=s(47322).prepSelect,eu=s(47322).selectOnClick,ef=s(47322).clearOutline,eh=s(47322).clearSelectionsCache,ed=s(85555);function Ternary(i,o){this.id=i.id,this.graphDiv=i.graphDiv,this.init(o),this.makeFramework(o),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}i.exports=Ternary;var ep=Ternary.prototype;ep.init=function(i){this.container=i._ternarylayer,this.defs=i._defs,this.layoutId=i._uid,this.traceHash={},this.layers={}},ep.plot=function(i,o){var s=o[this.id],x=o._size;this._hasClipOnAxisFalse=!1;for(var _=0;_<i.length;_++)if(!1===i[_][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(s),this.adjustLayout(s,x),ee.generalUpdatePerTraceModule(this.graphDiv,this,i,s),this.layers.plotbg.select("path").call(Z.fill,s.bgcolor)},ep.makeFramework=function(i){var o=this.graphDiv,s=i[this.id],x=this.clipId="clip"+this.layoutId+this.id,_=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=N.ensureSingleById(i._clips,"clipPath",x,function(i){i.append("path").attr("d","M0,0Z")}),this.clipDefRelative=N.ensureSingleById(i._clips,"clipPath",_,function(i){i.append("path").attr("d","M0,0Z")}),this.plotContainer=N.ensureSingle(this.container,"g",this.id),this.updateLayers(s),X.setClipUrl(this.layers.backplot,x,o),X.setClipUrl(this.layers.grids,x,o)},ep.updateLayers=function(i){var o=this.layers,s=["draglayer","plotbg","backplot","grids"];"below traces"===i.aaxis.layer&&s.push("aaxis","aline"),"below traces"===i.baxis.layer&&s.push("baxis","bline"),"below traces"===i.caxis.layer&&s.push("caxis","cline"),s.push("frontplot"),"above traces"===i.aaxis.layer&&s.push("aaxis","aline"),"above traces"===i.baxis.layer&&s.push("baxis","bline"),"above traces"===i.caxis.layer&&s.push("caxis","cline");var _=this.plotContainer.selectAll("g.toplevel").data(s,String),F=["agrid","bgrid","cgrid"];_.enter().append("g").attr("class",function(i){return"toplevel "+i}).each(function(i){var s=x.select(this);o[i]=s,"frontplot"===i?s.append("g").classed("scatterlayer",!0):"backplot"===i?s.append("g").classed("maplayer",!0):"plotbg"===i?s.append("path").attr("d","M0,0Z"):"aline"===i||"bline"===i||"cline"===i?s.append("path"):"grids"===i&&F.forEach(function(i){o[i]=s.append("g").classed("grid "+i,!0)})}),_.order()};var eg=Math.sqrt(4/3);ep.adjustLayout=function(i,o){var s,x,_,F,N,G,ee=this,et=i.domain,er=(et.x[0]+et.x[1])/2,en=(et.y[0]+et.y[1])/2,ei=et.x[1]-et.x[0],eo=et.y[1]-et.y[0],es=ei*o.w,el=eo*o.h,ec=i.sum,eu=i.aaxis.min,ef=i.baxis.min,eh=i.caxis.min;es>eg*el?_=(F=el)*eg:F=(_=es)/eg,N=ei*_/es,G=eo*F/el,s=o.l+o.w*er-_/2,x=o.t+o.h*(1-en)-F/2,ee.x0=s,ee.y0=x,ee.w=_,ee.h=F,ee.sum=ec,ee.xaxis={type:"linear",range:[eu+2*eh-ec,ec-eu-2*ef],domain:[er-N/2,er+N/2],_id:"x"},J(ee.xaxis,ee.graphDiv._fullLayout),ee.xaxis.setScale(),ee.xaxis.isPtWithinRange=function(i){return i.a>=ee.aaxis.range[0]&&i.a<=ee.aaxis.range[1]&&i.b>=ee.baxis.range[1]&&i.b<=ee.baxis.range[0]&&i.c>=ee.caxis.range[1]&&i.c<=ee.caxis.range[0]},ee.yaxis={type:"linear",range:[eu,ec-ef-eh],domain:[en-G/2,en+G/2],_id:"y"},J(ee.yaxis,ee.graphDiv._fullLayout),ee.yaxis.setScale(),ee.yaxis.isPtWithinRange=function(){return!0};var ed=ee.yaxis.domain[0],ep=ee.aaxis=$({},i.aaxis,{range:[eu,ec-ef-eh],side:"left",tickangle:(+i.aaxis.tickangle||0)-30,domain:[ed,ed+G*eg],anchor:"free",position:0,_id:"y",_length:_});J(ep,ee.graphDiv._fullLayout),ep.setScale();var em=ee.baxis=$({},i.baxis,{range:[ec-eu-eh,ef],side:"bottom",domain:ee.xaxis.domain,anchor:"free",position:0,_id:"x",_length:_});J(em,ee.graphDiv._fullLayout),em.setScale();var ey=ee.caxis=$({},i.caxis,{range:[ec-eu-ef,eh],side:"right",tickangle:(+i.caxis.tickangle||0)+30,domain:[ed,ed+G*eg],anchor:"free",position:0,_id:"y",_length:_});J(ey,ee.graphDiv._fullLayout),ey.setScale();var ev="M"+s+","+(x+F)+"h"+_+"l-"+_/2+",-"+F+"Z";ee.clipDef.select("path").attr("d",ev),ee.layers.plotbg.select("path").attr("d",ev);var ex="M0,"+F+"h"+_+"l-"+_/2+",-"+F+"Z";ee.clipDefRelative.select("path").attr("d",ex);var e_=j(s,x);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",e_),ee.clipDefRelative.select("path").attr("transform",null);var ew=j(s-em._offset,x+F);ee.layers.baxis.attr("transform",ew),ee.layers.bgrid.attr("transform",ew);var eT=j(s+_/2,x)+"rotate(30)"+j(0,-ep._offset);ee.layers.aaxis.attr("transform",eT),ee.layers.agrid.attr("transform",eT);var ek=j(s+_/2,x)+"rotate(-30)"+j(0,-ey._offset);ee.layers.caxis.attr("transform",ek),ee.layers.cgrid.attr("transform",ek),ee.drawAxes(!0),ee.layers.aline.select("path").attr("d",ep.showline?"M"+s+","+(x+F)+"l"+_/2+",-"+F:"M0,0").call(Z.stroke,ep.linecolor||"#000").style("stroke-width",(ep.linewidth||0)+"px"),ee.layers.bline.select("path").attr("d",em.showline?"M"+s+","+(x+F)+"h"+_:"M0,0").call(Z.stroke,em.linecolor||"#000").style("stroke-width",(em.linewidth||0)+"px"),ee.layers.cline.select("path").attr("d",ey.showline?"M"+(s+_/2)+","+x+"l"+_/2+","+F:"M0,0").call(Z.stroke,ey.linecolor||"#000").style("stroke-width",(ey.linewidth||0)+"px"),ee.graphDiv._context.staticPlot||ee.initInteractions(),X.setClipUrl(ee.layers.frontplot,ee._hasClipOnAxisFalse?null:ee.clipId,ee.graphDiv)},ep.drawAxes=function(i){var o=this.graphDiv,s=this.id.substr(7)+"title",x=this.layers,_=this.aaxis,F=this.baxis,N=this.caxis;if(this.drawAx(_),this.drawAx(F),this.drawAx(N),i){var j=Math.max(_.showticklabels?_.tickfont.size/2:0,(N.showticklabels?.75*N.tickfont.size:0)+("outside"===N.ticks?.87*N.ticklen:0)),Z=(F.showticklabels?F.tickfont.size:0)+("outside"===F.ticks?F.ticklen:0)+3;x["a-title"]=el.draw(o,"a"+s,{propContainer:_,propName:this.id+".aaxis.title",placeholder:G(o,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-_.title.font.size/3-j,"text-anchor":"middle"}}),x["b-title"]=el.draw(o,"b"+s,{propContainer:F,propName:this.id+".baxis.title",placeholder:G(o,"Click to enter Component B title"),attributes:{x:this.x0-Z,y:this.y0+this.h+.83*F.title.font.size+Z,"text-anchor":"middle"}}),x["c-title"]=el.draw(o,"c"+s,{propContainer:N,propName:this.id+".caxis.title",placeholder:G(o,"Click to enter Component C title"),attributes:{x:this.x0+this.w+Z,y:this.y0+this.h+.83*N.title.font.size+Z,"text-anchor":"middle"}})}},ep.drawAx=function(i){var o=this.graphDiv,s=i._name,x=s.charAt(0),_=i._id,F=this.layers[s],j=x+"tickLayout",G=i.ticks+String(i.ticklen)+String(i.showticklabels);this[j]!==G&&(F.selectAll("."+_+"tick").remove(),this[j]=G),i.setScale();var Z=et.calcTicks(i),X=et.clipEnds(i,Z),J=et.makeTransTickFn(i),$=et.getTickSigns(i)[2],ee=N.deg2rad(30),er=$*(i.linewidth||1)/2,en=$*i.ticklen,ei=this.w,eo=this.h,es="b"===x?"M0,"+er+"l"+Math.sin(ee)*en+","+Math.cos(ee)*en:"M"+er+",0l"+Math.cos(ee)*en+","+-Math.sin(ee)*en;et.drawTicks(o,i,{vals:"inside"===i.ticks?X:Z,layer:F,path:es,transFn:J,crisp:!1}),et.drawGrid(o,i,{vals:X,layer:this.layers[x+"grid"],path:{a:"M0,0l"+eo+",-"+ei/2,b:"M0,0l-"+ei/2+",-"+eo,c:"M0,0l-"+eo+","+ei/2}[x],transFn:J,crisp:!1}),et.drawLabels(o,i,{vals:Z,layer:F,transFn:J,labelFns:et.makeLabelFns(i,0,30)})};var em=ed.MINZOOM/2+.87,ey="m-0.87,.5h"+em+"v3h-"+(em+5.2)+"l"+(em/2+2.6)+",-"+(.87*em+4.5)+"l2.6,1.5l-"+em/2+","+.87*em+"Z",ev="m0.87,.5h-"+em+"v3h"+(em+5.2)+"l-"+(em/2+2.6)+",-"+(.87*em+4.5)+"l-2.6,1.5l"+em/2+","+.87*em+"Z",ex="m0,1l"+em/2+","+.87*em+"l2.6,-1.5l-"+(em/2+2.6)+",-"+(.87*em+4.5)+"l-"+(em/2+2.6)+","+(.87*em+4.5)+"l2.6,1.5l"+em/2+",-"+.87*em+"Z",e_=!0;function removeZoombox(i){x.select(i).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}ep.clearOutline=function(){eh(this.dragOptions),ef(this.dragOptions.gd)},ep.initInteractions=function(){var i,o,s,x,J,$,ee,et,ei,el,ef,eh,ep=this,em=ep.layers.plotbg.select("path").node(),ew=ep.graphDiv,eT=ew._fullLayout._zoomlayer;function makeUpdate(i){var o={};return o[ep.id+".aaxis.min"]=i.a,o[ep.id+".baxis.min"]=i.b,o[ep.id+".caxis.min"]=i.c,o}function clickZoomPan(i,o){var s=ew._fullLayout.clickmode;removeZoombox(ew),2===i&&(ew.emit("plotly_doubleclick",null),F.call("_guiRelayout",ew,makeUpdate({a:0,b:0,c:0}))),s.indexOf("select")>-1&&1===i&&eu(o,ew,[ep.xaxis],[ep.yaxis],ep.id,ep.dragOptions),s.indexOf("event")>-1&&en.click(ew,o,ep.id)}function getBFrac(i,o){return 1-(i+(ep.h-o)/Math.sqrt(3))/ep.w}function getCFrac(i,o){return(i-(ep.h-o)/Math.sqrt(3))/ep.w}function zoomMove(_,F){var N=s+_*i,j=x+F*o,G=Math.max(0,Math.min(1,1-x/ep.h,1-j/ep.h)),Z=Math.max(0,Math.min(1,getBFrac(s,x),getBFrac(N,j))),X=Math.max(0,Math.min(1,getCFrac(s,x),getCFrac(N,j))),er=(G/2+X)*ep.w,en=(1-G/2-Z)*ep.w,eo=(er+en)/2,es=en-er,ec=(1-G)*ep.h,eu=ec-es/eg;es<ed.MINZOOM?(ee=J,ef.attr("d",ei),eh.attr("d","M0,0Z")):(ee={a:J.a+G*$,b:J.b+Z*$,c:J.c+X*$},ef.attr("d",ei+"M"+er+","+ec+"H"+en+"L"+eo+","+eu+"L"+er+","+ec+"Z"),eh.attr("d","M"+s+","+x+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+er+","+ec+ey+"M"+en+","+ec+ev+"M"+eo+","+eu+ex)),el||(ef.transition().style("fill",et>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),eh.transition().style("opacity",1).duration(200),el=!0),ew.emit("plotly_relayouting",makeUpdate(ee))}function zoomDone(){removeZoombox(ew),ee!==J&&(F.call("_guiRelayout",ew,makeUpdate(ee)),e_&&ew.data&&ew._context.showTips&&(N.notifier(G(ew,"Double-click to zoom back out"),"long"),e_=!1))}function plotDrag(i,o){var s=i/ep.xaxis._m,x=o/ep.yaxis._m,_=[(ee={a:J.a-x,b:J.b+(s+x)/2,c:J.c-(s-x)/2}).a,ee.b,ee.c].sort(N.sorterAsc),F={a:_.indexOf(ee.a),b:_.indexOf(ee.b),c:_.indexOf(ee.c)};_[0]<0&&(_[1]+_[0]/2<0?(_[2]+=_[0]+_[1],_[0]=_[1]=0):(_[2]+=_[0]/2,_[1]+=_[0]/2,_[0]=0),ee={a:_[F.a],b:_[F.b],c:_[F.c]},o=(J.a-ee.a)*ep.yaxis._m,i=(J.c-ee.c-J.b+ee.b)*ep.xaxis._m);var G=j(ep.x0+i,ep.y0+o);ep.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",G);var Z=j(-i,-o);ep.clipDefRelative.select("path").attr("transform",Z),ep.aaxis.range=[ee.a,ep.sum-ee.b-ee.c],ep.baxis.range=[ep.sum-ee.a-ee.c,ee.b],ep.caxis.range=[ep.sum-ee.a-ee.b,ee.c],ep.drawAxes(!1),ep._hasClipOnAxisFalse&&ep.plotContainer.select(".scatterlayer").selectAll(".trace").call(X.hideOutsideRangePoints,ep),ew.emit("plotly_relayouting",makeUpdate(ee))}function dragDone(){F.call("_guiRelayout",ew,makeUpdate(ee))}this.dragOptions={element:em,gd:ew,plotinfo:{id:ep.id,domain:ew._fullLayout[ep.id].domain,xaxis:ep.xaxis,yaxis:ep.yaxis},subplot:ep.id,prepFn:function(F,G,X){ep.dragOptions.xaxes=[ep.xaxis],ep.dragOptions.yaxes=[ep.yaxis],i=ew._fullLayout._invScaleX,o=ew._fullLayout._invScaleY;var er,en,eu,ed=ep.dragOptions.dragmode=ew._fullLayout.dragmode;eo(ed)?ep.dragOptions.minDrag=1:ep.dragOptions.minDrag=void 0,"zoom"===ed?(ep.dragOptions.moveFn=zoomMove,ep.dragOptions.clickFn=clickZoomPan,ep.dragOptions.doneFn=zoomDone,s=G-(er=em.getBoundingClientRect()).left,x=X-er.top,ew._fullLayout._calcInverseTransform(ew),en=ew._fullLayout._invTransform,s=(eu=N.apply3DTransform(en)(s,x))[0],x=eu[1],ee=J={a:ep.aaxis.range[0],b:ep.baxis.range[1],c:ep.caxis.range[1]},$=ep.aaxis.range[1]-J.a,et=_(ep.graphDiv._fullLayout[ep.id].bgcolor).getLuminance(),ei="M0,"+ep.h+"L"+ep.w/2+", 0L"+ep.w+","+ep.h+"Z",el=!1,ef=eT.append("path").attr("class","zoombox").attr("transform",j(ep.x0,ep.y0)).style({fill:et>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ei),eh=eT.append("path").attr("class","zoombox-corners").attr("transform",j(ep.x0,ep.y0)).style({fill:Z.background,stroke:Z.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ep.clearOutline(ew)):"pan"===ed?(ep.dragOptions.moveFn=plotDrag,ep.dragOptions.clickFn=clickZoomPan,ep.dragOptions.doneFn=dragDone,ee=J={a:ep.aaxis.range[0],b:ep.baxis.range[1],c:ep.caxis.range[1]},ep.clearOutline(ew)):(es(ed)||eo(ed))&&ec(F,G,X,ep.dragOptions,ed)}},em.onmousemove=function(i){en.hover(ew,i,ep.id),ew._fullLayout._lasthover=em,ew._fullLayout._hoversubplot=ep.id},em.onmouseout=function(i){ew._dragging||er.unhover(ew,i)},er.init(this.dragOptions)}},73972:function(i,o,s){"use strict";var x=s(47769),_=s(64213),F=s(75138),N=s(41965),j=s(24401).addStyleRule,G=s(1426),Z=s(9012),X=s(10820),J=G.extendFlat,$=G.extendDeepAll;function findArrayRegexps(i){if(i.layoutAttributes){var s=i.layoutAttributes._arrayAttrRegexps;if(s)for(var x=0;x<s.length;x++)F(o.layoutArrayRegexes,s[x])}}function mergeComponentAttrsToTrace(i,s){var x=o.componentsRegistry[i].schema;if(x&&x.traces){var _=x.traces[s];_&&$(o.modules[s]._module.attributes,_)}}function mergeComponentAttrsToTransform(i,s){var x=o.componentsRegistry[i].schema;if(x&&x.transforms){var _=x.transforms[s];_&&$(o.transformsRegistry[s].attributes,_)}}function mergeComponentAttrsToSubplot(i,s){var x=o.componentsRegistry[i].schema;if(x&&x.subplots){var _=o.subplotsRegistry[s],F=_.layoutAttributes,N="subplot"===_.attr?_.name:_.attr;Array.isArray(N)&&(N=N[0]);var j=x.subplots[N];F&&j&&$(F,j)}}function getTraceType(i){return"object"==typeof i&&(i=i.type),i}o.modules={},o.allCategories={},o.allTypes=[],o.subplotsRegistry={},o.transformsRegistry={},o.componentsRegistry={},o.layoutArrayContainers=[],o.layoutArrayRegexes=[],o.traceLayoutAttributes={},o.localeRegistry={},o.apiMethodRegistry={},o.collectableSubplotTypes=null,o.register=function(i){if(o.collectableSubplotTypes=null,i)i&&!Array.isArray(i)&&(i=[i]);else throw Error("No argument passed to Plotly.register.");for(var s=0;s<i.length;s++){var _=i[s];if(!_)throw Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":(function(i){var s=i.name,_=i.categories,F=i.meta;if(o.modules[s]){x.log("Type "+s+" already registered");return}o.subplotsRegistry[i.basePlotModule.name]||function(i){var s=i.name;if(o.subplotsRegistry[s]){x.log("Plot type "+s+" already registered.");return}for(var _ in findArrayRegexps(i),o.subplotsRegistry[s]=i,o.componentsRegistry)mergeComponentAttrsToSubplot(_,i.name)}(i.basePlotModule);for(var N={},G=0;G<_.length;G++)N[_[G]]=!0,o.allCategories[_[G]]=!0;for(var Z in o.modules[s]={_module:i,categories:N},F&&Object.keys(F).length&&(o.modules[s].meta=F),o.allTypes.push(s),o.componentsRegistry)mergeComponentAttrsToTrace(Z,s);i.layoutAttributes&&J(o.traceLayoutAttributes,i.layoutAttributes);var X=i.basePlotModule,$=X.name;if("mapbox"===$){var ee=X.constants.styleRules;for(var et in ee)j(".js-plotly-plot .plotly .mapboxgl-"+et,ee[et])}("geo"===$||"mapbox"===$)&&void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}})})(_);break;case"transform":(function(i){if("string"!=typeof i.name)throw Error("Transform module *name* must be a string.");var s="Transform module "+i.name,_="function"==typeof i.transform,F="function"==typeof i.calcTransform;if(!_&&!F)throw Error(s+" is missing a *transform* or *calcTransform* method.");for(var j in _&&F&&x.log([s+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),N(i.attributes)||x.log(s+" registered without an *attributes* object."),"function"!=typeof i.supplyDefaults&&x.log(s+" registered without a *supplyDefaults* method."),o.transformsRegistry[i.name]=i,o.componentsRegistry)mergeComponentAttrsToTransform(j,i.name)})(_);break;case"component":(function(i){if("string"!=typeof i.name)throw Error("Component module *name* must be a string.");var s=i.name;for(var x in o.componentsRegistry[s]=i,i.layoutAttributes&&(i.layoutAttributes._isLinkedToArray&&F(o.layoutArrayContainers,s),findArrayRegexps(i)),o.modules)mergeComponentAttrsToTrace(s,x);for(var _ in o.subplotsRegistry)mergeComponentAttrsToSubplot(s,_);for(var N in o.transformsRegistry)mergeComponentAttrsToTransform(s,N);i.schema&&i.schema.layout&&$(X,i.schema.layout)})(_);break;case"locale":(function(i){var s=i.name,x=s.split("-")[0],_=i.dictionary,F=i.format,N=_&&Object.keys(_).length,j=F&&Object.keys(F).length,G=o.localeRegistry,Z=G[s];if(Z||(G[s]=Z={}),x!==s){var X=G[x];X||(G[x]=X={}),N&&X.dictionary===Z.dictionary&&(X.dictionary=_),j&&X.format===Z.format&&(X.format=F)}N&&(Z.dictionary=_),j&&(Z.format=F)})(_);break;case"apiMethod":var G=_.name;o.apiMethodRegistry[G]=_.fn;break;default:throw Error("Invalid module was attempted to be registered!")}}},o.getModule=function(i){var s=o.modules[getTraceType(i)];return!!s&&s._module},o.traceIs=function(i,s){if("various"===(i=getTraceType(i)))return!1;var _=o.modules[i];return _||(i&&x.log("Unrecognized trace type "+i+"."),_=o.modules[Z.type.dflt]),!!_.categories[s]},o.getTransformIndices=function(i,o){for(var s=[],x=i.transforms||[],_=0;_<x.length;_++)x[_].type===o&&s.push(_);return s},o.hasTransform=function(i,o){for(var s=i.transforms||[],x=0;x<s.length;x++)if(s[x].type===o)return!0;return!1},o.getComponentMethod=function(i,s){var x=o.componentsRegistry[i];return x&&x[s]||_},o.call=function(){var i=arguments[0],s=[].slice.call(arguments,1);return o.apiMethodRegistry[i].apply(null,s)}},61914:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=_.extendFlat,N=_.extendDeep;function cloneLayoutOverride(i){var o;switch(i){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}i.exports=function(i,o){var s,_=i.data,j=i.layout,G=N([],_),Z=N({},j,cloneLayoutOverride(o.tileClass)),X=i._context||{};if(o.width&&(Z.width=o.width),o.height&&(Z.height=o.height),"thumbnail"===o.tileClass||"themes__thumb"===o.tileClass){Z.annotations=[];var J=Object.keys(Z);for(s=0;s<J.length;s++)["xaxis","yaxis","zaxis"].indexOf(J[s].slice(0,5))>-1&&(Z[J[s]].title={text:""});for(s=0;s<G.length;s++){var $=G[s];$.showscale=!1,$.marker&&($.marker.showscale=!1),x.traceIs($,"pie-like")&&($.textposition="none")}}if(Array.isArray(o.annotations))for(s=0;s<o.annotations.length;s++)Z.annotations.push(o.annotations[s]);var ee=Object.keys(Z).filter(function(i){return i.match(/^scene\d*$/)});if(ee.length){var et={};for("thumbnail"===o.tileClass&&(et={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),s=0;s<ee.length;s++){var er=Z[ee[s]];er.xaxis||(er.xaxis={}),er.yaxis||(er.yaxis={}),er.zaxis||(er.zaxis={}),F(er.xaxis,et),F(er.yaxis,et),F(er.zaxis,et),er._scene=null}}var en=document.createElement("div");o.tileClass&&(en.className=o.tileClass);var ei={gd:en,td:en,layout:Z,data:G,config:{staticPlot:void 0===o.staticPlot||o.staticPlot,plotGlPixelRatio:void 0===o.plotGlPixelRatio?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:X.mapboxAccessToken}};return"transparent"!==o.setBackground&&(ei.config.setBackground=o.setBackground||"opaque"),ei.gd.defaultLayout=cloneLayoutOverride(o.tileClass),ei}},7239:function(i,o,s){"use strict";var x=s(71828),_=s(403),F=s(22435),N=s(25095);i.exports=function(i,o){var s;return x.isPlainObject(i)||(s=x.getGraphDiv(i)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(j,G){s&&s._snapshotInProgress&&G(Error("Snapshotting already in progress.")),x.isIE()&&"svg"!==o.format&&G(Error(N.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var Z=_(i,o),X=o.filename||i.fn||"newplot";X+="."+o.format.replace("-","."),Z.then(function(i){return s&&(s._snapshotInProgress=!1),F(i,X,o.format)}).then(function(i){j(i)}).catch(function(i){s&&(s._snapshotInProgress=!1),G(i)})})}},22435:function(i,o,s){"use strict";var x=s(71828),_=s(25095);i.exports=function(i,o,s){var F=document.createElement("a"),N="download"in F;return new Promise(function(j,G){if(x.isIE())return Z=_.createBlob(i,"svg"),window.navigator.msSaveBlob(Z,o),Z=null,j(o);if(N)return Z=_.createBlob(i,s),X=_.createObjectURL(Z),F.href=X,F.download=o,document.body.appendChild(F),F.click(),document.body.removeChild(F),_.revokeObjectURL(X),Z=null,j(o);if(x.isSafari()){var Z,X,J="svg"===s?",":";base64,";return _.octetStream(J+encodeURIComponent(i)),j(o)}G(Error("download error"))})}},25095:function(i,o,s){"use strict";var x=s(73972);o.getDelay=function(i){return i._has&&(i._has("gl3d")||i._has("gl2d")||i._has("mapbox"))?500:0},o.getRedrawFunc=function(i){return function(){x.getComponentMethod("colorbar","draw")(i)}},o.encodeSVG=function(i){return"data:image/svg+xml,"+encodeURIComponent(i)},o.encodeJSON=function(i){return"data:application/json,"+encodeURIComponent(i)};var _=window.URL||window.webkitURL;o.createObjectURL=function(i){return _.createObjectURL(i)},o.revokeObjectURL=function(i){return _.revokeObjectURL(i)},o.createBlob=function(i,o){if("svg"===o)return new window.Blob([i],{type:"image/svg+xml;charset=utf-8"});if("full-json"===o)return new window.Blob([i],{type:"application/json;charset=utf-8"});var s=function(i){for(var o=i.length,s=new ArrayBuffer(o),x=new Uint8Array(s),_=0;_<o;_++)x[_]=i.charCodeAt(_);return s}(window.atob(i));return new window.Blob([s],{type:"image/"+o})},o.octetStream=function(i){document.location.href="data:application/octet-stream"+i},o.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,o.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(i,o,s){"use strict";var x=s(25095),_={getDelay:x.getDelay,getRedrawFunc:x.getRedrawFunc,clone:s(61914),toSVG:s(5900),svgToImg:s(70942),toImage:s(56395),downloadImage:s(7239)};i.exports=_},70942:function(i,o,s){"use strict";var x=s(71828),_=s(15398).EventEmitter,F=s(25095);i.exports=function(i){var o=i.emitter||new _,s=new Promise(function(_,N){var j,G,Z=window.Image,X=i.svg,J=i.format||"png";if(x.isIE()&&"svg"!==J){var $=Error(F.MSG_IE_BAD_FORMAT);return(N($),i.promise)?s:o.emit("error",$)}var ee=i.canvas,et=i.scale||1,er=i.width||300,en=i.height||150,ei=et*er,eo=et*en,es=ee.getContext("2d",{willReadFrequently:!0}),el=new Z;"svg"===J||x.isSafari()?G=F.encodeSVG(X):(j=F.createBlob(X,"svg"),G=F.createObjectURL(j)),ee.width=ei,ee.height=eo,el.onload=function(){var s;switch(j=null,F.revokeObjectURL(G),"svg"!==J&&es.drawImage(el,0,0,ei,eo),J){case"jpeg":s=ee.toDataURL("image/jpeg");break;case"png":s=ee.toDataURL("image/png");break;case"webp":s=ee.toDataURL("image/webp");break;case"svg":s=G;break;default:var x="Image format is not jpeg, png, svg or webp.";if(N(Error(x)),!i.promise)return o.emit("error",x)}_(s),i.promise||o.emit("success",s)},el.onerror=function(s){if(j=null,F.revokeObjectURL(G),N(s),!i.promise)return o.emit("error",s)},el.src=G});return i.promise?s:o}},56395:function(i,o,s){"use strict";var x=s(15398).EventEmitter,_=s(73972),F=s(71828),N=s(25095),j=s(61914),G=s(5900),Z=s(70942);i.exports=function(i,o){var s=new x,X=j(i,{format:"png"}),J=X.gd;J.style.position="absolute",J.style.left="-5000px",document.body.appendChild(J);var $=N.getRedrawFunc(J);return _.call("_doPlot",J,X.data,X.layout,X.config).then($).then(function(){setTimeout(function(){var i=G(J),x=document.createElement("canvas");x.id=F.randstr(),(s=Z({format:o.format,width:J._fullLayout.width,height:J._fullLayout.height,canvas:x,emitter:s,svg:i})).clean=function(){J&&document.body.removeChild(J)}},N.getDelay(J._fullLayout))}).catch(function(i){s.emit("error",i)}),s}},5900:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(7901),j=s(77922),G=/"/g,Z="TOBESTRIPPED",X=RegExp('("'+Z+")|("+Z+'")',"g");i.exports=function(i,o,s){var J,$,ee,et,er=i._fullLayout,en=er._paper,ei=er._toppaper,eo=er.width,es=er.height;en.insert("rect",":first-child").call(F.setRect,0,0,eo,es).call(N.fill,er.paper_bgcolor);var el=er._basePlotModules||[];for(et=0;et<el.length;et++){var ec=el[et];ec.toSVG&&ec.toSVG(i)}if(ei){var eu=ei.node().childNodes,ef=Array.prototype.slice.call(eu);for(et=0;et<ef.length;et++){var eh=ef[et];eh.childNodes.length&&en.node().appendChild(eh)}}er._draggers&&er._draggers.remove(),en.node().style.background="",en.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var i=x.select(this);if("hidden"===this.style.visibility||"none"===this.style.display){i.remove();return}i.style({visibility:null,display:null});var o=this.style.fontFamily;o&&-1!==o.indexOf('"')&&i.style("font-family",o.replace(G,Z))}),en.selectAll(".gradient_filled,.pattern_filled").each(function(){var i=x.select(this),o=this.style.fill;o&&-1!==o.indexOf("url(")&&i.style("fill",o.replace(G,Z));var s=this.style.stroke;s&&-1!==s.indexOf("url(")&&i.style("stroke",s.replace(G,Z))}),("pdf"===o||"eps"===o)&&en.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),en.node().setAttributeNS(j.xmlns,"xmlns",j.svg),en.node().setAttributeNS(j.xmlns,"xmlns:xlink",j.xlink),"svg"===o&&s&&(en.attr("width",s*eo),en.attr("height",s*es),en.attr("viewBox","0 0 "+eo+" "+es));var ed=new window.XMLSerializer().serializeToString(en.node());return J=ed,$=x.select("body").append("div").style({display:"none"}).html(""),ee=J.replace(/(&[^;]*;)/gi,function(i){return"&lt;"===i?"&#60;":"&rt;"===i?"&#62;":-1!==i.indexOf("<")||-1!==i.indexOf(">")?"":$.html(i).text()}),$.remove(),ed=(ed=(ed=ee).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(X,"'"),_.isIE()&&(ed=(ed=(ed=ed.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),ed}},75341:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;x.mergeArray(o.text,i,"tx"),x.mergeArray(o.hovertext,i,"htx");var _=o.marker;if(_){x.mergeArray(_.opacity,i,"mo",!0),x.mergeArray(_.color,i,"mc");var F=_.line;F&&(x.mergeArray(F.color,i,"mlc"),x.mergeArrayCastPositive(F.width,i,"mlw"))}}},1486:function(i,o,s){"use strict";var x=s(82196),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(5386).si,j=s(50693),G=s(41940),Z=s(97313),X=s(79952).u,J=s(1426).extendFlat,$=G({editType:"calc",arrayOk:!0,colorEditType:"style"}),ee=J({},x.marker.line.width,{dflt:0}),et=J({width:ee,editType:"calc"},j("marker.line")),er=J({line:et,editType:"calc"},j("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:X});i.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),text:x.text,texttemplate:N({editType:"plot"},{keys:Z.eventDataKeys}),hovertext:x.hovertext,hovertemplate:F({},{keys:Z.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:J({},$,{}),insidetextfont:J({},$,{}),outsidetextfont:J({},$,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:J({},x.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:er,offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:{marker:{opacity:x.selected.marker.opacity,color:x.selected.marker.color,editType:"style"},textfont:x.selected.textfont,editType:"style"},unselected:{marker:{opacity:x.unselected.marker.opacity,color:x.unselected.marker.color,editType:"style"},textfont:x.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(i,o,s){"use strict";var x=s(89298),_=s(42973),F=s(52075).hasColorscale,N=s(78803),j=s(75341),G=s(66279);i.exports=function(i,o){var s,Z,X,J,$,ee,et=x.getFromId(i,o.xaxis||"x"),er=x.getFromId(i,o.yaxis||"y"),en={msUTC:!!(o.base||0===o.base)};"h"===o.orientation?(s=et.makeCalcdata(o,"x",en),X=er.makeCalcdata(o,"y"),J=_(o,er,"y",X),$=!!o.yperiodalignment,ee="y"):(s=er.makeCalcdata(o,"y",en),X=et.makeCalcdata(o,"x"),J=_(o,et,"x",X),$=!!o.xperiodalignment,ee="x");for(var ei=Math.min((Z=J.vals).length,s.length),eo=Array(ei),es=0;es<ei;es++)eo[es]={p:Z[es],s:s[es]},$&&(eo[es].orig_p=X[es],eo[es][ee+"End"]=J.ends[es],eo[es][ee+"Start"]=J.starts[es]),o.ids&&(eo[es].id=String(o.ids[es]));return F(o,"marker")&&N(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),F(o,"marker.line")&&N(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),j(eo,o),G(eo,o),eo}},97313:function(i){"use strict";i.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(i,o,s){"use strict";var x=s(92770),_=s(71828).isArrayOrTypedArray,F=s(50606).BADNUM,N=s(73972),j=s(89298),G=s(99082).getAxisGroup,Z=s(61546);function setGroupPositions(i,o,s,N,X){var J,$,ee,et,er,en;if(N.length){switch(function(i,o){var s,F;for(s=0;s<o.length;s++){var N,j=o[s],G=j[0].trace,Z="funnel"===G.type?G._base:G.base,X="h"===G.orientation?G.xcalendar:G.ycalendar,J="category"===i.type||"multicategory"===i.type?function(){return null}:i.d2c;if(_(Z)){for(F=0;F<Math.min(Z.length,j.length);F++)x(N=J(Z[F],0,X))?(j[F].b=+N,j[F].hasB=1):j[F].b=0;for(;F<j.length;F++)j[F].b=0}else{var $=x(N=J(Z,0,X));for(F=0,N=$?N:0;F<j.length;F++)j[F].b=N,$&&(j[F].hasB=1)}}}(s,N),X.mode){case"overlay":setGroupPositionsInOverlayMode(o,s,N,X);break;case"group":for(ee=0,J=[],$=[];ee<N.length;ee++)void 0===(et=N[ee])[0].trace.offset?$.push(et):J.push(et);$.length&&(er=$,en=new Z(er,{posAxis:o,sepNegVal:!1,overlapNoMerge:!X.norm}),function(i,o,s,x){for(var _=i._fullLayout,F=s.positions,N=s.distinctPositions,j=s.minDiff,Z=s.traces,X=Z.length,J=F.length!==N.length,$=j*(1-x.gap),ee=G(_,o._id)+Z[0][0].trace.orientation,et=_._alignmentOpts[ee]||{},er=0;er<X;er++){var en,ei,eo=Z[er],es=eo[0].trace,el=Object.keys((et[es.alignmentgroup]||{}).offsetGroups||{}).length,ec=(en=el?$/el:J?$/X:$)*(1-(x.groupgap||0));ei=el?((2*es._offsetIndex+1-el)*en-ec)/2:J?((2*er+1-X)*en-ec)/2:-ec/2;var eu=eo[0].t;eu.barwidth=ec,eu.poffset=ei,eu.bargroupwidth=$,eu.bardelta=j}s.binWidth=Z[0][0].t.barwidth/100,applyAttributes(s),setBarCenterAndWidth(o,s),updatePositionAxis(o,s,J)}(i,o,en,X),function(i,o){for(var s=i.traces,x=0;x<s.length;x++){var _=s[x];if(void 0===_[0].trace.base)for(var N=new Z([_],{posAxis:o,sepNegVal:!0,overlapNoMerge:!0}),j=0;j<_.length;j++){var G=_[j];if(G.p!==F){var X=N.put(G.p,G.b+G.s);X&&(G.b=X)}}}}(en,o),X.norm?(sieveBars(en),normalizeBars(s,en,X)):setBaseAndTop(s,en)),J.length&&setGroupPositionsInOverlayMode(o,s,J,X);break;case"stack":case"relative":for(ee=0,J=[],$=[];ee<N.length;ee++)void 0===(et=N[ee])[0].trace.base?$.push(et):J.push(et);$.length&&function(i,o,s,x,_){var N=new Z(x,{posAxis:o,sepNegVal:"relative"===_.mode,overlapNoMerge:!(_.norm||"stack"===_.mode||"relative"===_.mode)});setOffsetAndWidth(o,N,_),function(i,o,s){var x=getAxisLetter(i),_=o.traces;for(J=0;J<_.length;J++)if("funnel"===(Z=(G=_[J])[0].trace).type)for($=0;$<G.length;$++)(ee=G[$]).s!==F&&o.put(ee.p,-.5*ee.s);for(J=0;J<_.length;J++){X="funnel"===(Z=(G=_[J])[0].trace).type;var N=[];for($=0;$<G.length;$++)if((ee=G[$]).s!==F){et=X?ee.s:ee.s+ee.b;var G,Z,X,J,$,ee,et,er=o.put(ee.p,et),en=er+et;ee.b=er,ee[x]=en,!s.norm&&(N.push(en),ee.hasB&&N.push(er))}s.norm||(Z._extremes[i._id]=j.findExtremes(i,N,{tozero:!0,padded:!0}))}}(s,N,_);for(var G=0;G<x.length;G++)for(var X=x[G],J=0;J<X.length;J++){var $=X[J];$.s!==F&&$.b+$.s===N.get($.p,$.s)&&($._outmost=!0)}_.norm&&normalizeBars(s,N,_)}(0,o,s,$,X),J.length&&setGroupPositionsInOverlayMode(o,s,J,X)}(function(i,o){var s,_,F,N=getAxisLetter(o),j={},G=1/0,Z=-1/0;for(s=0;s<i.length;s++)for(_=0,F=i[s];_<F.length;_++){var X=F[_].p;x(X)&&(G=Math.min(G,X),Z=Math.max(Z,X))}var J=1e4/(Z-G),$=j.round=function(i){return String(Math.round(J*(i-G)))};for(s=0;s<i.length;s++){(F=i[s])[0].t.extents=j;var ee=F[0].t.poffset,et=Array.isArray(ee);for(_=0;_<F.length;_++){var er=F[_],en=er[N]-er.w/2;if(x(en)){var ei=er[N]+er.w/2,eo=$(er.p);j[eo]?j[eo]=[Math.min(en,j[eo][0]),Math.max(ei,j[eo][1])]:j[eo]=[en,ei]}er.p0=er.p+(et?ee[_]:ee),er.p1=er.p0+er.w,er.s0=er.b,er.s1=er.s0+er.s}}})(N,o)}}function setGroupPositionsInOverlayMode(i,o,s,x){for(var _=0;_<s.length;_++){var F=s[_],N=new Z([F],{posAxis:i,sepNegVal:!1,overlapNoMerge:!x.norm});setOffsetAndWidth(i,N,x),x.norm?(sieveBars(N),normalizeBars(o,N,x)):setBaseAndTop(o,N)}}function setOffsetAndWidth(i,o,s){for(var x=o.minDiff,_=o.traces,F=x*(1-s.gap),N=F*(1-(s.groupgap||0)),j=-N/2,G=0;G<_.length;G++){var Z=_[G][0].t;Z.barwidth=N,Z.poffset=j,Z.bargroupwidth=F,Z.bardelta=x}o.binWidth=_[0][0].t.barwidth/100,applyAttributes(o),setBarCenterAndWidth(i,o),updatePositionAxis(i,o)}function applyAttributes(i){var o=i.traces;for(s=0;s<o.length;s++){var s,F,N,j=o[s],G=j[0],Z=G.trace,X=G.t,J=Z._offset||Z.offset,$=X.poffset;if(_(J)){for(F=0,N=Array.prototype.slice.call(J,0,j.length);F<N.length;F++)x(N[F])||(N[F]=$);for(F=N.length;F<j.length;F++)N.push($);X.poffset=N}else void 0!==J&&(X.poffset=J);var ee=Z._width||Z.width,et=X.barwidth;if(_(ee)){var er=Array.prototype.slice.call(ee,0,j.length);for(F=0;F<er.length;F++)x(er[F])||(er[F]=et);for(F=er.length;F<j.length;F++)er.push(et);if(X.barwidth=er,void 0===J){for(F=0,N=[];F<j.length;F++)N.push($+(et-er[F])/2);X.poffset=N}}else void 0!==ee&&(X.barwidth=ee,void 0===J&&(X.poffset=$+(et-ee)/2))}}function setBarCenterAndWidth(i,o){for(var s=o.traces,x=getAxisLetter(i),_=0;_<s.length;_++)for(var F=s[_],N=F[0].t,j=N.poffset,G=Array.isArray(j),Z=N.barwidth,X=Array.isArray(Z),J=0;J<F.length;J++){var $=F[J],ee=$.w=X?Z[J]:Z;void 0===$.p&&($.p=$[x],$["orig_"+x]=$[x]);var et=(G?j[J]:j)+ee/2;$[x]=$.p+et}}function updatePositionAxis(i,o,s){var x=o.traces,_=o.minDiff/2;j.minDtick(i,o.minDiff,o.distinctPositions[0],s);for(var F=0;F<x.length;F++){var N,G,Z,X,J=x[F],$=J[0],ee=$.trace,et=[];for(X=0;X<J.length;X++)G=(N=J[X]).p-_,Z=N.p+_,et.push(G,Z);if(ee.width||ee.offset){var er=$.t,en=er.poffset,ei=er.barwidth,eo=Array.isArray(en),es=Array.isArray(ei);for(X=0;X<J.length;X++){N=J[X];var el=eo?en[X]:en,ec=es?ei[X]:ei;Z=(G=N.p+el)+ec,et.push(G,Z)}}ee._extremes[i._id]=j.findExtremes(i,et,{padded:!1})}}function setBaseAndTop(i,o){for(var s=o.traces,x=getAxisLetter(i),_=0;_<s.length;_++){for(var F=s[_],N=F[0].trace,G="scatter"===N.type,Z="v"===N.orientation,X=[],J=!1,$=0;$<F.length;$++){var ee=F[$],et=G?0:ee.b,er=G?Z?ee.y:ee.x:et+ee.s;ee[x]=er,X.push(er),ee.hasB&&X.push(et),ee.hasB&&ee.b||(J=!0)}N._extremes[i._id]=j.findExtremes(i,X,{tozero:J,padded:!0})}}function sieveBars(i){for(var o=i.traces,s=0;s<o.length;s++)for(var x=o[s],_=0;_<x.length;_++){var N=x[_];N.s!==F&&i.put(N.p,N.b+N.s)}}function normalizeBars(i,o,s){var _=o.traces,N=getAxisLetter(i),G="fraction"===s.norm?1:100,Z=G/1e9,X=i.l2c(i.c2l(0)),J="stack"===s.mode?G:X;function needsPadding(o){return x(i.c2l(o))&&(o<X-Z||o>J+Z||!x(X))}for(var $=0;$<_.length;$++){for(var ee=_[$],et=ee[0].trace,er=[],en=!1,ei=!1,eo=0;eo<ee.length;eo++){var es=ee[eo];if(es.s!==F){var el=Math.abs(G/o.get(es.p,es.s));es.b*=el,es.s*=el;var ec=es.b,eu=ec+es.s;es[N]=eu,er.push(eu),ei=ei||needsPadding(eu),es.hasB&&(er.push(ec),ei=ei||needsPadding(ec)),es.hasB&&es.b||(en=!0)}}et._extremes[i._id]=j.findExtremes(i,er,{tozero:en,padded:ei})}}function getAxisLetter(i){return i._id.charAt(0)}i.exports={crossTraceCalc:function(i,o){for(var s=o.xaxis,x=o.yaxis,_=i._fullLayout,F=i._fullData,j=i.calcdata,G=[],Z=[],X=0;X<F.length;X++){var J=F[X];if(!0===J.visible&&N.traceIs(J,"bar")&&J.xaxis===s._id&&J.yaxis===x._id&&("h"===J.orientation?G.push(j[X]):Z.push(j[X]),J._computePh))for(var $=i.calcdata[X],ee=0;ee<$.length;ee++)"function"==typeof $[ee].ph0&&($[ee].ph0=$[ee].ph0()),"function"==typeof $[ee].ph1&&($[ee].ph1=$[ee].ph1())}var et={xCat:"category"===s.type||"multicategory"===s.type,yCat:"category"===x.type||"multicategory"===x.type,mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};setGroupPositions(i,s,x,Z,et),setGroupPositions(i,x,s,G,et)},setGroupPositions:setGroupPositions}},90769:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(73972),N=s(67513),j=s(73927),G=s(98340),Z=s(26125),X=s(1486),J=x.coerceFont;function handleText(i,o,s,_,F,N){var j=!1!==(N=N||{}).moduleHasSelected,G=!1!==N.moduleHasUnselected,Z=!1!==N.moduleHasConstrain,X=!1!==N.moduleHasCliponaxis,$=!1!==N.moduleHasTextangle,ee=!1!==N.moduleHasInsideanchor,et=!!N.hasPathbar,er=Array.isArray(F)||"auto"===F,en=er||"inside"===F,ei=er||"outside"===F;if(en||ei){var eo=J(_,"textfont",s.font),es=x.extendFlat({},eo),el=!(i.textfont&&i.textfont.color);if(el&&delete es.color,J(_,"insidetextfont",es),et){var ec=x.extendFlat({},eo);el&&delete ec.color,J(_,"pathbar.textfont",ec)}ei&&J(_,"outsidetextfont",eo),j&&_("selected.textfont.color"),G&&_("unselected.textfont.color"),Z&&_("constraintext"),X&&_("cliponaxis"),$&&_("textangle"),_("texttemplate")}en&&ee&&_("insidetextanchor")}i.exports={supplyDefaults:function(i,o,s,Z){function coerce(s,_){return x.coerce(i,o,X,s,_)}if(!N(i,o,Z,coerce)){o.visible=!1;return}j(i,o,Z,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("orientation",o.x&&!o.y?"h":"v"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate");var J=coerce("textposition");handleText(i,o,Z,coerce,J,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),G(i,o,coerce,s,Z);var $=(o.marker.line||{}).color,ee=F.getComponentMethod("errorbars","supplyDefaults");ee(i,o,$||_.defaultLine,{axis:"y"}),ee(i,o,$||_.defaultLine,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(o,coerce)},crossTraceDefaults:function(i,o){var s;function coerce(i){return x.coerce(s._input,s,X,i)}if("group"===o.barmode)for(var _=0;_<i.length;_++)"bar"===(s=i[_]).type&&Z(s._input,s,o,coerce)},handleText:handleText}},58065:function(i){"use strict";i.exports=function(i,o,s){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),"h"===s.orientation?(i.label=i.y,i.value=i.x):(i.label=i.x,i.value=i.y),i}},69383:function(i,o,s){"use strict";var x=s(92770),_=s(84267),F=s(71828).isArrayOrTypedArray;o.coerceString=function(i,o,s){if("string"==typeof o){if(o||!i.noBlank)return o}else if(("number"==typeof o||!0===o)&&!i.strict)return String(o);return void 0!==s?s:i.dflt},o.coerceNumber=function(i,o,s){if(x(o)){o=+o;var _=i.min,F=i.max;if(!(void 0!==_&&o<_||void 0!==F&&o>F))return o}return void 0!==s?s:i.dflt},o.coerceColor=function(i,o,s){return _(o).isValid()?o:void 0!==s?s:i.dflt},o.coerceEnumerated=function(i,o,s){return(i.coerceNumber&&(o=+o),-1!==i.values.indexOf(o))?o:void 0!==s?s:i.dflt},o.getValue=function(i,o){var s;return Array.isArray(i)?o<i.length&&(s=i[o]):s=i,s},o.getLineWidth=function(i,o){return 0<o.mlw?o.mlw:F(i.marker.line.width)?0:i.marker.line.width}},95423:function(i,o,s){"use strict";var x=s(30211),_=s(73972),F=s(7901),N=s(71828).fillText,j=s(69383).getLineWidth,G=s(89298).hoverLabelText,Z=s(50606).BADNUM;function hoverOnBars(i,o,s,_,F){var j,X,J,$,ee,et,er,en=i.cd,ei=en[0].trace,eo=en[0].t,es="closest"===_,el="waterfall"===ei.type,ec=i.maxHoverDistance,eu=i.maxSpikeDistance;"h"===ei.orientation?(j=s,X=o,J="y",$="x",ee=sizeFn,et=positionFn):(j=o,X=s,J="x",$="y",et=sizeFn,ee=positionFn);var ef=ei[J+"period"],eh=es||ef;function thisBarMinPos(i){return thisBarExtPos(i,-1)}function thisBarMaxPos(i){return thisBarExtPos(i,1)}function thisBarExtPos(i,o){var s=i.w;return i[J]+o*s/2}function periodLength(i){return i[J+"End"]-i[J+"Start"]}var ed=es?thisBarMinPos:ef?function(i){return i.p-periodLength(i)/2}:function(i){return Math.min(thisBarMinPos(i),i.p-eo.bardelta/2)},ep=es?thisBarMaxPos:ef?function(i){return i.p+periodLength(i)/2}:function(i){return Math.max(thisBarMaxPos(i),i.p+eo.bardelta/2)};function inbox(i,o,s){return F.finiteRange&&(s=0),x.inbox(i-j,o-j,s+Math.min(1,Math.abs(o-i)/er)-1)}function positionFn(i){return inbox(ed(i),ep(i),ec)}function getSize(i){var o=i[$];if(el){var s=Math.abs(i.rawS)||0;X>0?o+=s:X<0&&(o-=s)}return o}function sizeFn(i){var o=X,s=i.b,_=getSize(i);return x.inbox(s-o,_-o,ec+(_-o)/(_-s)-1)}var eg=i[J+"a"],em=i[$+"a"];er=Math.abs(eg.r2c(eg.range[1])-eg.r2c(eg.range[0]));var ey=x.getDistanceFunction(_,ee,et,function(i){return(ee(i)+et(i))/2});if(x.getClosest(en,ey,i),!1!==i.index&&en[i.index].p!==Z){eh||(ed=function(i){return Math.min(thisBarMinPos(i),i.p-eo.bargroupwidth/2)},ep=function(i){return Math.max(thisBarMaxPos(i),i.p+eo.bargroupwidth/2)});var ev,ex,e_,ew=en[i.index],eT=ei.base?ew.b+ew.s:ew.s;i[$+"0"]=i[$+"1"]=em.c2p(ew[$],!0),i[$+"LabelVal"]=eT;var ek=eo.extents[eo.extents.round(ew.p)];i[J+"0"]=eg.c2p(es?ed(ew):ek[0],!0),i[J+"1"]=eg.c2p(es?ep(ew):ek[1],!0);var eA=void 0!==ew.orig_p;return i[J+"LabelVal"]=eA?ew.orig_p:ew.p,i.labelLabel=G(eg,i[J+"LabelVal"],ei[J+"hoverformat"]),i.valueLabel=G(em,i[$+"LabelVal"],ei[$+"hoverformat"]),i.baseLabel=G(em,ew.b,ei[$+"hoverformat"]),i.spikeDistance=(ev=X,ex=ew.b,e_=getSize(ew),(x.inbox(ex-ev,e_-ev,eu+(e_-ev)/(e_-ex)-1)+inbox(thisBarMinPos(ew),thisBarMaxPos(ew),eu))/2),i[J+"Spike"]=eg.c2p(ew.p,!0),N(ew,ei,i),i.hovertemplate=ei.hovertemplate,i}}function getTraceColor(i,o){var s=o.mcc||i.marker.color,x=o.mlcc||i.marker.line.color,_=j(i,o);return F.opacity(s)?s:F.opacity(x)&&_?x:void 0}i.exports={hoverPoints:function(i,o,s,x,F){var N=hoverOnBars(i,o,s,x,F);if(N){var j=N.cd,G=j[0].trace,Z=j[N.index];return N.color=getTraceColor(G,Z),_.getComponentMethod("errorbars","hoverInfo")(Z,G,N),[N]}},hoverOnBars:hoverOnBars,getTraceColor:getTraceColor}},60822:function(i,o,s){"use strict";i.exports={attributes:s(1486),layoutAttributes:s(43641),supplyDefaults:s(90769).supplyDefaults,crossTraceDefaults:s(90769).crossTraceDefaults,supplyLayoutDefaults:s(13957),calc:s(92290),crossTraceCalc:s(11661).crossTraceCalc,colorbar:s(4898),arraysToCalcdata:s(75341),plot:s(17295).plot,style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,hoverPoints:s(95423).hoverPoints,eventData:s(58065),selectPoints:s(81974),moduleType:"trace",name:"bar",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(i){"use strict";i.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(i,o,s){"use strict";var x=s(73972),_=s(89298),F=s(71828),N=s(43641);i.exports=function(i,o,s){function coerce(s,x){return F.coerce(i,o,N,s,x)}for(var j=!1,G=!1,Z=!1,X={},J=coerce("barmode"),$=0;$<s.length;$++){var ee=s[$];if(x.traceIs(ee,"bar")&&ee.visible){if(j=!0,"group"===J){var et=ee.xaxis+ee.yaxis;X[et]&&(Z=!0),X[et]=!0}ee.visible&&"histogram"===ee.type&&"category"!==_.getFromId({_fullLayout:o},ee["v"===ee.orientation?"xaxis":"yaxis"]).type&&(G=!0)}}if(!j){delete o.barmode;return}"overlay"!==J&&coerce("barnorm"),coerce("bargap",G&&!Z?0:.2),coerce("bargroupgap")}},17295:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(71828),N=s(63893),j=s(7901),G=s(91424),Z=s(73972),X=s(89298).tickText,J=s(72597),$=J.recordMinTextSize,ee=J.clearMinTextSize,et=s(16688),er=s(69383),en=s(97313),ei=s(1486),eo=ei.text,es=ei.textposition,el=s(23469).appendArrayPointValue,ec=en.TEXTPAD;function keyFunc(i){return i.id}function transition(i,o,s,x){var _;return!o.uniformtext.mode&&hasTransition(s)?(x&&(_=x()),i.transition().duration(s.duration).ease(s.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()})):i}function hasTransition(i){return i&&i.duration>0}function getRotateFromAngle(i){return"auto"===i?0:i}function getRotatedTextSize(i,o){var s=Math.PI/180*o,x=Math.abs(Math.sin(s)),_=Math.abs(Math.cos(s));return{x:i.width*_+i.height*x,y:i.width*x+i.height*_}}function toMoveInsideBar(i,o,s,x,_,F){var N=!!F.isHorizontal,j=!!F.constrained,G=F.angle||0,Z=F.anchor||"end",X="start"===Z,J=((F.leftToRight||0)+1)/2,$=1-J,ee=_.width,et=_.height,er=Math.abs(o-i),en=Math.abs(x-s),ei=er>2*ec&&en>2*ec?ec:0;er-=2*ei,en-=2*ei;var eo=getRotateFromAngle(G);"auto"===G&&!(ee<=er&&et<=en)&&(ee>er||et>en)&&(!(ee>en||et>er)||ee<et!=er<en)&&(eo+=90);var es=getRotatedTextSize(_,eo),el=1;j&&(el=Math.min(1,er/es.x,en/es.y));var eu=_.left*$+_.right*J,ef=(_.top+_.bottom)/2,eh=(i+ec)*$+(o-ec)*J,ed=(s+x)/2,ep=0,eg=0;if(X||"end"===Z){var em=(N?es.x:es.y)/2,ey=N?i<o?1:-1:s<x?1:-1;N?X?(eh=i+ey*ei,ep=-ey*em):(eh=o-ey*ei,ep=ey*em):X?(ed=s+ey*ei,eg=-ey*em):(ed=x-ey*ei,eg=ey*em)}return{textX:eu,textY:ef,targetX:eh,targetY:ed,anchorX:ep,anchorY:eg,scale:el,rotate:eo}}i.exports={plot:function(i,o,s,J,en,ei){var eu=o.xaxis,ef=o.yaxis,eh=i._fullLayout,ed=i._context.staticPlot;en||(en={mode:eh.barmode,norm:eh.barmode,gap:eh.bargap,groupgap:eh.bargroupgap},ee("bar",eh));var ep=F.makeTraceGroups(J,s,"trace bars").each(function(s){var Z=x.select(this),J=s[0].trace,ee="waterfall"===J.type,ep="funnel"===J.type,eg="bar"===J.type||ep,em=0;ee&&J.connector.visible&&"between"===J.connector.mode&&(em=J.connector.line.width/2);var ey="h"===J.orientation,ev=hasTransition(en),ex=F.ensureSingle(Z,"g","points"),e_=function(i){if(i.ids)return keyFunc}(J),ew=ex.selectAll("g.point").data(F.identity,e_);ew.enter().append("g").classed("point",!0),ew.exit().remove(),ew.each(function(Z,ee){var ep,ex,e_,ew,eT,ek,eA=x.select(this),eS=(ep=[],ex=[],e_=ey?eu:ef,ew=ey?ef:eu,ep[0]=e_.c2p(Z.s0,!0),ex[0]=ew.c2p(Z.p0,!0),ep[1]=e_.c2p(Z.s1,!0),ex[1]=ew.c2p(Z.p1,!0),ey?[ep,ex]:[ex,ep]),eM=eS[0][0],eC=eS[0][1],eE=eS[1][0],eL=eS[1][1],eP=(ey?eC-eM:eL-eE)==0;if(eP&&eg&&er.getLineWidth(J,Z)&&(eP=!1),eP||(eP=!_(eM)||!_(eC)||!_(eE)||!_(eL)),Z.isBlank=eP,eP&&(ey?eC=eM:eL=eE),em&&!eP&&(ey?(eM-=(eM<eC?1:-1)*em,eC+=(eM<eC?1:-1)*em):(eE-=(eE<eL?1:-1)*em,eL+=(eE<eL?1:-1)*em)),"waterfall"===J.type){if(!eP){var eI=J[Z.dir].marker;eT=eI.line.width,ek=eI.color}}else eT=er.getLineWidth(J,Z),ek=Z.mc||J.marker.color;function roundWithLine(i){var o=x.round(eT/2%1,2);return 0===en.gap&&0===en.groupgap?x.round(Math.round(i)-o,2):i}if(!i._context.staticPlot){var eO=1>j.opacity(ek)||eT>.01?roundWithLine:function(i,o,s){return s&&i===o?i:Math.abs(i-o)>=2?roundWithLine(i):i>o?Math.ceil(i):Math.floor(i)};eM=eO(eM,eC,ey),eC=eO(eC,eM,ey),eE=eO(eE,eL,!ey),eL=eO(eL,eE,!ey)}var eD=transition(F.ensureSingle(eA,"path"),eh,en,ei);if(eD.style("vector-effect",ed?"none":"non-scaling-stroke").attr("d",isNaN((eC-eM)*(eL-eE))||eP&&i._context.staticPlot?"M0,0Z":"M"+eM+","+eE+"V"+eL+"H"+eC+"V"+eE+"Z").call(G.setClipUrl,o.layerClipId,i),!eh.uniformtext.mode&&ev){var eR=G.makePointStyleFns(J);G.singlePointStyle(Z,eD,J,eR,i)}(function(i,o,s,x,_,j,Z,J,ee,en,ei){var eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC,eE,eL,eP,eI,eO,eD,eR,eB,ez,eF,eN,ej,eU,eV,eH,eG=o.xaxis,eW=o.yaxis,eZ=i._fullLayout;function appendTextNode(o,s,x){return F.ensureSingle(o,"text").text(s).attr({class:"bartext bartext-"+ez,"text-anchor":"middle","data-notex":1}).call(G.font,x).call(N.convertToTspans,i)}var eY=x[0].trace,eX="h"===eY.orientation,eK=(eu=(ef=x[0].trace).texttemplate?function(i,o,s,x,_){var N,j,G,Z,J,$=o[0].trace,ee=F.castOption($,s,"texttemplate");if(!ee)return"";var et="histogram"===$.type,er="waterfall"===$.type,en="funnel"===$.type,ei="h"===$.orientation;function formatNumber(i){return X(J,J.c2l(i),!0).text}ei?(j="y",G=_,Z="x",J=x):(j="x",G=x,Z="y",J=_);var eo=o[s],es={};es.label=eo.p,es.labelLabel=es[j+"Label"]=(N=eo.p,X(G,G.c2l(N),!0).text);var ec=F.castOption($,eo.i,"text");(0===ec||ec)&&(es.text=ec),es.value=eo.s,es.valueLabel=es[Z+"Label"]=formatNumber(eo.s);var eu={};el(eu,$,eo.i),(et||void 0===eu.x)&&(eu.x=ei?es.value:es.label),(et||void 0===eu.y)&&(eu.y=ei?es.label:es.value),(et||void 0===eu.xLabel)&&(eu.xLabel=ei?es.valueLabel:es.labelLabel),(et||void 0===eu.yLabel)&&(eu.yLabel=ei?es.labelLabel:es.valueLabel),er&&(es.delta=+eo.rawS||eo.s,es.deltaLabel=formatNumber(es.delta),es.final=eo.v,es.finalLabel=formatNumber(es.final),es.initial=es.final-es.delta,es.initialLabel=formatNumber(es.initial)),en&&(es.value=eo.s,es.valueLabel=formatNumber(es.value),es.percentInitial=eo.begR,es.percentInitialLabel=F.formatPercent(eo.begR),es.percentPrevious=eo.difR,es.percentPreviousLabel=F.formatPercent(eo.difR),es.percentTotal=eo.sumR,es.percenTotalLabel=F.formatPercent(eo.sumR));var ef=F.castOption($,eo.i,"customdata");return ef&&(es.customdata=ef),F.texttemplateString(ee,es,i._d3locale,eu,es,$._meta||{})}(eZ,x,_,eG,eW):ef.textinfo?function(i,o,s,x){var _,N=i[0].trace,j="h"===N.orientation,G="waterfall"===N.type,Z="funnel"===N.type;function formatNumber(i){return X(j?s:x,+i,!0).text}var J=N.textinfo,$=i[o],ee=J.split("+"),et=[],hasFlag=function(i){return -1!==ee.indexOf(i)};if(hasFlag("label")&&et.push(X(j?x:s,i[o].p,!0).text),hasFlag("text")&&(0===(_=F.castOption(N,$.i,"text"))||_)&&et.push(_),G){var er=+$.rawS||$.s,en=$.v,ei=en-er;hasFlag("initial")&&et.push(formatNumber(ei)),hasFlag("delta")&&et.push(formatNumber(er)),hasFlag("final")&&et.push(formatNumber(en))}if(Z){hasFlag("value")&&et.push(formatNumber($.s));var eo=0;hasFlag("percent initial")&&eo++,hasFlag("percent previous")&&eo++,hasFlag("percent total")&&eo++;var es=eo>1;hasFlag("percent initial")&&(_=F.formatPercent($.begR),es&&(_+=" of initial"),et.push(_)),hasFlag("percent previous")&&(_=F.formatPercent($.difR),es&&(_+=" of previous"),et.push(_)),hasFlag("percent total")&&(_=F.formatPercent($.sumR),es&&(_+=" of total"),et.push(_))}return et.join("<br>")}(x,_,eG,eW):er.getValue(ef.text,_),er.coerceString(eo,eu));eh=er.getValue(eY.textposition,_),ez=er.coerceEnumerated(es,eh);var eJ="stack"===en.mode||"relative"===en.mode,e$=x[_],eQ=!eJ||e$._outmost;if(!eK||"none"===ez||(e$.isBlank||j===Z||J===ee)&&("auto"===ez||"inside"===ez)){s.select("text").remove();return}var e0=eZ.font,e1=et.getBarColor(x[_],eY),e2=et.getInsideTextFont(eY,_,e0,e1),e3=et.getOutsideTextFont(eY,_,e0),e5=s.datum();eX?"log"===eG.type&&e5.s0<=0&&(j=eG.range[0]<eG.range[1]?0:eG._length):"log"===eW.type&&e5.s0<=0&&(J=eW.range[0]<eW.range[1]?eW._length:0);var e4=Math.abs(Z-j)-2*ec,e6=Math.abs(ee-J)-2*ec;if("outside"!==ez||eQ||e$.hasB||(ez="inside"),"auto"===ez){if(eQ){ez="inside",eF=appendTextNode(s,eK,eV=F.ensureUniformFontSize(i,e2)),ej=(eN=G.bBox(eF.node())).width,eU=eN.height;var e8=ej>0&&eU>0,e7=ej<=e4&&eU<=e6,e9=ej<=e6&&eU<=e4,te=eX?e4>=ej*(e6/eU):e6>=eU*(e4/ej);e8&&(e7||e9||te)?ez="inside":(ez="outside",eF.remove(),eF=null)}else ez="inside"}if(!eF){var tt=(eF=appendTextNode(s,eK,eV=F.ensureUniformFontSize(i,"outside"===ez?e3:e2))).attr("transform");if(eF.attr("transform",""),ej=(eN=G.bBox(eF.node())).width,eU=eN.height,eF.attr("transform",tt),ej<=0||eU<=0){eF.remove();return}}var tr=eY.textangle;(eH="outside"===ez?(ed=j,ep=J,eg=eN,ev=!!(em={isHorizontal:eX,constrained:"both"===eY.constraintext||"outside"===eY.constraintext,angle:tr}).isHorizontal,ex=!!em.constrained,e_=em.angle||0,ew=eg.width,eT=eg.height,ek=Math.abs(Z-ed),eA=Math.abs(ee-ep),ey=ev?eA>2*ec?ec:0:ek>2*ec?ec:0,eS=1,ex&&(eS=ev?Math.min(1,eA/eT):Math.min(1,ek/ew)),eC=getRotatedTextSize(eg,eM=getRotateFromAngle(e_)),eE=(ev?eC.x:eC.y)/2,eL=(eg.left+eg.right)/2,eP=(eg.top+eg.bottom)/2,eI=(ed+Z)/2,eO=(ep+ee)/2,eD=0,eR=0,eB=ev?Z<ed?1:-1:ep<ee?1:-1,ev?(eI=Z-eB*ey,eD=eB*eE):(eO=ee+eB*ey,eR=-eB*eE),{textX:eL,textY:eP,targetX:eI,targetY:eO,anchorX:eD,anchorY:eR,scale:eS,rotate:eM}):toMoveInsideBar(j,Z,J,ee,eN,{isHorizontal:eX,constrained:"both"===eY.constraintext||"inside"===eY.constraintext,angle:tr,anchor:eY.insidetextanchor})).fontSize=eV.size,$("histogram"===eY.type?"bar":eY.type,eH,eZ),e$.transform=eH;var tn=transition(eF,eZ,en,ei);F.setTransormAndDisplay(tn,eH)})(i,o,eA,s,ee,eM,eC,eE,eL,en,ei),o.layerClipId&&G.hideOutsideRangePoint(Z,eA.select("text"),eu,ef,J.xcalendar,J.ycalendar)});var eT=!1===J.cliponaxis;G.setClipUrl(Z,eT?null:o.layerClipId,i)});Z.getComponentMethod("errorbars","plot")(i,ep,o,en)},toMoveInsideBar:toMoveInsideBar}},81974:function(i){"use strict";i.exports=function(i,o){var s,x=i.cd,_=i.xaxis,F=i.yaxis,N=x[0].trace,j="funnel"===N.type,G="h"===N.orientation,Z=[];if(!1===o)for(s=0;s<x.length;s++)x[s].selected=0;else for(s=0;s<x.length;s++){var X=x[s],J="ct"in X?X.ct:function(i,o,s,x,_){var F=o.c2p(x?i.s0:i.p0,!0),N=o.c2p(x?i.s1:i.p1,!0),j=s.c2p(x?i.p0:i.s0,!0),G=s.c2p(x?i.p1:i.s1,!0);return _?[(F+N)/2,(j+G)/2]:x?[N,(j+G)/2]:[(F+N)/2,G]}(X,_,F,G,j);o.contains(J,!1,s,i)?(Z.push({pointNumber:s,x:_.c2d(X.x),y:F.c2d(X.y)}),X.selected=1):X.selected=0}return Z}},61546:function(i,o,s){"use strict";i.exports=Sieve;var x=s(71828).distinctVals;function Sieve(i,o){this.traces=i,this.sepNegVal=o.sepNegVal,this.overlapNoMerge=o.overlapNoMerge;for(var s=1/0,_=o.posAxis._id.charAt(0),F=[],N=0;N<i.length;N++){for(var j=i[N],G=0;G<j.length;G++){var Z=j[G],X=Z.p;void 0===X&&(X=Z[_]),void 0!==X&&F.push(X)}j[0]&&j[0].width1&&(s=Math.min(j[0].width1,s))}this.positions=F;var J=x(F);this.distinctPositions=J.vals,1===J.vals.length&&s!==1/0?this.minDiff=s:this.minDiff=Math.min(J.minDiff,s);var $=(o.posAxis||{}).type;("category"===$||"multicategory"===$)&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}Sieve.prototype.put=function(i,o){var s=this.getLabel(i,o),x=this.bins[s]||0;return this.bins[s]=x+o,x},Sieve.prototype.get=function(i,o){var s=this.getLabel(i,o);return this.bins[s]||0},Sieve.prototype.getLabel=function(i,o){return(o<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?i:Math.round(i/this.binWidth))}},16688:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(91424),N=s(71828),j=s(73972),G=s(72597).resizeText,Z=s(1486),X=Z.textfont,J=Z.insidetextfont,$=Z.outsidetextfont,ee=s(69383);function stylePoints(i,o,s){F.pointStyle(i.selectAll("path"),o,s),styleTextPoints(i,o,s)}function styleTextPoints(i,o,s){i.selectAll("text").each(function(i){var _=x.select(this),j=N.ensureUniformFontSize(s,determineFont(_,i,o,s));F.font(_,j)})}function determineFont(i,o,s,x){var _=x._fullLayout.font,F=s.textfont;if(i.classed("bartext-inside")){var N=getBarColor(o,s);F=getInsideTextFont(s,o.i,_,N)}else i.classed("bartext-outside")&&(F=getOutsideTextFont(s,o.i,_));return F}function getTextFont(i,o,s){return getFontValue(X,i.textfont,o,s)}function getInsideTextFont(i,o,s,x){var F=getTextFont(i,o,s);return(void 0===i._input.textfont||void 0===i._input.textfont.color||Array.isArray(i.textfont.color)&&void 0===i.textfont.color[o])&&(F={color:_.contrast(x),family:F.family,size:F.size}),getFontValue(J,i.insidetextfont,o,F)}function getOutsideTextFont(i,o,s){var x=getTextFont(i,o,s);return getFontValue($,i.outsidetextfont,o,x)}function getFontValue(i,o,s,x){o=o||{};var _=ee.getValue(o.family,s),F=ee.getValue(o.size,s),N=ee.getValue(o.color,s);return{family:ee.coerceString(i.family,_,x.family),size:ee.coerceNumber(i.size,F,x.size),color:ee.coerceColor(i.color,N,x.color)}}function getBarColor(i,o){return"waterfall"===o.type?o[i.dir].marker.color:i.mcc||i.mc||o.marker.color}i.exports={style:function(i){var o=x.select(i).selectAll("g.barlayer").selectAll("g.trace");G(i,o,"bar");var s=o.size(),_=i._fullLayout;o.style("opacity",function(i){return i[0].trace.opacity}).each(function(i){("stack"===_.barmode&&s>1||0===_.bargap&&0===_.bargroupgap&&!i[0].trace.marker.line.width)&&x.select(this).attr("shape-rendering","crispEdges")}),o.selectAll("g.points").each(function(o){stylePoints(x.select(this),o[0].trace,i)}),j.getComponentMethod("errorbars","style")(o)},styleTextPoints:styleTextPoints,styleOnSelect:function(i,o,s){var _=o[0].trace;_.selectedpoints?(F.selectedPointStyle(s.selectAll("path"),_),function(i,o,s){i.each(function(i){var _,j=x.select(this);if(i.selected){_=N.ensureUniformFontSize(s,determineFont(j,i,o,s));var G=o.selected.textfont&&o.selected.textfont.color;G&&(_.color=G),F.font(j,_)}else F.selectedTextStyle(j,o)})}(s.selectAll("text"),_,i)):(stylePoints(s,_,i),j.getComponentMethod("errorbars","style")(s))},getInsideTextFont:getInsideTextFont,getOutsideTextFont:getOutsideTextFont,getBarColor:getBarColor,resizeText:G}},98340:function(i,o,s){"use strict";var x=s(7901),_=s(52075).hasColorscale,F=s(1586),N=s(71828).coercePattern;i.exports=function(i,o,s,j,G){var Z=s("marker.color",j),X=_(i,"marker");X&&F(i,o,G,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",x.defaultLine),_(i,"marker.line")&&F(i,o,G,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),N(s,"marker.pattern",Z,X),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(i,o,s){"use strict";var x=s(39898),_=s(71828);function getMinKey(i){return"_"+i+"Text_minsize"}i.exports={recordMinTextSize:function(i,o,s){if(s.uniformtext.mode){var x=getMinKey(i),_=s.uniformtext.minsize,F=o.scale*o.fontSize;o.hide=F<_,s[x]=s[x]||1/0,o.hide||(s[x]=Math.min(s[x],Math.max(F,_)))}},clearMinTextSize:function(i,o){o[getMinKey(i)]=void 0},resizeText:function(i,o,s){var F=i._fullLayout,N=F["_"+s+"Text_minsize"];if(N){var j,G="hide"===F.uniformtext.mode;switch(s){case"funnelarea":case"pie":case"sunburst":j="g.slice";break;case"treemap":case"icicle":j="g.slice, g.pathbar";break;default:j="g.points > g.point"}o.selectAll(j).each(function(i){var o=i.transform;if(o){o.scale=G&&o.hide?0:N/o.fontSize;var s=x.select(this).select("text");_.setTransormAndDisplay(s,o)}})}}}},55023:function(i,o,s){"use strict";var x=s(5386).fF,_=s(1426).extendFlat,F=s(81245),N=s(1486);i.exports={r:F.r,theta:F.theta,r0:F.r0,dr:F.dr,theta0:F.theta0,dtheta:F.dtheta,thetaunit:F.thetaunit,base:_({},N.base,{}),offset:_({},N.offset,{}),width:_({},N.width,{}),text:_({},N.text,{}),hovertext:_({},N.hovertext,{}),marker:N.marker,hoverinfo:F.hoverinfo,hovertemplate:x(),selected:N.selected,unselected:N.unselected}},74692:function(i,o,s){"use strict";var x=s(52075).hasColorscale,_=s(78803),F=s(75341),N=s(11661).setGroupPositions,j=s(66279),G=s(73972).traceIs,Z=s(71828).extendFlat;i.exports={calc:function(i,o){for(var s=i._fullLayout,N=o.subplot,G=s[N].radialaxis,Z=s[N].angularaxis,X=G.makeCalcdata(o,"r"),J=Z.makeCalcdata(o,"theta"),$=o._length,ee=Array($),et=0;et<$;et++)ee[et]={p:J[et],s:X[et]};function d2c(i){var s=o[i];void 0!==s&&(o["_"+i]=Array.isArray(s)?Z.makeCalcdata(o,i):Z.d2c(s,o.thetaunit))}return"linear"===Z.type&&(d2c("width"),d2c("offset")),x(o,"marker")&&_(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),x(o,"marker.line")&&_(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),F(ee,o),j(ee,o),ee},crossTraceCalc:function(i,o,s){for(var x=i.calcdata,_=[],F=0;F<x.length;F++){var j=x[F],X=j[0].trace;!0===X.visible&&G(X,"bar")&&X.subplot===s&&_.push(j)}var J=Z({},o.radialaxis,{_id:"x"});N(i,o.angularaxis,J,_,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}}},6135:function(i,o,s){"use strict";var x=s(71828),_=s(22184).handleRThetaDefaults,F=s(98340),N=s(55023);i.exports=function(i,o,s,j){function coerce(s,_){return x.coerce(i,o,N,s,_)}if(!_(i,o,j,coerce)){o.visible=!1;return}coerce("thetaunit"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),F(i,o,coerce,s,j),x.coerceSelectionMarkerOpacity(o,coerce)}},27379:function(i,o,s){"use strict";var x=s(30211),_=s(71828),F=s(95423).getTraceColor,N=_.fillText,j=s(59150).makeHoverPointText,G=s(10869).isPtInsidePolygon;i.exports=function(i,o,s){var Z=i.cd,X=Z[0].trace,J=i.subplot,$=J.radialAxis,ee=J.angularAxis,et=J.vangles,er=et?G:_.isPtInsideSector,en=i.maxHoverDistance,ei=ee._period||2*Math.PI,eo=Math.abs($.g2p(Math.sqrt(o*o+s*s))),es=Math.atan2(s,o);if($.range[0]>$.range[1]&&(es+=Math.PI),x.getClosest(Z,function(i){return er(eo,es,[i.rp0,i.rp1],[i.thetag0,i.thetag1],et)?en+Math.min(1,Math.abs(i.thetag1-i.thetag0)/ei)-1+(i.rp1-eo)/(i.rp1-i.rp0)-1:1/0},i),!1!==i.index){var el=Z[i.index];i.x0=i.x1=el.ct[0],i.y0=i.y1=el.ct[1];var ec=_.extendFlat({},el,{r:el.s,theta:el.p});return N(el,X,i),j(ec,X,J,i),i.hovertemplate=X.hovertemplate,i.color=F(X,el),i.xLabelVal=i.yLabelVal=void 0,el.s<0&&(i.idealAlign="left"),[i]}}},23381:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"barpolar",basePlotModule:s(23580),categories:["polar","bar","showLegend"],attributes:s(55023),layoutAttributes:s(40151),supplyDefaults:s(6135),supplyLayoutDefaults:s(19860),calc:s(74692).calc,crossTraceCalc:s(74692).crossTraceCalc,plot:s(60173),colorbar:s(4898),formatLabels:s(98608),style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,hoverPoints:s(27379),selectPoints:s(81974),meta:{}}},40151:function(i){"use strict";i.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(i,o,s){"use strict";var x=s(71828),_=s(40151);i.exports=function(i,o,s){var F,N={};function coerce(s,N){return x.coerce(i[F]||{},o[F],_,s,N)}for(var j=0;j<s.length;j++){var G=s[j];"barpolar"!==G.type||!0!==G.visible||N[F=G.subplot]||(coerce("barmode"),coerce("bargap"),N[F]=1)}}},60173:function(i,o,s){"use strict";var x=s(39898),_=s(92770),F=s(71828),N=s(91424),j=s(10869);i.exports=function(i,o,s){var G,Z,X=i._context.staticPlot,J=o.xaxis,$=o.yaxis,ee=o.radialAxis,et=o.angularAxis,er=(G=o.cxx,Z=o.cyy,o.vangles?function(i,s,x,_){F.angleDelta(x,_)>0?(N=x,X=_):(N=_,X=x);var N,X,J=j.findEnclosingVertexAngles(N,o.vangles)[0],$=j.findEnclosingVertexAngles(X,o.vangles)[1],ee=[J,(N+X)/2,$];return j.pathPolygonAnnulus(i,s,N,X,ee,G,Z)}:function(i,o,s,x){return F.pathAnnulus(i,o,s,x,G,Z)}),en=o.layers.frontplot.select("g.barlayer");F.makeTraceGroups(en,s,"trace bars").each(function(){var s=x.select(this),j=F.ensureSingle(s,"g","points").selectAll("g.point").data(F.identity);j.enter().append("g").style("vector-effect",X?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),j.exit().remove(),j.each(function(i){var o,s=x.select(this),N=i.rp0=ee.c2p(i.s0),j=i.rp1=ee.c2p(i.s1),G=i.thetag0=et.c2g(i.p0),Z=i.thetag1=et.c2g(i.p1);if(_(N)&&_(j)&&_(G)&&_(Z)&&N!==j&&G!==Z){var X=ee.c2g(i.s1),en=(G+Z)/2;i.ct=[J.c2p(X*Math.cos(en)),$.c2p(X*Math.sin(en))],o=er(N,j,G,Z)}else o="M0,0Z";F.ensureSingle(s,"path").attr("d",o)}),N.setClipUrl(s,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,i)})}},53522:function(i,o,s){"use strict";var x=s(82196),_=s(1486),F=s(22399),N=s(12663).axisHoverFormat,j=s(5386).fF,G=s(1426).extendFlat,Z=x.marker,X=Z.line;i.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:N("x"),yhoverformat:N("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:G({},Z.symbol,{arrayOk:!1,editType:"plot"}),opacity:G({},Z.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:G({},Z.angle,{arrayOk:!1,editType:"calc"}),size:G({},Z.size,{arrayOk:!1,editType:"calc"}),color:G({},Z.color,{arrayOk:!1,editType:"style"}),line:{color:G({},X.color,{arrayOk:!1,dflt:F.defaultLine,editType:"style"}),width:G({},X.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:x.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:{marker:x.selected.marker,editType:"style"},unselected:{marker:x.unselected.marker,editType:"style"},text:G({},x.text,{}),hovertext:G({},x.hovertext,{}),hovertemplate:j({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(i,o,s){"use strict";var x=s(92770),_=s(89298),F=s(42973),N=s(71828),j=s(50606).BADNUM,G=N._;i.exports=function(i,o){var s=i._fullLayout,Z=_.getFromId(i,o.xaxis||"x"),X=_.getFromId(i,o.yaxis||"y"),J=[],$="violin"===o.type?"_numViolins":"_numBoxes";"h"===o.orientation?(ed=Z,ep="x",eg=X,em="y",ey=!!o.yperiodalignment):(ed=X,ep="y",eg=Z,em="x",ey=!!o.xperiodalignment);var ee=function(i,o,s,_){var j,G=o in i,Z=o+"0" in i,X="d"+o in i;if(G||Z&&X){var J=s.makeCalcdata(i,o);return[F(i,s,o,J).vals,J]}j=Z?i[o+"0"]:"name"in i&&("category"===s.type||x(i.name)&&-1!==["linear","log"].indexOf(s.type)||N.isDateTime(i.name)&&"date"===s.type)?i.name:_;for(var $="multicategory"===s.type?s.r2c_just_indices(j):s.d2c(j,0,i[o+"calendar"]),ee=i._length,et=Array(ee),er=0;er<ee;er++)et[er]=$;return[et]}(o,em,eg,s[$]),et=ee[0],er=ee[1],en=N.distinctVals(et,eg),ei=en.vals,eo=en.minDiff/2,es="all"===(o.boxpoints||o.points)?N.identity:function(i){return i.v<ev.lf||i.v>ev.uf};if(o._hasPreCompStats){var el=o[ep],d2c=function(i){return ed.d2c((o[i]||[])[ef])},ec=1/0,eu=-1/0;for(ef=0;ef<o._length;ef++){var ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS=et[ef];if(x(eS)){if((ev={}).pos=ev[em]=eS,ey&&er&&(ev.orig_p=er[ef]),ev.q1=d2c("q1"),ev.med=d2c("median"),ev.q3=d2c("q3"),ex=[],el&&N.isArrayOrTypedArray(el[ef]))for(eh=0;eh<el[ef].length;eh++)(ek=ed.d2c(el[ef][eh]))!==j&&(arraysToCalcdata(eT={v:ek,i:[ef,eh]},o,[ef,eh]),ex.push(eT));if(ev.pts=ex.sort(sortByVal),ew=(e_=ev[ep]=ex.map(extractVal)).length,ev.med!==j&&ev.q1!==j&&ev.q3!==j&&ev.med>=ev.q1&&ev.q3>=ev.med){var eM=d2c("lowerfence");ev.lf=eM!==j&&eM<=ev.q1?eM:computeLowerFence(ev,e_,ew);var eC=d2c("upperfence");ev.uf=eC!==j&&eC>=ev.q3?eC:computeUpperFence(ev,e_,ew);var eE=d2c("mean");ev.mean=eE!==j?eE:ew?N.mean(e_,ew):(ev.q1+ev.q3)/2;var eL=d2c("sd");ev.sd=eE!==j&&eL>=0?eL:ew?N.stdev(e_,ew,ev.mean):ev.q3-ev.q1,ev.lo=computeLowerOutlierBound(ev),ev.uo=computeUpperOutlierBound(ev);var eP=d2c("notchspan");eP=eP!==j&&eP>0?eP:computeNotchSpan(ev,ew),ev.ln=ev.med-eP,ev.un=ev.med+eP;var eI=ev.lf,eO=ev.uf;o.boxpoints&&e_.length&&(eI=Math.min(eI,e_[0]),eO=Math.max(eO,e_[ew-1])),o.notched&&(eI=Math.min(eI,ev.ln),eO=Math.max(eO,ev.un)),ev.min=eI,ev.max=eO}else N.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ev.q1,"median = "+ev.med,"q3 = "+ev.q3].join("\n")),eA=ev.med!==j?ev.med:ev.q1!==j?ev.q3!==j?(ev.q1+ev.q3)/2:ev.q1:ev.q3!==j?ev.q3:0,ev.med=eA,ev.q1=ev.q3=eA,ev.lf=ev.uf=eA,ev.mean=ev.sd=eA,ev.ln=ev.un=eA,ev.min=ev.max=eA;ec=Math.min(ec,ev.min),eu=Math.max(eu,ev.max),ev.pts2=ex.filter(es),J.push(ev)}}o._extremes[ed._id]=_.findExtremes(ed,[ec,eu],{padded:!0})}else{var eD,eR,eB=ed.makeCalcdata(o,ep),ez=function(i,o){for(var s=i.length,x=Array(s+1),_=0;_<s;_++)x[_]=i[_]-o;return x[s]=i[s-1]+o,x}(ei,eo),eF=ei.length,eN=function(i){for(var o=Array(i),s=0;s<i;s++)o[s]=[];return o}(eF);for(ef=0;ef<o._length;ef++)if(x(ek=eB[ef])){var ej=N.findBin(et[ef],ez);ej>=0&&ej<eF&&(arraysToCalcdata(eT={v:ek,i:ef},o,ef),eN[ej].push(eT))}var eU=1/0,eV=-1/0,eH=o.quartilemethod,eG="exclusive"===eH,eW="inclusive"===eH;for(ef=0;ef<eF;ef++)if(eN[ef].length>0){(ev={}).pos=ev[em]=ei[ef],ex=ev.pts=eN[ef].sort(sortByVal),ew=(e_=ev[ep]=ex.map(extractVal)).length,ev.min=e_[0],ev.max=e_[ew-1],ev.mean=N.mean(e_,ew),ev.sd=N.stdev(e_,ew,ev.mean)*o.sdmultiple,ev.med=N.interp(e_,.5),ew%2&&(eG||eW)?(eG?(eD=e_.slice(0,ew/2),eR=e_.slice(ew/2+1)):eW&&(eD=e_.slice(0,ew/2+1),eR=e_.slice(ew/2)),ev.q1=N.interp(eD,.5),ev.q3=N.interp(eR,.5)):(ev.q1=N.interp(e_,.25),ev.q3=N.interp(e_,.75)),ev.lf=computeLowerFence(ev,e_,ew),ev.uf=computeUpperFence(ev,e_,ew),ev.lo=computeLowerOutlierBound(ev),ev.uo=computeUpperOutlierBound(ev);var eZ=computeNotchSpan(ev,ew);ev.ln=ev.med-eZ,ev.un=ev.med+eZ,eU=Math.min(eU,ev.ln),eV=Math.max(eV,ev.un),ev.pts2=ex.filter(es),J.push(ev)}o._extremes[ed._id]=_.findExtremes(ed,o.notched?eB.concat([eU,eV]):eB,{padded:!0})}return(function(i,o){if(N.isArrayOrTypedArray(o.selectedpoints))for(var s=0;s<i.length;s++){for(var x=i[s].pts||[],_={},F=0;F<x.length;F++)_[x[F].i]=F;N.tagSelected(x,o,_)}}(J,o),J.length>0)?(J[0].t={num:s[$],dPos:eo,posLetter:em,valLetter:ep,labels:{med:G(i,"median:"),min:G(i,"min:"),q1:G(i,"q1:"),q3:G(i,"q3:"),max:G(i,"max:"),mean:"sd"===o.boxmean||"sd"===o.sizemode?G(i,"mean \xb1 :").replace("",1===o.sdmultiple?"":o.sdmultiple+""):G(i,"mean:"),lf:G(i,"lower fence:"),uf:G(i,"upper fence:")}},s[$]++,J):[{t:{empty:!0}}]};var Z={text:"tx",hovertext:"htx"};function arraysToCalcdata(i,o,s){for(var x in Z)N.isArrayOrTypedArray(o[x])&&(Array.isArray(s)?N.isArrayOrTypedArray(o[x][s[0]])&&(i[Z[x]]=o[x][s[0]][s[1]]):i[Z[x]]=o[x][s])}function sortByVal(i,o){return i.v-o.v}function extractVal(i){return i.v}function computeLowerFence(i,o,s){return 0===s?i.q1:Math.min(i.q1,o[Math.min(N.findBin(2.5*i.q1-1.5*i.q3,o,!0)+1,s-1)])}function computeUpperFence(i,o,s){return 0===s?i.q3:Math.max(i.q3,o[Math.max(N.findBin(2.5*i.q3-1.5*i.q1,o),0)])}function computeLowerOutlierBound(i){return 4*i.q1-3*i.q3}function computeUpperOutlierBound(i){return 4*i.q3-3*i.q1}function computeNotchSpan(i,o){return 0===o?0:1.57*(i.q3-i.q1)/Math.sqrt(o)}},37188:function(i,o,s){"use strict";var x=s(89298),_=s(71828),F=s(99082).getAxisGroup,N=["v","h"];function setPositionOffset(i,o,s,N){var j=o.calcdata,G=o._fullLayout,Z=N._id,X=Z.charAt(0),J=[],$=0;for(es=0;es<s.length;es++)for(el=0,ec=j[s[es]];el<ec.length;el++)J.push(N.c2l(ec[el].pos,!0)),$+=(ec[el].pts2||[]).length;if(J.length){var ee=_.distinctVals(J);("category"===N.type||"multicategory"===N.type)&&(ee.minDiff=1);var et=ee.minDiff/2;x.minDtick(N,ee.minDiff,ee.vals[0],!0);var er=G["violin"===i?"_numViolins":"_numBoxes"],en="group"===G[i+"mode"]&&er>1,ei=1-G[i+"gap"],eo=1-G[i+"groupgap"];for(es=0;es<s.length;es++){var es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT=(ec=j[s[es]])[0].trace,ek=ec[0].t,eA=eT.width,eS=eT.side;if(eA)eu=ef=ed=eA/2,eh=0;else if(eu=et,en){var eM=F(G,N._id)+eT.orientation,eC=Object.keys(((G._alignmentOpts[eM]||{})[eT.alignmentgroup]||{}).offsetGroups||{}).length,eE=eC||er,eL=eC?eT._offsetIndex:ek.num;ef=eu*ei*eo/eE,eh=2*eu*(-.5+(eL+.5)/eE)*ei,ed=eu*ei/eE}else ef=eu*ei*eo,eh=0,ed=eu;ek.dPos=eu,ek.bPos=eh,ek.bdPos=ef,ek.wHover=ed;var eP=eh+ef,eI=!!eA,eO=(eT.boxpoints||eT.points)&&$>0;if("positive"===eS?(ep=eu*(eA?1:.5),em=eP,eg=em=eh):"negative"===eS?(ep=em=eh,eg=eu*(eA?1:.5),ey=eP):(ep=eg=eu,em=ey=eP),eO){var eD=eT.pointpos,eR=eT.jitter,eB=eT.marker.size/2,ez=0;eD+eR>=0&&((ez=eP*(eD+eR))>ep?(eI=!0,e_=eB,ev=ez):ez>em&&(e_=eB,ev=ep)),ez<=ep&&(ev=ep);var eF=0;eD-eR<=0&&((eF=-eP*(eD-eR))>eg?(eI=!0,ew=eB,ex=eF):eF>ey&&(ew=eB,ex=eg)),eF<=eg&&(ex=eg)}else ev=ep,ex=eg;var eN=Array(ec.length);for(el=0;el<ec.length;el++)eN[el]=ec[el].pos;eT._extremes[Z]=x.findExtremes(N,eN,{padded:eI,vpadminus:ex,vpadplus:ev,vpadLinearized:!0,ppadminus:{x:ew,y:e_}[X],ppadplus:{x:e_,y:ew}[X]})}}}i.exports={crossTraceCalc:function(i,o){for(var s=i.calcdata,x=o.xaxis,_=o.yaxis,F=0;F<N.length;F++){for(var j=N[F],G="h"===j?_:x,Z=[],X=0;X<s.length;X++){var J=s[X],$=J[0].t,ee=J[0].trace;!0!==ee.visible||"box"!==ee.type&&"candlestick"!==ee.type||$.empty||(ee.orientation||"v")!==j||ee.xaxis!==x._id||ee.yaxis!==_._id||Z.push(X)}setPositionOffset("box",i,Z,G)}},setPositionOffset:setPositionOffset}},36411:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(7901),N=s(73927),j=s(26125),G=s(4322),Z=s(53522);function handleSampleDefaults(i,o,s,F){function getDims(i){var o=0;return i&&i.length&&(o+=1,x.isArrayOrTypedArray(i[0])&&i[0].length&&(o+=1)),o}function valid(o){return x.validate(i[o],Z[o])}var N=s("y"),j=s("x");if("box"===o.type){var X=s("q1"),J=s("median"),$=s("q3");o._hasPreCompStats=X&&X.length&&J&&J.length&&$&&$.length,el=Math.min(x.minRowLength(X),x.minRowLength(J),x.minRowLength($))}var ee=getDims(N),et=getDims(j),er=ee&&x.minRowLength(N),en=et&&x.minRowLength(j),ei=F.calendar,eo={autotypenumbers:F.autotypenumbers};if(o._hasPreCompStats)switch(String(et)+String(ee)){case"00":var es=valid("x0")||valid("dx");ec=(valid("y0")||valid("dy"))&&!es?"h":"v",eu=el;break;case"10":ec="v",eu=Math.min(el,en);break;case"20":ec="h",eu=Math.min(el,j.length);break;case"01":ec="h",eu=Math.min(el,er);break;case"02":ec="v",eu=Math.min(el,N.length);break;case"12":ec="v",eu=Math.min(el,en,N.length);break;case"21":ec="h",eu=Math.min(el,j.length,er);break;case"11":eu=0;break;case"22":var el,ec,eu,ef,eh=!1;for(ef=0;ef<j.length;ef++)if("category"===G(j[ef],ei,eo)){eh=!0;break}if(eh)ec="v",eu=Math.min(el,en,N.length);else{for(ef=0;ef<N.length;ef++)if("category"===G(N[ef],ei,eo)){eh=!0;break}eh?(ec="h",eu=Math.min(el,j.length,er)):(ec="v",eu=Math.min(el,en,N.length))}}else ee>0?(ec="v",eu=et>0?Math.min(en,er):Math.min(er)):et>0?(ec="h",eu=Math.min(en)):eu=0;if(!eu){o.visible=!1;return}o._length=eu;var ed=s("orientation",ec);o._hasPreCompStats?"v"===ed&&0===et?(s("x0",0),s("dx",1)):"h"===ed&&0===ee&&(s("y0",0),s("dy",1)):"v"===ed&&0===et?s("x0"):"h"===ed&&0===ee&&s("y0"),_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],F)}function handlePointsDefaults(i,o,s,_){var F=_.prefix,N=x.coerce2(i,o,Z,"marker.outliercolor"),j=s("marker.line.outliercolor"),G="outliers";o._hasPreCompStats?G="all":(N||j)&&(G="suspectedoutliers");var X=s(F+"points",G);X?(s("jitter","all"===X?.3:0),s("pointpos","all"===X?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.angle"),s("marker.color",o.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===X&&(s("marker.line.outliercolor",o.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete o.marker;var J=s("hoveron");("all"===J||-1!==J.indexOf("points"))&&s("hovertemplate"),x.coerceSelectionMarkerOpacity(o,s)}i.exports={supplyDefaults:function(i,o,s,_){function coerce(s,_){return x.coerce(i,o,Z,s,_)}if(handleSampleDefaults(i,o,coerce,_),!1!==o.visible){N(i,o,_,coerce),coerce("xhoverformat"),coerce("yhoverformat");var j,G=o._hasPreCompStats;G&&(coerce("lowerfence"),coerce("upperfence")),coerce("line.color",(i.marker||{}).color||s),coerce("line.width"),coerce("fillcolor",F.addOpacity(o.line.color,.5));var X=!1;if(G){var J=coerce("mean"),$=coerce("sd");J&&J.length&&(X=!0,$&&$.length&&(X="sd"))}coerce("whiskerwidth");var ee=coerce("sizemode");"quartiles"===ee&&(j=coerce("boxmean",X)),coerce("showwhiskers","quartiles"===ee),("sd"===ee||"sd"===j)&&coerce("sdmultiple"),coerce("width"),coerce("quartilemethod");var et=!1;if(G){var er=coerce("notchspan");er&&er.length&&(et=!0)}else x.validate(i.notchwidth,Z.notchwidth)&&(et=!0);coerce("notched",et)&&coerce("notchwidth"),handlePointsDefaults(i,o,coerce,{prefix:"box"})}},crossTraceDefaults:function(i,o){var s,_;function coerce(i){return x.coerce(_._input,_,Z,i)}for(var F=0;F<i.length;F++){var N=(_=i[F]).type;("box"===N||"violin"===N)&&(s=_._input,"group"===o[N+"mode"]&&j(s,_,o,coerce))}},handleSampleDefaults:handleSampleDefaults,handlePointsDefaults:handlePointsDefaults}},74907:function(i){"use strict";i.exports=function(i,o){return o.hoverOnBox&&(i.hoverOnBox=o.hoverOnBox),"xVal"in o&&(i.x=o.xVal),"yVal"in o&&(i.y=o.yVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},41868:function(i,o,s){"use strict";var x=s(89298),_=s(71828),F=s(30211),N=s(7901),j=_.fillText;function hoverOnBoxes(i,o,s,j){var G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu=i.cd,ef=i.xa,eh=i.ya,ed=eu[0].trace,ep=eu[0].t,eg="violin"===ed.type,em=ep.bdPos,ey=ep.wHover,shiftPos=function(i){return X.c2l(i.pos)+ep.bPos-X.c2l(ee)};eg&&"both"!==ed.side?("positive"===ed.side&&(en=function(i){var o=shiftPos(i);return F.inbox(o,o+ey,ei)},es=em,el=0),"negative"===ed.side&&(en=function(i){var o=shiftPos(i);return F.inbox(o-ey,o,ei)},es=0,el=em)):(en=function(i){var o=shiftPos(i);return F.inbox(o-ey,o+ey,ei)},es=el=em),ec=eg?function(i){return F.inbox(i.span[0]-$,i.span[1]-$,ei)}:function(i){return F.inbox(i.min-$,i.max-$,ei)},"h"===ed.orientation?($=o,ee=s,et=ec,er=en,G="y",X=eh,Z="x",J=ef):($=s,ee=o,et=en,er=ec,G="x",X=ef,Z="y",J=eh);var ev=Math.min(1,em/Math.abs(X.r2c(X.range[1])-X.r2c(X.range[0])));function dxy(i){return(et(i)+er(i))/2}ei=i.maxHoverDistance-ev,eo=i.maxSpikeDistance-ev;var ex=F.getDistanceFunction(j,et,er,dxy);if(F.getClosest(eu,ex,i),!1===i.index)return[];var e_=eu[i.index],ew=ed.line.color,eT=(ed.marker||{}).color;N.opacity(ew)&&ed.line.width?i.color=ew:N.opacity(eT)&&ed.boxpoints?i.color=eT:i.color=ed.fillcolor,i[G+"0"]=X.c2p(e_.pos+ep.bPos-el,!0),i[G+"1"]=X.c2p(e_.pos+ep.bPos+es,!0),i[G+"LabelVal"]=void 0!==e_.orig_p?e_.orig_p:e_.pos;var ek=G+"Spike";i.spikeDistance=dxy(e_)*eo/ei,i[ek]=X.c2p(e_.pos,!0);var eA=ed.boxmean||"sd"===ed.sizemode||(ed.meanline||{}).visible,eS=ed.boxpoints||ed.points,eM=eS&&eA?["max","uf","q3","med","mean","q1","lf","min"]:eS&&!eA?["max","uf","q3","med","q1","lf","min"]:!eS&&eA?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],eC=J.range[1]<J.range[0];ed.orientation===(eC?"v":"h")&&eM.reverse();for(var eE=i.spikeDistance,eL=i[ek],eP=[],eI=0;eI<eM.length;eI++){var eO=eM[eI];if(eO in e_){var eD=e_[eO],eR=J.c2p(eD,!0),eB=_.extendFlat({},i);eB.attr=eO,eB[Z+"0"]=eB[Z+"1"]=eR,eB[Z+"LabelVal"]=eD,eB[Z+"Label"]=(ep.labels?ep.labels[eO]+" ":"")+x.hoverLabelText(J,eD,ed[Z+"hoverformat"]),eB.hoverOnBox=!0,"mean"===eO&&"sd"in e_&&("sd"===ed.boxmean||"sd"===ed.sizemode)&&(eB[Z+"err"]=e_.sd),eB.hovertemplate=!1,eP.push(eB)}}i.name="",i.spikeDistance=void 0,i[ek]=void 0;for(var ez=0;ez<eP.length;ez++)"med"!==eP[ez].attr?(eP[ez].name="",eP[ez].spikeDistance=void 0,eP[ez][ek]=void 0):(eP[ez].spikeDistance=eE,eP[ez][ek]=eL);return eP}function hoverOnPoints(i,o,s){for(var x,N,G,Z,X=i.cd,J=i.xa,$=i.ya,ee=X[0].trace,et=J.c2p(o),er=$.c2p(s),en=F.quadrature(function(i){var o=Math.max(3,i.mrc||0);return Math.max(Math.abs(J.c2p(i.x)-et)-o,1-3/o)},function(i){var o=Math.max(3,i.mrc||0);return Math.max(Math.abs($.c2p(i.y)-er)-o,1-3/o)}),ei=!1,eo=0;eo<X.length;eo++){N=X[eo];for(var es=0;es<(N.pts||[]).length;es++){var el=en(G=N.pts[es]);el<=i.distance&&(i.distance=el,ei=[eo,es])}}if(!ei)return!1;G=(N=X[ei[0]]).pts[ei[1]];var ec=J.c2p(G.x,!0),eu=$.c2p(G.y,!0),ef=G.mrc||1;x=_.extendFlat({},i,{index:G.i,color:(ee.marker||{}).color,name:ee.name,x0:ec-ef,x1:ec+ef,y0:eu-ef,y1:eu+ef,spikeDistance:i.distance,hovertemplate:ee.hovertemplate});var eh=N.orig_p,ed=void 0!==eh?eh:N.pos;return"h"===ee.orientation?(Z=$,x.xLabelVal=G.x,x.yLabelVal=ed):(Z=J,x.xLabelVal=ed,x.yLabelVal=G.y),x[Z._id.charAt(0)+"Spike"]=Z.c2p(N.pos,!0),j(G,ee,x),x}i.exports={hoverPoints:function(i,o,s,x){var _,F=i.cd[0].trace.hoveron,N=[];return(-1!==F.indexOf("boxes")&&(N=N.concat(hoverOnBoxes(i,o,s,x))),-1!==F.indexOf("points")&&(_=hoverOnPoints(i,o,s)),"closest"===x)?_?[_]:N:(_&&N.push(_),N)},hoverOnBoxes:hoverOnBoxes,hoverOnPoints:hoverOnPoints}},83832:function(i,o,s){"use strict";i.exports={attributes:s(53522),layoutAttributes:s(40094),supplyDefaults:s(36411).supplyDefaults,crossTraceDefaults:s(36411).crossTraceDefaults,supplyLayoutDefaults:s(4199).supplyLayoutDefaults,calc:s(48518),crossTraceCalc:s(37188).crossTraceCalc,plot:s(86047).plot,style:s(58063).style,styleOnSelect:s(58063).styleOnSelect,hoverPoints:s(41868).hoverPoints,eventData:s(74907),selectPoints:s(24626),moduleType:"trace",name:"box",basePlotModule:s(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(i){"use strict";i.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(40094);function _supply(i,o,s,_,F){for(var N=F+"Layout",j=!1,G=0;G<s.length;G++){var Z=s[G];if(x.traceIs(Z,N)){j=!0;break}}j&&(_(F+"mode"),_(F+"gap"),_(F+"groupgap"))}i.exports={supplyLayoutDefaults:function(i,o,s){_supply(i,o,s,function(s,x){return _.coerce(i,o,F,s,x)},"box")},_supply:_supply}},86047:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424);function plotBoxAndWhiskers(i,o,s,F,N){var j,G,Z="h"===s.orientation,X=o.val,J=o.pos,$=!!J.rangebreaks,ee=F.bPos,et=F.wdPos||0,er=F.bPosPxOffset||0,en=s.whiskerwidth||0,ei=!1!==s.showwhiskers,eo=s.notched||!1,es=eo?1-2*s.notchwidth:1;Array.isArray(F.bdPos)?(j=F.bdPos[0],G=F.bdPos[1]):(j=F.bdPos,G=F.bdPos);var el=i.selectAll("path.box").data("violin"!==s.type||s.box.visible?_.identity:[]);el.enter().append("path").style("vector-effect",N?"none":"non-scaling-stroke").attr("class","box"),el.exit().remove(),el.each(function(i){if(i.empty)return"M0,0Z";var o=J.c2l(i.pos+ee,!0),F=J.l2p(o-j)+er,N=J.l2p(o+G)+er,el=$?(F+N)/2:J.l2p(o)+er,ec=s.whiskerwidth,eu=$?F*ec+(1-ec)*el:J.l2p(o-et)+er,ef=$?N*ec+(1-ec)*el:J.l2p(o+et)+er,eh=J.l2p(o-j*es)+er,ed=J.l2p(o+G*es)+er,ep="sd"===s.sizemode,eg=X.c2p(ep?i.mean-i.sd:i.q1,!0),em=ep?X.c2p(i.mean+i.sd,!0):X.c2p(i.q3,!0),ey=_.constrain(ep?X.c2p(i.mean,!0):X.c2p(i.med,!0),Math.min(eg,em)+1,Math.max(eg,em)-1),ev=void 0===i.lf||!1===s.boxpoints||ep,ex=X.c2p(ev?i.min:i.lf,!0),e_=X.c2p(ev?i.max:i.uf,!0),ew=X.c2p(i.ln,!0),eT=X.c2p(i.un,!0);Z?x.select(this).attr("d","M"+ey+","+eh+"V"+ed+"M"+eg+","+F+"V"+N+(eo?"H"+ew+"L"+ey+","+ed+"L"+eT+","+N:"")+"H"+em+"V"+F+(eo?"H"+eT+"L"+ey+","+eh+"L"+ew+","+F:"")+"Z"+(ei?"M"+eg+","+el+"H"+ex+"M"+em+","+el+"H"+e_+(0===en?"":"M"+ex+","+eu+"V"+ef+"M"+e_+","+eu+"V"+ef):"")):x.select(this).attr("d","M"+eh+","+ey+"H"+ed+"M"+F+","+eg+"H"+N+(eo?"V"+ew+"L"+ed+","+ey+"L"+N+","+eT:"")+"V"+em+"H"+F+(eo?"V"+eT+"L"+eh+","+ey+"L"+F+","+ew:"")+"Z"+(ei?"M"+el+","+eg+"V"+ex+"M"+el+","+em+"V"+e_+(0===en?"":"M"+eu+","+ex+"H"+ef+"M"+eu+","+e_+"H"+ef):""))})}function plotPoints(i,o,s,x){var N=o.x,j=o.y,G=x.bdPos,Z=x.bPos,X=s.boxpoints||s.points;_.seedPseudoRandom();var J=i.selectAll("g.points").data(X?function(i){return i.forEach(function(i){i.t=x,i.trace=s}),i}:[]);J.enter().append("g").attr("class","points"),J.exit().remove();var $=J.selectAll("path").data(function(i){var o,x,F=i.pts2,N=Math.max((i.max-i.min)/10,i.q3-i.q1),j=1e-9*N,J=.01*N,$=[],ee=0;if(s.jitter){if(0===N)for(o=0,ee=1,$=Array(F.length);o<F.length;o++)$[o]=1;else for(o=0;o<F.length;o++){var et=Math.max(0,o-5),er=F[et].v,en=Math.min(F.length-1,o+5),ei=F[en].v;"all"!==X&&(F[o].v<i.lf?ei=Math.min(ei,i.lf):er=Math.max(er,i.uf));var eo=Math.sqrt(J*(en-et)/(ei-er+j))||0;eo=_.constrain(Math.abs(eo),0,1),$.push(eo),ee=Math.max(eo,ee)}x=2*s.jitter/(ee||1)}for(o=0;o<F.length;o++){var es=F[o],el=es.v,ec=s.jitter?x*$[o]*(_.pseudoRandom()-.5):0,eu=i.pos+Z+G*(s.pointpos+ec);"h"===s.orientation?(es.y=eu,es.x=el):(es.x=eu,es.y=el),"suspectedoutliers"===X&&el<i.uo&&el>i.lo&&(es.so=!0)}return F});$.enter().append("path").classed("point",!0),$.exit().remove(),$.call(F.translatePoints,N,j)}function plotBoxMean(i,o,s,F){var N,j,G=o.val,Z=o.pos,X=!!Z.rangebreaks,J=F.bPos,$=F.bPosPxOffset||0,ee=s.boxmean||(s.meanline||{}).visible;Array.isArray(F.bdPos)?(N=F.bdPos[0],j=F.bdPos[1]):(N=F.bdPos,j=F.bdPos);var et=i.selectAll("path.mean").data("box"===s.type&&s.boxmean||"violin"===s.type&&s.box.visible&&s.meanline.visible?_.identity:[]);et.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),et.exit().remove(),et.each(function(i){var o=Z.c2l(i.pos+J,!0),_=Z.l2p(o-N)+$,F=Z.l2p(o+j)+$,et=X?(_+F)/2:Z.l2p(o)+$,er=G.c2p(i.mean,!0),en=G.c2p(i.mean-i.sd,!0),ei=G.c2p(i.mean+i.sd,!0);"h"===s.orientation?x.select(this).attr("d","M"+er+","+_+"V"+F+("sd"===ee?"m0,0L"+en+","+et+"L"+er+","+_+"L"+ei+","+et+"Z":"")):x.select(this).attr("d","M"+_+","+er+"H"+F+("sd"===ee?"m0,0L"+et+","+en+"L"+_+","+er+"L"+et+","+ei+"Z":""))})}i.exports={plot:function(i,o,s,F){var N=i._context.staticPlot,j=o.xaxis,G=o.yaxis;_.makeTraceGroups(F,s,"trace boxes").each(function(i){var o,s,_=x.select(this),F=i[0],Z=F.t,X=F.trace;if(Z.wdPos=Z.bdPos*X.whiskerwidth,!0!==X.visible||Z.empty){_.remove();return}"h"===X.orientation?(o=G,s=j):(o=j,s=G),plotBoxAndWhiskers(_,{pos:o,val:s},X,Z,N),plotPoints(_,{x:j,y:G},X,Z),plotBoxMean(_,{pos:o,val:s},X,Z)})},plotBoxAndWhiskers:plotBoxAndWhiskers,plotPoints:plotPoints,plotBoxMean:plotBoxMean}},24626:function(i){"use strict";i.exports=function(i,o){var s,x,_=i.cd,F=i.xaxis,N=i.yaxis,j=[];if(!1===o)for(s=0;s<_.length;s++)for(x=0;x<(_[s].pts||[]).length;x++)_[s].pts[x].selected=0;else for(s=0;s<_.length;s++)for(x=0;x<(_[s].pts||[]).length;x++){var G=_[s].pts[x],Z=F.c2p(G.x),X=N.c2p(G.y);o.contains([Z,X],null,G.i,i)?(j.push({pointNumber:G.i,x:F.c2d(G.x),y:N.c2d(G.y)}),G.selected=1):G.selected=0}return j}},58063:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(91424);i.exports={style:function(i,o,s){var N=s||x.select(i).selectAll("g.trace.boxes");N.style("opacity",function(i){return i[0].trace.opacity}),N.each(function(o){var s=x.select(this),N=o[0].trace,j=N.line.width;function styleBox(i,o,s,x){i.style("stroke-width",o+"px").call(_.stroke,s).call(_.fill,x)}var G=s.selectAll("path.box");if("candlestick"===N.type)G.each(function(i){if(!i.empty){var o=x.select(this),s=N[i.dir];styleBox(o,s.line.width,s.line.color,s.fillcolor),o.style("opacity",N.selectedpoints&&!i.selected?.3:1)}});else{styleBox(G,j,N.line.color,N.fillcolor),s.selectAll("path.mean").style({"stroke-width":j,"stroke-dasharray":2*j+"px,"+j+"px"}).call(_.stroke,N.line.color);var Z=s.selectAll("path.point");F.pointStyle(Z,N,i)}})},styleOnSelect:function(i,o,s){var x=o[0].trace,_=s.selectAll("path.point");x.selectedpoints?F.selectedPointStyle(_,x):F.pointStyle(_,x,i)}}},75343:function(i,o,s){"use strict";var x=s(71828).extendFlat,_=s(12663).axisHoverFormat,F=s(2522),N=s(53522);function directionAttrs(i){return{line:{color:x({},N.line.color,{dflt:i}),width:N.line.width,editType:"style"},fillcolor:N.fillcolor,editType:"style"}}i.exports={xperiod:F.xperiod,xperiod0:F.xperiod0,xperiodalignment:F.xperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),x:F.x,open:F.open,high:F.high,low:F.low,close:F.close,line:{width:x({},N.line.width,{}),editType:"style"},increasing:directionAttrs(F.increasing.line.color.dflt),decreasing:directionAttrs(F.decreasing.line.color.dflt),text:F.text,hovertext:F.hovertext,whiskerwidth:x({},N.whiskerwidth,{dflt:0}),hoverlabel:F.hoverlabel}},41197:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(42973),N=s(3485).calcCommon;function ptFunc(i,o,s,x){return{min:s,q1:Math.min(i,x),med:x,q3:Math.max(i,x),max:o}}i.exports=function(i,o){var s=i._fullLayout,j=_.getFromId(i,o.xaxis),G=_.getFromId(i,o.yaxis),Z=j.makeCalcdata(o,"x"),X=F(o,j,"x",Z).vals,J=N(i,o,Z,X,G,ptFunc);return J.length?(x.extendFlat(J[0].t,{num:s._numBoxes,dPos:x.distinctVals(X).minDiff/2,posLetter:"x",valLetter:"y"}),s._numBoxes++,J):[{t:{empty:!0}}]}},1026:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(14555),N=s(73927),j=s(75343);function handleDirection(i,o,s,x){var F=s(x+".line.color");s(x+".line.width",o.line.width),s(x+".fillcolor",_.addOpacity(F,.5))}i.exports=function(i,o,s,_){function coerce(s,_){return x.coerce(i,o,j,s,_)}if(!F(i,o,coerce,_)){o.visible=!1;return}N(i,o,_,coerce,{x:!0}),coerce("xhoverformat"),coerce("yhoverformat"),coerce("line.width"),handleDirection(i,o,coerce,"increasing"),handleDirection(i,o,coerce,"decreasing"),coerce("text"),coerce("hovertext"),coerce("whiskerwidth"),_._requestRangeslider[o.xaxis]=!0}},91815:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"candlestick",basePlotModule:s(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:s(75343),layoutAttributes:s(40094),supplyLayoutDefaults:s(4199).supplyLayoutDefaults,crossTraceCalc:s(37188).crossTraceCalc,supplyDefaults:s(1026),calc:s(41197),plot:s(86047).plot,layerName:"boxlayer",style:s(58063).style,hoverPoints:s(66449).hoverPoints,selectPoints:s(67324)}},13145:function(i,o,s){"use strict";var x=s(11500),_=s(44467);i.exports=function(i,o,s,F,N){F("a")||(F("da"),F("a0")),F("b")||(F("db"),F("b0")),["aaxis","baxis"].forEach(function(F){var j=F.charAt(0),G=i[F]||{},Z=_.newContainer(o,F);x(G,Z,{noTicklabelstep:!0,tickfont:"x",id:j+"axis",letter:j,font:o.font,name:F,data:i[j],calendar:o.calendar,dfltColor:N,bgColor:s.paper_bgcolor,autotypenumbersDflt:s.autotypenumbers,fullLayout:s}),Z._categories=Z._categories||[],i[F]||"-"===G.type||(i[F]={type:G.type})})}},402:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray;i.exports=function(i){return function minMax(i,o){if(!x(i)||o>=10)return null;for(var s=1/0,_=-1/0,F=i.length,N=0;N<F;N++){var j=i[N];if(x(j)){var G=minMax(j,o+1);G&&(s=Math.min(G[0],s),_=Math.max(G[1],_))}else s=Math.min(j,s),_=Math.max(j,_)}return[s,_]}(i,0)}},99798:function(i,o,s){"use strict";var x=s(41940),_=s(1928),F=s(22399),N=x({editType:"calc"});N.family.dflt='"Open Sans", verdana, arial, sans-serif',N.size.dflt=12,N.color.dflt=F.defaultLine,i.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:_,baxis:_,font:N,color:{valType:"color",dflt:F.defaultLine,editType:"plot"},transforms:void 0}},4536:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,_){var F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo=x(s)?"a":"b",es=("a"===eo?i.aaxis:i.baxis).smoothing,el="a"===eo?i.a2i:i.b2j,ec="a"===eo?s:_,eu="a"===eo?_:s,ef="a"===eo?o.a.length:o.b.length,eh="a"===eo?o.b.length:o.a.length,ed=Math.floor("a"===eo?i.b2j(eu):i.a2i(eu)),ep="a"===eo?function(o){return i.evalxy([],o,ed)}:function(o){return i.evalxy([],ed,o)};es&&(j=Math.max(0,Math.min(eh-2,ed)),G=ed-j,N="a"===eo?function(o,s){return i.dxydi([],o,j,s,G)}:function(o,s){return i.dxydj([],j,o,G,s)});var eg=el(ec[0]),em=el(ec[1]),ey=eg<em?1:-1,ev=(em-eg)*1e-8,ex=ey>0?Math.floor:Math.ceil,e_=ey>0?Math.ceil:Math.floor,ew=ey>0?Math.min:Math.max,eT=ey>0?Math.max:Math.min,ek=ex(eg+ev),eA=e_(em-ev),eS=[[J=ep(eg)]];for(F=ek;F*ey<eA*ey;F+=ey)Z=[],er=eT(eg,F),ei=(en=ew(em,F+ey))-er,X=Math.max(0,Math.min(ef-2,Math.floor(.5*(er+en)))),$=ep(en),es&&(ee=N(X,er-X),et=N(X,en-X),Z.push([J[0]+ee[0]/3*ei,J[1]+ee[1]/3*ei]),Z.push([$[0]-et[0]/3*ei,$[1]-et[1]/3*ei])),Z.push($),eS.push(Z),J=$;return eS}},1928:function(i,o,s){"use strict";var x=s(41940),_=s(22399),F=s(13838),N=s(12663).descriptionWithDates,j=s(30962).overrideAll,G=s(79952).P,Z=s(1426).extendFlat;i.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:x({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:F.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:Z({},F.labelalias,{editType:"calc"}),tickfont:x({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:N("tick label")},tickformatstops:j(F.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:_.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:Z({},G,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:Z({},G,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:_.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:x({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(i,o,s){"use strict";var x=s(99798),_=s(7901).addOpacity,F=s(73972),N=s(71828),j=s(26218),G=s(96115),Z=s(89426),X=s(15258),J=s(21994),$=s(4322);i.exports=function(i,o,s){var ee=s.letter,et=s.font||{},er=x[ee+"axis"];function coerce(s,x){return N.coerce(i,o,er,s,x)}function coerce2(s,x){return N.coerce2(i,o,er,s,x)}s.name&&(o._name=s.name,o._id=s.name),coerce("autotypenumbers",s.autotypenumbersDflt);var en=coerce("type");"-"===en&&(s.data&&function(i,o){if("-"===i.type){var s=i._id.charAt(0),x=i[s+"calendar"];i.type=$(o,x,{autotypenumbers:i.autotypenumbers})}}(o,s.data),"-"===o.type?o.type="linear":en=i.type=o.type),coerce("smoothing"),coerce("cheatertype"),coerce("showticklabels"),coerce("labelprefix",ee+" = "),coerce("labelsuffix"),coerce("showtickprefix"),coerce("showticksuffix"),coerce("separatethousands"),coerce("tickformat"),coerce("exponentformat"),coerce("minexponent"),coerce("showexponent"),coerce("categoryorder"),coerce("tickmode"),coerce("tickvals"),coerce("ticktext"),coerce("tick0"),coerce("dtick"),"array"===o.tickmode&&(coerce("arraytick0"),coerce("arraydtick")),coerce("labelpadding"),o._hovertitle=ee,"date"===en&&F.getComponentMethod("calendars","handleDefaults")(i,o,"calendar",s.calendar),J(o,s.fullLayout),o.c2p=N.identity;var ei=coerce("color",s.dfltColor),eo=ei===i.color?ei:et.color;coerce("title.text")&&(N.coerceFont(coerce,"title.font",{family:et.family,size:N.bigFont(et.size),color:eo}),coerce("title.offset")),coerce("tickangle"),coerce("autorange",!o.isValidRange(i.range))&&coerce("rangemode"),coerce("range"),o.cleanRange(),coerce("fixedrange"),j(i,o,coerce,en),Z(i,o,coerce,en,s),G(i,o,coerce,en,s),X(i,o,coerce,{data:s.data,dataAttr:ee});var es=coerce2("gridcolor",_(ei,.3)),el=coerce2("gridwidth"),ec=coerce2("griddash"),eu=coerce("showgrid");eu||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var ef=coerce2("startlinecolor",ei),eh=coerce2("startlinewidth",el);coerce("startline",o.showgrid||!!ef||!!eh)||(delete o.startlinecolor,delete o.startlinewidth);var ed=coerce2("endlinecolor",ei),ep=coerce2("endlinewidth",el);return coerce("endline",o.showgrid||!!ed||!!ep)||(delete o.endlinecolor,delete o.endlinewidth),eu?(coerce("minorgridcount"),coerce("minorgridwidth",el),coerce("minorgriddash",ec),coerce("minorgridcolor",_(es,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),"none"===o.showticklabels&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,coerce("tickmode"),o}},25281:function(i,o,s){"use strict";var x=s(89298),_=s(71828).isArray1D,F=s(53824),N=s(402),j=s(20347),G=s(83311),Z=s(44807),X=s(4742),J=s(72505),$=s(68296),ee=s(11435);i.exports=function(i,o){var s=x.getFromId(i,o.xaxis),et=x.getFromId(i,o.yaxis),er=o.aaxis,en=o.baxis,ei=o.x,eo=o.y,es=[];ei&&_(ei)&&es.push("x"),eo&&_(eo)&&es.push("y"),es.length&&$(o,er,en,"a","b",es);var el=o._a=o._a||o.a,ec=o._b=o._b||o.b;ei=o._x||o.x,eo=o._y||o.y;var eu={};o._cheater&&(ei=F("index"===er.cheatertype?el.length:el,"index"===en.cheatertype?ec.length:ec,o.cheaterslope)),o._x=ei=X(ei),o._y=eo=X(eo),J(ei,el,ec),J(eo,el,ec),ee(o),o.setScale();var ef=N(ei),eh=N(eo),ed=.5*(ef[1]-ef[0]),ep=.5*(ef[1]+ef[0]),eg=.5*(eh[1]-eh[0]),em=.5*(eh[1]+eh[0]);return ef=[ep-1.3*ed,ep+1.3*ed],eh=[em-1.3*eg,em+1.3*eg],o._extremes[s._id]=x.findExtremes(s,ef,{padded:!0}),o._extremes[et._id]=x.findExtremes(et,eh,{padded:!0}),j(o,"a","b"),j(o,"b","a"),G(o,er),G(o,en),eu.clipsegments=Z(o._xctrl,o._yctrl,er,en),eu.x=ei,eu.y=eo,eu.a=el,eu.b=ec,[eu]}},44807:function(i){"use strict";i.exports=function(i,o,s,x){var _,F,N,j=[],G=!!s.smoothing,Z=!!x.smoothing,X=i[0].length-1,J=i.length-1;for(_=0,F=[],N=[];_<=X;_++)F[_]=i[0][_],N[_]=o[0][_];for(j.push({x:F,y:N,bicubic:G}),_=0,F=[],N=[];_<=J;_++)F[_]=i[_][X],N[_]=o[_][X];for(j.push({x:F,y:N,bicubic:Z}),_=X,F=[],N=[];_>=0;_--)F[X-_]=i[J][_],N[X-_]=o[J][_];for(j.push({x:F,y:N,bicubic:G}),_=J,F=[],N=[];_>=0;_--)F[J-_]=i[_][0],N[J-_]=o[_][0];return j.push({x:F,y:N,bicubic:Z}),j}},20347:function(i,o,s){"use strict";var x=s(89298),_=s(1426).extendFlat;i.exports=function(i,o,s){var F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es=i["_"+o],el=i[o+"axis"],ec=el._gridlines=[],eu=el._minorgridlines=[],ef=el._boundarylines=[],eh=i["_"+s],ed=i[s+"axis"];"array"===el.tickmode&&(el.tickvals=es.slice());var ep=i._xctrl,eg=i._yctrl,em=ep[0].length,ey=ep.length,ev=i._a.length,ex=i._b.length;x.prepTicks(el),"array"===el.tickmode&&delete el.tickvals;var e_=el.smoothing?3:1;function constructValueGridline(x){var _,F,N,j,G,Z,X,J,ee,et,er,en,ei=[],eo=[],es={};if("b"===o)for(_=0,N=Math.floor(Math.max(0,Math.min(ex-2,F=i.b2j(x)))),j=F-N,es.length=ex,es.crossLength=ev,es.xy=function(o){return i.evalxy([],o,F)},es.dxy=function(o,s){return i.dxydi([],o,N,s,j)};_<ev;_++)Z=Math.min(ev-2,_),X=_-Z,J=i.evalxy([],_,F),ed.smoothing&&_>0&&(ee=i.dxydi([],_-1,N,0,j),ei.push(G[0]+ee[0]/3),eo.push(G[1]+ee[1]/3),et=i.dxydi([],_-1,N,1,j),ei.push(J[0]-et[0]/3),eo.push(J[1]-et[1]/3)),ei.push(J[0]),eo.push(J[1]),G=J;else for(F=0,Z=Math.floor(Math.max(0,Math.min(ev-2,_=i.a2i(x)))),X=_-Z,es.length=ev,es.crossLength=ex,es.xy=function(o){return i.evalxy([],_,o)},es.dxy=function(o,s){return i.dxydj([],Z,o,X,s)};F<ex;F++)N=Math.min(ex-2,F),j=F-N,J=i.evalxy([],_,F),ed.smoothing&&F>0&&(er=i.dxydj([],Z,F-1,X,0),ei.push(G[0]+er[0]/3),eo.push(G[1]+er[1]/3),en=i.dxydj([],Z,F-1,X,1),ei.push(J[0]-en[0]/3),eo.push(J[1]-en[1]/3)),ei.push(J[0]),eo.push(J[1]),G=J;return es.axisLetter=o,es.axis=el,es.crossAxis=ed,es.value=x,es.constvar=s,es.index=$,es.x=ei,es.y=eo,es.smoothing=ed.smoothing,es}function constructArrayGridline(x){var _,F,N,j,G,Z=[],X=[],J={};if(J.length=es.length,J.crossLength=eh.length,"b"===o)for(_=0,N=Math.max(0,Math.min(ex-2,x)),G=Math.min(1,Math.max(0,x-N)),J.xy=function(o){return i.evalxy([],o,x)},J.dxy=function(o,s){return i.dxydi([],o,N,s,G)};_<em;_++)Z[_]=ep[x*e_][_],X[_]=eg[x*e_][_];else for(_=0,F=Math.max(0,Math.min(ev-2,x)),j=Math.min(1,Math.max(0,x-F)),J.xy=function(o){return i.evalxy([],x,o)},J.dxy=function(o,s){return i.dxydj([],F,o,j,s)};_<ey;_++)Z[_]=ep[_][x*e_],X[_]=eg[_][x*e_];return J.axisLetter=o,J.axis=el,J.crossAxis=ed,J.value=es[x],J.constvar=s,J.index=x,J.x=Z,J.y=X,J.smoothing=ed.smoothing,J}if("array"===el.tickmode){for(G=5e-15,X=(Z=[Math.floor((es.length-1-el.arraytick0)/el.arraydtick*(1+G)),Math.ceil(-el.arraytick0/el.arraydtick/(1+G))].sort(function(i,o){return i-o}))[0]-1,J=Z[1]+1,$=X;$<J;$++)(N=el.arraytick0+el.arraydtick*$)<0||N>es.length-1||ec.push(_(constructArrayGridline(N),{color:el.gridcolor,width:el.gridwidth,dash:el.griddash}));for($=X;$<J;$++)if(er=Math.min((j=el.arraytick0+el.arraydtick*$)+el.arraydtick,es.length-1),!(j<0)&&!(j>es.length-1)&&!(er<0)&&!(er>es.length-1))for(F=0,en=es[j],ei=es[er];F<el.minorgridcount;F++)!((eo=er-j)<=0)&&((et=en+(ei-en)*(F+1)/(el.minorgridcount+1)*(el.arraydtick/eo))<es[0]||et>es[es.length-1]||eu.push(_(constructValueGridline(et),{color:el.minorgridcolor,width:el.minorgridwidth,dash:el.minorgriddash})));el.startline&&ef.push(_(constructArrayGridline(0),{color:el.startlinecolor,width:el.startlinewidth})),el.endline&&ef.push(_(constructArrayGridline(es.length-1),{color:el.endlinecolor,width:el.endlinewidth}))}else{for(G=5e-15,X=(Z=[Math.floor((es[es.length-1]-el.tick0)/el.dtick*(1+G)),Math.ceil((es[0]-el.tick0)/el.dtick/(1+G))].sort(function(i,o){return i-o}))[0],J=Z[1],$=X;$<=J;$++)ee=el.tick0+el.dtick*$,ec.push(_(constructValueGridline(ee),{color:el.gridcolor,width:el.gridwidth,dash:el.griddash}));for($=X-1;$<J+1;$++)for(F=0,ee=el.tick0+el.dtick*$;F<el.minorgridcount;F++)(et=ee+el.dtick*(F+1)/(el.minorgridcount+1))<es[0]||et>es[es.length-1]||eu.push(_(constructValueGridline(et),{color:el.minorgridcolor,width:el.minorgridwidth,dash:el.minorgriddash}));el.startline&&ef.push(_(constructValueGridline(es[0]),{color:el.startlinecolor,width:el.startlinewidth})),el.endline&&ef.push(_(constructValueGridline(es[es.length-1]),{color:el.endlinecolor,width:el.endlinewidth}))}}},83311:function(i,o,s){"use strict";var x=s(89298),_=s(1426).extendFlat;i.exports=function(i,o){var s,F,N,j,G,Z=o._labels=[],X=o._gridlines;for(s=0;s<X.length;s++)G=X[s],-1!==["start","both"].indexOf(o.showticklabels)&&(_(F=x.tickText(o,G.value),{prefix:N,suffix:j,endAnchor:!0,xy:G.xy(0),dxy:G.dxy(0,0),axis:G.axis,length:G.crossAxis.length,font:G.axis.tickfont,isFirst:0===s,isLast:s===X.length-1}),Z.push(F)),-1!==["end","both"].indexOf(o.showticklabels)&&(_(F=x.tickText(o,G.value),{endAnchor:!1,xy:G.xy(G.crossLength-1),dxy:G.dxy(G.crossLength-2,1),axis:G.axis,length:G.crossAxis.length,font:G.axis.tickfont,isFirst:0===s,isLast:s===X.length-1}),Z.push(F))}},42048:function(i){"use strict";i.exports=function(i,o,s,x){var _=i[0]-o[0],F=i[1]-o[1],N=s[0]-o[0],j=s[1]-o[1],G=Math.pow(_*_+F*F,.25),Z=Math.pow(N*N+j*j,.25),X=(Z*Z*_-G*G*N)*x,J=(Z*Z*F-G*G*j)*x,$=Z*(G+Z)*3,ee=G*(G+Z)*3;return[[o[0]+($&&X/$),o[1]+($&&J/$)],[o[0]-(ee&&X/ee),o[1]-(ee&&J/ee)]]}},53824:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s){var _,F,N,j,G,Z,X=[],J=x(i)?i.length:i,$=x(o)?o.length:o,ee=x(i)?i:null,et=x(o)?o:null;ee&&(N=(ee.length-1)/(ee[ee.length-1]-ee[0])/(J-1)),et&&(j=(et.length-1)/(et[et.length-1]-et[0])/($-1));var er=1/0,en=-1/0;for(F=0;F<$;F++)for(_=0,X[F]=[],G=et?(et[F]-et[0])*j:F/($-1);_<J;_++)er=Math.min(Z=(ee?(ee[_]-ee[0])*N:_/(J-1))-G*s,er),en=Math.max(Z,en),X[F][_]=Z;var ei=1/(en-er),eo=-er*ei;for(F=0;F<$;F++)for(_=0;_<J;_++)X[F][_]=ei*X[F][_]+eo;return X}},45664:function(i,o,s){"use strict";var x=s(42048),_=s(71828).ensureArray;function inferCubicControlPoint(i,o,s){var x=-.5*s[0]+1.5*o[0],_=-.5*s[1]+1.5*o[1];return[(2*x+i[0])/3,(2*_+i[1])/3]}i.exports=function(i,o,s,F,N,j){var G,Z,X,J,$,ee,et,er,en,ei,eo=s[0].length,es=s.length,el=N?3*eo-2:eo,ec=j?3*es-2:es;for(X=0,i=_(i,ec),o=_(o,ec);X<ec;X++)i[X]=_(i[X],el),o[X]=_(o[X],el);for(Z=0,J=0;Z<es;Z++,J+=j?3:1)for(G=0,$=i[J],ee=o[J],et=s[Z],er=F[Z],X=0;G<eo;G++,X+=N?3:1)$[X]=et[G],ee[X]=er[G];if(N)for(Z=0,J=0;Z<es;Z++,J+=j?3:1){for(G=1,X=3;G<eo-1;G++,X+=3)en=x([s[Z][G-1],F[Z][G-1]],[s[Z][G],F[Z][G]],[s[Z][G+1],F[Z][G+1]],N),i[J][X-1]=en[0][0],o[J][X-1]=en[0][1],i[J][X+1]=en[1][0],o[J][X+1]=en[1][1];ei=inferCubicControlPoint([i[J][0],o[J][0]],[i[J][2],o[J][2]],[i[J][3],o[J][3]]),i[J][1]=ei[0],o[J][1]=ei[1],ei=inferCubicControlPoint([i[J][el-1],o[J][el-1]],[i[J][el-3],o[J][el-3]],[i[J][el-4],o[J][el-4]]),i[J][el-2]=ei[0],o[J][el-2]=ei[1]}if(j)for(X=0;X<el;X++){for(J=3;J<ec-3;J+=3)en=x([i[J-3][X],o[J-3][X]],[i[J][X],o[J][X]],[i[J+3][X],o[J+3][X]],j),i[J-1][X]=en[0][0],o[J-1][X]=en[0][1],i[J+1][X]=en[1][0],o[J+1][X]=en[1][1];ei=inferCubicControlPoint([i[0][X],o[0][X]],[i[2][X],o[2][X]],[i[3][X],o[3][X]]),i[1][X]=ei[0],o[1][X]=ei[1],ei=inferCubicControlPoint([i[ec-1][X],o[ec-1][X]],[i[ec-3][X],o[ec-3][X]],[i[ec-4][X],o[ec-4][X]]),i[ec-2][X]=ei[0],o[ec-2][X]=ei[1]}if(N&&j)for(J=1;J<ec;J+=(J+1)%3==0?2:1){for(X=3;X<el-3;X+=3)en=x([i[J][X-3],o[J][X-3]],[i[J][X],o[J][X]],[i[J][X+3],o[J][X+3]],N),i[J][X-1]=.5*(i[J][X-1]+en[0][0]),o[J][X-1]=.5*(o[J][X-1]+en[0][1]),i[J][X+1]=.5*(i[J][X+1]+en[1][0]),o[J][X+1]=.5*(o[J][X+1]+en[1][1]);ei=inferCubicControlPoint([i[J][0],o[J][0]],[i[J][2],o[J][2]],[i[J][3],o[J][3]]),i[J][1]=.5*(i[J][1]+ei[0]),o[J][1]=.5*(o[J][1]+ei[1]),ei=inferCubicControlPoint([i[J][el-1],o[J][el-1]],[i[J][el-3],o[J][el-3]],[i[J][el-4],o[J][el-4]]),i[J][el-2]=.5*(i[J][el-2]+ei[0]),o[J][el-2]=.5*(o[J][el-2]+ei[1])}return[i,o]}},35509:function(i){"use strict";i.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(i){"use strict";i.exports=function(i,o,s){return o&&s?function(o,s,x,_,F){o||(o=[]),s*=3,x*=3;var N,j,G,Z,X,J,$=_*_,ee=1-_,et=ee*ee,er=ee*_*2,en=-3*et,ei=3*(et-er),eo=3*(er-$),es=3*$,el=F*F,ec=el*F,eu=1-F,ef=eu*eu,eh=ef*eu;for(J=0;J<i.length;J++)N=en*(X=i[J])[x][s]+ei*X[x][s+1]+eo*X[x][s+2]+es*X[x][s+3],j=en*X[x+1][s]+ei*X[x+1][s+1]+eo*X[x+1][s+2]+es*X[x+1][s+3],G=en*X[x+2][s]+ei*X[x+2][s+1]+eo*X[x+2][s+2]+es*X[x+2][s+3],Z=en*X[x+3][s]+ei*X[x+3][s+1]+eo*X[x+3][s+2]+es*X[x+3][s+3],o[J]=eh*N+3*(ef*F*j+eu*el*G)+ec*Z;return o}:o?function(o,s,x,_,F){o||(o=[]),s*=3;var N,j,G,Z,X=_*_,J=1-_,$=J*J,ee=J*_*2,et=-3*$,er=3*($-ee),en=3*(ee-X),ei=3*X,eo=1-F;for(G=0;G<i.length;G++)N=et*(Z=i[G])[x][s]+er*Z[x][s+1]+en*Z[x][s+2]+ei*Z[x][s+3],j=et*Z[x+1][s]+er*Z[x+1][s+1]+en*Z[x+1][s+2]+ei*Z[x+1][s+3],o[G]=eo*N+F*j;return o}:s?function(o,s,x,_,F){o||(o=[]),x*=3;var N,j,G,Z,X,J,$=F*F,ee=$*F,et=1-F,er=et*et,en=er*et;for(X=0;X<i.length;X++)N=(J=i[X])[x][s+1]-J[x][s],j=J[x+1][s+1]-J[x+1][s],G=J[x+2][s+1]-J[x+2][s],Z=J[x+3][s+1]-J[x+3][s],o[X]=en*N+3*(er*F*j+et*$*G)+ee*Z;return o}:function(o,s,x,_,F){o||(o=[]);var N,j,G,Z,X=1-F;for(G=0;G<i.length;G++)N=(Z=i[G])[x][s+1]-Z[x][s],j=Z[x+1][s+1]-Z[x+1][s],o[G]=X*N+F*j;return o}}},73057:function(i){"use strict";i.exports=function(i,o,s){return o&&s?function(o,s,x,_,F){o||(o=[]),s*=3,x*=3;var N,j,G,Z,X,J,$=_*_,ee=$*_,et=1-_,er=et*et,en=er*et,ei=F*F,eo=1-F,es=eo*eo,el=eo*F*2,ec=-3*es,eu=3*(es-el),ef=3*(el-ei),eh=3*ei;for(J=0;J<i.length;J++)N=ec*(X=i[J])[x][s]+eu*X[x+1][s]+ef*X[x+2][s]+eh*X[x+3][s],j=ec*X[x][s+1]+eu*X[x+1][s+1]+ef*X[x+2][s+1]+eh*X[x+3][s+1],G=ec*X[x][s+2]+eu*X[x+1][s+2]+ef*X[x+2][s+2]+eh*X[x+3][s+2],Z=ec*X[x][s+3]+eu*X[x+1][s+3]+ef*X[x+2][s+3]+eh*X[x+3][s+3],o[J]=en*N+3*(er*_*j+et*$*G)+ee*Z;return o}:o?function(o,s,x,_,F){o||(o=[]),s*=3;var N,j,G,Z,X,J,$=F*F,ee=$*F,et=1-F,er=et*et,en=er*et;for(X=0;X<i.length;X++)N=(J=i[X])[x+1][s]-J[x][s],j=J[x+1][s+1]-J[x][s+1],G=J[x+1][s+2]-J[x][s+2],Z=J[x+1][s+3]-J[x][s+3],o[X]=en*N+3*(er*F*j+et*$*G)+ee*Z;return o}:s?function(o,s,x,_,F){o||(o=[]),x*=3;var N,j,G,Z,X=1-_,J=F*F,$=1-F,ee=$*$,et=$*F*2,er=-3*ee,en=3*(ee-et),ei=3*(et-J),eo=3*J;for(G=0;G<i.length;G++)N=er*(Z=i[G])[x][s]+en*Z[x+1][s]+ei*Z[x+2][s]+eo*Z[x+3][s],j=er*Z[x][s+1]+en*Z[x+1][s+1]+ei*Z[x+2][s+1]+eo*Z[x+3][s+1],o[G]=X*N+_*j;return o}:function(o,s,x,_,F){o||(o=[]);var N,j,G,Z,X=1-_;for(G=0;G<i.length;G++)N=(Z=i[G])[x+1][s]-Z[x][s],j=Z[x+1][s+1]-Z[x][s+1],o[G]=X*N+_*j;return o}}},20349:function(i){"use strict";i.exports=function(i,o,s,x,_){var F=o-2,N=s-2;return x&&_?function(o,s,x){o||(o=[]);var _,j,G,Z,X,J,$=Math.max(0,Math.min(Math.floor(s),F)),ee=Math.max(0,Math.min(Math.floor(x),N)),et=Math.max(0,Math.min(1,s-$)),er=Math.max(0,Math.min(1,x-ee));$*=3,ee*=3;var en=et*et,ei=en*et,eo=1-et,es=eo*eo,el=es*eo,ec=er*er,eu=ec*er,ef=1-er,eh=ef*ef,ed=eh*ef;for(J=0;J<i.length;J++)_=el*(X=i[J])[ee][$]+3*(es*et*X[ee][$+1]+eo*en*X[ee][$+2])+ei*X[ee][$+3],j=el*X[ee+1][$]+3*(es*et*X[ee+1][$+1]+eo*en*X[ee+1][$+2])+ei*X[ee+1][$+3],G=el*X[ee+2][$]+3*(es*et*X[ee+2][$+1]+eo*en*X[ee+2][$+2])+ei*X[ee+2][$+3],Z=el*X[ee+3][$]+3*(es*et*X[ee+3][$+1]+eo*en*X[ee+3][$+2])+ei*X[ee+3][$+3],o[J]=ed*_+3*(eh*er*j+ef*ec*G)+eu*Z;return o}:x?function(o,s,x){o||(o=[]);var _,j,G,Z,X,J,$=Math.max(0,Math.min(Math.floor(s),F)),ee=Math.max(0,Math.min(Math.floor(x),N)),et=Math.max(0,Math.min(1,s-$)),er=Math.max(0,Math.min(1,x-ee));$*=3;var en=et*et,ei=en*et,eo=1-et,es=eo*eo,el=es*eo,ec=1-er;for(X=0;X<i.length;X++)_=ec*(J=i[X])[ee][$]+er*J[ee+1][$],j=ec*J[ee][$+1]+er*J[ee+1][$+1],G=ec*J[ee][$+2]+er*J[ee+1][$+1],Z=ec*J[ee][$+3]+er*J[ee+1][$+1],o[X]=el*_+3*(es*et*j+eo*en*G)+ei*Z;return o}:_?function(o,s,x){o||(o=[]);var _,j,G,Z,X,J,$=Math.max(0,Math.min(Math.floor(s),F)),ee=Math.max(0,Math.min(Math.floor(x),N)),et=Math.max(0,Math.min(1,s-$)),er=Math.max(0,Math.min(1,x-ee));ee*=3;var en=er*er,ei=en*er,eo=1-er,es=eo*eo,el=es*eo,ec=1-et;for(X=0;X<i.length;X++)_=ec*(J=i[X])[ee][$]+et*J[ee][$+1],j=ec*J[ee+1][$]+et*J[ee+1][$+1],G=ec*J[ee+2][$]+et*J[ee+2][$+1],Z=ec*J[ee+3][$]+et*J[ee+3][$+1],o[X]=el*_+3*(es*er*j+eo*en*G)+ei*Z;return o}:function(o,s,x){o||(o=[]);var _,j,G,Z,X=Math.max(0,Math.min(Math.floor(s),F)),J=Math.max(0,Math.min(Math.floor(x),N)),$=Math.max(0,Math.min(1,s-X)),ee=Math.max(0,Math.min(1,x-J)),et=1-ee,er=1-$;for(G=0;G<i.length;G++)_=er*(Z=i[G])[J][X]+$*Z[J][X+1],j=er*Z[J+1][X]+$*Z[J+1][X+1],o[G]=et*_+ee*j;return o}}},92087:function(i,o,s){"use strict";var x=s(71828),_=s(19237),F=s(13145),N=s(99798),j=s(22399);i.exports=function(i,o,s,G){function coerce(s,_){return x.coerce(i,o,N,s,_)}o._clipPathId="clip"+o.uid+"carpet";var Z=coerce("color",j.defaultLine);if(x.coerceFont(coerce,"font"),coerce("carpet"),F(i,o,G,coerce,Z),!o.a||!o.b){o.visible=!1;return}o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),_(i,o,coerce)||(o.visible=!1),o._cheater&&coerce("cheaterslope")}},21462:function(i,o,s){"use strict";i.exports={attributes:s(99798),supplyDefaults:s(92087),plot:s(89740),calc:s(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:s(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(i){"use strict";i.exports=function(i,o){for(var s,x=i._fullData.length,_=0;_<x;_++){var F=i._fullData[_];if(F.index!==o.index&&"carpet"===F.type&&(s||(s=F),F.carpet===o.carpet))return F}return s}},67961:function(i){"use strict";i.exports=function(i,o,s){if(0===i.length)return"";var x,_=[],F=s?3:1;for(x=0;x<i.length;x+=F)_.push(i[x]+","+o[x]),s&&x<i.length-F&&(_.push("C"),_.push([i[x+1]+","+o[x+1],i[x+2]+","+o[x+2]+" "].join(" ")));return _.join(s?"":"L")}},27669:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s){var _;for(x(i)?i.length>o.length&&(i=i.slice(0,o.length)):i=[],_=0;_<o.length;_++)i[_]=s(o[_]);return i}},11651:function(i){"use strict";i.exports=function(i,o,s,x,_,F){var N=_[0]*i.dpdx(o),j=_[1]*i.dpdy(s),G=1,Z=1;if(F){var X=Math.sqrt(_[0]*_[0]+_[1]*_[1]),J=Math.sqrt(F[0]*F[0]+F[1]*F[1]);Z=Math.max(0,(_[0]*F[0]+_[1]*F[1])/X/J)}var $=180*Math.atan2(j,N)/Math.PI;return $<-90?($+=180,G=-G):$>90&&($-=180,G=-G),{angle:$,flip:G,p:i.c2p(x,o,s),offsetMultplier:Z}}},89740:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(27669),N=s(67961),j=s(11651),G=s(63893),Z=s(71828),X=Z.strRotate,J=Z.strTranslate,$=s(18783);function drawGridLines(i,o,s,j,G,Z,X){var J="const-"+G+"-lines",$=s.selectAll("."+J).data(Z);$.enter().append("path").classed(J,!0).style("vector-effect",X?"none":"non-scaling-stroke"),$.each(function(s){var j=s.x,G=s.y,Z="M"+N(F([],j,i.c2p),F([],G,o.c2p),s.smoothing);x.select(this).attr("d",Z).style("stroke-width",s.width).style("stroke",s.color).style("stroke-dasharray",_.dashStyle(s.dash,s.width)).style("fill","none")}),$.exit().remove()}function drawAxisLabels(i,o,s,F,N,Z,$,ee){var et=Z.selectAll("text."+ee).data($);et.enter().append("text").classed(ee,!0);var er=0,en={};return et.each(function(N,Z){if("auto"===N.axis.tickangle)$=j(F,o,s,N.xy,N.dxy);else{var $,ee=(N.axis.tickangle+180)*Math.PI/180;$=j(F,o,s,N.xy,[Math.cos(ee),Math.sin(ee)])}Z||(en={angle:$.angle,flip:$.flip});var et=(N.endAnchor?-1:1)*$.flip,ei=x.select(this).attr({"text-anchor":et>0?"start":"end","data-notex":1}).call(_.font,N.font).text(N.text).call(G.convertToTspans,i),eo=_.bBox(this);ei.attr("transform",J($.p[0],$.p[1])+X($.angle)+J(N.axis.labelpadding*et,.3*eo.height)),er=Math.max(er,eo.width+N.axis.labelpadding)}),et.exit().remove(),en.maxExtent=er,en}i.exports=function(i,o,s,_){var G=i._context.staticPlot,X=o.xaxis,J=o.yaxis,$=i._fullLayout._clips;Z.makeTraceGroups(_,s,"trace").each(function(o){var s,_,ee,et,er,en,ei,eo,es=x.select(this),el=o[0],ec=el.trace,eu=ec.aaxis,ef=ec.baxis,eh=Z.ensureSingle(es,"g","minorlayer"),ed=Z.ensureSingle(es,"g","majorlayer"),ep=Z.ensureSingle(es,"g","boundarylayer"),eg=Z.ensureSingle(es,"g","labellayer");es.style("opacity",ec.opacity),drawGridLines(X,J,ed,eu,"a",eu._gridlines,!0,G),drawGridLines(X,J,ed,ef,"b",ef._gridlines,!0,G),drawGridLines(X,J,eh,eu,"a",eu._minorgridlines,!0,G),drawGridLines(X,J,eh,ef,"b",ef._minorgridlines,!0,G),drawGridLines(X,J,ep,eu,"a-boundary",eu._boundarylines,G),drawGridLines(X,J,ep,ef,"b-boundary",ef._boundarylines,G);var em=drawAxisLabels(i,X,J,ec,el,eg,eu._labels,"a-label"),ey=drawAxisLabels(i,X,J,ec,el,eg,ef._labels,"b-label");er=Z.aggNums(Math.min,null,ec.a),en=Z.aggNums(Math.max,null,ec.a),ei=Z.aggNums(Math.min,null,ec.b),eo=Z.aggNums(Math.max,null,ec.b),s=.5*(er+en),_=ei,ee=ec.ab2xy(s,_,!0),et=ec.dxyda_rough(s,_),void 0===em.angle&&Z.extendFlat(em,j(ec,X,J,ee,ec.dxydb_rough(s,_))),drawAxisTitle(i,eg,ec,el,ee,et,ec.aaxis,X,J,em,"a-title"),s=er,_=.5*(ei+eo),ee=ec.ab2xy(s,_,!0),et=ec.dxydb_rough(s,_),void 0===ey.angle&&Z.extendFlat(ey,j(ec,X,J,ee,ec.dxyda_rough(s,_))),drawAxisTitle(i,eg,ec,el,ee,et,ec.baxis,X,J,ey,"b-title"),function(i,o,s,x,_){var j,G,X=s.select("#"+i._clipPathId);X.size()||(X=s.append("clipPath").classed("carpetclip",!0));var J=Z.ensureSingle(X,"path","carpetboundary"),$=o.clipsegments,ee=[];for(G=0;G<$.length;G++)ee.push(N(F([],(j=$[G]).x,x.c2p),F([],j.y,_.c2p),j.bicubic));var et="M"+ee.join("L")+"Z";X.attr("id",i._clipPathId),J.attr("d",et)}(ec,el,$,X,J)})};var ee=$.LINE_SPACING,et=(1-$.MID_SHIFT)/ee+1;function drawAxisTitle(i,o,s,F,N,Z,$,er,en,ei,eo){var es=[];$.title.text&&es.push($.title.text);var el=o.selectAll("text."+eo).data(es),ec=ei.maxExtent;el.enter().append("text").classed(eo,!0),el.each(function(){var o=j(s,er,en,N,Z);-1===["start","both"].indexOf($.showticklabels)&&(ec=0);var F=$.title.font.size;ec+=F+$.title.offset;var eo=(ei.angle+(ei.flip<0?180:0)-o.angle+450)%360,es=x.select(this);es.text($.title.text).call(G.convertToTspans,i),eo>90&&eo<270&&(ec=(-G.lineCount(es)+et)*ee*F-ec),es.attr("transform",J(o.p[0],o.p[1])+X(o.angle)+J(0,ec)).attr("text-anchor","middle").call(_.font,$.title.font)}),el.exit().remove()}},11435:function(i,o,s){"use strict";var x=s(35509),_=s(65888).findBin,F=s(45664),N=s(20349),j=s(54495),G=s(73057);i.exports=function(i){var o=i._a,s=i._b,Z=o.length,X=s.length,J=i.aaxis,$=i.baxis,ee=o[0],et=o[Z-1],er=s[0],en=s[X-1],ei=o[o.length-1]-o[0],eo=s[s.length-1]-s[0],es=ei*x.RELATIVE_CULL_TOLERANCE,el=eo*x.RELATIVE_CULL_TOLERANCE;ee-=es,et+=es,er-=el,en+=el,i.isVisible=function(i,o){return i>ee&&i<et&&o>er&&o<en},i.isOccluded=function(i,o){return i<ee||i>et||o<er||o>en},i.setScale=function(){var o=i._x,s=i._y,x=F(i._xctrl,i._yctrl,o,s,J.smoothing,$.smoothing);i._xctrl=x[0],i._yctrl=x[1],i.evalxy=N([i._xctrl,i._yctrl],Z,X,J.smoothing,$.smoothing),i.dxydi=j([i._xctrl,i._yctrl],J.smoothing,$.smoothing),i.dxydj=G([i._xctrl,i._yctrl],J.smoothing,$.smoothing)},i.i2a=function(i){var s=Math.max(0,Math.floor(i[0]),Z-2),x=i[0]-s;return(1-x)*o[s]+x*o[s+1]},i.j2b=function(i){var o=Math.max(0,Math.floor(i[1]),Z-2),x=i[1]-o;return(1-x)*s[o]+x*s[o+1]},i.ij2ab=function(o){return[i.i2a(o[0]),i.j2b(o[1])]},i.a2i=function(i){var s=Math.max(0,Math.min(_(i,o),Z-2)),x=o[s],F=o[s+1];return Math.max(0,Math.min(Z-1,s+(i-x)/(F-x)))},i.b2j=function(i){var o=Math.max(0,Math.min(_(i,s),X-2)),x=s[o],F=s[o+1];return Math.max(0,Math.min(X-1,o+(i-x)/(F-x)))},i.ab2ij=function(o){return[i.a2i(o[0]),i.b2j(o[1])]},i.i2c=function(o,s){return i.evalxy([],o,s)},i.ab2xy=function(x,_,F){if(!F&&(x<o[0]||x>o[Z-1]|_<s[0]||_>s[X-1]))return[!1,!1];var N=i.a2i(x),j=i.b2j(_),G=i.evalxy([],N,j);if(F){var J,$,ee,et,er=0,en=0,ei=[];x<o[0]?(J=0,$=0,er=(x-o[0])/(o[1]-o[0])):x>o[Z-1]?(J=Z-2,$=1,er=(x-o[Z-1])/(o[Z-1]-o[Z-2])):(J=Math.max(0,Math.min(Z-2,Math.floor(N))),$=N-J),_<s[0]?(ee=0,et=0,en=(_-s[0])/(s[1]-s[0])):_>s[X-1]?(ee=X-2,et=1,en=(_-s[X-1])/(s[X-1]-s[X-2])):(ee=Math.max(0,Math.min(X-2,Math.floor(j))),et=j-ee),er&&(i.dxydi(ei,J,ee,$,et),G[0]+=ei[0]*er,G[1]+=ei[1]*er),en&&(i.dxydj(ei,J,ee,$,et),G[0]+=ei[0]*en,G[1]+=ei[1]*en)}return G},i.c2p=function(i,o,s){return[o.c2p(i[0]),s.c2p(i[1])]},i.p2x=function(i,o,s){return[o.p2c(i[0]),s.p2c(i[1])]},i.dadi=function(i){var s=Math.max(0,Math.min(o.length-2,i));return o[s+1]-o[s]},i.dbdj=function(i){var o=Math.max(0,Math.min(s.length-2,i));return s[o+1]-s[o]},i.dxyda=function(o,s,x,_){var F=i.dxydi(null,o,s,x,_),N=i.dadi(o,x);return[F[0]/N,F[1]/N]},i.dxydb=function(o,s,x,_){var F=i.dxydj(null,o,s,x,_),N=i.dbdj(s,_);return[F[0]/N,F[1]/N]},i.dxyda_rough=function(o,s,x){var _=ei*(x||.1),F=i.ab2xy(o+_,s,!0),N=i.ab2xy(o-_,s,!0);return[(F[0]-N[0])*.5/_,(F[1]-N[1])*.5/_]},i.dxydb_rough=function(o,s,x){var _=eo*(x||.1),F=i.ab2xy(o,s+_,!0),N=i.ab2xy(o,s-_,!0);return[(F[0]-N[0])*.5/_,(F[1]-N[1])*.5/_]},i.dpdx=function(i){return i._m},i.dpdy=function(i){return i._m}}},72505:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o,s){var _=[],F=[],N=i[0].length,j=i.length,G=0;for($=0;$<N;$++)for(ee=0;ee<j;ee++)void 0===i[ee][$]&&(_.push($),F.push(ee),i[ee][$]=function(o,s){var x,_=0,F=0;return o>0&&void 0!==(x=i[s][o-1])&&(F++,_+=x),o<N-1&&void 0!==(x=i[s][o+1])&&(F++,_+=x),s>0&&void 0!==(x=i[s-1][o])&&(F++,_+=x),s<j-1&&void 0!==(x=i[s+1][o])&&(F++,_+=x),_/Math.max(1,F)}($,ee)),G=Math.max(G,Math.abs(i[ee][$]));if(!_.length)return i;var Z=0,X=0,J=_.length;do{for(et=0,Z=0;et<J;et++){$=_[et],ee=F[et];var $,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_=0,ew=0;0===$?(em=o[ev=Math.min(N-1,2)],ey=o[1],ep=i[ee][ev],ew+=(eg=i[ee][1])+(eg-ep)*(o[0]-ey)/(ey-em),e_++):$===N-1&&(em=o[ev=Math.max(0,N-3)],ey=o[N-2],ep=i[ee][ev],ew+=(eg=i[ee][N-2])+(eg-ep)*(o[N-1]-ey)/(ey-em),e_++),(0===$||$===N-1)&&ee>0&&ee<j-1&&(er=s[ee+1]-s[ee],ew+=((en=s[ee]-s[ee-1])*i[ee+1][$]+er*i[ee-1][$])/(en+er),e_++),0===ee?(em=s[ex=Math.min(j-1,2)],ey=s[1],ep=i[ex][$],ew+=(eg=i[1][$])+(eg-ep)*(s[0]-ey)/(ey-em),e_++):ee===j-1&&(em=s[ex=Math.max(0,j-3)],ey=s[j-2],ep=i[ex][$],ew+=(eg=i[j-2][$])+(eg-ep)*(s[j-1]-ey)/(ey-em),e_++),(0===ee||ee===j-1)&&$>0&&$<N-1&&(er=o[$+1]-o[$],ew+=((en=o[$]-o[$-1])*i[ee][$+1]+er*i[ee][$-1])/(en+er),e_++),e_?ew/=e_:(ei=o[$+1]-o[$],eo=o[$]-o[$-1],es=s[ee+1]-s[ee],el=s[ee]-s[ee-1],ec=ei*eo*(ei+eo),eu=es*el*(es+el),ew=(ec*(el*i[ee+1][$]+es*i[ee-1][$])+eu*(eo*i[ee][$+1]+ei*i[ee][$-1]))/(eu*(eo+ei)+ec*(el+es))),Z+=(eh=(ef=ew-i[ee][$])/G)*eh,ed=e_?0:.85,i[ee][$]+=ef*(1+ed)}Z=Math.sqrt(Z)}while(X++<100&&Z>1e-5);return x.log("Smoother converged to",Z,"after",X,"iterations"),i}},19237:function(i,o,s){"use strict";var x=s(71828).isArray1D;i.exports=function(i,o,s){var _=s("x"),F=_&&_.length,N=s("y"),j=N&&N.length;if(!F&&!j)return!1;if(o._cheater=!_,(!F||x(_))&&(!j||x(N))){var G=F?_.length:1/0;j&&(G=Math.min(G,N.length)),o.a&&o.a.length&&(G=Math.min(G,o.a.length)),o.b&&o.b.length&&(G=Math.min(G,o.b.length)),o._length=G}else o._length=null;return!0}},69568:function(i,o,s){"use strict";var x=s(5386).fF,_=s(19316),F=s(50693),N=s(9012),j=s(22399).defaultLine,G=s(1426).extendFlat,Z=_.marker.line;i.exports=G({locations:{valType:"data_array",editType:"calc"},locationmode:_.locationmode,z:{valType:"data_array",editType:"calc"},geojson:G({},_.geojson,{}),featureidkey:_.featureidkey,text:G({},_.text,{}),hovertext:G({},_.hovertext,{}),marker:{line:{color:G({},Z.color,{dflt:j}),width:G({},Z.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:_.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:_.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:G({},N.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:x(),showlegend:G({},N.showlegend,{dflt:!1})},F("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(i,o,s){"use strict";var x=s(92770),_=s(50606).BADNUM,F=s(78803),N=s(75225),j=s(66279);function isNonBlankString(i){return i&&"string"==typeof i}i.exports=function(i,o){var s,G=o._length,Z=Array(G);s=o.geojson?function(i){return isNonBlankString(i)||x(i)}:isNonBlankString;for(var X=0;X<G;X++){var J=Z[X]={},$=o.locations[X],ee=o.z[X];s($)&&x(ee)?(J.loc=$,J.z=ee):(J.loc=null,J.z=_),J.index=X}return N(Z,o),F(i,o,{vals:o.z,containerStr:"",cLetter:"z"}),j(Z,o),Z}},61869:function(i,o,s){"use strict";var x=s(71828),_=s(1586),F=s(69568);i.exports=function(i,o,s,N){function coerce(s,_){return x.coerce(i,o,F,s,_)}var j,G=coerce("locations"),Z=coerce("z");if(!(G&&G.length&&x.isArrayOrTypedArray(Z)&&Z.length)){o.visible=!1;return}o._length=Math.min(G.length,Z.length);var X=coerce("geojson");("string"==typeof X&&""!==X||x.isPlainObject(X))&&(j="geojson-id"),"geojson-id"===coerce("locationmode",j)&&coerce("featureidkey"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("marker.line.width")&&coerce("marker.line.color"),coerce("marker.opacity"),_(i,o,N,coerce,{prefix:"",cLetter:"z"}),x.coerceSelectionMarkerOpacity(o,coerce)}},92069:function(i){"use strict";i.exports=function(i,o,s,x,_){i.location=o.location,i.z=o.z;var F=x[_];return F.fIn&&F.fIn.properties&&(i.properties=F.fIn.properties),i.ct=F.ct,i}},42300:function(i,o,s){"use strict";var x=s(89298),_=s(69568),F=s(71828).fillText;i.exports=function(i,o,s){var N,j,G,Z,X=i.cd,J=X[0].trace,$=i.subplot,ee=[o,s],et=[o+360,s];for(j=0;j<X.length;j++)if(N=X[j],Z=!1,N._polygons){for(G=0;G<N._polygons.length;G++)N._polygons[G].contains(ee)&&(Z=!Z),N._polygons[G].contains(et)&&(Z=!Z);if(Z)break}if(Z&&N)return i.x0=i.x1=i.xa.c2p(N.ct),i.y0=i.y1=i.ya.c2p(N.ct),i.index=N.index,i.location=N.loc,i.z=N.z,i.zLabel=x.tickText($.mockAxis,$.mockAxis.c2l(N.z),"hover").text,i.hovertemplate=N.hovertemplate,function(i,o,s){if(!o.hovertemplate){var x=s.hi||o.hoverinfo,N=String(s.loc),j="all"===x?_.hoverinfo.flags:x.split("+"),G=-1!==j.indexOf("name"),Z=-1!==j.indexOf("location"),X=-1!==j.indexOf("z"),J=-1!==j.indexOf("text"),$=[];!G&&Z?i.nameOverride=N:(G&&(i.nameOverride=o.name),Z&&$.push(N)),X&&$.push(i.zLabel),J&&F(s,o,$),i.extraText=$.join("<br>")}}(i,J,N),[i]}},51319:function(i,o,s){"use strict";i.exports={attributes:s(69568),supplyDefaults:s(61869),colorbar:s(61243),calc:s(38675),calcGeoJSON:s(99841).calcGeoJSON,plot:s(99841).plot,style:s(99636).style,styleOnSelect:s(99636).styleOnSelect,hoverPoints:s(42300),eventData:s(92069),selectPoints:s(81253),moduleType:"trace",name:"choropleth",basePlotModule:s(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(41327),N=s(90973).getTopojsonFeatures,j=s(71739).findExtremes,G=s(99636).style;i.exports={calcGeoJSON:function(i,o){for(var s=i[0].trace,x=o[s.geo],_=x._subplot,G=s.locationmode,Z=s._length,X="geojson-id"===G?F.extractTraceFeature(i):N(s,_.topojson),J=[],$=[],ee=0;ee<Z;ee++){var et=i[ee],er="geojson-id"===G?et.fOut:F.locationToFeature(G,et.loc,X);if(er){et.geojson=er,et.ct=er.properties.ct,et._polygons=F.feature2polygons(er);var en=F.computeBbox(er);J.push(en[0],en[2]),$.push(en[1],en[3])}else et.geojson=null}if("geojson"===x.fitbounds&&"geojson-id"===G){var ei=F.computeBbox(F.getTraceGeojson(s));J=[ei[0],ei[2]],$=[ei[1],ei[3]]}var eo={padded:!0};s._extremes.lon=j(x.lonaxis._ax,J,eo),s._extremes.lat=j(x.lataxis._ax,$,eo)},plot:function(i,o,s){var F=o.layers.backplot.select(".choroplethlayer");_.makeTraceGroups(F,s,"trace choropleth").each(function(o){var s=x.select(this).selectAll("path.choroplethlocation").data(_.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),G(i,o)})}}},81253:function(i){"use strict";i.exports=function(i,o){var s,x,_,F,N,j=i.cd,G=i.xaxis,Z=i.yaxis,X=[];if(!1===o)for(s=0;s<j.length;s++)j[s].selected=0;else for(s=0;s<j.length;s++)(_=(x=j[s]).ct)&&(F=G.c2p(_),N=Z.c2p(_),o.contains([F,N],null,s,i)?(X.push({pointNumber:s,lon:_[0],lat:_[1]}),x.selected=1):x.selected=0);return X}},99636:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(91424),N=s(21081);function styleTrace(i,o){var s=o[0].trace,j=o[0].node3.selectAll(".choroplethlocation"),G=s.marker||{},Z=G.line||{},X=N.makeColorScaleFuncFromTrace(s);j.each(function(i){x.select(this).attr("fill",X(i.z)).call(_.stroke,i.mlc||Z.color).call(F.dashLine,"",i.mlw||Z.width||0).style("opacity",G.opacity)}),F.selectedPointStyle(j,s)}i.exports={style:function(i,o){o&&styleTrace(i,o)},styleOnSelect:function(i,o){var s=o[0].node3,x=o[0].trace;x.selectedpoints?F.selectedPointStyle(s.selectAll(".choroplethlocation"),x):styleTrace(i,o)}}},64496:function(i,o,s){"use strict";var x=s(69568),_=s(50693),F=s(5386).fF,N=s(9012),j=s(1426).extendFlat;i.exports=j({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:j({},x.featureidkey,{}),below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,marker:{line:{color:j({},x.marker.line.color,{editType:"plot"}),width:j({},x.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:j({},x.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:j({},x.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:j({},x.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:x.hoverinfo,hovertemplate:F({},{keys:["properties"]}),showlegend:j({},N.showlegend,{dflt:!1})},_("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(21081),N=s(91424),j=s(18214).makeBlank,G=s(41327);function convertOnSelect(i){var o,s=i[0].trace,x=s._opts;if(s.selectedpoints){for(var F=N.makeSelectedPointStyleFns(s),j=0;j<i.length;j++){var G=i[j];G.fOut&&(G.fOut.properties.mo2=F.selectedOpacityFn(G))}o={type:"identity",property:"mo2"}}else o=_.isArrayOrTypedArray(s.marker.opacity)?{type:"identity",property:"mo"}:s.marker.opacity;return _.extendFlat(x.fill.paint,{"fill-opacity":o}),_.extendFlat(x.line.paint,{"line-opacity":o}),x}i.exports={convert:function(i){var o,s,N,Z=i[0].trace,X=!0===Z.visible&&0!==Z._length,J={layout:{visibility:"none"},paint:{}},$={layout:{visibility:"none"},paint:{}},ee=Z._opts={fill:J,line:$,geojson:j()};if(!X)return ee;var et=G.extractTraceFeature(i);if(!et)return ee;var er=F.makeColorScaleFuncFromTrace(Z),en=Z.marker,ei=en.line||{};_.isArrayOrTypedArray(en.opacity)&&(o=function(i){var o=i.mo;return x(o)?+_.constrain(o,0,1):0}),_.isArrayOrTypedArray(ei.color)&&(s=function(i){return i.mlc}),_.isArrayOrTypedArray(ei.width)&&(N=function(i){return i.mlw});for(var eo=0;eo<i.length;eo++){var es=i[eo],el=es.fOut;if(el){var ec=el.properties;ec.fc=er(es.z),o&&(ec.mo=o(es)),s&&(ec.mlc=s(es)),N&&(ec.mlw=N(es)),es.ct=ec.ct,es._polygons=G.feature2polygons(el)}}var eu=o?{type:"identity",property:"mo"}:en.opacity;return _.extendFlat(J.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":eu}),_.extendFlat($.paint,{"line-color":s?{type:"identity",property:"mlc"}:ei.color,"line-width":N?{type:"identity",property:"mlw"}:ei.width,"line-opacity":eu}),J.layout.visibility="visible",$.layout.visibility="visible",ee.geojson={type:"FeatureCollection",features:et},convertOnSelect(i),ee},convertOnSelect:convertOnSelect}},22654:function(i,o,s){"use strict";var x=s(71828),_=s(1586),F=s(64496);i.exports=function(i,o,s,N){function coerce(s,_){return x.coerce(i,o,F,s,_)}var j=coerce("locations"),G=coerce("z"),Z=coerce("geojson");if(!x.isArrayOrTypedArray(j)||!j.length||!x.isArrayOrTypedArray(G)||!G.length||!("string"==typeof Z&&""!==Z||x.isPlainObject(Z))){o.visible=!1;return}coerce("featureidkey"),o._length=Math.min(j.length,G.length),coerce("below"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("marker.line.width")&&coerce("marker.line.color"),coerce("marker.opacity"),_(i,o,N,coerce,{prefix:"",cLetter:"z"}),x.coerceSelectionMarkerOpacity(o,coerce)}},57516:function(i,o,s){"use strict";i.exports={attributes:s(64496),supplyDefaults:s(22654),colorbar:s(61243),calc:s(38675),plot:s(7852),hoverPoints:s(42300),eventData:s(92069),selectPoints:s(81253),styleOnSelect:function(i,o){o&&o[0].trace._glTrace.updateOnSelect(o)},getBelow:function(i,o){for(var s=o.getMapLayers(),x=s.length-2;x>=0;x--){var _=s[x].id;if("string"==typeof _&&0===_.indexOf("water")){for(var F=x+1;F<s.length;F++)if("string"==typeof(_=s[F].id)&&-1===_.indexOf("plotly-"))return _}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:s(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(i,o,s){"use strict";var x=s(82004).convert,_=s(82004).convertOnSelect,F=s(77734).traceLayerPrefix;function ChoroplethMapbox(i,o){this.type="choroplethmapbox",this.subplot=i,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",F+o+"-fill"],["line",F+o+"-line"]],this.below=null}var N=ChoroplethMapbox.prototype;N.update=function(i){this._update(x(i)),i[0].trace._glTrace=this},N.updateOnSelect=function(i){this._update(_(i))},N._update=function(i){var o=this.subplot,s=this.layerList,x=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(i.geojson),x!==this.below&&(this._removeLayers(),this._addLayers(i,x),this.below=x);for(var _=0;_<s.length;_++){var F=s[_],N=F[0],j=F[1],G=i[N];o.setOptions(j,"setLayoutProperty",G.layout),"visible"===G.layout.visibility&&o.setOptions(j,"setPaintProperty",G.paint)}},N._addLayers=function(i,o){for(var s=this.subplot,x=this.layerList,_=this.sourceId,F=0;F<x.length;F++){var N=x[F],j=N[0],G=i[j];s.addLayer({type:j,id:N[1],source:_,layout:G.layout,paint:G.paint},o)}},N._removeLayers=function(){for(var i=this.subplot.map,o=this.layerList,s=o.length-1;s>=0;s--)i.removeLayer(o[s][1])},N.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},i.exports=function(i,o){var s=o[0].trace,_=new ChoroplethMapbox(i,s.uid),F=_.sourceId,N=x(o),j=_.below=i.belowLookup["trace-"+s.uid];return i.map.addSource(F,{type:"geojson",data:N.geojson}),_._addLayers(N,j),o[0].trace._glTrace=_,_}},12674:function(i,o,s){"use strict";var x=s(50693),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(2418),j=s(9012),G=s(1426).extendFlat,Z={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:F({editType:"calc"},{keys:["norm"]}),uhoverformat:_("u",1),vhoverformat:_("v",1),whoverformat:_("w",1),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),showlegend:G({},j.showlegend,{dflt:!1})};G(Z,x("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){Z[i]=N[i]}),Z.hoverinfo=G({},j.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),Z.transforms=void 0,i.exports=Z},31371:function(i,o,s){"use strict";var x=s(78803);i.exports=function(i,o){for(var s=o.u,_=o.v,F=o.w,N=Math.min(o.x.length,o.y.length,o.z.length,s.length,_.length,F.length),j=-1/0,G=1/0,Z=0;Z<N;Z++){var X=s[Z],J=_[Z],$=F[Z],ee=Math.sqrt(X*X+J*J+$*$);j=Math.max(j,ee),G=Math.min(G,ee)}o._len=N,o._normMax=j,x(i,o,{vals:[G,j],containerStr:"",cLetter:"c"})}},5453:function(i,o,s){"use strict";var x=s(9330).gl_cone3d,_=s(9330).gl_cone3d.createConeMesh,F=s(71828).simpleMap,N=s(81697).parseColorScale,j=s(21081).extractOpts,G=s(90060);function Cone(i,o){this.scene=i,this.uid=o,this.mesh=null,this.data=null}var Z=Cone.prototype;Z.handlePick=function(i){if(i.object===this.mesh){var o=i.index=i.data.index,s=this.data.x[o],x=this.data.y[o],_=this.data.z[o],F=this.data.u[o],N=this.data.v[o],j=this.data.w[o];i.traceCoordinate=[s,x,_,F,N,j,Math.sqrt(F*F+N*N+j*j)];var G=this.data.hovertext||this.data.text;return Array.isArray(G)&&void 0!==G[o]?i.textLabel=G[o]:G&&(i.textLabel=G),!0}};var X={xaxis:0,yaxis:1,zaxis:2},J={tip:1,tail:0,cm:.25,center:.5},$={tip:1,tail:1,cm:.75,center:.5};function convert(i,o){var s=i.fullSceneLayout,_=i.dataScale,Z={};function toDataCoords(i,o){var x=s[o],N=_[X[o]];return F(i,function(i){return x.d2l(i)*N})}Z.vectors=G(toDataCoords(o.u,"xaxis"),toDataCoords(o.v,"yaxis"),toDataCoords(o.w,"zaxis"),o._len),Z.positions=G(toDataCoords(o.x,"xaxis"),toDataCoords(o.y,"yaxis"),toDataCoords(o.z,"zaxis"),o._len);var ee=j(o);Z.colormap=N(o),Z.vertexIntensityBounds=[ee.min/o._normMax,ee.max/o._normMax],Z.coneOffset=J[o.anchor],"scaled"===o.sizemode?Z.coneSize=o.sizeref||.5:Z.coneSize=o.sizeref&&o._normMax?o.sizeref/o._normMax:.5;var et=x(Z),er=o.lightposition;return et.lightPosition=[er.x,er.y,er.z],et.ambient=o.lighting.ambient,et.diffuse=o.lighting.diffuse,et.specular=o.lighting.specular,et.roughness=o.lighting.roughness,et.fresnel=o.lighting.fresnel,et.opacity=o.opacity,o._pad=$[o.anchor]*et.vectorScale*et.coneScale*o._normMax,et}Z.update=function(i){this.data=i;var o=convert(this.scene,i);this.mesh.update(o)},Z.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=function(i,o){var s=_(i.glplot.gl,convert(i,o)),x=new Cone(i,o.uid);return x.mesh=s,x.data=o,s._trace=x,i.glplot.add(s),x}},91750:function(i,o,s){"use strict";var x=s(71828),_=s(1586),F=s(12674);i.exports=function(i,o,s,N){function coerce(s,_){return x.coerce(i,o,F,s,_)}var j=coerce("u"),G=coerce("v"),Z=coerce("w"),X=coerce("x"),J=coerce("y"),$=coerce("z");if(!j||!j.length||!G||!G.length||!Z||!Z.length||!X||!X.length||!J||!J.length||!$||!$.length){o.visible=!1;return}coerce("sizeref"),coerce("sizemode"),coerce("anchor"),coerce("lighting.ambient"),coerce("lighting.diffuse"),coerce("lighting.specular"),coerce("lighting.roughness"),coerce("lighting.fresnel"),coerce("lightposition.x"),coerce("lightposition.y"),coerce("lightposition.z"),_(i,o,N,coerce,{prefix:"",cLetter:"c"}),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("uhoverformat"),coerce("vhoverformat"),coerce("whoverformat"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},98128:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"cone",basePlotModule:s(58547),categories:["gl3d","showLegend"],attributes:s(12674),supplyDefaults:s(91750),colorbar:{min:"cmin",max:"cmax"},calc:s(31371),plot:s(5453),eventData:function(i,o){return i.norm=o.traceCoordinate[6],i},meta:{}}},70600:function(i,o,s){"use strict";var x=s(21606),_=s(82196),F=s(12663),N=F.axisHoverFormat,j=F.descriptionOnlyNumbers,G=s(50693),Z=s(79952).P,X=s(41940),J=s(1426).extendFlat,$=s(74808),ee=$.COMPARISON_OPS2,et=$.INTERVAL_OPS,er=_.line;i.exports=J({z:x.z,x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,text:x.text,hovertext:x.hovertext,transpose:x.transpose,xtype:x.xtype,ytype:x.ytype,xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z",1),hovertemplate:x.hovertemplate,texttemplate:J({},x.texttemplate,{}),textfont:J({},x.textfont,{}),hoverongaps:x.hoverongaps,connectgaps:J({},x.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:X({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:j("contour label")},operation:{valType:"enumerated",values:[].concat(ee).concat(et),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:J({},er.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:Z,smoothing:J({},er.smoothing,{}),editType:"plot"}},G("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(i,o,s){"use strict";var x=s(21081),_=s(90757),F=s(18670),N=s(53572);i.exports=function(i,o){var s,j=_(i,o),G=j[0].z;F(o,G);var Z=o.contours,X=x.extractOpts(o);if("heatmap"===Z.coloring&&X.auto&&!1===o.autocontour){var J=Z.start,$=N(Z),ee=Z.size||1,et=Math.floor(($-J)/ee)+1;isFinite(ee)||(ee=1,et=1);var er=J-ee/2,en=er+et*ee;s=[er,en]}else s=G;return x.calc(i,o,{vals:s,cLetter:"z"}),j}},20083:function(i){"use strict";i.exports=function(i,o){var s=i[0],x=s.z;switch(o.type){case"levels":var _=Math.min(x[0][0],x[0][1]);for(N=0;N<i.length;N++){var F=i[N];F.prefixBoundary=!F.edgepaths.length&&(_>F.level||F.starts.length&&_===F.level)}break;case"constraint":if(s.prefixBoundary=!1,s.edgepaths.length)return;var N,j,G,Z=s.x.length,X=s.y.length,J=-1/0,$=1/0;for(N=0;N<X;N++)$=Math.min($=Math.min($,x[N][0]),x[N][Z-1]),J=Math.max(J=Math.max(J,x[N][0]),x[N][Z-1]);for(N=1;N<Z-1;N++)$=Math.min($=Math.min($,x[0][N]),x[X-1][N]),J=Math.max(J=Math.max(J,x[0][N]),x[X-1][N]);var ee=o.value;switch(o._operation){case">":ee>J&&(s.prefixBoundary=!0);break;case"<":(ee<$||s.starts.length&&ee===$)&&(s.prefixBoundary=!0);break;case"[]":j=Math.min(ee[0],ee[1]),((G=Math.max(ee[0],ee[1]))<$||j>J||s.starts.length&&G===$)&&(s.prefixBoundary=!0);break;case"][":j=Math.min(ee[0],ee[1]),G=Math.max(ee[0],ee[1]),j<$&&G>J&&(s.prefixBoundary=!0)}}}},90654:function(i,o,s){"use strict";var x=s(21081),_=s(86068),F=s(53572);i.exports={min:"zmin",max:"zmax",calc:function(i,o,s){var N=o.contours,j=o.line,G=N.size||1,Z=N.coloring,X=_(o,{isColorbar:!0});if("heatmap"===Z){var J=x.extractOpts(o);s._fillgradient=J.reversescale?x.flipScale(J.colorscale):J.colorscale,s._zrange=[J.min,J.max]}else"fill"===Z&&(s._fillcolor=X);s._line={color:"lines"===Z?X:j.color,width:!1!==N.showlines?j.width:0,dash:j.dash},s._levels={start:N.start,end:F(N),size:G}}}},36914:function(i){"use strict";i.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(i,o,s){"use strict";var x=s(92770),_=s(14523),F=s(7901),N=F.addOpacity,j=F.opacity,G=s(74808),Z=G.CONSTRAINT_REDUCTION,X=G.COMPARISON_OPS2;i.exports=function(i,o,s,F,G,J){var $,ee,et,er,en=o.contours,ei=s("contours.operation");en._operation=Z[ei],-1===X.indexOf(en.operation)?(s("contours.value",[0,1]),Array.isArray(en.value)?en.value.length>2?en.value=en.value.slice(2):0===en.length?en.value=[0,1]:en.length<2?($=parseFloat(en.value[0]),en.value=[$,$+1]):en.value=[parseFloat(en.value[0]),parseFloat(en.value[1])]:x(en.value)&&($=parseFloat(en.value),en.value=[$,$+1])):(s("contours.value",0),x(en.value)||(Array.isArray(en.value)?en.value=parseFloat(en.value[0]):en.value=0)),"="===ei?ee=en.showlines=!0:(ee=s("contours.showlines"),er=s("fillcolor",N((i.line||{}).color||G,.5))),ee&&(et=s("line.color",er&&j(er)?N(o.fillcolor,1):G),s("line.width",2),s("line.dash")),s("line.smoothing"),_(s,F,et,J)}},64237:function(i,o,s){"use strict";var x=s(74808),_=s(92770);function coerceValue(i,o){var s,F=Array.isArray(o);function coerce(i){return _(i)?+i:null}return -1!==x.COMPARISON_OPS2.indexOf(i)?s=coerce(F?o[0]:o):-1!==x.INTERVAL_OPS.indexOf(i)?s=F?[coerce(o[0]),coerce(o[1])]:[coerce(o),coerce(o)]:-1!==x.SET_OPS.indexOf(i)&&(s=F?o.map(coerce):[coerce(o)]),s}function makeRangeSettings(i){return function(o){var s=Math.min((o=coerceValue(i,o))[0],o[1]),x=Math.max(o[0],o[1]);return{start:s,end:x,size:x-s}}}function makeInequalitySettings(i){return function(o){return{start:o=coerceValue(i,o),end:1/0,size:1/0}}}i.exports={"[]":makeRangeSettings("[]"),"][":makeRangeSettings("]["),">":makeInequalitySettings(">"),"<":makeInequalitySettings("<"),"=":makeInequalitySettings("=")}},67217:function(i){"use strict";i.exports=function(i,o,s,x){var _=x("contours.start"),F=x("contours.end"),N=s("contours.size");((!1===_||!1===F?o.autocontour=!0:s("autocontour",!1))||!N)&&s("ncontours")}},84857:function(i,o,s){"use strict";var x=s(71828);function copyPathinfo(i){return x.extendFlat({},i,{edgepaths:x.extendDeep([],i.edgepaths),paths:x.extendDeep([],i.paths),starts:x.extendDeep([],i.starts)})}i.exports=function(i,o){var s,_,F,op0=function(i){return i.reverse()},op1=function(i){return i};switch(o){case"=":case"<":return i;case">":for(1!==i.length&&x.warn("Contour data invalid for the specified inequality operation."),_=i[0],s=0;s<_.edgepaths.length;s++)_.edgepaths[s]=op0(_.edgepaths[s]);for(s=0;s<_.paths.length;s++)_.paths[s]=op0(_.paths[s]);for(s=0;s<_.starts.length;s++)_.starts[s]=op0(_.starts[s]);return i;case"][":var N=op0;op0=op1,op1=N;case"[]":for(2!==i.length&&x.warn("Contour data invalid for the specified inequality range operation."),_=copyPathinfo(i[0]),F=copyPathinfo(i[1]),s=0;s<_.edgepaths.length;s++)_.edgepaths[s]=op0(_.edgepaths[s]);for(s=0;s<_.paths.length;s++)_.paths[s]=op0(_.paths[s]);for(s=0;s<_.starts.length;s++)_.starts[s]=op0(_.starts[s]);for(;F.edgepaths.length;)_.edgepaths.push(op1(F.edgepaths.shift()));for(;F.paths.length;)_.paths.push(op1(F.paths.shift()));for(;F.starts.length;)_.starts.push(op1(F.starts.shift()));return[_]}}},13031:function(i,o,s){"use strict";var x=s(71828),_=s(67684),F=s(73927),N=s(83179),j=s(67217),G=s(8724),Z=s(58623),X=s(70600);i.exports=function(i,o,s,J){function coerce(s,_){return x.coerce(i,o,X,s,_)}if(!_(i,o,coerce,J)){o.visible=!1;return}F(i,o,J,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("text"),coerce("hovertext"),coerce("hoverongaps"),coerce("hovertemplate");var $="constraint"===coerce("contours.type");coerce("connectgaps",x.isArray1D(o.z)),$?N(i,o,coerce,J,s):(j(i,o,coerce,function(s){return x.coerce2(i,o,X,s)}),G(i,o,coerce,J)),o.contours&&"heatmap"===o.contours.coloring&&Z(coerce,J)}},87558:function(i,o,s){"use strict";var x=s(71828),_=s(64237),F=s(53572);i.exports=function(i,o,s){for(var N="constraint"===i.type?_[i._operation](i.value):i,j=N.size,G=[],Z=F(N),X=s.trace._carpetTrace,J=X?{xaxis:X.aaxis,yaxis:X.baxis,x:s.a,y:s.b}:{xaxis:o.xaxis,yaxis:o.yaxis,x:s.x,y:s.y},$=N.start;$<Z;$+=j)if(G.push(x.extendFlat({level:$,crossings:{},starts:[],edgepaths:[],paths:[],z:s.z,smoothing:s.trace.line.smoothing},J)),G.length>1e3){x.warn("Too many contours, clipping at 1000",i);break}return G}},53572:function(i){"use strict";i.exports=function(i){return i.end+i.size/1e6}},81696:function(i,o,s){"use strict";var x=s(71828),_=s(36914);function equalPts(i,o,s,x){return Math.abs(i[0]-o[0])<s&&Math.abs(i[1]-o[1])<x}function makePath(i,o,s,F,N){var j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu=o.join(","),ef=i.crossings[eu],eh=(G=0,Z=0,(j=ef)>20&&s?208===j||1114===j?G=0===o[0]?1:-1:Z=0===o[1]?1:-1:-1!==_.BOTTOMSTART.indexOf(j)?Z=1:-1!==_.LEFTSTART.indexOf(j)?G=1:-1!==_.TOPSTART.indexOf(j)?Z=-1:G=-1,[G,Z]),ed=[getInterpPx(i,o,[-eh[0],-eh[1]])],ep=i.z.length,eg=i.z[0].length,em=o.slice(),ey=eh.slice();for(X=0;X<1e4;X++){if(ef>20?(ef=_.CHOOSESADDLE[ef][0>(eh[0]||eh[1])?0:1],i.crossings[eu]=_.SADDLEREMAINDER[ef]):delete i.crossings[eu],!(eh=_.NEWDELTA[ef])){x.log("Found bad marching index:",ef,o,i.level);break}ed.push(getInterpPx(i,o,eh)),o[0]+=eh[0],o[1]+=eh[1],eu=o.join(","),equalPts(ed[ed.length-1],ed[ed.length-2],F,N)&&ed.pop();var ev=eh[0]&&(o[0]<0||o[0]>eg-2)||eh[1]&&(o[1]<0||o[1]>ep-2);if(o[0]===em[0]&&o[1]===em[1]&&eh[0]===ey[0]&&eh[1]===ey[1]||s&&ev)break;ef=i.crossings[eu]}1e4===X&&x.log("Infinite loop in contour?");var ex=equalPts(ed[0],ed[ed.length-1],F,N),e_=0,ew=.2*i.smoothing,eT=[],ek=0;for(X=1;X<ed.length;X++)e_+=ei=function(i,o){var s=i[2]-o[2],x=i[3]-o[3];return Math.sqrt(s*s+x*x)}(ed[X],ed[X-1]),eT.push(ei);var eA=e_/eT.length*ew;function getpt(i){return ed[i%ed.length]}for(X=ed.length-2;X>=ek;X--)if((J=eT[X])<eA){for(ee=0,$=X-1;$>=ek&&J+eT[$]<eA;$--)J+=eT[$];if(ex&&X===ed.length-2)for(ee=0;ee<$&&J+eT[ee]<eA;ee++)J+=eT[ee];er=X-$+ee+1,en=Math.floor((X+$+ee+2)/2),et=ex||X!==ed.length-2?ex||-1!==$?er%2?getpt(en):[(getpt(en)[0]+getpt(en+1)[0])/2,(getpt(en)[1]+getpt(en+1)[1])/2]:ed[0]:ed[ed.length-1],ed.splice($+1,X-$+1,et),X=$+1,ee&&(ek=ee),ex&&(X===ed.length-2?ed[ee]=ed[ed.length-1]:0===X&&(ed[ed.length-1]=ed[0]))}for(ed.splice(0,ek),X=0;X<ed.length;X++)ed[X].length=2;if(!(ed.length<2)){if(ex)ed.pop(),i.paths.push(ed);else{s||x.log("Unclosed interior contour?",i.level,em.join(","),ed.join("L"));var eS=!1;for(eo=0;eo<i.edgepaths.length;eo++)if(el=i.edgepaths[eo],!eS&&equalPts(el[0],ed[ed.length-1],F,N)){ed.pop(),eS=!0;var eM=!1;for(es=0;es<i.edgepaths.length;es++)if(equalPts((ec=i.edgepaths[es])[ec.length-1],ed[0],F,N)){eM=!0,ed.shift(),i.edgepaths.splice(eo,1),es===eo?i.paths.push(ed.concat(ec)):(es>eo&&es--,i.edgepaths[es]=ec.concat(ed,el));break}eM||(i.edgepaths[eo]=ed.concat(el))}for(eo=0;eo<i.edgepaths.length&&!eS;eo++)equalPts((el=i.edgepaths[eo])[el.length-1],ed[0],F,N)&&(ed.shift(),i.edgepaths[eo]=el.concat(ed),eS=!0);eS||i.edgepaths.push(ed)}}}function getInterpPx(i,o,s){var x=o[0]+Math.max(s[0],0),_=o[1]+Math.max(s[1],0),F=i.z[_][x],N=i.xaxis,j=i.yaxis;if(s[1]){var G=(i.level-F)/(i.z[_][x+1]-F),Z=(1!==G?(1-G)*N.c2l(i.x[x]):0)+(0!==G?G*N.c2l(i.x[x+1]):0);return[N.c2p(N.l2c(Z),!0),j.c2p(i.y[_],!0),x+G,_]}var X=(i.level-F)/(i.z[_+1][x]-F),J=(1!==X?(1-X)*j.c2l(i.y[_]):0)+(0!==X?X*j.c2l(i.y[_+1]):0);return[N.c2p(i.x[x],!0),j.c2p(j.l2c(J),!0),x,_+X]}i.exports=function(i,o,s){var _,F,N,j,G;for(N=0,o=o||.01,s=s||.01;N<i.length;N++){for(G=0,j=i[N];G<j.starts.length;G++)F=j.starts[G],makePath(j,F,"edge",o,s);for(_=0;Object.keys(j.crossings).length&&_<1e4;)_++,F=Object.keys(j.crossings)[0].split(",").map(Number),makePath(j,F,void 0,o,s);1e4===_&&x.log("Infinite loop in contour?")}}},52421:function(i,o,s){"use strict";var x=s(7901),_=s(46248);i.exports=function(i,o,s,F,N){N||(N={}),N.isContour=!0;var j=_(i,o,s,F,N);return j&&j.forEach(function(i){var o=i.trace;"constraint"===o.contours.type&&(o.fillcolor&&x.opacity(o.fillcolor)?i.color=x.addOpacity(o.fillcolor,1):o.contours.showlines&&x.opacity(o.line.color)&&(i.color=x.addOpacity(o.line.color,1)))}),j}},99442:function(i,o,s){"use strict";i.exports={attributes:s(70600),supplyDefaults:s(13031),calc:s(27529),plot:s(29854).plot,style:s(84426),colorbar:s(90654),hoverPoints:s(52421),moduleType:"trace",name:"contour",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o,s,_){if(_||(_={}),i("contours.showlabels")){var F=o.font;x.coerceFont(i,"contours.labelfont",{family:F.family,size:F.size,color:s}),i("contours.labelformat")}!1!==_.hasHover&&i("zhoverformat")}},86068:function(i,o,s){"use strict";var x=s(39898),_=s(21081),F=s(53572);i.exports=function(i){var o,s,N=i.contours,j=N.start,G=F(N),Z=N.size||1,X=Math.floor((G-j)/Z)+1,J="lines"===N.coloring?0:1,$=_.extractOpts(i);isFinite(Z)||(Z=1,X=1);var ee=$.reversescale?_.flipScale($.colorscale):$.colorscale,et=ee.length,er=Array(et),en=Array(et),ei=$.min,eo=$.max;if("heatmap"===N.coloring){for(s=0;s<et;s++)o=ee[s],er[s]=o[0]*(eo-ei)+ei,en[s]=o[1];var es=x.extent([ei,eo,N.start,N.start+Z*(X-1)]),el=es[ei<eo?0:1],ec=es[ei<eo?1:0];el!==ei&&(er.splice(0,0,el),en.splice(0,0,en[0])),ec!==eo&&(er.push(ec),en.push(en[en.length-1]))}else{var eu=i._input&&"number"==typeof i._input.zmin&&"number"==typeof i._input.zmax;for(eu&&(j<=ei||G>=eo)&&(j<=ei&&(j=ei),G>=eo&&(G=eo),X=Math.floor((G-j)/Z)+1,J=0),s=0;s<et;s++)o=ee[s],er[s]=(o[0]*(X+J-1)-J/2)*Z+j,en[s]=o[1];(eu||i.autocontour)&&(er[0]>ei&&(er.unshift(ei),en.unshift(en[0])),er[er.length-1]<eo&&(er.push(eo),en.push(en[en.length-1])))}return _.makeColorScaleFunc({domain:er,range:en},{noNumericCheck:!0})}},87678:function(i,o,s){"use strict";var x=s(36914);i.exports=function(i){var o,s,_,F,N,j,G,Z,X,J=i[0].z,$=J.length,ee=J[0].length,et=2===$||2===ee;for(s=0;s<$-1;s++)for(F=[],0===s&&(F=F.concat(x.BOTTOMSTART)),s===$-2&&(F=F.concat(x.TOPSTART)),o=0;o<ee-1;o++)for(_=F.slice(),0===o&&(_=_.concat(x.LEFTSTART)),o===ee-2&&(_=_.concat(x.RIGHTSTART)),N=o+","+s,j=[[J[s][o],J[s][o+1]],[J[s+1][o],J[s+1][o+1]]],X=0;X<i.length;X++)(G=function(i,o){var s=(o[0][0]>i?0:1)+(o[0][1]>i?0:2)+(o[1][1]>i?0:4)+(o[1][0]>i?0:8);return 5===s||10===s?i>(o[0][0]+o[0][1]+o[1][0]+o[1][1])/4?5===s?713:1114:5===s?104:208:15===s?0:s}((Z=i[X]).level,j))&&(Z.crossings[N]=G,-1!==_.indexOf(G)&&(Z.starts.push([o,s]),et&&-1!==_.indexOf(G,_.indexOf(G)+1)&&Z.starts.push([o,s])))}},29854:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(21081),j=s(63893),G=s(89298),Z=s(21994),X=s(50347),J=s(87678),$=s(81696),ee=s(87558),et=s(84857),er=s(20083),en=s(36914),ei=en.LABELOPTIMIZER;function joinAllPaths(i,o){var s,x,N,j,G,Z,X="",J=0,$=i.edgepaths.map(function(i,o){return o}),ee=!0;function isright(i){return .01>Math.abs(i[0]-o[2][0])}for(;$.length;){for(Z=F.smoothopen(i.edgepaths[J],i.smoothing),X+=ee?Z:Z.replace(/^M/,"L"),$.splice($.indexOf(J),1),s=i.edgepaths[J][i.edgepaths[J].length-1],j=-1,N=0;N<4;N++){if(!s){_.log("Missing end?",J,i);break}for(.01>Math.abs(s[1]-o[0][1])&&!isright(s)?x=o[1]:.01>Math.abs(s[0]-o[0][0])?x=o[0]:.01>Math.abs(s[1]-o[2][1])?x=o[3]:isright(s)&&(x=o[2]),G=0;G<i.edgepaths.length;G++){var et=i.edgepaths[G][0];.01>Math.abs(s[0]-x[0])?.01>Math.abs(s[0]-et[0])&&(et[1]-s[1])*(x[1]-et[1])>=0&&(x=et,j=G):.01>Math.abs(s[1]-x[1])?.01>Math.abs(s[1]-et[1])&&(et[0]-s[0])*(x[0]-et[0])>=0&&(x=et,j=G):_.log("endpt to newendpt is not vert. or horz.",s,x,et)}if(s=x,j>=0)break;X+="L"+x}if(j===i.edgepaths.length){_.log("unclosed perimeter path");break}J=j,(ee=-1===$.indexOf(J))&&(J=$[0],X+="Z")}for(J=0;J<i.paths.length;J++)X+=F.smoothclosed(i.paths[J],i.smoothing);return X}o.plot=function(i,s,N,j){var G=s.xaxis,Z=s.yaxis;_.makeTraceGroups(j,N,"contour").each(function(N){var j,ei,eo,es,el,ec=x.select(this),eu=N[0],ef=eu.trace,eh=eu.x,ed=eu.y,ep=ef.contours,eg=ee(ep,s,eu),em=_.ensureSingle(ec,"g","heatmapcoloring"),ey=[];"heatmap"===ep.coloring&&(ey=[N]),X(i,s,ey,em),J(eg),$(eg);var ev=G.c2p(eh[0],!0),ex=G.c2p(eh[eh.length-1],!0),e_=Z.c2p(ed[0],!0),ew=Z.c2p(ed[ed.length-1],!0),eT=[[ev,ew],[ex,ew],[ex,e_],[ev,e_]],ek=eg;"constraint"===ep.type&&(ek=et(eg,ep._operation)),(j=_.ensureSingle(ec,"g","contourbg").selectAll("path").data("fill"===ep.coloring?[0]:[])).enter().append("path"),j.exit().remove(),j.attr("d","M"+eT.join("L")+"Z").style("stroke","none"),ei=ek,eo="fill"===ep.coloring||"constraint"===ep.type&&"="!==ep._operation,es="M"+eT.join("L")+"Z",eo&&er(ei,ep),(el=_.ensureSingle(ec,"g","contourfill").selectAll("path").data(eo?ei:[])).enter().append("path"),el.exit().remove(),el.each(function(i){var o=(i.prefixBoundary?es:"")+joinAllPaths(i,eT);o?x.select(this).attr("d",o).style("stroke","none"):x.select(this).remove()}),function(i,s,N,j,G){var Z=N._context.staticPlot,X=_.ensureSingle(i,"g","contourlines"),J=!1!==G.showlines,$=G.showlabels,ee=J&&$,et=o.createLines(X,J||$,s,Z),er=o.createLineClip(X,ee,N,j.trace.uid),ei=i.selectAll("g.contourlabels").data($?[0]:[]);if(ei.exit().remove(),ei.enter().append("g").classed("contourlabels",!0),$){var eo=[],es=[];_.clearLocationCache();var el=o.labelFormatter(N,j),ec=F.tester.append("text").attr("data-notex",1).call(F.font,G.labelfont),eu=s[0].xaxis,ef=s[0].yaxis,eh=eu._length,ed=ef._length,ep=eu.range,eg=ef.range,em=_.aggNums(Math.min,null,j.x),ey=_.aggNums(Math.max,null,j.x),ev=_.aggNums(Math.min,null,j.y),ex=_.aggNums(Math.max,null,j.y),e_=Math.max(eu.c2p(em,!0),0),ew=Math.min(eu.c2p(ey,!0),eh),eT=Math.max(ef.c2p(ex,!0),0),ek=Math.min(ef.c2p(ev,!0),ed),eA={};ep[0]<ep[1]?(eA.left=e_,eA.right=ew):(eA.left=ew,eA.right=e_),eg[0]<eg[1]?(eA.top=eT,eA.bottom=ek):(eA.top=ek,eA.bottom=eT),eA.middle=(eA.top+eA.bottom)/2,eA.center=(eA.left+eA.right)/2,eo.push([[eA.left,eA.top],[eA.right,eA.top],[eA.right,eA.bottom],[eA.left,eA.bottom]]);var eS=Math.sqrt(eh*eh+ed*ed),eM=en.LABELDISTANCE*eS/Math.max(1,s.length/en.LABELINCREASE);et.each(function(i){var s=o.calcTextOpts(i.level,el,ec,N);x.select(this).selectAll("path").each(function(){var i=_.getVisibleSegment(this,eA,s.height/2);if(i&&!(i.len<(s.width+s.height)*en.LABELMIN))for(var x=Math.min(Math.ceil(i.len/eM),en.LABELMAX),F=0;F<x;F++){var N=o.findBestTextLocation(this,i,s,es,eA);if(!N)break;o.addLabelData(N,s,es,eo)}})}),ec.remove(),o.drawLabels(ei,es,N,er,ee?eo:null)}$&&!J&&et.remove()}(ec,eg,i,eu,ep),function(i,o,s,x,N){var j=x.trace,G=s._fullLayout._clips,Z="clip"+j.uid,X=G.selectAll("#"+Z).data(j.connectgaps?[]:[0]);if(X.enter().append("clipPath").classed("contourclip",!0).attr("id",Z),X.exit().remove(),!1===j.connectgaps){var ee={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:o.xaxis,yaxis:o.yaxis,x:x.x,y:x.y,z:function(i){var o,s,x=i.trace._emptypoints,_=[],F=i.z.length,N=i.z[0].length,j=[];for(o=0;o<N;o++)j.push(1);for(o=0;o<F;o++)_.push(j.slice());for(o=0;o<x.length;o++)_[(s=x[o])[0]][s[1]]=0;return i.zmask=_,_}(x),smoothing:0};J([ee]),$([ee]),er([ee],{type:"levels"}),_.ensureSingle(X,"path","").attr("d",(ee.prefixBoundary?"M"+N.join("L")+"Z":"")+joinAllPaths(ee,N))}else Z=null;F.setClipUrl(i,Z,s)}(ec,s,i,eu,eT)})},o.createLines=function(i,o,s,x){var _=s[0].smoothing,N=i.selectAll("g.contourlevel").data(o?s:[]);if(N.exit().remove(),N.enter().append("g").classed("contourlevel",!0),o){var j=N.selectAll("path.openline").data(function(i){return i.pedgepaths||i.edgepaths});j.exit().remove(),j.enter().append("path").classed("openline",!0),j.attr("d",function(i){return F.smoothopen(i,_)}).style("stroke-miterlimit",1).style("vector-effect",x?"none":"non-scaling-stroke");var G=N.selectAll("path.closedline").data(function(i){return i.ppaths||i.paths});G.exit().remove(),G.enter().append("path").classed("closedline",!0),G.attr("d",function(i){return F.smoothclosed(i,_)}).style("stroke-miterlimit",1).style("vector-effect",x?"none":"non-scaling-stroke")}return N},o.createLineClip=function(i,o,s,x){var _=s._fullLayout._clips,N=o?"clipline"+x:null,j=_.selectAll("#"+N).data(o?[0]:[]);return j.exit().remove(),j.enter().append("clipPath").classed("contourlineclip",!0).attr("id",N),F.setClipUrl(i,N,s),j},o.labelFormatter=function(i,o){var s=i._fullLayout,x=o.trace,_=x.contours,F={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(_.labelformat)F.tickformat=_.labelformat,Z(F,s);else{var j=N.extractOpts(x);if(j&&j.colorbar&&j.colorbar._axis)F=j.colorbar._axis;else{if("constraint"===_.type){var X=_.value;Array.isArray(X)?F.range=[X[0],X[X.length-1]]:F.range=[X,X]}else F.range=[_.start,_.end],F.nticks=(_.end-_.start)/_.size;F.range[0]===F.range[1]&&(F.range[1]+=F.range[0]||1),F.nticks||(F.nticks=1e3),Z(F,s),G.prepTicks(F),F._tmin=null,F._tmax=null}}return function(i){return G.tickText(F,i).text}},o.calcTextOpts=function(i,o,s,x){var _=o(i);s.text(_).call(j.convertToTspans,x);var N=s.node(),G=F.bBox(N,!0);return{text:_,width:G.width,height:G.height,fontSize:+N.style["font-size"].replace("px",""),level:i,dy:(G.top+G.bottom)/2}},o.findBestTextLocation=function(i,o,s,x,F){var N,j,G,Z,X,J=s.width;o.isClosed?(j=o.len/ei.INITIALSEARCHPOINTS,N=o.min+j/2,G=o.max):(j=(o.len-J)/(ei.INITIALSEARCHPOINTS+1),N=o.min+j+J/2,G=o.max-(j+J)/2);for(var $=1/0,ee=0;ee<ei.ITERATIONS;ee++){for(var et=N;et<G;et+=j){var er=_.getTextLocation(i,o.total,et,J),en=function(i,o,s,x){var F=o.width/2,N=o.height/2,j=i.x,G=i.y,Z=i.theta,X=Math.cos(Z)*F,J=Math.sin(Z)*F,$=(j>x.center?x.right-j:j-x.left)/(X+Math.abs(Math.sin(Z)*N)),ee=(G>x.middle?x.bottom-G:G-x.top)/(Math.abs(J)+Math.cos(Z)*N);if($<1||ee<1)return 1/0;var et=ei.EDGECOST*(1/($-1)+1/(ee-1));et+=ei.ANGLECOST*Z*Z;for(var er=j-X,en=G-J,eo=j+X,es=G+J,el=0;el<s.length;el++){var ec=s[el],eu=Math.cos(ec.theta)*ec.width/2,ef=Math.sin(ec.theta)*ec.width/2,eh=2*_.segmentDistance(er,en,eo,es,ec.x-eu,ec.y-ef,ec.x+eu,ec.y+ef)/(o.height+ec.height),ed=ec.level===o.level,ep=ed?ei.SAMELEVELDISTANCE:1;if(eh<=ep)return 1/0;et+=ei.NEIGHBORCOST*(ed?ei.SAMELEVELFACTOR:1)/(eh-ep)}return et}(er,s,x,F);en<$&&($=en,X=er,Z=et)}if($>2*ei.MAXCOST)break;ee&&(j/=2),G=(N=Z-j/2)+1.5*j}if($<=ei.MAXCOST)return X},o.addLabelData=function(i,o,s,x){var _=o.fontSize,F=o.width+_/3,N=Math.max(0,o.height-_/3),j=i.x,G=i.y,Z=i.theta,X=Math.sin(Z),J=Math.cos(Z),rotateXY=function(i,o){return[j+i*J-o*X,G+i*X+o*J]},$=[rotateXY(-F/2,-N/2),rotateXY(-F/2,N/2),rotateXY(F/2,N/2),rotateXY(F/2,-N/2)];s.push({text:o.text,x:j,y:G,dy:o.dy,theta:Z,level:o.level,width:F,height:N}),x.push($)},o.drawLabels=function(i,o,s,F,N){var G=i.selectAll("text").data(o,function(i){return i.text+","+i.x+","+i.y+","+i.theta});if(G.exit().remove(),G.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(i){var o=i.x+Math.sin(i.theta)*i.dy,_=i.y-Math.cos(i.theta)*i.dy;x.select(this).text(i.text).attr({x:o,y:_,transform:"rotate("+180*i.theta/Math.PI+" "+o+" "+_+")"}).call(j.convertToTspans,s)}),N){for(var Z="",X=0;X<N.length;X++)Z+="M"+N[X].join("L")+"Z";_.ensureSingle(F,"path","").attr("d",Z)}}},18670:function(i,o,s){"use strict";var x=s(89298),_=s(71828);function autoContours(i,o,s){var _={type:"linear",range:[i,o]};return x.autoTicks(_,(o-i)/(s||15)),_}i.exports=function(i,o){var s=i.contours;if(i.autocontour){var F=i.zmin,N=i.zmax;(i.zauto||void 0===F)&&(F=_.aggNums(Math.min,null,o)),(i.zauto||void 0===N)&&(N=_.aggNums(Math.max,null,o));var j=autoContours(F,N,i.ncontours);s.size=j.dtick,s.start=x.tickFirst(j),j.range.reverse(),s.end=x.tickFirst(j),s.start===F&&(s.start+=s.size),s.end===N&&(s.end-=s.size),s.start>s.end&&(s.start=s.end=(s.start+s.end)/2),i._input.contours||(i._input.contours={}),_.extendFlat(i._input.contours,{start:s.start,end:s.end,size:s.size}),i._input.autocontour=!0}else if("constraint"!==s.type){var G,Z=s.start,X=s.end,J=i._input.contours;Z>X&&(s.start=J.start=X,X=s.end=J.end=Z,Z=s.start),s.size>0||(G=Z===X?1:autoContours(Z,X,i.ncontours).dtick,J.size=s.size=G)}}},84426:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(70035),N=s(86068);i.exports=function(i){var o=x.select(i).selectAll("g.contour");o.style("opacity",function(i){return i[0].trace.opacity}),o.each(function(i){var o,s=x.select(this),F=i[0].trace,j=F.contours,G=F.line,Z=j.size||1,X=j.start,J="constraint"===j.type,$=!J&&"lines"===j.coloring,ee=!J&&"fill"===j.coloring,et=$||ee?N(F):null;s.selectAll("g.contourlevel").each(function(i){x.select(this).selectAll("path").call(_.lineGroupStyle,G.width,$?et(i.level):G.color,G.dash)});var er=j.labelfont;s.selectAll("g.contourlabels text").each(function(i){_.font(x.select(this),{family:er.family,size:er.size,color:er.color||($?et(i.level):G.color)})}),J?s.selectAll("g.contourfill path").style("fill",F.fillcolor):ee&&(s.selectAll("g.contourfill path").style("fill",function(i){return void 0===o&&(o=i.level),et(i.level+.5*Z)}),void 0===o&&(o=X),s.selectAll("g.contourbg path").style("fill",et(o-.5*Z)))}),F(i)}},8724:function(i,o,s){"use strict";var x=s(1586),_=s(14523);i.exports=function(i,o,s,F,N){var j,G=s("contours.coloring"),Z="";"fill"===G&&(j=s("contours.showlines")),!1!==j&&("lines"!==G&&(Z=s("line.color","#000")),s("line.width",.5),s("line.dash")),"none"!==G&&(!0!==i.showlegend&&(o.showlegend=!1),o._dfltShowLegend=!1,x(i,o,F,s,{prefix:"",cLetter:"z"})),s("line.smoothing"),_(s,F,Z,N)}},88085:function(i,o,s){"use strict";var x=s(21606),_=s(70600),F=s(50693),N=s(1426).extendFlat,j=_.contours;i.exports=N({carpet:{valType:"string",editType:"calc"},z:x.z,a:x.x,a0:x.x0,da:x.dx,b:x.y,b0:x.y0,db:x.dy,text:x.text,hovertext:x.hovertext,transpose:x.transpose,atype:x.xtype,btype:x.ytype,fillcolor:_.fillcolor,autocontour:_.autocontour,ncontours:_.ncontours,contours:{type:j.type,start:j.start,end:j.end,size:j.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:j.showlines,showlabels:j.showlabels,labelfont:j.labelfont,labelformat:j.labelformat,operation:j.operation,value:j.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:_.line.color,width:_.line.width,dash:_.line.dash,smoothing:_.line.smoothing,editType:"plot"},transforms:void 0},F("",{cLetter:"z",autoColorDflt:!1}))},59885:function(i,o,s){"use strict";var x=s(78803),_=s(71828),F=s(68296),N=s(4742),j=s(824),G=s(43907),Z=s(70769),X=s(75005),J=s(22882),$=s(18670);i.exports=function(i,o){var s=o._carpetTrace=J(i,o);if(s&&s.visible&&"legendonly"!==s.visible){if(!o.a||!o.b){var ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em=i.data[s.index],ey=i.data[o.index];ey.a||(ey.a=em.a),ey.b||(ey.b=em.b),X(ey,o,o._defaultColor,i._fullLayout)}var ev=(ec=(el=o._carpetTrace).aaxis,eu=el.baxis,ec._minDtick=0,eu._minDtick=0,_.isArray1D(o.z)&&F(o,ec,eu,"a","b",["z"]),ee=o._a=o._a||o.a,en=o._b=o._b||o.b,ee=ee?ec.makeCalcdata(o,"_a"):[],en=en?eu.makeCalcdata(o,"_b"):[],et=o.a0||0,er=o.da||1,ei=o.b0||0,eo=o.db||1,es=o._z=N(o._z||o.z,o.transpose),o._emptypoints=G(es),j(es,o._emptypoints),ef=_.maxRowLength(es),eh="scaled"===o.xtype?"":ee,ed=Z(o,eh,et,er,ef,ec),ep="scaled"===o.ytype?"":en,eg=Z(o,ep,ei,eo,es.length,eu),"levels"===o.contours.type&&"none"!==o.contours.coloring&&x(i,o,{vals:es,containerStr:"",cLetter:"z"}),[{a:ed,b:eg,z:es}]);return $(o,o._z),ev}}},75005:function(i,o,s){"use strict";var x=s(71828),_=s(67684),F=s(88085),N=s(83179),j=s(67217),G=s(8724);i.exports=function(i,o,s,Z){function coerce(s,_){return x.coerce(i,o,F,s,_)}if(coerce("carpet"),i.a&&i.b){if(!_(i,o,coerce,Z,"a","b")){o.visible=!1;return}coerce("text"),"constraint"===coerce("contours.type")?N(i,o,coerce,Z,s,{hasHover:!1}):(j(i,o,coerce,function(s){return x.coerce2(i,o,F,s)}),G(i,o,coerce,Z,{hasHover:!1}))}else o._defaultColor=s,o._length=null}},93740:function(i,o,s){"use strict";i.exports={attributes:s(88085),supplyDefaults:s(75005),colorbar:s(90654),calc:s(59885),plot:s(51048),style:s(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:s(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(i,o,s){"use strict";var x=s(39898),_=s(27669),F=s(67961),N=s(91424),j=s(71828),G=s(87678),Z=s(81696),X=s(29854),J=s(36914),$=s(84857),ee=s(87558),et=s(20083),er=s(22882),en=s(4536);function getUnitVector(i,o,s){var x=i.getPointAtLength(o),_=i.getPointAtLength(s),F=_.x-x.x,N=_.y-x.y,j=Math.sqrt(F*F+N*N);return[F/j,N/j]}function normalizeVector(i){var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/o,i[1]/o]}function vectorTan(i,o){var s=Math.abs(i[0]*o[0]+i[1]*o[1]);return Math.sqrt(1-s*s)/s}i.exports=function(i,o,s,ei){var eo=o.xaxis,es=o.yaxis;j.makeTraceGroups(ei,s,"contour").each(function(s){var ei,el,ec,eu,ef=x.select(this),eh=s[0],ed=eh.trace,ep=ed._carpetTrace=er(i,ed),eg=i.calcdata[ep.index][0];if(ep.visible&&"legendonly"!==ep.visible){var em,ey,ev,ex=eh.a,e_=eh.b,ew=ed.contours,eT=ee(ew,o,eh),ek="constraint"===ew.type,eA=ew._operation,eS=ek?"="===eA?"lines":"fill":ew.coloring,eM=[[ex[0],e_[e_.length-1]],[ex[ex.length-1],e_[e_.length-1]],[ex[ex.length-1],e_[0]],[ex[0],e_[0]]];G(eT),Z(eT,(ex[ex.length-1]-ex[0])*1e-8,(e_[e_.length-1]-e_[0])*1e-8);var eC=eT;"constraint"===ew.type&&(eC=$(eT,eA)),function(i,o){var s,x,_,F,N,j,G,Z,X;for(s=0;s<i.length;s++){for(x=0,N=(F=i[s]).pedgepaths=[],j=F.ppaths=[];x<F.edgepaths.length;x++){for(_=0,X=F.edgepaths[x],G=[];_<X.length;_++)G[_]=o(X[_]);N.push(G)}for(x=0;x<F.paths.length;x++){for(_=0,X=F.paths[x],Z=[];_<X.length;_++)Z[_]=o(X[_]);j.push(Z)}}}(eT,ab2p);var eE=[];for(eu=eg.clipsegments.length-1;eu>=0;eu--)el=_([],(ei=eg.clipsegments[eu]).x,eo.c2p),ec=_([],ei.y,es.c2p),el.reverse(),ec.reverse(),eE.push(F(el,ec,ei.bicubic));var eL="M"+eE.join("L")+"Z";(function(i,o,s,x,N,G){var Z,X,J=j.ensureSingle(i,"g","contourbg").selectAll("path").data("fill"!==G||N?[]:[0]);J.enter().append("path"),J.exit().remove();var $=[];for(X=0;X<o.length;X++)$.push(F(_([],(Z=o[X]).x,s.c2p),_([],Z.y,x.c2p),Z.bicubic));J.attr("d","M"+$.join("L")+"Z").style("stroke","none")})(ef,eg.clipsegments,eo,es,ek,eS),em=eC,(ey="fill"===eS)&&et(em,ed.contours),(ev=j.ensureSingle(ef,"g","contourfill").selectAll("path").data(ey?em:[])).enter().append("path"),ev.exit().remove(),ev.each(function(i){var o=(i.prefixBoundary?eL:"")+function(i,o,s,x,_,F,G,Z){var X,J,$,ee,et,er,ei,eo="",es=o.edgepaths.map(function(i,o){return o}),el=!0,ec=1e-4*Math.abs(s[0][0]-s[2][0]),eu=1e-4*Math.abs(s[0][1]-s[2][1]);function istop(i){return Math.abs(i[1]-s[0][1])<eu}function isbottom(i){return Math.abs(i[1]-s[2][1])<eu}function isleft(i){return Math.abs(i[0]-s[0][0])<ec}function isright(i){return Math.abs(i[0]-s[2][0])<ec}function pathto(i,o){var s,x,N,j,X="";for(istop(i)&&!isright(i)||isbottom(i)&&!isleft(i)?(j=_.aaxis,N=en(_,F,[i[0],o[0]],.5*(i[1]+o[1]))):(j=_.baxis,N=en(_,F,.5*(i[0]+o[0]),[i[1],o[1]])),s=1;s<N.length;s++)for(X+=j.smoothing?"C":"L",x=0;x<N[s].length;x++){var J=N[s][x];X+=[G.c2p(J[0]),Z.c2p(J[1])]+" "}return X}for(X=0,J=null;es.length;){var ef=o.edgepaths[X][0];for(J&&(eo+=pathto(J,ef)),ei=N.smoothopen(o.edgepaths[X].map(x),o.smoothing),eo+=el?ei:ei.replace(/^M/,"L"),es.splice(es.indexOf(X),1),J=o.edgepaths[X][o.edgepaths[X].length-1],et=-1,ee=0;ee<4;ee++){if(!J){j.log("Missing end?",X,o);break}for(istop(J)&&!isright(J)?$=s[1]:isleft(J)?$=s[0]:isbottom(J)?$=s[3]:isright(J)&&($=s[2]),er=0;er<o.edgepaths.length;er++){var eh=o.edgepaths[er][0];Math.abs(J[0]-$[0])<ec?Math.abs(J[0]-eh[0])<ec&&(eh[1]-J[1])*($[1]-eh[1])>=0&&($=eh,et=er):Math.abs(J[1]-$[1])<eu?Math.abs(J[1]-eh[1])<eu&&(eh[0]-J[0])*($[0]-eh[0])>=0&&($=eh,et=er):j.log("endpt to newendpt is not vert. or horz.",J,$,eh)}if(et>=0)break;eo+=pathto(J,$),J=$}if(et===o.edgepaths.length){j.log("unclosed perimeter path");break}X=et,(el=-1===es.indexOf(X))&&(X=es[0],eo+=pathto(J,$)+"Z",J=null)}for(X=0;X<o.paths.length;X++)eo+=N.smoothclosed(o.paths[X].map(x),o.smoothing);return eo}(0,i,eM,ab2p,ep,eg,eo,es);o?x.select(this).attr("d",o).style("stroke","none"):x.select(this).remove()}),function(i,o,s,_,F,G,Z){var $=s._context.staticPlot,ee=j.ensureSingle(i,"g","contourlines"),et=!1!==F.showlines,er=F.showlabels,en=et&&er,ei=X.createLines(ee,et||er,o,$),eo=X.createLineClip(ee,en,s,_.trace.uid),es=i.selectAll("g.contourlabels").data(er?[0]:[]);if(es.exit().remove(),es.enter().append("g").classed("contourlabels",!0),er){var el=G.xaxis,ec=G.yaxis,eu=el._length,ef=ec._length,eh=[[[0,0],[eu,0],[eu,ef],[0,ef]]],ed=[];j.clearLocationCache();var ep=X.labelFormatter(s,_),eg=N.tester.append("text").attr("data-notex",1).call(N.font,F.labelfont),em={left:0,right:eu,center:eu/2,top:0,bottom:ef,middle:ef/2},ey=Math.sqrt(eu*eu+ef*ef),ev=J.LABELDISTANCE*ey/Math.max(1,o.length/J.LABELINCREASE);ei.each(function(i){var o=X.calcTextOpts(i.level,ep,eg,s);x.select(this).selectAll("path").each(function(s){var x=j.getVisibleSegment(this,em,o.height/2);if(x&&(function(i,o,s,x,_,F){for(var N,j=0;j<s.pedgepaths.length;j++)o===s.pedgepaths[j]&&(N=s.edgepaths[j]);if(N){var G=_.a[0],Z=_.a[_.a.length-1],X=_.b[0],J=_.b[_.b.length-1],$=getUnitVector(i,0,1),ee=getUnitVector(i,x.total,x.total-1),et=getOffset(N[0],$),er=x.total-getOffset(N[N.length-1],ee);x.min<et&&(x.min=et),x.max>er&&(x.max=er),x.len=x.max-x.min}function getOffset(i,o){var s=0;return(.1>Math.abs(i[0]-G)||.1>Math.abs(i[0]-Z))&&(s=Math.max(s,F*vectorTan(o,normalizeVector(_.dxydb_rough(i[0],i[1],.1)))/2)),(.1>Math.abs(i[1]-X)||.1>Math.abs(i[1]-J))&&(s=Math.max(s,F*vectorTan(o,normalizeVector(_.dxyda_rough(i[0],i[1],.1)))/2)),s}}(this,s,i,x,Z,o.height),!(x.len<(o.width+o.height)*J.LABELMIN)))for(var _=Math.min(Math.ceil(x.len/ev),J.LABELMAX),F=0;F<_;F++){var N=X.findBestTextLocation(this,x,o,ed,em);if(!N)break;X.addLabelData(N,o,ed,eh)}})}),eg.remove(),X.drawLabels(es,ed,s,eo,en?eh:null)}er&&!et&&ei.remove()}(ef,eT,i,eh,ew,o,ep),N.setClipUrl(ef,ep._clipPathId,i)}function ab2p(i){var o=ep.ab2xy(i[0],i[1],!0);return[eo.c2p(o[0]),es.c2p(o[1])]}})}},64096:function(i,o,s){"use strict";var x=s(50693),_=s(5386).fF,F=s(9012),N=s(99181),j=s(1426).extendFlat;i.exports=j({lon:N.lon,lat:N.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:N.text,hovertext:N.hovertext,hoverinfo:j({},F.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:_(),showlegend:j({},F.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(i,o,s){"use strict";var x=s(92770),_=s(71828).isArrayOrTypedArray,F=s(50606).BADNUM,N=s(78803),j=s(71828)._;i.exports=function(i,o){for(var s=o._length,G=Array(s),Z=o.z,X=_(Z)&&Z.length,J=0;J<s;J++){var $=G[J]={},ee=o.lon[J],et=o.lat[J];if($.lonlat=x(ee)&&x(et)?[+ee,+et]:[F,F],X){var er=Z[J];$.z=x(er)?er:F}}return N(i,o,{vals:X?Z:[0,1],containerStr:"",cLetter:"z"}),s&&(G[0].t={labels:{lat:j(i,"lat:")+" ",lon:j(i,"lon:")+" "}}),G}},52414:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(7901),N=s(21081),j=s(50606).BADNUM,G=s(18214).makeBlank;i.exports=function(i){var o,s=i[0].trace,Z=!0===s.visible&&0!==s._length,X=s._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:G()};if(!Z)return X;var J=[],$=s.z,ee=s.radius,et=_.isArrayOrTypedArray($)&&$.length,er=_.isArrayOrTypedArray(ee);for(o=0;o<i.length;o++){var en=i[o],ei=en.lonlat;if(ei[0]!==j){var eo={};if(et){var es=en.z;eo.z=es!==j?es:0}er&&(eo.r=x(ee[o])&&ee[o]>0?+ee[o]:0),J.push({type:"Feature",geometry:{type:"Point",coordinates:ei},properties:eo})}}var el=N.extractOpts(s),ec=el.reversescale?N.flipScale(el.colorscale):el.colorscale,eu=ec[0][1],ef=["interpolate",["linear"],["heatmap-density"],0,1>F.opacity(eu)?eu:F.addOpacity(eu,0)];for(o=1;o<ec.length;o++)ef.push(ec[o][0],ec[o][1]);var eh=["interpolate",["linear"],["get","z"],el.min,0,el.max,1];return _.extendFlat(X.heatmap.paint,{"heatmap-weight":et?eh:1/(el.max-el.min),"heatmap-color":ef,"heatmap-radius":er?{type:"identity",property:"r"}:s.radius,"heatmap-opacity":s.opacity}),X.geojson={type:"FeatureCollection",features:J},X.heatmap.layout.visibility="visible",X}},79429:function(i,o,s){"use strict";var x=s(71828),_=s(1586),F=s(64096);i.exports=function(i,o,s,N){function coerce(s,_){return x.coerce(i,o,F,s,_)}var j=coerce("lon")||[],G=coerce("lat")||[],Z=Math.min(j.length,G.length);if(!Z){o.visible=!1;return}o._length=Z,coerce("z"),coerce("radius"),coerce("below"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),_(i,o,N,coerce,{prefix:"",cLetter:"z"})}},62474:function(i){"use strict";i.exports=function(i,o){return i.lon=o.lon,i.lat=o.lat,i.z=o.z,i}},84684:function(i,o,s){"use strict";var x=s(89298),_=s(28178).hoverPoints,F=s(28178).getExtraText;i.exports=function(i,o,s){var N=_(i,o,s);if(N){var j=N[0],G=j.cd,Z=G[0].trace,X=G[j.index];if(delete j.color,"z"in X){var J=j.subplot.mockAxis;j.z=X.z,j.zLabel=x.tickText(J,J.c2l(X.z),"hover").text}return j.extraText=F(Z,X,G[0].t.labels),[j]}}},93814:function(i,o,s){"use strict";i.exports={attributes:s(64096),supplyDefaults:s(79429),colorbar:s(61243),formatLabels:s(15636),calc:s(85070),plot:s(7336),hoverPoints:s(84684),eventData:s(62474),getBelow:function(i,o){for(var s=o.getMapLayers(),x=0;x<s.length;x++){var _=s[x],F=_.id;if("symbol"===_.type&&"string"==typeof F&&-1===F.indexOf("plotly-"))return F}},moduleType:"trace",name:"densitymapbox",basePlotModule:s(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(i,o,s){"use strict";var x=s(52414),_=s(77734).traceLayerPrefix;function DensityMapbox(i,o){this.type="densitymapbox",this.subplot=i,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",_+o+"-heatmap"]],this.below=null}var F=DensityMapbox.prototype;F.update=function(i){var o=this.subplot,s=this.layerList,_=x(i),F=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(_.geojson),F!==this.below&&(this._removeLayers(),this._addLayers(_,F),this.below=F);for(var N=0;N<s.length;N++){var j=s[N],G=j[0],Z=j[1],X=_[G];o.setOptions(Z,"setLayoutProperty",X.layout),"visible"===X.layout.visibility&&o.setOptions(Z,"setPaintProperty",X.paint)}},F._addLayers=function(i,o){for(var s=this.subplot,x=this.layerList,_=this.sourceId,F=0;F<x.length;F++){var N=x[F],j=N[0],G=i[j];s.addLayer({type:j,id:N[1],source:_,layout:G.layout,paint:G.paint},o)}},F._removeLayers=function(){for(var i=this.subplot.map,o=this.layerList,s=o.length-1;s>=0;s--)i.removeLayer(o[s][1])},F.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},i.exports=function(i,o){var s=o[0].trace,_=new DensityMapbox(i,s.uid),F=_.sourceId,N=x(o),j=_.below=i.belowLookup["trace-"+s.uid];return i.map.addSource(F,{type:"geojson",data:N.geojson}),_._addLayers(N,j),_}},49789:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;x.mergeArray(o.text,i,"tx"),x.mergeArray(o.hovertext,i,"htx");var _=o.marker;if(_){x.mergeArray(_.opacity,i,"mo"),x.mergeArray(_.color,i,"mc");var F=_.line;F&&(x.mergeArray(F.color,i,"mlc"),x.mergeArrayCastPositive(F.width,i,"mlw"))}}},1285:function(i,o,s){"use strict";var x,_=s(1486),F=s(82196).line,N=s(9012),j=s(12663).axisHoverFormat,G=s(5386).fF,Z=s(5386).si,X=s(18517),J=s(1426).extendFlat,$=s(7901);i.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:j("x"),yhoverformat:j("y"),hovertext:_.hovertext,hovertemplate:G({},{keys:X.eventDataKeys}),hoverinfo:J({},N.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:Z({editType:"plot"},{keys:X.eventDataKeys.concat(["label","value"])}),text:_.text,textposition:_.textposition,insidetextanchor:J({},_.insidetextanchor,{dflt:"middle"}),textangle:J({},_.textangle,{dflt:0}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:J({},_.orientation,{}),offset:J({},_.offset,{arrayOk:!1}),width:J({},_.width,{arrayOk:!1}),marker:(x=J({},_.marker),delete x.pattern,x),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:J({},F.color,{dflt:$.defaultLine}),width:J({},F.width,{dflt:0,editType:"plot"}),dash:F.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup}},9532:function(i,o,s){"use strict";var x=s(89298),_=s(42973),F=s(49789),N=s(66279),j=s(50606).BADNUM;function fixNum(i){return i===j?0:i}i.exports=function(i,o){var s,G,Z,X,J,$,ee,et,er,en=x.getFromId(i,o.xaxis||"x"),ei=x.getFromId(i,o.yaxis||"y");"h"===o.orientation?(s=en.makeCalcdata(o,"x"),Z=ei.makeCalcdata(o,"y"),X=_(o,ei,"y",Z),J=!!o.yperiodalignment,$="y"):(s=ei.makeCalcdata(o,"y"),Z=en.makeCalcdata(o,"x"),X=_(o,en,"x",Z),J=!!o.xperiodalignment,$="x");var eo=Math.min((G=X.vals).length,s.length),es=Array(eo);for(ee=0,o._base=[];ee<eo;ee++){s[ee]<0&&(s[ee]=j);var el=!1;s[ee]!==j&&ee+1<eo&&s[ee+1]!==j&&(el=!0),et=es[ee]={p:G[ee],s:s[ee],cNext:el},o._base[ee]=-.5*et.s,J&&(es[ee].orig_p=Z[ee],es[ee][$+"End"]=X.ends[ee],es[ee][$+"Start"]=X.starts[ee]),o.ids&&(et.id=String(o.ids[ee])),0===ee&&(es[0].vTotal=0),es[0].vTotal+=fixNum(et.s),et.begR=fixNum(et.s)/fixNum(es[0].s)}for(ee=0;ee<eo;ee++)(et=es[ee]).s!==j&&(et.sumR=et.s/es[0].vTotal,et.difR=void 0!==er?et.s/er:1,er=et.s);return F(es,o),N(es,o),es}},18517:function(i){"use strict";i.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(i,o,s){"use strict";var x=s(11661).setGroupPositions;i.exports=function(i,o){var s,_,F=i._fullLayout,N=i._fullData,j=i.calcdata,G=o.xaxis,Z=o.yaxis,X=[],J=[],$=[];for(_=0;_<N.length;_++){var ee=N[_],et="h"===ee.orientation;!0===ee.visible&&ee.xaxis===G._id&&ee.yaxis===Z._id&&"funnel"===ee.type&&(s=j[_],et?$.push(s):J.push(s),X.push(s))}var er={mode:F.funnelmode,norm:F.funnelnorm,gap:F.funnelgap,groupgap:F.funnelgroupgap};for(x(i,G,Z,J,er),x(i,Z,G,$,er),_=0;_<X.length;_++){s=X[_];for(var en=0;en<s.length;en++)en+1<s.length&&(s[en].nextP0=s[en+1].p0,s[en].nextS0=s[en+1].s0,s[en].nextP1=s[en+1].p1,s[en].nextS1=s[en+1].s1)}}},26199:function(i,o,s){"use strict";var x=s(71828),_=s(26125),F=s(90769).handleText,N=s(67513),j=s(73927),G=s(1285),Z=s(7901);i.exports={supplyDefaults:function(i,o,s,_){function coerce(s,_){return x.coerce(i,o,G,s,_)}if(!N(i,o,_,coerce)){o.visible=!1;return}j(i,o,_,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("orientation",o.y&&!o.x?"v":"h"),coerce("offset"),coerce("width");var X,J=coerce("text");coerce("hovertext"),coerce("hovertemplate");var $=coerce("textposition");F(i,o,_,coerce,$,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||o.texttemplate||coerce("textinfo",Array.isArray(J)?"text+value":"value");var ee=coerce("marker.color",s);coerce("marker.line.color",Z.defaultLine),coerce("marker.line.width"),coerce("connector.visible")&&(coerce("connector.fillcolor",(X=x.isArrayOrTypedArray(ee)?"#000":ee,Z.addOpacity(X,.5*Z.opacity(X)))),coerce("connector.line.width")&&(coerce("connector.line.color"),coerce("connector.line.dash")))},crossTraceDefaults:function(i,o){var s;function coerce(i){return x.coerce(s._input,s,G,i)}if("group"===o.funnelmode)for(var F=0;F<i.length;F++)_((s=i[F])._input,s,o,coerce)}}},34598:function(i){"use strict";i.exports=function(i,o){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"percentInitial"in o&&(i.percentInitial=o.percentInitial),"percentPrevious"in o&&(i.percentPrevious=o.percentPrevious),"percentTotal"in o&&(i.percentTotal=o.percentTotal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},63341:function(i,o,s){"use strict";var x=s(7901).opacity,_=s(95423).hoverOnBars,F=s(71828).formatPercent;i.exports=function(i,o,s,N,j){var G=_(i,o,s,N,j);if(G){var Z,X,J,$,ee=G.cd,et=ee[0].trace,er="h"===et.orientation,en=ee[G.index];G[(er?"x":"y")+"LabelVal"]=en.s,G.percentInitial=en.begR,G.percentInitialLabel=F(en.begR,1),G.percentPrevious=en.difR,G.percentPreviousLabel=F(en.difR,1),G.percentTotal=en.sumR,G.percentTotalLabel=F(en.sumR,1);var ei=en.hi||et.hoverinfo,eo=[];if(ei&&"none"!==ei&&"skip"!==ei){var es="all"===ei,el=ei.split("+"),hasFlag=function(i){return es||-1!==el.indexOf(i)};hasFlag("percent initial")&&eo.push(G.percentInitialLabel+" of initial"),hasFlag("percent previous")&&eo.push(G.percentPreviousLabel+" of previous"),hasFlag("percent total")&&eo.push(G.percentTotalLabel+" of total")}return G.extraText=eo.join("<br>"),G.color=(Z=et.marker,X=en.mc||Z.color,J=en.mlc||Z.line.color,$=en.mlw||Z.line.width,x(X)?X:x(J)&&$?J:void 0),[G]}}},51759:function(i,o,s){"use strict";i.exports={attributes:s(1285),layoutAttributes:s(10440),supplyDefaults:s(26199).supplyDefaults,crossTraceDefaults:s(26199).crossTraceDefaults,supplyLayoutDefaults:s(93138),calc:s(9532),crossTraceCalc:s(8984),plot:s(80461),style:s(68266).style,hoverPoints:s(63341),eventData:s(34598),selectPoints:s(81974),moduleType:"trace",name:"funnel",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(i){"use strict";i.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(i,o,s){"use strict";var x=s(71828),_=s(10440);i.exports=function(i,o,s){var F=!1;function coerce(s,F){return x.coerce(i,o,_,s,F)}for(var N=0;N<s.length;N++){var j=s[N];if(j.visible&&"funnel"===j.type){F=!0;break}}F&&(coerce("funnelmode"),coerce("funnelgap",.2),coerce("funnelgroupgap"))}},80461:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(50606).BADNUM,j=s(17295),G=s(72597).clearMinTextSize;function getXY(i,o,s,x){var _=[],F=[],N=x?o:s,j=x?s:o;return _[0]=N.c2p(i.s0,!0),F[0]=j.c2p(i.p0,!0),_[1]=N.c2p(i.s1,!0),F[1]=j.c2p(i.p1,!0),_[2]=N.c2p(i.nextS0,!0),F[2]=j.c2p(i.nextP0,!0),_[3]=N.c2p(i.nextS1,!0),F[3]=j.c2p(i.nextP1,!0),x?[_,F]:[F,_]}i.exports=function(i,o,s,Z){var X=i._fullLayout;G("funnel",X),function(i,o,s,j){var G=o.xaxis,Z=o.yaxis;_.makeTraceGroups(j,s,"trace bars").each(function(s){var j=x.select(this),X=s[0].trace,J=_.ensureSingle(j,"g","regions");if(!X.connector||!X.connector.visible){J.remove();return}var $="h"===X.orientation,ee=J.selectAll("g.region").data(_.identity);ee.enter().append("g").classed("region",!0),ee.exit().remove();var et=ee.size();ee.each(function(s,j){if(j===et-1||s.cNext){var X=getXY(s,G,Z,$),J=X[0],ee=X[1],er="";J[0]!==N&&ee[0]!==N&&J[1]!==N&&ee[1]!==N&&J[2]!==N&&ee[2]!==N&&J[3]!==N&&ee[3]!==N&&($?er+="M"+J[0]+","+ee[1]+"L"+J[2]+","+ee[2]+"H"+J[3]+"L"+J[1]+","+ee[1]+"Z":er+="M"+J[1]+","+ee[1]+"L"+J[2]+","+ee[3]+"V"+ee[2]+"L"+J[1]+","+ee[0]+"Z"),""===er&&(er="M0,0Z"),_.ensureSingle(x.select(this),"path").attr("d",er).call(F.setClipUrl,o.layerClipId,i)}})})}(i,o,s,Z),function(i,o,s,N){var j=o.xaxis,G=o.yaxis;_.makeTraceGroups(N,s,"trace bars").each(function(s){var N=x.select(this),Z=s[0].trace,X=_.ensureSingle(N,"g","lines");if(!Z.connector||!Z.connector.visible||!Z.connector.line.width){X.remove();return}var J="h"===Z.orientation,$=X.selectAll("g.line").data(_.identity);$.enter().append("g").classed("line",!0),$.exit().remove();var ee=$.size();$.each(function(s,N){if(N===ee-1||s.cNext){var Z=getXY(s,j,G,J),X=Z[0],$=Z[1],et="";void 0!==X[3]&&void 0!==$[3]&&(J?et+="M"+X[0]+","+$[1]+"L"+X[2]+","+$[2]+("M"+X[1]+","+$[1]+"L"+X[3])+","+$[2]:et+="M"+X[1]+","+$[1]+"L"+X[2]+","+$[3]+("M"+X[1]+","+$[0]+"L"+X[2])+","+$[2]),""===et&&(et="M0,0Z"),_.ensureSingle(x.select(this),"path").attr("d",et).call(F.setClipUrl,o.layerClipId,i)}})})}(i,o,s,Z),j.plot(i,o,s,Z,{mode:X.funnelmode,norm:X.funnelmode,gap:X.funnelgap,groupgap:X.funnelgroupgap})}},68266:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(7901),N=s(37822).DESELECTDIM,j=s(16688),G=s(72597).resizeText,Z=j.styleTextPoints;i.exports={style:function(i,o,s){var j=s||x.select(i).selectAll("g.funnellayer").selectAll("g.trace");G(i,j,"funnel"),j.style("opacity",function(i){return i[0].trace.opacity}),j.each(function(o){var s=x.select(this),j=o[0].trace;s.selectAll(".point > path").each(function(i){if(!i.isBlank){var o=j.marker;x.select(this).call(F.fill,i.mc||o.color).call(F.stroke,i.mlc||o.line.color).call(_.dashLine,o.line.dash,i.mlw||o.line.width).style("opacity",j.selectedpoints&&!i.selected?N:1)}}),Z(s,j,i),s.selectAll(".regions").each(function(){x.select(this).selectAll("path").style("stroke-width",0).call(F.fill,j.connector.fillcolor)}),s.selectAll(".lines").each(function(){var i=j.connector.line;_.lineGroupStyle(x.select(this).selectAll("path"),i.width,i.color,i.dash)})})}}},86807:function(i,o,s){"use strict";var x=s(34e3),_=s(9012),F=s(27670).Y,N=s(5386).fF,j=s(5386).si,G=s(1426).extendFlat;i.exports={labels:x.labels,label0:x.label0,dlabel:x.dlabel,values:x.values,marker:{colors:x.marker.colors,line:{color:G({},x.marker.line.color,{dflt:null}),width:G({},x.marker.line.width,{dflt:1}),editType:"calc"},pattern:x.marker.pattern,editType:"calc"},text:x.text,hovertext:x.hovertext,scalegroup:G({},x.scalegroup,{}),textinfo:G({},x.textinfo,{flags:["label","text","value","percent"]}),texttemplate:j({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:G({},_.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:N({},{keys:["label","color","value","text","percent"]}),textposition:G({},x.textposition,{values:["inside","none"],dflt:"inside"}),textfont:x.textfont,insidetextfont:x.insidetextfont,title:{text:x.title.text,font:x.title.font,position:G({},x.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:F({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(i,o,s){"use strict";var x=s(74875);o.name="funnelarea",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},89574:function(i,o,s){"use strict";var x=s(32354);i.exports={calc:function(i,o){return x.calc(i,o)},crossTraceCalc:function(i){x.crossTraceCalc(i,{type:"funnelarea"})}}},86282:function(i,o,s){"use strict";var x=s(71828),_=s(86807),F=s(27670).c,N=s(90769).handleText,j=s(37434).handleLabelsAndValues,G=s(37434).handleMarkerDefaults;i.exports=function(i,o,s,Z){function coerce(s,F){return x.coerce(i,o,_,s,F)}var X,J=j(coerce("labels"),coerce("values")),$=J.len;if(o._hasLabels=J.hasLabels,o._hasValues=J.hasValues,!o._hasLabels&&o._hasValues&&(coerce("label0"),coerce("dlabel")),!$){o.visible=!1;return}o._length=$,G(i,o,Z,coerce),coerce("scalegroup");var ee=coerce("text"),et=coerce("texttemplate");if(et||(X=coerce("textinfo",Array.isArray(ee)?"text+percent":"percent")),coerce("hovertext"),coerce("hovertemplate"),et||X&&"none"!==X){var er=coerce("textposition");N(i,o,Z,coerce,er,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}F(o,Z,coerce),coerce("title.text")&&(coerce("title.position"),x.coerceFont(coerce,"title.font",Z.font)),coerce("aspectratio"),coerce("baseratio")}},10421:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"funnelarea",basePlotModule:s(6452),categories:["pie-like","funnelarea","showLegend"],attributes:s(86807),layoutAttributes:s(80097),supplyDefaults:s(86282),supplyLayoutDefaults:s(57402),calc:s(89574).calc,crossTraceCalc:s(89574).crossTraceCalc,plot:s(79187),style:s(71858),styleOne:s(63463),meta:{}}},80097:function(i,o,s){"use strict";var x=s(92774).hiddenlabels;i.exports={hiddenlabels:x,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(i,o,s){"use strict";var x=s(71828),_=s(80097);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("hiddenlabels"),coerce("funnelareacolorway",o.colorway),coerce("extendfunnelareacolors")}},79187:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(71828),N=F.strScale,j=F.strTranslate,G=s(63893),Z=s(17295).toMoveInsideBar,X=s(72597),J=X.recordMinTextSize,$=X.clearMinTextSize,ee=s(53581),et=s(14575),er=et.attachFxHandlers,en=et.determineInsideTextFont,ei=et.layoutAreas,eo=et.prerenderTitles,es=et.positionTitleOutside,el=et.formatSliceLabel;function line(i,o){return"l"+(o[0]-i[0])+","+(o[1]-i[1])}i.exports=function(i,o){var s=i._context.staticPlot,X=i._fullLayout;$("funnelarea",X),eo(o,i),ei(o,X._size),F.makeTraceGroups(X._funnelarealayer,o,"trace").each(function(o){var $=x.select(this),et=o[0],ei=et.trace;(function(i){if(i.length){var o,s,x,_=i[0],F=_.trace,N=F.aspectratio,j=F.baseratio;j>.999&&(j=.999);var G=Math.pow(j,2),Z=_.vTotal,X=Z*G/(1-G)/Z,J=[];for(J.push(getPoint()),s=i.length-1;s>-1;s--)if(!(x=i[s]).hidden){var $=x.v/Z;X+=$,J.push(getPoint())}var ee=1/0,et=-1/0;for(s=0;s<J.length;s++)ee=Math.min(ee,(o=J[s])[1]),et=Math.max(et,o[1]);for(s=0;s<J.length;s++)J[s][1]-=(et+ee)/2;var er=J[J.length-1][0],en=_.r,ei=(et-ee)/2,eo=en/er,es=en/ei*N;for(s=0,_.r=es*ei;s<J.length;s++)J[s][0]*=eo,J[s][1]*=es;var el=[-(o=J[0])[0],o[1]],ec=[o[0],o[1]],eu=0;for(s=i.length-1;s>-1;s--)if(!(x=i[s]).hidden){var ef,eh,ed=J[eu+=1][0],ep=J[eu][1];x.TL=[-ed,ep],x.TR=[ed,ep],x.BL=el,x.BR=ec,x.pxmid=(ef=x.TR,eh=x.BR,[.5*(ef[0]+eh[0]),.5*(ef[1]+eh[1])]),el=x.TL,ec=x.TR}}function getPoint(){var i,o={x:i=Math.sqrt(X),y:-i};return[o.x,o.y]}})(o),$.each(function(){var $=x.select(this).selectAll("g.slice").data(o);$.enter().append("g").classed("slice",!0),$.exit().remove(),$.each(function(N,j){if(N.hidden){x.select(this).selectAll("path,g").remove();return}N.pointNumber=N.i,N.curveNumber=ei.index;var $=et.cx,eo=et.cy,es=x.select(this),ec=es.selectAll("path.surface").data([N]);ec.enter().append("path").classed("surface",!0).style({"pointer-events":s?"none":"all"}),es.call(er,i,o);var eu="M"+($+N.TR[0])+","+(eo+N.TR[1])+line(N.TR,N.BR)+line(N.BR,N.BL)+line(N.BL,N.TL)+"Z";ec.attr("d",eu),el(i,N,et);var ef=ee.castOption(ei.textposition,N.pts),eh=es.selectAll("g.slicetext").data(N.text&&"none"!==ef?[0]:[]);eh.enter().append("g").classed("slicetext",!0),eh.exit().remove(),eh.each(function(){var s,ee=F.ensureSingle(x.select(this),"text","",function(i){i.attr("data-notex",1)}),et=F.ensureUniformFontSize(i,en(ei,N,X.font));ee.text(N.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(_.font,et).call(G.convertToTspans,i);var er=_.bBox(ee.node()),es=Math.min(N.BL[1],N.BR[1])+eo,el=Math.max(N.TL[1],N.TR[1])+eo;(s=Z(Math.max(N.TL[0],N.BL[0])+$,Math.min(N.TR[0],N.BR[0])+$,es,el,er,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=et.size,J(ei.type,s,X),o[j].transform=s,F.setTransormAndDisplay(ee,s)})});var eo=x.select(this).selectAll("g.titletext").data(ei.title.text?[0]:[]);eo.enter().append("g").classed("titletext",!0),eo.exit().remove(),eo.each(function(){var o=F.ensureSingle(x.select(this),"text","",function(i){i.attr("data-notex",1)}),s=ei.title.text;ei._meta&&(s=F.templateString(s,ei._meta)),o.text(s).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(_.font,ei.title.font).call(G.convertToTspans,i);var Z=es(et,X._size);o.attr("transform",j(Z.x,Z.y)+N(Math.min(1,Z.scale))+j(Z.tx,Z.ty))})})})}},71858:function(i,o,s){"use strict";var x=s(39898),_=s(63463),F=s(72597).resizeText;i.exports=function(i){var o=i._fullLayout._funnelarealayer.selectAll(".trace");F(i,o,"funnelarea"),o.each(function(o){var s=o[0].trace,F=x.select(this);F.style({opacity:s.opacity}),F.selectAll("path.surface").each(function(o){x.select(this).call(_,o,s,i)})})}},21606:function(i,o,s){"use strict";var x=s(82196),_=s(9012),F=s(41940),N=s(12663).axisHoverFormat,j=s(5386).fF,G=s(5386).si,Z=s(50693),X=s(1426).extendFlat;i.exports=X({z:{valType:"data_array",editType:"calc"},x:X({},x.x,{impliedEdits:{xtype:"array"}}),x0:X({},x.x0,{impliedEdits:{xtype:"scaled"}}),dx:X({},x.dx,{impliedEdits:{xtype:"scaled"}}),y:X({},x.y,{impliedEdits:{ytype:"array"}}),y0:X({},x.y0,{impliedEdits:{ytype:"scaled"}}),dy:X({},x.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:X({},x.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:X({},x.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:X({},x.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:X({},x.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:X({},x.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:X({},x.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z",1),hovertemplate:j(),texttemplate:G({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:F({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:X({},_.showlegend,{dflt:!1})},{transforms:void 0},Z("",{cLetter:"z",autoColorDflt:!1}))},90757:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(89298),N=s(42973),j=s(17562),G=s(78803),Z=s(68296),X=s(4742),J=s(824),$=s(43907),ee=s(70769),et=s(50606).BADNUM;function skipBreaks(i){for(var o=[],s=i.length,x=0;x<s;x++){var _=i[x];_!==et&&o.push(_)}return o}i.exports=function(i,o){var s,er,en,ei,eo,es,el,ec,eu,ef,eh,ed=F.getFromId(i,o.xaxis||"x"),ep=F.getFromId(i,o.yaxis||"y"),eg=x.traceIs(o,"contour"),em=x.traceIs(o,"histogram"),ey=x.traceIs(o,"gl2d"),ev=eg?"best":o.zsmooth;if(ed._minDtick=0,ep._minDtick=0,em)ei=(eh=j(i,o)).orig_x,s=eh.x,er=eh.x0,en=eh.dx,ec=eh.orig_y,eo=eh.y,es=eh.y0,el=eh.dy,eu=eh.z;else{var ex=o.z;_.isArray1D(ex)?(Z(o,ed,ep,"x","y",["z"]),s=o._x,eo=o._y,ex=o._z):(ei=o.x?ed.makeCalcdata(o,"x"):[],ec=o.y?ep.makeCalcdata(o,"y"):[],s=N(o,ed,"x",ei).vals,eo=N(o,ep,"y",ec).vals,o._x=s,o._y=eo),er=o.x0,en=o.dx,es=o.y0,el=o.dy,eu=X(ex,o,ed,ep)}function noZsmooth(i){ev=o._input.zsmooth=o.zsmooth=!1,_.warn('cannot use zsmooth: "fast": '+i)}function scaleIsLinear(i){if(i.length>1){var o=(i[i.length-1]-i[0])/(i.length-1),s=Math.abs(o/100);for(ef=0;ef<i.length-1;ef++)if(Math.abs(i[ef+1]-i[ef]-o)>s)return!1}return!0}(ed.rangebreaks||ep.rangebreaks)&&(eu=function(i,o,s){for(var x=[],_=-1,F=0;F<s.length;F++)if(o[F]!==et){x[++_]=[];for(var N=0;N<s[F].length;N++)i[N]!==et&&x[_].push(s[F][N])}return x}(s,eo,eu),em||(s=skipBreaks(s),eo=skipBreaks(eo),o._x=s,o._y=eo)),!em&&(eg||o.connectgaps)&&(o._emptypoints=$(eu),J(eu,o._emptypoints)),o._islinear=!1,"log"===ed.type||"log"===ep.type?"fast"===ev&&noZsmooth("log axis found"):scaleIsLinear(s)?scaleIsLinear(eo)?o._islinear=!0:"fast"===ev&&noZsmooth("y scale is not linear"):"fast"===ev&&noZsmooth("x scale is not linear");var e_=_.maxRowLength(eu),ew="scaled"===o.xtype?"":s,eT=ee(o,ew,er,en,e_,ed),ek="scaled"===o.ytype?"":eo,eA=ee(o,ek,es,el,eu.length,ep);ey||(o._extremes[ed._id]=F.findExtremes(ed,eT),o._extremes[ep._id]=F.findExtremes(ep,eA));var eS={x:eT,y:eA,z:eu,text:o._text||o.text,hovertext:o._hovertext||o.hovertext};if(o.xperiodalignment&&ei&&(eS.orig_x=ei),o.yperiodalignment&&ec&&(eS.orig_y=ec),ew&&ew.length===eT.length-1&&(eS.xCenter=ew),ek&&ek.length===eA.length-1&&(eS.yCenter=ek),em&&(eS.xRanges=eh.xRanges,eS.yRanges=eh.yRanges,eS.pts=eh.pts),eg||G(i,o,{vals:eu,cLetter:"z"}),eg&&o.contours&&"heatmap"===o.contours.coloring){var eM={type:"contour"===o.type?"heatmap":"histogram2d",xcalendar:o.xcalendar,ycalendar:o.ycalendar};eS.xfill=ee(eM,ew,er,en,e_,ed),eS.yfill=ee(eM,ek,es,el,eu.length,ep)}return[eS]}},4742:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(50606).BADNUM;i.exports=function(i,o,s,N){if(o&&o.transpose){for(J=0,j=0;J<i.length;J++)j=Math.max(j,i[J].length);if(0===j)return!1;Z=function(i){return i.length},X=function(i,o,s){return(i[s]||[])[o]}}else j=i.length,Z=function(i,o){return i[o].length},X=function(i,o,s){return(i[o]||[])[s]};function axisMapping(i){if(!o||"carpet"===o.type||"contourcarpet"===o.type||!i||"category"!==i.type||!o["_"+i._id.charAt(0)].length)return _.identity;var s=i._id.charAt(0),x={},N=o["_"+s+"CategoryMap"]||o[s];for(J=0;J<N.length;J++)x[N[J]]=J;return function(o){var s=x[i._categories[o]];return s+1?s:F}}var j,G,Z,X,J,$,ee,et,er=axisMapping(s),en=axisMapping(N);N&&"category"===N.type&&(j=N._categories.length);var ei=Array(j);for(J=0;J<j;J++)for($=0,G=s&&"category"===s.type?s._categories.length:Z(i,J),ei[J]=Array(G);$<G;$++)ei[J][$]=function(i){if(x(i))return+i}((ee=en(J),et=er($),ee===F||et===F?F:X(i,ee,et)));return ei}},61243:function(i){"use strict";i.exports={min:"zmin",max:"zmax"}},68296:function(i,o,s){"use strict";var x=s(71828),_=s(50606).BADNUM,F=s(42973);i.exports=function(i,o,s,N,j,G){var Z,X,J,$,ee=i._length,et=o.makeCalcdata(i,N),er=s.makeCalcdata(i,j);et=F(i,o,N,et).vals,er=F(i,s,j,er).vals;var en=i.text,ei=void 0!==en&&x.isArray1D(en),eo=i.hovertext,es=void 0!==eo&&x.isArray1D(eo),el=x.distinctVals(et),ec=el.vals,eu=x.distinctVals(er),ef=eu.vals,eh=[],ed=ef.length,ep=ec.length;for(Z=0;Z<G.length;Z++)eh[Z]=x.init2dArray(ed,ep);ei&&(J=x.init2dArray(ed,ep)),es&&($=x.init2dArray(ed,ep));var eg=x.init2dArray(ed,ep);for(Z=0;Z<ee;Z++)if(et[Z]!==_&&er[Z]!==_){var em=x.findBin(et[Z]+el.minDiff/2,ec),ey=x.findBin(er[Z]+eu.minDiff/2,ef);for(X=0;X<G.length;X++){var ev=i[G[X]];eh[X][ey][em]=ev[Z],eg[ey][em]=Z}ei&&(J[ey][em]=en[Z]),es&&($[ey][em]=eo[Z])}for(X=0,i["_"+N]=ec,i["_"+j]=ef;X<G.length;X++)i["_"+G[X]]=eh[X];ei&&(i._text=J),es&&(i._hovertext=$),o&&"category"===o.type&&(i["_"+N+"CategoryMap"]=ec.map(function(i){return o._categories[i]})),s&&"category"===s.type&&(i["_"+j+"CategoryMap"]=ef.map(function(i){return s._categories[i]})),i._after2before=eg}},76382:function(i,o,s){"use strict";var x=s(71828),_=s(67684),F=s(58623),N=s(73927),j=s(49901),G=s(1586),Z=s(21606);i.exports=function(i,o,s,X){function coerce(s,_){return x.coerce(i,o,Z,s,_)}if(!_(i,o,coerce,X)){o.visible=!1;return}N(i,o,X,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),F(coerce,X),j(i,o,coerce,X),coerce("hoverongaps"),coerce("connectgaps",x.isArray1D(o.z)&&!1!==o.zsmooth),G(i,o,X,coerce,{prefix:"",cLetter:"z"})}},43907:function(i,o,s){"use strict";var x=s(71828).maxRowLength;i.exports=function(i){var o,s,_,F,N,j,G,Z,X=[],J={},$=[],ee=i[0],et=[],er=[0,0,0],en=x(i);for(s=0;s<i.length;s++)for(_=0,o=et,et=ee,ee=i[s+1]||[];_<en;_++)void 0===et[_]&&((j=(void 0!==et[_-1]?1:0)+(void 0!==et[_+1]?1:0)+(void 0!==o[_]?1:0)+(void 0!==ee[_]?1:0))?(0===s&&j++,0===_&&j++,s===i.length-1&&j++,_===et.length-1&&j++,j<4&&(J[[s,_]]=[s,_,j]),X.push([s,_,j])):$.push([s,_]));for(;$.length;){for(G={},Z=!1,N=$.length-1;N>=0;N--)(j=((J[[(s=(F=$[N])[0])-1,_=F[1]]]||er)[2]+(J[[s+1,_]]||er)[2]+(J[[s,_-1]]||er)[2]+(J[[s,_+1]]||er)[2])/20)&&(G[F]=[s,_,j],$.splice(N,1),Z=!0);if(!Z)throw"findEmpties iterated with no new neighbors";for(F in G)J[F]=G[F],X.push(G[F])}return X.sort(function(i,o){return o[2]-i[2]})}},46248:function(i,o,s){"use strict";var x=s(30211),_=s(71828),F=s(89298),N=s(21081).extractOpts;i.exports=function(i,o,s,j,G){G||(G={});var Z,X,J,$,ee,et,er,en,ei=G.isContour,eo=i.cd[0],es=eo.trace,el=i.xa,ec=i.ya,eu=eo.x,ef=eo.y,eh=eo.z,ed=eo.xCenter,ep=eo.yCenter,eg=eo.zmask,em=es.zhoverformat,ey=eu,ev=ef;if(!1!==i.index){try{J=Math.round(i.index[1]),$=Math.round(i.index[0])}catch(o){_.error("Error hovering on heatmap, pointNumber must be [row,col], found:",i.index);return}if(J<0||J>=eh[0].length||$<0||$>eh.length)return}else{if(x.inbox(o-eu[0],o-eu[eu.length-1],0)>0||x.inbox(s-ef[0],s-ef[ef.length-1],0)>0)return;if(ei){for(ee=1,ey=[2*eu[0]-eu[1]];ee<eu.length;ee++)ey.push((eu[ee]+eu[ee-1])/2);for(ey.push([2*eu[eu.length-1]-eu[eu.length-2]]),ev=[2*ef[0]-ef[1]],ee=1;ee<ef.length;ee++)ev.push((ef[ee]+ef[ee-1])/2);ev.push([2*ef[ef.length-1]-ef[ef.length-2]])}J=Math.max(0,Math.min(ey.length-2,_.findBin(o,ey))),$=Math.max(0,Math.min(ev.length-2,_.findBin(s,ev)))}var ex=el.c2p(eu[J]),e_=el.c2p(eu[J+1]),ew=ec.c2p(ef[$]),eT=ec.c2p(ef[$+1]);ei?(et=eo.orig_x||eu,er=eo.orig_y||ef,e_=ex,Z=et[J],eT=ew,X=er[$]):(et=eo.orig_x||ed||eu,er=eo.orig_y||ep||ef,Z=ed?et[J]:(et[J]+et[J+1])/2,X=ep?er[$]:(er[$]+er[$+1])/2,el&&"category"===el.type&&(Z=eu[J]),ec&&"category"===ec.type&&(X=ef[$]),es.zsmooth&&(ex=e_=el.c2p(Z),ew=eT=ec.c2p(X)));var ek=eh[$][J];if(eg&&!eg[$][J]&&(ek=void 0),void 0!==ek||es.hoverongaps){Array.isArray(eo.hovertext)&&Array.isArray(eo.hovertext[$])?en=eo.hovertext[$][J]:Array.isArray(eo.text)&&Array.isArray(eo.text[$])&&(en=eo.text[$][J]);var eA=N(es),eS={type:"linear",range:[eA.min,eA.max],hoverformat:em,_separators:el._separators,_numFormat:el._numFormat},eM=F.tickText(eS,ek,"hover").text;return[_.extendFlat(i,{index:es._after2before?es._after2before[$][J]:[$,J],distance:i.maxHoverDistance,spikeDistance:i.maxSpikeDistance,x0:ex,x1:e_,y0:ew,y1:eT,xLabelVal:Z,yLabelVal:X,zLabelVal:ek,zLabel:eM,text:en})]}}},92165:function(i,o,s){"use strict";i.exports={attributes:s(21606),supplyDefaults:s(76382),calc:s(90757),plot:s(50347),colorbar:s(61243),style:s(70035),hoverPoints:s(46248),moduleType:"trace",name:"heatmap",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(i,o,s){"use strict";var x=s(71828),_=[[-1,0],[1,0],[0,-1],[0,1]];function iterateInterp2d(i,o,s){var x,F,N,j,G,Z,X,J,$,ee,et,er,en,ei=0;for(j=0;j<o.length;j++){for(G=0,F=(x=o[j])[0],N=x[1],et=i[F][N],ee=0,$=0;G<4;G++)(X=i[F+(Z=_[G])[0]])&&void 0!==(J=X[N+Z[1]])&&(0===ee?er=en=J:(er=Math.min(er,J),en=Math.max(en,J)),$++,ee+=J);if(0===$)throw"iterateInterp2d order is wrong: no defined neighbors";i[F][N]=ee/$,void 0===et?$<4&&(ei=1):(i[F][N]=(1+s)*i[F][N]-s*et,en>er&&(ei=Math.max(ei,Math.abs(i[F][N]-et)/(en-er))))}return ei}i.exports=function(i,o){var s,_=1;for(iterateInterp2d(i,o),s=0;s<o.length&&!(o[s][2]<4);s++);for(o=o.slice(s),s=0;s<100&&_>.01;s++)_=iterateInterp2d(i,o,.5-.25*Math.min(1,.5*_));return _>.01&&x.log("interp2d didn't converge quickly",_),i}},58623:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){i("texttemplate");var s=x.extendFlat({},o.font,{color:"auto",size:"auto"});x.coerceFont(i,"textfont",s)}},70769:function(i,o,s){"use strict";var x=s(73972),_=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,F,N,j){var G,Z,X,J=[],$=x.traceIs(i,"contour"),ee=x.traceIs(i,"histogram"),et=x.traceIs(i,"gl2d");if(_(o)&&o.length>1&&!ee&&"category"!==j.type){var er=o.length;if(!(er<=N))return $?o.slice(0,N):o.slice(0,N+1);if($||et)J=o.slice(0,N);else if(1===N)J=[o[0]-.5,o[0]+.5];else{for(X=1,J=[1.5*o[0]-.5*o[1]];X<er;X++)J.push((o[X-1]+o[X])*.5);J.push(1.5*o[er-1]-.5*o[er-2])}if(er<N){var en=J[J.length-1],ei=en-J[J.length-2];for(X=er;X<N;X++)en+=ei,J.push(en)}}else{var eo=i[j._id.charAt(0)+"calendar"];for(G=ee?j.r2c(s,0,eo):_(o)&&1===o.length?o[0]:void 0===s?0:("log"===j.type?j.d2c:j.r2c)(s,0,eo),Z=F||1,X=$||et?0:-.5;X<N;X++)J.push(G+Z*X)}return J}},50347:function(i,o,s){"use strict";var x=s(39898),_=s(84267),F=s(73972),N=s(91424),j=s(89298),G=s(71828),Z=s(63893),X=s(8225),J=s(7901),$=s(21081).extractOpts,ee=s(21081).makeColorScaleFuncFromTrace,et=s(77922),er=s(18783).LINE_SPACING,en=s(3883),ei=s(32396).STYLE,eo="heatmap-label";function selectLabels(i){return i.selectAll("g."+eo)}function removeLabels(i){selectLabels(i).remove()}function findInterp(i,o){var s=o.length-2,x=G.constrain(G.findBin(i,o),0,s),_=o[x],F=o[x+1],N=G.constrain(x+(i-_)/(F-_)-.5,0,s),j=Math.round(N),Z=Math.abs(N-j);return N&&N!==s&&Z?{bin0:j,frac:Z,bin1:Math.round(j+Z/(N-j))}:{bin0:j,bin1:j,frac:0}}function findInterpFromCenters(i,o){var s=o.length-1,x=G.constrain(G.findBin(i,o),0,s),_=o[x],F=(i-_)/(o[x+1]-_)||0;return F<=0?{bin0:x,bin1:x,frac:0}:F<.5?{bin0:x,bin1:x+1,frac:F}:{bin0:x+1,bin1:x,frac:1-F}}function putColor(i,o,s){i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=Math.round(255*s[3])}i.exports=function(i,o,s,es){var el=o.xaxis,ec=o.yaxis;G.makeTraceGroups(es,s,"hm").each(function(o){var s=x.select(this),es=o[0],eu=es.trace,ef=eu.xgap||0,eh=eu.ygap||0,ed=es.z,ep=es.x,eg=es.y,em=es.xCenter,ey=es.yCenter,ev=F.traceIs(eu,"contour"),ex=ev?"best":eu.zsmooth,e_=ed.length,ew=G.maxRowLength(ed),eT=!1,ek=!1;for(eZ=0;void 0===eU&&eZ<ep.length-1;)eU=el.c2p(ep[eZ]),eZ++;for(eZ=ep.length-1;void 0===eV&&eZ>0;)eV=el.c2p(ep[eZ]),eZ--;for(eV<eU&&(eH=eV,eV=eU,eU=eH,eT=!0),eZ=0;void 0===eG&&eZ<eg.length-1;)eG=ec.c2p(eg[eZ]),eZ++;for(eZ=eg.length-1;void 0===eW&&eZ>0;)eW=ec.c2p(eg[eZ]),eZ--;eW<eG&&(eH=eG,eG=eW,eW=eH,ek=!0),ev&&(em=ep,ey=eg,ep=es.xfill,eg=es.yfill);var eA="default";if(ex?eA="best"===ex?"smooth":"fast":eu._islinear&&0===ef&&0===eh&&en()&&(eA="fast"),"fast"!==eA){var eS="best"===ex?0:.5;eU=Math.max(-eS*el._length,eU),eV=Math.min((1+eS)*el._length,eV),eG=Math.max(-eS*ec._length,eG),eW=Math.min((1+eS)*ec._length,eW)}var eM=Math.round(eV-eU),eC=Math.round(eW-eG);if(eU>=el._length||eV<=0||eG>=ec._length||eW<=0){s.selectAll("image").data([]).exit().remove(),removeLabels(s);return}"fast"===eA?(eK=ew,eJ=e_):(eK=eM,eJ=eC);var eE=document.createElement("canvas");eE.width=eK,eE.height=eJ;var eL=eE.getContext("2d"),eP=ee(eu,{noNumericCheck:!0,returnArray:!0});"fast"===eA?(e$=eT?function(i){return ew-1-i}:G.identity,eQ=ek?function(i){return e_-1-i}:G.identity):(e$=function(i){return G.constrain(Math.round(el.c2p(ep[i])-eU),0,eM)},eQ=function(i){return G.constrain(Math.round(ec.c2p(eg[i])-eG),0,eC)});var eI=eQ(0),eO=[eI,eI],eD=eT?0:1,eR=ek?0:1,eB=0,ez=0,eF=0,eN=0;function setColor(i,o){if(void 0!==i){var s=eP(i);return s[0]=Math.round(s[0]),s[1]=Math.round(s[1]),s[2]=Math.round(s[2]),eB+=o,ez+=s[0]*o,eF+=s[1]*o,eN+=s[2]*o,s}return[0,0,0,0]}if("default"!==eA){var ej=0;try{e5=new Uint8Array(eK*eJ*4)}catch(i){e5=Array(eK*eJ*4)}if("smooth"===eA){var eU,eV,eH,eG,eW,eZ,eY,eX,eK,eJ,e$,eQ,e0,e1,e2,e3,e5,e4,e6,e8,e7=em||ep,e9=ey||eg,te=Array(e7.length),tt=Array(e9.length),tr=Array(eM),tn=em?findInterpFromCenters:findInterp,ti=ey?findInterpFromCenters:findInterp;for(eZ=0;eZ<e7.length;eZ++)te[eZ]=Math.round(el.c2p(e7[eZ])-eU);for(eZ=0;eZ<e9.length;eZ++)tt[eZ]=Math.round(ec.c2p(e9[eZ])-eG);for(eZ=0;eZ<eM;eZ++)tr[eZ]=tn(eZ,te);for(eY=0;eY<eC;eY++)for(eZ=0,e6=ed[(e4=ti(eY,tt)).bin0],e8=ed[e4.bin1];eZ<eM;eZ++,ej+=4)putColor(e5,ej,e3=function(i,o,s,x){var _,F=i[s.bin0];if(void 0===F)return setColor(void 0,1);var N=i[s.bin1],j=o[s.bin0],G=o[s.bin1],Z=N-F||0,X=j-F||0;return _=void 0===N?void 0===G?0:void 0===j?2*(G-F):(2*G-j-F)*2/3:void 0===G?void 0===j?0:(2*F-N-j)*2/3:void 0===j?(2*G-N-F)*2/3:G+F-N-j,setColor(F+s.frac*Z+x.frac*(X+s.frac*_))}(e6,e8,tr[eZ],e4))}else for(eY=0;eY<e_;eY++)for(eZ=0,e2=ed[eY],eO=eQ(eY);eZ<ew;eZ++)e3=setColor(e2[eZ],1),putColor(e5,ej=(eO*ew+e$(eZ))*4,e3);var ta=eL.createImageData(eK,eJ);try{ta.data.set(e5)}catch(i){var to=ta.data,ts=to.length;for(eY=0;eY<ts;eY++)to[eY]=e5[eY]}eL.putImageData(ta,0,0)}else{var tl=Math.floor(ef/2),tc=Math.floor(eh/2);for(eY=0;eY<e_;eY++)if(e2=ed[eY],eO.reverse(),eO[eR]=eQ(eY+1),eO[0]!==eO[1]&&void 0!==eO[0]&&void 0!==eO[1])for(eZ=0,e0=[e1=e$(0),e1];eZ<ew;eZ++)e0.reverse(),e0[eD]=e$(eZ+1),e0[0]!==e0[1]&&void 0!==e0[0]&&void 0!==e0[1]&&(e3=setColor(e2[eZ],(e0[1]-e0[0])*(eO[1]-eO[0])),eL.fillStyle="rgba("+e3.join(",")+")",eL.fillRect(e0[0]+tl,eO[0]+tc,e0[1]-e0[0]-ef,eO[1]-eO[0]-eh))}var tu=_("rgb("+(ez=Math.round(ez/eB))+","+(eF=Math.round(eF/eB))+","+(eN=Math.round(eN/eB))+")");i._hmpixcount=(i._hmpixcount||0)+eB,i._hmlumcount=(i._hmlumcount||0)+eB*tu.getLuminance();var tf=s.selectAll("image").data(o);tf.enter().append("svg:image").attr({xmlns:et.svg,preserveAspectRatio:"none"}),tf.attr({height:eC,width:eM,x:eU,y:eG,"xlink:href":eE.toDataURL("image/png")}),"fast"!==eA||ex||tf.attr("style",ei),removeLabels(s);var th=eu.texttemplate;if(th){var td=$(eu),tp={type:"linear",range:[td.min,td.max],_separators:el._separators,_numFormat:el._numFormat},tg="histogram2dcontour"===eu.type,tm="contour"===eu.type,ty=tm?1:0,tv=tm?e_-1:e_,tx=tm?1:0,tb=tm?ew-1:ew,t_=[];for(eZ=ty;eZ<tv;eZ++){if(tm)tT=es.y[eZ];else if(tg){if(0===eZ||eZ===e_-1)continue;tT=es.y[eZ]}else if(es.yCenter)tT=es.yCenter[eZ];else{if(eZ+1===e_&&void 0===es.y[eZ+1])continue;tT=(es.y[eZ]+es.y[eZ+1])/2}var tw=Math.round(ec.c2p(tT));if(!(0>tw)&&!(tw>ec._length))for(eY=tx;eY<tb;eY++){if(tm)tk=es.x[eY];else if(tg){if(0===eY||eY===ew-1)continue;tk=es.x[eY]}else if(es.xCenter)tk=es.xCenter[eY];else{if(eY+1===ew&&void 0===es.x[eY+1])continue;tk=(es.x[eY]+es.x[eY+1])/2}var tT,tk,tA=Math.round(el.c2p(tk));if(!(0>tA)&&!(tA>el._length)){var tS=X({x:tk,y:tT},eu,i._fullLayout);tS.x=tk,tS.y=tT;var tM=es.z[eZ][eY];void 0===tM?(tS.z="",tS.zLabel=""):(tS.z=tM,tS.zLabel=j.tickText(tp,tM,"hover").text);var tC=es.text&&es.text[eZ]&&es.text[eZ][eY];(void 0===tC||!1===tC)&&(tC=""),tS.text=tC;var tE=G.texttemplateString(th,tS,i._fullLayout._d3locale,tS,eu._meta||{});if(tE){var tL=tE.split("<br>"),tP=tL.length,tI=0;for(eX=0;eX<tP;eX++)tI=Math.max(tI,tL[eX].length);t_.push({l:tP,c:tI,t:tE,x:tA,y:tw,z:tM})}}}}var tO=eu.textfont,tD=tO.family,tR=tO.size,tB=i._fullLayout.font.size;if(!tR||"auto"===tR){var tz=1/0,tF=1/0,tN=0,tj=0;for(eX=0;eX<t_.length;eX++){var tU=t_[eX];if(tN=Math.max(tN,tU.l),tj=Math.max(tj,tU.c),eX<t_.length-1){var tV=t_[eX+1],tH=Math.abs(tV.x-tU.x),tq=Math.abs(tV.y-tU.y);tH&&(tz=Math.min(tz,tH)),tq&&(tF=Math.min(tF,tq))}}isFinite(tz)&&isFinite(tF)?(tz-=ef,tF-=eh,tz/=tj,tF/=tN,tz/=er/2,tF/=er,tR=Math.min(Math.floor(tz),Math.floor(tF),tB)):tR=tB}if(tR<=0||!isFinite(tR))return;selectLabels(s).data(t_).enter().append("g").classed(eo,1).append("text").attr("text-anchor","middle").each(function(o){var s=x.select(this),_=tO.color;_&&"auto"!==_||(_=J.contrast("rgba("+eP(o.z).join()+")")),s.attr("data-notex",1).call(Z.positionText,o.x,o.y-tR*(o.l*er/2-1)).call(N.font,tD,tR,_).text(o.t).call(Z.convertToTspans,i)})}})}},70035:function(i,o,s){"use strict";var x=s(39898);i.exports=function(i){x.select(i).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})}},49901:function(i){"use strict";i.exports=function(i,o,s){!1===s("zsmooth")&&(s("xgap"),s("ygap")),s("zhoverformat")}},67684:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(73972);function coordDefaults(i,o){var s=o(i);return"scaled"===(s?o(i+"type","array"):"scaled")&&(o(i+"0"),o("d"+i)),s}i.exports=function(i,o,s,N,j,G){var Z,X,J=s("z");if(j=j||"x",G=G||"y",void 0===J||!J.length)return 0;if(_.isArray1D(i.z)){Z=s(j),X=s(G);var $=_.minRowLength(Z),ee=_.minRowLength(X);if(0===$||0===ee)return 0;o._length=Math.min($,ee,J.length)}else{if(Z=coordDefaults(j,s),X=coordDefaults(G,s),!function(i){for(var o,s=!0,F=!1,N=!1,j=0;j<i.length;j++){if(o=i[j],!_.isArrayOrTypedArray(o)){s=!1;break}o.length>0&&(F=!0);for(var G=0;G<o.length;G++)if(x(o[G])){N=!0;break}}return s&&F&&N}(J))return 0;s("transpose"),o._length=null}return"heatmapgl"===i.type||(F.getComponentMethod("calendars","handleTraceDefaults")(i,o,[j,G],N),!0)}},16063:function(i,o,s){"use strict";for(var x=s(21606),_=s(50693),F=s(1426).extendFlat,N=s(30962).overrideAll,j=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],G={},Z=0;Z<j.length;Z++){var X=j[Z];G[X]=x[X]}G.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},F(G,_("",{cLetter:"z",autoColorDflt:!1})),i.exports=N(G,"calc","nested")},59560:function(i,o,s){"use strict";var x=s(9330).gl_heatmap2d,_=s(89298),F=s(78614);function Heatmap(i,o){this.scene=i,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=x(i.glplot,this.options),this.heatmap._trace=this}var N=Heatmap.prototype;N.handlePick=function(i){var o=this.options,s=o.shape,x=i.pointId,_=x%s[0],F=Math.floor(x/s[0]);return{trace:this,dataCoord:i.dataCoord,traceCoord:[o.x[_],o.y[F],o.z[x]],textLabel:this.textLabels[x],name:this.name,pointIndex:[F,_],hoverinfo:this.hoverinfo}},N.update=function(i,o){var s,x,N=o[0];this.index=i.index,this.name=i.name,this.hoverinfo=i.hoverinfo;var j=N.z;this.options.z=[].concat.apply([],j);var G=j[0].length,Z=j.length;this.options.shape=[G,Z],this.options.x=N.x,this.options.y=N.y,this.options.zsmooth=i.zsmooth;var X=function(i){for(var o=i.colorscale,s=i.zmin,x=i.zmax,_=o.length,N=Array(_),j=Array(4*_),G=0;G<_;G++){var Z=o[G],X=F(Z[1]);N[G]=s+Z[0]*(x-s);for(var J=0;J<4;J++)j[4*G+J]=X[J]}return{colorLevels:N,colorValues:j}}(i);this.options.colorLevels=X.colorLevels,this.options.colorValues=X.colorValues,this.textLabels=[].concat.apply([],i.text),this.heatmap.update(this.options);var J=this.scene.xaxis,$=this.scene.yaxis;!1===i.zsmooth&&(s={ppad:N.x[1]-N.x[0]},x={ppad:N.y[1]-N.y[0]}),i._extremes[J._id]=_.findExtremes(J,N.x,s),i._extremes[$._id]=_.findExtremes($,N.y,x)},N.dispose=function(){this.heatmap.dispose()},i.exports=function(i,o,s){var x=new Heatmap(i,o.uid);return x.update(o,s),x}},19600:function(i,o,s){"use strict";var x=s(71828),_=s(67684),F=s(1586),N=s(16063);i.exports=function(i,o,s,j){function coerce(s,_){return x.coerce(i,o,N,s,_)}if(!_(i,o,coerce,j)){o.visible=!1;return}coerce("text"),coerce("zsmooth"),F(i,o,j,coerce,{prefix:"",cLetter:"z"})}},3325:function(i,o,s){"use strict";i.exports={attributes:s(16063),supplyDefaults:s(19600),colorbar:s(61243),calc:s(90757),plot:s(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:s(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(i,o,s){"use strict";var x=s(1486),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(5386).si,j=s(41940),G=s(17656),Z=s(72406),X=s(1426).extendFlat;i.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:_("x"),yhoverformat:_("y"),text:X({},x.text,{}),hovertext:X({},x.hovertext,{}),orientation:x.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:G("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:G("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:F({},{keys:Z.eventDataKeys}),texttemplate:N({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:X({},x.textposition,{arrayOk:!1}),textfont:j({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:j({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:j({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:x.insidetextanchor,textangle:x.textangle,cliponaxis:x.cliponaxis,constraintext:x.constraintext,marker:x.marker,offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:x.selected,unselected:x.unselected,_deprecated:{bardir:x._deprecated.bardir}}},42174:function(i){"use strict";i.exports=function(i,o){for(var s=i.length,x=0,_=0;_<s;_++)o[_]?(i[_]/=o[_],x+=i[_]):i[_]=null;return x}},17656:function(i){"use strict";i.exports=function(i,o){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(i,o,s){"use strict";var x=s(92770);i.exports={count:function(i,o,s){return s[i]++,1},sum:function(i,o,s,_){var F=_[o];return x(F)?(F=Number(F),s[i]+=F,F):0},avg:function(i,o,s,_,F){var N=_[o];return x(N)&&(N=Number(N),s[i]+=N,F[i]++),0},min:function(i,o,s,_){var F=_[o];if(x(F)){if(F=Number(F),!x(s[i]))return s[i]=F,F;if(s[i]>F){var N=F-s[i];return s[i]=F,N}}return 0},max:function(i,o,s,_){var F=_[o];if(x(F)){if(F=Number(F),!x(s[i]))return s[i]=F,F;if(s[i]<F){var N=F-s[i];return s[i]=F,N}}return 0}}},40965:function(i,o,s){"use strict";var x=s(50606),_=x.ONEAVGYEAR,F=x.ONEAVGMONTH,N=x.ONEDAY,j=x.ONEHOUR,G=x.ONEMIN,Z=x.ONESEC,X=s(89298).tickIncrement;function biggestDigitChanged(i,o,s,x){if(i*o<=0)return 1/0;for(var F=Math.abs(o-i),j="date"===s.type,G=biggestGuaranteedDigitChanged(F,j),Z=0;Z<10;Z++){var X=biggestGuaranteedDigitChanged(80*G,j);if(G===X)break;if(function(i,o,s,x,F,j){if(x&&i>N){var G=dateParts(o,F,j),Z=dateParts(s,F,j),X=i===_?0:1;return G[X]!==Z[X]}return Math.floor(s/i)-Math.floor(o/i)>.1}(X,i,o,j,s,x))G=X;else break}return G}function biggestGuaranteedDigitChanged(i,o){return o&&i>Z?i>N?i>1.1*_?_:i>1.1*F?F:N:i>j?j:i>G?G:Z:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function dateParts(i,o,s){var x=o.c2d(i,_,s).split("-");return""===x[0]&&(x.unshift(),x[0]="-"+x[0]),x}i.exports=function(i,o,s,x,F){var j,G,Z=-1.1*o,J=-.1*o,$=i-J,ee=s[0],et=s[1],er=Math.min(biggestDigitChanged(ee+J,ee+$,x,F),biggestDigitChanged(et+J,et+$,x,F)),en=Math.min(biggestDigitChanged(ee+Z,ee+J,x,F),biggestDigitChanged(et+Z,et+J,x,F));if(er>en&&en<Math.abs(et-ee)/4e3?(j=er,G=!1):(j=Math.min(er,en),G=!0),"date"===x.type&&j>N){var ei=j===_?1:6,eo=j===_?"M12":"M1";return function(o,s){var N=x.c2d(o,_,F),j=N.indexOf("-",ei);j>0&&(N=N.substr(0,j));var Z=x.d2c(N,0,F);if(Z<o){var J=X(Z,eo,!1,F);(Z+J)/2<o+i&&(Z=J)}return s&&G?X(Z,eo,!0,F):Z}}return function(o,s){var x=j*Math.round(o/j);return x+j/10<o&&x+.9*j<o+i&&(x+=j),s&&G&&(x-=j),x}}},72138:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(73972),N=s(89298),j=s(75341),G=s(59575),Z=s(36362),X=s(42174),J=s(40965);function calcAllAutoBins(i,o,s,j,G){var Z,X,J,$,ee,et,er,en=j+"bins",ei=i._fullLayout,eo=o["_"+j+"bingroup"],es=ei._histogramBinOpts[eo],el="overlay"===ei.barmode,r2c=function(i){return s.r2c(i,0,$)},c2r=function(i){return s.c2r(i,0,$)},ec="date"===s.type?function(i){return i||0===i?_.cleanDate(i,null,$):null}:function(i){return x(i)?Number(i):null};function setBound(i,o,s){o[i+"Found"]?(o[i]=ec(o[i]),null===o[i]&&(o[i]=s[i])):(et[i]=o[i]=s[i],_.nestedProperty(X[0],en+"."+i).set(s[i]))}if(o["_"+j+"autoBinFinished"])delete o["_"+j+"autoBinFinished"];else{X=es.traces;var eu=[],ef=!0,eh=!1,ed=!1;for(Z=0;Z<X.length;Z++)if((J=X[Z]).visible){var ep=es.dirs[Z];ee=J["_"+ep+"pos0"]=s.makeCalcdata(J,ep),eu=_.concat(eu,ee),delete J["_"+j+"autoBinFinished"],!0===o.visible&&(ef?ef=!1:(delete J._autoBin,J["_"+j+"autoBinFinished"]=1),F.traceIs(J,"2dMap")&&(eh=!0),"histogram2dcontour"===J.type&&(ed=!0))}$=X[0][j+"calendar"];var eg=N.autoBin(eu,s,es.nbins,eh,$,es.sizeFound&&es.size);if(et=(X[0]._autoBin={})[es.dirs[0]]={},ed&&(es.size||(eg.start=c2r(N.tickIncrement(r2c(eg.start),eg.size,!0,$))),void 0===es.end&&(eg.end=c2r(N.tickIncrement(r2c(eg.end),eg.size,!1,$)))),el&&!F.traceIs(o,"2dMap")&&0===eg._dataSpan&&"category"!==s.type&&"multicategory"!==s.type){if(G)return[eg,ee,!0];eg=function(i,o,s,x,F){var N,j,G,Z=i._fullLayout,X=function(i,o){for(var s=o.xaxis,x=o.yaxis,_=o.orientation,F=[],N=i._fullData,j=0;j<N.length;j++){var G=N[j];"histogram"===G.type&&!0===G.visible&&G.orientation===_&&G.xaxis===s&&G.yaxis===x&&F.push(G)}return F}(i,o),J=!1,$=1/0,ee=[o];for(N=0;N<X.length;N++)if((j=X[N])===o)J=!0;else if(J){var et=calcAllAutoBins(i,j,s,x,!0),er=et[0],en=et[2];j["_"+x+"autoBinFinished"]=1,j["_"+x+"pos0"]=et[1],en?ee.push(j):$=Math.min($,er.size)}else $=Math.min($,(G=Z._histogramBinOpts[j["_"+x+"bingroup"]]).size||j[F].size);var ei=Array(ee.length);for(N=0;N<ee.length;N++)for(var eo=ee[N]["_"+x+"pos0"],es=0;es<eo.length;es++)if(void 0!==eo[es]){ei[N]=eo[es];break}for(isFinite($)||($=_.distinctVals(ei).minDiff),N=0;N<ee.length;N++){var el=(j=ee[N])[x+"calendar"],ec={start:s.c2r(ei[N]-$/2,0,el),end:s.c2r(ei[N]+$/2,0,el),size:$};j._input[F]=j[F]=ec,(G=Z._histogramBinOpts[j["_"+x+"bingroup"]])&&_.extendFlat(G,ec)}return o[F]}(i,o,s,j,en)}(er=J.cumulative||{}).enabled&&"include"!==er.currentbin&&("decreasing"===er.direction?eg.start=c2r(N.tickIncrement(r2c(eg.start),eg.size,!0,$)):eg.end=c2r(N.tickIncrement(r2c(eg.end),eg.size,!1,$))),es.size=eg.size,es.sizeFound||(et.size=eg.size,_.nestedProperty(X[0],en+".size").set(eg.size)),setBound("start",es,eg),setBound("end",es,eg)}ee=o["_"+j+"pos0"],delete o["_"+j+"pos0"];var em=o._input[en]||{},ey=_.extendFlat({},es),ev=es.start,ex=s.r2l(em.start),e_=void 0!==ex;if((es.startFound||e_)&&ex!==s.r2l(ev)){var ew=e_?ex:_.aggNums(Math.min,null,ee),eT={type:"category"===s.type||"multicategory"===s.type?"linear":s.type,r2l:s.r2l,dtick:es.size,tick0:ev,calendar:$,range:[ew,N.tickIncrement(ew,es.size,!1,$)].map(s.l2r)},ek=N.tickFirst(eT);ek>s.r2l(ew)&&(ek=N.tickIncrement(ek,es.size,!0,$)),ey.start=s.l2r(ek),e_||_.nestedProperty(o,en+".start").set(ey.start)}var eA=es.end,eS=s.r2l(em.end),eM=void 0!==eS;if((es.endFound||eM)&&eS!==s.r2l(eA)){var eC=eM?eS:_.aggNums(Math.max,null,ee);ey.end=s.l2r(eC),eM||_.nestedProperty(o,en+".start").set(ey.end)}var eE="autobin"+j;return!1===o._input[eE]&&(o._input[en]=_.extendFlat({},o[en]||{}),delete o._input[eE],delete o[eE]),[ey,ee]}i.exports={calc:function(i,o){var s,F,$,ee,et,er,en=[],ei=[],eo="h"===o.orientation,es=N.getFromId(i,eo?o.yaxis:o.xaxis),el=eo?"y":"x",ec={x:"y",y:"x"}[el],eu=o[el+"calendar"],ef=o.cumulative,eh=calcAllAutoBins(i,o,es,el),ed=eh[0],ep=eh[1],eg="string"==typeof ed.size,em=[],ey=eg?em:ed,ev=[],ex=[],e_=[],ew=0,eT=o.histnorm,ek=o.histfunc,eA=-1!==eT.indexOf("density");ef.enabled&&eA&&(eT=eT.replace(/ ?density$/,""),eA=!1);var eS="max"===ek||"min"===ek?null:0,eM=G.count,eC=Z[eT],eE=!1,pr2c=function(i){return es.r2c(i,0,eu)};for(_.isArrayOrTypedArray(o[ec])&&"count"!==ek&&(et=o[ec],eE="avg"===ek,eM=G[ek]),s=pr2c(ed.start),$=pr2c(ed.end)+(s-N.tickIncrement(s,ed.size,!1,eu))/1e6;s<$&&en.length<1e6&&(F=N.tickIncrement(s,ed.size,!1,eu),en.push((s+F)/2),ei.push(eS),e_.push([]),em.push(s),eA&&ev.push(1/(F-s)),eE&&ex.push(0),!(F<=s));)s=F;em.push(s),eg||"date"!==es.type||(ey={start:pr2c(ey.start),end:pr2c(ey.end),size:ey.size}),i._fullLayout._roundFnOpts||(i._fullLayout._roundFnOpts={});var eL=o["_"+el+"bingroup"],eP={leftGap:1/0,rightGap:1/0};eL&&(i._fullLayout._roundFnOpts[eL]||(i._fullLayout._roundFnOpts[eL]=eP),eP=i._fullLayout._roundFnOpts[eL]);var eI=ei.length,eO=!0,eD=eP.leftGap,eR=eP.rightGap,eB={};for(s=0;s<ep.length;s++){var ez=ep[s];(ee=_.findBin(ez,ey))>=0&&ee<eI&&(ew+=eM(ee,s,ei,et,ex),eO&&e_[ee].length&&ez!==ep[e_[ee][0]]&&(eO=!1),e_[ee].push(s),eB[s]=ee,eD=Math.min(eD,ez-em[ee]),eR=Math.min(eR,em[ee+1]-ez))}eP.leftGap=eD,eP.rightGap=eR,eO||(er=function(o,s){return function(){var x=i._fullLayout._roundFnOpts[eL];return J(x.leftGap,x.rightGap,em,es,eu)(o,s)}}),eE&&(ew=X(ei,ex)),eC&&eC(ei,ew,ev),ef.enabled&&function(i,o,s){var x,_,F;function firstHalfPoint(o){F=i[o],i[o]/=2}function nextHalfPoint(o){_=i[o],i[o]=F+_/2,F+=_}if("half"===s){if("increasing"===o)for(firstHalfPoint(0),x=1;x<i.length;x++)nextHalfPoint(x);else for(firstHalfPoint(i.length-1),x=i.length-2;x>=0;x--)nextHalfPoint(x)}else if("increasing"===o){for(x=1;x<i.length;x++)i[x]+=i[x-1];"exclude"===s&&(i.unshift(0),i.pop())}else{for(x=i.length-2;x>=0;x--)i[x]+=i[x+1];"exclude"===s&&(i.push(0),i.shift())}}(ei,ef.direction,ef.currentbin);var eF=Math.min(en.length,ei.length),eN=[],ej=0,eU=eF-1;for(s=0;s<eF;s++)if(ei[s]){ej=s;break}for(s=eF-1;s>=ej;s--)if(ei[s]){eU=s;break}for(s=ej;s<=eU;s++)if(x(en[s])&&x(ei[s])){var eV={p:en[s],s:ei[s],b:0};ef.enabled||(eV.pts=e_[s],eO?eV.ph0=eV.ph1=e_[s].length?ep[e_[s][0]]:en[s]:(o._computePh=!0,eV.ph0=er(em[s]),eV.ph1=er(em[s+1],!0))),eN.push(eV)}return 1===eN.length&&(eN[0].width1=N.tickIncrement(eN[0].p,ed.size,!1,eu)-eN[0].p),j(eN,o),_.isArrayOrTypedArray(o.selectedpoints)&&_.tagSelected(eN,o,eB),eN},calcAllAutoBins:calcAllAutoBins}},72406:function(i){"use strict";i.exports={eventDataKeys:["binNumber"]}},82222:function(i,o,s){"use strict";var x=s(71828),_=s(41675),F=s(73972).traceIs,N=s(26125),j=x.nestedProperty,G=s(99082).getAxisGroup,Z=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],X=["x","y"];i.exports=function(i,o){var s=o._histogramBinOpts={},J=[],$={},ee=[];function coerce(i,o){return x.coerce(ec._input,ec,ec._module.attributes,i,o)}function orientation2binDir(i){return"v"===i.orientation?"x":"y"}function fillBinOpts(i,F,N){var j=i.uid+"__"+N;F||(F=j);var G=_.getFromTrace({_fullLayout:o},i,N).type,Z=i[N+"calendar"]||"",X=s[F],J=!0;X&&(G===X.axType&&Z===X.calendar?(J=!1,X.traces.push(i),X.dirs.push(N)):(F=j,G!==X.axType&&x.warn(["Attempted to group the bins of trace",i.index,"set on a","type:"+G,"axis","with bins on","type:"+X.axType,"axis."].join(" ")),Z!==X.calendar&&x.warn(["Attempted to group the bins of trace",i.index,"set with a",Z,"calendar","with bins",X.calendar?"on a "+X.calendar+" calendar":"w/o a set calendar"].join(" ")))),J&&(s[F]={traces:[i],dirs:[N],axType:G,calendar:i[N+"calendar"]||""}),i["_"+N+"bingroup"]=F}for(ed=0;ed<i.length;ed++)F(ec=i[ed],"histogram")&&(J.push(ec),delete ec._xautoBinFinished,delete ec._yautoBinFinished,F(ec,"2dMap")||N(ec._input,ec,o,coerce));var et=o._alignmentOpts||{};for(ed=0;ed<J.length;ed++){if(ec=J[ed],ef="",!F(ec,"2dMap")){if(eh=orientation2binDir(ec),"group"===o.barmode&&ec.alignmentgroup){var er=G(o,ec[eh+"axis"])+ec.orientation;(et[er]||{})[ec.alignmentgroup]&&(ef=er)}ef||"overlay"===o.barmode||(ef=G(o,ec.xaxis)+G(o,ec.yaxis)+orientation2binDir(ec))}ef?($[ef]||($[ef]=[]),$[ef].push(ec)):ee.push(ec)}for(ef in $){if(1===(eu=$[ef]).length){ee.push(eu[0]);continue}var en=!1;for(eu.length&&(ec=eu[0],en=coerce("bingroup")),ef=en||ef,ed=0;ed<eu.length;ed++){var ei=(ec=eu[ed])._input.bingroup;ei&&ei!==ef&&x.warn(["Trace",ec.index,"must match","within bingroup",ef+".","Ignoring its bingroup:",ei,"setting."].join(" ")),ec.bingroup=ef,fillBinOpts(ec,ef,orientation2binDir(ec))}}for(ed=0;ed<ee.length;ed++){ec=ee[ed];var eo=coerce("bingroup");if(F(ec,"2dMap"))for(eg=0;eg<2;eg++){var es=coerce((eh=X[eg])+"bingroup",eo?eo+"__"+eh:null);fillBinOpts(ec,es,eh)}else fillBinOpts(ec,eo,orientation2binDir(ec))}for(ef in s){var el=s[ef];for(ep=0,eu=el.traces;ep<Z.length;ep++){var ec,eu,ef,eh,ed,ep,eg,em,ey,ev=Z[ep],ex=ev.name;if("nbins"!==ex||!el.sizeFound){for(ed=0;ed<eu.length;ed++){if(ec=eu[ed],eh=el.dirs[ed],em=ev.aStr[eh],void 0!==j(ec._input,em).get()){el[ex]=coerce(em),el[ex+"Found"]=!0;break}(ey=(ec._autoBin||{})[eh]||{})[ex]&&j(ec,em).set(ey[ex])}if("start"===ex||"end"===ex)for(;ed<eu.length;ed++)(ec=eu[ed])["_"+eh+"bingroup"]&&coerce(em,(ey=(ec._autoBin||{})[eh]||{})[ex]);"nbins"!==ex||el.sizeFound||el.nbinsFound||(ec=eu[0],el[ex]=coerce(em))}}}}},11385:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(7901),N=s(90769).handleText,j=s(98340),G=s(7745);i.exports=function(i,o,s,Z){function coerce(s,x){return _.coerce(i,o,G,s,x)}var X=coerce("x"),J=coerce("y");coerce("cumulative.enabled")&&(coerce("cumulative.direction"),coerce("cumulative.currentbin")),coerce("text");var $=coerce("textposition");N(i,o,Z,coerce,$,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat");var ee=coerce("orientation",J&&!X?"h":"v"),et="v"===ee?"x":"y",er=X&&J?Math.min(_.minRowLength(X)&&_.minRowLength(J)):_.minRowLength(o[et]||[]);if(!er){o.visible=!1;return}o._length=er,x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],Z),o["v"===ee?"y":"x"]&&coerce("histfunc"),coerce("histnorm"),coerce("autobin"+et),j(i,o,coerce,s,Z),_.coerceSelectionMarkerOpacity(o,coerce);var en=(o.marker.line||{}).color,ei=x.getComponentMethod("errorbars","supplyDefaults");ei(i,o,en||F.defaultLine,{axis:"y"}),ei(i,o,en||F.defaultLine,{axis:"x",inherit:"y"})}},84402:function(i){"use strict";i.exports=function(i,o,s,x,_){if(i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"zLabelVal"in o&&(i.z=o.zLabelVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),!(s.cumulative||{}).enabled){var F,N=Array.isArray(_)?x[0].pts[_[0]][_[1]]:x[_].pts;if(i.pointNumbers=N,i.binNumber=i.pointNumber,delete i.pointNumber,delete i.pointIndex,s._indexToPoints){F=[];for(var j=0;j<N.length;j++)F=F.concat(s._indexToPoints[N[j]])}else F=N;i.pointIndices=F}return i}},76440:function(i,o,s){"use strict";var x=s(95423).hoverPoints,_=s(89298).hoverLabelText;i.exports=function(i,o,s,F,N){var j=x(i,o,s,F,N);if(j){var G=(i=j[0]).cd[i.index],Z=i.cd[0].trace;if(!Z.cumulative.enabled){var X="h"===Z.orientation?"y":"x";i[X+"Label"]=_(i[X+"a"],[G.ph0,G.ph1],Z[X+"hoverformat"])}return j}}},36071:function(i,o,s){"use strict";i.exports={attributes:s(7745),layoutAttributes:s(43641),supplyDefaults:s(11385),crossTraceDefaults:s(82222),supplyLayoutDefaults:s(13957),calc:s(72138).calc,crossTraceCalc:s(11661).crossTraceCalc,plot:s(17295).plot,layerName:"barlayer",style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,colorbar:s(4898),hoverPoints:s(76440),selectPoints:s(81974),eventData:s(84402),moduleType:"trace",name:"histogram",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(i){"use strict";i.exports={percent:function(i,o){for(var s=i.length,x=100/o,_=0;_<s;_++)i[_]*=x},probability:function(i,o){for(var s=i.length,x=0;x<s;x++)i[x]/=o},density:function(i,o,s,x){var _=i.length;x=x||1;for(var F=0;F<_;F++)i[F]*=s[F]*x},"probability density":function(i,o,s,x){var _=i.length;x&&(o/=x);for(var F=0;F<_;F++)i[F]*=s[F]/o}}},35361:function(i,o,s){"use strict";var x=s(7745),_=s(17656),F=s(21606),N=s(9012),j=s(12663).axisHoverFormat,G=s(5386).fF,Z=s(5386).si,X=s(50693),J=s(1426).extendFlat;i.exports=J({x:x.x,y:x.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:x.histnorm,histfunc:x.histfunc,nbinsx:x.nbinsx,xbins:_("x"),nbinsy:x.nbinsy,ybins:_("y"),autobinx:x.autobinx,autobiny:x.autobiny,bingroup:J({},x.bingroup,{}),xbingroup:J({},x.bingroup,{}),ybingroup:J({},x.bingroup,{}),xgap:F.xgap,ygap:F.ygap,zsmooth:F.zsmooth,xhoverformat:j("x"),yhoverformat:j("y"),zhoverformat:j("z",1),hovertemplate:G({},{keys:"z"}),texttemplate:Z({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:F.textfont,showlegend:J({},N.showlegend,{dflt:!1})},X("",{cLetter:"z",autoColorDflt:!1}))},17562:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(59575),N=s(36362),j=s(42174),G=s(40965),Z=s(72138).calcAllAutoBins;function makeIncrements(i,o,s,x){var _,F=Array(i);if(x)for(_=0;_<i;_++)F[_]=1/(o[_+1]-o[_]);else{var N=1/s;for(_=0;_<i;_++)F[_]=N}return F}function binsToCalc(i,o){return{start:i(o.start),end:i(o.end),size:o.size}}function getRanges(i,o,s,x,_,F){var N,j=i.length-1,Z=Array(j),X=G(s,x,i,_,F);for(N=0;N<j;N++){var J=(o||[])[N];Z[N]=void 0===J?[X(i[N]),X(i[N+1],!0)]:[J,J]}return Z}i.exports=function(i,o){var s,G,X,J,$,ee,et=_.getFromId(i,o.xaxis),er=_.getFromId(i,o.yaxis),en=o.xcalendar,ei=o.ycalendar,xr2c=function(i){return et.r2c(i,0,en)},yr2c=function(i){return er.r2c(i,0,ei)},eo=Z(i,o,et,"x"),es=eo[0],el=eo[1],ec=Z(i,o,er,"y"),eu=ec[0],ef=ec[1],eh=o._length;el.length>eh&&el.splice(eh,el.length-eh),ef.length>eh&&ef.splice(eh,ef.length-eh);var ed=[],ep=[],eg=[],em="string"==typeof es.size,ey="string"==typeof eu.size,ev=[],ex=[],e_=em?ev:es,ew=ey?ex:eu,eT=0,ek=[],eA=[],eS=o.histnorm,eM=o.histfunc,eC=-1!==eS.indexOf("density"),eE="max"===eM||"min"===eM?null:0,eL=F.count,eP=N[eS],eI=!1,eO=[],eD=[],eR="z"in o?o.z:"marker"in o&&Array.isArray(o.marker.color)?o.marker.color:"";eR&&"count"!==eM&&(eI="avg"===eM,eL=F[eM]);var eB=es.size,ez=xr2c(es.start),eF=xr2c(es.end)+(ez-_.tickIncrement(ez,eB,!1,en))/1e6;for(X=ez;X<eF;X=_.tickIncrement(X,eB,!1,en))ep.push(eE),ev.push(X),eI&&eg.push(0);ev.push(X);var eN=ep.length,ej=(X-ez)/eN,eU=(s=ez+ej/2,et.c2r(s,0,en)),eV=eu.size,eH=yr2c(eu.start),eG=yr2c(eu.end)+(eH-_.tickIncrement(eH,eV,!1,ei))/1e6;for(X=eH;X<eG;X=_.tickIncrement(X,eV,!1,ei)){ed.push(ep.slice()),ex.push(X);var eW=Array(eN);for(J=0;J<eN;J++)eW[J]=[];eA.push(eW),eI&&ek.push(eg.slice())}ex.push(X);var eZ=ed.length,eY=(X-eH)/eZ,eX=(G=eH+eY/2,er.c2r(G,0,ei));eC&&(eO=makeIncrements(ep.length,e_,ej,em),eD=makeIncrements(ed.length,ew,eY,ey)),em||"date"!==et.type||(e_=binsToCalc(xr2c,e_)),ey||"date"!==er.type||(ew=binsToCalc(yr2c,ew));var eK=!0,eJ=!0,e$=Array(eN),eQ=Array(eZ),e0=1/0,e1=1/0,e2=1/0,e3=1/0;for(X=0;X<eh;X++){var e5=el[X],e4=ef[X];$=x.findBin(e5,e_),ee=x.findBin(e4,ew),$>=0&&$<eN&&ee>=0&&ee<eZ&&(eT+=eL($,X,ed[ee],eR,ek[ee]),eA[ee][$].push(X),eK&&(void 0===e$[$]?e$[$]=e5:e$[$]!==e5&&(eK=!1)),eJ&&(void 0===eQ[ee]?eQ[ee]=e4:eQ[ee]!==e4&&(eJ=!1)),e0=Math.min(e0,e5-ev[$]),e1=Math.min(e1,ev[$+1]-e5),e2=Math.min(e2,e4-ex[ee]),e3=Math.min(e3,ex[ee+1]-e4))}if(eI)for(ee=0;ee<eZ;ee++)eT+=j(ed[ee],ek[ee]);if(eP)for(ee=0;ee<eZ;ee++)eP(ed[ee],eT,eO,eD[ee]);return{x:el,xRanges:getRanges(ev,eK&&e$,e0,e1,et,en),x0:eU,dx:ej,y:ef,yRanges:getRanges(ex,eJ&&eQ,e2,e3,er,ei),y0:eX,dy:eY,z:ed,pts:eA}}},93888:function(i,o,s){"use strict";var x=s(71828),_=s(75238),F=s(49901),N=s(1586),j=s(58623),G=s(35361);i.exports=function(i,o,s,Z){function coerce(s,_){return x.coerce(i,o,G,s,_)}_(i,o,coerce,Z),!1!==o.visible&&(F(i,o,coerce,Z),N(i,o,Z,coerce,{prefix:"",cLetter:"z"}),coerce("hovertemplate"),j(coerce,Z),coerce("xhoverformat"),coerce("yhoverformat"))}},76128:function(i,o,s){"use strict";var x=s(46248),_=s(89298).hoverLabelText;i.exports=function(i,o,s,F,N){var j=x(i,o,s,F,N);if(j){var G=(i=j[0]).index,Z=G[0],X=G[1],J=i.cd[0],$=J.trace,ee=J.xRanges[X],et=J.yRanges[Z];return i.xLabel=_(i.xa,[ee[0],ee[1]],$.xhoverformat),i.yLabel=_(i.ya,[et[0],et[1]],$.yhoverformat),j}}},43905:function(i,o,s){"use strict";i.exports={attributes:s(35361),supplyDefaults:s(93888),crossTraceDefaults:s(82222),calc:s(90757),plot:s(50347),layerName:"heatmaplayer",colorbar:s(61243),style:s(70035),hoverPoints:s(76128),eventData:s(84402),moduleType:"trace",name:"histogram2d",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(i,o,s){"use strict";var x=s(73972),_=s(71828);i.exports=function(i,o,s,F){var N=s("x"),j=s("y"),G=_.minRowLength(N),Z=_.minRowLength(j);if(!G||!Z){o.visible=!1;return}o._length=Math.min(G,Z),x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],F),(s("z")||s("marker.color"))&&s("histfunc"),s("histnorm"),s("autobinx"),s("autobiny")}},99066:function(i,o,s){"use strict";var x=s(35361),_=s(70600),F=s(50693),N=s(12663).axisHoverFormat,j=s(1426).extendFlat;i.exports=j({x:x.x,y:x.y,z:x.z,marker:x.marker,histnorm:x.histnorm,histfunc:x.histfunc,nbinsx:x.nbinsx,xbins:x.xbins,nbinsy:x.nbinsy,ybins:x.ybins,autobinx:x.autobinx,autobiny:x.autobiny,bingroup:x.bingroup,xbingroup:x.xbingroup,ybingroup:x.ybingroup,autocontour:_.autocontour,ncontours:_.ncontours,contours:_.contours,line:{color:_.line.color,width:j({},_.line.width,{dflt:.5}),dash:_.line.dash,smoothing:_.line.smoothing,editType:"plot"},xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z",1),hovertemplate:x.hovertemplate,texttemplate:_.texttemplate,textfont:_.textfont},F("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(i,o,s){"use strict";var x=s(71828),_=s(75238),F=s(67217),N=s(8724),j=s(58623),G=s(99066);i.exports=function(i,o,s,Z){function coerce(s,_){return x.coerce(i,o,G,s,_)}_(i,o,coerce,Z),!1!==o.visible&&(F(i,o,coerce,function(s){return x.coerce2(i,o,G,s)}),N(i,o,coerce,Z),coerce("xhoverformat"),coerce("yhoverformat"),coerce("hovertemplate"),o.contours&&"heatmap"===o.contours.coloring&&j(coerce,Z))}},35902:function(i,o,s){"use strict";i.exports={attributes:s(99066),supplyDefaults:s(62654),crossTraceDefaults:s(82222),calc:s(27529),plot:s(29854).plot,layerName:"contourlayer",style:s(84426),colorbar:s(90654),hoverPoints:s(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(50693),N=s(27670).Y,j=s(34e3),G=s(57564),Z=s(45802),X=s(43473),J=s(1426).extendFlat,$=s(79952).u;i.exports={labels:G.labels,parents:G.parents,values:G.values,branchvalues:G.branchvalues,count:G.count,level:G.level,maxdepth:G.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:Z.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:J({colors:G.marker.colors,line:G.marker.line,pattern:$,editType:"calc"},F("marker",{colorAttr:"colors",anim:!1})),leaf:G.leaf,pathbar:Z.pathbar,text:j.text,textinfo:G.textinfo,texttemplate:_({editType:"plot"},{keys:X.eventDataKeys.concat(["label","value"])}),hovertext:j.hovertext,hoverinfo:G.hoverinfo,hovertemplate:x({},{keys:X.eventDataKeys}),textfont:j.textfont,insidetextfont:j.insidetextfont,outsidetextfont:Z.outsidetextfont,textposition:Z.textposition,sort:j.sort,root:G.root,domain:N({name:"icicle",trace:!0,editType:"calc"})}},96346:function(i,o,s){"use strict";var x=s(74875);o.name="icicle",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},46584:function(i,o,s){"use strict";var x=s(52147);o.y=function(i,o){return x.calc(i,o)},o.T=function(i){return x._runCrossTraceCalc("icicle",i)}},56524:function(i,o,s){"use strict";var x=s(71828),_=s(46291),F=s(7901),N=s(27670).c,j=s(90769).handleText,G=s(97313).TEXTPAD,Z=s(37434).handleMarkerDefaults,X=s(21081),J=X.hasColorscale,$=X.handleDefaults;i.exports=function(i,o,s,X){function coerce(s,F){return x.coerce(i,o,_,s,F)}var ee=coerce("labels"),et=coerce("parents");if(!ee||!ee.length||!et||!et.length){o.visible=!1;return}var er=coerce("values");coerce(er&&er.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),coerce("tiling.orientation"),coerce("tiling.flip"),coerce("tiling.pad");var en=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(en)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate");var ei=coerce("pathbar.visible");j(i,o,X,coerce,"auto",{hasPathbar:ei,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("textposition"),Z(i,o,X,coerce);var eo=o._hasColorscale=J(i,"marker","colors")||(i.marker||{}).coloraxis;eo&&$(i,o,X,coerce,{prefix:"marker.",cLetter:"c"}),coerce("leaf.opacity",eo?1:.7),o._hovered={marker:{line:{width:2,color:F.contrast(X.paper_bgcolor)}}},ei&&(coerce("pathbar.thickness",o.pathbar.textfont.size+2*G),coerce("pathbar.side"),coerce("pathbar.edgeshape")),coerce("sort"),coerce("root.color"),N(o,X,coerce),o._length=null}},90666:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(63893),j=s(21538),G=s(82454).styleOne,Z=s(43473),X=s(2791),J=s(83523),$=s(24714).formatSliceLabel;i.exports=function(i,o,s,ee,et){var er=et.width,en=et.height,ei=et.viewX,eo=et.viewY,es=et.pathSlice,el=et.toMoveInsideSlice,ec=et.strTransform,eu=et.hasTransition,ef=et.handleSlicesExit,eh=et.makeUpdateSliceInterpolator,ed=et.makeUpdateTextInterpolator,ep=et.prevEntry,eg=i._context.staticPlot,em=i._fullLayout,ey=o[0].trace,ev=-1!==ey.textposition.indexOf("left"),ex=-1!==ey.textposition.indexOf("right"),e_=-1!==ey.textposition.indexOf("bottom"),ew=j(s,[er,en],{flipX:ey.tiling.flip.indexOf("x")>-1,flipY:ey.tiling.flip.indexOf("y")>-1,orientation:ey.tiling.orientation,pad:{inner:ey.tiling.pad},maxDepth:ey._maxDepth}).descendants(),eT=1/0,ek=-1/0;ew.forEach(function(i){var o=i.depth;o>=ey._maxDepth?(i.x0=i.x1=(i.x0+i.x1)/2,i.y0=i.y1=(i.y0+i.y1)/2):(eT=Math.min(eT,o),ek=Math.max(ek,o))}),ee=ee.data(ew,X.getPtId),ey._maxVisibleLayers=isFinite(ek)?ek-eT+1:0,ee.enter().append("g").classed("slice",!0),ef(ee,!1,{},[er,en],es),ee.order();var eA=null;if(eu&&ep){var eS=X.getPtId(ep);ee.each(function(i){null===eA&&X.getPtId(i)===eS&&(eA={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})})}var getRefRect=function(){return eA||{x0:0,x1:er,y0:0,y1:en}},eM=ee;return eu&&(eM=eM.transition().each("end",function(){var o=x.select(this);X.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),eM.each(function(j){j._x0=ei(j.x0),j._x1=ei(j.x1),j._y0=eo(j.y0),j._y1=eo(j.y1),j._hoverX=ei(j.x1-ey.tiling.pad),j._hoverY=e_?eo(j.y1-ey.tiling.pad/2):eo(j.y0+ey.tiling.pad/2);var ee=x.select(this),et=_.ensureSingle(ee,"path","surface",function(i){i.style("pointer-events",eg?"none":"all")});eu?et.transition().attrTween("d",function(i){var o=eh(i,!1,getRefRect(),[er,en],{orientation:ey.tiling.orientation,flipX:ey.tiling.flip.indexOf("x")>-1,flipY:ey.tiling.flip.indexOf("y")>-1});return function(i){return es(o(i))}}):et.attr("d",es),ee.call(J,s,i,o,{styleOne:G,eventDataKeys:Z.eventDataKeys,transitionTime:Z.CLICK_TRANSITION_TIME,transitionEasing:Z.CLICK_TRANSITION_EASING}).call(X.setSliceCursor,i,{isTransitioning:i._transitioning}),et.call(G,j,ey,i,{hovered:!1}),j.x0===j.x1||j.y0===j.y1?j._text="":j._text=$(j,s,ey,o,em)||"";var ef=_.ensureSingle(ee,"g","slicetext"),ep=_.ensureSingle(ef,"text","",function(i){i.attr("data-notex",1)}),ew=_.ensureUniformFontSize(i,X.determineTextFont(ey,j,em.font));ep.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",ex?"end":ev?"start":"middle").call(F.font,ew).call(N.convertToTspans,i),j.textBB=F.bBox(ep.node()),j.transform=el(j,{fontSize:ew.size}),j.transform.fontSize=ew.size,eu?ep.transition().attrTween("transform",function(i){var o=ed(i,!1,getRefRect(),[er,en]);return function(i){return ec(o(i))}}):ep.attr("transform",ec(j))}),eA}},69816:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"icicle",basePlotModule:s(96346),categories:[],animatable:!0,attributes:s(46291),layoutAttributes:s(92894),supplyDefaults:s(56524),supplyLayoutDefaults:s(21070),calc:s(46584).y,crossTraceCalc:s(46584).T,plot:s(85596),style:s(82454).style,colorbar:s(4898),meta:{}}},92894:function(i){"use strict";i.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(i,o,s){"use strict";var x=s(71828),_=s(92894);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("iciclecolorway",o.colorway),coerce("extendiciclecolors")}},21538:function(i,o,s){"use strict";var x=s(674),_=s(14102);i.exports=function(i,o,s){var F=s.flipX,N=s.flipY,j="h"===s.orientation,G=s.maxDepth,Z=o[0],X=o[1];G&&(Z=(i.height+1)*o[0]/Math.min(i.height+1,G),X=(i.height+1)*o[1]/Math.min(i.height+1,G));var J=x.partition().padding(s.pad.inner).size(j?[o[1],Z]:[o[0],X])(i);return(j||F||N)&&_(J,o,{swapXY:j,flipX:F,flipY:N}),J}},85596:function(i,o,s){"use strict";var x=s(80694),_=s(90666);i.exports=function(i,o,s,F){return x(i,o,s,F,{type:"icicle",drawDescendants:_})}},82454:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(71828),N=s(72597).resizeText,j=s(43467);function styleOne(i,o,s,x){var N=o.data.data,G=!o.children,Z=N.i,X=F.castOption(s,Z,"marker.line.color")||_.defaultLine,J=F.castOption(s,Z,"marker.line.width")||0;i.call(j,o,s,x).style("stroke-width",J).call(_.stroke,X).style("opacity",G?s.leaf.opacity:null)}i.exports={style:function(i){var o=i._fullLayout._iciclelayer.selectAll(".trace");N(i,o,"icicle"),o.each(function(o){var s=x.select(this),_=o[0].trace;s.style("opacity",_.opacity),s.selectAll("path.surface").each(function(o){x.select(this).call(styleOne,o,_,i)})})},styleOne:styleOne}},17230:function(i,o,s){"use strict";for(var x=s(9012),_=s(5386).fF,F=s(1426).extendFlat,N=s(51877).colormodel,j=["rgb","rgba","rgba256","hsl","hsla"],G=[],Z=[],X=0;X<j.length;X++){var J=N[j[X]];G.push("For the `"+j[X]+"` colormodel, it is ["+(J.zminDflt||J.min).join(", ")+"]."),Z.push("For the `"+j[X]+"` colormodel, it is ["+(J.zmaxDflt||J.max).join(", ")+"].")}i.exports=F({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:j,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:F({},x.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:_({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(i,o,s){"use strict";var x=s(71828),_=s(51877),F=s(92770),N=s(89298),j=s(71828).maxRowLength,G=s(67395).A;i.exports=function(i,o){if(o._hasZ)s=o.z.length,Z=j(o.z);else if(o._hasSource){var s,Z,X,J=G(o.source);s=J.height,Z=J.width}var $=N.getFromId(i,o.xaxis||"x"),ee=N.getFromId(i,o.yaxis||"y"),et=$.d2c(o.x0)-o.dx/2,er=ee.d2c(o.y0)-o.dy/2,en=[et,et+Z*o.dx],ei=[er,er+s*o.dy];if($&&"log"===$.type)for(X=0;X<Z;X++)en.push(et+X*o.dx);if(ee&&"log"===ee.type)for(X=0;X<s;X++)ei.push(er+X*o.dy);return o._extremes[$._id]=N.findExtremes($,en),o._extremes[ee._id]=N.findExtremes(ee,ei),o._scaler=function(i){var o=_.colormodel[i.colormodel],s=(o.colormodel||i.colormodel).length;i._sArray=[];for(var N=0;N<s;N++)o.min[N]!==i.zmin[N]||o.max[N]!==i.zmax[N]?i._sArray.push(function(i,o,s,_){return function(F){return x.constrain((F-i)*o,s,_)}}(i.zmin[N],(o.max[N]-o.min[N])/(i.zmax[N]-i.zmin[N]),o.min[N],o.max[N])):i._sArray.push(function(i,o){return function(s){return x.constrain(s,i,o)}}(o.min[N],o.max[N]));return function(o){for(var x=o.slice(0,s),_=0;_<s;_++){var N=x[_];if(!F(N))return!1;x[_]=i._sArray[_](N)}return x}}(o),[{x0:et,y0:er,z:o.z,w:Z,h:s}]}},51877:function(i){"use strict";i.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(i){return i.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(i){var o=i.slice(0,3);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(i){var o=i.slice(0,4);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xb0","%","%",""]}}}},13245:function(i,o,s){"use strict";var x=s(71828),_=s(17230),F=s(51877),N=s(25095).IMAGE_URL_PREFIX;i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("source"),o.source&&!o.source.match(N)&&delete o.source,o._hasSource=!!o.source;var s,j=coerce("z");if(o._hasZ=!(void 0===j||!j.length||!j[0]||!j[0].length),!o._hasZ&&!o._hasSource){o.visible=!1;return}coerce("x0"),coerce("y0"),coerce("dx"),coerce("dy"),o._hasZ?(coerce("colormodel","rgb"),coerce("zmin",(s=F.colormodel[o.colormodel]).zminDflt||s.min),coerce("zmax",s.zmaxDflt||s.max)):o._hasSource&&(o.colormodel="rgba256",s=F.colormodel[o.colormodel],o.zmin=s.zminDflt,o.zmax=s.zmaxDflt),coerce("zsmooth"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),o._length=null}},30835:function(i){"use strict";i.exports=function(i,o){return"xVal"in o&&(i.x=o.xVal),"yVal"in o&&(i.y=o.yVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i.color=o.color,i.colormodel=o.trace.colormodel,i.z||(i.z=o.color),i}},67395:function(i,o,s){"use strict";var x=s(33575),_=s(25095).IMAGE_URL_PREFIX,F=s(12856).Buffer;o.A=function(i){var o=i.replace(_,"");return x(new F(o,"base64"))}},28749:function(i,o,s){"use strict";var x=s(30211),_=s(71828),F=s(51877);i.exports=function(i,o,s){var N,j,G,Z=i.cd[0],X=Z.trace,J=i.xa,$=i.ya;if(!(x.inbox(o-Z.x0,o-(Z.x0+Z.w*X.dx),0)>0||x.inbox(s-Z.y0,s-(Z.y0+Z.h*X.dy),0)>0)){var ee=Math.floor((o-Z.x0)/X.dx),et=Math.floor(Math.abs(s-Z.y0)/X.dy);if(X._hasZ?N=Z.z[et][ee]:X._hasSource&&(N=X._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(ee,et,1,1).data),N){var er=Z.hi||X.hoverinfo;if(er){var en=er.split("+");-1!==en.indexOf("all")&&(en=["color"]),-1!==en.indexOf("color")&&(j=!0)}var ei=F.colormodel[X.colormodel],eo=ei.colormodel||X.colormodel,es=eo.length,el=X._scaler(N),ec=ei.suffix,eu=[];(X.hovertemplate||j)&&(eu.push("["+[el[0]+ec[0],el[1]+ec[1],el[2]+ec[2]].join(", ")),4===es&&eu.push(", "+el[3]+ec[3]),eu.push("]"),eu=eu.join(""),i.extraText=eo.toUpperCase()+": "+eu),Array.isArray(X.hovertext)&&Array.isArray(X.hovertext[et])?G=X.hovertext[et][ee]:Array.isArray(X.text)&&Array.isArray(X.text[et])&&(G=X.text[et][ee]);var ef=$.c2p(Z.y0+(et+.5)*X.dy),eh=Z.x0+(ee+.5)*X.dx,ed=Z.y0+(et+.5)*X.dy,ep="["+N.slice(0,X.colormodel.length).join(", ")+"]";return[_.extendFlat(i,{index:[et,ee],x0:J.c2p(Z.x0+ee*X.dx),x1:J.c2p(Z.x0+(ee+1)*X.dx),y0:ef,y1:ef,color:el,xVal:eh,xLabelVal:eh,yVal:ed,yLabelVal:ed,zLabelVal:ep,text:G,hovertemplateLabels:{zLabel:ep,colorLabel:eu,"color[0]Label":el[0]+ec[0],"color[1]Label":el[1]+ec[1],"color[2]Label":el[2]+ec[2],"color[3]Label":el[3]+ec[3]}})]}}}},94507:function(i,o,s){"use strict";i.exports={attributes:s(17230),supplyDefaults:s(13245),calc:s(71113),plot:s(60775),style:s(12826),hoverPoints:s(28749),eventData:s(30835),moduleType:"trace",name:"image",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=_.strTranslate,N=s(77922),j=s(51877),G=s(3883),Z=s(32396).STYLE;i.exports=function(i,o,s,X){var J=o.xaxis,$=o.yaxis,ee=!i._context._exportedPlot&&G();_.makeTraceGroups(X,s,"im").each(function(o){var s,G,X,et,er,en,ei=x.select(this),eo=o[0],es=eo.trace,el=("fast"===es.zsmooth||!1===es.zsmooth&&ee)&&!es._hasZ&&es._hasSource&&"linear"===J.type&&"linear"===$.type;es._realImage=el;var ec=eo.z,eu=eo.x0,ef=eo.y0,eh=eo.w,ed=eo.h,ep=es.dx,eg=es.dy;for(en=0;void 0===s&&en<eh;)s=J.c2p(eu+en*ep),en++;for(en=eh;void 0===G&&en>0;)G=J.c2p(eu+en*ep),en--;for(en=0;void 0===et&&en<ed;)et=$.c2p(ef+en*eg),en++;for(en=ed;void 0===er&&en>0;)er=$.c2p(ef+en*eg),en--;G<s&&(X=G,G=s,s=X),er<et&&(X=et,et=er,er=X),el||(s=Math.max(-.5*J._length,s),G=Math.min(1.5*J._length,G),et=Math.max(-.5*$._length,et),er=Math.min(1.5*$._length,er));var em=Math.round(G-s),ey=Math.round(er-et);if(em<=0||ey<=0){ei.selectAll("image").data([]).exit().remove();return}function drawMagnifiedPixelsOnCanvas(i){var o,x=document.createElement("canvas");x.width=em,x.height=ey;var F=x.getContext("2d",{willReadFrequently:!0}),ipx=function(i){return _.constrain(Math.round(J.c2p(eu+i*ep)-s),0,em)},jpx=function(i){return _.constrain(Math.round($.c2p(ef+i*eg)-et),0,ey)},N=j.colormodel[es.colormodel],G=N.colormodel||es.colormodel,Z=N.fmt;for(en=0;en<eo.w;en++){var X=ipx(en),ee=ipx(en+1);if(!(ee===X||isNaN(ee)||isNaN(X)))for(var er=0;er<eo.h;er++){var ei=jpx(er),el=jpx(er+1);!(el===ei||isNaN(el)||isNaN(ei))&&i(en,er)&&((o=es._scaler(i(en,er)))?F.fillStyle=G+"("+Z(o).join(",")+")":F.fillStyle="rgba(0,0,0,0)",F.fillRect(X,ei,ee-X,el-ei))}}return x}var ev=ei.selectAll("image").data([o]);ev.enter().append("svg:image").attr({xmlns:N.svg,preserveAspectRatio:"none"}),ev.exit().remove();var ex=!1===es.zsmooth?Z:"";if(el){var e_=_.simpleMap(J.range,J.r2l),ew=_.simpleMap($.range,$.r2l),eT=e_[1]<e_[0],ek=ew[1]>ew[0];if(eT||ek){var eA=s+em/2,eS=et+ey/2;ex+="transform:"+F(eA+"px",eS+"px")+"scale("+(eT?-1:1)+","+(ek?-1:1)+")"+F(-eA+"px",-eS+"px")+";"}}ev.attr("style",ex);var eM=new Promise(function(i){if(es._hasZ)i();else if(es._hasSource){if(es._canvas&&es._canvas.el.width===eh&&es._canvas.el.height===ed&&es._canvas.source===es.source)i();else{var o=document.createElement("canvas");o.width=eh,o.height=ed;var s=o.getContext("2d",{willReadFrequently:!0});es._image=es._image||new Image;var x=es._image;x.onload=function(){s.drawImage(x,0,0),es._canvas={el:o,source:es.source},i()},x.setAttribute("src",es.source)}}}).then(function(){var i;if(es._hasZ)i=drawMagnifiedPixelsOnCanvas(function(i,o){return ec[o][i]}).toDataURL("image/png");else if(es._hasSource){if(el)i=es.source;else{var o=es._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,eh,ed).data;i=drawMagnifiedPixelsOnCanvas(function(i,s){var x=4*(s*eh+i);return[o[x],o[x+1],o[x+2],o[x+3]]}).toDataURL("image/png")}}ev.attr({"xlink:href":i,height:ey,width:em,x:s,y:et})});i._promises.push(eM)})}},12826:function(i,o,s){"use strict";var x=s(39898);i.exports=function(i){x.select(i).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})}},54846:function(i,o,s){"use strict";var x=s(1426).extendFlat,_=s(1426).extendDeep,F=s(30962).overrideAll,N=s(41940),j=s(22399),G=s(27670).Y,Z=s(13838),X=s(44467).templatedArray,J=s(22372),$=s(12663).descriptionOnlyNumbers,ee=N({editType:"plot",colorEditType:"plot"}),et={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:j.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},er={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},en=X("step",_({},et,{range:er}));i.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:G({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:x({},ee,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:$("value")},font:x({},ee,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:$("value")},increasing:{symbol:{valType:"string",dflt:J.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:J.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:J.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:J.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:x({},ee,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:_({},et,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:j.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:F({range:er,visible:x({},Z.visible,{dflt:!0}),tickmode:Z.minor.tickmode,nticks:Z.nticks,tick0:Z.tick0,dtick:Z.dtick,tickvals:Z.tickvals,ticktext:Z.ticktext,ticks:x({},Z.ticks,{dflt:"outside"}),ticklen:Z.ticklen,tickwidth:Z.tickwidth,tickcolor:Z.tickcolor,ticklabelstep:Z.ticklabelstep,showticklabels:Z.showticklabels,labelalias:Z.labelalias,tickfont:N({}),tickangle:Z.tickangle,tickformat:Z.tickformat,tickformatstops:Z.tickformatstops,tickprefix:Z.tickprefix,showtickprefix:Z.showtickprefix,ticksuffix:Z.ticksuffix,showticksuffix:Z.showticksuffix,separatethousands:Z.separatethousands,exponentformat:Z.exponentformat,minexponent:Z.minexponent,showexponent:Z.showexponent,editType:"plot"},"plot"),steps:en,threshold:{line:{color:x({},et.line.color,{}),width:x({},et.line.width,{dflt:1}),editType:"plot"},thickness:x({},et.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(i,o,s){"use strict";var x=s(74875);o.name="indicator",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},24667:function(i){"use strict";i.exports={calc:function(i,o){var s=[],x=o.value;"number"!=typeof o._lastValue&&(o._lastValue=o.value);var _=o._lastValue,F=_;return o._hasDelta&&"number"==typeof o.delta.reference&&(F=o.delta.reference),s[0]={y:x,lastY:_,delta:x-F,relativeDelta:(x-F)/F},s}}},84577:function(i){"use strict";i.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(i,o,s){"use strict";var x=s(71828),_=s(54846),F=s(27670).c,N=s(44467),j=s(85501),G=s(84577),Z=s(26218),X=s(38701),J=s(96115),$=s(89426);function stepDefaults(i,o){function coerce(s,F){return x.coerce(i,o,_.gauge.steps,s,F)}coerce("color"),coerce("line.color"),coerce("line.width"),coerce("range"),coerce("thickness")}i.exports={supplyDefaults:function(i,o,s,ee){function coerce(s,F){return x.coerce(i,o,_,s,F)}F(o,ee,coerce),coerce("mode"),o._hasNumber=-1!==o.mode.indexOf("number"),o._hasDelta=-1!==o.mode.indexOf("delta"),o._hasGauge=-1!==o.mode.indexOf("gauge");var et,er,en,ei,eo,es,el=coerce("value");o._range=[0,"number"==typeof el?1.5*el:1];var ec=[,,];function coerceGauge(i,o){return x.coerce(en,ei,_.gauge,i,o)}function coerceGaugeAxis(i,o){return x.coerce(eo,es,_.gauge.axis,i,o)}if(o._hasNumber&&(coerce("number.valueformat"),coerce("number.font.color",ee.font.color),coerce("number.font.family",ee.font.family),coerce("number.font.size"),void 0===o.number.font.size&&(o.number.font.size=G.defaultNumberFontSize,ec[0]=!0),coerce("number.prefix"),coerce("number.suffix"),et=o.number.font.size),o._hasDelta&&(coerce("delta.font.color",ee.font.color),coerce("delta.font.family",ee.font.family),coerce("delta.font.size"),void 0===o.delta.font.size&&(o.delta.font.size=(o._hasNumber?.5:1)*(et||G.defaultNumberFontSize),ec[1]=!0),coerce("delta.reference",o.value),coerce("delta.relative"),coerce("delta.valueformat",o.delta.relative?"2%":""),coerce("delta.increasing.symbol"),coerce("delta.increasing.color"),coerce("delta.decreasing.symbol"),coerce("delta.decreasing.color"),coerce("delta.position"),coerce("delta.prefix"),coerce("delta.suffix"),er=o.delta.font.size),o._scaleNumbers=(!o._hasNumber||ec[0])&&(!o._hasDelta||ec[1])||!1,coerce("title.font.color",ee.font.color),coerce("title.font.family",ee.font.family),coerce("title.font.size",.25*(et||er||G.defaultNumberFontSize)),coerce("title.text"),o._hasGauge){(en=i.gauge)||(en={}),ei=N.newContainer(o,"gauge"),coerceGauge("shape"),(o._isBullet="bullet"===o.gauge.shape)||coerce("title.align","center"),(o._isAngular="angular"===o.gauge.shape)||coerce("align","center"),coerceGauge("bgcolor",ee.paper_bgcolor),coerceGauge("borderwidth"),coerceGauge("bordercolor"),coerceGauge("bar.color"),coerceGauge("bar.line.color"),coerceGauge("bar.line.width"),coerceGauge("bar.thickness",G.valueThickness*("bullet"===o.gauge.shape?.5:1)),j(en,ei,{name:"steps",handleItemDefaults:stepDefaults}),coerceGauge("threshold.value"),coerceGauge("threshold.thickness"),coerceGauge("threshold.line.width"),coerceGauge("threshold.line.color"),eo={},en&&(eo=en.axis||{}),es=N.newContainer(ei,"axis"),coerceGaugeAxis("visible"),o._range=coerceGaugeAxis("range",o._range);var eu={outerTicks:!0};Z(eo,es,coerceGaugeAxis,"linear"),$(eo,es,coerceGaugeAxis,"linear",eu),J(eo,es,coerceGaugeAxis,"linear",eu),X(eo,es,coerceGaugeAxis,eu)}else coerce("title.align","center"),coerce("align","center"),o._isAngular=o._isBullet=!1;o._length=null}}},15154:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"indicator",basePlotModule:s(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:s(54846),supplyDefaults:s(94425).supplyDefaults,calc:s(24667).calc,plot:s(75634),meta:{}}},75634:function(i,o,s){"use strict";var x=s(39898),_=s(81684).sX,F=s(81684).k4,N=s(71828),j=N.strScale,G=N.strTranslate,Z=N.rad2deg,X=s(18783).MID_SHIFT,J=s(91424),$=s(84577),ee=s(63893),et=s(89298),er=s(71453),en=s(52830),ei=s(13838),eo=s(7901),es={left:"start",center:"middle",right:"end"},el={left:0,center:.5,right:1},ec=/[yzafpnmkMGTPEZY]/;function hasTransition(i){return i&&i.duration>0}function styleShape(i){i.each(function(i){eo.stroke(x.select(this),i.line.color)}).each(function(i){eo.fill(x.select(this),i.color)}).style("stroke-width",function(i){return i.line.width})}function mockAxis(i,o,s){var x=i._fullLayout,_=N.extendFlat({type:"linear",ticks:"outside",range:s,showline:!0},o),F={type:"linear",_id:"x"+o._id},j={letter:"x",font:x.font,noHover:!0,noTickson:!0};function coerce(i,o){return N.coerce(_,F,ei,i,o)}return er(_,F,coerce,j,x),en(_,F,coerce,j),F}function fitTextInsideBox(i,o,s){return[Math.min(o/i.width,s/i.height),i,o+"x"+s]}function measureText(i,o,s,_){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),N=x.select(F);return N.text(i).attr("x",0).attr("y",0).attr("text-anchor",s).attr("data-unformatted",i).call(ee.convertToTspans,_).call(J.font,o),J.bBox(N.node())}function cache(i,o,s,x,_,F){var j="_cache"+o;i[j]&&i[j].key===_||(i[j]={key:_,value:s});var G=N.aggNums(F,null,[i[j].value,x],2);return i[j].value=G,G}i.exports=function(i,o,s,er){var en,ei=i._fullLayout;hasTransition(s)&&er&&(en=er()),N.makeTraceGroups(ei._indicatorlayer,o,"trace").each(function(o){var er,eu,ef,eh,ed,ep=o[0].trace,eg=x.select(this),em=ep._hasGauge,ey=ep._isAngular,ev=ep._isBullet,ex=ep.domain,e_={w:ei._size.w*(ex.x[1]-ex.x[0]),h:ei._size.h*(ex.y[1]-ex.y[0]),l:ei._size.l+ei._size.w*ex.x[0],r:ei._size.r+ei._size.w*(1-ex.x[1]),t:ei._size.t+ei._size.h*(1-ex.y[1]),b:ei._size.b+ei._size.h*ex.y[0]},ew=e_.l+e_.w/2,eT=e_.t+e_.h/2,ek=Math.min(e_.w/2,e_.h),eA=$.innerRadius*ek,eS=ep.align||"center";if(eu=eT,em){if(ey&&(er=ew,eu=eT+ek/2,ef=function(i){var o;return[(o=.9*eA)/Math.sqrt(i.width/2*(i.width/2)+i.height*i.height),i,o]}),ev){var eM=$.bulletPadding,eC=1-$.bulletNumberDomainSize+eM;er=e_.l+(eC+(1-eC)*el[eS])*e_.w,ef=function(i){return fitTextInsideBox(i,($.bulletNumberDomainSize-eM)*e_.w,e_.h)}}}else er=e_.l+el[eS]*e_.w,ef=function(i){return fitTextInsideBox(i,e_.w,e_.h)};(function(i,o,s,_){var Z=s[0].trace,X=_.numbersX,$=_.numbersY,er=Z.align||"center",en=es[er],ei=_.transitionOpts,eu=_.onComplete,ef=N.ensureSingle(o,"g","numbers"),eh=[];Z._hasNumber&&eh.push("number"),Z._hasDelta&&(eh.push("delta"),"left"===Z.delta.position&&eh.reverse());var ed=ef.selectAll("text").data(eh);function transitionFormat(o,s,x,_){if(!o.match("s")||x>=0==_>=0||s(x).slice(-1).match(ec)||s(_).slice(-1).match(ec))return s;var F=mockAxis(i,{tickformat:o.slice().replace("s","f").replace(/\d+/,function(i){return parseInt(i)-1})});return function(i){return 1>Math.abs(i)?et.tickText(F,i).text:s(i)}}ed.enter().append("text"),ed.attr("text-anchor",function(){return en}).attr("class",function(i){return i}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ed.exit().remove();var ep=Z.mode+Z.align;if(Z._hasDelta&&(ev=function(){var o=mockAxis(i,{tickformat:Z.delta.valueformat},Z._range);o.setScale(),et.prepTicks(o);var deltaFmt=function(i){return et.tickText(o,i).text},_=Z.delta.suffix,N=Z.delta.prefix,deltaValue=function(i){return Z.delta.relative?i.relativeDelta:i.delta},deltaFormatText=function(i,o){return 0===i||"number"!=typeof i||isNaN(i)?"-":(i>0?Z.delta.increasing.symbol:Z.delta.decreasing.symbol)+N+o(i)+_},deltaFill=function(i){return i.delta>=0?Z.delta.increasing.color:Z.delta.decreasing.color};void 0===Z._deltaLastValue&&(Z._deltaLastValue=deltaValue(s[0]));var j=ef.select("text.delta");function writeDelta(){j.text(deltaFormatText(deltaValue(s[0]),deltaFmt)).call(eo.fill,deltaFill(s[0])).call(ee.convertToTspans,i)}return j.call(J.font,Z.delta.font).call(eo.fill,deltaFill({delta:Z._deltaLastValue})),hasTransition(ei)?j.transition().duration(ei.duration).ease(ei.easing).tween("text",function(){var i=x.select(this),o=deltaValue(s[0]),_=Z._deltaLastValue,N=transitionFormat(Z.delta.valueformat,deltaFmt,_,o),j=F(_,o);return Z._deltaLastValue=o,function(o){i.text(deltaFormatText(j(o),N)),i.call(eo.fill,deltaFill({delta:j(o)}))}}).each("end",function(){writeDelta(),eu&&eu()}).each("interrupt",function(){writeDelta(),eu&&eu()}):writeDelta(),em=measureText(deltaFormatText(deltaValue(s[0]),deltaFmt),Z.delta.font,en,i),j}(),ep+=Z.delta.position+Z.delta.font.size+Z.delta.font.family+Z.delta.valueformat+(Z.delta.increasing.symbol+Z.delta.decreasing.symbol),ey=em),Z._hasNumber&&(function(){var o=mockAxis(i,{tickformat:Z.number.valueformat},Z._range);o.setScale(),et.prepTicks(o);var bignumberFmt=function(i){return et.tickText(o,i).text},_=Z.number.suffix,N=Z.number.prefix,j=ef.select("text.number");function writeNumber(){var o="number"==typeof s[0].y?N+bignumberFmt(s[0].y)+_:"-";j.text(o).call(J.font,Z.number.font).call(ee.convertToTspans,i)}hasTransition(ei)?j.transition().duration(ei.duration).ease(ei.easing).each("end",function(){writeNumber(),eu&&eu()}).each("interrupt",function(){writeNumber(),eu&&eu()}).attrTween("text",function(){var i=x.select(this),o=F(s[0].lastY,s[0].y);Z._lastValue=s[0].y;var j=transitionFormat(Z.number.valueformat,bignumberFmt,s[0].lastY,s[0].y);return function(s){i.text(N+j(o(s))+_)}}):writeNumber(),eg=measureText(N+bignumberFmt(s[0].y)+_,Z.number.font,en,i)}(),ep+=Z.number.font.size+Z.number.font.family+Z.number.valueformat+Z.number.suffix+Z.number.prefix,ey=eg),Z._hasDelta&&Z._hasNumber){var eg,em,ey,ev,ex,e_,ew=[(eg.left+eg.right)/2,(eg.top+eg.bottom)/2],eT=[(em.left+em.right)/2,(em.top+em.bottom)/2],ek=.75*Z.delta.font.size;"left"===Z.delta.position&&(ex=cache(Z,"deltaPos",0,-1*(eg.width*el[Z.align]+em.width*(1-el[Z.align])+ek),ep,Math.min),e_=ew[1]-eT[1],ey={width:eg.width+em.width+ek,height:Math.max(eg.height,em.height),left:em.left+ex,right:eg.right,top:Math.min(eg.top,em.top+e_),bottom:Math.max(eg.bottom,em.bottom+e_)}),"right"===Z.delta.position&&(ex=cache(Z,"deltaPos",0,eg.width*(1-el[Z.align])+em.width*el[Z.align]+ek,ep,Math.max),e_=ew[1]-eT[1],ey={width:eg.width+em.width+ek,height:Math.max(eg.height,em.height),left:eg.left,right:em.right+ex,top:Math.min(eg.top,em.top+e_),bottom:Math.max(eg.bottom,em.bottom+e_)}),"bottom"===Z.delta.position&&(ex=null,e_=em.height,ey={width:Math.max(eg.width,em.width),height:eg.height+em.height,left:Math.min(eg.left,em.left),right:Math.max(eg.right,em.right),top:eg.bottom-eg.height,bottom:eg.bottom+em.height}),"top"===Z.delta.position&&(ex=null,e_=eg.top,ey={width:Math.max(eg.width,em.width),height:eg.height+em.height,left:Math.min(eg.left,em.left),right:Math.max(eg.right,em.right),top:eg.bottom-eg.height-em.height,bottom:eg.bottom}),ev.attr({dx:ex,dy:e_})}(Z._hasNumber||Z._hasDelta)&&ef.attr("transform",function(){var i,o=_.numbersScaler(ey);ep+=o[2];var s=cache(Z,"numbersScale",1,o[0],ep,Math.min);Z._scaleNumbers||(s=1),i=Z._isAngular?$-s*ey.bottom:$-s*(ey.top+ey.bottom)/2,Z._numbersTop=s*ey.top+i;var x=ey[er];"center"===er&&(x=(ey.left+ey.right)/2);var F=X-s*x;return G(F=cache(Z,"numbersTranslate",0,F,ep,Math.max),i)+j(s)})})(i,eg,o,{numbersX:er,numbersY:eu,numbersScaler:ef,transitionOpts:s,onComplete:en}),em&&(eh={range:ep.gauge.axis.range,color:ep.gauge.bgcolor,line:{color:ep.gauge.bordercolor,width:0},thickness:1},ed={range:ep.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:ep.gauge.bordercolor,width:ep.gauge.borderwidth},thickness:1});var eE=eg.selectAll("g.angular").data(ey?o:[]);eE.exit().remove();var eL=eg.selectAll("g.angularaxis").data(ey?o:[]);eL.exit().remove(),ey&&function(i,o,s,F){var N,j,J,$,ee,er=s[0].trace,en=F.size,ei=F.radius,eo=F.innerRadius,es=F.gaugeBg,el=F.gaugeOutline,ec=[en.l+en.w/2,en.t+en.h/2+ei/2],eu=F.gauge,ef=F.layer,eh=F.transitionOpts,ed=F.onComplete,ep=Math.PI/2;function valueToAngle(i){var o=er.gauge.axis.range[0],s=(i-o)/(er.gauge.axis.range[1]-o)*Math.PI-ep;return s<-ep?-ep:s>ep?ep:s}function arcPathGenerator(i){return x.svg.arc().innerRadius((eo+ei)/2-i/2*(ei-eo)).outerRadius((eo+ei)/2+i/2*(ei-eo)).startAngle(-ep)}function drawArc(i){i.attr("d",function(i){return arcPathGenerator(i.thickness).startAngle(valueToAngle(i.range[0])).endAngle(valueToAngle(i.range[1]))()})}eu.enter().append("g").classed("angular",!0),eu.attr("transform",G(ec[0],ec[1])),ef.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ef.selectAll("g.xangularaxistick,path,text").remove(),(J=mockAxis(i,er.gauge.axis)).type="linear",J.range=er.gauge.axis.range,J._id="xangularaxis",J.ticklabeloverflow="allow",J.setScale();var t2g=function(i){return(J.range[0]-i.x)/(J.range[1]-J.range[0])*Math.PI+Math.PI},eg={},em=et.makeLabelFns(J,0).labelStandoff;eg.xFn=function(i){return Math.cos(t2g(i))*em},eg.yFn=function(i){var o=t2g(i),s=Math.sin(o)>0?.2:1;return-Math.sin(o)*(em+i.fontSize*s)+Math.abs(Math.cos(o))*(i.fontSize*X)},eg.anchorFn=function(i){var o=Math.cos(t2g(i));return .1>Math.abs(o)?"middle":o>0?"start":"end"},eg.heightFn=function(i,o,s){return -.5*(1+Math.sin(t2g(i)))*s};var _transFn=function(i){return G(ec[0]+ei*Math.cos(i),ec[1]-ei*Math.sin(i))};if($=et.calcTicks(J),ee=et.getTickSigns(J)[2],J.visible){ee="inside"===J.ticks?-1:1;var ey=(J.linewidth||1)/2;et.drawTicks(i,J,{vals:$,layer:ef,path:"M"+ee*ey+",0h"+ee*J.ticklen,transFn:function(i){var o=t2g(i);return _transFn(o)+"rotate("+-Z(o)+")"}}),et.drawLabels(i,J,{vals:$,layer:ef,transFn:function(i){return _transFn(t2g(i))},labelFns:eg})}var ev=[es].concat(er.gauge.steps),ex=eu.selectAll("g.bg-arc").data(ev);ex.enter().append("g").classed("bg-arc",!0).append("path"),ex.select("path").call(drawArc).call(styleShape),ex.exit().remove();var e_=arcPathGenerator(er.gauge.bar.thickness),ew=eu.selectAll("g.value-arc").data([er.gauge.bar]);ew.enter().append("g").classed("value-arc",!0).append("path");var eT=ew.select("path");hasTransition(eh)?(eT.transition().duration(eh.duration).ease(eh.easing).each("end",function(){ed&&ed()}).each("interrupt",function(){ed&&ed()}).attrTween("d",(N=valueToAngle(s[0].lastY),j=valueToAngle(s[0].y),function(){var i=_(N,j);return function(o){return e_.endAngle(i(o))()}})),er._lastValue=s[0].y):eT.attr("d","number"==typeof s[0].y?e_.endAngle(valueToAngle(s[0].y)):"M0,0Z"),eT.call(styleShape),ew.exit().remove(),ev=[];var ek=er.gauge.threshold.value;(ek||0===ek)&&ev.push({range:[ek,ek],color:er.gauge.threshold.color,line:{color:er.gauge.threshold.line.color,width:er.gauge.threshold.line.width},thickness:er.gauge.threshold.thickness});var eA=eu.selectAll("g.threshold-arc").data(ev);eA.enter().append("g").classed("threshold-arc",!0).append("path"),eA.select("path").call(drawArc).call(styleShape),eA.exit().remove();var eS=eu.selectAll("g.gauge-outline").data([el]);eS.enter().append("g").classed("gauge-outline",!0).append("path"),eS.select("path").call(drawArc).call(styleShape),eS.exit().remove()}(i,0,o,{radius:ek,innerRadius:eA,gauge:eE,layer:eL,size:e_,gaugeBg:eh,gaugeOutline:ed,transitionOpts:s,onComplete:en});var eP=eg.selectAll("g.bullet").data(ev?o:[]);eP.exit().remove();var eI=eg.selectAll("g.bulletaxis").data(ev?o:[]);eI.exit().remove(),ev&&function(i,o,s,x){var _,F,N,j,Z,X=s[0].trace,J=x.gauge,ee=x.layer,er=x.gaugeBg,en=x.gaugeOutline,ei=x.size,es=X.domain,el=x.transitionOpts,ec=x.onComplete;J.enter().append("g").classed("bullet",!0),J.attr("transform",G(ei.l,ei.t)),ee.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),ee.selectAll("g.xbulletaxistick,path,text").remove();var eu=ei.h,ef=X.gauge.bar.thickness*eu,eh=es.x[0],ed=es.x[0]+(es.x[1]-es.x[0])*(X._hasNumber||X._hasDelta?1-$.bulletNumberDomainSize:1);function drawRect(i){i.attr("width",function(i){return Math.max(0,_.c2p(i.range[1])-_.c2p(i.range[0]))}).attr("x",function(i){return _.c2p(i.range[0])}).attr("y",function(i){return .5*(1-i.thickness)*eu}).attr("height",function(i){return i.thickness*eu})}(_=mockAxis(i,X.gauge.axis))._id="xbulletaxis",_.domain=[eh,ed],_.setScale(),F=et.calcTicks(_),N=et.makeTransTickFn(_),j=et.getTickSigns(_)[2],Z=ei.t+ei.h,_.visible&&(et.drawTicks(i,_,{vals:"inside"===_.ticks?et.clipEnds(_,F):F,layer:ee,path:et.makeTickPath(_,Z,j),transFn:N}),et.drawLabels(i,_,{vals:F,layer:ee,transFn:N,labelFns:et.makeLabelFns(_,Z)}));var ep=[er].concat(X.gauge.steps),eg=J.selectAll("g.bg-bullet").data(ep);eg.enter().append("g").classed("bg-bullet",!0).append("rect"),eg.select("rect").call(drawRect).call(styleShape),eg.exit().remove();var em=J.selectAll("g.value-bullet").data([X.gauge.bar]);em.enter().append("g").classed("value-bullet",!0).append("rect"),em.select("rect").attr("height",ef).attr("y",(eu-ef)/2).call(styleShape),hasTransition(el)?em.select("rect").transition().duration(el.duration).ease(el.easing).each("end",function(){ec&&ec()}).each("interrupt",function(){ec&&ec()}).attr("width",Math.max(0,_.c2p(Math.min(X.gauge.axis.range[1],s[0].y)))):em.select("rect").attr("width","number"==typeof s[0].y?Math.max(0,_.c2p(Math.min(X.gauge.axis.range[1],s[0].y))):0),em.exit().remove();var ey=s.filter(function(){return X.gauge.threshold.value||0===X.gauge.threshold.value}),ev=J.selectAll("g.threshold-bullet").data(ey);ev.enter().append("g").classed("threshold-bullet",!0).append("line"),ev.select("line").attr("x1",_.c2p(X.gauge.threshold.value)).attr("x2",_.c2p(X.gauge.threshold.value)).attr("y1",(1-X.gauge.threshold.thickness)/2*eu).attr("y2",(1-(1-X.gauge.threshold.thickness)/2)*eu).call(eo.stroke,X.gauge.threshold.line.color).style("stroke-width",X.gauge.threshold.line.width),ev.exit().remove();var ex=J.selectAll("g.gauge-outline").data([en]);ex.enter().append("g").classed("gauge-outline",!0).append("rect"),ex.select("rect").call(drawRect).call(styleShape),ex.exit().remove()}(i,0,o,{gauge:eP,layer:eI,size:e_,gaugeBg:eh,gaugeOutline:ed,transitionOpts:s,onComplete:en});var eO=eg.selectAll("text.title").data(o);eO.exit().remove(),eO.enter().append("text").classed("title",!0),eO.attr("text-anchor",function(){return ev?es.right:es[ep.title.align]}).text(ep.title.text).call(J.font,ep.title.font).call(ee.convertToTspans,i),eO.attr("transform",function(){var i,o=e_.l+e_.w*el[ep.title.align],s=$.titlePadding,x=J.bBox(eO.node());return em?(ey&&(i=ep.gauge.axis.visible?J.bBox(eL.node()).top-s-x.bottom:e_.t+e_.h/2-ek/2-x.bottom-s),ev&&(i=eu-(x.top+x.bottom)/2,o=e_.l-$.bulletPadding*e_.w)):i=ep._numbersTop-s-x.bottom,G(o,i)})})}},16249:function(i,o,s){"use strict";var x=s(50693),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(2418),j=s(9012),G=s(1426).extendFlat,Z=s(30962).overrideAll;function makeSliceAttr(i){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function makeCapAttr(i){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var X=i.exports=Z(G({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:makeSliceAttr("x"),y:makeSliceAttr("y"),z:makeSliceAttr("z")},caps:{x:makeCapAttr("x"),y:makeCapAttr("y"),z:makeCapAttr("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:F(),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),valuehoverformat:_("value",1),showlegend:G({},j.showlegend,{dflt:!1})},x("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:N.opacity,lightposition:N.lightposition,lighting:N.lighting,flatshading:N.flatshading,contour:N.contour,hoverinfo:G({},j.hoverinfo)}),"calc","nested");X.flatshading.dflt=!0,X.lighting.facenormalsepsilon.dflt=0,X.x.editType=X.y.editType=X.z.editType=X.value.editType="calc+clearAxisTypes",X.transforms=void 0},56959:function(i,o,s){"use strict";var x=s(78803),_=s(88489).processGrid,F=s(88489).filter;i.exports=function(i,o){o._len=Math.min(o.x.length,o.y.length,o.z.length,o.value.length),o._x=F(o.x,o._len),o._y=F(o.y,o._len),o._z=F(o.z,o._len),o._value=F(o.value,o._len);var s=_(o);o._gridFill=s.fill,o._Xs=s.Xs,o._Ys=s.Ys,o._Zs=s.Zs,o._len=s.len;for(var N=1/0,j=-1/0,G=0;G<o._len;G++){var Z=o._value[G];N=Math.min(N,Z),j=Math.max(j,Z)}o._minValues=N,o._maxValues=j,o._vMin=void 0===o.isomin||null===o.isomin?N:o.isomin,o._vMax=void 0===o.isomax||null===o.isomin?j:o.isomax,x(i,o,{vals:[o._vMin,o._vMax],containerStr:"",cLetter:"c"})}},22674:function(i,o,s){"use strict";var x=s(9330).gl_mesh3d,_=s(81697).parseColorScale,F=s(78614),N=s(21081).extractOpts,j=s(90060),findNearestOnAxis=function(i,o){for(var s=o.length-1;s>0;s--){var x=Math.min(o[s],o[s-1]),_=Math.max(o[s],o[s-1]);if(_>x&&x<i&&i<=_)return{id:s,distRatio:(_-i)/(_-x)}}return{id:0,distRatio:0}};function IsosurfaceTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var G=IsosurfaceTrace.prototype;G.handlePick=function(i){if(i.object===this.mesh){var o=i.data.index,s=this.data._meshX[o],x=this.data._meshY[o],_=this.data._meshZ[o],F=this.data._Ys.length,N=this.data._Zs.length,j=findNearestOnAxis(s,this.data._Xs).id,G=findNearestOnAxis(x,this.data._Ys).id,Z=findNearestOnAxis(_,this.data._Zs).id,X=i.index=Z+N*G+N*F*j;i.traceCoordinate=[this.data._meshX[X],this.data._meshY[X],this.data._meshZ[X],this.data._value[X]];var J=this.data.hovertext||this.data.text;return Array.isArray(J)&&void 0!==J[X]?i.textLabel=J[X]:J&&(i.textLabel=J),!0}},G.update=function(i){var o=this.scene,s=o.fullSceneLayout;function toDataCoords(i,o,s,x){return o.map(function(o){return i.d2l(o,0,x)*s})}this.data=generateIsoMeshes(i);var x={positions:j(toDataCoords(s.xaxis,i._meshX,o.dataScale[0],i.xcalendar),toDataCoords(s.yaxis,i._meshY,o.dataScale[1],i.ycalendar),toDataCoords(s.zaxis,i._meshZ,o.dataScale[2],i.zcalendar)),cells:j(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:F(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},G=N(i);x.vertexIntensity=i._meshIntensity,x.vertexIntensityBounds=[G.min,G.max],x.colormap=_(i),this.mesh.update(x)},G.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var Z=["xyz","xzy","yxz","yzx","zxy","zyx"];function generateIsoMeshes(i){i._meshI=[],i._meshJ=[],i._meshK=[];var o,s,x,_,F,N,j,G=i.surface.show,X=i.spaceframe.show,J=i.surface.fill,$=i.spaceframe.fill,ee=!1,et=!1,er=0,en=i._Xs,ei=i._Ys,eo=i._Zs,es=en.length,el=ei.length,ec=eo.length,eu=Z.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),getIndex=function(i,o,s){switch(eu){case 5:return s+ec*o+ec*el*i;case 4:return s+ec*i+ec*es*o;case 3:return o+el*s+el*ec*i;case 2:return o+el*i+el*es*s;case 1:return i+es*s+es*ec*o;default:return i+es*o+es*el*s}},ef=i._minValues,eh=i._maxValues,ed=i._vMin,ep=i._vMax;function emptyVertices(){x=[],_=[],F=[],N=[],s=o=0}function addVertex(i,s,j,G){return x.push(i),_.push(s),F.push(j),N.push(G),++o-1}function getBetween(i,o,s){for(var x=[],_=0;_<i.length;_++)x[_]=i[_]*(1-s)+s*o[_];return x}function styleIncludes(i,o){return"all"===i||null===i||i.indexOf(o)>-1}function drawTri(G,Z,X){s=o;var J=[Z],$=[X];if(j>=1)J=[Z],$=[X];else if(j>0){var ee,et,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg=(ee=Z,et=X,ec=getBetween(es=function(i,o,s){for(var x=[],_=0;_<i.length;_++)x[_]=(i[_]+o[_]+s[_])/3;return x}(en=ee[0],ei=ee[1],eo=ee[2]),en,el=Math.sqrt(1-j)),eu=getBetween(es,ei,el),ef=getBetween(es,eo,el),{xyzv:[[en,ei,eu],[eu,ec,en],[ei,eo,ef],[ef,eu,ei],[eo,en,ec],[ec,ef,eo]],abc:[[eh=et[0],ed=et[1],-1],[-1,-1,eh],[ed,ep=et[2],-1],[-1,-1,ed],[ep,eh,-1],[-1,-1,ep]]});J=eg.xyzv,$=eg.abc}for(var em=0;em<J.length;em++){Z=J[em],X=$[em];for(var ey,ev,ex,e_=[],ew=0;ew<3;ew++){var eT=Z[ew][0],ek=Z[ew][1],eA=Z[ew][2],eS=Z[ew][3],eM=X[ew]>-1?X[ew]:function(i,o,j){for(var G=N.length,Z=s;Z<G;Z++)if(i===x[Z]&&o===_[Z]&&j===F[Z])return Z;return -1}(eT,ek,eA);eM>-1?e_[ew]=eM:e_[ew]=addVertex(eT,ek,eA,null===G?eS:G)}ey=e_[0],ev=e_[1],ex=e_[2],i._meshI.push(ey),i._meshJ.push(ev),i._meshK.push(ex),++er}}function calcIntersection(i,o,s,x){var _=i[3];_<s&&(_=s),_>x&&(_=x);for(var F=(i[3]-_)/(i[3]-o[3]+1e-9),N=[],j=0;j<4;j++)N[j]=(1-F)*i[j]+F*o[j];return N}function almostInFinalRange(i){var o=.001*(ep-ed);return i>=ed-o&&i<=ep+o}function getXYZV(o){for(var s=[],x=0;x<4;x++){var _=o[x];s.push([i._x[_],i._y[_],i._z[_],i._value[_]])}return s}function tryCreateTri(i,o,s,x,_,F){F||(F=1),s=[-1,-1,-1];var N,j,G,Z=!1,X=[(N=o[0][3])>=x&&N<=_,(j=o[1][3])>=x&&j<=_,(G=o[2][3])>=x&&G<=_];if(!X[0]&&!X[1]&&!X[2])return!1;var tryDrawTri=function(i,o,s){return almostInFinalRange(o[0][3])&&almostInFinalRange(o[1][3])&&almostInFinalRange(o[2][3])?(drawTri(i,o,s),!0):F<3&&tryCreateTri(i,o,s,ed,ep,++F)};if(X[0]&&X[1]&&X[2])return tryDrawTri(i,o,s)||Z;var J=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(F){if(X[F[0]]&&X[F[1]]&&!X[F[2]]){var N=o[F[0]],j=o[F[1]],G=o[F[2]],$=calcIntersection(G,N,x,_),ee=calcIntersection(G,j,x,_);Z=tryDrawTri(i,[ee,$,N],[-1,-1,s[F[0]]])||Z,Z=tryDrawTri(i,[N,j,ee],[s[F[0]],s[F[1]],-1])||Z,J=!0}}),J||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(F){if(X[F[0]]&&!X[F[1]]&&!X[F[2]]){var N=o[F[0]],j=o[F[1]],G=o[F[2]],$=calcIntersection(j,N,x,_);Z=tryDrawTri(i,[calcIntersection(G,N,x,_),$,N],[-1,-1,s[F[0]]])||Z,J=!0}}),Z}function tryCreateTetra(i,o,s,x){var _,F,N,j,G,Z=!1,X=getXYZV(o),J=[(_=X[0][3])>=s&&_<=x,(F=X[1][3])>=s&&F<=x,(N=X[2][3])>=s&&N<=x,(j=X[3][3])>=s&&j<=x];if(!J[0]&&!J[1]&&!J[2]&&!J[3])return Z;if(J[0]&&J[1]&&J[2]&&J[3])return et&&((G=function(s,x,_){drawTri(i,[X[s],X[x],X[_]],[o[s],o[x],o[_]])})(0,1,2),G(3,0,1),G(2,3,0),G(1,2,3)),Z;var $=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(_){if(J[_[0]]&&J[_[1]]&&J[_[2]]&&!J[_[3]]){var F=X[_[0]],N=X[_[1]],j=X[_[2]],G=X[_[3]];Z=et?drawTri(i,[F,N,j],[o[_[0]],o[_[1]],o[_[2]]])||Z:drawTri(null,[calcIntersection(G,F,s,x),calcIntersection(G,N,s,x),calcIntersection(G,j,s,x)],[-1,-1,-1])||Z,$=!0}}),$||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(_){if(J[_[0]]&&J[_[1]]&&!J[_[2]]&&!J[_[3]]){var F,N,j,G=X[_[0]],ee=X[_[1]],er=X[_[2]],en=X[_[3]],ei=calcIntersection(er,G,s,x),eo=calcIntersection(er,ee,s,x),es=calcIntersection(en,ee,s,x),el=calcIntersection(en,G,s,x);et?(Z=drawTri(i,[G,el,ei],[o[_[0]],-1,-1])||Z,Z=drawTri(i,[ee,eo,es],[o[_[1]],-1,-1])||Z):(F=[ei,eo,es,el],N=[-1,-1,-1,-1],(j=function(i,o,s){drawTri(null,[F[i],F[o],F[s]],[N[i],N[o],N[s]])})(0,1,2),j(2,3,0)),$=!0}}),$||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(_){if(J[_[0]]&&!J[_[1]]&&!J[_[2]]&&!J[_[3]]){var F=X[_[0]],N=X[_[1]],j=X[_[2]],G=X[_[3]],ee=calcIntersection(N,F,s,x),er=calcIntersection(j,F,s,x),en=calcIntersection(G,F,s,x);et?(Z=drawTri(i,[F,ee,er],[o[_[0]],-1,-1])||Z,Z=drawTri(i,[F,er,en],[o[_[0]],-1,-1])||Z,Z=drawTri(i,[F,en,ee],[o[_[0]],-1,-1])||Z):Z=drawTri(null,[ee,er,en],[-1,-1,-1])||Z,$=!0}})),Z}function addCube(i,o,s,x,_,F,N,j,G,Z,X){var J=!1;return ee&&(styleIncludes(i,"A")&&(J=tryCreateTetra(null,[o,s,x,F],Z,X)||J),styleIncludes(i,"B")&&(J=tryCreateTetra(null,[s,x,_,G],Z,X)||J),styleIncludes(i,"C")&&(J=tryCreateTetra(null,[s,F,N,G],Z,X)||J),styleIncludes(i,"D")&&(J=tryCreateTetra(null,[x,F,j,G],Z,X)||J),styleIncludes(i,"E")&&(J=tryCreateTetra(null,[s,x,F,G],Z,X)||J)),et&&(J=tryCreateTetra(i,[s,x,F,G],Z,X)||J),J}function addRect(i,o,s,x,_,F,N,j){return[!0===j[0]||tryCreateTri(i,getXYZV([o,s,x]),[o,s,x],F,N),!0===j[1]||tryCreateTri(i,getXYZV([x,_,o]),[x,_,o],F,N)]}function begin2dCell(i,o,s,x,_,F,N,j,G){return j?addRect(i,o,s,_,x,F,N,G):addRect(i,s,_,x,o,F,N,G)}function beginSection(i,o,s,x,_,F,N){var j,G,Z,X,J=!1,makeSection=function(){J=tryCreateTri(i,[j,G,Z],[-1,-1,-1],_,F)||J,J=tryCreateTri(i,[Z,X,j],[-1,-1,-1],_,F)||J},$=N[0],ee=N[1],et=N[2];return $&&(j=getBetween(getXYZV([getIndex(o,s-0,x-0)])[0],getXYZV([getIndex(o-1,s-0,x-0)])[0],$),G=getBetween(getXYZV([getIndex(o,s-0,x-1)])[0],getXYZV([getIndex(o-1,s-0,x-1)])[0],$),Z=getBetween(getXYZV([getIndex(o,s-1,x-1)])[0],getXYZV([getIndex(o-1,s-1,x-1)])[0],$),X=getBetween(getXYZV([getIndex(o,s-1,x-0)])[0],getXYZV([getIndex(o-1,s-1,x-0)])[0],$),makeSection()),ee&&(j=getBetween(getXYZV([getIndex(o-0,s,x-0)])[0],getXYZV([getIndex(o-0,s-1,x-0)])[0],ee),G=getBetween(getXYZV([getIndex(o-0,s,x-1)])[0],getXYZV([getIndex(o-0,s-1,x-1)])[0],ee),Z=getBetween(getXYZV([getIndex(o-1,s,x-1)])[0],getXYZV([getIndex(o-1,s-1,x-1)])[0],ee),X=getBetween(getXYZV([getIndex(o-1,s,x-0)])[0],getXYZV([getIndex(o-1,s-1,x-0)])[0],ee),makeSection()),et&&(j=getBetween(getXYZV([getIndex(o-0,s-0,x)])[0],getXYZV([getIndex(o-0,s-0,x-1)])[0],et),G=getBetween(getXYZV([getIndex(o-0,s-1,x)])[0],getXYZV([getIndex(o-0,s-1,x-1)])[0],et),Z=getBetween(getXYZV([getIndex(o-1,s-1,x)])[0],getXYZV([getIndex(o-1,s-1,x-1)])[0],et),X=getBetween(getXYZV([getIndex(o-1,s-0,x)])[0],getXYZV([getIndex(o-1,s-0,x-1)])[0],et),makeSection()),J}function draw2dX(i,o,s,x,_){for(var F=[],N=0,j=0;j<o.length;j++)for(var G=o[j],Z=1;Z<ec;Z++)for(var X=1;X<el;X++)F.push(begin2dCell(i,getIndex(G,X-1,Z-1),getIndex(G,X-1,Z),getIndex(G,X,Z-1),getIndex(G,X,Z),s,x,(G+X+Z)%2,_&&_[N]?_[N]:[])),N++;return F}function draw2dY(i,o,s,x,_){for(var F=[],N=0,j=0;j<o.length;j++)for(var G=o[j],Z=1;Z<es;Z++)for(var X=1;X<ec;X++)F.push(begin2dCell(i,getIndex(Z-1,G,X-1),getIndex(Z,G,X-1),getIndex(Z-1,G,X),getIndex(Z,G,X),s,x,(Z+G+X)%2,_&&_[N]?_[N]:[])),N++;return F}function draw2dZ(i,o,s,x,_){for(var F=[],N=0,j=0;j<o.length;j++)for(var G=o[j],Z=1;Z<el;Z++)for(var X=1;X<es;X++)F.push(begin2dCell(i,getIndex(X-1,Z-1,G),getIndex(X-1,Z,G),getIndex(X,Z-1,G),getIndex(X,Z,G),s,x,(X+Z+G)%2,_&&_[N]?_[N]:[])),N++;return F}function draw3d(i,o,s){for(var x=1;x<ec;x++)for(var _=1;_<el;_++)for(var F=1;F<es;F++)!function(i,o,s,x,_,F,N,j,G,Z,X,J){var $=i;J?(ee&&"even"===i&&($=null),addCube($,o,s,x,_,F,N,j,G,Z,X)):(ee&&"odd"===i&&($=null),addCube($,G,j,N,F,_,x,s,o,Z,X))}(i,getIndex(F-1,_-1,x-1),getIndex(F-1,_-1,x),getIndex(F-1,_,x-1),getIndex(F-1,_,x),getIndex(F,_-1,x-1),getIndex(F,_-1,x),getIndex(F,_,x-1),getIndex(F,_,x),o,s,(F+_+x)%2)}function createRange(i,o){for(var s=[],x=i;x<o;x++)s.push(x);return s}return function(){if(emptyVertices(),function(){for(var o=0;o<es;o++)for(var s=0;s<el;s++)for(var x=0;x<ec;x++){var _=getIndex(o,s,x);addVertex(i._x[_],i._y[_],i._z[_],i._value[_])}}(),X&&$&&(j=$,et=!0,draw3d(null,ed,ep),et=!1),G&&J){j=J;for(var o=i.surface.pattern,s=i.surface.count,Z=0;Z<s;Z++){var eu,eg,em=1===s?.5:Z/(s-1),ey=(1-em)*ed+em*ep,ev=Math.abs(ey-ef)>Math.abs(ey-eh)?[ef,ey]:[ey,eh];eu=ev[0],eg=ev[1],ee=!0,draw3d(o,eu,eg),ee=!1}}var ex=[[Math.min(ed,eh),Math.max(ed,eh)],[Math.min(ef,ep),Math.max(ef,ep)]];["x","y","z"].forEach(function(o){for(var s=[],x=0;x<ex.length;x++){var _=0,F=ex[x][0],N=ex[x][1],G=i.slices[o];if(G.show&&G.fill){j=G.fill;var Z=[],X=[],J=[];if(G.locations.length)for(var $=0;$<G.locations.length;$++){var ee=findNearestOnAxis(G.locations[$],"x"===o?en:"y"===o?ei:eo);0===ee.distRatio?Z.push(ee.id):ee.id>0&&(X.push(ee.id),"x"===o?J.push([ee.distRatio,0,0]):"y"===o?J.push([0,ee.distRatio,0]):J.push([0,0,ee.distRatio]))}else Z="x"===o?createRange(1,es-1):"y"===o?createRange(1,el-1):createRange(1,ec-1);X.length>0&&("x"===o?s[_]=function(i,o,s,x,_,F){for(var N=[],j=0,G=0;G<o.length;G++)for(var Z=o[G],X=1;X<ec;X++)for(var J=1;J<el;J++)N.push(beginSection(null,Z,J,X,s,x,_[G],F&&F[j]?F[j]:[])),j++;return N}(0,X,F,N,J,s[_]):"y"===o?s[_]=function(i,o,s,x,_,F){for(var N=[],j=0,G=0;G<o.length;G++)for(var Z=o[G],X=1;X<es;X++)for(var J=1;J<ec;J++)N.push(beginSection(null,X,Z,J,s,x,_[G],F&&F[j]?F[j]:[])),j++;return N}(0,X,F,N,J,s[_]):s[_]=function(i,o,s,x,_,F){for(var N=[],j=0,G=0;G<o.length;G++)for(var Z=o[G],X=1;X<el;X++)for(var J=1;J<es;J++)N.push(beginSection(null,J,X,Z,s,x,_[G],F&&F[j]?F[j]:[])),j++;return N}(0,X,F,N,J,s[_]),_++),Z.length>0&&("x"===o?s[_]=draw2dX(null,Z,F,N,s[_]):"y"===o?s[_]=draw2dY(null,Z,F,N,s[_]):s[_]=draw2dZ(null,Z,F,N,s[_]),_++)}var et=i.caps[o];et.show&&et.fill&&(j=et.fill,"x"===o?s[_]=draw2dX(null,[0,es-1],F,N,s[_]):"y"===o?s[_]=draw2dY(null,[0,el-1],F,N,s[_]):s[_]=draw2dZ(null,[0,ec-1],F,N,s[_]),_++)}}),0===er&&emptyVertices(),i._meshX=x,i._meshY=_,i._meshZ=F,i._meshIntensity=N,i._Xs=en,i._Ys=ei,i._Zs=eo}(),i}i.exports={findNearestOnAxis:findNearestOnAxis,generateIsoMeshes:generateIsoMeshes,createIsosurfaceTrace:function(i,o){var s=x({gl:i.glplot.gl}),_=new IsosurfaceTrace(i,s,o.uid);return s._trace=_,_.update(o),i.glplot.add(s),_}}},82738:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(16249),N=s(1586);function supplyIsoDefaults(i,o,s,x,F){var j=F("isomin"),G=F("isomax");null!=G&&null!=j&&j>G&&(o.isomin=null,o.isomax=null);var Z=F("x"),X=F("y"),J=F("z"),$=F("value");if(!Z||!Z.length||!X||!X.length||!J||!J.length||!$||!$.length){o.visible=!1;return}_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],x),F("valuehoverformat"),["x","y","z"].forEach(function(i){F(i+"hoverformat");var o="caps."+i;F(o+".show")&&F(o+".fill");var s="slices."+i;F(s+".show")&&(F(s+".fill"),F(s+".locations"))}),F("spaceframe.show")&&F("spaceframe.fill"),F("surface.show")&&(F("surface.count"),F("surface.fill"),F("surface.pattern")),F("contour.show")&&(F("contour.color"),F("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(i){F(i)}),N(i,o,x,F,{prefix:"",cLetter:"c"}),o._length=null}i.exports={supplyDefaults:function(i,o,s,_){supplyIsoDefaults(i,o,s,_,function(s,_){return x.coerce(i,o,F,s,_)})},supplyIsoDefaults:supplyIsoDefaults}},64943:function(i,o,s){"use strict";i.exports={attributes:s(16249),supplyDefaults:s(82738).supplyDefaults,calc:s(56959),colorbar:{min:"cmin",max:"cmax"},plot:s(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(i,o,s){"use strict";var x=s(50693),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(54532),j=s(9012),G=s(1426).extendFlat;i.exports=G({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:F({editType:"calc"}),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},x("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:N.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:G({},N.contours.x.show,{}),color:N.contours.x.color,width:N.contours.x.width,editType:"calc"},lightposition:{x:G({},N.lightposition.x,{dflt:1e5}),y:G({},N.lightposition.y,{dflt:1e5}),z:G({},N.lightposition.z,{dflt:0}),editType:"calc"},lighting:G({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},N.lighting),hoverinfo:G({},j.hoverinfo,{editType:"calc"}),showlegend:G({},j.showlegend,{dflt:!1})})},82932:function(i,o,s){"use strict";var x=s(78803);i.exports=function(i,o){o.intensity&&x(i,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},91134:function(i,o,s){"use strict";var x=s(9330).gl_mesh3d,_=s(9330).delaunay_triangulate,F=s(9330).alpha_shape,N=s(9330).convex_hull,j=s(81697).parseColorScale,G=s(78614),Z=s(21081).extractOpts,X=s(90060);function Mesh3DTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var J=Mesh3DTrace.prototype;function parseColorArray(i){for(var o=[],s=i.length,x=0;x<s;x++)o[x]=G(i[x]);return o}function toDataCoords(i,o,s,x){for(var _=[],F=o.length,N=0;N<F;N++)_[N]=i.d2l(o[N],0,x)*s;return _}function toRoundIndex(i){for(var o=[],s=i.length,x=0;x<s;x++)o[x]=Math.round(i[x]);return o}function hasValidIndices(i,o){for(var s=i.length,x=0;x<s;x++)if(i[x]<=-.5||i[x]>=o-.5)return!1;return!0}J.handlePick=function(i){if(i.object===this.mesh){var o=i.index=i.data.index;i.data._cellCenter?i.traceCoordinate=i.data.dataCoordinate:i.traceCoordinate=[this.data.x[o],this.data.y[o],this.data.z[o]];var s=this.data.hovertext||this.data.text;return Array.isArray(s)&&void 0!==s[o]?i.textLabel=s[o]:s&&(i.textLabel=s),!0}},J.update=function(i){var o,s=this.scene,x=s.fullSceneLayout;this.data=i;var J=i.x.length,$=X(toDataCoords(x.xaxis,i.x,s.dataScale[0],i.xcalendar),toDataCoords(x.yaxis,i.y,s.dataScale[1],i.ycalendar),toDataCoords(x.zaxis,i.z,s.dataScale[2],i.zcalendar));if(i.i&&i.j&&i.k){if(i.i.length!==i.j.length||i.j.length!==i.k.length||!hasValidIndices(i.i,J)||!hasValidIndices(i.j,J)||!hasValidIndices(i.k,J))return;o=X(toRoundIndex(i.i),toRoundIndex(i.j),toRoundIndex(i.k))}else o=0===i.alphahull?N($):i.alphahull>0?F(i.alphahull,$):function(i,o){for(var s=["x","y","z"].indexOf(i),x=[],F=o.length,N=0;N<F;N++)x[N]=[o[N][(s+1)%3],o[N][(s+2)%3]];return _(x)}(i.delaunayaxis,$);var ee={positions:$,cells:o,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:G(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading};if(i.intensity){var et=Z(i);this.color="#fff";var er=i.intensitymode;ee[er+"Intensity"]=i.intensity,ee[er+"IntensityBounds"]=[et.min,et.max],ee.colormap=j(i)}else i.vertexcolor?(this.color=i.vertexcolor[0],ee.vertexColors=parseColorArray(i.vertexcolor)):i.facecolor?(this.color=i.facecolor[0],ee.cellColors=parseColorArray(i.facecolor)):(this.color=i.color,ee.meshColor=G(i.color));this.mesh.update(ee)},J.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=function(i,o){var s=x({gl:i.glplot.gl}),_=new Mesh3DTrace(i,s,o.uid);return s._trace=_,_.update(o),i.glplot.add(s),_}},58669:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(1586),N=s(2418);i.exports=function(i,o,s,j){function coerce(s,x){return _.coerce(i,o,N,s,x)}function readComponents(i){var o=i.map(function(i){var o=coerce(i);return o&&_.isArrayOrTypedArray(o)?o:null});return o.every(function(i){return i&&i.length===o[0].length})&&o}if(!readComponents(["x","y","z"])||(readComponents(["i","j","k"]),o.i&&(!o.j||!o.k)||o.j&&(!o.k||!o.i)||o.k&&(!o.i||!o.j))){o.visible=!1;return}x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],j),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(i){coerce(i)}),coerce("contour.show")&&(coerce("contour.color"),coerce("contour.width")),"intensity"in i?(coerce("intensity"),coerce("intensitymode"),F(i,o,j,coerce,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in i?coerce("facecolor"):"vertexcolor"in i?coerce("vertexcolor"):coerce("color",s)),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},21164:function(i,o,s){"use strict";i.exports={attributes:s(2418),supplyDefaults:s(58669),calc:s(82932),colorbar:{min:"cmin",max:"cmax"},plot:s(91134),moduleType:"trace",name:"mesh3d",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(i,o,s){"use strict";var x=s(71828).extendFlat,_=s(82196),F=s(12663).axisHoverFormat,N=s(79952).P,j=s(77914),G=s(22372),Z=G.INCREASING.COLOR,X=G.DECREASING.COLOR,J=_.line;function directionAttrs(i){return{line:{color:x({},J.color,{dflt:i}),width:J.width,dash:N,editType:"style"},editType:"style"}}i.exports={xperiod:_.xperiod,xperiod0:_.xperiod0,xperiodalignment:_.xperiodalignment,xhoverformat:F("x"),yhoverformat:F("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:x({},J.width,{}),dash:x({},N,{}),editType:"style"},increasing:directionAttrs(Z),decreasing:directionAttrs(X),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:x({},j.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(i,o,s){"use strict";var x=s(71828),_=x._,F=s(89298),N=s(42973),j=s(50606).BADNUM;function ptFunc(i,o,s,x){return{o:i,h:o,l:s,c:x}}function calcCommon(i,o,s,N,G,Z){for(var X=G.makeCalcdata(o,"open"),J=G.makeCalcdata(o,"high"),$=G.makeCalcdata(o,"low"),ee=G.makeCalcdata(o,"close"),et=Array.isArray(o.text),er=Array.isArray(o.hovertext),en=!0,ei=null,eo=!!o.xperiodalignment,es=[],el=0;el<N.length;el++){var ec=N[el],eu=X[el],ef=J[el],eh=$[el],ed=ee[el];if(ec!==j&&eu!==j&&ef!==j&&eh!==j&&ed!==j){ed===eu?null!==ei&&ed!==ei&&(en=ed>ei):en=ed>eu,ei=ed;var ep=Z(eu,ef,eh,ed);ep.pos=ec,ep.yc=(eu+ed)/2,ep.i=el,ep.dir=en?"increasing":"decreasing",ep.x=ep.pos,ep.y=[eh,ef],eo&&(ep.orig_p=s[el]),et&&(ep.tx=o.text[el]),er&&(ep.htx=o.hovertext[el]),es.push(ep)}else es.push({pos:ec,empty:!0})}return o._extremes[G._id]=F.findExtremes(G,x.concat($,J),{padded:!0}),es.length&&(es[0].t={labels:{open:_(i,"open:")+" ",high:_(i,"high:")+" ",low:_(i,"low:")+" ",close:_(i,"close:")+" "}}),es}i.exports={calc:function(i,o){var s=F.getFromId(i,o.xaxis),_=F.getFromId(i,o.yaxis),j=function(i,o,s){var _=s._minDiff;if(!_){var F,j=i._fullData,G=[];for(F=0,_=1/0;F<j.length;F++){var Z=j[F];if("ohlc"===Z.type&&!0===Z.visible&&Z.xaxis===o._id){G.push(Z);var X=o.makeCalcdata(Z,"x");Z._origX=X;var J=N(s,o,"x",X).vals;Z._xcalc=J;var $=x.distinctVals(J).minDiff;$&&isFinite($)&&(_=Math.min(_,$))}}for(_===1/0&&(_=1),F=0;F<G.length;F++)G[F]._minDiff=_}return _*s.tickwidth}(i,s,o),G=o._minDiff;o._minDiff=null;var Z=o._origX;o._origX=null;var X=o._xcalc;o._xcalc=null;var J=calcCommon(i,o,Z,X,_,ptFunc);return(o._extremes[s._id]=F.findExtremes(s,X,{vpad:G/2}),J.length)?(x.extendFlat(J[0].t,{wHover:G/2,tickLen:j}),J):[{t:{empty:!0}}]},calcCommon:calcCommon}},16169:function(i,o,s){"use strict";var x=s(71828),_=s(14555),F=s(73927),N=s(2522);function handleDirection(i,o,s,x){s(x+".line.color"),s(x+".line.width",o.line.width),s(x+".line.dash",o.line.dash)}i.exports=function(i,o,s,j){function coerce(s,_){return x.coerce(i,o,N,s,_)}if(!_(i,o,coerce,j)){o.visible=!1;return}F(i,o,j,coerce,{x:!0}),coerce("xhoverformat"),coerce("yhoverformat"),coerce("line.width"),coerce("line.dash"),handleDirection(i,o,coerce,"increasing"),handleDirection(i,o,coerce,"decreasing"),coerce("text"),coerce("hovertext"),coerce("tickwidth"),j._requestRangeslider[o.xaxis]=!0}},66449:function(i,o,s){"use strict";var x=s(89298),_=s(71828),F=s(30211),N=s(7901),j=s(71828).fillText,G=s(22372),Z={increasing:G.INCREASING.SYMBOL,decreasing:G.DECREASING.SYMBOL};function _getClosestPoint(i,o,s,x){var _,j,G=i.cd,Z=i.xa,X=G[0].trace,J=G[0].t,$=X.type,ee="ohlc"===$?"l":"min",et="ohlc"===$?"h":"max",er=J.bPos||0,en=J.bdPos||J.tickLen,ei=J.wHover,eo=Math.min(1,en/Math.abs(Z.r2c(Z.range[1])-Z.r2c(Z.range[0])));function dx(i){var s=i.pos+er-o;return F.inbox(s-ei,s+ei,_)}function dy(i){var o=i[ee],x=i[et];return o===x||F.inbox(o-s,x-s,_)}function dxy(i){return(dx(i)+dy(i))/2}_=i.maxHoverDistance-eo,j=i.maxSpikeDistance-eo;var es=F.getDistanceFunction(x,dx,dy,dxy);if(F.getClosest(G,es,i),!1===i.index)return null;var el=G[i.index];if(el.empty)return null;var ec=X[el.dir],eu=ec.line.color;return N.opacity(eu)&&ec.line.width?i.color=eu:i.color=ec.fillcolor,i.x0=Z.c2p(el.pos+er-en,!0),i.x1=Z.c2p(el.pos+er+en,!0),i.xLabelVal=void 0!==el.orig_p?el.orig_p:el.pos,i.spikeDistance=dxy(el)*j/_,i.xSpike=Z.c2p(el.pos,!0),i}function hoverSplit(i,o,s,F){var N=i.cd,j=i.ya,G=N[0].trace,Z=N[0].t,X=[],J=_getClosestPoint(i,o,s,F);if(!J)return[];var $=N[J.index].hi||G.hoverinfo,ee=$.split("+");if(!("all"===$||-1!==ee.indexOf("y")))return[];for(var et=["high","open","close","low"],er={},en=0;en<et.length;en++){var ei,eo=et[en],es=G[eo][J.index],el=j.c2p(es,!0);es in er?(ei=er[es],ei.yLabel+="<br>"+Z.labels[eo]+x.hoverLabelText(j,es,G.yhoverformat)):((ei=_.extendFlat({},J)).y0=ei.y1=el,ei.yLabelVal=es,ei.yLabel=Z.labels[eo]+x.hoverLabelText(j,es,G.yhoverformat),ei.name="",X.push(ei),er[es]=ei)}return X}function hoverOnPoints(i,o,s,_){var F=i.cd,N=i.ya,G=F[0].trace,X=F[0].t,J=_getClosestPoint(i,o,s,_);if(!J)return[];var $=F[J.index],ee=J.index=$.i,et=$.dir;function getLabelLine(i){return X.labels[i]+x.hoverLabelText(N,G[i][ee],G.yhoverformat)}var er=$.hi||G.hoverinfo,en=er.split("+"),ei="all"===er,eo=ei||-1!==en.indexOf("y"),es=ei||-1!==en.indexOf("text"),el=eo?[getLabelLine("open"),getLabelLine("high"),getLabelLine("low"),getLabelLine("close")+"  "+Z[et]]:[];return es&&j($,G,el),J.extraText=el.join("<br>"),J.y0=J.y1=N.c2p($.yc,!0),[J]}i.exports={hoverPoints:function(i,o,s,x){return i.cd[0].trace.hoverlabel.split?hoverSplit(i,o,s,x):hoverOnPoints(i,o,s,x)},hoverSplit:hoverSplit,hoverOnPoints:hoverOnPoints}},54186:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"ohlc",basePlotModule:s(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:s(2522),supplyDefaults:s(16169),calc:s(3485).calc,plot:s(72314),style:s(53101),hoverPoints:s(66449).hoverPoints,selectPoints:s(67324)}},14555:function(i,o,s){"use strict";var x=s(73972),_=s(71828);i.exports=function(i,o,s,F){var N=s("x"),j=s("open"),G=s("high"),Z=s("low"),X=s("close");if(s("hoverlabel.split"),x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x"],F),j&&G&&Z&&X){var J=Math.min(j.length,G.length,Z.length,X.length);return N&&(J=Math.min(J,_.minRowLength(N))),o._length=J,J}}},72314:function(i,o,s){"use strict";var x=s(39898),_=s(71828);i.exports=function(i,o,s,F){var N=o.yaxis,j=o.xaxis,G=!!j.rangebreaks;_.makeTraceGroups(F,s,"trace ohlc").each(function(i){var o=x.select(this),s=i[0],F=s.t;if(!0!==s.trace.visible||F.empty){o.remove();return}var Z=F.tickLen,X=o.selectAll("path").data(_.identity);X.enter().append("path"),X.exit().remove(),X.attr("d",function(i){if(i.empty)return"M0,0Z";var o=j.c2p(i.pos-Z,!0),s=j.c2p(i.pos+Z,!0),x=G?(o+s)/2:j.c2p(i.pos,!0);return"M"+o+","+N.c2p(i.o,!0)+"H"+x+"M"+x+","+N.c2p(i.h,!0)+"V"+N.c2p(i.l,!0)+"M"+s+","+N.c2p(i.c,!0)+"H"+x})})}},67324:function(i){"use strict";i.exports=function(i,o){var s,x=i.cd,_=i.xaxis,F=i.yaxis,N=[],j=x[0].t.bPos||0;if(!1===o)for(s=0;s<x.length;s++)x[s].selected=0;else for(s=0;s<x.length;s++){var G=x[s];o.contains([_.c2p(G.pos+j),F.c2p(G.yc)],null,G.i,i)?(N.push({pointNumber:G.i,x:_.c2d(G.pos),y:F.c2d(G.yc)}),G.selected=1):G.selected=0}return N}},53101:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(7901);i.exports=function(i,o,s){var N=s||x.select(i).selectAll("g.ohlclayer").selectAll("g.trace");N.style("opacity",function(i){return i[0].trace.opacity}),N.each(function(i){var o=i[0].trace;x.select(this).selectAll("path").each(function(i){if(!i.empty){var s=o[i.dir].line;x.select(this).style("fill","none").call(F.stroke,s.color).call(_.dashLine,s.dash,s.width).style("opacity",o.selectedpoints&&!i.selected?.3:1)}})})}},99506:function(i,o,s){"use strict";var x=s(1426).extendFlat,_=s(9012),F=s(41940),N=s(50693),j=s(5386).fF,G=s(27670).Y,Z=x({editType:"calc"},N("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:j({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});i.exports={domain:G({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:x({},_.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:j({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:F({editType:"calc"}),tickfont:F({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:Z,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(i,o,s){"use strict";var x=s(27659).a0,_=s(45784),F="parcats";o.name=F,o.plot=function(i,o,s,N){var j=x(i.calcdata,F);j.length&&_(i,j[0],s,N)},o.clean=function(i,o,s,x){var _=x._has&&x._has("parcats"),F=o._has&&o._has("parcats");_&&!F&&x._paperdiv.selectAll(".parcats").remove()}},28699:function(i,o,s){"use strict";var x=s(28984).wrap,_=s(52075).hasColorscale,F=s(78803),N=s(75744),j=s(91424),G=s(71828),Z=s(92770);i.exports=function(i,o){var s,X,J,$,ee,et,er,en,ei=G.filterVisible(o.dimensions);if(0===ei.length)return[];var eo=ei.map(function(i){var o;if("trace"===i.categoryorder)o=null;else if("array"===i.categoryorder)o=i.categoryarray;else{o=N(i.values);for(var s=!0,x=0;x<o.length;x++)if(!Z(o[x])){s=!1;break}o.sort(s?G.sorterAsc:void 0),"category descending"===i.categoryorder&&(o=o.reverse())}return function(i,o){o=null==o?[]:o.map(function(i){return i});var s={},x={},_=[];o.forEach(function(i,o){s[i]=0,x[i]=o});for(var F=0;F<i.length;F++){var N,j=i[F];void 0===s[j]?(s[j]=1,N=o.push(j)-1,x[j]=N):(s[j]++,N=x[j]),_.push(N)}var G=o.map(function(i){return s[i]});return{uniqueValues:o,uniqueCounts:G,inds:_}}(i.values,o)});J=G.isArrayOrTypedArray(o.counts)?o.counts:[o.counts],function(i){var o;if(function(i){for(var o=Array(i.length),s=0;s<i.length;s++){if(i[s]<0||i[s]>=i.length||void 0!==o[i[s]])return!1;o[i[s]]=!0}return!0}(i.map(function(i){return i.displayindex})))for(o=0;o<i.length;o++)i[o]._displayindex=i[o].displayindex;else for(o=0;o<i.length;o++)i[o]._displayindex=o}(ei),ei.forEach(function(i,o){(function(i,o){i._categoryarray=o.uniqueValues,null===i.ticktext||void 0===i.ticktext?i._ticktext=[]:i._ticktext=i.ticktext.slice();for(var s=i._ticktext.length;s<o.uniqueValues.length;s++)i._ticktext.push(o.uniqueValues[s])})(i,eo[o])});var es=o.line;es?(_(o,"line")&&F(i,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),et=j.tryColorscale(es)):et=G.identity;var el=ei[0].values.length,ec={},eu=eo.map(function(i){return i.inds});for(er=0,ee=0;er<el;er++){var ef,eh,ed,ep=[];for(en=0;en<eu.length;en++)ep.push(eu[en][er]);$=J[er%J.length],ee+=$;var eg=function(i){var o,s;return G.isArrayOrTypedArray(es.color)?s=o=es.color[i%es.color.length]:o=es.color,{color:et(o),rawColor:s}}(er),em=ep+"-"+eg.rawColor;void 0===ec[em]&&(ec[em]={categoryInds:ep,color:eg.color,rawColor:eg.rawColor,valueInds:[],count:0}),ef=ec[em],eh=er,ed=$,ef.valueInds.push(eh),ef.count+=ed}var ey=ei.map(function(i,o){var s,x;return s=i._index,x=i._displayindex,{dimensionInd:o,containerInd:s,displayInd:x,dimensionLabel:i.label,count:ee,categories:[],dragX:null}});for(er=0;er<el;er++)for(en=0,$=J[er%J.length];en<ey.length;en++){var ev,ex,e_,ew=ey[en].containerInd,eT=eo[en].inds[er],ek=ey[en].categories;if(void 0===ek[eT]){var eA=o.dimensions[ew]._categoryarray[eT],eS=o.dimensions[ew]._ticktext[eT];ek[eT]={dimensionInd:en,categoryInd:eT,categoryValue:eA,displayInd:eT,categoryLabel:eS,valueInds:[],count:0,dragY:null}}ev=ek[eT],ex=er,e_=$,ev.valueInds.push(ex),ev.count+=e_}return x((s=ee,X=ey.map(function(i){return i.categories.length}).reduce(function(i,o){return Math.max(i,o)}),{dimensions:ey,paths:ec,trace:void 0,maxCats:X,count:s}))}},14647:function(i,o,s){"use strict";var x=s(71828),_=s(52075).hasColorscale,F=s(1586),N=s(27670).c,j=s(85501),G=s(99506),Z=s(94397);function dimensionDefaults(i,o){function coerce(s,_){return x.coerce(i,o,G.dimensions,s,_)}var s=coerce("values"),_=coerce("visible");if(s&&s.length||(_=o.visible=!1),_){coerce("label"),coerce("displayindex",o._index);var F,N=i.categoryarray,j=Array.isArray(N)&&N.length>0;j&&(F="array");var Z=coerce("categoryorder",F);"array"===Z?(coerce("categoryarray"),coerce("ticktext")):(delete i.categoryarray,delete i.ticktext),j||"array"!==Z||(o.categoryorder="trace")}}i.exports=function(i,o,s,X){function coerce(s,_){return x.coerce(i,o,G,s,_)}var J=j(i,o,{name:"dimensions",handleItemDefaults:dimensionDefaults}),$=function(i,o,s,N,j){j("line.shape"),j("line.hovertemplate");var G=j("line.color",N.colorway[0]);if(_(i,"line")&&x.isArrayOrTypedArray(G)){if(G.length)return j("line.colorscale"),F(i,o,N,j,{prefix:"line.",cLetter:"c"}),G.length;o.line.color=s}return 1/0}(i,o,s,X,coerce);N(o,X,coerce),Array.isArray(J)&&J.length||(o.visible=!1),Z(o,J,"values",$),coerce("hoveron"),coerce("hovertemplate"),coerce("arrangement"),coerce("bundlecolors"),coerce("sortpaths"),coerce("counts");var ee={family:X.font.family,size:Math.round(X.font.size),color:X.font.color};x.coerceFont(coerce,"labelfont",ee);var et={family:X.font.family,size:Math.round(X.font.size/1.2),color:X.font.color};x.coerceFont(coerce,"tickfont",et)}},94873:function(i,o,s){"use strict";i.exports={attributes:s(99506),supplyDefaults:s(14647),calc:s(28699),plot:s(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:s(27677),categories:["noOpacity"],meta:{}}},45460:function(i,o,s){"use strict";var x=s(39898),_=s(81684).k4,F=s(72391),N=s(30211),j=s(71828),G=j.strTranslate,Z=s(91424),X=s(84267),J=s(63893);function key(i){return i.key}function catInRightDim(i){var o=i.parcatsViewModel.dimensions.length,s=i.parcatsViewModel.dimensions[o-1].model.dimensionInd;return i.model.dimensionInd===s}function compareRawColor(i,o){return i.model.rawColor>o.model.rawColor?1:i.model.rawColor<o.model.rawColor?-1:0}function mouseoverPath(i){if(!i.parcatsViewModel.dragDimension&&-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")){j.raiseToTop(this),stylePathsHover(x.select(this));var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);if(i.parcatsViewModel.graphDiv.emit("plotly_hover",{points:o,event:x.event,constraints:s}),-1===i.parcatsViewModel.hoverinfoItems.indexOf("none")){var _,F,G,Z=x.mouse(this)[0],J=i.parcatsViewModel.graphDiv,$=i.parcatsViewModel.trace,ee=J._fullLayout,et=ee._paperdiv.node().getBoundingClientRect(),er=i.parcatsViewModel.graphDiv.getBoundingClientRect();for(G=0;G<i.leftXs.length-1;G++)if(i.leftXs[G]+i.dimWidths[G]-2<=Z&&Z<=i.leftXs[G+1]+2){var en=i.parcatsViewModel.dimensions[G],ei=i.parcatsViewModel.dimensions[G+1];_=(en.x+en.width+ei.x)/2,F=(i.topYs[G]+i.topYs[G+1]+i.height)/2;break}var eo=i.parcatsViewModel.x+_,es=i.parcatsViewModel.y+F,el=X.mostReadable(i.model.color,["black","white"]),ec=i.model.count,eu=ec/i.parcatsViewModel.model.count,ef={countLabel:ec,probabilityLabel:eu.toFixed(3)},eh=[];-1!==i.parcatsViewModel.hoverinfoItems.indexOf("count")&&eh.push(["Count:",ef.countLabel].join(" ")),-1!==i.parcatsViewModel.hoverinfoItems.indexOf("probability")&&eh.push(["P:",ef.probabilityLabel].join(" "));var ed=eh.join("<br>"),ep=x.mouse(J)[0];N.loneHover({trace:$,x:eo-et.left+er.left,y:es-et.top+er.top,text:ed,color:i.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:el,idealAlign:ep<eo?"right":"left",hovertemplate:($.line||{}).hovertemplate,hovertemplateLabels:ef,eventData:[{data:$._input,fullData:$,count:ec,probability:eu}]},{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:J})}}}function mouseoutPath(i){if(!i.parcatsViewModel.dragDimension&&(stylePathsNoHover(x.select(this)),N.loneUnhover(i.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),i.parcatsViewModel.pathSelection.sort(compareRawColor),-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);i.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:o,event:x.event,constraints:s})}}function buildPointsArrayForPath(i){for(var o=[],s=getTraceIndex(i.parcatsViewModel),x=0;x<i.model.valueInds.length;x++){var _=i.model.valueInds[x];o.push({curveNumber:s,pointNumber:_})}return o}function buildConstraintsForPath(i){for(var o={},s=i.parcatsViewModel.model.dimensions,x=0;x<s.length;x++){var _=s[x],F=_.categories[i.model.categoryInds[x]];o[_.containerInd]=F.categoryValue}return void 0!==i.model.rawColor&&(o.color=i.model.rawColor),o}function clickPath(i){if(-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")){var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);i.parcatsViewModel.graphDiv.emit("plotly_click",{points:o,event:x.event,constraints:s})}}function stylePathsNoHover(i){i.attr("fill",function(i){return i.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function stylePathsHover(i){i.attr("fill-opacity",.8).attr("stroke",function(i){return X.mostReadable(i.model.color,["black","white"])}).attr("stroke-width",.3)}function styleCategoriesNoHover(i){i.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function styleBandsNoHover(i){i.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function selectPathsThroughCategoryBandColor(i){var o=i.parcatsViewModel.pathSelection,s=i.categoryViewModel.model.dimensionInd,x=i.categoryViewModel.model.categoryInd;return o.filter(function(o){return o.model.categoryInds[s]===x&&o.model.color===i.color})}function emitPointsEventCategoryHovermode(i,o,s){var _=x.select(i).datum(),F=_.categoryViewModel.model,N=_.parcatsViewModel.graphDiv,j=x.select(i.parentNode).selectAll("rect.bandrect"),G=[];j.each(function(i){selectPathsThroughCategoryBandColor(i).each(function(i){Array.prototype.push.apply(G,buildPointsArrayForPath(i))})});var Z={};Z[F.dimensionInd]=F.categoryValue,N.emit(o,{points:G,event:s,constraints:Z})}function emitPointsEventColorHovermode(i,o,s){var _=x.select(i).datum(),F=_.categoryViewModel.model,N=_.parcatsViewModel.graphDiv,j=selectPathsThroughCategoryBandColor(_),G=[];j.each(function(i){Array.prototype.push.apply(G,buildPointsArrayForPath(i))});var Z={};Z[F.dimensionInd]=F.categoryValue,void 0!==_.rawColor&&(Z.color=_.rawColor),N.emit(o,{points:G,event:s,constraints:Z})}function createHoverLabelForCategoryHovermode(i,o,s){i._fullLayout._calcInverseTransform(i);var _,F,N=i._fullLayout._invScaleX,j=i._fullLayout._invScaleY,G=x.select(s.parentNode).select("rect.catrect"),Z=G.node().getBoundingClientRect(),X=G.datum(),J=X.parcatsViewModel,$=J.model.dimensions[X.model.dimensionInd],ee=J.trace,et=Z.top+Z.height/2;J.dimensions.length>1&&$.displayInd===J.dimensions.length-1?(_=Z.left,F="left"):(_=Z.left+Z.width,F="right");var er=X.model.count,en=X.model.categoryLabel,ei=er/X.parcatsViewModel.model.count,eo={countLabel:er,categoryLabel:en,probabilityLabel:ei.toFixed(3)},es=[];-1!==X.parcatsViewModel.hoverinfoItems.indexOf("count")&&es.push(["Count:",eo.countLabel].join(" ")),-1!==X.parcatsViewModel.hoverinfoItems.indexOf("probability")&&es.push(["P("+eo.categoryLabel+"):",eo.probabilityLabel].join(" "));var el=es.join("<br>");return{trace:ee,x:N*(_-o.left),y:j*(et-o.top),text:el,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:F,hovertemplate:ee.hovertemplate,hovertemplateLabels:eo,eventData:[{data:ee._input,fullData:ee,count:er,category:en,probability:ei}]}}function mouseoverCategoryBand(i){if(!i.parcatsViewModel.dragDimension&&-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!(x.mouse(this)[1]<-1)){var o,s,_,F,G=i.parcatsViewModel.graphDiv,Z=G._fullLayout,J=Z._paperdiv.node().getBoundingClientRect(),$=i.parcatsViewModel.hoveron;"color"===$?(stylePathsHover(_=selectPathsThroughCategoryBandColor(s=x.select(this).datum())),_.each(function(){j.raiseToTop(this)}),x.select(this.parentNode).selectAll("rect.bandrect").filter(function(i){return i.color===s.color}).each(function(){j.raiseToTop(this),function(i){i.attr("stroke","black").attr("stroke-width",1.5)}(x.select(this))}),emitPointsEventColorHovermode(this,"plotly_hover",x.event)):(x.select(this.parentNode).selectAll("rect.bandrect").each(function(i){var o=selectPathsThroughCategoryBandColor(i);stylePathsHover(o),o.each(function(){j.raiseToTop(this)})}),function(i){i.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(x.select(this.parentNode)),emitPointsEventCategoryHovermode(this,"plotly_hover",x.event)),-1===i.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===$?o=createHoverLabelForCategoryHovermode(G,J,this):"color"===$?o=function(i,o,s){i._fullLayout._calcInverseTransform(i);var _,F,N=i._fullLayout._invScaleX,j=i._fullLayout._invScaleY,G=s.getBoundingClientRect(),Z=x.select(s).datum(),J=Z.categoryViewModel,$=J.parcatsViewModel,ee=$.model.dimensions[J.model.dimensionInd],et=$.trace,er=G.y+G.height/2;$.dimensions.length>1&&ee.displayInd===$.dimensions.length-1?(_=G.left,F="left"):(_=G.left+G.width,F="right");var en=J.model.categoryLabel,ei=Z.parcatsViewModel.model.count,eo=0;Z.categoryViewModel.bands.forEach(function(i){i.color===Z.color&&(eo+=i.count)});var es=J.model.count,el=0;$.pathSelection.each(function(i){i.model.color===Z.color&&(el+=i.model.count)});var ec=eo/ei,eu=eo/el,ef=eo/es,eh={countLabel:ei,categoryLabel:en,probabilityLabel:ec.toFixed(3)},ed=[];-1!==J.parcatsViewModel.hoverinfoItems.indexOf("count")&&ed.push(["Count:",eh.countLabel].join(" ")),-1!==J.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(ed.push("P(color  "+en+"): "+eh.probabilityLabel),ed.push("P("+en+" | color): "+eu.toFixed(3)),ed.push("P(color | "+en+"): "+ef.toFixed(3)));var ep=ed.join("<br>"),eg=X.mostReadable(Z.color,["black","white"]);return{trace:et,x:N*(_-o.left),y:j*(er-o.top),text:ep,color:Z.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:eg,fontSize:10,idealAlign:F,hovertemplate:et.hovertemplate,hovertemplateLabels:eh,eventData:[{data:et._input,fullData:et,category:en,count:ei,probability:ec,categorycount:es,colorcount:el,bandcolorcount:eo}]}}(G,J,this):"dimension"===$&&(F=[],x.select(this.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){F.push(createHoverLabelForCategoryHovermode(G,J,this))}),o=F),o&&N.loneHover(o,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:G}))}}function mouseoutCategory(i){var o=i.parcatsViewModel;o.dragDimension||(stylePathsNoHover(o.pathSelection),styleCategoriesNoHover(o.dimensionSelection.selectAll("g.category")),styleBandsNoHover(o.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),N.loneUnhover(o.graphDiv._fullLayout._hoverlayer.node()),o.pathSelection.sort(compareRawColor),-1!==o.hoverinfoItems.indexOf("skip"))||("color"===i.parcatsViewModel.hoveron?emitPointsEventColorHovermode(this,"plotly_unhover",x.event):emitPointsEventCategoryHovermode(this,"plotly_unhover",x.event))}function dragDimensionStart(i){"fixed"!==i.parcatsViewModel.arrangement&&(i.dragDimensionDisplayInd=i.model.displayInd,i.initialDragDimensionDisplayInds=i.parcatsViewModel.model.dimensions.map(function(i){return i.displayInd}),i.dragHasMoved=!1,i.dragCategoryDisplayInd=null,x.select(this).selectAll("g.category").select("rect.catrect").each(function(o){var s=x.mouse(this)[0],_=x.mouse(this)[1];-2<=s&&s<=o.width+2&&-2<=_&&_<=o.height+2&&(i.dragCategoryDisplayInd=o.model.displayInd,i.initialDragCategoryDisplayInds=i.model.categories.map(function(i){return i.displayInd}),o.model.dragY=o.y,j.raiseToTop(this.parentNode),x.select(this.parentNode).selectAll("rect.bandrect").each(function(o){o.y<_&&_<=o.y+o.height&&(i.potentialClickBand=this)}))}),i.parcatsViewModel.dragDimension=i,N.loneUnhover(i.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function dragDimension(i){if("fixed"!==i.parcatsViewModel.arrangement&&(i.dragHasMoved=!0,null!==i.dragDimensionDisplayInd)){var o=i.dragDimensionDisplayInd,s=i.parcatsViewModel.dimensions[o];if(null!==i.dragCategoryDisplayInd){var _=s.categories[i.dragCategoryDisplayInd];_.model.dragY+=x.event.dy;var F=_.model.dragY,N=_.model.displayInd,j=s.categories,G=j[N-1],Z=j[N+1];void 0!==G&&F<G.y+G.height/2&&(_.model.displayInd=G.model.displayInd,G.model.displayInd=N),void 0!==Z&&F+_.height>Z.y+Z.height/2&&(_.model.displayInd=Z.model.displayInd,Z.model.displayInd=N),i.dragCategoryDisplayInd=_.model.displayInd}if(null===i.dragCategoryDisplayInd||"freeform"===i.parcatsViewModel.arrangement){s.model.dragX=x.event.x;var X=i.parcatsViewModel.dimensions[o-1],J=i.parcatsViewModel.dimensions[o+1];void 0!==X&&s.model.dragX<X.x+X.width&&(s.model.displayInd=X.model.displayInd,X.model.displayInd=o),void 0!==J&&s.model.dragX+s.width>J.x&&(s.model.displayInd=J.model.displayInd,J.model.displayInd=i.dragDimensionDisplayInd),i.dragDimensionDisplayInd=s.model.displayInd}updateDimensionViewModels(i.parcatsViewModel),updatePathViewModels(i.parcatsViewModel),updateSvgCategories(i.parcatsViewModel),updateSvgPaths(i.parcatsViewModel)}}function dragDimensionEnd(i){if("fixed"!==i.parcatsViewModel.arrangement&&null!==i.dragDimensionDisplayInd){x.select(this).selectAll("text").attr("font-weight","normal");var o={},s=getTraceIndex(i.parcatsViewModel),_=i.parcatsViewModel.model.dimensions.map(function(i){return i.displayInd}),N=i.initialDragDimensionDisplayInds.some(function(i,o){return i!==_[o]});N&&_.forEach(function(s,x){o["dimensions["+i.parcatsViewModel.model.dimensions[x].containerInd+"].displayindex"]=s});var j=!1;if(null!==i.dragCategoryDisplayInd){var G=i.model.categories.map(function(i){return i.displayInd});if(j=i.initialDragCategoryDisplayInds.some(function(i,o){return i!==G[o]})){var Z=i.model.categories.slice().sort(function(i,o){return i.displayInd-o.displayInd}),X=Z.map(function(i){return i.categoryValue}),J=Z.map(function(i){return i.categoryLabel});o["dimensions["+i.model.containerInd+"].categoryarray"]=[X],o["dimensions["+i.model.containerInd+"].ticktext"]=[J],o["dimensions["+i.model.containerInd+"].categoryorder"]="array"}}-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!i.dragHasMoved&&i.potentialClickBand&&("color"===i.parcatsViewModel.hoveron?emitPointsEventColorHovermode(i.potentialClickBand,"plotly_click",x.event.sourceEvent):emitPointsEventCategoryHovermode(i.potentialClickBand,"plotly_click",x.event.sourceEvent)),i.model.dragX=null,null!==i.dragCategoryDisplayInd&&(i.parcatsViewModel.dimensions[i.dragDimensionDisplayInd].categories[i.dragCategoryDisplayInd].model.dragY=null,i.dragCategoryDisplayInd=null),i.dragDimensionDisplayInd=null,i.parcatsViewModel.dragDimension=null,i.dragHasMoved=null,i.potentialClickBand=null,updateDimensionViewModels(i.parcatsViewModel),updatePathViewModels(i.parcatsViewModel),x.transition().duration(300).ease("cubic-in-out").each(function(){updateSvgCategories(i.parcatsViewModel,!0),updateSvgPaths(i.parcatsViewModel,!0)}).each("end",function(){(N||j)&&F.restyle(i.parcatsViewModel.graphDiv,o,[s])})}}function getTraceIndex(i){for(var o,s=i.graphDiv._fullData,x=0;x<s.length;x++)if(i.key===s[x].uid){o=x;break}return o}function updateSvgPaths(i,o){var s;void 0===o&&(o=!1),i.pathSelection.data(function(i){return i.paths},key),(s=i.pathSelection,o?s.transition():s).attr("d",function(i){return i.svgD})}function updateSvgCategories(i,o){function transition(i){return o?i.transition():i}void 0===o&&(o=!1),i.dimensionSelection.data(function(i){return i.dimensions},key);var s=i.dimensionSelection.selectAll("g.category").data(function(i){return i.categories},key);transition(i.dimensionSelection).attr("transform",function(i){return G(i.x,0)}),transition(s).attr("transform",function(i){return G(0,i.y)}),s.select(".dimlabel").text(function(i,o){return 0===o?i.parcatsViewModel.model.dimensions[i.model.dimensionInd].dimensionLabel:null}),s.select(".catlabel").attr("text-anchor",function(i){return catInRightDim(i)?"start":"end"}).attr("x",function(i){return catInRightDim(i)?i.width+5:-5}).each(function(i){var o,s;catInRightDim(i)?(o=i.width+5,s="start"):(o=-5,s="end"),x.select(this).selectAll("tspan").attr("x",o).attr("text-anchor",s)});var _=s.selectAll("rect.bandrect").data(function(i){return i.bands},key),F=_.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(i){return i.color}).attr("fill-opacity",0);_.attr("fill",function(i){return i.color}).attr("width",function(i){return i.width}).attr("height",function(i){return i.height}).attr("y",function(i){return i.y}),styleBandsNoHover(F),_.each(function(){j.raiseToTop(this)}),_.exit().remove()}function createParcatsViewModel(i,o,s){var x,_=s[0],F=o.margin||{l:80,r:80,t:100,b:80},N=_.trace,j=N.domain,G=o.width,Z=o.height,X=Math.floor(G*(j.x[1]-j.x[0])),J=Math.floor(Z*(j.y[1]-j.y[0])),$=j.x[0]*G+F.l,ee=o.height-j.y[1]*o.height+F.t,et=N.line.shape;x="all"===N.hoverinfo?["count","probability"]:(N.hoverinfo||"").split("+");var er={trace:N,key:N.uid,model:_,x:$,y:ee,width:X,height:J,hoveron:N.hoveron,hoverinfoItems:x,arrangement:N.arrangement,bundlecolors:N.bundlecolors,sortpaths:N.sortpaths,labelfont:N.labelfont,categorylabelfont:N.tickfont,pathShape:et,dragDimension:null,margin:F,paths:[],dimensions:[],graphDiv:i,traceSelection:null,pathSelection:null,dimensionSelection:null};return _.dimensions&&(updateDimensionViewModels(er),updatePathViewModels(er)),er}function buildSvgPath(i,o,s,x,F){var N,j,G=[],Z=[];for(j=0;j<s.length-1;j++)G.push((N=_(s[j]+i[j],i[j+1]))(F)),Z.push(N(1-F));var X="M "+i[0]+","+o[0];for(X+="l"+s[0]+",0 ",j=1;j<s.length;j++)X+="C"+G[j-1]+","+o[j-1]+" "+Z[j-1]+","+o[j]+" "+i[j]+","+o[j]+"l"+s[j]+",0 ";for(X+="l0,"+x+" l -"+s[s.length-1]+",0 ",j=s.length-2;j>=0;j--)X+="C"+Z[j]+","+(o[j+1]+x)+" "+G[j]+","+(o[j]+x)+" "+(i[j]+s[j])+","+(o[j]+x)+"l-"+s[j]+",0 ";return X+"Z"}function updatePathViewModels(i){var o=i.dimensions,s=i.model,x=o.map(function(i){return i.categories.map(function(i){return i.y})}),_=i.model.dimensions.map(function(i){return i.categories.map(function(i){return i.displayInd})}),F=i.model.dimensions.map(function(i){return i.displayInd}),N=i.dimensions.map(function(i){return i.model.dimensionInd}),j=o.map(function(i){return i.x}),G=o.map(function(i){return i.width}),Z=[];for(var X in s.paths)s.paths.hasOwnProperty(X)&&Z.push(s.paths[X]);function pathDisplayCategoryInds(i){var o=i.categoryInds.map(function(i,o){return _[o][i]});return N.map(function(i){return o[i]})}Z.sort(function(o,s){var x=pathDisplayCategoryInds(o),_=pathDisplayCategoryInds(s);return("backward"===i.sortpaths&&(x.reverse(),_.reverse()),x.push(o.valueInds[0]),_.push(s.valueInds[0]),i.bundlecolors&&(x.unshift(o.rawColor),_.unshift(s.rawColor)),x<_)?-1:x>_?1:0});for(var J=Array(Z.length),$=o[0].model.count,ee=o[0].categories.map(function(i){return i.height}).reduce(function(i,o){return i+o}),et=0;et<Z.length;et++){var er,en,ei=Z[et];er=$>0?ee*(ei.count/$):0;for(var eo=Array(x.length),es=0;es<ei.categoryInds.length;es++){var el=ei.categoryInds[es],ec=_[es][el],eu=F[es];eo[eu]=x[eu][ec],x[eu][ec]+=er;var ef=i.dimensions[eu].categories[ec],eh=ef.bands.length,ed=ef.bands[eh-1];if(void 0===ed||ei.rawColor!==ed.rawColor){var ep=void 0===ed?0:ed.y+ed.height;ef.bands.push({key:ep,color:ei.color,rawColor:ei.rawColor,height:er,width:ef.width,count:ei.count,y:ep,categoryViewModel:ef,parcatsViewModel:i})}else{var eg=ef.bands[eh-1];eg.height+=er,eg.count+=ei.count}}en="hspline"===i.pathShape?buildSvgPath(j,eo,G,er,.5):buildSvgPath(j,eo,G,er,0),J[et]={key:ei.valueInds[0],model:ei,height:er,leftXs:j,topYs:eo,dimWidths:G,svgD:en,parcatsViewModel:i}}i.paths=J}function updateDimensionViewModels(i){var o=i.model.dimensions.map(function(i){return{displayInd:i.displayInd,dimensionInd:i.dimensionInd}});o.sort(function(i,o){return i.displayInd-o.displayInd});var s=[];for(var x in o){var _=o[x].dimensionInd,F=i.model.dimensions[_];s.push(function(i,o){var s,x,_,F,N,j,G=i.model.dimensions.length,Z=o.displayInd;s=40+(G>1?(i.width-80-16)/(G-1):0)*Z;var X=[],J=i.model.maxCats,$=o.categories.length,ee=o.count,et=i.height-8*(J-1),er=(J-$)*8/2,en=o.categories.map(function(i){return{displayInd:i.displayInd,categoryInd:i.categoryInd}});for(en.sort(function(i,o){return i.displayInd-o.displayInd}),j=0;j<$;j++)N=en[j].categoryInd,_=o.categories[N],x=ee>0?_.count/ee*et:0,F={key:_.valueInds[0],model:_,width:16,height:x,y:null!==_.dragY?_.dragY:er,bands:[],parcatsViewModel:i},er=er+x+8,X.push(F);return{key:o.dimensionInd,x:null!==o.dragX?o.dragX:s,y:0,width:16,model:o,categories:X,parcatsViewModel:i,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}(i,F))}i.dimensions=s}i.exports=function(i,o,s,_){var F,N,X,$,ee,et,er,en,ei,eo,es,el,ec;F=i._context.staticPlot,N=s.map(createParcatsViewModel.bind(0,i,_)),(X=o.selectAll("g.parcatslayer").data([null])).enter().append("g").attr("class","parcatslayer").style("pointer-events",F?"none":"all"),ee=($=X.selectAll("g.trace.parcats").data(N,key)).enter().append("g").attr("class","trace parcats"),$.attr("transform",function(i){return G(i.x,i.y)}),ee.append("g").attr("class","paths"),(et=$.select("g.paths").selectAll("path.path").data(function(i){return i.paths},key)).attr("fill",function(i){return i.model.color}),stylePathsNoHover(er=et.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(i){return i.model.color}).attr("fill-opacity",0)),et.attr("d",function(i){return i.svgD}),er.empty()||et.sort(compareRawColor),et.exit().remove(),et.on("mouseover",mouseoverPath).on("mouseout",mouseoutPath).on("click",clickPath),ee.append("g").attr("class","dimensions"),(en=$.select("g.dimensions").selectAll("g.dimension").data(function(i){return i.dimensions},key)).enter().append("g").attr("class","dimension"),en.attr("transform",function(i){return G(i.x,0)}),en.exit().remove(),eo=(ei=en.selectAll("g.category").data(function(i){return i.categories},key)).enter().append("g").attr("class","category"),ei.attr("transform",function(i){return G(0,i.y)}),eo.append("rect").attr("class","catrect").attr("pointer-events","none"),ei.select("rect.catrect").attr("fill","none").attr("width",function(i){return i.width}).attr("height",function(i){return i.height}),styleCategoriesNoHover(eo),(es=ei.selectAll("rect.bandrect").data(function(i){return i.bands},key)).each(function(){j.raiseToTop(this)}),es.attr("fill",function(i){return i.color}),el=es.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(i){return i.color}).attr("fill-opacity",0),es.attr("fill",function(i){return i.color}).attr("width",function(i){return i.width}).attr("height",function(i){return i.height}).attr("y",function(i){return i.y}).attr("cursor",function(i){return"fixed"===i.parcatsViewModel.arrangement?"default":"perpendicular"===i.parcatsViewModel.arrangement?"ns-resize":"move"}),styleBandsNoHover(el),es.exit().remove(),eo.append("text").attr("class","catlabel").attr("pointer-events","none"),ec=i._fullLayout.paper_bgcolor,ei.select("text.catlabel").attr("text-anchor",function(i){return catInRightDim(i)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",J.makeTextShadow(ec)).style("fill","rgb(0, 0, 0)").attr("x",function(i){return catInRightDim(i)?i.width+5:-5}).attr("y",function(i){return i.height/2}).text(function(i){return i.model.categoryLabel}).each(function(o){Z.font(x.select(this),o.parcatsViewModel.categorylabelfont),J.convertToTspans(x.select(this),i)}),eo.append("text").attr("class","dimlabel"),ei.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(i){return"fixed"===i.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(i){return i.width/2}).attr("y",-5).text(function(i,o){return 0===o?i.parcatsViewModel.model.dimensions[i.model.dimensionInd].dimensionLabel:null}).each(function(i){Z.font(x.select(this),i.parcatsViewModel.labelfont)}),ei.selectAll("rect.bandrect").on("mouseover",mouseoverCategoryBand).on("mouseout",mouseoutCategory),ei.exit().remove(),en.call(x.behavior.drag().origin(function(i){return{x:i.x,y:0}}).on("dragstart",dragDimensionStart).on("drag",dragDimension).on("dragend",dragDimensionEnd)),$.each(function(i){i.traceSelection=x.select(this),i.pathSelection=x.select(this).selectAll("g.paths").selectAll("path.path"),i.dimensionSelection=x.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),$.exit().remove()}},45784:function(i,o,s){"use strict";var x=s(45460);i.exports=function(i,o,s,_){var F=i._fullLayout,N=F._paper,j=F._size;x(i,N,o,{width:j.w,height:j.h,margin:{t:j.t,r:j.r,b:j.b,l:j.l}},s,_)}},73362:function(i,o,s){"use strict";var x=s(50693),_=s(13838),F=s(41940),N=s(27670).Y,j=s(1426).extendFlat,G=s(44467).templatedArray;i.exports={domain:N({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:F({editType:"plot"}),tickfont:F({editType:"plot"}),rangefont:F({editType:"plot"}),dimensions:G("dimension",{label:{valType:"string",editType:"plot"},tickvals:j({},_.tickvals,{editType:"plot"}),ticktext:j({},_.ticktext,{editType:"plot"}),tickformat:j({},_.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:j({editType:"calc"},x("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(i,o,s){"use strict";var x=s(25706),_=s(39898),F=s(28984).keyFun,N=s(28984).repeat,j=s(71828).sorterAsc,G=s(71828).strTranslate,Z=x.bar.snapRatio,X=x.bar.snapClose;function ordinalScaleSnap(i,o,s,x){if(function(i,o){for(var s=0;s<o.length;s++)if(i>=o[s][0]&&i<=o[s][1])return!0;return!1}(s,x))return s;var _=i?-1:1,F=0,N=o.length-1;if(_<0){var j=F;F=N,N=j}for(var G=o[F],J=G,$=F;_*$<_*N;$+=_){var ee=$+_,et=o[ee];if(_*s<_*(G*(1-X)+et*X))return G*(1-Z)+J*Z;if(_*s<_*et||ee===N)return et*(1-Z)+G*Z;J=G,G=et}}function barHorizontalSetup(i){i.attr("x",-x.bar.captureWidth/2).attr("width",x.bar.captureWidth)}function backgroundBarHorizontalSetup(i){i.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function setHighlight(i){if(!i.brush.filterSpecified)return"0,"+i.height;for(var o,s,x,_=unitToPx(i.brush.filter.getConsolidated(),i.height),F=[0],N=_.length?_[0][0]:null,j=0;j<_.length;j++)s=(o=_[j])[1]-o[0],F.push(N),F.push(s),(x=j+1)<_.length&&(N=_[x][0]-o[1]);return F.push(i.height),F}function unitToPx(i,o){return i.map(function(i){return i.map(function(i){return Math.max(0,i*o)}).sort(j)})}function clearCursor(){_.select(document.body).style("cursor",null)}function styleHighlight(i){i.attr("stroke-dasharray",setHighlight)}function renderHighlight(i,o){var s=_.select(i).selectAll(".highlight, .highlight-shadow");styleHighlight(o?s.transition().duration(x.bar.snapDuration).each("end",o):s)}function getInterval(i,o){var s,_=i.brush,F=_.filterSpecified,N=NaN,j={};if(F){var G=i.height,Z=_.filter.getConsolidated(),X=unitToPx(Z,G),J=NaN,$=NaN,ee=NaN;for(s=0;s<=X.length;s++){var et=X[s];if(et&&et[0]<=o&&o<=et[1]){J=s;break}if($=s?s-1:NaN,et&&et[0]>o){ee=s;break}}if(isNaN(N=J)&&(N=isNaN($)||isNaN(ee)?isNaN($)?ee:$:o-X[$][1]<X[ee][0]-o?$:ee),!isNaN(N)){var er=X[N],en=function(i,o){var s=x.bar.handleHeight;if(!(o>i[1]+s)&&!(o<i[0]-s))return o>=.9*i[1]+.1*i[0]?"n":o<=.9*i[0]+.1*i[1]?"s":"ns"}(er,o);en&&(j.interval=Z[N],j.intervalPix=er,j.region=en)}}if(i.ordinal&&!j.region){var ei=i.unitTickvals,eo=i.unitToPaddedPx.invert(o);for(s=0;s<ei.length;s++){var es=[.25*ei[Math.max(s-1,0)]+.75*ei[s],.25*ei[Math.min(s+1,ei.length-1)]+.75*ei[s]];if(eo>=es[0]&&eo<=es[1]){j.clickableOrdinalRange=es;break}}}return j}function drag(i,o){_.event.sourceEvent.stopPropagation();var s=o.height-_.mouse(i)[1]-2*x.verticalPadding,F=o.brush.svgBrush;F.wasDragged=!0,F._dragging=!0,F.grabbingBar?F.newExtent=[s-F.grabPoint,s+F.barLength-F.grabPoint].map(o.unitToPaddedPx.invert):F.newExtent=[F.startExtent,o.unitToPaddedPx.invert(s)].sort(j),o.brush.filterSpecified=!0,F.extent=F.stayingIntervals.concat([F.newExtent]),F.brushCallback(o),renderHighlight(i.parentNode)}function mousemove(i,o){var s=o.height-_.mouse(i)[1]-2*x.verticalPadding,F=getInterval(o,s),N="crosshair";F.clickableOrdinalRange?N="pointer":F.region&&(N=F.region+"-resize"),_.select(document.body).style("cursor",N)}function attachDragBehavior(i){i.on("mousemove",function(i){_.event.preventDefault(),i.parent.inBrushDrag||mousemove(this,i)}).on("mouseleave",function(i){i.parent.inBrushDrag||clearCursor()}).call(_.behavior.drag().on("dragstart",function(i){!function(i,o){_.event.sourceEvent.stopPropagation();var s=o.height-_.mouse(i)[1]-2*x.verticalPadding,F=o.unitToPaddedPx.invert(s),N=o.brush,j=getInterval(o,s),G=j.interval,Z=N.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar="ns"===j.region,Z.grabbingBar){var X=G.map(o.unitToPaddedPx);Z.grabPoint=s-X[0]-x.verticalPadding,Z.barLength=X[1]-X[0]}Z.clickableOrdinalRange=j.clickableOrdinalRange,Z.stayingIntervals=o.multiselect&&N.filterSpecified?N.filter.getConsolidated():[],G&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(i){return i[0]!==G[0]&&i[1]!==G[1]})),Z.startExtent=j.region?G["s"===j.region?1:0]:F,o.parent.inBrushDrag=!0,Z.brushStartCallback()}(this,i)}).on("drag",function(i){drag(this,i)}).on("dragend",function(i){!function(i,o){var s=o.brush,x=s.filter,F=s.svgBrush;F._dragging||(mousemove(i,o),drag(i,o),o.brush.svgBrush.wasDragged=!1),F._dragging=!1,_.event.sourceEvent.stopPropagation();var N=F.grabbingBar;if(F.grabbingBar=!1,F.grabLocation=void 0,o.parent.inBrushDrag=!1,clearCursor(),!F.wasDragged){F.wasDragged=void 0,F.clickableOrdinalRange?s.filterSpecified&&o.multiselect?F.extent.push(F.clickableOrdinalRange):(F.extent=[F.clickableOrdinalRange],s.filterSpecified=!0):N?(F.extent=F.stayingIntervals,0===F.extent.length&&brushClear(s)):brushClear(s),F.brushCallback(o),renderHighlight(i.parentNode),F.brushEndCallback(s.filterSpecified?x.getConsolidated():[]);return}var mergeIntervals=function(){x.set(x.getConsolidated())};if(o.ordinal){var j=o.unitTickvals;j[j.length-1]<j[0]&&j.reverse(),F.newExtent=[ordinalScaleSnap(0,j,F.newExtent[0],F.stayingIntervals),ordinalScaleSnap(1,j,F.newExtent[1],F.stayingIntervals)];var G=F.newExtent[1]>F.newExtent[0];F.extent=F.stayingIntervals.concat(G?[F.newExtent]:[]),F.extent.length||brushClear(s),F.brushCallback(o),G?renderHighlight(i.parentNode,mergeIntervals):(mergeIntervals(),renderHighlight(i.parentNode))}else mergeIntervals();F.brushEndCallback(s.filterSpecified?x.getConsolidated():[])}(this,i)}))}function startAsc(i,o){return i[0]-o[0]}function brushClear(i){i.filterSpecified=!1,i.svgBrush.extent=[[-1/0,1/0]]}function dedupeRealRanges(i){for(var o,s=i.slice(),x=[],_=s.shift();_;){for(o=_.slice();(_=s.shift())&&_[0]<=o[1];)o[1]=Math.max(o[1],_[1]);x.push(o)}return 1===x.length&&x[0][0]>x[0][1]&&(x=[]),x}i.exports={makeBrush:function(i,o,s,x,_,F){var N,G,Z,X=(Z=[],{set:function(i){1===(Z=i.map(function(i){return i.slice().sort(j)}).sort(startAsc)).length&&Z[0][0]===-1/0&&Z[0][1]===1/0&&(Z=[[0,-1]]),N=dedupeRealRanges(Z),G=Z.reduce(function(i,o){return[Math.min(i[0],o[0]),Math.max(i[1],o[1])]},[1/0,-1/0])},get:function(){return Z.slice()},getConsolidated:function(){return N},getBounds:function(){return G}});return X.set(s),{filter:X,filterSpecified:o,svgBrush:{extent:[],brushStartCallback:x,brushCallback:function(i){var o=i.brush,s=o.svgBrush.extent.map(function(i){return i.slice()}).slice();o.filter.set(s),_()},brushEndCallback:F}}},ensureAxisBrush:function(i,o,s){var _,j,Z,X,J=i.selectAll("."+x.cn.axisBrush).data(N,F);J.enter().append("g").classed(x.cn.axisBrush,!0),_=s._context.staticPlot,(j=J.selectAll(".background").data(N)).enter().append("rect").classed("background",!0).call(barHorizontalSetup).call(backgroundBarHorizontalSetup).style("pointer-events",_?"none":"auto").attr("transform",G(0,x.verticalPadding)),j.call(attachDragBehavior).attr("height",function(i){return i.height-x.verticalPadding}),(Z=J.selectAll(".highlight-shadow").data(N)).enter().append("line").classed("highlight-shadow",!0).attr("x",-x.bar.width/2).attr("stroke-width",x.bar.width+x.bar.strokeWidth).attr("stroke",o).attr("opacity",x.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(i){return i.height}).call(styleHighlight),(X=J.selectAll(".highlight").data(N)).enter().append("line").classed("highlight",!0).attr("x",-x.bar.width/2).attr("stroke-width",x.bar.width-x.bar.strokeWidth).attr("stroke",x.bar.fillColor).attr("opacity",x.bar.fillOpacity).attr("stroke-linecap","butt"),X.attr("y1",function(i){return i.height}).call(styleHighlight)},cleanRanges:function(i,o){if(Array.isArray(i[0])?(i=i.map(function(i){return i.sort(j)}),i=o.multiselect?dedupeRealRanges(i.sort(startAsc)):[i[0]]):i=[i.sort(j)],o.tickvals){var s=o.tickvals.slice().sort(j);if(!(i=i.map(function(i){var o=[ordinalScaleSnap(0,s,i[0],[]),ordinalScaleSnap(1,s,i[1],[])];if(o[1]>o[0])return o}).filter(function(i){return i})).length)return}return i.length>1?i:i[0]}}},71791:function(i,o,s){"use strict";i.exports={attributes:s(73362),supplyDefaults:s(3633),calc:s(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:s(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(i,o,s){"use strict";var x=s(39898),_=s(27659).a0,F=s(21341),N=s(77922);o.name="parcoords",o.plot=function(i){var o=_(i.calcdata,"parcoords")[0];o.length&&F(i,o)},o.clean=function(i,o,s,x){var _=x._has&&x._has("parcoords"),F=o._has&&o._has("parcoords");_&&!F&&(x._paperdiv.selectAll(".parcoords").remove(),x._glimages.selectAll("*").remove())},o.toSVG=function(i){var o=i._fullLayout._glimages,s=x.select(i).selectAll(".svg-container");s.filter(function(i,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var i=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:N.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){x.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray,_=s(21081),F=s(28984).wrap;i.exports=function(i,o){var s,N;return _.hasColorscale(o,"line")&&x(o.line.color)?(s=o.line.color,N=_.extractOpts(o.line).colorscale,_.calc(i,o,{vals:s,containerStr:"line",cLetter:"c"})):(s=function(i){for(var o=Array(i),s=0;s<i;s++)o[s]=.5;return o}(o._length),N=[[0,o.line.color],[1,o.line.color]]),F({lineColor:s,cscale:N})}},25706:function(i){"use strict";i.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(i,o,s){"use strict";var x=s(71828),_=s(52075).hasColorscale,F=s(1586),N=s(27670).c,j=s(85501),G=s(89298),Z=s(73362),X=s(57920),J=s(25706).maxDimensionCount,$=s(94397);function dimensionDefaults(i,o,s,_){function coerce(s,_){return x.coerce(i,o,Z.dimensions,s,_)}var F=coerce("values"),N=coerce("visible");if(F&&F.length||(N=o.visible=!1),N){coerce("label"),coerce("tickvals"),coerce("ticktext"),coerce("tickformat");var j=coerce("range");o._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:j},G.setConvert(o._ax,_.layout),coerce("multiselect");var J=coerce("constraintrange");J&&(o.constraintrange=X.cleanRanges(J,o))}}i.exports=function(i,o,s,G){function coerce(s,_){return x.coerce(i,o,Z,s,_)}var X=i.dimensions;Array.isArray(X)&&X.length>J&&(x.log("parcoords traces support up to "+J+" dimensions at the moment"),X.splice(J));var ee=j(i,o,{name:"dimensions",layout:G,handleItemDefaults:dimensionDefaults}),et=function(i,o,s,N,j){var G=j("line.color",s);if(_(i,"line")&&x.isArrayOrTypedArray(G)){if(G.length)return j("line.colorscale"),F(i,o,N,j,{prefix:"line.",cLetter:"c"}),G.length;o.line.color=s}return 1/0}(i,o,s,G,coerce);N(o,G,coerce),Array.isArray(ee)&&ee.length||(o.visible=!1),$(o,ee,"values",et);var er={family:G.font.family,size:Math.round(G.font.size/1.2),color:G.font.color};x.coerceFont(coerce,"labelfont",er),x.coerceFont(coerce,"tickfont",er),x.coerceFont(coerce,"rangefont",er),coerce("labelangle"),coerce("labelside"),coerce("unselected.line.color"),coerce("unselected.line.opacity")}},1602:function(i,o,s){"use strict";var x=s(71828).isTypedArray;o.convertTypedArray=function(i){return x(i)?Array.prototype.slice.call(i):i},o.isOrdinal=function(i){return!!i.tickvals},o.isVisible=function(i){return i.visible||!("visible"in i)}},67618:function(i,o,s){"use strict";var x=s(71791);x.plot=s(21341),i.exports=x},83398:function(i,o,s){"use strict";var x=s(56068),_=x(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),F=x(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),N=s(25706).maxDimensionCount,j=s(71828),G=new Uint8Array(4),Z=new Uint8Array(4),X={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function clear(i,o,s,x,_){var F=i._gl;F.enable(F.SCISSOR_TEST),F.scissor(o,s,x,_),i.clear({color:[0,0,0,0],depth:1})}function calcPickColor(i,o){return(i>>>8*o)%256/255}function pad2(i){var o="0"+i;return o.substr(o.length-2)}function getAttrName(i){return i<N?"p"+pad2(i+1)+"_"+pad2(i+4):"colors"}function expandedPixelRange(i){var o=Math.max(0,Math.floor(2047*i[0]),0),s=Math.min(2047,Math.ceil(2047*i[1]),2047);return[Math.min(o,s),Math.max(o,s)]}i.exports=function(i,o){var s,x,J,$,ee=o.context,et=o.pick,er=o.regl,en=er._gl,ei=en.getParameter(en.ALIASED_LINE_WIDTH_RANGE),eo=Math.max(ei[0],Math.min(ei[1],o.viewModel.plotGlPixelRatio)),es={currentRafs:{},drawCompleted:!0,clearOnly:!1},el=function(i){for(var o={},s=0;s<=N;s+=4)o[getAttrName(s)]=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return o}(er),ec=er.texture(X),eu=[];update(o);var ef=er({profile:!1,blend:{enable:ee,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!ee,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:er.prop("scissorX"),y:er.prop("scissorY"),width:er.prop("scissorWidth"),height:er.prop("scissorHeight")}},viewport:{x:er.prop("viewportX"),y:er.prop("viewportY"),width:er.prop("viewportWidth"),height:er.prop("viewportHeight")},dither:!1,vert:_,frag:F,primitive:"lines",lineWidth:eo,attributes:el,uniforms:{resolution:er.prop("resolution"),viewBoxPos:er.prop("viewBoxPos"),viewBoxSize:er.prop("viewBoxSize"),dim0A:er.prop("dim0A"),dim1A:er.prop("dim1A"),dim0B:er.prop("dim0B"),dim1B:er.prop("dim1B"),dim0C:er.prop("dim0C"),dim1C:er.prop("dim1C"),dim0D:er.prop("dim0D"),dim1D:er.prop("dim1D"),loA:er.prop("loA"),hiA:er.prop("hiA"),loB:er.prop("loB"),hiB:er.prop("hiB"),loC:er.prop("loC"),hiC:er.prop("hiC"),loD:er.prop("loD"),hiD:er.prop("hiD"),palette:ec,contextColor:er.prop("contextColor"),maskTexture:er.prop("maskTexture"),drwLayer:er.prop("drwLayer"),maskHeight:er.prop("maskHeight")},offset:er.prop("offset"),count:er.prop("count")});function update(i){s=i.model,J=(x=i.viewModel.dimensions.slice())[0]?x[0].values.length:0;var o=s.lines,_=et?o.color.map(function(i,s){return s/o.color.length}):o.color,F=function(i,o,s){for(var x=Array(i*(N+4)),_=0,F=0;F<i;F++){for(var j=0;j<N;j++)x[_++]=j<o.length?o[j].paddedUnitValues[F]:.5;x[_++]=calcPickColor(F,2),x[_++]=calcPickColor(F,1),x[_++]=calcPickColor(F,0),x[_++]=Math.max(1e-6,Math.min(.999999,s[F]))}return x}(J,x,_);(function(i,o,s){for(var x=0;x<=N;x+=4)i[getAttrName(x)](function(i,o,s){for(var x=Array(8*o),_=0,F=0;F<o;F++)for(var N=0;N<2;N++)for(var j=0;j<4;j++){var G=4*i+j,Z=s[64*F+G];63===G&&0===N&&(Z*=-1),x[_++]=Z}return x}(x/4,o,s))})(el,J,F),ee||et||(ec=er.texture(j.extendFlat({data:function(i,o){for(var s=Array(256),x=0;x<256;x++)s[x]=i(x/255).concat(255);return s}(s.unitToColor,0)},X)))}return{render:function(i,o,_){var F,N,Z,X=i.length,en=1/0,ei=-1/0;for(F=0;F<X;F++)i[F].dim0.canvasX<en&&(en=i[F].dim0.canvasX,N=F),i[F].dim1.canvasX>ei&&(ei=i[F].dim1.canvasX,Z=F);0===X&&clear(er,0,0,s.canvasWidth,s.canvasHeight);var eo=function(i){var o,s,_,F=[[],[]];for(_=0;_<64;_++){var N=!i&&_<x.length?x[_].brush.filter.getBounds():[-1/0,1/0];F[0][_]=N[0],F[1][_]=N[1]}var j=Array(16384);for(o=0;o<16384;o++)j[o]=255;if(!i)for(o=0;o<x.length;o++){var G=o%8,Z=(o-G)/8,X=Math.pow(2,G),J=x[o].brush.filter.get();if(!(J.length<2)){var ee=expandedPixelRange(J[0])[1];for(s=1;s<J.length;s++){var et=expandedPixelRange(J[s]);for(_=ee+1;_<et[0];_++)j[8*_+Z]&=~X;ee=Math.max(ee,et[1])}}}var en={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:j};return $?$(en):$=er.texture(en),{maskTexture:$,maskHeight:2048,loA:F[0].slice(0,16),loB:F[0].slice(16,32),loC:F[0].slice(32,48),loD:F[0].slice(48,64),hiA:F[1].slice(0,16),hiB:F[1].slice(16,32),hiC:F[1].slice(32,48),hiD:F[1].slice(48,64)}}(ee);for(F=0;F<X;F++){var el=i[F],ec=el.dim0.crossfilterDimensionIndex,eh=el.dim1.crossfilterDimensionIndex,ed=el.canvasX,ep=el.canvasY,eg=ed+el.panelSizeX,em=el.plotGlPixelRatio;if(o||!eu[ec]||eu[ec][0]!==ed||eu[ec][1]!==eg){eu[ec]=[ed,eg];var ey=function(i,o,s,x,_,F,N,G,Z,X,J,$,ee,et){for(var er=[[],[]],en=0;en<64;en++)er[0][en]=en===_?1:0,er[1][en]=en===F?1:0;N*=et,G*=et,Z*=et,X*=et;var ei=i.lines.canvasOverdrag*et,eo=i.domain,es=i.canvasWidth*et,el=i.canvasHeight*et,ec=i.pad.l*et,eu=i.pad.b*et,ef=i.layoutHeight*et,eh=i.layoutWidth*et,ed=i.deselectedLines.color,ep=i.deselectedLines.opacity;return j.extendFlat({key:J,resolution:[es,el],viewBoxPos:[N+ei,G],viewBoxSize:[Z,X],i0:_,i1:F,dim0A:er[0].slice(0,16),dim0B:er[0].slice(16,32),dim0C:er[0].slice(32,48),dim0D:er[0].slice(48,64),dim1A:er[1].slice(0,16),dim1B:er[1].slice(16,32),dim1C:er[1].slice(32,48),dim1D:er[1].slice(48,64),drwLayer:$,contextColor:[ed[0]/255,ed[1]/255,ed[2]/255,"auto"!==ep?ed[3]*ep:Math.max(1/255,Math.pow(1/i.lines.color.length,1/3))],scissorX:(x===o?0:N+ei)+(ec-ei)+eh*eo.x[0],scissorWidth:(x===s?es-N+ei:Z+.5)+(x===o?N+ei:0),scissorY:G+eu+ef*eo.y[0],scissorHeight:X,viewportX:ec-ei+eh*eo.x[0],viewportY:eu+ef*eo.y[0],viewportWidth:es,viewportHeight:el},ee)}(s,N,Z,F,ec,eh,ed,ep,el.panelSizeX,el.panelSizeY,el.dim0.crossfilterDimensionIndex,ee?0:et?2:1,eo,em);es.clearOnly=_,function(i,o,s,x,_,F){var N=F.key;s.drawCompleted||(function(i){i.read({x:0,y:0,width:1,height:1,data:G})}(i),s.drawCompleted=!0),function render(j){var G=Math.min(x,_-j*x);0===j&&(window.cancelAnimationFrame(s.currentRafs[N]),delete s.currentRafs[N],clear(i,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),s.clearOnly||(F.count=2*G,F.offset=2*j*x,o(F),j*x+G<_&&(s.currentRafs[N]=window.requestAnimationFrame(function(){render(j+1)})),s.drawCompleted=!1)}(0)}(er,ef,es,o?s.lines.blockLineCount:J,J,ey)}}},readPixel:function(i,o){return er.read({x:i,y:o,width:1,height:1,data:Z}),Z},readPixels:function(i,o,s,x){var _=new Uint8Array(4*s*x);return er.read({x:i,y:o,width:s,height:x,data:_}),_},destroy:function(){for(var o in i.style["pointer-events"]="none",ec.destroy(),$&&$.destroy(),el)el[o].destroy()},update:update}}},94397:function(i){"use strict";i.exports=function(i,o,s,x){var _,F;for(x||(x=1/0),_=0;_<o.length;_++)(F=o[_]).visible&&(x=Math.min(x,F[s].length));for(x===1/0&&(x=0),i._length=x,_=0;_<o.length;_++)(F=o[_]).visible&&(F._length=x);return x}},17171:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=_.numberFormat,N=s(36652),j=s(89298),G=_.strRotate,Z=_.strTranslate,X=s(63893),J=s(91424),$=s(21081),ee=s(28984),et=ee.keyFun,er=ee.repeat,en=ee.unwrap,ei=s(1602),eo=s(25706),es=s(57920),el=s(83398);function findExtreme(i,o,s){return _.aggNums(i,null,o,s)}function findExtremes(i,o){return fixExtremes(findExtreme(Math.min,i,o),findExtreme(Math.max,i,o))}function dimensionExtent(i){var o=i.range;return o?fixExtremes(o[0],o[1]):findExtremes(i.values,i._length)}function fixExtremes(i,o){return(isNaN(i)||!isFinite(i))&&(i=0),(isNaN(o)||!isFinite(o))&&(o=0),i===o&&(0===i?(i-=1,o+=1):(i*=.9,o*=1.1)),[i,o]}function someFiltersActive(i){return i.dimensions.some(function(i){return i.brush.filterSpecified})}function model(i,o,s){var F,j,G,Z=en(o),X=Z.trace,J=ei.convertTypedArray(Z.lineColor),ee=X.line,et={color:N(X.unselected.line.color),opacity:X.unselected.line.opacity},er=$.extractOpts(ee),es=er.reversescale?$.flipScale(Z.cscale):Z.cscale,el=X.domain,ec=X.dimensions,eu=i.width,ef=X.labelangle,eh=X.labelside,ed=X.labelfont,ep=X.tickfont,eg=X.rangefont,em=_.extendDeepNoArrays({},ee,{color:J.map(x.scale.linear().domain(dimensionExtent({values:J,range:[er.min,er.max],_length:X._length}))),blockLineCount:eo.blockLineCount,canvasOverdrag:eo.overdrag*eo.canvasPixelRatio}),ey=Math.floor(eu*(el.x[1]-el.x[0])),ev=Math.floor(i.height*(el.y[1]-el.y[0])),ex=i.margin||{l:80,r:80,t:100,b:80};return{key:s,colCount:ec.filter(ei.isVisible).length,dimensions:ec,tickDistance:eo.tickDistance,unitToColor:(F=es.map(function(i){return i[0]}),j=es.map(function(i){var o=N(i[1]);return x.rgb("rgb("+o[0]+","+o[1]+","+o[2]+")")}),G="rgb".split("").map(function(i){return x.scale.linear().clamp(!0).domain(F).range(j.map(function(o){return o[i]}))}),function(i){return G.map(function(o){return o(i)})}),lines:em,deselectedLines:et,labelAngle:ef,labelSide:eh,labelFont:ed,tickFont:ep,rangeFont:eg,layoutWidth:eu,layoutHeight:i.height,domain:el,translateX:el.x[0]*eu,translateY:i.height-el.y[1]*i.height,pad:ex,canvasWidth:ey*eo.canvasPixelRatio+2*em.canvasOverdrag,canvasHeight:ev*eo.canvasPixelRatio,width:ey,height:ev,canvasPixelRatio:eo.canvasPixelRatio}}function viewModel(i,o,s){var N,j=s.width,G=s.height,Z=s.dimensions,X=s.canvasPixelRatio,xScale=function(i){return j*i/Math.max(1,s.colCount-1)},J=eo.verticalPadding/G,$=(N=eo.verticalPadding,x.scale.linear().range([N,G-N])),ee={key:s.key,xScale:xScale,model:s,inBrushDrag:!1},et={};return ee.dimensions=Z.filter(ei.isVisible).map(function(N,j){var Z,er,en,el,ec,eu,ef,eh,ed=x.scale.linear().domain(dimensionExtent(N)).range([J,1-J]),ep=et[N.label];et[N.label]=(ep||0)+1;var eg=N.label+(ep?"__"+ep:""),em=N.constraintrange,ey=em&&em.length;ey&&!Array.isArray(em[0])&&(em=[em]);var ev=ey?em.map(function(i){return i.map(ed)}):[[-1/0,1/0]],ex=N.values;ex.length>N._length&&(ex=ex.slice(0,N._length));var e_=N.tickvals;function makeTickItem(i,o){return{val:i,text:eh[o]}}function sortTickItem(i,o){return i.val-o.val}if(Array.isArray(e_)&&e_.length){Array.isArray(eh=N.ticktext)&&eh.length?eh.length>e_.length?eh=eh.slice(0,e_.length):e_.length>eh.length&&(e_=e_.slice(0,eh.length)):eh=e_.map(F(N.tickformat));for(var ew=1;ew<e_.length;ew++)if(e_[ew]<e_[ew-1]){for(var eT=e_.map(makeTickItem).sort(sortTickItem),ek=0;ek<e_.length;ek++)e_[ek]=eT[ek].val,eh[ek]=eT[ek].text;break}}else e_=void 0;return ex=ei.convertTypedArray(ex),{key:eg,label:N.label,tickFormat:N.tickformat,tickvals:e_,ticktext:eh,ordinal:ei.isOrdinal(N),multiselect:N.multiselect,xIndex:j,crossfilterDimensionIndex:j,visibleIndex:N._index,height:G,values:ex,paddedUnitValues:ex.map(ed),unitTickvals:e_&&e_.map(ed),xScale:xScale,x:xScale(j),canvasX:xScale(j)*X,unitToPaddedPx:$,domainScale:(Z=G,er=eo.verticalPadding,en=N,el=e_,ec=eh,ef=dimensionExtent(en),el?x.scale.ordinal().domain(el.map((eu=F(en.tickformat),ec?function(i,o){var s=ec[o];return null==s?eu(i):s}:eu))).range(el.map(function(i){return Z-er+(i-ef[0])/(ef[1]-ef[0])*(2*er-Z)})):x.scale.linear().domain(ef).range([Z-er,er])),ordinalScale:function(i){if(i.tickvals){var o=dimensionExtent(i);return x.scale.ordinal().domain(i.tickvals).range(i.tickvals.map(function(i){return(i-o[0])/(o[1]-o[0])}))}}(N),parent:ee,model:s,brush:es.makeBrush(i,ey,ev,function(){i.linePickActive(!1)},function(){ee.focusLayer&&ee.focusLayer.render(ee.panels,!0);var o=someFiltersActive(ee);!i.contextShown()&&o?(ee.contextLayer&&ee.contextLayer.render(ee.panels,!0),i.contextShown(!0)):i.contextShown()&&!o&&(ee.contextLayer&&ee.contextLayer.render(ee.panels,!0,!0),i.contextShown(!1))},function(s){if(ee.focusLayer.render(ee.panels,!0),ee.pickLayer&&ee.pickLayer.render(ee.panels,!0),i.linePickActive(!0),o&&o.filterChanged){var x=ed.invert,F=s.map(function(i){return i.map(x).sort(_.sorterAsc)}).sort(function(i,o){return i[0]-o[0]});o.filterChanged(ee.key,N._index,F)}})}}),ee}function styleExtentTexts(i){i.classed(eo.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function calcTilt(i,o){var s=i*Math.PI/180;return{dir:"top"===o?1:-1,dx:Math.sin(s),dy:Math.cos(s),degrees:i}}function updatePanelLayout(i,o,s){for(var x=o.panels||(o.panels=[]),_=i.data(),F=0;F<_.length-1;F++){var N=x[F]||(x[F]={}),j=_[F],G=_[F+1];N.dim0=j,N.dim1=G,N.canvasX=j.canvasX,N.panelSizeX=G.canvasX-j.canvasX,N.panelSizeY=o.model.canvasHeight,N.y=0,N.canvasY=0,N.plotGlPixelRatio=s}}function linearFormat(i,o){return j.tickText(i._ax,o,!1).text}function extremeText(i,o){if(i.ordinal)return"";var s=i.domainScale.domain(),x=s[o?s.length-1:0];return linearFormat(i.model.dimensions[i.visibleIndex],x)}i.exports=function(i,o,s,F){var N,$,ee=i._context.staticPlot,ec=i._fullLayout,eu=ec._toppaper,ef=ec._glcontainer,eh=i._context.plotGlPixelRatio,ed=i._fullLayout.paper_bgcolor;!function(i){for(var o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++)for(var x=i[o][s].trace,_=x.dimensions,F=0;F<_.length;F++){var N=_[F].values,G=_[F]._ax;G&&(G.range?G.range=fixExtremes(G.range[0],G.range[1]):G.range=findExtremes(N,x._length),G.dtick||(G.dtick=.01*(Math.abs(G.range[1]-G.range[0])||1)),G.tickformat=_[F].tickformat,j.calcTicks(G),G.cleanRange())}}(o);var ep=(N=!0,$=!1,{linePickActive:function(i){return arguments.length?N=!!i:N},contextShown:function(i){return arguments.length?$=!!i:$}}),eg=o.filter(function(i){return en(i).trace.visible}).map(model.bind(0,s)).map(viewModel.bind(0,ep,F));ef.each(function(i,o){return _.extendFlat(i,eg[o])});var em=ef.selectAll(".gl-canvas").each(function(i){i.viewModel=eg[0],i.viewModel.plotGlPixelRatio=eh,i.viewModel.paperColor=ed,i.model=i.viewModel?i.viewModel.model:null}),ey=null;em.filter(function(i){return i.pick}).style("pointer-events",ee?"none":"auto").on("mousemove",function(i){if(ep.linePickActive()&&i.lineLayer&&F&&F.hover){var o=x.event,s=this.width,_=this.height,N=x.mouse(this),j=N[0],G=N[1];if(!(j<0)&&!(G<0)&&!(j>=s)&&!(G>=_)){var Z=i.lineLayer.readPixel(j,_-1-G),X=0!==Z[3],J=X?Z[2]+256*(Z[1]+256*Z[0]):null,$={x:j,y:G,clientX:o.clientX,clientY:o.clientY,dataIndex:i.model.key,curveNumber:J};J!==ey&&(X?F.hover($):F.unhover&&F.unhover($),ey=J)}}}),em.style("opacity",function(i){return i.pick?0:1}),eu.style("background","rgba(255, 255, 255, 0)");var ev=eu.selectAll("."+eo.cn.parcoords).data(eg,et);ev.exit().remove(),ev.enter().append("g").classed(eo.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ev.attr("transform",function(i){return Z(i.model.translateX,i.model.translateY)});var ex=ev.selectAll("."+eo.cn.parcoordsControlView).data(er,et);ex.enter().append("g").classed(eo.cn.parcoordsControlView,!0),ex.attr("transform",function(i){return Z(i.model.pad.l,i.model.pad.t)});var e_=ex.selectAll("."+eo.cn.yAxis).data(function(i){return i.dimensions},et);e_.enter().append("g").classed(eo.cn.yAxis,!0),ex.each(function(i){updatePanelLayout(e_,i,eh)}),em.each(function(i){if(i.viewModel){!i.lineLayer||F?i.lineLayer=el(this,i):i.lineLayer.update(i),(i.key||0===i.key)&&(i.viewModel[i.key]=i.lineLayer);var o=!i.context||F;i.lineLayer.render(i.viewModel.panels,o)}}),e_.attr("transform",function(i){return Z(i.xScale(i.xIndex),0)}),e_.call(x.behavior.drag().origin(function(i){return i}).on("drag",function(i){var o=i.parent;ep.linePickActive(!1),i.x=Math.max(-eo.overdrag,Math.min(i.model.width+eo.overdrag,x.event.x)),i.canvasX=i.x*i.model.canvasPixelRatio,e_.sort(function(i,o){return i.x-o.x}).each(function(o,s){o.xIndex=s,o.x=i===o?o.x:o.xScale(o.xIndex),o.canvasX=o.x*o.model.canvasPixelRatio}),updatePanelLayout(e_,o,eh),e_.filter(function(o){return 0!==Math.abs(i.xIndex-o.xIndex)}).attr("transform",function(i){return Z(i.xScale(i.xIndex),0)}),x.select(this).attr("transform",Z(i.x,0)),e_.each(function(s,x,_){_===i.parent.key&&(o.dimensions[x]=s)}),o.contextLayer&&o.contextLayer.render(o.panels,!1,!someFiltersActive(o)),o.focusLayer.render&&o.focusLayer.render(o.panels)}).on("dragend",function(i){var o=i.parent;i.x=i.xScale(i.xIndex),i.canvasX=i.x*i.model.canvasPixelRatio,updatePanelLayout(e_,o,eh),x.select(this).attr("transform",function(i){return Z(i.x,0)}),o.contextLayer&&o.contextLayer.render(o.panels,!1,!someFiltersActive(o)),o.focusLayer&&o.focusLayer.render(o.panels),o.pickLayer&&o.pickLayer.render(o.panels,!0),ep.linePickActive(!0),F&&F.axesMoved&&F.axesMoved(o.key,o.dimensions.map(function(i){return i.crossfilterDimensionIndex}))})),e_.exit().remove();var ew=e_.selectAll("."+eo.cn.axisOverlays).data(er,et);ew.enter().append("g").classed(eo.cn.axisOverlays,!0),ew.selectAll("."+eo.cn.axis).remove();var eT=ew.selectAll("."+eo.cn.axis).data(er,et);eT.enter().append("g").classed(eo.cn.axis,!0),eT.each(function(i){var o=i.model.height/i.model.tickDistance,s=i.domainScale,_=s.domain();x.select(this).call(x.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(o,i.tickFormat).tickValues(i.ordinal?_:null).tickFormat(function(o){return ei.isOrdinal(i)?o:linearFormat(i.model.dimensions[i.visibleIndex],o)}).scale(s)),J.font(eT.selectAll("text"),i.model.tickFont)}),eT.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),eT.selectAll("text").style("text-shadow",X.makeTextShadow(ed)).style("cursor","default");var ek=ew.selectAll("."+eo.cn.axisHeading).data(er,et);ek.enter().append("g").classed(eo.cn.axisHeading,!0);var eA=ek.selectAll("."+eo.cn.axisTitle).data(er,et);eA.enter().append("text").classed(eo.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",ee?"none":"auto"),eA.text(function(i){return i.label}).each(function(o){var s=x.select(this);J.font(s,o.model.labelFont),X.convertToTspans(s,i)}).attr("transform",function(i){var o=calcTilt(i.model.labelAngle,i.model.labelSide),s=eo.axisTitleOffset;return(o.dir>0?"":Z(0,2*s+i.model.height))+G(o.degrees)+Z(-s*o.dx,-s*o.dy)}).attr("text-anchor",function(i){var o=calcTilt(i.model.labelAngle,i.model.labelSide);return 2*Math.abs(o.dx)>Math.abs(o.dy)?o.dir*o.dx<0?"start":"end":"middle"});var eS=ew.selectAll("."+eo.cn.axisExtent).data(er,et);eS.enter().append("g").classed(eo.cn.axisExtent,!0);var eM=eS.selectAll("."+eo.cn.axisExtentTop).data(er,et);eM.enter().append("g").classed(eo.cn.axisExtentTop,!0),eM.attr("transform",Z(0,-eo.axisExtentOffset));var eC=eM.selectAll("."+eo.cn.axisExtentTopText).data(er,et);eC.enter().append("text").classed(eo.cn.axisExtentTopText,!0).call(styleExtentTexts),eC.text(function(i){return extremeText(i,!0)}).each(function(i){J.font(x.select(this),i.model.rangeFont)});var eE=eS.selectAll("."+eo.cn.axisExtentBottom).data(er,et);eE.enter().append("g").classed(eo.cn.axisExtentBottom,!0),eE.attr("transform",function(i){return Z(0,i.model.height+eo.axisExtentOffset)});var eL=eE.selectAll("."+eo.cn.axisExtentBottomText).data(er,et);eL.enter().append("text").classed(eo.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(styleExtentTexts),eL.text(function(i){return extremeText(i,!1)}).each(function(i){J.font(x.select(this),i.model.rangeFont)}),es.ensureAxisBrush(ew,ed,i)}},21341:function(i,o,s){"use strict";var x=s(17171),_=s(79749),F=s(1602).isVisible,N={};function newIndex(i,o,s){var x=o.indexOf(s),_=i.indexOf(x);return -1===_&&(_+=o.length),_}(i.exports=function(i,o){var s=i._fullLayout;if(_(i,[],N)){var j={},G={},Z={},X={},J=s._size;o.forEach(function(o,s){var x=o[0].trace;Z[s]=x.index;var _=X[s]=x._fullInput.index;j[s]=i.data[_].dimensions,G[s]=i.data[_].dimensions.slice()}),x(i,o,{width:J.w,height:J.h,margin:{t:J.t,r:J.r,b:J.b,l:J.l}},{filterChanged:function(o,x,_){var F=G[o][x],N=_.map(function(i){return i.slice()}),j="dimensions["+x+"].constraintrange",J=s._tracePreGUI[i._fullData[Z[o]]._fullInput.uid];if(void 0===J[j]){var $=F.constraintrange;J[j]=$||null}var ee=i._fullData[Z[o]].dimensions[x];N.length?(1===N.length&&(N=N[0]),F.constraintrange=N,ee.constraintrange=N.slice(),N=[N]):(delete F.constraintrange,delete ee.constraintrange,N=null);var et={};et[j]=N,i.emit("plotly_restyle",[et,[X[o]]])},hover:function(o){i.emit("plotly_hover",o)},unhover:function(o){i.emit("plotly_unhover",o)},axesMoved:function(o,s){var x,_=(x=G[o].filter(F),function(i,o){return newIndex(s,x,i)-newIndex(s,x,o)});j[o].sort(_),G[o].filter(function(i){return!F(i)}).sort(function(i){return G[o].indexOf(i)}).forEach(function(i){j[o].splice(j[o].indexOf(i),1),j[o].splice(G[o].indexOf(i),0,i)}),i.emit("plotly_restyle",[{dimensions:[j[o]]},[X[o]]])}})}}).reglPrecompiled=N},34e3:function(i,o,s){"use strict";var x=s(9012),_=s(27670).Y,F=s(41940),N=s(22399),j=s(5386).fF,G=s(5386).si,Z=s(1426).extendFlat,X=s(79952).u,J=F({editType:"plot",arrayOk:!0,colorEditType:"plot"});i.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:N.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:X,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:Z({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:j({},{keys:["label","color","value","percent","text"]}),texttemplate:G({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:Z({},J,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:Z({},J,{}),outsidetextfont:Z({},J,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:Z({},J,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:_({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:Z({},J,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(i,o,s){"use strict";var x=s(74875);o.name="pie",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},32354:function(i,o,s){"use strict";var x=s(92770),_=s(84267),F=s(7901),N={};function makePullColorFn(i){return function(o,s){return!!(o&&(o=_(o)).isValid())&&(o=F.addOpacity(o,o.getAlpha()),i[s]||(i[s]=o),o)}}function generateExtendedColors(i,o){var s,x=JSON.stringify(i),F=o[x];if(!F){for(s=0,F=i.slice();s<i.length;s++)F.push(_(i[s]).lighten(20).toHexString());for(s=0;s<i.length;s++)F.push(_(i[s]).darken(20).toHexString());o[x]=F}return F}i.exports={calc:function(i,o){var s=[],_=i._fullLayout,F=_.hiddenlabels||[],N=o.labels,j=o.marker.colors||[],G=o.values,Z=o._length,X=o._hasValues&&Z;if(o.dlabel)for(er=0,N=Array(Z);er<Z;er++)N[er]=String(o.label0+er*o.dlabel);var J={},$=makePullColorFn(_["_"+o.type+"colormap"]),ee=0,et=!1;for(er=0;er<Z;er++){if(X){if(!x(ei=G[er]))continue;ei=+ei}else ei=1;(void 0===(eo=N[er])||""===eo)&&(eo=er);var er,en,ei,eo,es,el=J[eo=String(eo)];void 0===el?(J[eo]=s.length,(es=-1!==F.indexOf(eo))||(ee+=ei),s.push({v:ei,label:eo,color:$(j[er],eo),i:er,pts:[er],hidden:es})):(et=!0,en=s[el],en.v+=ei,en.pts.push(er),en.hidden||(ee+=ei),!1===en.color&&j[er]&&(en.color=$(j[er],eo)))}return s=s.filter(function(i){return i.v>=0}),("funnelarea"===o.type?et:o.sort)&&s.sort(function(i,o){return o.v-i.v}),s[0]&&(s[0].vTotal=ee),s},crossTraceCalc:function(i,o){var s=(o||{}).type;s||(s="pie");var x=i._fullLayout,_=i.calcdata,F=x[s+"colorway"],j=x["_"+s+"colormap"];x["extend"+s+"colors"]&&(F=generateExtendedColors(F,N));for(var G=0,Z=0;Z<_.length;Z++){var X=_[Z];if(X[0].trace.type===s)for(var J=0;J<X.length;J++){var $=X[J];!1===$.color&&(j[$.label]?$.color=j[$.label]:(j[$.label]=$.color=F[G%F.length],G++))}}},makePullColorFn:makePullColorFn,generateExtendedColors:generateExtendedColors}},37434:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(34e3),N=s(27670).c,j=s(90769).handleText,G=s(71828).coercePattern;function handleLabelsAndValues(i,o){var s,F=Array.isArray(i),N=_.isArrayOrTypedArray(o),j=Math.min(F?i.length:1/0,N?o.length:1/0);if(isFinite(j)||(j=0),j&&N){for(var G=0;G<j;G++){var Z=o[G];if(x(Z)&&Z>0){s=!0;break}}s||(j=0)}return{hasLabels:F,hasValues:N,len:j}}function handleMarkerDefaults(i,o,s,x,_){x("marker.line.width")&&x("marker.line.color",_?void 0:s.paper_bgcolor);var F=x("marker.colors");G(x,"marker.pattern",F),i.marker&&!o.marker.pattern.fgcolor&&(o.marker.pattern.fgcolor=i.marker.colors),o.marker.pattern.bgcolor||(o.marker.pattern.bgcolor=s.paper_bgcolor)}i.exports={handleLabelsAndValues:handleLabelsAndValues,handleMarkerDefaults:handleMarkerDefaults,supplyDefaults:function(i,o,s,x){function coerce(s,x){return _.coerce(i,o,F,s,x)}var G,Z=handleLabelsAndValues(coerce("labels"),coerce("values")),X=Z.len;if(o._hasLabels=Z.hasLabels,o._hasValues=Z.hasValues,!o._hasLabels&&o._hasValues&&(coerce("label0"),coerce("dlabel")),!X){o.visible=!1;return}o._length=X,handleMarkerDefaults(i,o,x,coerce,!0),coerce("scalegroup");var J=coerce("text"),$=coerce("texttemplate");if($||(G=coerce("textinfo",Array.isArray(J)?"text+percent":"percent")),coerce("hovertext"),coerce("hovertemplate"),$||G&&"none"!==G){var ee=coerce("textposition");j(i,o,x,coerce,ee,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(ee)||"auto"===ee||"outside"===ee)&&coerce("automargin"),("inside"===ee||"auto"===ee||Array.isArray(ee))&&coerce("insidetextorientation")}N(o,x,coerce);var et=coerce("hole");if(coerce("title.text")){var er=coerce("title.position",et?"middle center":"top center");et||"middle center"!==er||(o.title.position="top center"),_.coerceFont(coerce,"title.font",x.font)}coerce("sort"),coerce("direction"),coerce("rotation"),coerce("pull")}}},20007:function(i,o,s){"use strict";var x=s(23469).appendArrayMultiPointValues;i.exports=function(i,o){var s={curveNumber:o.index,pointNumbers:i.pts,data:o._input,fullData:o,label:i.label,color:i.color,value:i.v,percent:i.percent,text:i.text,bbox:i.bbox,v:i.v};return 1===i.pts.length&&(s.pointNumber=s.i=i.pts[0]),x(s,o,i.pts),"funnelarea"===o.type&&(delete s.v,delete s.i),s}},22209:function(i,o,s){"use strict";var x=s(91424),_=s(7901);i.exports=function(i,o,s,F){var N=s.marker.pattern;N&&N.shape?x.pointStyle(i,s,F,o):_.fill(i,o.color)}},53581:function(i,o,s){"use strict";var x=s(71828);function format(i){return -1!==i.indexOf("e")?i.replace(/[.]?0+e/,"e"):-1!==i.indexOf(".")?i.replace(/[.]?0+$/,""):i}o.formatPiePercent=function(i,o){var s=format((100*i).toPrecision(3));return x.numSeparate(s,o)+"%"},o.formatPieValue=function(i,o){var s=format(i.toPrecision(10));return x.numSeparate(s,o)},o.getFirstFilled=function(i,o){if(Array.isArray(i))for(var s=0;s<o.length;s++){var x=i[o[s]];if(x||0===x||""===x)return x}},o.castOption=function(i,s){return Array.isArray(i)?o.getFirstFilled(i,s):i||void 0},o.getRotationAngle=function(i){return("auto"===i?0:i)*Math.PI/180}},58810:function(i,o,s){"use strict";i.exports={attributes:s(34e3),supplyDefaults:s(37434).supplyDefaults,supplyLayoutDefaults:s(92097),layoutAttributes:s(92774),calc:s(32354).calc,crossTraceCalc:s(32354).crossTraceCalc,plot:s(14575).plot,style:s(68357),styleOne:s(63463),moduleType:"trace",name:"pie",basePlotModule:s(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(i){"use strict";i.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(i,o,s){"use strict";var x=s(71828),_=s(92774);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("hiddenlabels"),coerce("piecolorway",o.colorway),coerce("extendpiecolors")}},14575:function(i,o,s){"use strict";var x=s(39898),_=s(74875),F=s(30211),N=s(7901),j=s(91424),G=s(71828),Z=G.strScale,X=G.strTranslate,J=s(63893),$=s(72597),ee=$.recordMinTextSize,et=$.clearMinTextSize,er=s(97313).TEXTPAD,en=s(53581),ei=s(20007),eo=s(71828).isValidTextValue;function attachFxHandlers(i,o,s){var _=s[0],N=_.cx,j=_.cy,Z=_.trace,X="funnelarea"===Z.type;"_hasHoverLabel"in Z||(Z._hasHoverLabel=!1),"_hasHoverEvent"in Z||(Z._hasHoverEvent=!1),i.on("mouseover",function(i){var s=o._fullLayout,J=o._fullData[Z.index];if(!o._dragging&&!1!==s.hovermode){var $=J.hoverinfo;if(Array.isArray($)&&($=F.castHoverinfo({hoverinfo:[en.castOption($,i.pts)],_module:Z._module},s,0)),"all"===$&&($="label+text+value+percent+name"),J.hovertemplate||"none"!==$&&"skip"!==$&&$){var ee=i.rInscribed||0,et=N+i.pxmid[0]*(1-ee),er=j+i.pxmid[1]*(1-ee),eo=s.separators,es=[];if($&&-1!==$.indexOf("label")&&es.push(i.label),i.text=en.castOption(J.hovertext||J.text,i.pts),$&&-1!==$.indexOf("text")){var el=i.text;G.isValidTextValue(el)&&es.push(el)}i.value=i.v,i.valueLabel=en.formatPieValue(i.v,eo),$&&-1!==$.indexOf("value")&&es.push(i.valueLabel),i.percent=i.v/_.vTotal,i.percentLabel=en.formatPiePercent(i.percent,eo),$&&-1!==$.indexOf("percent")&&es.push(i.percentLabel);var ec=J.hoverlabel,eu=ec.font;F.loneHover({trace:Z,x0:et-ee*_.r,x1:et+ee*_.r,y:er,_x0:X?N+i.TL[0]:et-ee*_.r,_x1:X?N+i.TR[0]:et+ee*_.r,_y0:X?j+i.TL[1]:er-ee*_.r,_y1:X?j+i.BL[1]:er+ee*_.r,text:es.join("<br>"),name:J.hovertemplate||-1!==$.indexOf("name")?J.name:void 0,idealAlign:i.pxmid[0]<0?"left":"right",color:en.castOption(ec.bgcolor,i.pts)||i.color,borderColor:en.castOption(ec.bordercolor,i.pts),fontFamily:en.castOption(eu.family,i.pts),fontSize:en.castOption(eu.size,i.pts),fontColor:en.castOption(eu.color,i.pts),nameLength:en.castOption(ec.namelength,i.pts),textAlign:en.castOption(ec.align,i.pts),hovertemplate:en.castOption(J.hovertemplate,i.pts),hovertemplateLabels:i,eventData:[ei(i,J)]},{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:o,inOut_bbox:[]}),i.bbox=[][0],Z._hasHoverLabel=!0}Z._hasHoverEvent=!0,o.emit("plotly_hover",{points:[ei(i,J)],event:x.event})}}),i.on("mouseout",function(i){var s=o._fullLayout,_=o._fullData[Z.index],N=x.select(this).datum();Z._hasHoverEvent&&(i.originalEvent=x.event,o.emit("plotly_unhover",{points:[ei(N,_)],event:x.event}),Z._hasHoverEvent=!1),Z._hasHoverLabel&&(F.loneUnhover(s._hoverlayer.node()),Z._hasHoverLabel=!1)}),i.on("click",function(i){var s=o._fullLayout,_=o._fullData[Z.index];o._dragging||!1===s.hovermode||(o._hoverdata=[ei(i,_)],F.click(o,x.event))})}function determineInsideTextFont(i,o,s){var x=en.castOption(i.insidetextfont.color,o.pts);!x&&i._input.textfont&&(x=en.castOption(i._input.textfont.color,o.pts));var _=en.castOption(i.insidetextfont.family,o.pts)||en.castOption(i.textfont.family,o.pts)||s.family,F=en.castOption(i.insidetextfont.size,o.pts)||en.castOption(i.textfont.size,o.pts)||s.size;return{color:x||N.contrast(o.color),family:_,size:F}}function prerenderTitles(i,o){for(var s,x,_=0;_<i.length;_++)if((x=(s=i[_][0]).trace).title.text){var F=x.title.text;x._meta&&(F=G.templateString(F,x._meta));var N=j.tester.append("text").attr("data-notex",1).text(F).call(j.font,x.title.font).call(J.convertToTspans,o),Z=j.bBox(N.node(),!0);s.titleBox={width:Z.width,height:Z.height},N.remove()}}function transformInsideText(i,o,s){var x=s.r||o.rpx1,_=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-_,scale:0,rotate:0,textPosAngle:0};var F=o.ring,N=1===F&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,j=o.halfangle,G=o.midangle,Z=s.trace.insidetextorientation,X="horizontal"===Z,J="tangential"===Z,$="radial"===Z,ee="auto"===Z,et=[];if(!ee){var er,en,considerCrossing=function(s,_){if(N=o.startangle,j=o.stopangle,N>s&&s>j||N<s&&s<j){var N,j,G=Math.abs(s-o.startangle),Z=Math.abs(s-o.stopangle),X=G<Z?G:Z;(er="tan"===_?calcTanTransform(i,x,F,X,0):calcRadTransform(i,x,F,X,Math.PI/2)).textPosAngle=s,et.push(er)}};if(X||J){for(en=4;en>=-4;en-=2)considerCrossing(Math.PI*en,"tan");for(en=4;en>=-4;en-=2)considerCrossing(Math.PI*(en+1),"tan")}if(X||$){for(en=4;en>=-4;en-=2)considerCrossing(Math.PI*(en+1.5),"rad");for(en=4;en>=-4;en-=2)considerCrossing(Math.PI*(en+.5),"rad")}}if(N||ee||X){if((er={scale:_*x*2/Math.sqrt(i.width*i.width+i.height*i.height),rCenter:1-_,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,er.scale>=1)return er;et.push(er)}(ee||$)&&((er=calcRadTransform(i,x,F,j,G)).textPosAngle=(o.startangle+o.stopangle)/2,et.push(er)),(ee||J)&&((er=calcTanTransform(i,x,F,j,G)).textPosAngle=(o.startangle+o.stopangle)/2,et.push(er));for(var ei=0,eo=0,es=0;es<et.length;es++){var el=et[es].scale;if(eo<el&&(eo=el,ei=es),!ee&&eo>=1)break}return et[ei]}function calcRadTransform(i,o,s,x,_){o=Math.max(0,o-2*er);var F=i.width/i.height,N=calcMaxHalfSize(F,x,o,s);return{scale:2*N/i.height,rCenter:calcRCenter(F,N/o),rotate:calcRotate(_)}}function calcTanTransform(i,o,s,x,_){o=Math.max(0,o-2*er);var F=i.height/i.width,N=calcMaxHalfSize(F,x,o,s);return{scale:2*N/i.width,rCenter:calcRCenter(F,N/o),rotate:calcRotate(_+Math.PI/2)}}function calcRCenter(i,o){return Math.cos(o)-i*o}function calcRotate(i){return(180/Math.PI*i+720)%180-90}function calcMaxHalfSize(i,o,s,x){var _=i+1/(2*Math.tan(o));return s*Math.min(1/(Math.sqrt(_*_+.5)+_),x/(Math.sqrt(i*i+x/2)+i))}function transformOutsideText(i,o){var s=o.pxmid[0],x=o.pxmid[1],_=i.width/2,F=i.height/2;return s<0&&(_*=-1),x<0&&(F*=-1),{scale:1,rCenter:1,rotate:0,x:_+Math.abs(F)*(_>0?1:-1)/2,y:F/(1+s*s/(x*x)),outside:!0}}function positionTitleOutside(i,o){var s,x,_=1,F=1,N=i.trace,j={x:i.cx,y:i.cy},G={tx:0,ty:0};G.ty+=N.title.font.size,x=getMaxPull(N),-1!==N.title.position.indexOf("top")?(j.y-=(1+x)*i.r,G.ty-=i.titleBox.height):-1!==N.title.position.indexOf("bottom")&&(j.y+=(1+x)*i.r);var Z=i.r/(void 0===(s=i.trace.aspectratio)?1:s),X=o.w*(N.domain.x[1]-N.domain.x[0])/2;return -1!==N.title.position.indexOf("left")?(X+=Z,j.x-=(1+x)*Z,G.tx+=i.titleBox.width/2):-1!==N.title.position.indexOf("center")?X*=2:-1!==N.title.position.indexOf("right")&&(X+=Z,j.x+=(1+x)*Z,G.tx-=i.titleBox.width/2),_=X/i.titleBox.width,F=getTitleSpace(i,o)/i.titleBox.height,{x:j.x,y:j.y,scale:Math.min(_,F),tx:G.tx,ty:G.ty}}function getTitleSpace(i,o){var s=i.trace,x=o.h*(s.domain.y[1]-s.domain.y[0]);return Math.min(i.titleBox.height,x/2)}function getMaxPull(i){var o,s=i.pull;if(!s)return 0;if(Array.isArray(s))for(o=0,s=0;o<i.pull.length;o++)i.pull[o]>s&&(s=i.pull[o]);return s}function layoutAreas(i,o){for(var s=[],x=0;x<i.length;x++){var _=i[x][0],F=_.trace,N=F.domain,j=o.w*(N.x[1]-N.x[0]),G=o.h*(N.y[1]-N.y[0]);F.title.text&&"middle center"!==F.title.position&&(G-=getTitleSpace(_,o));var Z=j/2,X=G/2;"funnelarea"!==F.type||F.scalegroup||(X/=F.aspectratio),_.r=Math.min(Z,X)/(1+getMaxPull(F)),_.cx=o.l+o.w*(F.domain.x[1]+F.domain.x[0])/2,_.cy=o.t+o.h*(1-F.domain.y[0])-G/2,F.title.text&&-1!==F.title.position.indexOf("bottom")&&(_.cy-=getTitleSpace(_,o)),F.scalegroup&&-1===s.indexOf(F.scalegroup)&&s.push(F.scalegroup)}(function(i,o){for(var s,x,_,F=0;F<o.length;F++){var N,j,G,Z=1/0,X=o[F];for(x=0;x<i.length;x++)(_=(s=i[x][0]).trace).scalegroup===X&&("pie"===_.type?N=s.r*s.r:"funnelarea"===_.type&&(_.aspectratio>1?G=(j=s.r)/_.aspectratio:j=(G=s.r)*_.aspectratio,j*=(1+_.baseratio)/2,N=j*G),Z=Math.min(Z,N/s.vTotal));for(x=0;x<i.length;x++)if((_=(s=i[x][0]).trace).scalegroup===X){var J=Z*s.vTotal;"funnelarea"===_.type&&(J/=(1+_.baseratio)/2,J/=_.aspectratio),s.r=Math.sqrt(J)}}})(i,s)}function getCoords(i,o){return[i*Math.sin(o),-i*Math.cos(o)]}function formatSliceLabel(i,o,s){var x=i._fullLayout,_=s.trace,F=_.texttemplate,N=_.textinfo;if(!F&&N&&"none"!==N){var j,Z=N.split("+"),hasFlag=function(i){return -1!==Z.indexOf(i)},X=hasFlag("label"),J=hasFlag("text"),$=hasFlag("value"),ee=hasFlag("percent"),et=x.separators;if(j=X?[o.label]:[],J){var er=en.getFirstFilled(_.text,o.pts);eo(er)&&j.push(er)}$&&j.push(en.formatPieValue(o.v,et)),ee&&j.push(en.formatPiePercent(o.v/s.vTotal,et)),o.text=j.join("<br>")}if(F){var ei=G.castOption(_,o.i,"texttemplate");if(ei){var es={label:o.label,value:o.v,valueLabel:en.formatPieValue(o.v,x.separators),percent:o.v/s.vTotal,percentLabel:en.formatPiePercent(o.v/s.vTotal,x.separators),color:o.color,text:o.text,customdata:G.castOption(_,o.i,"customdata")},el=en.getFirstFilled(_.text,o.pts);(eo(el)||""===el)&&(es.text=el),o.text=G.texttemplateString(ei,es,i._fullLayout._d3locale,es,_._meta||{})}else o.text=""}}function computeTransform(i,o){var s=i.rotate*Math.PI/180,x=Math.cos(s),_=Math.sin(s),F=(o.left+o.right)/2,N=(o.top+o.bottom)/2;i.textX=F*x-N*_,i.textY=F*_+N*x,i.noCenter=!0}i.exports={plot:function(i,o){var s=i._context.staticPlot,F=i._fullLayout,$=F._size;et("pie",F),prerenderTitles(o,i),layoutAreas(o,$);var er=G.makeTraceGroups(F._pielayer,o,"trace").each(function(o){var et=x.select(this),er=o[0],ei=er.trace;(function(i){var o,s,x,_=i[0],F=_.r,N=_.trace,j=en.getRotationAngle(N.rotation),G=2*Math.PI/_.vTotal,Z="px0",X="px1";if("counterclockwise"===N.direction){for(o=0;o<i.length&&i[o].hidden;o++);if(o===i.length)return;j+=G*i[o].v,G*=-1,Z="px1",X="px0"}for(o=0,x=getCoords(F,j);o<i.length;o++)(s=i[o]).hidden||(s[Z]=x,s.startangle=j,j+=G*s.v/2,s.pxmid=getCoords(F,j),s.midangle=j,j+=G*s.v/2,x=getCoords(F,j),s.stopangle=j,s[X]=x,s.largeArc=s.v>_.vTotal/2?1:0,s.halfangle=Math.PI*Math.min(s.v/_.vTotal,.5),s.ring=1-N.hole,s.rInscribed=s.v!==_.vTotal||_.trace.hole?Math.min(1/(1+1/Math.sin(s.halfangle)),s.ring/2):1)})(o),et.attr("stroke-linejoin","round"),et.each(function(){var eo=x.select(this).selectAll("g.slice").data(o);eo.enter().append("g").classed("slice",!0),eo.exit().remove();var es=[[[],[]],[[],[]]],el=!1;eo.each(function(_,N){if(_.hidden){x.select(this).selectAll("path,g").remove();return}_.pointNumber=_.i,_.curveNumber=ei.index,es[_.pxmid[1]<0?0:1][_.pxmid[0]<0?0:1].push(_);var Z=er.cx,X=er.cy,$=x.select(this),et=$.selectAll("path.surface").data([_]);if(et.enter().append("path").classed("surface",!0).style({"pointer-events":s?"none":"all"}),$.call(attachFxHandlers,i,o),ei.pull){var eo=+en.castOption(ei.pull,_.pts)||0;eo>0&&(Z+=eo*_.pxmid[0],X+=eo*_.pxmid[1])}function arc(i,o,s,x){var F=x*(o[0]-i[0]),N=x*(o[1]-i[1]);return"a"+x*er.r+","+x*er.r+" 0 "+_.largeArc+(s?" 1 ":" 0 ")+F+","+N}_.cxFinal=Z,_.cyFinal=X;var ec=ei.hole;if(_.v===er.vTotal){var eu="M"+(Z+_.px0[0])+","+(X+_.px0[1])+arc(_.px0,_.pxmid,!0,1)+arc(_.pxmid,_.px0,!0,1)+"Z";ec?et.attr("d","M"+(Z+ec*_.px0[0])+","+(X+ec*_.px0[1])+arc(_.px0,_.pxmid,!1,ec)+arc(_.pxmid,_.px0,!1,ec)+"Z"+eu):et.attr("d",eu)}else{var ef=arc(_.px0,_.px1,!0,1);if(ec){var eh=1-ec;et.attr("d","M"+(Z+ec*_.px1[0])+","+(X+ec*_.px1[1])+arc(_.px1,_.px0,!1,ec)+"l"+eh*_.px0[0]+","+eh*_.px0[1]+ef+"Z")}else et.attr("d","M"+Z+","+X+"l"+_.px0[0]+","+_.px0[1]+ef+"Z")}formatSliceLabel(i,_,er);var ed=en.castOption(ei.textposition,_.pts),ep=$.selectAll("g.slicetext").data(_.text&&"none"!==ed?[0]:[]);ep.enter().append("g").classed("slicetext",!0),ep.exit().remove(),ep.each(function(){var s,$,et=G.ensureSingle(x.select(this),"text","",function(i){i.attr("data-notex",1)}),eo=G.ensureUniformFontSize(i,"outside"===ed?(s=F.font,{color:en.castOption(ei.outsidetextfont.color,_.pts)||en.castOption(ei.textfont.color,_.pts)||s.color,family:en.castOption(ei.outsidetextfont.family,_.pts)||en.castOption(ei.textfont.family,_.pts)||s.family,size:en.castOption(ei.outsidetextfont.size,_.pts)||en.castOption(ei.textfont.size,_.pts)||s.size}):determineInsideTextFont(ei,_,F.font));et.text(_.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(j.font,eo).call(J.convertToTspans,i);var es=j.bBox(et.node());if("outside"===ed)$=transformOutsideText(es,_);else if($=transformInsideText(es,_,er),"auto"===ed&&$.scale<1){var ec=G.ensureUniformFontSize(i,ei.outsidetextfont);et.call(j.font,ec),$=transformOutsideText(es=j.bBox(et.node()),_)}var eu=$.textPosAngle,ef=void 0===eu?_.pxmid:getCoords(er.r,eu);if($.targetX=Z+ef[0]*$.rCenter+($.x||0),$.targetY=X+ef[1]*$.rCenter+($.y||0),computeTransform($,es),$.outside){var eh=$.targetY;_.yLabelMin=eh-es.height/2,_.yLabelMid=eh,_.yLabelMax=eh+es.height/2,_.labelExtraX=0,_.labelExtraY=0,el=!0}$.fontSize=eo.size,ee(ei.type,$,F),o[N].transform=$,G.setTransormAndDisplay(et,$)})});var ec=x.select(this).selectAll("g.titletext").data(ei.title.text?[0]:[]);if(ec.enter().append("g").classed("titletext",!0),ec.exit().remove(),ec.each(function(){var o,s,_=G.ensureSingle(x.select(this),"text","",function(i){i.attr("data-notex",1)}),F=ei.title.text;ei._meta&&(F=G.templateString(F,ei._meta)),_.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(j.font,ei.title.font).call(J.convertToTspans,i),s="middle center"===ei.title.position?(o=Math.sqrt(er.titleBox.width*er.titleBox.width+er.titleBox.height*er.titleBox.height),{x:er.cx,y:er.cy,scale:er.trace.hole*er.r*2/o,tx:0,ty:-er.titleBox.height/2+er.trace.title.font.size}):positionTitleOutside(er,$),_.attr("transform",X(s.x,s.y)+Z(Math.min(1,s.scale))+X(s.tx,s.ty))}),el&&function(i,o){var s,x,_,F,N,j,G,Z,X,J,$,ee,et;function topFirst(i,o){return i.pxmid[1]-o.pxmid[1]}function bottomFirst(i,o){return o.pxmid[1]-i.pxmid[1]}for(x=0;x<2;x++)for(s=0,_=x?topFirst:bottomFirst,N=x?Math.max:Math.min,G=x?1:-1;s<2;s++){for(F=s?Math.max:Math.min,j=s?1:-1,(Z=i[x][s]).sort(_),J=(X=i[1-x][s]).concat(Z),ee=[],$=0;$<Z.length;$++)void 0!==Z[$].yLabelMid&&ee.push(Z[$]);for($=0,et=!1;x&&$<X.length;$++)if(void 0!==X[$].yLabelMid){et=X[$];break}for($=0;$<ee.length;$++){var er=$&&ee[$-1];et&&!$&&(er=et),function(i,s){s||(s={});var _,Z,X,$,ee=s.labelExtraY+(x?s.yLabelMax:s.yLabelMin),et=x?i.yLabelMin:i.yLabelMax,er=x?i.yLabelMax:i.yLabelMin,ei=i.cyFinal+N(i.px0[1],i.px1[1]),eo=ee-et;if(eo*G>0&&(i.labelExtraY=eo),Array.isArray(o.pull))for(Z=0;Z<J.length;Z++)!((X=J[Z])===i||(en.castOption(o.pull,i.pts)||0)>=(en.castOption(o.pull,X.pts)||0))&&((i.pxmid[1]-X.pxmid[1])*G>0?(eo=X.cyFinal+N(X.px0[1],X.px1[1])-et-i.labelExtraY)*G>0&&(i.labelExtraY+=eo):(er+i.labelExtraY-ei)*G>0&&(_=3*j*Math.abs(Z-J.indexOf(i)),($=X.cxFinal+F(X.px0[0],X.px1[0])+_-(i.cxFinal+i.pxmid[0])-i.labelExtraX)*j>0&&(i.labelExtraX+=$)))}(ee[$],er)}}}(es,ei),function(i,o){i.each(function(i){var s=x.select(this);if(!i.labelExtraX&&!i.labelExtraY){s.select("path.textline").remove();return}var _=s.select("g.slicetext text");i.transform.targetX+=i.labelExtraX,i.transform.targetY+=i.labelExtraY,G.setTransormAndDisplay(_,i.transform);var F=i.cxFinal+i.pxmid[0],j="M"+F+","+(i.cyFinal+i.pxmid[1]),Z=(i.yLabelMax-i.yLabelMin)*(i.pxmid[0]<0?-1:1)/4;if(i.labelExtraX){var X=i.labelExtraX*i.pxmid[1]/i.pxmid[0],J=i.yLabelMid+i.labelExtraY-(i.cyFinal+i.pxmid[1]);Math.abs(X)>Math.abs(J)?j+="l"+J*i.pxmid[0]/i.pxmid[1]+","+J+"H"+(F+i.labelExtraX+Z):j+="l"+i.labelExtraX+","+X+"v"+(J-X)+"h"+Z}else j+="V"+(i.yLabelMid+i.labelExtraY)+"h"+Z;G.ensureSingle(s,"path","textline").call(N.stroke,o.outsidetextfont.color).attr({"stroke-width":Math.min(2,o.outsidetextfont.size/8),d:j,fill:"none"})})}(eo,ei),el&&ei.automargin){var eu=j.bBox(et.node()),ef=ei.domain,eh=$.w*(ef.x[1]-ef.x[0]),ed=$.h*(ef.y[1]-ef.y[0]),ep=(.5*eh-er.r)/$.w,eg=(.5*ed-er.r)/$.h;_.autoMargin(i,"pie."+ei.uid+".automargin",{xl:ef.x[0]-ep,xr:ef.x[1]+ep,yb:ef.y[0]-eg,yt:ef.y[1]+eg,l:Math.max(er.cx-er.r-eu.left,0),r:Math.max(eu.right-(er.cx+er.r),0),b:Math.max(eu.bottom-(er.cy+er.r),0),t:Math.max(er.cy-er.r-eu.top,0),pad:5})}})});setTimeout(function(){er.selectAll("tspan").each(function(){var i=x.select(this);i.attr("dy")&&i.attr("dy",i.attr("dy"))})},0)},formatSliceLabel:formatSliceLabel,transformInsideText:transformInsideText,determineInsideTextFont:determineInsideTextFont,positionTitleOutside:positionTitleOutside,prerenderTitles:prerenderTitles,layoutAreas:layoutAreas,attachFxHandlers:attachFxHandlers,computeTransform:computeTransform}},68357:function(i,o,s){"use strict";var x=s(39898),_=s(63463),F=s(72597).resizeText;i.exports=function(i){var o=i._fullLayout._pielayer.selectAll(".trace");F(i,o,"pie"),o.each(function(o){var s=o[0].trace,F=x.select(this);F.style({opacity:s.opacity}),F.selectAll("path.surface").each(function(o){x.select(this).call(_,o,s,i)})})}},63463:function(i,o,s){"use strict";var x=s(7901),_=s(53581).castOption,F=s(22209);i.exports=function(i,o,s,N){var j=s.marker.line,G=_(j.color,o.pts)||x.defaultLine,Z=_(j.width,o.pts)||0;i.call(F,o,s,N).style("stroke-width",Z).call(x.stroke,G)}},10959:function(i,o,s){"use strict";var x=s(82196);i.exports={x:x.x,y:x.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:x.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(i,o,s){"use strict";var x=s(9330).gl_pointcloud2d,_=s(78614),F=s(71739).findExtremes,N=s(34603);function Pointcloud(i,o){this.scene=i,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=x(i.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var j=Pointcloud.prototype;j.handlePick=function(i){var o=this.idToIndex[i.pointId];return{trace:this,dataCoord:i.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:Array.isArray(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},j.update=function(i){this.index=i.index,this.textLabels=i.text,this.name=i.name,this.hoverinfo=i.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(i),this.color=N(i,{})},j.updateFast=function(i){var o,s,x,N,j,G,Z=this.xData=this.pickXData=i.x,X=this.yData=this.pickYData=i.y,J=this.pickXYData=i.xy,$=i.xbounds&&i.ybounds,ee=i.indices,et=this.bounds;if(J){if(x=J,o=J.length>>>1,$)et[0]=i.xbounds[0],et[2]=i.xbounds[1],et[1]=i.ybounds[0],et[3]=i.ybounds[1];else for(G=0;G<o;G++)N=x[2*G],j=x[2*G+1],N<et[0]&&(et[0]=N),N>et[2]&&(et[2]=N),j<et[1]&&(et[1]=j),j>et[3]&&(et[3]=j);if(ee)s=ee;else for(G=0,s=new Int32Array(o);G<o;G++)s[G]=G}else for(G=0,o=Z.length,x=new Float32Array(2*o),s=new Int32Array(o);G<o;G++)N=Z[G],j=X[G],s[G]=G,x[2*G]=N,x[2*G+1]=j,N<et[0]&&(et[0]=N),N>et[2]&&(et[2]=N),j<et[1]&&(et[1]=j),j>et[3]&&(et[3]=j);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=x;var er=_(i.marker.color),en=_(i.marker.border.color),ei=i.opacity*i.marker.opacity;er[3]*=ei,this.pointcloudOptions.color=er;var eo=i.marker.blend;null===eo&&(eo=Z.length<100||X.length<100),this.pointcloudOptions.blend=eo,en[3]*=ei,this.pointcloudOptions.borderColor=en;var es=i.marker.sizemin,el=Math.max(i.marker.sizemax,i.marker.sizemin);this.pointcloudOptions.sizeMin=es,this.pointcloudOptions.sizeMax=el,this.pointcloudOptions.areaRatio=i.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var ec=this.scene.xaxis,eu=this.scene.yaxis,ef=el/2||.5;i._extremes[ec._id]=F(ec,[et[0],et[2]],{ppad:ef}),i._extremes[eu._id]=F(eu,[et[1],et[3]],{ppad:ef})},j.dispose=function(){this.pointcloud.dispose()},i.exports=function(i,o){var s=new Pointcloud(i,o.uid);return s.update(o),s}},33876:function(i,o,s){"use strict";var x=s(71828),_=s(10959);i.exports=function(i,o,s){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("x"),coerce("y"),coerce("xbounds"),coerce("ybounds"),i.xy&&i.xy instanceof Float32Array&&(o.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(o.indices=i.indices),coerce("text"),coerce("marker.color",s),coerce("marker.opacity"),coerce("marker.blend"),coerce("marker.sizemin"),coerce("marker.sizemax"),coerce("marker.border.color",s),coerce("marker.border.arearatio"),o._length=null}},20593:function(i,o,s){"use strict";i.exports={attributes:s(10959),supplyDefaults:s(33876),calc:s(36563),plot:s(42743),moduleType:"trace",name:"pointcloud",basePlotModule:s(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(i,o,s){"use strict";var x=s(41940),_=s(9012),F=s(22399),N=s(77914),j=s(27670).Y,G=s(5386).fF,Z=s(50693),X=s(44467).templatedArray,J=s(12663).descriptionOnlyNumbers,$=s(1426).extendFlat,ee=s(30962).overrideAll;(i.exports=ee({hoverinfo:$({},_.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:N.hoverlabel,domain:j({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:J("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:x({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:F.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:N.hoverlabel,hovertemplate:G({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:F.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:N.hoverlabel,hovertemplate:G({},{keys:["value","label"]}),colorscales:X("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:$(Z().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(i,o,s){"use strict";var x=s(30962).overrideAll,_=s(27659).a0,F=s(60436),N=s(528),j=s(6964),G=s(28569),Z=s(47322).prepSelect,X=s(71828),J=s(73972),$="sankey";o.name=$,o.baseLayoutAttrOverrides=x({hoverlabel:N.hoverlabel},"plot","nested"),o.plot=function(i){var s=_(i.calcdata,$)[0];F(i,s),o.updateFx(i)},o.clean=function(i,o,s,x){var _=x._has&&x._has($),F=o._has&&o._has($);_&&!F&&(x._paperdiv.selectAll(".sankey").remove(),x._paperdiv.selectAll(".bgsankey").remove())},o.updateFx=function(i){for(var o=0;o<i._fullData.length;o++)(function(i,o){var s=i._fullData[o],x=i._fullLayout,_=x.dragmode,F="pan"===x.dragmode?"move":"crosshair",N=s._bgRect;if(N&&"pan"!==_&&"zoom"!==_){j(N,F);var $={_id:"x",c2p:X.identity,_offset:s._sankey.translateX,_length:s._sankey.width},ee={_id:"y",c2p:X.identity,_offset:s._sankey.translateY,_length:s._sankey.height},et={gd:i,element:N.node(),plotinfo:{id:o,xaxis:$,yaxis:ee,fillRangeItems:X.noop},subplot:o,xaxes:[$],yaxes:[ee],doneFnCompleted:function(s){for(var x,_=i._fullData[o],F=_.node.groups.slice(),N=[],j=0;j<s.length;j++){var G=function(i){for(var o=_._sankey.graph.nodes,s=0;s<o.length;s++)if(o[s].pointNumber===i)return o[s]}(s[j].pointNumber);if(G){if(G.group){for(var Z=0;Z<G.childrenNodes.length;Z++)N.push(G.childrenNodes[Z].pointNumber);F[G.pointNumber-_.node._count]=!1}else N.push(G.pointNumber)}}x=F.filter(Boolean).concat([N]),J.call("_guiRestyle",i,{"node.groups":[x]},o)}};et.prepFn=function(i,o,s){Z(i,o,s,et,_)},G.init(et)}})(i,o)}},92930:function(i,o,s){"use strict";var x=s(68664),_=s(71828),F=s(28984).wrap,N=_.isArrayOrTypedArray,j=_.isIndex,G=s(21081);i.exports=function(i,o){var s=function(i){var o,s,F=i.node,Z=i.link,X=[],J=N(Z.color),$=N(Z.customdata),ee={},et={},er=Z.colorscales.length;for(o=0;o<er;o++){var en=Z.colorscales[o],ei=G.extractScale(en,{cLetter:"c"}),eo=G.makeColorScaleFunc(ei);et[en.label]=eo}var es=0;for(o=0;o<Z.value.length;o++)Z.source[o]>es&&(es=Z.source[o]),Z.target[o]>es&&(es=Z.target[o]);var el=es+1;i.node._count=el;var ec=i.node.groups,eu={};for(o=0;o<ec.length;o++){var ef=ec[o];for(s=0;s<ef.length;s++){var eh=ef[s],ed=el+o;eu.hasOwnProperty(eh)?_.warn("Node "+eh+" is already part of a group."):eu[eh]=ed}}var ep={source:[],target:[]};for(o=0;o<Z.value.length;o++){var eg=Z.value[o],em=Z.source[o],ey=Z.target[o];if(!(!(eg>0&&j(em,el)&&j(ey,el))||eu.hasOwnProperty(em)&&eu.hasOwnProperty(ey)&&eu[em]===eu[ey])){eu.hasOwnProperty(ey)&&(ey=eu[ey]),eu.hasOwnProperty(em)&&(em=eu[em]),ey=+ey,ee[em=+em]=ee[ey]=!0;var ev="";Z.label&&Z.label[o]&&(ev=Z.label[o]);var ex=null;ev&&et.hasOwnProperty(ev)&&(ex=et[ev]),X.push({pointNumber:o,label:ev,color:J?Z.color[o]:Z.color,customdata:$?Z.customdata[o]:Z.customdata,concentrationscale:ex,source:em,target:ey,value:+eg}),ep.source.push(em),ep.target.push(ey)}}var e_=el+ec.length,ew=N(F.color),eT=N(F.customdata),ek=[];for(o=0;o<e_;o++)if(ee[o]){var eA=F.label[o];ek.push({group:o>el-1,childrenNodes:[],pointNumber:o,label:eA,color:ew?F.color[o]:F.color,customdata:eT?F.customdata[o]:F.customdata})}var eS=!1;return function(i,o,s){for(var F=_.init2dArray(i,0),N=0;N<Math.min(o.length,s.length);N++)if(_.isIndex(o[N],i)&&_.isIndex(s[N],i)){if(o[N]===s[N])return!0;F[o[N]].push(s[N])}return x(F).components.some(function(i){return i.length>1})}(e_,ep.source,ep.target)&&(eS=!0),{circular:eS,links:X,nodes:ek,groups:ec,groupLookup:eu}}(o);return F({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},85247:function(i){"use strict";i.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(i,o,s){"use strict";var x=s(71828),_=s(39953),F=s(7901),N=s(84267),j=s(27670).c,G=s(38048),Z=s(44467),X=s(85501);function concentrationscalesDefaults(i,o){function coerce(s,F){return x.coerce(i,o,_.link.colorscales,s,F)}coerce("label"),coerce("cmin"),coerce("cmax"),coerce("colorscale")}i.exports=function(i,o,s,J){function coerce(s,F){return x.coerce(i,o,_,s,F)}var $,ee=x.extendDeep(J.hoverlabel,i.hoverlabel),et=i.node,er=Z.newContainer(o,"node");function coerceNode(i,o){return x.coerce(et,er,_.node,i,o)}coerceNode("label"),coerceNode("groups"),coerceNode("x"),coerceNode("y"),coerceNode("pad"),coerceNode("thickness"),coerceNode("line.color"),coerceNode("line.width"),coerceNode("hoverinfo",i.hoverinfo),G(et,er,coerceNode,ee),coerceNode("hovertemplate");var en=J.colorway;coerceNode("color",er.label.map(function(i,o){return F.addOpacity(en[o%en.length],.8)})),coerceNode("customdata");var ei=i.link||{},eo=Z.newContainer(o,"link");function coerceLink(i,o){return x.coerce(ei,eo,_.link,i,o)}coerceLink("label"),coerceLink("arrowlen"),coerceLink("source"),coerceLink("target"),coerceLink("value"),coerceLink("line.color"),coerceLink("line.width"),coerceLink("hoverinfo",i.hoverinfo),G(ei,eo,coerceLink,ee),coerceLink("hovertemplate");var es=.333>N(J.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";coerceLink("color",x.repeat(es,eo.value.length)),coerceLink("customdata"),X(ei,eo,{name:"colorscales",handleItemDefaults:concentrationscalesDefaults}),j(o,J,coerce),coerce("orientation"),coerce("valueformat"),coerce("valuesuffix"),er.x.length&&er.y.length&&($="freeform"),coerce("arrangement",$),x.coerceFont(coerce,"textfont",x.extendFlat({},J.font)),o._length=null}},29396:function(i,o,s){"use strict";i.exports={attributes:s(39953),supplyDefaults:s(26857),calc:s(92930),plot:s(60436),moduleType:"trace",name:"sankey",basePlotModule:s(75536),selectPoints:s(84564),categories:["noOpacity"],meta:{}}},60436:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=_.numberFormat,N=s(3393),j=s(30211),G=s(7901),Z=s(85247).cn,X=_._;function renderableValuePresent(i){return""!==i}function ownTrace(i,o){return i.filter(function(i){return i.key===o.traceId})}function makeTranslucent(i,o){x.select(i).select("path").style("fill-opacity",o),x.select(i).select("rect").style("fill-opacity",o)}function makeTextContrasty(i){x.select(i).select("text.name").style("fill","black")}function relatedLinks(i){return function(o){return -1!==i.node.sourceLinks.indexOf(o.link)||-1!==i.node.targetLinks.indexOf(o.link)}}function relatedNodes(i){return function(o){return -1!==o.node.sourceLinks.indexOf(i.link)||-1!==o.node.targetLinks.indexOf(i.link)}}function nodeHoveredStyle(i,o,s){o&&s&&ownTrace(s,o).selectAll("."+Z.sankeyLink).filter(relatedLinks(o)).call(linkHoveredStyle.bind(0,o,s,!1))}function nodeNonHoveredStyle(i,o,s){o&&s&&ownTrace(s,o).selectAll("."+Z.sankeyLink).filter(relatedLinks(o)).call(linkNonHoveredStyle.bind(0,o,s,!1))}function linkHoveredStyle(i,o,s,x){var _=x.datum().link.label;x.style("fill-opacity",function(i){if(!i.link.concentrationscale)return .4}),_&&ownTrace(o,i).selectAll("."+Z.sankeyLink).filter(function(i){return i.link.label===_}).style("fill-opacity",function(i){if(!i.link.concentrationscale)return .4}),s&&ownTrace(o,i).selectAll("."+Z.sankeyNode).filter(relatedNodes(i)).call(nodeHoveredStyle)}function linkNonHoveredStyle(i,o,s,x){var _=x.datum().link.label;x.style("fill-opacity",function(i){return i.tinyColorAlpha}),_&&ownTrace(o,i).selectAll("."+Z.sankeyLink).filter(function(i){return i.link.label===_}).style("fill-opacity",function(i){return i.tinyColorAlpha}),s&&ownTrace(o,i).selectAll(Z.sankeyNode).filter(relatedNodes(i)).call(nodeNonHoveredStyle)}function castHoverOption(i,o){var s=i.hoverlabel||{},x=_.nestedProperty(s,o).get();return!Array.isArray(x)&&x}i.exports=function(i,o){for(var s=i._fullLayout,_=s._paper,J=s._size,$=0;$<i._fullData.length;$++)if(i._fullData[$].visible&&i._fullData[$].type===Z.sankey&&!i._fullData[$]._viewInitial){var ee=i._fullData[$].node;i._fullData[$]._viewInitial={node:{groups:ee.groups.slice(),x:ee.x.slice(),y:ee.y.slice()}}}var et=X(i,"source:")+" ",er=X(i,"target:")+" ",en=X(i,"concentration:")+" ",ei=X(i,"incoming flow count:")+" ",eo=X(i,"outgoing flow count:")+" ";N(i,_,o,{width:J.w,height:J.h,margin:{t:J.t,r:J.r,b:J.b,l:J.l}},{linkEvents:{hover:function(o,s,_){!1!==i._fullLayout.hovermode&&(x.select(o).call(linkHoveredStyle.bind(0,s,_,!0)),"skip"!==s.link.trace.link.hoverinfo&&(s.link.fullData=s.link.trace,i.emit("plotly_hover",{event:x.event,points:[s.link]})))},follow:function(o,_){if(!1!==i._fullLayout.hovermode){var N=_.link.trace.link;if("none"!==N.hoverinfo&&"skip"!==N.hoverinfo){for(var Z=[],X=0,J=0;J<_.flow.links.length;J++){var $=_.flow.links[J];if("closest"!==i._fullLayout.hovermode||_.link.pointNumber===$.pointNumber){_.link.pointNumber===$.pointNumber&&(X=J),$.fullData=$.trace,N=_.link.trace.link;var ee=function(i){i.circular?(o=(i.circularPathData.leftInnerExtent+i.circularPathData.rightInnerExtent)/2,s=i.circularPathData.verticalFullExtent):(o=(i.source.x1+i.target.x0)/2,s=(i.y0+i.y1)/2);var o,s,x=[o,s];return"v"===i.trace.orientation&&x.reverse(),x[0]+=_.parent.translateX,x[1]+=_.parent.translateY,x}($),ei={valueLabel:F(_.valueFormat)($.value)+_.valueSuffix};Z.push({x:ee[0],y:ee[1],name:ei.valueLabel,text:[$.label||"",et+$.source.label,er+$.target.label,$.concentrationscale?en+F("%0.2f")($.flow.labelConcentration):""].filter(renderableValuePresent).join("<br>"),color:castHoverOption(N,"bgcolor")||G.addOpacity($.color,1),borderColor:castHoverOption(N,"bordercolor"),fontFamily:castHoverOption(N,"font.family"),fontSize:castHoverOption(N,"font.size"),fontColor:castHoverOption(N,"font.color"),nameLength:castHoverOption(N,"namelength"),textAlign:castHoverOption(N,"align"),idealAlign:x.event.x<ee[0]?"right":"left",hovertemplate:N.hovertemplate,hovertemplateLabels:ei,eventData:[$]})}}j.loneHover(Z,{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i,anchorIndex:X}).each(function(){_.link.concentrationscale||makeTranslucent(this,.65),makeTextContrasty(this)})}}},unhover:function(o,_,F){!1!==i._fullLayout.hovermode&&(x.select(o).call(linkNonHoveredStyle.bind(0,_,F,!0)),"skip"!==_.link.trace.link.hoverinfo&&(_.link.fullData=_.link.trace,i.emit("plotly_unhover",{event:x.event,points:[_.link]})),j.loneUnhover(s._hoverlayer.node()))},select:function(o,s){var _=s.link;_.originalEvent=x.event,i._hoverdata=[_],j.click(i,{target:!0})}},nodeEvents:{hover:function(o,s,_){!1!==i._fullLayout.hovermode&&(x.select(o).call(nodeHoveredStyle,s,_),"skip"!==s.node.trace.node.hoverinfo&&(s.node.fullData=s.node.trace,i.emit("plotly_hover",{event:x.event,points:[s.node]})))},follow:function(o,_){if(!1!==i._fullLayout.hovermode){var N=_.node.trace.node;if("none"!==N.hoverinfo&&"skip"!==N.hoverinfo){var G=x.select(o).select("."+Z.nodeRect),X=i._fullLayout._paperdiv.node().getBoundingClientRect(),J=G.node().getBoundingClientRect(),$=J.left-2-X.left,ee=J.right+2-X.left,et=J.top+J.height/4-X.top,er={valueLabel:F(_.valueFormat)(_.node.value)+_.valueSuffix};_.node.fullData=_.node.trace,i._fullLayout._calcInverseTransform(i);var en=i._fullLayout._invScaleX,es=i._fullLayout._invScaleY,el=j.loneHover({x0:en*$,x1:en*ee,y:es*et,name:F(_.valueFormat)(_.node.value)+_.valueSuffix,text:[_.node.label,ei+_.node.targetLinks.length,eo+_.node.sourceLinks.length].filter(renderableValuePresent).join("<br>"),color:castHoverOption(N,"bgcolor")||_.tinyColorHue,borderColor:castHoverOption(N,"bordercolor"),fontFamily:castHoverOption(N,"font.family"),fontSize:castHoverOption(N,"font.size"),fontColor:castHoverOption(N,"font.color"),nameLength:castHoverOption(N,"namelength"),textAlign:castHoverOption(N,"align"),idealAlign:"left",hovertemplate:N.hovertemplate,hovertemplateLabels:er,eventData:[_.node]},{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i});makeTranslucent(el,.85),makeTextContrasty(el)}}},unhover:function(o,_,F){!1!==i._fullLayout.hovermode&&(x.select(o).call(nodeNonHoveredStyle,_,F),"skip"!==_.node.trace.node.hoverinfo&&(_.node.fullData=_.node.trace,i.emit("plotly_unhover",{event:x.event,points:[_.node]})),j.loneUnhover(s._hoverlayer.node()))},select:function(o,s,_){var F=s.node;F.originalEvent=x.event,i._hoverdata=[F],x.select(o).call(nodeNonHoveredStyle,s,_),j.click(i,{target:!0})}}})}},3393:function(i,o,s){"use strict";var x=s(49887),_=s(81684).k4,F=s(39898),N=s(30838),j=s(86781),G=s(85247),Z=s(84267),X=s(7901),J=s(91424),$=s(71828),ee=$.strTranslate,et=$.strRotate,er=s(28984),en=er.keyFun,ei=er.repeat,eo=er.unwrap,es=s(63893),el=s(73972),ec=s(18783),eu=ec.CAP_SHIFT,ef=ec.LINE_SPACING;function sankeyModel(i,o,s){var x=eo(o),_=x.trace,F=_.domain,X="h"===_.orientation,J=_.node.pad,ee=_.node.thickness,et=i.width*(F.x[1]-F.x[0]),er=i.height*(F.y[1]-F.y[0]),en=x._nodes,ei=x._links,es=x.circular;(eu=es?j.sankeyCircular().circularLinkGap(0):N.sankey()).iterations(G.sankeyIterations).size(X?[et,er]:[er,et]).nodeWidth(ee).nodePadding(J).nodeId(function(i){return i.pointNumber}).nodes(en).links(ei);var el=eu();for(var ec in eu.nodePadding()<J&&$.warn("node.pad was reduced to ",eu.nodePadding()," to fit within the figure."),x._groupLookup){var eu,ef,eh,ed,ep,eg=parseInt(x._groupLookup[ec]);for(ef=0;ef<el.nodes.length;ef++)if(el.nodes[ef].pointNumber===eg){ep=el.nodes[ef];break}if(ep){var em={pointNumber:parseInt(ec),x0:ep.x0,x1:ep.x1,y0:ep.y0,y1:ep.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};el.nodes.unshift(em),ep.childrenNodes.unshift(em)}}if(function(){for(ef=0;ef<el.nodes.length;ef++){var i,o,s=el.nodes[ef],x={};for(eh=0;eh<s.targetLinks.length;eh++)i=(o=s.targetLinks[eh]).source.pointNumber+":"+o.target.pointNumber,x.hasOwnProperty(i)||(x[i]=[]),x[i].push(o);var _=Object.keys(x);for(eh=0;eh<_.length;eh++){var F=x[i=_[eh]],N=0,j={};for(ed=0;ed<F.length;ed++)j[(o=F[ed]).label]||(j[o.label]=0),j[o.label]+=o.value,N+=o.value;for(ed=0;ed<F.length;ed++)(o=F[ed]).flow={value:N,labelConcentration:j[o.label]/N,concentration:o.value/N,links:F},o.concentrationscale&&(o.color=Z(o.concentrationscale(o.flow.labelConcentration)))}var G=0;for(eh=0;eh<s.sourceLinks.length;eh++)G+=s.sourceLinks[eh].value;for(eh=0;eh<s.sourceLinks.length;eh++)(o=s.sourceLinks[eh]).concentrationOut=o.value/G;var X=0;for(eh=0;eh<s.targetLinks.length;eh++)X+=s.targetLinks[eh].value;for(eh=0;eh<s.targetLinks.length;eh++)(o=s.targetLinks[eh]).concenrationIn=o.value/X}}(),_.node.x.length&&_.node.y.length){for(ef=0;ef<Math.min(_.node.x.length,_.node.y.length,el.nodes.length);ef++)if(_.node.x[ef]&&_.node.y[ef]){var ey=[_.node.x[ef]*et,_.node.y[ef]*er];el.nodes[ef].x0=ey[0]-ee/2,el.nodes[ef].x1=ey[0]+ee/2;var ev=el.nodes[ef].y1-el.nodes[ef].y0;el.nodes[ef].y0=ey[1]-ev/2,el.nodes[ef].y1=ey[1]+ev/2}"snap"===_.arrangement&&function(i){i.forEach(function(i){var o,s,x,_=0,F=i.length;for(i.sort(function(i,o){return i.y0-o.y0}),x=0;x<F;++x)(o=i[x]).y0>=_||(s=_-o.y0)>1e-6&&(o.y0+=s,o.y1+=s),_=o.y1+J})}(function(i){var o,s,x=i.map(function(i,o){return{x0:i.x0,index:o}}).sort(function(i,o){return i.x0-o.x0}),_=[],F=-1,N=-1/0;for(ef=0;ef<x.length;ef++){var j=i[x[ef].index];j.x0>N+ee&&(F+=1,o=j.x0),N=j.x0,_[F]||(_[F]=[]),_[F].push(j),s=o-j.x0,j.x0+=s,j.x1+=s}return _}(en=el.nodes)),eu.update(el)}return{circular:es,key:s,trace:_,guid:$.randstr(),horizontal:X,width:et,height:er,nodePad:_.node.pad,nodeLineColor:_.node.line.color,nodeLineWidth:_.node.line.width,linkLineColor:_.link.line.color,linkLineWidth:_.link.line.width,linkArrowLength:_.link.arrowlen,valueFormat:_.valueformat,valueSuffix:_.valuesuffix,textFont:_.textfont,translateX:F.x[0]*i.width+i.margin.l,translateY:i.height-F.y[1]*i.height+i.margin.t,dragParallel:X?er:et,dragPerpendicular:X?et:er,arrangement:_.arrangement,sankey:eu,graph:el,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function linkModel(i,o,s){var x=Z(o.color),_=o.source.label+"|"+o.target.label;return o.trace=i.trace,o.curveNumber=i.trace.index,{circular:i.circular,key:_+"__"+s,traceId:i.key,pointNumber:o.pointNumber,link:o,tinyColorHue:X.tinyRGB(x),tinyColorAlpha:x.getAlpha(),linkPath:linkPath,linkLineColor:i.linkLineColor,linkLineWidth:i.linkLineWidth,linkArrowLength:i.linkArrowLength,valueFormat:i.valueFormat,valueSuffix:i.valueSuffix,sankey:i.sankey,parent:i,interactionState:i.interactionState,flow:o.flow}}function linkPath(){return function(i){var o,s,x,F,N=i.linkArrowLength;if(i.link.circular)return o=i.link,s=N,x=o.width/2,F=o.circularPathData,"top"===o.circularLinkType?"M "+(F.targetX-s)+" "+(F.targetY+x)+" L"+(F.rightInnerExtent-s)+" "+(F.targetY+x)+"A"+(F.rightLargeArcRadius+x)+" "+(F.rightSmallArcRadius+x)+" 0 0 1 "+(F.rightFullExtent-x-s)+" "+(F.targetY-F.rightSmallArcRadius)+"L"+(F.rightFullExtent-x-s)+" "+F.verticalRightInnerExtent+"A"+(F.rightLargeArcRadius+x)+" "+(F.rightLargeArcRadius+x)+" 0 0 1 "+(F.rightInnerExtent-s)+" "+(F.verticalFullExtent-x)+"L"+F.leftInnerExtent+" "+(F.verticalFullExtent-x)+"A"+(F.leftLargeArcRadius+x)+" "+(F.leftLargeArcRadius+x)+" 0 0 1 "+(F.leftFullExtent+x)+" "+F.verticalLeftInnerExtent+"L"+(F.leftFullExtent+x)+" "+(F.sourceY-F.leftSmallArcRadius)+"A"+(F.leftLargeArcRadius+x)+" "+(F.leftSmallArcRadius+x)+" 0 0 1 "+F.leftInnerExtent+" "+(F.sourceY+x)+"L"+F.sourceX+" "+(F.sourceY+x)+"L"+F.sourceX+" "+(F.sourceY-x)+"L"+F.leftInnerExtent+" "+(F.sourceY-x)+"A"+(F.leftLargeArcRadius-x)+" "+(F.leftSmallArcRadius-x)+" 0 0 0 "+(F.leftFullExtent-x)+" "+(F.sourceY-F.leftSmallArcRadius)+"L"+(F.leftFullExtent-x)+" "+F.verticalLeftInnerExtent+"A"+(F.leftLargeArcRadius-x)+" "+(F.leftLargeArcRadius-x)+" 0 0 0 "+F.leftInnerExtent+" "+(F.verticalFullExtent+x)+"L"+(F.rightInnerExtent-s)+" "+(F.verticalFullExtent+x)+"A"+(F.rightLargeArcRadius-x)+" "+(F.rightLargeArcRadius-x)+" 0 0 0 "+(F.rightFullExtent+x-s)+" "+F.verticalRightInnerExtent+"L"+(F.rightFullExtent+x-s)+" "+(F.targetY-F.rightSmallArcRadius)+"A"+(F.rightLargeArcRadius-x)+" "+(F.rightSmallArcRadius-x)+" 0 0 0 "+(F.rightInnerExtent-s)+" "+(F.targetY-x)+"L"+(F.targetX-s)+" "+(F.targetY-x)+(s>0?"L"+F.targetX+" "+F.targetY:"")+"Z":"M "+(F.targetX-s)+" "+(F.targetY-x)+" L"+(F.rightInnerExtent-s)+" "+(F.targetY-x)+"A"+(F.rightLargeArcRadius+x)+" "+(F.rightSmallArcRadius+x)+" 0 0 0 "+(F.rightFullExtent-x-s)+" "+(F.targetY+F.rightSmallArcRadius)+"L"+(F.rightFullExtent-x-s)+" "+F.verticalRightInnerExtent+"A"+(F.rightLargeArcRadius+x)+" "+(F.rightLargeArcRadius+x)+" 0 0 0 "+(F.rightInnerExtent-s)+" "+(F.verticalFullExtent+x)+"L"+F.leftInnerExtent+" "+(F.verticalFullExtent+x)+"A"+(F.leftLargeArcRadius+x)+" "+(F.leftLargeArcRadius+x)+" 0 0 0 "+(F.leftFullExtent+x)+" "+F.verticalLeftInnerExtent+"L"+(F.leftFullExtent+x)+" "+(F.sourceY+F.leftSmallArcRadius)+"A"+(F.leftLargeArcRadius+x)+" "+(F.leftSmallArcRadius+x)+" 0 0 0 "+F.leftInnerExtent+" "+(F.sourceY-x)+"L"+F.sourceX+" "+(F.sourceY-x)+"L"+F.sourceX+" "+(F.sourceY+x)+"L"+F.leftInnerExtent+" "+(F.sourceY+x)+"A"+(F.leftLargeArcRadius-x)+" "+(F.leftSmallArcRadius-x)+" 0 0 1 "+(F.leftFullExtent-x)+" "+(F.sourceY+F.leftSmallArcRadius)+"L"+(F.leftFullExtent-x)+" "+F.verticalLeftInnerExtent+"A"+(F.leftLargeArcRadius-x)+" "+(F.leftLargeArcRadius-x)+" 0 0 1 "+F.leftInnerExtent+" "+(F.verticalFullExtent-x)+"L"+(F.rightInnerExtent-s)+" "+(F.verticalFullExtent-x)+"A"+(F.rightLargeArcRadius-x)+" "+(F.rightLargeArcRadius-x)+" 0 0 1 "+(F.rightFullExtent+x-s)+" "+F.verticalRightInnerExtent+"L"+(F.rightFullExtent+x-s)+" "+(F.targetY+F.rightSmallArcRadius)+"A"+(F.rightLargeArcRadius-x)+" "+(F.rightSmallArcRadius-x)+" 0 0 1 "+(F.rightInnerExtent-s)+" "+(F.targetY+x)+"L"+(F.targetX-s)+" "+(F.targetY+x)+(s>0?"L"+F.targetX+" "+F.targetY:"")+"Z";var j=Math.abs((i.link.target.x0-i.link.source.x1)/2);N>j&&(N=j);var G=i.link.source.x1,Z=i.link.target.x0-N,X=_(G,Z),J=X(.5),$=X(.5),ee=i.link.y0-i.link.width/2,et=i.link.y0+i.link.width/2,er=i.link.y1-i.link.width/2,en=i.link.y1+i.link.width/2,ei="M"+G+","+ee,eo="C"+J+","+ee+" "+$+","+er+" "+Z+","+er,es="C"+$+","+en+" "+J+","+et+" "+G+","+et,el=N>0?"L"+(Z+N)+","+(er+i.link.width/2):"";return ei+eo+(el+="L"+Z+","+en)+es+"Z"}}function nodeModel(i,o){var s=Z(o.color),x=G.nodePadAcross,_=i.nodePad/2;o.dx=o.x1-o.x0,o.dy=o.y1-o.y0;var F=o.dx,N=Math.max(.5,o.dy),j="node_"+o.pointNumber;return o.group&&(j=$.randstr()),o.trace=i.trace,o.curveNumber=i.trace.index,{index:o.pointNumber,key:j,partOfGroup:o.partOfGroup||!1,group:o.group,traceId:i.key,trace:i.trace,node:o,nodePad:i.nodePad,nodeLineColor:i.nodeLineColor,nodeLineWidth:i.nodeLineWidth,textFont:i.textFont,size:i.horizontal?i.height:i.width,visibleWidth:Math.ceil(F),visibleHeight:N,zoneX:-x,zoneY:-_,zoneWidth:F+2*x,zoneHeight:N+2*_,labelY:i.horizontal?o.dy/2+1:o.dx/2+1,left:1===o.originalLayer,sizeAcross:i.width,forceLayouts:i.forceLayouts,horizontal:i.horizontal,darkBackground:128>=s.getBrightness(),tinyColorHue:X.tinyRGB(s),tinyColorAlpha:s.getAlpha(),valueFormat:i.valueFormat,valueSuffix:i.valueSuffix,sankey:i.sankey,graph:i.graph,arrangement:i.arrangement,uniqueNodeLabelPathId:[i.guid,i.key,j].join("_"),interactionState:i.interactionState,figure:i}}function updateNodePositions(i){i.attr("transform",function(i){return ee(i.node.x0.toFixed(3),i.node.y0.toFixed(3))})}function updateNodeShapes(i){i.call(updateNodePositions)}function updateShapes(i,o){i.call(updateNodeShapes),o.attr("d",linkPath())}function sizeNode(i){i.attr("width",function(i){return i.node.x1-i.node.x0}).attr("height",function(i){return i.visibleHeight})}function salientEnough(i){return i.link.width>1||i.linkLineWidth>0}function sankeyTransform(i){return ee(i.translateX,i.translateY)+(i.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function attachPointerEvents(i,o,s){i.on(".basic",null).on("mouseover.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.hover(this,i,o),i.interactionState.hovered=[this,i])}).on("mousemove.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.follow(this,i),i.interactionState.hovered=[this,i])}).on("mouseout.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.unhover(this,i,o),i.interactionState.hovered=!1)}).on("click.basic",function(i){i.interactionState.hovered&&(s.unhover(this,i,o),i.interactionState.hovered=!1),i.interactionState.dragInProgress||i.partOfGroup||s.select(this,i,o)})}function attachDragHandler(i,o,s,_){var N=F.behavior.drag().origin(function(i){return{x:i.node.x0+i.visibleWidth/2,y:i.node.y0+i.visibleHeight/2}}).on("dragstart",function(F){if("fixed"!==F.arrangement&&($.ensureSingle(_._fullLayout._infolayer,"g","dragcover",function(i){_._fullLayout._dragCover=i}),$.raiseToTop(this),F.interactionState.dragInProgress=F.node,saveCurrentDragPosition(F.node),F.interactionState.hovered&&(s.nodeEvents.unhover.apply(0,F.interactionState.hovered),F.interactionState.hovered=!1),"snap"===F.arrangement)){var N,j=F.traceId+"|"+F.key;F.forceLayouts[j]?F.forceLayouts[j].alpha(1):(function(i){for(var o=0;o<i.length;o++)i[o].y=(i[o].y0+i[o].y1)/2,i[o].x=(i[o].x0+i[o].x1)/2}(F.graph.nodes),N=F.graph.nodes.filter(function(i){return i.originalX===F.node.originalX}).filter(function(i){return!i.partOfGroup}),F.forceLayouts[j]=x.forceSimulation(N).alphaDecay(0).force("collide",x.forceCollide().radius(function(i){return i.dy/2+F.nodePad/2}).strength(1).iterations(G.forceIterations)).force("constrain",function(){for(var i=0,o=0;o<N.length;o++){var s=N[o];s===F.interactionState.dragInProgress?(s.x=s.lastDraggedX,s.y=s.lastDraggedY):(s.vx=(s.originalX-s.x)/G.forceTicksPerFrame,s.y=Math.min(F.size-s.dy/2,Math.max(s.dy/2,s.y))),i=Math.max(i,Math.abs(s.vx),Math.abs(s.vy))}!F.interactionState.dragInProgress&&i<.1&&F.forceLayouts[j].alpha()>0&&F.forceLayouts[j].alpha(0)}).stop()),window.requestAnimationFrame(function faster(){for(s=0;s<G.forceTicksPerFrame;s++)F.forceLayouts[j].tick();if(function(i){for(var o=0;o<i.length;o++)i[o].y0=i[o].y-i[o].dy/2,i[o].y1=i[o].y0+i[o].dy,i[o].x0=i[o].x-i[o].dx/2,i[o].x1=i[o].x0+i[o].dx}(F.graph.nodes),F.sankey.update(F.graph),updateShapes(i.filter(sameLayer(F)),o),F.forceLayouts[j].alpha()>0)window.requestAnimationFrame(faster);else{var s,x=F.node.originalX;F.node.x0=x-F.visibleWidth/2,F.node.x1=x+F.visibleWidth/2,persistFinalNodePositions(F,_)}})}}).on("drag",function(s){if("fixed"!==s.arrangement){var x=F.event.x,_=F.event.y;"snap"===s.arrangement?(s.node.x0=x-s.visibleWidth/2,s.node.x1=x+s.visibleWidth/2):("freeform"===s.arrangement&&(s.node.x0=x-s.visibleWidth/2,s.node.x1=x+s.visibleWidth/2),_=Math.max(0,Math.min(s.size-s.visibleHeight/2,_))),s.node.y0=_-s.visibleHeight/2,s.node.y1=_+s.visibleHeight/2,saveCurrentDragPosition(s.node),"snap"!==s.arrangement&&(s.sankey.update(s.graph),updateShapes(i.filter(sameLayer(s)),o))}}).on("dragend",function(i){if("fixed"!==i.arrangement){i.interactionState.dragInProgress=!1;for(var o=0;o<i.node.childrenNodes.length;o++)i.node.childrenNodes[o].x=i.node.x,i.node.childrenNodes[o].y=i.node.y;"snap"!==i.arrangement&&persistFinalNodePositions(i,_)}});i.on(".drag",null).call(N)}function persistFinalNodePositions(i,o){for(var s=[],x=[],_=0;_<i.graph.nodes.length;_++){var F=(i.graph.nodes[_].x0+i.graph.nodes[_].x1)/2,N=(i.graph.nodes[_].y0+i.graph.nodes[_].y1)/2;s.push(F/i.figure.width),x.push(N/i.figure.height)}el.call("_guiRestyle",o,{"node.x":[s],"node.y":[x]},i.trace.index).then(function(){o._fullLayout._dragCover&&o._fullLayout._dragCover.remove()})}function saveCurrentDragPosition(i){i.lastDraggedX=i.x0+i.dx/2,i.lastDraggedY=i.y0+i.dy/2}function sameLayer(i){return function(o){return o.node.originalX===i.node.originalX}}i.exports=function(i,o,s,x,_){var N=i._context.staticPlot,j=!1;$.ensureSingle(i._fullLayout._infolayer,"g","first-render",function(){j=!0});var er=i._fullLayout._dragCover,el=s.filter(function(i){return eo(i).trace.visible}).map(sankeyModel.bind(null,x)),ec=o.selectAll("."+G.cn.sankey).data(el,en);ec.exit().remove(),ec.enter().append("g").classed(G.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",N?"none":"auto").attr("transform",sankeyTransform),ec.each(function(o,s){i._fullData[s]._sankey=o;var x="bgsankey-"+o.trace.uid+"-"+s;$.ensureSingle(i._fullLayout._draggers,"rect",x),i._fullData[s]._bgRect=F.select("."+x),i._fullData[s]._bgRect.style("pointer-events",N?"none":"all").attr("width",o.width).attr("height",o.height).attr("x",o.translateX).attr("y",o.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ec.transition().ease(G.ease).duration(G.duration).attr("transform",sankeyTransform);var eh=ec.selectAll("."+G.cn.sankeyLinks).data(ei,en);eh.enter().append("g").classed(G.cn.sankeyLinks,!0).style("fill","none");var ed=eh.selectAll("."+G.cn.sankeyLink).data(function(i){return i.graph.links.filter(function(i){return i.value}).map(linkModel.bind(null,i))},en);ed.enter().append("path").classed(G.cn.sankeyLink,!0).call(attachPointerEvents,ec,_.linkEvents),ed.style("stroke",function(i){return salientEnough(i)?X.tinyRGB(Z(i.linkLineColor)):i.tinyColorHue}).style("stroke-opacity",function(i){return salientEnough(i)?X.opacity(i.linkLineColor):i.tinyColorAlpha}).style("fill",function(i){return i.tinyColorHue}).style("fill-opacity",function(i){return i.tinyColorAlpha}).style("stroke-width",function(i){return salientEnough(i)?i.linkLineWidth:1}).attr("d",linkPath()),ed.style("opacity",function(){return i._context.staticPlot||j||er?1:0}).transition().ease(G.ease).duration(G.duration).style("opacity",1),ed.exit().transition().ease(G.ease).duration(G.duration).style("opacity",0).remove();var ep=ec.selectAll("."+G.cn.sankeyNodeSet).data(ei,en);ep.enter().append("g").classed(G.cn.sankeyNodeSet,!0),ep.style("cursor",function(i){switch(i.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var eg=ep.selectAll("."+G.cn.sankeyNode).data(function(i){var o=i.graph.nodes;return function(i){var o,s=[];for(o=0;o<i.length;o++)i[o].originalX=(i[o].x0+i[o].x1)/2,i[o].originalY=(i[o].y0+i[o].y1)/2,-1===s.indexOf(i[o].originalX)&&s.push(i[o].originalX);for(s.sort(function(i,o){return i-o}),o=0;o<i.length;o++)i[o].originalLayerIndex=s.indexOf(i[o].originalX),i[o].originalLayer=i[o].originalLayerIndex/(s.length-1)}(o),o.map(nodeModel.bind(null,i))},en);eg.enter().append("g").classed(G.cn.sankeyNode,!0).call(updateNodePositions).style("opacity",function(o){return(i._context.staticPlot||j)&&!o.partOfGroup?1:0}),eg.call(attachPointerEvents,ec,_.nodeEvents).call(attachDragHandler,ed,_,i),eg.transition().ease(G.ease).duration(G.duration).call(updateNodePositions).style("opacity",function(i){return i.partOfGroup?0:1}),eg.exit().transition().ease(G.ease).duration(G.duration).style("opacity",0).remove();var em=eg.selectAll("."+G.cn.nodeRect).data(ei);em.enter().append("rect").classed(G.cn.nodeRect,!0).call(sizeNode),em.style("stroke-width",function(i){return i.nodeLineWidth}).style("stroke",function(i){return X.tinyRGB(Z(i.nodeLineColor))}).style("stroke-opacity",function(i){return X.opacity(i.nodeLineColor)}).style("fill",function(i){return i.tinyColorHue}).style("fill-opacity",function(i){return i.tinyColorAlpha}),em.transition().ease(G.ease).duration(G.duration).call(sizeNode);var ey=eg.selectAll("."+G.cn.nodeLabel).data(ei);ey.enter().append("text").classed(G.cn.nodeLabel,!0).style("cursor","default"),ey.attr("data-notex",1).text(function(i){return i.node.label}).each(function(o){var s=F.select(this);J.font(s,o.textFont),es.convertToTspans(s,i)}).style("text-shadow",es.makeTextShadow(i._fullLayout.paper_bgcolor)).attr("text-anchor",function(i){return i.horizontal&&i.left?"end":"start"}).attr("transform",function(i){var o=F.select(this),s=es.lineCount(o),x=i.textFont.size*((s-1)*ef-eu),_=i.nodeLineWidth/2+3,N=((i.horizontal?i.visibleHeight:i.visibleWidth)-x)/2;i.horizontal&&(i.left?_=-_:_+=i.visibleWidth);var j=i.horizontal?"":"scale(-1,1)"+et(90);return ee(i.horizontal?_:N,i.horizontal?N:_)+j}),ey.transition().ease(G.ease).duration(G.duration)}},84564:function(i){"use strict";i.exports=function(i,o){for(var s=i.cd,x=[],_=s[0].trace,F=_._sankey.graph.nodes,N=0;N<F.length;N++){var j=F[N];if(!j.partOfGroup){var G=[(j.x0+j.x1)/2,(j.y0+j.y1)/2];"v"===_.orientation&&G.reverse(),o&&o.contains(G,!1,N,i)&&x.push({pointNumber:j.pointNumber})}}return x}},75225:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;x.mergeArray(o.text,i,"tx"),x.mergeArray(o.texttemplate,i,"txt"),x.mergeArray(o.hovertext,i,"htx"),x.mergeArray(o.customdata,i,"data"),x.mergeArray(o.textposition,i,"tp"),o.textfont&&(x.mergeArrayCastPositive(o.textfont.size,i,"ts"),x.mergeArray(o.textfont.color,i,"tc"),x.mergeArray(o.textfont.family,i,"tf"));var _=o.marker;if(_){x.mergeArrayCastPositive(_.size,i,"ms"),x.mergeArrayCastPositive(_.opacity,i,"mo"),x.mergeArray(_.symbol,i,"mx"),x.mergeArray(_.angle,i,"ma"),x.mergeArray(_.standoff,i,"mf"),x.mergeArray(_.color,i,"mc");var F=_.line;_.line&&(x.mergeArray(F.color,i,"mlc"),x.mergeArrayCastPositive(F.width,i,"mlw"));var N=_.gradient;N&&"none"!==N.type&&(x.mergeArray(N.type,i,"mgt"),x.mergeArray(N.color,i,"mgc"))}}},82196:function(i,o,s){"use strict";var x=s(12663).axisHoverFormat,_=s(5386).si,F=s(5386).fF,N=s(50693),j=s(41940),G=s(79952).P,Z=s(79952).u,X=s(91424),J=s(47581),$=s(1426).extendFlat;function axisPeriod(i){return{valType:"any",dflt:0,editType:"calc"}}function axisPeriod0(i){return{valType:"any",editType:"calc"}}function axisPeriodAlignment(i){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}i.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:axisPeriod("x"),yperiod:axisPeriod("y"),xperiod0:axisPeriod0("x0"),yperiod0:axisPeriod0("y0"),xperiodalignment:axisPeriodAlignment("x"),yperiodalignment:axisPeriodAlignment("y"),xhoverformat:x("x"),yhoverformat:x("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:_({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:F({},{keys:J.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:$({},G,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:Z,marker:$({symbol:{valType:"enumerated",values:X.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:$({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},N("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},N("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:j({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(89298),N=s(42973),j=s(50606).BADNUM,G=s(34098),Z=s(36922),X=s(75225),J=s(66279);function calcAxisExpansion(i,o,s,x,_,N,j){var Z=o._length,X=i._fullLayout,J=s._id,$=x._id,ee=X._firstScatter[firstScatterGroup(o)]===o.uid,et=(getStackOpts(o,X,s,x)||{}).orientation,er=o.fill;s._minDtick=0,x._minDtick=0;var en={padded:!0},ei={padded:!0};j&&(en.ppad=ei.ppad=j);var eo=Z<2||_[0]!==_[Z-1]||N[0]!==N[Z-1];eo&&("tozerox"===er||"tonextx"===er&&(ee||"h"===et))?en.tozero=!0:(o.error_y||{}).visible||"tonexty"!==er&&"tozeroy"!==er&&(G.hasMarkers(o)||G.hasText(o))||(en.padded=!1,en.ppad=0),eo&&("tozeroy"===er||"tonexty"===er&&(ee||"v"===et))?ei.tozero=!0:("tonextx"===er||"tozerox"===er)&&(ei.padded=!1),J&&(o._extremes[J]=F.findExtremes(s,_,en)),$&&(o._extremes[$]=F.findExtremes(x,N,ei))}function calcMarkerSize(i,o){if(G.hasMarkers(i)){var s,x=i.marker,N=1.6*(i.marker.sizeref||1);if(s="area"===i.marker.sizemode?function(i){return Math.max(Math.sqrt((i||0)/N),3)}:function(i){return Math.max((i||0)/N,3)},!_.isArrayOrTypedArray(x.size))return s(x.size);var j={type:"linear"};F.setConvert(j);for(var Z=j.makeCalcdata(i.marker,"size"),X=Array(o),J=0;J<o;J++)X[J]=s(Z[J]);return X}}function setFirstScatter(i,o){var s=firstScatterGroup(o),x=i._firstScatter;x[s]||(x[s]=o.uid)}function firstScatterGroup(i){var o=i.stackgroup;return i.xaxis+i.yaxis+i.type+(o?"-"+o:"")}function getStackOpts(i,o,s,x){var _=i.stackgroup;if(_){var F=o._scatterStackOpts[s._id+x._id][_],N="v"===F.orientation?x:s;if("linear"===N.type||"log"===N.type)return F}}i.exports={calc:function(i,o){var s,G,$,ee,et,er,en,ei=i._fullLayout,eo=o._xA=F.getFromId(i,o.xaxis||"x","x"),es=o._yA=F.getFromId(i,o.yaxis||"y","y"),el=eo.makeCalcdata(o,"x"),ec=es.makeCalcdata(o,"y"),eu=N(o,eo,"x",el),ef=N(o,es,"y",ec),eh=eu.vals,ed=ef.vals,ep=o._length,eg=Array(ep),em=o.ids,ey=getStackOpts(o,ei,eo,es),ev=!1;setFirstScatter(ei,o);var ex="x",e_="y";if(ey)_.pushUnique(ey.traceIndices,o._expandedIndex),(s="v"===ey.orientation)?(e_="s",en="x"):(ex="s",en="y"),et="interpolate"===ey.stackgaps;else{var ew=calcMarkerSize(o,ep);calcAxisExpansion(i,o,eo,es,eh,ed,ew)}var eT=!!o.xperiodalignment,ek=!!o.yperiodalignment;for(G=0;G<ep;G++){var eA=eg[G]={},eS=x(eh[G]),eM=x(ed[G]);eS&&eM?(eA[ex]=eh[G],eA[e_]=ed[G],eT&&(eA.orig_x=el[G],eA.xEnd=eu.ends[G],eA.xStart=eu.starts[G]),ek&&(eA.orig_y=ec[G],eA.yEnd=ef.ends[G],eA.yStart=ef.starts[G])):ey&&(s?eS:eM)?(eA[en]=s?eh[G]:ed[G],eA.gap=!0,et?(eA.s=j,ev=!0):eA.s=0):eA[ex]=eA[e_]=j,em&&(eA.id=String(em[G]))}if(X(eg,o),Z(i,o),J(eg,o),ey){for(G=0;G<eg.length;)eg[G][en]===j?eg.splice(G,1):G++;if(_.sort(eg,function(i,o){return i[en]-o[en]||i.i-o.i}),ev){for(G=0;G<eg.length-1&&eg[G].gap;)G++;for((er=eg[G].s)||(er=eg[G].s=0),$=0;$<G;$++)eg[$].s=er;for(ee=eg.length-1;ee>G&&eg[ee].gap;)ee--;for(er=eg[ee].s,$=eg.length-1;$>ee;$--)eg[$].s=er;for(;G<ee;)if(eg[++G].gap){for($=G+1;eg[$].gap;)$++;for(var eC=eg[G-1][en],eE=eg[G-1].s,eL=(eg[$].s-eE)/(eg[$][en]-eC);G<$;)eg[G].s=eE+(eg[G][en]-eC)*eL,G++}}}return eg},calcMarkerSize:calcMarkerSize,calcAxisExpansion:calcAxisExpansion,setFirstScatter:setFirstScatter,getStackOpts:getStackOpts}},66279:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){x.isArrayOrTypedArray(o.selectedpoints)&&x.tagSelected(i,o)}},36922:function(i,o,s){"use strict";var x=s(52075).hasColorscale,_=s(78803),F=s(34098);i.exports=function(i,o){F.hasLines(o)&&x(o,"line")&&_(i,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),F.hasMarkers(o)&&(x(o,"marker")&&_(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),x(o,"marker.line")&&_(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(i){"use strict";i.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(i,o,s){"use strict";var x=s(47761),_=s(11661).setGroupPositions;function insertBlank(i,o,s,x,_,F,N){_[x]=!0;var j,G,Z={i:null,gap:!0,s:0};if(Z[N]=s,i.splice(o,0,Z),o&&s===i[o-1][N]){var X=i[o-1];Z.s=X.s,Z.i=X.i,Z.gap=X.gap}else F&&(Z.s=(j=i[o-1],(G=i[o+1])?j?j.s+(G.s-j.s)*(s-j[N])/(G[N]-j[N]):G.s:j.s));o||(i[0].t=i[1].t,i[0].trace=i[1].trace,delete i[1].t,delete i[1].trace)}i.exports=function(i,o){"group"===i._fullLayout.scattermode&&function(i,o){for(var s=o.xaxis,x=o.yaxis,F=i._fullLayout,N=i._fullData,j=i.calcdata,G=[],Z=[],X=0;X<N.length;X++){var J=N[X];!0===J.visible&&"scatter"===J.type&&J.xaxis===s._id&&J.yaxis===x._id&&("h"===J.orientation?G.push(j[X]):"v"===J.orientation&&Z.push(j[X]))}var $={mode:F.scattermode,gap:F.scattergap};_(i,s,x,Z,$),_(i,x,s,G,$)}(i,o);var s,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es=o.xaxis,el=o.yaxis,ec=es._id+el._id,eu=i._fullLayout._scatterStackOpts[ec];if(eu){var ef=i.calcdata;for(var eh in eu){var ed=(ee=eu[eh]).traceIndices;if(ed.length){for(et="interpolate"===ee.stackgaps,er=ee.groupnorm,"v"===ee.orientation?(en="x",ei="y"):(en="y",ei="x"),eo=Array(ed.length),s=0;s<eo.length;s++)eo[s]=!1;var ep=Array((Z=ef[ed[0]]).length);for(s=0;s<Z.length;s++)ep[s]=Z[s][en];for(s=1;s<ed.length;s++){for(G=ef[ed[s]],F=N=0;F<G.length;F++){for(X=G[F][en];X>ep[N]&&N<ep.length;N++)insertBlank(G,F,ep[N],s,eo,et,en),F++;if(X!==ep[N]){for(j=0;j<s;j++)insertBlank(ef[ed[j]],N,X,j,eo,et,en);ep.splice(N,0,X)}N++}for(;N<ep.length;N++)insertBlank(G,F,ep[N],s,eo,et,en),F++}var eg=ep.length;for(F=0;F<Z.length;F++){for(s=1,J=Z[F][ei]=Z[F].s;s<ed.length;s++)(G=ef[ed[s]])[0].trace._rawLength=G[0].trace._length,G[0].trace._length=eg,J+=G[F].s,G[F][ei]=J;if(er)for(s=0,$=("fraction"===er?J:J/100)||1;s<ed.length;s++){var em=ef[ed[s]][F];em[ei]/=$,em.sNorm=em.s/$}}for(s=0;s<ed.length;s++){var ey=(G=ef[ed[s]])[0].trace,ev=x.calcMarkerSize(ey,ey._rawLength),ex=Array.isArray(ev);if(ev&&eo[s]||ex){var e_=ev;for(F=0,ev=Array(eg);F<eg;F++)ev[F]=G[F].gap?0:ex?e_[G[F].i]:e_}var ew=Array(eg),eT=Array(eg);for(F=0;F<eg;F++)ew[F]=G[F].x,eT[F]=G[F].y;x.calcAxisExpansion(i,ey,es,el,ew,eT,ev),G[0].t.orientation=ee.orientation}}}}}},34936:function(i,o,s){"use strict";var x=s(71828),_=s(26125),F=s(82196);i.exports=function(i,o){var s,N;function coerce(i){return x.coerce(s._input,s,F,i)}if("group"===o.scattermode)for(N=0;N<i.length;N++)"scatter"===(s=i[N]).type&&_(s._input,s,o,coerce);for(N=0;N<i.length;N++){var j=i[N];if("scatter"===j.type){var G=j.fill;if("none"!==G&&"toself"!==G&&(j.opacity=void 0,"tonexty"===G||"tonextx"===G))for(var Z=N-1;Z>=0;Z--){var X=i[Z];if("scatter"===X.type&&X.xaxis===j.xaxis&&X.yaxis===j.yaxis){X.opacity=void 0;break}}}}}},17438:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(82196),N=s(47581),j=s(34098),G=s(67513),Z=s(73927),X=s(565),J=s(49508),$=s(11058),ee=s(94039),et=s(82410),er=s(28908),en=s(71828).coercePattern;i.exports=function(i,o,s,ei){function coerce(s,_){return x.coerce(i,o,F,s,_)}var eo=G(i,o,ei,coerce);if(eo||(o.visible=!1),o.visible){Z(i,o,ei,coerce),coerce("xhoverformat"),coerce("yhoverformat");var es=X(i,o,ei,coerce);"group"===ei.scattermode&&void 0===o.orientation&&coerce("orientation","v");var el=!es&&eo<N.PTS_LINESONLY?"lines+markers":"lines";coerce("text"),coerce("hovertext"),coerce("mode",el),j.hasLines(o)&&($(i,o,s,ei,coerce,{backoff:!0}),ee(i,o,coerce),coerce("connectgaps"),coerce("line.simplify")),j.hasMarkers(o)&&J(i,o,s,ei,coerce,{gradient:!0}),j.hasText(o)&&(coerce("texttemplate"),et(i,o,ei,coerce));var ec=[];(j.hasMarkers(o)||j.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ec.push("points")),coerce("fill",es?es.fillDflt:"none"),"none"!==o.fill&&(er(i,o,s,coerce),j.hasLines(o)||ee(i,o,coerce),en(coerce,"fillpattern",o.fillcolor,!1));var eu=(o.line||{}).color,ef=(o.marker||{}).color;("tonext"===o.fill||"toself"===o.fill)&&ec.push("fills"),coerce("hoveron",ec.join("+")||"points"),"fills"!==o.hoveron&&coerce("hovertemplate");var eh=_.getComponentMethod("errorbars","supplyDefaults");eh(i,o,eu||ef||s,{axis:"y"}),eh(i,o,eu||ef||s,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(o,coerce)}}},28908:function(i,o,s){"use strict";var x=s(7901),_=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,F){var N=!1;if(o.marker){var j=o.marker.color,G=(o.marker.line||{}).color;j&&!_(j)?N=j:G&&!_(G)&&(N=G)}F("fillcolor",x.addOpacity((o.line||{}).color||N||s,.5))}},8225:function(i,o,s){"use strict";var x=s(89298);i.exports=function(i,o,s){var _={},F={_fullLayout:s},N=x.getFromTrace(F,o,"x"),j=x.getFromTrace(F,o,"y"),G=i.orig_x;void 0===G&&(G=i.x);var Z=i.orig_y;return void 0===Z&&(Z=i.y),_.xLabel=x.tickText(N,N.c2l(G),!0).text,_.yLabel=x.tickText(j,j.c2l(Z),!0).text,_}},34603:function(i,o,s){"use strict";var x=s(7901),_=s(34098);i.exports=function(i,o){if("lines"===i.mode)return(s=i.line.color)&&x.opacity(s)?s:i.fillcolor;if("none"===i.mode)return i.fill?i.fillcolor:"";var s,F,N=o.mcc||(i.marker||{}).color,j=o.mlcc||((i.marker||{}).line||{}).color;return(F=N&&x.opacity(N)?N:j&&x.opacity(j)&&(o.mlw||((i.marker||{}).line||{}).width)?j:"")?.3>x.opacity(F)?x.addOpacity(F,.3):F:(s=(i.line||{}).color)&&x.opacity(s)&&_.hasLines(i)&&i.line.width?s:i.fillcolor}},26125:function(i,o,s){"use strict";var x=s(99082).getAxisGroup;i.exports=function(i,o,s,_){var F=o.orientation,N=x(s,o[({v:"x",h:"y"})[F]+"axis"])+F,j=s._alignmentOpts||{},G=_("alignmentgroup"),Z=j[N];Z||(Z=j[N]={});var X=Z[G];X?X.traces.push(o):X=Z[G]={traces:[o],alignmentIndex:Object.keys(Z).length,offsetGroups:{}};var J=_("offsetgroup"),$=X.offsetGroups,ee=$[J];J&&(ee||(ee=$[J]={offsetIndex:Object.keys($).length}),o._offsetIndex=ee.offsetIndex)}},33720:function(i,o,s){"use strict";var x=s(71828),_=s(30211),F=s(73972),N=s(34603),j=s(7901),G=x.fillText;i.exports=function(i,o,s,Z){var X=i.cd,J=X[0].trace,$=i.xa,ee=i.ya,et=$.c2p(o),er=ee.c2p(s),en=[et,er],ei=J.hoveron||"",eo=-1!==J.mode.indexOf("markers")?3:.5,es=!!J.xperiodalignment,el=!!J.yperiodalignment;if(-1!==ei.indexOf("points")){var dxy=function(i){var o=Math.max(eo,i.mrc||0),s=$.c2p(i.x)-et,x=ee.c2p(i.y)-er;return Math.max(Math.sqrt(s*s+x*x)-o,1-eo/o)},ec=_.getDistanceFunction(Z,function(i){if(es){var o=$.c2p(i.xStart),s=$.c2p(i.xEnd);return et>=Math.min(o,s)&&et<=Math.max(o,s)?0:1/0}var x=Math.max(3,i.mrc||0),_=1-1/x,F=Math.abs($.c2p(i.x)-et);return F<x?_*F/x:F-x+_},function(i){if(el){var o=ee.c2p(i.yStart),s=ee.c2p(i.yEnd);return er>=Math.min(o,s)&&er<=Math.max(o,s)?0:1/0}var x=Math.max(3,i.mrc||0),_=1-1/x,F=Math.abs(ee.c2p(i.y)-er);return F<x?_*F/x:F-x+_},dxy);if(_.getClosest(X,ec,i),!1!==i.index){var eu=X[i.index],ef=$.c2p(eu.x,!0),eh=ee.c2p(eu.y,!0),ed=eu.mrc||1;i.index=eu.i;var ep=X[0].t.orientation,eg=ep&&(eu.sNorm||eu.s),em="h"===ep?eg:void 0!==eu.orig_x?eu.orig_x:eu.x,ey="v"===ep?eg:void 0!==eu.orig_y?eu.orig_y:eu.y;return x.extendFlat(i,{color:N(J,eu),x0:ef-ed,x1:ef+ed,xLabelVal:em,y0:eh-ed,y1:eh+ed,yLabelVal:ey,spikeDistance:dxy(eu),hovertemplate:J.hovertemplate}),G(eu,J,i),F.getComponentMethod("errorbars","hoverInfo")(eu,J,i),[i]}}if(-1!==ei.indexOf("fills")&&J._polygons){var ev,ex,e_,ew,eT,ek,eA,eS,eM,eC=J._polygons,eE=[],eL=!1,eP=1/0,eI=-1/0,eO=1/0,eD=-1/0;for(ev=0;ev<eC.length;ev++)(e_=eC[ev]).contains(en)&&(eL=!eL,eE.push(e_),eO=Math.min(eO,e_.ymin),eD=Math.max(eD,e_.ymax));if(eL){var eR=((eO=Math.max(eO,0))+(eD=Math.min(eD,ee._length)))/2;for(ev=0;ev<eE.length;ev++)for(ex=1,ew=eE[ev].pts;ex<ew.length;ex++)(eS=ew[ex-1][1])>eR!=(eM=ew[ex][1])>=eR&&(ek=ew[ex-1][0],eA=ew[ex][0],eM-eS&&(eP=Math.min(eP,eT=ek+(eA-ek)*(eR-eS)/(eM-eS)),eI=Math.max(eI,eT)));eP=Math.max(eP,0),eI=Math.min(eI,$._length);var eB=j.defaultLine;return j.opacity(J.fillcolor)?eB=J.fillcolor:j.opacity((J.line||{}).color)&&(eB=J.line.color),x.extendFlat(i,{distance:i.maxHoverDistance,x0:eP,x1:eI,y0:eR,y1:eR,color:eB,hovertemplate:!1}),delete i.index,J.text&&!Array.isArray(J.text)?i.text=String(J.text):i.text=J.name,[i]}}}},67368:function(i,o,s){"use strict";var x=s(34098);i.exports={hasLines:x.hasLines,hasMarkers:x.hasMarkers,hasText:x.hasText,isBubble:x.isBubble,attributes:s(82196),layoutAttributes:s(21479),supplyDefaults:s(17438),crossTraceDefaults:s(34936),supplyLayoutDefaults:s(79334),calc:s(47761).calc,crossTraceCalc:s(72626),arraysToCalcdata:s(75225),plot:s(32663),colorbar:s(4898),formatLabels:s(8225),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(33720),selectPoints:s(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:s(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(i){"use strict";i.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(i,o,s){"use strict";var x=s(71828),_=s(21479);i.exports=function(i,o){var s,F="group"===o.barmode;"group"===o.scattermode&&(s=F?o.bargap:.2,x.coerce(i,o,_,"scattergap",s))}},11058:function(i,o,s){"use strict";var x=s(71828).isArrayOrTypedArray,_=s(52075).hasColorscale,F=s(1586);i.exports=function(i,o,s,N,j,G){G||(G={});var Z=(i.marker||{}).color;j("line.color",s),_(i,"line")?F(i,o,N,j,{prefix:"line.",cLetter:"c"}):j("line.color",!x(Z)&&Z||s),j("line.width"),G.noDash||j("line.dash"),G.backoff&&j("line.backoff")}},34621:function(i,o,s){"use strict";var x=s(91424),_=s(50606),F=_.BADNUM,N=_.LOG_CLIP,j=N+.5,G=N-.5,Z=s(71828),X=Z.segmentsIntersect,J=Z.constrain,$=s(47581);i.exports=function(i,o){var s,_,N,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek=o.trace||{},eA=o.xaxis,eS=o.yaxis,eM="log"===eA.type,eC="log"===eS.type,eE=eA._length,eL=eS._length,eP=o.backoff,eI=ek.marker,eO=o.connectGaps,eD=o.baseTolerance,eR=o.shape,eB="linear"===eR,ez=ek.fill&&"none"!==ek.fill,eF=[],eN=$.minTolerance,ej=i.length,eU=Array(ej),eV=0;function getPt(s){var x=i[s];if(!x)return!1;var _=o.linearized?eA.l2p(x.x):eA.c2p(x.x),N=o.linearized?eS.l2p(x.y):eS.c2p(x.y);if(_===F){if(eM&&(_=eA.c2p(x.x,!0)),_===F)return!1;eC&&N===F&&(_*=Math.abs(eA._m*eL*(eA._m>0?j:G)/(eS._m*eE*(eS._m>0?j:G)))),_*=1e3}if(N===F){if(eC&&(N=eS.c2p(x.y,!0)),N===F)return!1;N*=1e3}return[_,N]}function crossesViewport(i,o,s,x){var _=s-i,F=x-o,N=.5-i,j=.5-o,G=_*_+F*F,Z=_*N+F*j;if(Z>0&&Z<G){var X=N*F-j*_;if(X*X<G)return!0}}function getTolerance(i,o){var s=i[0]/eE,x=i[1]/eL,_=Math.max(0,-s,s-1,-x,x-1);return _&&void 0!==ep&&crossesViewport(s,x,ep,eg)&&(_=0),_&&o&&crossesViewport(s,x,o[0]/eE,o[1]/eL)&&(_=0),(1+$.toleranceGrowth*_)*eD}function ptDist(i,o){var s=i[0]-o[0],x=i[1]-o[1];return Math.sqrt(s*s+x*x)}var eH=$.maxScreensAway,eG=-eE*eH,eW=eE*(1+eH),eZ=-eL*eH,eY=eL*(1+eH),eX=[[eG,eZ,eW,eZ],[eW,eZ,eW,eY],[eW,eY,eG,eY],[eG,eY,eG,eZ]];function onlyConstrainedPoint(i){if(i[0]<eG||i[0]>eW||i[1]<eZ||i[1]>eY)return[J(i[0],eG,eW),J(i[1],eZ,eY)]}function sameEdge(i,o){if(i[0]===o[0]&&(i[0]===eG||i[0]===eW)||i[1]===o[1]&&(i[1]===eZ||i[1]===eY))return!0}function getABAEdgeIntersections(i,o,s){return function(x,_){var F,N=onlyConstrainedPoint(x),j=onlyConstrainedPoint(_),G=[];if(N&&j&&sameEdge(N,j))return G;N&&G.push(N),j&&G.push(j);var X=2*Z.constrain((x[i]+_[i])/2,o,s)-((N||x)[i]+(j||_)[i]);return X&&(F=N&&j?X>0==N[i]>j[i]?N:j:N||j,F[i]+=X),G}}function updateEdge(i){var o=i[0],s=i[1],x=o===eU[eV-1][0],_=s===eU[eV-1][1];if(!x||!_){if(eV>1){var F=o===eU[eV-2][0],N=s===eU[eV-2][1];x&&(o===eG||o===eW)&&F?N?eV--:eU[eV-1]=i:_&&(s===eZ||s===eY)&&N?F?eV--:eU[eV-1]=i:eU[eV++]=i}else eU[eV++]=i}}function updateEdgesForReentry(i){eU[eV-1][0]!==i[0]&&eU[eV-1][1]!==i[1]&&updateEdge([ev,ex]),updateEdge(i),e_=null,ev=ex=0}"linear"===eR||"spline"===eR?eT=function(i,o){for(var s=[],x=0,_=0;_<4;_++){var F=eX[_],N=X(i[0],i[1],o[0],o[1],F[0],F[1],F[2],F[3]);N&&(!x||Math.abs(N.x-s[0][0])>1||Math.abs(N.y-s[0][1])>1)&&(N=[N.x,N.y],x&&ptDist(N,i)<ptDist(s[0],i)?s.unshift(N):s.push(N),x++)}return s}:"hv"===eR||"vh"===eR?eT=function(i,o){var s=[],x=onlyConstrainedPoint(i),_=onlyConstrainedPoint(o);return x&&_&&sameEdge(x,_)||(x&&s.push(x),_&&s.push(_)),s}:"hvh"===eR?eT=getABAEdgeIntersections(0,eG,eW):"vhv"===eR&&(eT=getABAEdgeIntersections(1,eZ,eY));var eK=Z.isArrayOrTypedArray(eI);function addPt(o){if(o&&eP&&(o.i=s,o.d=i,o.trace=ek,o.marker=eK?eI[o.i]:eI,o.backoff=eP),ep=o[0]/eE,eg=o[1]/eL,em=o[0]<eG?eG:o[0]>eW?eW:0,ey=o[1]<eZ?eZ:o[1]>eY?eY:0,em||ey){if(eV){if(e_){var x,_,F,N=eT(e_,o);N.length>1&&(updateEdgesForReentry(N[0]),eU[eV++]=N[1])}else ew=eT(eU[eV-1],o)[0],eU[eV++]=ew}else eU[eV++]=[em||o[0],ey||o[1]];var j=eU[eV-1];em&&ey&&(j[0]!==em||j[1]!==ey)?(e_&&(ev!==em&&ex!==ey?ev&&ex?updateEdge((x=e_,_=o[0]-x[0],F=(o[1]-x[1])/_,(x[1]*o[0]-o[1]*x[0])/_>0?[F>0?eG:eW,eY]:[F>0?eW:eG,eZ])):updateEdge([ev||em,ex||ey]):ev&&ex&&updateEdge([ev,ex])),updateEdge([em,ey])):ev-em&&ex-ey&&updateEdge([em||ev,ey||ex]),e_=o,ev=em,ex=ey}else e_&&updateEdgesForReentry(eT(e_,o)[0]),eU[eV++]=o}for(s=0;s<ej;s++)if(_=getPt(s)){for(eV=0,e_=null,addPt(_),s++;s<ej;s++){if(!(ee=getPt(s))){if(eO)continue;break}if(!eB||!o.simplify){addPt(ee);continue}var eJ=getPt(s+1);if(es=ptDist(ee,_),!(!(ez&&(0===eV||eV===ej-1))&&es<getTolerance(ee,eJ)*eN)){for(ei=[(ee[0]-_[0])/es,(ee[1]-_[1])/es],et=_,el=es,ec=ef=eh=0,en=!1,N=ee,s++;s<i.length;s++){if(er=eJ,eJ=getPt(s+1),!er){if(eO)continue;break}if(ef=Math.min(ef,ed=(eo=[er[0]-_[0],er[1]-_[1]])[0]*ei[1]-eo[1]*ei[0]),(eh=Math.max(eh,ed))-ef>getTolerance(er,eJ))break;N=er,(eu=eo[0]*ei[0]+eo[1]*ei[1])>el?(el=eu,ee=er,en=!1):eu<ec&&(ec=eu,et=er,en=!0)}if(en?(addPt(ee),N!==et&&addPt(et)):(et!==_&&addPt(et),N!==ee&&addPt(ee)),addPt(N),s>=i.length||!er)break;addPt(er),_=er}}e_&&updateEdge([ev||e_[0],ex||e_[1]]),eF.push(eU.slice(0,eV))}var e$=eR.slice(eR.length-1);if(eP&&"h"!==e$&&"v"!==e$){for(var eQ=!1,e0=-1,e1=[],e2=0;e2<eF.length;e2++)for(var e3=0;e3<eF[e2].length-1;e3++){var e5=eF[e2][e3],e4=eF[e2][e3+1],e6=x.applyBackoff(e4,e5);(e6[0]!==e4[0]||e6[1]!==e4[1])&&(eQ=!0),e1[e0+1]||(e1[++e0]=[e5,[e6[0],e6[1]]])}return eQ?e1:eF}return eF}},94039:function(i){"use strict";i.exports=function(i,o,s){"spline"===s("line.shape")&&s("line.smoothing")}},68687:function(i){"use strict";var o={tonextx:1,tonexty:1,tonext:1};i.exports=function(i,s,x){var _,F,N,j,G,Z={},X=!1,J=-1,$=0,ee=-1;for(F=0;F<x.length;F++)(N=(_=x[F][0].trace).stackgroup||"")?N in Z?G=Z[N]:(G=Z[N]=$,$++):_.fill in o&&ee>=0?G=ee:(G=ee=$,$++),G<J&&(X=!0),_._groupIndex=J=G;var et=x.slice();X&&et.sort(function(i,o){var s=i[0].trace,x=o[0].trace;return s._groupIndex-x._groupIndex||s.index-x.index});var er={};for(F=0;F<et.length;F++)N=(_=et[F][0].trace).stackgroup||"",!0===_.visible?(_._nexttrace=null,_.fill in o&&(j=er[N],_._prevtrace=j||null,j&&(j._nexttrace=_)),_._ownfill=_.fill&&("tozero"===_.fill.substr(0,6)||"toself"===_.fill||"to"===_.fill.substr(0,2)&&!_._prevtrace),er[N]=_):_._prevtrace=_._nexttrace=_._ownfill=null;return et}},39984:function(i,o,s){"use strict";var x=s(92770);i.exports=function(i,o){o||(o=2);var s=i.marker,_=s.sizeref||1,F=s.sizemin||0,N="area"===s.sizemode?function(i){return Math.sqrt(i/_)}:function(i){return i/_};return function(i){var s=N(i/o);return x(s)&&s>0?Math.max(s,F):0}}},4898:function(i){"use strict";i.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(i,o,s){"use strict";var x=s(7901),_=s(52075).hasColorscale,F=s(1586),N=s(34098);i.exports=function(i,o,s,j,G,Z){var X=N.isBubble(i),J=(i.line||{}).color;Z=Z||{},J&&(s=J),G("marker.symbol"),G("marker.opacity",X?.7:1),G("marker.size"),Z.noAngle||(G("marker.angle"),Z.noAngleRef||G("marker.angleref"),Z.noStandOff||G("marker.standoff")),G("marker.color",s),_(i,"marker")&&F(i,o,j,G,{prefix:"marker.",cLetter:"c"}),Z.noSelect||(G("selected.marker.color"),G("unselected.marker.color"),G("selected.marker.size"),G("unselected.marker.size")),Z.noLine||(G("marker.line.color",J&&!Array.isArray(J)&&o.marker.color!==J?J:X?x.background:x.defaultLine),_(i,"marker.line")&&F(i,o,j,G,{prefix:"marker.line.",cLetter:"c"}),G("marker.line.width",X?1:0)),X&&(G("marker.sizeref"),G("marker.sizemin"),G("marker.sizemode")),Z.gradient&&"none"!==G("marker.gradient.type")&&G("marker.gradient.color")}},73927:function(i,o,s){"use strict";var x=s(71828).dateTick0,_=s(50606).ONEWEEK;function getPeriod0Dflt(i,o){return i%_==0?x(o,1):x(o,0)}i.exports=function(i,o,s,x,_){if(_||(_={x:!0,y:!0}),_.x){var F=x("xperiod");F&&(x("xperiod0",getPeriod0Dflt(F,o.xcalendar)),x("xperiodalignment"))}if(_.y){var N=x("yperiod");N&&(x("yperiod0",getPeriod0Dflt(N,o.ycalendar)),x("yperiodalignment"))}}},32663:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(71828),N=F.ensureSingle,j=F.identity,G=s(91424),Z=s(34098),X=s(34621),J=s(68687),$=s(61082).tester;function plotOne(i,o,s,J,ee,et,er){var en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg=i._context.staticPlot;(function(i,o,s,_,N){var j=s.xaxis,G=s.yaxis,X=x.extent(F.simpleMap(j.range,j.r2c)),J=x.extent(F.simpleMap(G.range,G.r2c)),$=_[0].trace;if(Z.hasMarkers($)){var ee=$.marker.maxdisplayed;if(0!==ee){var et=_.filter(function(i){return i.x>=X[0]&&i.x<=X[1]&&i.y>=J[0]&&i.y<=J[1]}),er=Math.ceil(et.length/ee),en=0;N.forEach(function(i,s){var x=i[0].trace;Z.hasMarkers(x)&&x.marker.maxdisplayed>0&&s<o&&en++});var ei=Math.round(en*er/3+Math.floor(en/3)*er/7.1);_.forEach(function(i){delete i.vis}),et.forEach(function(i,o){0===Math.round((o+ei)%er)&&(i.vis=!0)})}}})(0,o,s,J,ee);var em=!!er&&er.duration>0;function transition(i){return em?i.transition():i}var ey=s.xaxis,ev=s.yaxis,ex=J[0].trace,e_=ex.line,ew=x.select(et),eT=N(ew,"g","errorbars"),ek=N(ew,"g","lines"),eA=N(ew,"g","points"),eS=N(ew,"g","text");if(_.getComponentMethod("errorbars","plot")(i,eT,s,er),!0===ex.visible){transition(ew).style("opacity",ex.opacity);var eM=ex.fill.charAt(ex.fill.length-1);"x"!==eM&&"y"!==eM&&(eM=""),J[0][s.isRangePlot?"nodeRangePlot3":"node3"]=ew;var eC="",eE=[],eL=ex._prevtrace;eL&&(eC=eL._prevRevpath||"",eo=eL._nextFill,eE=eL._polygons);var eP="",eI="",eO=[],eD=F.noop;if(ei=ex._ownFill,Z.hasLines(ex)||"none"!==ex.fill){for(eo&&eo.datum(J),-1!==["hv","vh","hvh","vhv"].indexOf(e_.shape)?(ec=G.steps(e_.shape),eu=G.steps(e_.shape.split("").reverse().join(""))):ec=eu="spline"===e_.shape?function(i){var o=i[i.length-1];return i.length>1&&i[0][0]===o[0]&&i[0][1]===o[1]?G.smoothclosed(i.slice(1),e_.smoothing):G.smoothopen(i,e_.smoothing)}:function(i){return"M"+i.join("L")},en=0,eO=X(J,{xaxis:ey,yaxis:ev,trace:ex,connectGaps:ex.connectgaps,baseTolerance:Math.max(e_.width||1,3)/4,shape:e_.shape,backoff:e_.backoff,simplify:e_.simplify,fill:ex.fill}),ep=ex._polygons=Array(eO.length);en<eO.length;en++)ex._polygons[en]=$(eO[en]);eO.length&&(ef=eO[0][0],ed=(eh=eO[eO.length-1])[eh.length-1]),eD=function(i){return function(o){if(es=ec(o),el=eu(o.reverse()),eP?eM?(eP+="L"+es.substr(1),eI=el+"L"+eI.substr(1)):(eP+="Z"+es,eI=el+"Z"+eI):(eP=es,eI=el),Z.hasLines(ex)){var s=x.select(this);if(s.datum(J),i)transition(s.style("opacity",0).attr("d",es).call(G.lineGroupStyle)).style("opacity",1);else{var _=transition(s);_.attr("d",es),G.singleLineStyle(J,_)}}}}}var eR=ek.selectAll(".js-line").data(eO);transition(eR.exit()).style("opacity",0).remove(),eR.each(eD(!1)),eR.enter().append("path").classed("js-line",!0).style("vector-effect",eg?"none":"non-scaling-stroke").call(G.lineGroupStyle).each(eD(!0)),G.setClipUrl(eR,s.layerClipId,i),eO.length?(ei?(ei.datum(J),ef&&ed&&(eM?("y"===eM?ef[1]=ed[1]=ev.c2p(0,!0):"x"===eM&&(ef[0]=ed[0]=ey.c2p(0,!0)),transition(ei).attr("d","M"+ed+"L"+ef+"L"+eP.substr(1)).call(G.singleFillStyle,i)):transition(ei).attr("d",eP+"Z").call(G.singleFillStyle,i))):eo&&("tonext"===ex.fill.substr(0,6)&&eP&&eC?("tonext"===ex.fill?transition(eo).attr("d",eP+"Z"+eC+"Z").call(G.singleFillStyle,i):transition(eo).attr("d",eP+"L"+eC.substr(1)+"Z").call(G.singleFillStyle,i),ex._polygons=ex._polygons.concat(eE)):(clearFill(eo),ex._polygons=null)),ex._prevRevpath=eI,ex._prevPolygons=ep):(ei?clearFill(ei):eo&&clearFill(eo),ex._polygons=ex._prevRevpath=ex._prevPolygons=null),eA.datum(J),eS.datum(J),function(o,_,F){var N,X,J=F[0].trace,$=Z.hasMarkers(J),ee=Z.hasText(J),et=function(i){if(i.ids)return keyFunc}(J),er=hideFilter,en=hideFilter;if($||ee){var ei=j,eo=J.stackgroup,es=eo&&"infer zero"===i._fullLayout._scatterStackOpts[ey._id+ev._id][eo].stackgaps;J.marker.maxdisplayed||J._needsCull?ei=es?visFilterWithGaps:visFilter:eo&&!es&&(ei=gapFilter),$&&(er=ei),ee&&(en=ei)}var el=(N=o.selectAll("path.point").data(er,et)).enter().append("path").classed("point",!0);em&&el.call(G.pointStyle,J,i).call(G.translatePoints,ey,ev).style("opacity",0).transition().style("opacity",1),N.order(),$&&(X=G.makePointStyleFns(J)),N.each(function(o){var _=x.select(this),F=transition(_);G.translatePoint(o,F,ey,ev)?(G.singlePointStyle(o,F,J,X,i),s.layerClipId&&G.hideOutsideRangePoint(o,F,ey,ev,J.xcalendar,J.ycalendar),J.customdata&&_.classed("plotly-customdata",null!==o.data&&void 0!==o.data)):F.remove()}),em?N.exit().transition().style("opacity",0).remove():N.exit().remove(),(N=_.selectAll("g").data(en,et)).enter().append("g").classed("textpoint",!0).append("text"),N.order(),N.each(function(i){var o=x.select(this),_=transition(o.select("text"));G.translatePoint(i,_,ey,ev)?s.layerClipId&&G.hideOutsideRangePoint(i,o,ey,ev,J.xcalendar,J.ycalendar):o.remove()}),N.selectAll("text").call(G.textPointStyle,J,i).each(function(i){var o=ey.c2p(i.x),s=ev.c2p(i.y);x.select(this).selectAll("tspan.line").each(function(){transition(x.select(this)).attr({x:o,y:s})})}),N.exit().remove()}(eA,eS,J);var eB=!1===ex.cliponaxis?null:s.layerClipId;G.setClipUrl(eA,eB,i),G.setClipUrl(eS,eB,i)}function clearFill(i){transition(i).attr("d","M0,0Z")}function visFilter(i){return i.filter(function(i){return!i.gap&&i.vis})}function visFilterWithGaps(i){return i.filter(function(i){return i.vis})}function gapFilter(i){return i.filter(function(i){return!i.gap})}function keyFunc(i){return i.id}function hideFilter(){return!1}}i.exports=function(i,o,s,_,F,Z){var X,$,ee=!F,et=!!F&&F.duration>0,er=J(i,o,s);(X=_.selectAll("g.trace").data(er,function(i){return i[0].trace.uid})).enter().append("g").attr("class",function(i){return"trace scatter trace"+i[0].trace.uid}).style("stroke-miterlimit",2),X.order(),function(i,o,s){o.each(function(o){var _=N(x.select(this),"g","fills");G.setClipUrl(_,s.layerClipId,i);var F=o[0].trace,Z=[];F._ownfill&&Z.push("_ownFill"),F._nexttrace&&Z.push("_nextFill");var X=_.selectAll("g").data(Z,j);X.enter().append("g"),X.exit().each(function(i){F[i]=null}).remove(),X.order().each(function(i){F[i]=N(x.select(this),"path","js-fill")})})}(i,X,o),et?(Z&&($=Z()),x.transition().duration(F.duration).ease(F.easing).each("end",function(){$&&$()}).each("interrupt",function(){$&&$()}).each(function(){_.selectAll("g.trace").each(function(s,x){plotOne(i,x,o,s,er,this,F)})})):X.each(function(s,x){plotOne(i,x,o,s,er,this,F)}),ee&&X.exit().remove(),_.selectAll("path:not([d])").remove()}},98002:function(i,o,s){"use strict";var x=s(34098);i.exports=function(i,o){var s,_,F,N,j=i.cd,G=i.xaxis,Z=i.yaxis,X=[],J=j[0].trace;if(!x.hasMarkers(J)&&!x.hasText(J))return[];if(!1===o)for(s=0;s<j.length;s++)j[s].selected=0;else for(s=0;s<j.length;s++)_=j[s],F=G.c2p(_.x),N=Z.c2p(_.y),null!==_.i&&o.contains([F,N],!1,s,i)?(X.push({pointNumber:_.i,x:G.c2d(_.x),y:Z.c2d(_.y)}),_.selected=1):_.selected=0;return X}},565:function(i){"use strict";var o=["orientation","groupnorm","stackgaps"];i.exports=function(i,s,x,_){var F=x._scatterStackOpts,N=_("stackgroup");if(N){var j=s.xaxis+s.yaxis,G=F[j];G||(G=F[j]={});var Z=G[N],X=!1;Z?Z.traces.push(s):(Z=G[N]={traceIndices:[],traces:[s]},X=!0);for(var J={orientation:s.x&&!s.y?"h":"v"},$=0;$<o.length;$++){var ee=o[$],et=ee+"Found";if(!Z[et]){var er=void 0!==i[ee],en="orientation"===ee;if((er||X)&&(Z[ee]=_(ee,J[ee]),en&&(Z.fillDflt="h"===Z[ee]?"tonextx":"tonexty"),er&&(Z[et]=!0,!X&&(delete Z.traces[0][ee],en))))for(var ei=0;ei<Z.traces.length-1;ei++){var eo=Z.traces[ei];eo._input.fill!==eo.fill&&(eo.fill=Z.fillDflt)}}}return Z}}},16296:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(73972);function stylePoints(i,o,s){_.pointStyle(i.selectAll("path.point"),o,s)}function styleText(i,o,s){_.textPointStyle(i.selectAll("text"),o,s)}i.exports={style:function(i){var o=x.select(i).selectAll("g.trace.scatter");o.style("opacity",function(i){return i[0].trace.opacity}),o.selectAll("g.points").each(function(o){stylePoints(x.select(this),o.trace||o[0].trace,i)}),o.selectAll("g.text").each(function(o){styleText(x.select(this),o.trace||o[0].trace,i)}),o.selectAll("g.trace path.js-line").call(_.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(_.fillGroupStyle,i),F.getComponentMethod("errorbars","style")(o)},stylePoints:stylePoints,styleText:styleText,styleOnSelect:function(i,o,s){var x=o[0].trace;x.selectedpoints?(_.selectedPointStyle(s.selectAll("path.point"),x),_.selectedTextStyle(s.selectAll("text"),x)):(stylePoints(s,x,i),styleText(s,x,i))}}},34098:function(i,o,s){"use strict";var x=s(71828);i.exports={hasLines:function(i){return i.visible&&i.mode&&-1!==i.mode.indexOf("lines")},hasMarkers:function(i){return i.visible&&(i.mode&&-1!==i.mode.indexOf("markers")||"splom"===i.type)},hasText:function(i){return i.visible&&i.mode&&-1!==i.mode.indexOf("text")},isBubble:function(i){return x.isPlainObject(i.marker)&&x.isArrayOrTypedArray(i.marker.size)}}},82410:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o,s,_,F){F=F||{},_("textposition"),x.coerceFont(_,"textfont",F.font||s.font),F.noSelect||(_("selected.textfont.color"),_("unselected.textfont.color"))}},67513:function(i,o,s){"use strict";var x=s(71828),_=s(73972);i.exports=function(i,o,s,F){var N,j=F("x"),G=F("y");if(_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],s),j){var Z=x.minRowLength(j);G?N=Math.min(Z,x.minRowLength(G)):(N=Z,F("y0"),F("dy"))}else{if(!G)return 0;N=x.minRowLength(G),F("x0"),F("dx")}return o._length=N,N}},44542:function(i,o,s){"use strict";var x=s(82196),_=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(5386).si,G=s(9012),Z=s(29659),X=s(87381),J=s(1426).extendFlat,$=s(30962).overrideAll,ee=s(78607),et=x.line,er=x.marker,en=er.line,ei=J({width:et.width,dash:{valType:"enumerated",values:ee(Z),dflt:"solid"}},_("line"));function makeProjectionAttr(i){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var eo=i.exports=$({x:x.x,y:x.y,z:{valType:"data_array"},text:J({},x.text,{}),texttemplate:j({},{}),hovertext:J({},x.hovertext,{}),hovertemplate:N(),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),mode:J({},x.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:makeProjectionAttr("x"),y:makeProjectionAttr("y"),z:makeProjectionAttr("z")},connectgaps:x.connectgaps,line:ei,marker:J({symbol:{valType:"enumerated",values:ee(X),dflt:"circle",arrayOk:!0},size:J({},er.size,{dflt:8}),sizeref:er.sizeref,sizemin:er.sizemin,sizemode:er.sizemode,opacity:J({},er.opacity,{arrayOk:!1}),colorbar:er.colorbar,line:J({width:J({},en.width,{arrayOk:!1})},_("marker.line"))},_("marker")),textposition:J({},x.textposition,{dflt:"top center"}),textfont:{color:x.textfont.color,size:x.textfont.size,family:J({},x.textfont.family,{arrayOk:!1})},opacity:G.opacity,hoverinfo:J({},G.hoverinfo)},"calc","nested");eo.x.editType=eo.y.editType=eo.z.editType="calc+clearAxisTypes"},36563:function(i,o,s){"use strict";var x=s(75225),_=s(36922);i.exports=function(i,o){var s=[{x:!1,y:!1,trace:o,t:{}}];return x(s,o),_(i,o),s}},67336:function(i,o,s){"use strict";var x=s(73972);function calculateAxisErrors(i,o,s,_){if(!o||!o.visible)return null;for(var F=x.getComponentMethod("errorbars","makeComputeError")(o),N=Array(i.length),j=0;j<i.length;j++){var G=F(+i[j],j);if("log"===_.type){var Z=_.c2l(i[j]),X=i[j]-G[0],J=i[j]+G[1];if(N[j]=[(_.c2l(X,!0)-Z)*s,(_.c2l(J,!0)-Z)*s],X>0){var $=_.c2l(X);_._lowerLogErrorBound||(_._lowerLogErrorBound=$),_._lowerErrorBound=Math.min(_._lowerLogErrorBound,$)}}else N[j]=[-G[0]*s,G[1]*s]}return N}i.exports=function(i,o,s){var x=[calculateAxisErrors(i.x,i.error_x,o[0],s.xaxis),calculateAxisErrors(i.y,i.error_y,o[1],s.yaxis),calculateAxisErrors(i.z,i.error_z,o[2],s.zaxis)],_=function(i){for(var o=0;o<i.length;o++)if(i[o])return i[o].length;return 0}(x);if(0===_)return null;for(var F=Array(_),N=0;N<_;N++){for(var j=[[0,0,0],[0,0,0]],G=0;G<3;G++)if(x[G])for(var Z=0;Z<2;Z++)j[Z][G]=x[G][N][Z];F[N]=j}return F}},58925:function(i,o,s){"use strict";var x=s(9330).gl_line3d,_=s(9330).gl_scatter3d,F=s(9330).gl_error3d,N=s(9330).gl_mesh3d,j=s(9330).delaunay_triangulate,G=s(71828),Z=s(78614),X=s(81697).formatColor,J=s(39984),$=s(29659),ee=s(87381),et=s(89298),er=s(23469).appendArrayPointValue,en=s(67336);function LineWithMarkers(i,o){this.scene=i,this.uid=o,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var ei=LineWithMarkers.prototype;function parseAlignmentX(i){return null==i?0:i.indexOf("left")>-1?-1:i.indexOf("right")>-1?1:0}function parseAlignmentY(i){return null==i?0:i.indexOf("top")>-1?-1:i.indexOf("bottom")>-1?1:0}function calculateSize(i,o){return o(4*i)}function calculateSymbol(i){return ee[i]}function formatParam(i,o,s,x,_){var F=null;if(G.isArrayOrTypedArray(i)){F=[];for(var N=0;N<o;N++)void 0===i[N]?F[N]=x:F[N]=s(i[N],_)}else F=s(i,G.identity);return F}function _arrayToColor(i){if(G.isArrayOrTypedArray(i)){var o=i[0];return G.isArrayOrTypedArray(o)&&(i=o),"rgb("+i.slice(0,3).map(function(i){return Math.round(255*i)})+")"}return null}function arrayToColor(i){return G.isArrayOrTypedArray(i)?4===i.length&&"number"==typeof i[0]?_arrayToColor(i):i.map(_arrayToColor):null}ei.handlePick=function(i){if(i.object&&(i.object===this.linePlot||i.object===this.delaunayMesh||i.object===this.textMarkers||i.object===this.scatterPlot)){var o=i.index=i.data.index;return i.object.highlight&&i.object.highlight(null),this.scatterPlot&&(i.object=this.scatterPlot,this.scatterPlot.highlight(i.data)),i.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[o]||0===this.textLabels[o])&&(i.textLabel=this.textLabels[o]):i.textLabel=this.textLabels),i.traceCoordinate=[this.data.x[o],this.data.y[o],this.data.z[o]],!0}},ei.update=function(i){var o,s,ee,ei,eo=this.scene.glplot.gl,es=$.solid;this.data=i;var el=function(i,o){var s,x,_,F,N,j,$=[],ee=i.fullSceneLayout,ei=i.dataScale,eo=ee.xaxis,es=ee.yaxis,el=ee.zaxis,ec=o.marker,eu=o.line,ef=o.x||[],eh=o.y||[],ed=o.z||[],ep=ef.length,eg=o.xcalendar,em=o.ycalendar,ey=o.zcalendar;for(N=0;N<ep;N++)s=eo.d2l(ef[N],0,eg)*ei[0],x=es.d2l(eh[N],0,em)*ei[1],_=el.d2l(ed[N],0,ey)*ei[2],$[N]=[s,x,_];if(Array.isArray(o.text))j=o.text;else if(void 0!==o.text)for(N=0,j=Array(ep);N<ep;N++)j[N]=o.text;function formatter(i,o){var s=ee[i];return et.tickText(s,s.d2l(o),!0).text}var ev=o.texttemplate;if(ev){var ex=i.fullLayout._d3locale,e_=Array.isArray(ev),ew=e_?Math.min(ev.length,ep):ep,eT=e_?function(i){return ev[i]}:function(){return ev};for(N=0,j=Array(ew);N<ew;N++){var ek={x:ef[N],y:eh[N],z:ed[N]},eA={xLabel:formatter("xaxis",ef[N]),yLabel:formatter("yaxis",eh[N]),zLabel:formatter("zaxis",ed[N])},eS={};er(eS,o,N);var eM=o._meta||{};j[N]=G.texttemplateString(eT(N),eA,ex,eS,ek,eM)}}if(F={position:$,mode:o.mode,text:j},"line"in o&&(F.lineColor=X(eu,1,ep),F.lineWidth=eu.width,F.lineDashes=eu.dash),"marker"in o){var eC=J(o);F.scatterColor=X(ec,1,ep),F.scatterSize=formatParam(ec.size,ep,calculateSize,20,eC),F.scatterMarker=formatParam(ec.symbol,ep,calculateSymbol,""),F.scatterLineWidth=ec.line.width,F.scatterLineColor=X(ec.line,1,ep),F.scatterAngle=0}"textposition"in o&&(F.textOffset=function(i){var o=[0,0];if(Array.isArray(i))for(var s=0;s<i.length;s++)o[s]=[0,0],i[s]&&(o[s][0]=parseAlignmentX(i[s]),o[s][1]=parseAlignmentY(i[s]));else o[0]=parseAlignmentX(i),o[1]=parseAlignmentY(i);return o}(o.textposition),F.textColor=X(o.textfont,1,ep),F.textSize=formatParam(o.textfont.size,ep,G.identity,12),F.textFont=o.textfont.family,F.textAngle=0);var eE=["x","y","z"];for(N=0,F.project=[!1,!1,!1],F.projectScale=[1,1,1],F.projectOpacity=[1,1,1];N<3;++N){var eL=o.projection[eE[N]];(F.project[N]=eL.show)&&(F.projectOpacity[N]=eL.opacity,F.projectScale[N]=eL.scale)}F.errorBounds=en(o,ei,ee);var eP=function(i){for(var o=[0,0,0],s=[[0,0,0],[0,0,0],[0,0,0]],x=[1,1,1],_=0;_<3;_++){var F=i[_];F&&!1!==F.copy_zstyle&&!1!==i[2].visible&&(F=i[2]),F&&F.visible&&(o[_]=F.width/2,s[_]=Z(F.color),x[_]=F.thickness)}return{capSize:o,color:s,lineWidth:x}}([o.error_x,o.error_y,o.error_z]);return F.errorColor=eP.color,F.errorLineWidth=eP.lineWidth,F.errorCapSize=eP.capSize,F.delaunayAxis=o.surfaceaxis,F.delaunayColor=Z(o.surfacecolor),F}(this.scene,i);"mode"in el&&(this.mode=el.mode),"lineDashes"in el&&el.lineDashes in $&&(es=$[el.lineDashes]),this.color=arrayToColor(el.scatterColor)||arrayToColor(el.lineColor),this.dataPoints=el.position,o={gl:this.scene.glplot.gl,position:el.position,color:el.lineColor,lineWidth:el.lineWidth||1,dashes:es[0],dashScale:es[1],opacity:i.opacity,connectGaps:i.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(o):(this.linePlot=x(o),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var ec=i.opacity;if(i.marker&&void 0!==i.marker.opacity&&(ec*=i.marker.opacity),s={gl:this.scene.glplot.gl,position:el.position,color:el.scatterColor,size:el.scatterSize,glyph:el.scatterMarker,opacity:ec,orthographic:!0,lineWidth:el.scatterLineWidth,lineColor:el.scatterLineColor,project:el.project,projectScale:el.projectScale,projectOpacity:el.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(s):(this.scatterPlot=_(s),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),ei={gl:this.scene.glplot.gl,position:el.position,glyph:el.text,color:el.textColor,size:el.textSize,angle:el.textAngle,alignment:el.textOffset,font:el.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:i.opacity},this.textLabels=i.hovertext||i.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(ei):(this.textMarkers=_(ei),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),ee={gl:this.scene.glplot.gl,position:el.position,color:el.errorColor,error:el.errorBounds,lineWidth:el.errorLineWidth,capSize:el.errorCapSize,opacity:i.opacity},this.errorBars?el.errorBounds?this.errorBars.update(ee):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):el.errorBounds&&(this.errorBars=F(ee),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),el.delaunayAxis>=0){var eu=function(i,o,s){var x,_=(s+1)%3,F=(s+2)%3,N=[],G=[];for(x=0;x<i.length;++x){var Z=i[x];!(isNaN(Z[_])||!isFinite(Z[_])||isNaN(Z[F]))&&isFinite(Z[F])&&(N.push([Z[_],Z[F]]),G.push(x))}var X=j(N);for(x=0;x<X.length;++x)for(var J=X[x],$=0;$<J.length;++$)J[$]=G[J[$]];return{positions:i,cells:X,meshColor:o}}(el.position,el.delaunayColor,el.delaunayAxis);eu.opacity=i.opacity,this.delaunayMesh?this.delaunayMesh.update(eu):(eu.gl=eo,this.delaunayMesh=N(eu),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},ei.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},i.exports=function(i,o){var s=new LineWithMarkers(i,o.uid);return s.update(o),s}},21428:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(34098),N=s(49508),j=s(11058),G=s(82410),Z=s(44542);i.exports=function(i,o,s,X){function coerce(s,x){return _.coerce(i,o,Z,s,x)}if(J=0,$=coerce("x"),ee=coerce("y"),et=coerce("z"),x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],X),$&&ee&&et&&(J=Math.min($.length,ee.length,et.length),o._length=o._xlength=o._ylength=o._zlength=J),!J){o.visible=!1;return}coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),coerce("mode"),F.hasLines(o)&&(coerce("connectgaps"),j(i,o,s,X,coerce)),F.hasMarkers(o)&&N(i,o,s,X,coerce,{noSelect:!0,noAngle:!0}),F.hasText(o)&&(coerce("texttemplate"),G(i,o,X,coerce,{noSelect:!0}));var J,$,ee,et,er=(o.line||{}).color,en=(o.marker||{}).color;coerce("surfaceaxis")>=0&&coerce("surfacecolor",er||en);for(var ei=["x","y","z"],eo=0;eo<3;++eo){var es="projection."+ei[eo];coerce(es+".show")&&(coerce(es+".opacity"),coerce(es+".scale"))}var el=x.getComponentMethod("errorbars","supplyDefaults");el(i,o,er||en||s,{axis:"z"}),el(i,o,er||en||s,{axis:"y",inherit:"z"}),el(i,o,er||en||s,{axis:"x",inherit:"z"})}},13551:function(i,o,s){"use strict";i.exports={plot:s(58925),attributes:s(44542),markerSymbols:s(87381),supplyDefaults:s(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:s(36563),moduleType:"trace",name:"scatter3d",basePlotModule:s(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(i,o,s){"use strict";var x=s(82196),_=s(9012),F=s(5386).fF,N=s(5386).si,j=s(50693),G=s(1426).extendFlat,Z=x.marker,X=x.line,J=Z.line;i.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:G({},x.mode,{dflt:"markers"}),text:G({},x.text,{}),texttemplate:N({editType:"plot"},{keys:["a","b","text"]}),hovertext:G({},x.hovertext,{}),line:{color:X.color,width:X.width,dash:X.dash,backoff:X.backoff,shape:G({},X.shape,{values:["linear","spline"]}),smoothing:X.smoothing,editType:"calc"},connectgaps:x.connectgaps,fill:G({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,marker:G({symbol:Z.symbol,opacity:Z.opacity,maxdisplayed:Z.maxdisplayed,angle:Z.angle,angleref:Z.angleref,standoff:Z.standoff,size:Z.size,sizeref:Z.sizeref,sizemin:Z.sizemin,sizemode:Z.sizemode,line:G({width:J.width,editType:"calc"},j("marker.line")),gradient:Z.gradient,editType:"calc"},j("marker")),textfont:x.textfont,textposition:x.textposition,selected:x.selected,unselected:x.unselected,hoverinfo:G({},_.hoverinfo,{flags:["a","b","text","name"]}),hoveron:x.hoveron,hovertemplate:F()}},34618:function(i,o,s){"use strict";var x=s(92770),_=s(36922),F=s(75225),N=s(66279),j=s(47761).calcMarkerSize,G=s(22882);i.exports=function(i,o){var s,Z,X,J=o._carpetTrace=G(i,o);if(J&&J.visible&&"legendonly"!==J.visible){o.xaxis=J.xaxis,o.yaxis=J.yaxis;var $=o._length,ee=Array($),et=!1;for(s=0;s<$;s++)if(Z=o.a[s],X=o.b[s],x(Z)&&x(X)){var er=J.ab2xy(+Z,+X,!0),en=J.isVisible(+Z,+X);en||(et=!0),ee[s]={x:er[0],y:er[1],a:Z,b:X,vis:en}}else ee[s]={x:!1,y:!1};return o._needsCull=et,ee[0].carpet=J,ee[0].trace=o,j(o,$),_(i,o),F(ee,o),N(ee,o),ee}}},98965:function(i,o,s){"use strict";var x=s(71828),_=s(47581),F=s(34098),N=s(49508),j=s(11058),G=s(94039),Z=s(82410),X=s(28908),J=s(97001);i.exports=function(i,o,s,$){function coerce(s,_){return x.coerce(i,o,J,s,_)}coerce("carpet"),o.xaxis="x",o.yaxis="y";var ee=coerce("a"),et=coerce("b"),er=Math.min(ee.length,et.length);if(!er){o.visible=!1;return}o._length=er,coerce("text"),coerce("texttemplate"),coerce("hovertext"),coerce("mode",er<_.PTS_LINESONLY?"lines+markers":"lines"),F.hasLines(o)&&(j(i,o,s,$,coerce,{backoff:!0}),G(i,o,coerce),coerce("connectgaps")),F.hasMarkers(o)&&N(i,o,s,$,coerce,{gradient:!0}),F.hasText(o)&&Z(i,o,$,coerce);var en=[];(F.hasMarkers(o)||F.hasText(o))&&(coerce("marker.maxdisplayed"),en.push("points")),coerce("fill"),"none"===o.fill||(X(i,o,s,coerce),F.hasLines(o)||G(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&en.push("fills"),"fills"!==coerce("hoveron",en.join("+")||"points")&&coerce("hovertemplate"),x.coerceSelectionMarkerOpacity(o,coerce)}},16165:function(i){"use strict";i.exports=function(i,o,s,x,_){var F=x[_];return i.a=F.a,i.b=F.b,i.y=F.y,i}},48953:function(i){"use strict";i.exports=function(i,o){var s={},x=o._carpet,_=x.ab2ij([i.a,i.b]),F=Math.floor(_[0]),N=_[0]-F,j=Math.floor(_[1]),G=_[1]-j,Z=x.evalxy([],F,j,N,G);return s.yLabel=Z[1].toFixed(3),s}},22931:function(i,o,s){"use strict";var x=s(33720),_=s(71828).fillText;i.exports=function(i,o,s,F){var N=x(i,o,s,F);if(N&&!1!==N[0].index){var j=N[0];if(void 0===j.index){var G=1-j.y0/i.ya._length,Z=i.xa._length,X=Z*G/2,J=Z-X;return j.x0=Math.max(Math.min(j.x0,J),X),j.x1=Math.max(Math.min(j.x1,J),X),N}var $=j.cd[j.index];j.a=$.a,j.b=$.b,j.xLabelVal=void 0,j.yLabelVal=void 0;var ee=j.trace,et=ee._carpet,er=ee._module.formatLabels($,ee);j.yLabel=er.yLabel,delete j.text;var en=[];if(!ee.hovertemplate){var ei=($.hi||ee.hoverinfo).split("+");-1!==ei.indexOf("all")&&(ei=["a","b","text"]),-1!==ei.indexOf("a")&&textPart(et.aaxis,$.a),-1!==ei.indexOf("b")&&textPart(et.baxis,$.b),en.push("y: "+j.yLabel),-1!==ei.indexOf("text")&&_($,ee,en),j.extraText=en.join("<br>")}return N}function textPart(i,o){var s;s=i.labelprefix&&i.labelprefix.length>0?i.labelprefix.replace(/ = $/,""):i._hovertitle,en.push(s+": "+o.toFixed(3)+i.labelsuffix)}}},46858:function(i,o,s){"use strict";i.exports={attributes:s(97001),supplyDefaults:s(98965),colorbar:s(4898),formatLabels:s(48953),calc:s(34618),plot:s(1913),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(22931),selectPoints:s(98002),eventData:s(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:s(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(i,o,s){"use strict";var x=s(32663),_=s(89298),F=s(91424);i.exports=function(i,o,s,N){var j,G,Z,X=s[0][0].carpet,J=_.getFromId(i,X.xaxis||"x"),$=_.getFromId(i,X.yaxis||"y"),ee={xaxis:J,yaxis:$,plot:o.plot};for(j=0;j<s.length;j++)(G=s[j][0].trace)._xA=J,G._yA=$;for(x(i,ee,s,N),j=0;j<s.length;j++)G=s[j][0].trace,Z=N.selectAll("g.trace"+G.uid+" .js-line"),F.setClipUrl(Z,s[j][0].carpet._clipPathId,i)}},19316:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(82196),N=s(9012),j=s(50693),G=s(79952).P,Z=s(1426).extendFlat,X=s(30962).overrideAll,J=F.marker,$=F.line,ee=J.line;i.exports=X({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:Z({},F.mode,{dflt:"markers"}),text:Z({},F.text,{}),texttemplate:_({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:Z({},F.hovertext,{}),textfont:F.textfont,textposition:F.textposition,line:{color:$.color,width:$.width,dash:G},connectgaps:F.connectgaps,marker:Z({symbol:J.symbol,opacity:J.opacity,angle:J.angle,angleref:Z({},J.angleref,{values:["previous","up","north"]}),standoff:J.standoff,size:J.size,sizeref:J.sizeref,sizemin:J.sizemin,sizemode:J.sizemode,colorbar:J.colorbar,line:Z({width:ee.width},j("marker.line")),gradient:J.gradient},j("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:F.fillcolor,selected:F.selected,unselected:F.unselected,hoverinfo:Z({},N.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:x()},"calc","nested")},84622:function(i,o,s){"use strict";var x=s(92770),_=s(50606).BADNUM,F=s(36922),N=s(75225),j=s(66279),G=s(71828)._;function isNonBlankString(i){return i&&"string"==typeof i}i.exports=function(i,o){var s,Z=Array.isArray(o.locations),X=Z?o.locations.length:o._length,J=Array(X);s=o.geojson?function(i){return isNonBlankString(i)||x(i)}:isNonBlankString;for(var $=0;$<X;$++){var ee=J[$]={};if(Z){var et=o.locations[$];ee.loc=s(et)?et:null}else{var er=o.lon[$],en=o.lat[$];x(er)&&x(en)?ee.lonlat=[+er,+en]:ee.lonlat=[_,_]}}return N(J,o),F(i,o),j(J,o),X&&(J[0].t={labels:{lat:G(i,"lat:")+" ",lon:G(i,"lon:")+" "}}),J}},10659:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(49508),N=s(11058),j=s(82410),G=s(28908),Z=s(19316);i.exports=function(i,o,s,X){function coerce(s,_){return x.coerce(i,o,Z,s,_)}var J=coerce("locations");if(J&&J.length){var $,ee,et=coerce("geojson");("string"==typeof et&&""!==et||x.isPlainObject(et))&&(ee="geojson-id"),"geojson-id"===coerce("locationmode",ee)&&coerce("featureidkey"),$=J.length}else{var er=coerce("lon")||[],en=coerce("lat")||[];$=Math.min(er.length,en.length)}if(!$){o.visible=!1;return}o._length=$,coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode"),_.hasLines(o)&&(N(i,o,s,X,coerce),coerce("connectgaps")),_.hasMarkers(o)&&F(i,o,s,X,coerce,{gradient:!0}),_.hasText(o)&&(coerce("texttemplate"),j(i,o,X,coerce)),coerce("fill"),"none"!==o.fill&&G(i,o,s,coerce),x.coerceSelectionMarkerOpacity(o,coerce)}},84084:function(i){"use strict";i.exports=function(i,o,s,x,_){i.lon=o.lon,i.lat=o.lat,i.location=o.loc?o.loc:null;var F=x[_];return F.fIn&&F.fIn.properties&&(i.properties=F.fIn.properties),i}},82719:function(i,o,s){"use strict";var x=s(89298);i.exports=function(i,o,s){var _={},F=s[o.geo]._subplot.mockAxis,N=i.lonlat;return _.lonLabel=x.tickText(F,F.c2l(N[0]),!0).text,_.latLabel=x.tickText(F,F.c2l(N[1]),!0).text,_}},14977:function(i,o,s){"use strict";var x=s(30211),_=s(50606).BADNUM,F=s(34603),N=s(71828).fillText,j=s(19316);i.exports=function(i,o,s){var G=i.cd,Z=G[0].trace,X=i.xa,J=i.ya,$=i.subplot,ee=$.projection.isLonLatOverEdges,et=$.project;if(x.getClosest(G,function(i){var x=i.lonlat;if(x[0]===_||ee(x))return 1/0;var F=et(x),N=et([o,s]),j=Math.abs(F[0]-N[0]),G=Math.abs(F[1]-N[1]),Z=Math.max(3,i.mrc||0);return Math.max(Math.sqrt(j*j+G*G)-Z,1-3/Z)},i),!1!==i.index){var er=G[i.index],en=er.lonlat,ei=[X.c2p(en),J.c2p(en)],eo=er.mrc||1;i.x0=ei[0]-eo,i.x1=ei[0]+eo,i.y0=ei[1]-eo,i.y1=ei[1]+eo,i.loc=er.loc,i.lon=en[0],i.lat=en[1];var es={};es[Z.geo]={_subplot:$};var el=Z._module.formatLabels(er,Z,es);return i.lonLabel=el.lonLabel,i.latLabel=el.latLabel,i.color=F(Z,er),i.extraText=function(i,o,s,x){if(!i.hovertemplate){var _,F,G,Z,X=o.hi||i.hoverinfo,J="all"===X?j.hoverinfo.flags:X.split("+"),$=-1!==J.indexOf("location")&&Array.isArray(i.locations),ee=-1!==J.indexOf("lon"),et=-1!==J.indexOf("lat"),er=-1!==J.indexOf("text"),en=[];return $?en.push(o.loc):ee&&et?en.push("("+s.latLabel+"\xb0, "+s.lonLabel+"\xb0)"):ee?en.push(x.lon+(s.lonLabel+"\xb0")):et&&en.push(x.lat+(s.latLabel+"\xb0")),er&&N(o,i,en),en.join("<br>")}}(Z,er,i,G[0].t.labels),i.hovertemplate=Z.hovertemplate,[i]}}},17988:function(i,o,s){"use strict";i.exports={attributes:s(19316),supplyDefaults:s(10659),colorbar:s(4898),formatLabels:s(82719),calc:s(84622),calcGeoJSON:s(89171).calcGeoJSON,plot:s(89171).plot,style:s(33095),styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(14977),eventData:s(84084),selectPoints:s(20548),moduleType:"trace",name:"scattergeo",basePlotModule:s(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(90973).getTopojsonFeatures,N=s(18214),j=s(41327),G=s(71739).findExtremes,Z=s(50606).BADNUM,X=s(47761).calcMarkerSize,J=s(34098),$=s(33095);i.exports={calcGeoJSON:function(i,o){var s,x,_,N,J=i[0].trace,$=o[J.geo],ee=$._subplot,et=J._length;if(Array.isArray(J.locations)){var er=J.locationmode,en="geojson-id"===er?j.extractTraceFeature(i):F(J,ee.topojson);for(s=0;s<et;s++){x=i[s];var ei="geojson-id"===er?x.fOut:j.locationToFeature(er,x.loc,en);x.lonlat=ei?ei.properties.ct:[Z,Z]}}var eo={padded:!0};if("geojson"===$.fitbounds&&"geojson-id"===J.locationmode){var es=j.computeBbox(j.getTraceGeojson(J));_=[es[0],es[2]],N=[es[1],es[3]]}else{for(s=0,_=Array(et),N=Array(et);s<et;s++)x=i[s],_[s]=x.lonlat[0],N[s]=x.lonlat[1];eo.ppad=X(J,et)}J._extremes.lon=G($.lonaxis._ax,_,eo),J._extremes.lat=G($.lataxis._ax,N,eo)},plot:function(i,o,s){var F=o.layers.frontplot.select(".scatterlayer"),j=_.makeTraceGroups(F,s,"trace scattergeo");function removeBADNUM(i,o){i.lonlat[0]===Z&&x.select(o).remove()}j.selectAll("*").remove(),j.each(function(o){var s=x.select(this),F=o[0].trace;if(J.hasLines(F)||"none"!==F.fill){var j=N.calcTraceToLineCoords(o),G="none"!==F.fill?N.makePolygon(j):N.makeLine(j);s.selectAll("path.js-line").data([{geojson:G,trace:F}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}J.hasMarkers(F)&&s.selectAll("path.point").data(_.identity).enter().append("path").classed("point",!0).each(function(i){removeBADNUM(i,this)}),J.hasText(F)&&s.selectAll("g").data(_.identity).enter().append("g").append("text").each(function(i){removeBADNUM(i,this)}),$(i,o)})}}},20548:function(i,o,s){"use strict";var x=s(34098),_=s(50606).BADNUM;i.exports=function(i,o){var s,F,N,j,G,Z=i.cd,X=i.xaxis,J=i.yaxis,$=[],ee=Z[0].trace;if(!x.hasMarkers(ee)&&!x.hasText(ee))return[];if(!1===o)for(G=0;G<Z.length;G++)Z[G].selected=0;else for(G=0;G<Z.length;G++)(F=(s=Z[G]).lonlat)[0]!==_&&(N=X.c2p(F),j=J.c2p(F),o.contains([N,j],null,G,i)?($.push({pointNumber:G,lon:F[0],lat:F[1]}),s.selected=1):s.selected=0);return $}},33095:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(7901),N=s(16296),j=N.stylePoints,G=N.styleText;i.exports=function(i,o){var s,N;o&&(s=o[0].trace,(N=o[0].node3).style("opacity",o[0].trace.opacity),j(N,s,i),G(N,s,i),N.selectAll("path.js-line").style("fill","none").each(function(i){var o=x.select(this),s=i.trace,N=s.line||{};o.call(F.stroke,N.color).call(_.dashLine,N.dash||"",N.width||0),"none"!==s.fill&&o.call(F.fill,s.fillcolor)}))}},42341:function(i,o,s){"use strict";var x=s(9012),_=s(82196),F=s(12663).axisHoverFormat,N=s(50693),j=s(78607),G=s(1426).extendFlat,Z=s(30962).overrideAll,X=s(78232).DASHES,J=_.line,$=_.marker,ee=$.line,et=i.exports=Z({x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:F("x"),yhoverformat:F("y"),text:_.text,hovertext:_.hovertext,textposition:_.textposition,textfont:_.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:J.color,width:J.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:j(X),dflt:"solid"}},marker:G({},N("marker"),{symbol:$.symbol,angle:$.angle,size:$.size,sizeref:$.sizeref,sizemin:$.sizemin,sizemode:$.sizemode,opacity:$.opacity,colorbar:$.colorbar,line:G({},N("marker.line"),{width:ee.width})}),connectgaps:_.connectgaps,fill:G({},_.fill,{dflt:"none"}),fillcolor:_.fillcolor,selected:{marker:_.selected.marker,textfont:_.selected.textfont},unselected:{marker:_.unselected.marker,textfont:_.unselected.textfont},opacity:x.opacity},"calc","nested");et.x.editType=et.y.editType=et.x0.editType=et.y0.editType="calc+clearAxisTypes",et.hovertemplate=_.hovertemplate,et.texttemplate=_.texttemplate},72156:function(i,o,s){"use strict";var x=s(20794);i.exports={moduleType:"trace",name:"scattergl",basePlotModule:s(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:s(42341),supplyDefaults:s(47148),crossTraceDefaults:s(34936),colorbar:s(4898),formatLabels:s(68101),calc:s(45032),hoverPoints:x.hoverPoints,selectPoints:s(58147),meta:{}}},45032:function(i,o,s){"use strict";var x=s(88294),_=s(71828),F=s(41675),N=s(71739).findExtremes,j=s(42973),G=s(47761),Z=G.calcMarkerSize,X=G.calcAxisExpansion,J=G.setFirstScatter,$=s(36922),ee=s(19635),et=s(38967),er=s(50606).BADNUM,en=s(78232).TOO_MANY_POINTS;function expandForErrorBars(i,o,s){var x=i._extremes[o._id],_=N(o,s._bnds,{padded:!0});x.min=x.min.concat(_.min),x.max=x.max.concat(_.max)}i.exports=function(i,o){var s,N,G=i._fullLayout,ei=o._xA=F.getFromId(i,o.xaxis,"x"),eo=o._yA=F.getFromId(i,o.yaxis,"y"),es=G._plots[o.xaxis+o.yaxis],el=o._length,ec=el>=en,eu=2*el,ef={},eh=ei.makeCalcdata(o,"x"),ed=eo.makeCalcdata(o,"y"),ep=j(o,ei,"x",eh),eg=j(o,eo,"y",ed),em=ep.vals,ey=eg.vals;o._x=em,o._y=ey,o.xperiodalignment&&(o._origX=eh,o._xStarts=ep.starts,o._xEnds=ep.ends),o.yperiodalignment&&(o._origY=ed,o._yStarts=eg.starts,o._yEnds=eg.ends);var ev=Array(eu),ex=Array(el);for(s=0;s<el;s++)ev[2*s]=em[s]===er?NaN:em[s],ev[2*s+1]=ey[s]===er?NaN:ey[s],ex[s]=s;if("log"===ei.type)for(s=0;s<eu;s+=2)ev[s]=ei.c2l(ev[s]);if("log"===eo.type)for(s=1;s<eu;s+=2)ev[s]=eo.c2l(ev[s]);ec&&"log"!==ei.type&&"log"!==eo.type?ef.tree=x(ev):ef.ids=ex,$(i,o);var e_=function(i,o,s,x,F,N){var j=ee.style(i,s);if(j.marker&&(j.marker.positions=x),j.line&&x.length>1&&_.extendFlat(j.line,ee.linePositions(i,s,x)),j.errorX||j.errorY){var G=ee.errorBarPositions(i,s,x,F,N);j.errorX&&_.extendFlat(j.errorX,G.x),j.errorY&&_.extendFlat(j.errorY,G.y)}return j.text&&(_.extendFlat(j.text,{positions:x},ee.textPosition(i,s,j.text,j.marker)),_.extendFlat(j.textSel,{positions:x},ee.textPosition(i,s,j.text,j.markerSel)),_.extendFlat(j.textUnsel,{positions:x},ee.textPosition(i,s,j.text,j.markerUnsel))),j}(i,0,o,ev,em,ey),ew=et(i,es);return J(G,o),ec?e_.marker&&(N=e_.marker.sizeAvg||Math.max(e_.marker.size,3)):N=Z(o,el),X(i,o,ei,eo,em,ey,N),e_.errorX&&expandForErrorBars(o,ei,e_.errorX),e_.errorY&&expandForErrorBars(o,eo,e_.errorY),e_.fill&&!ew.fill2d&&(ew.fill2d=!0),e_.marker&&!ew.scatter2d&&(ew.scatter2d=!0),e_.line&&!ew.line2d&&(ew.line2d=!0),(e_.errorX||e_.errorY)&&!ew.error2d&&(ew.error2d=!0),e_.text&&!ew.glText&&(ew.glText=!0),e_.marker&&(e_.marker.snap=el),ew.lineOptions.push(e_.line),ew.errorXOptions.push(e_.errorX),ew.errorYOptions.push(e_.errorY),ew.fillOptions.push(e_.fill),ew.markerOptions.push(e_.marker),ew.markerSelectedOptions.push(e_.markerSel),ew.markerUnselectedOptions.push(e_.markerUnsel),ew.textOptions.push(e_.text),ew.textSelectedOptions.push(e_.textSel),ew.textUnselectedOptions.push(e_.textUnsel),ew.selectBatch.push([]),ew.unselectBatch.push([]),ef._scene=ew,ef.index=ew.count,ef.x=em,ef.y=ey,ef.positions=ev,ew.count++,[{x:!1,y:!1,t:ef,trace:o}]}},78232:function(i){"use strict";i.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(i,o,s){"use strict";var x=s(92770),_=s(82019),F=s(25075),N=s(73972),j=s(71828),G=s(91424),Z=s(41675),X=s(81697).formatColor,J=s(34098),$=s(39984),ee=s(68645),et=s(78232),er=s(37822).DESELECTDIM,en={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},ei=s(23469).appendArrayPointValue;function convertTextStyle(i,o){var s,_=i._fullLayout,F=o._length,N=o.textfont,G=o.textposition,Z=Array.isArray(G)?G:[G],X=N.color,J=N.size,$=N.family,ee={},et=i._context.plotGlPixelRatio,er=o.texttemplate;if(er){ee.text=[];var en=_._d3locale,eo=Array.isArray(er),es=eo?Math.min(er.length,F):F,el=eo?function(i){return er[i]}:function(){return er};for(s=0;s<es;s++){var ec={i:s},eu=o._module.formatLabels(ec,o,_),ef={};ei(ef,o,s);var eh=o._meta||{};ee.text.push(j.texttemplateString(el(s),eu,en,ef,ec,eh))}}else Array.isArray(o.text)&&o.text.length<F?ee.text=o.text.slice():ee.text=o.text;if(Array.isArray(ee.text))for(s=ee.text.length;s<F;s++)ee.text[s]="";for(s=0,ee.opacity=o.opacity,ee.font={},ee.align=[],ee.baseline=[];s<Z.length;s++){var ed=Z[s].split(/\s+/);switch(ed[1]){case"left":ee.align.push("right");break;case"right":ee.align.push("left");break;default:ee.align.push(ed[1])}switch(ed[0]){case"top":ee.baseline.push("bottom");break;case"bottom":ee.baseline.push("top");break;default:ee.baseline.push(ed[0])}}if(Array.isArray(X))for(s=0,ee.color=Array(F);s<F;s++)ee.color[s]=X[s];else ee.color=X;if(j.isArrayOrTypedArray(J)||Array.isArray($))for(s=0,ee.font=Array(F);s<F;s++){var ep=ee.font[s]={};ep.size=(j.isTypedArray(J)?J[s]:Array.isArray(J)?x(J[s])?J[s]:0:J)*et,ep.family=Array.isArray($)?$[s]:$}else ee.font={size:J*et,family:$};return ee}function convertMarkerStyle(i,o){var s=o._length,x=o.marker,_={},N=j.isArrayOrTypedArray(x.symbol),G=j.isArrayOrTypedArray(x.angle),Z=j.isArrayOrTypedArray(x.color),J=j.isArrayOrTypedArray(x.line.color),et=j.isArrayOrTypedArray(x.opacity),er=j.isArrayOrTypedArray(x.size),en=j.isArrayOrTypedArray(x.line.width);if(N||(eg=ee.isOpenSymbol(x.symbol)),N||Z||J||et||G){_.symbols=Array(s),_.angles=Array(s),_.colors=Array(s),_.borderColors=Array(s);var ei=x.symbol,eo=x.angle,es=X(x,x.opacity,s),el=X(x.line,x.opacity,s);if(!Array.isArray(el[0])){var ec=el;for(ep=0,el=Array(s);ep<s;ep++)el[ep]=ec}if(!Array.isArray(es[0])){var eu=es;for(ep=0,es=Array(s);ep<s;ep++)es[ep]=eu}if(!Array.isArray(ei)){var ef=ei;for(ep=0,ei=Array(s);ep<s;ep++)ei[ep]=ef}if(!Array.isArray(eo)){var eh=eo;for(ep=0,eo=Array(s);ep<s;ep++)eo[ep]=eh}for(ep=0,_.symbols=ei,_.angles=eo,_.colors=es,_.borderColors=el;ep<s;ep++)N&&(eg=ee.isOpenSymbol(x.symbol[ep])),eg&&(el[ep]=es[ep].slice(),es[ep]=es[ep].slice(),es[ep][3]=0);for(ep=0,_.opacity=o.opacity,_.markers=Array(s);ep<s;ep++)_.markers[ep]=getSymbolSdf({mx:_.symbols[ep],ma:_.angles[ep]},o)}else eg?(_.color=F(x.color,"uint8"),_.color[3]=0,_.borderColor=F(x.color,"uint8")):(_.color=F(x.color,"uint8"),_.borderColor=F(x.line.color,"uint8")),_.opacity=o.opacity*x.opacity,_.marker=getSymbolSdf({mx:x.symbol,ma:x.angle},o);var ed=$(o,1);if(er||en){var ep,eg,em,ey,ev=_.sizes=Array(s),ex=_.borderSizes=Array(s),e_=0;if(er){for(ep=0;ep<s;ep++)ev[ep]=ed(x.size[ep]),e_+=ev[ep];ey=e_/s}else for(ep=0,em=ed(x.size);ep<s;ep++)ev[ep]=em;if(en)for(ep=0;ep<s;ep++)ex[ep]=x.line.width[ep];else for(ep=0,em=x.line.width;ep<s;ep++)ex[ep]=em;_.sizeAvg=ey}else _.size=ed(x&&x.size||10),_.borderSizes=ed(x.line.width);return _}function convertMarkerSelection(i,o,s){var x=o.marker,_={};return s&&(s.marker&&s.marker.symbol?_=convertMarkerStyle(i,j.extendFlat({},x,s.marker)):s.marker&&(s.marker.size&&(_.size=s.marker.size),s.marker.color&&(_.colors=s.marker.color),void 0!==s.marker.opacity&&(_.opacity=s.marker.opacity))),_}function convertTextSelection(i,o,s){var x={};if(!s)return x;if(s.textfont){var _={opacity:1,text:o.text,texttemplate:o.texttemplate,textposition:o.textposition,textfont:j.extendFlat({},o.textfont)};s.textfont&&j.extendFlat(_.textfont,s.textfont),x=convertTextStyle(i,_)}return x}function convertErrorBarStyle(i,o,s){var x={capSize:2*o.width*s,lineWidth:o.thickness*s,color:o.color};return o.copy_ystyle&&(x=i.error_y),x}var eo=et.SYMBOL_SDF_SIZE,es=et.SYMBOL_SIZE,el=et.SYMBOL_STROKE,ec={},eu=G.symbolFuncs[0](.05*es);function getSymbolSdf(i,o){var s,x=i.mx;if("circle"===x)return null;var F=G.symbolNumber(x),N=G.symbolFuncs[F%100],j=!!G.symbolNoDot[F%100],Z=!!G.symbolNoFill[F%100],X=ee.isDotSymbol(x);if(i.ma&&(x+="_"+i.ma),ec[x])return ec[x];var J=G.getMarkerAngle(i,o);return s=_(X&&!j?N(1.1*es,J)+eu:N(es,J),{w:eo,h:eo,viewBox:[-es,-es,es,es],stroke:Z?el:-el}),ec[x]=s,s||null}i.exports={style:function(i,o){var s,x={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},_=i._context.plotGlPixelRatio;if(!0!==o.visible)return x;if(J.hasText(o)&&(x.text=convertTextStyle(i,o),x.textSel=convertTextSelection(i,o,o.selected),x.textUnsel=convertTextSelection(i,o,o.unselected)),J.hasMarkers(o)&&(x.marker=convertMarkerStyle(i,o),x.markerSel=convertMarkerSelection(i,o,o.selected),x.markerUnsel=convertMarkerSelection(i,o,o.unselected),!o.unselected&&j.isArrayOrTypedArray(o.marker.opacity))){var F=o.marker.opacity;for(s=0,x.markerUnsel.opacity=Array(F.length);s<F.length;s++)x.markerUnsel.opacity[s]=er*F[s]}if(J.hasLines(o)){x.line={overlay:!0,thickness:o.line.width*_,color:o.line.color,opacity:o.opacity};var N=(et.DASHES[o.line.dash]||[1]).slice();for(s=0;s<N.length;++s)N[s]*=o.line.width*_;x.line.dashes=N}return o.error_x&&o.error_x.visible&&(x.errorX=convertErrorBarStyle(o,o.error_x,_)),o.error_y&&o.error_y.visible&&(x.errorY=convertErrorBarStyle(o,o.error_y,_)),o.fill&&"none"!==o.fill&&(x.fill={closed:!0,fill:o.fillcolor,thickness:0}),x},markerStyle:convertMarkerStyle,markerSelection:convertMarkerSelection,linePositions:function(i,o,s){var x,_,F=s.length,N=F/2;if(J.hasLines(o)&&N){if("hv"===o.line.shape){for(_=0,x=[];_<N-1;_++)isNaN(s[2*_])||isNaN(s[2*_+1])?x.push(NaN,NaN,NaN,NaN):(x.push(s[2*_],s[2*_+1]),isNaN(s[2*_+2])||isNaN(s[2*_+3])?x.push(NaN,NaN):x.push(s[2*_+2],s[2*_+1]));x.push(s[F-2],s[F-1])}else if("hvh"===o.line.shape){for(_=0,x=[];_<N-1;_++)if(isNaN(s[2*_])||isNaN(s[2*_+1])||isNaN(s[2*_+2])||isNaN(s[2*_+3]))isNaN(s[2*_])||isNaN(s[2*_+1])?x.push(NaN,NaN):x.push(s[2*_],s[2*_+1]),x.push(NaN,NaN);else{var j=(s[2*_]+s[2*_+2])/2;x.push(s[2*_],s[2*_+1],j,s[2*_+1],j,s[2*_+3])}x.push(s[F-2],s[F-1])}else if("vhv"===o.line.shape){for(_=0,x=[];_<N-1;_++)if(isNaN(s[2*_])||isNaN(s[2*_+1])||isNaN(s[2*_+2])||isNaN(s[2*_+3]))isNaN(s[2*_])||isNaN(s[2*_+1])?x.push(NaN,NaN):x.push(s[2*_],s[2*_+1]),x.push(NaN,NaN);else{var G=(s[2*_+1]+s[2*_+3])/2;x.push(s[2*_],s[2*_+1],s[2*_],G,s[2*_+2],G)}x.push(s[F-2],s[F-1])}else if("vh"===o.line.shape){for(_=0,x=[];_<N-1;_++)isNaN(s[2*_])||isNaN(s[2*_+1])?x.push(NaN,NaN,NaN,NaN):(x.push(s[2*_],s[2*_+1]),isNaN(s[2*_+2])||isNaN(s[2*_+3])?x.push(NaN,NaN):x.push(s[2*_],s[2*_+3]));x.push(s[F-2],s[F-1])}else x=s}var Z=!1;for(_=0;_<x.length;_++)if(isNaN(x[_])){Z=!0;break}var X=Z||x.length>et.TOO_MANY_POINTS?"rect":J.hasMarkers(o)?"rect":"round";if(Z&&o.connectgaps){var $=x[0],ee=x[1];for(_=0;_<x.length;_+=2)isNaN(x[_])||isNaN(x[_+1])?(x[_]=$,x[_+1]=ee):($=x[_],ee=x[_+1])}return{join:X,positions:x}},errorBarPositions:function(i,o,s,_,F){var j=N.getComponentMethod("errorbars","makeComputeError"),G=Z.getFromId(i,o.xaxis,"x"),X=Z.getFromId(i,o.yaxis,"y"),J=s.length/2,$={};function convertOneAxis(i,_){var F=_._id.charAt(0),N=o["error_"+F];if(N&&N.visible&&("linear"===_.type||"log"===_.type)){for(var G=j(N),Z={x:0,y:1}[F],X={x:[0,1,2,3],y:[2,3,0,1]}[F],ee=new Float64Array(4*J),et=1/0,er=-1/0,en=0,ei=0;en<J;en++,ei+=4){var eo=i[en];if(x(eo)){var es=s[2*en+Z],el=G(eo,en),ec=el[0],eu=el[1];if(x(ec)&&x(eu)){var ef=eo-ec,eh=eo+eu;ee[ei+X[0]]=es-_.c2l(ef),ee[ei+X[1]]=_.c2l(eh)-es,ee[ei+X[2]]=0,ee[ei+X[3]]=0,et=Math.min(et,eo-ec),er=Math.max(er,eo+eu)}}}$[F]={positions:s,errors:ee,_bnds:[et,er]}}}return convertOneAxis(_,G),convertOneAxis(F,X),$},textPosition:function(i,o,s,x){var _,F=o._length,N={};if(J.hasMarkers(o)){var j=s.font,G=s.align,Z=s.baseline;for(_=0,N.offset=Array(F);_<F;_++){var X=x.sizes?x.sizes[_]:x.size,$=Array.isArray(j)?j[_].size:j.size,ee=Array.isArray(G)?G.length>1?G[_]:G[0]:G,et=Array.isArray(Z)?Z.length>1?Z[_]:Z[0]:Z,er=en[ee],ei=en[et],eo=X?X/.8+1:0,es=-ei*eo-.5*ei;N.offset[_]=[er*eo/$,es/$]}}return N}}},47148:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(68645),N=s(42341),j=s(47581),G=s(34098),Z=s(67513),X=s(73927),J=s(49508),$=s(11058),ee=s(28908),et=s(82410);i.exports=function(i,o,s,er){function coerce(s,_){return x.coerce(i,o,N,s,_)}var en=!!i.marker&&F.isOpenSymbol(i.marker.symbol),ei=G.isBubble(i),eo=Z(i,o,er,coerce);if(!eo){o.visible=!1;return}X(i,o,er,coerce),coerce("xhoverformat"),coerce("yhoverformat");var es=eo<j.PTS_LINESONLY?"lines+markers":"lines";coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode",es),G.hasLines(o)&&(coerce("connectgaps"),$(i,o,s,er,coerce),coerce("line.shape")),G.hasMarkers(o)&&(J(i,o,s,er,coerce,{noAngleRef:!0,noStandOff:!0}),coerce("marker.line.width",en||ei?1:0)),G.hasText(o)&&(coerce("texttemplate"),et(i,o,er,coerce));var el=(o.line||{}).color,ec=(o.marker||{}).color;coerce("fill"),"none"!==o.fill&&ee(i,o,s,coerce);var eu=_.getComponentMethod("errorbars","supplyDefaults");eu(i,o,el||ec||s,{axis:"y"}),eu(i,o,el||ec||s,{axis:"x",inherit:"y"}),x.coerceSelectionMarkerOpacity(o,coerce)}},5345:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(37822).DESELECTDIM;i.exports={styleTextSelection:function(i){var o,s,N=i[0],j=N.trace,G=N.t,Z=G._scene,X=G.index,J=Z.selectBatch[X],$=Z.unselectBatch[X],ee=Z.textOptions[X],et=Z.textSelectedOptions[X]||{},er=Z.textUnselectedOptions[X]||{},en=x.extendFlat({},ee);if(J.length||$.length){var ei=et.color,eo=er.color,es=ee.color,el=Array.isArray(es);for(o=0,en.color=Array(j._length);o<J.length;o++)s=J[o],en.color[s]=ei||(el?es[s]:es);for(o=0;o<$.length;o++){s=$[o];var ec=el?es[s]:es;en.color[s]=eo||(ei?ec:_.addOpacity(ec,F))}}Z.glText[X].update(en)}}},68101:function(i,o,s){"use strict";var x=s(8225);i.exports=function(i,o,s){var _=i.i;return"x"in i||(i.x=o._x[_]),"y"in i||(i.y=o._y[_]),x(i,o,s)}},68645:function(i,o,s){"use strict";var x=s(78232);o.isOpenSymbol=function(i){return"string"==typeof i?x.OPEN_RE.test(i):i%200>100},o.isDotSymbol=function(i){return"string"==typeof i?x.DOT_RE.test(i):i>200}},20794:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(34603);function calcHover(i,o,s,N){var j=i.xa,G=i.ya,Z=i.distance,X=i.dxy,J=i.index,$={pointNumber:J,x:o[J],y:s[J]};$.tx=Array.isArray(N.text)?N.text[J]:N.text,$.htx=Array.isArray(N.hovertext)?N.hovertext[J]:N.hovertext,$.data=Array.isArray(N.customdata)?N.customdata[J]:N.customdata,$.tp=Array.isArray(N.textposition)?N.textposition[J]:N.textposition;var ee=N.textfont;ee&&($.ts=_.isArrayOrTypedArray(ee.size)?ee.size[J]:ee.size,$.tc=Array.isArray(ee.color)?ee.color[J]:ee.color,$.tf=Array.isArray(ee.family)?ee.family[J]:ee.family);var et=N.marker;et&&($.ms=_.isArrayOrTypedArray(et.size)?et.size[J]:et.size,$.mo=_.isArrayOrTypedArray(et.opacity)?et.opacity[J]:et.opacity,$.mx=_.isArrayOrTypedArray(et.symbol)?et.symbol[J]:et.symbol,$.ma=_.isArrayOrTypedArray(et.angle)?et.angle[J]:et.angle,$.mc=_.isArrayOrTypedArray(et.color)?et.color[J]:et.color);var er=et&&et.line;er&&($.mlc=Array.isArray(er.color)?er.color[J]:er.color,$.mlw=_.isArrayOrTypedArray(er.width)?er.width[J]:er.width);var en=et&&et.gradient;en&&"none"!==en.type&&($.mgt=Array.isArray(en.type)?en.type[J]:en.type,$.mgc=Array.isArray(en.color)?en.color[J]:en.color);var ei=j.c2p($.x,!0),eo=G.c2p($.y,!0),es=$.mrc||1,el=N.hoverlabel;el&&($.hbg=Array.isArray(el.bgcolor)?el.bgcolor[J]:el.bgcolor,$.hbc=Array.isArray(el.bordercolor)?el.bordercolor[J]:el.bordercolor,$.hts=_.isArrayOrTypedArray(el.font.size)?el.font.size[J]:el.font.size,$.htc=Array.isArray(el.font.color)?el.font.color[J]:el.font.color,$.htf=Array.isArray(el.font.family)?el.font.family[J]:el.font.family,$.hnl=_.isArrayOrTypedArray(el.namelength)?el.namelength[J]:el.namelength);var ec=N.hoverinfo;ec&&($.hi=Array.isArray(ec)?ec[J]:ec);var eu=N.hovertemplate;eu&&($.ht=Array.isArray(eu)?eu[J]:eu);var ef={};ef[i.index]=$;var eh=N._origX,ed=N._origY,ep=_.extendFlat({},i,{color:F(N,$),x0:ei-es,x1:ei+es,xLabelVal:eh?eh[J]:$.x,y0:eo-es,y1:eo+es,yLabelVal:ed?ed[J]:$.y,cd:ef,distance:Z,spikeDistance:X,hovertemplate:$.ht});return $.htx?ep.text=$.htx:$.tx?ep.text=$.tx:N.text&&(ep.text=N.text),_.fillText($,N,ep),x.getComponentMethod("errorbars","hoverInfo")($,N,ep),ep}i.exports={hoverPoints:function(i,o,s,x){var _,F,N,j,G,Z,X,J,$,ee,et=i.cd,er=et[0].t,en=et[0].trace,ei=i.xa,eo=i.ya,es=er.x,el=er.y,ec=ei.c2p(o),eu=eo.c2p(s),ef=i.distance;if(er.tree){var eh=ei.p2c(ec-ef),ed=ei.p2c(ec+ef),ep=eo.p2c(eu-ef),eg=eo.p2c(eu+ef);_="x"===x?er.tree.range(Math.min(eh,ed),Math.min(eo._rl[0],eo._rl[1]),Math.max(eh,ed),Math.max(eo._rl[0],eo._rl[1])):er.tree.range(Math.min(eh,ed),Math.min(ep,eg),Math.max(eh,ed),Math.max(ep,eg))}else _=er.ids;var em=ef;if("x"===x){var ey=!!en.xperiodalignment,ev=!!en.yperiodalignment;for(Z=0;Z<_.length;Z++){if(j=es[F=_[Z]],X=Math.abs(ei.c2p(j)-ec),ey){var ex=ei.c2p(en._xStarts[F]),e_=ei.c2p(en._xEnds[F]);X=ec>=Math.min(ex,e_)&&ec<=Math.max(ex,e_)?0:1/0}if(X<em){if(em=X,G=el[F],J=eo.c2p(G)-eu,ev){var ew=eo.c2p(en._yStarts[F]),eT=eo.c2p(en._yEnds[F]);J=eu>=Math.min(ew,eT)&&eu<=Math.max(ew,eT)?0:1/0}ee=Math.sqrt(X*X+J*J),N=_[Z]}}}else for(Z=_.length-1;Z>-1;Z--)j=es[F=_[Z]],G=el[F],($=Math.sqrt((X=ei.c2p(j)-ec)*X+(J=eo.c2p(G)-eu)*J))<em&&(em=ee=$,N=F);return(i.index=N,i.distance=em,i.dxy=ee,void 0===N)?[i]:[calcHover(i,es,el,en)]},calcHover:calcHover}},68868:function(i,o,s){"use strict";var x=s(72156);x.plot=s(26787),i.exports=x},26787:function(i,o,s){"use strict";var x=s(11870),_=s(46075),F=s(3593),N=s(42505),j=s(71828),G=s(64505).selectMode,Z=s(79749),X=s(34098),J=s(68687),$=s(5345).styleTextSelection,ee={};(i.exports=function(i,o,s){if(s.length){var et,er,en=i._fullLayout,ei=o._scene,eo=o.xaxis,es=o.yaxis;if(ei){if(!Z(i,["ANGLE_instanced_arrays","OES_element_index_uint"],ee)){ei.init();return}var el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev=ei.count,ex=en._glcanvas.data()[0].regl;if(J(i,o,s),ei.dirty){if(!0===ei.error2d&&(ei.error2d=F(ex)),!0===ei.line2d&&(ei.line2d=_(ex)),!0===ei.scatter2d&&(ei.scatter2d=x(ex)),!0===ei.fill2d&&(ei.fill2d=_(ex)),!0===ei.glText)for(et=0,ei.glText=Array(ev);et<ev;et++)ei.glText[et]=new N(ex);if(ei.glText){if(ev>ei.glText.length){var e_=ev-ei.glText.length;for(et=0;et<e_;et++)ei.glText.push(new N(ex))}else if(ev<ei.glText.length){var ew=ei.glText.length-ev;ei.glText.splice(ev,ew).forEach(function(i){i.destroy()})}for(et=0;et<ev;et++)ei.glText[et].update(ei.textOptions[et])}if(ei.line2d&&(ei.line2d.update(ei.lineOptions),ei.lineOptions=ei.lineOptions.map(function(i){if(i&&i.positions){for(var o=i.positions,s=0;s<o.length&&(isNaN(o[s])||isNaN(o[s+1]));)s+=2;for(var x=o.length-2;x>s&&(isNaN(o[x])||isNaN(o[x+1]));)x-=2;i.positions=o.slice(s,x+2)}return i}),ei.line2d.update(ei.lineOptions)),ei.error2d){var eT=(ei.errorXOptions||[]).concat(ei.errorYOptions||[]);ei.error2d.update(eT)}ei.scatter2d&&ei.scatter2d.update(ei.markerOptions),ei.fillOrder=j.repeat(null,ev),ei.fill2d&&(ei.fillOptions=ei.fillOptions.map(function(i,o){var x,_,F,N,j=s[o];if(i&&j&&j[0]&&j[0].trace){var G=j[0],Z=G.trace,X=G.t,J=ei.lineOptions[o],$=[];Z._ownfill&&$.push(o),Z._nexttrace&&$.push(o+1),$.length&&(ei.fillOrder[o]=$);var ee=[],et=J&&J.positions||X.positions;if("tozeroy"===Z.fill){for(F=0;F<et.length&&isNaN(et[F+1]);)F+=2;for(N=et.length-2;N>F&&isNaN(et[N+1]);)N-=2;0!==et[F+1]&&(ee=[et[F],0]),ee=ee.concat(et.slice(F,N+2)),0!==et[N+1]&&(ee=ee.concat([et[N],0]))}else if("tozerox"===Z.fill){for(F=0;F<et.length&&isNaN(et[F]);)F+=2;for(N=et.length-2;N>F&&isNaN(et[N]);)N-=2;0!==et[F]&&(ee=[0,et[F+1]]),ee=ee.concat(et.slice(F,N+2)),0!==et[N]&&(ee=ee.concat([0,et[N+1]]))}else if("toself"===Z.fill||"tonext"===Z.fill){for(_=0,ee=[],x=0,i.splitNull=!0;_<et.length;_+=2)(isNaN(et[_])||isNaN(et[_+1]))&&((ee=ee.concat(et.slice(x,_))).push(et[x],et[x+1]),ee.push(null,null),x=_+2);ee=ee.concat(et.slice(x)),x&&ee.push(et[x],et[x+1])}else{var er=Z._nexttrace;if(er){var en=ei.lineOptions[o+1];if(en){var eo=en.positions;if("tonexty"===Z.fill){for(ee=et.slice(),o=Math.floor(eo.length/2);o--;){var es=eo[2*o],el=eo[2*o+1];isNaN(es)||isNaN(el)||ee.push(es,el)}i.fill=er.fillcolor}}}}if(Z._prevtrace&&"tonext"===Z._prevtrace.fill){var ec=ei.lineOptions[o-1].positions,eu=ee.length/2,ef=[x=eu];for(_=0;_<ec.length;_+=2)(isNaN(ec[_])||isNaN(ec[_+1]))&&(ef.push(_/2+eu+1),x=_+2);ee=ee.concat(ec),i.hole=ef}return i.fillmode=Z.fill,i.opacity=Z.opacity,i.positions=ee,i}}),ei.fill2d.update(ei.fillOptions))}var ek=G(en.dragmode),eA=en.clickmode.indexOf("select")>-1;for(et=0;et<ev;et++){var eS=s[et][0],eM=eS.trace,eC=eS.t,eE=eC.index,eL=eM._length,eP=eC.x,eI=eC.y;if(eM.selectedpoints||ek||eA){if(ek||(ek=!0),eM.selectedpoints){var eO=ei.selectBatch[eE]=j.selIndices2selPoints(eM),eD={};for(er=0;er<eO.length;er++)eD[eO[er]]=1;var eR=[];for(er=0;er<eL;er++)eD[er]||eR.push(er);ei.unselectBatch[eE]=eR}var eB=eC.xpx=Array(eL),ez=eC.ypx=Array(eL);for(er=0;er<eL;er++)eB[er]=eo.c2p(eP[er]),ez[er]=es.c2p(eI[er])}else eC.xpx=eC.ypx=null}if(ek){if(ei.select2d||(ei.select2d=x(en._glcanvas.data()[1].regl)),ei.scatter2d){var eF=Array(ev);for(et=0;et<ev;et++)eF[et]=ei.selectBatch[et].length||ei.unselectBatch[et].length?ei.markerUnselectedOptions[et]:{};ei.scatter2d.update(eF)}ei.select2d&&(ei.select2d.update(ei.markerOptions),ei.select2d.update(ei.markerSelectedOptions)),ei.glText&&s.forEach(function(i){var o=((i||[])[0]||{}).trace||{};X.hasText(o)&&$(i)})}else ei.scatter2d&&ei.scatter2d.update(ei.markerOptions);var eN={viewport:(el=i._context.plotGlPixelRatio,ec=en._size,eu=en.width*el,ef=en.height*el,eh=ec.l*el,ed=ec.b*el,ep=ec.r*el,eg=ec.t*el,em=ec.w*el,ey=ec.h*el,[eh+eo.domain[0]*em,ed+es.domain[0]*ey,eu-ep-(1-eo.domain[1])*em,ef-eg-(1-es.domain[1])*ey]),range:[(eo._rl||eo.range)[0],(es._rl||es.range)[0],(eo._rl||eo.range)[1],(es._rl||es.range)[1]]},ej=j.repeat(eN,ei.count);ei.fill2d&&ei.fill2d.update(ej),ei.line2d&&ei.line2d.update(ej),ei.error2d&&ei.error2d.update(ej.concat(ej)),ei.scatter2d&&ei.scatter2d.update(ej),ei.select2d&&ei.select2d.update(ej),ei.glText&&ei.glText.forEach(function(i){i.update(eN)})}}}).reglPrecompiled=ee},38967:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){var s=o._scene,_={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},F={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((s=o._scene={}).init=function(){x.extendFlat(s,F,_)},s.init(),s.update=function(i){var o=x.repeat(i,s.count);if(s.fill2d&&s.fill2d.update(o),s.scatter2d&&s.scatter2d.update(o),s.line2d&&s.line2d.update(o),s.error2d&&s.error2d.update(o.concat(o)),s.select2d&&s.select2d.update(o),s.glText)for(var _=0;_<s.count;_++)s.glText[_].update(i)},s.draw=function(){for(var i=s.count,o=s.fill2d,_=s.error2d,F=s.line2d,N=s.scatter2d,j=s.glText,G=s.select2d,Z=s.selectBatch,X=s.unselectBatch,J=0;J<i;J++){if(o&&s.fillOrder[J]&&o.draw(s.fillOrder[J]),F&&s.lineOptions[J]&&F.draw(J),_&&(s.errorXOptions[J]&&_.draw(J),s.errorYOptions[J]&&_.draw(J+i)),N&&s.markerOptions[J]){if(X[J].length){var $=x.repeat([],s.count);$[J]=X[J],N.draw($)}else Z[J].length||N.draw(J)}j[J]&&s.textOptions[J]&&j[J].render()}G&&G.draw(Z),s.dirty=!1},s.destroy=function(){s.fill2d&&s.fill2d.destroy&&s.fill2d.destroy(),s.scatter2d&&s.scatter2d.destroy&&s.scatter2d.destroy(),s.error2d&&s.error2d.destroy&&s.error2d.destroy(),s.line2d&&s.line2d.destroy&&s.line2d.destroy(),s.select2d&&s.select2d.destroy&&s.select2d.destroy(),s.glText&&s.glText.forEach(function(i){i.destroy&&i.destroy()}),s.lineOptions=null,s.fillOptions=null,s.markerOptions=null,s.markerSelectedOptions=null,s.markerUnselectedOptions=null,s.errorXOptions=null,s.errorYOptions=null,s.textOptions=null,s.textSelectedOptions=null,s.textUnselectedOptions=null,s.selectBatch=null,s.unselectBatch=null,o._scene=null}),s.dirty||x.extendFlat(s,_),s}},58147:function(i,o,s){"use strict";var x=s(34098),_=s(5345).styleTextSelection;i.exports=function(i,o){var s=i.cd,F=i.xaxis,N=i.yaxis,j=[],G=s[0].trace,Z=s[0].t,X=G._length,J=Z.x,$=Z.y,ee=Z._scene,et=Z.index;if(!ee)return j;var er=x.hasText(G),en=x.hasMarkers(G);if(!0!==G.visible||!en&&!er)return j;var ei=[],eo=[];if(!1!==o&&!o.degenerate)for(var es=0;es<X;es++)o.contains([Z.xpx[es],Z.ypx[es]],!1,es,i)?(ei.push(es),j.push({pointNumber:es,x:F.c2d(J[es]),y:N.c2d($[es])})):eo.push(es);if(en){var el=ee.scatter2d;if(ei.length||eo.length){if(!ee.selectBatch[et].length&&!ee.unselectBatch[et].length){var ec=Array(ee.count);ec[et]=ee.markerUnselectedOptions[et],el.update.apply(el,ec)}}else{var eu=Array(ee.count);eu[et]=ee.markerOptions[et],el.update.apply(el,eu)}}return ee.selectBatch[et]=ei,ee.unselectBatch[et]=eo,er&&_(s),j}},99181:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(19316),N=s(82196),j=s(23585),G=s(9012),Z=s(50693),X=s(1426).extendFlat,J=s(30962).overrideAll,$=s(23585),ee=F.line,et=F.marker;i.exports=J({lon:F.lon,lat:F.lat,cluster:{enabled:{valType:"boolean"},maxzoom:X({},$.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:X({},et.opacity,{dflt:1})},mode:X({},N.mode,{dflt:"markers"}),text:X({},N.text,{}),texttemplate:_({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:X({},N.hovertext,{}),line:{color:ee.color,width:ee.width},connectgaps:N.connectgaps,marker:X({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:et.opacity,size:et.size,sizeref:et.sizeref,sizemin:et.sizemin,sizemode:et.sizemode},Z("marker")),fill:F.fill,fillcolor:N.fillcolor,textfont:j.layers.symbol.textfont,textposition:j.layers.symbol.textposition,below:{valType:"string"},selected:{marker:N.selected.marker},unselected:{marker:N.unselected.marker},hoverinfo:X({},G.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:x()},"calc","nested")},15790:function(i,o,s){"use strict";var x=s(92770),_=s(71828),F=s(50606).BADNUM,N=s(18214),j=s(21081),G=s(91424),Z=s(39984),X=s(34098),J=s(13056),$=s(23469).appendArrayPointValue,ee=s(63893).NEWLINES,et=s(63893).BR_TAG_ALL;function initContainer(i){return{type:i,geojson:N.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function getFillFunc(i,o){return _.isArrayOrTypedArray(i)?o?function(o){return x(i[o])?+i[o]:0}:function(o){return i[o]}:i?function(){return i}:blankFillFunc}function blankFillFunc(){return""}function arrayifyAttribute(i,o){var s;if(_.isArrayOrTypedArray(i)&&_.isArrayOrTypedArray(o)){s=["step",["get","point_count"],i[0]];for(var x=1;x<i.length;x++)s.push(o[x-1],i[x])}else s=i;return s}i.exports=function(i,o){var s,er=o[0].trace,en=!0===er.visible&&0!==er._length,ei="none"!==er.fill,eo=X.hasLines(er),es=X.hasMarkers(er),el=X.hasText(er),ec=es&&"circle"===er.marker.symbol,eu=es&&"circle"!==er.marker.symbol,ef=er.cluster&&er.cluster.enabled,eh=initContainer("fill"),ed=initContainer("line"),ep=initContainer("circle"),eg=initContainer("symbol"),em={fill:eh,line:ed,circle:ep,symbol:eg};if(!en)return em;if((ei||eo)&&(s=N.calcTraceToLineCoords(o)),ei&&(eh.geojson=N.makePolygon(s),eh.layout.visibility="visible",_.extendFlat(eh.paint,{"fill-color":er.fillcolor})),eo&&(ed.geojson=N.makeLine(s),ed.layout.visibility="visible",_.extendFlat(ed.paint,{"line-width":er.line.width,"line-color":er.line.color,"line-opacity":er.opacity})),ec){var ey=function(i){var o,s,N,X,J,$=i[0].trace,ee=$.marker,et=$.selectedpoints,er=_.isArrayOrTypedArray(ee.color),en=_.isArrayOrTypedArray(ee.size),ei=_.isArrayOrTypedArray(ee.opacity);function addTraceOpacity(i){return $.opacity*i}er&&(s=j.hasColorscale($,"marker")?j.makeColorScaleFuncFromTrace(ee):_.identity),en&&(N=Z($)),ei&&(X=function(i){return addTraceOpacity(x(i)?+_.constrain(i,0,1):0)});var eo=[];for(o=0;o<i.length;o++){var es=i[o],el=es.lonlat;if(el[0]!==F){var ec={};s&&(ec.mcc=es.mcc=s(es.mc)),N&&(ec.mrc=es.mrc=N(es.ms)),X&&(ec.mo=X(es.mo)),et&&(ec.selected=es.selected||0),eo.push({type:"Feature",id:o+1,geometry:{type:"Point",coordinates:el},properties:ec})}}if(et)for(o=0,J=G.makeSelectedPointStyleFns($);o<eo.length;o++){var eu=eo[o].properties;J.selectedOpacityFn&&(eu.mo=addTraceOpacity(J.selectedOpacityFn(eu))),J.selectedColorFn&&(eu.mcc=J.selectedColorFn(eu)),J.selectedSizeFn&&(eu.mrc=J.selectedSizeFn(eu))}return{geojson:{type:"FeatureCollection",features:eo},mcc:er||J&&J.selectedColorFn?{type:"identity",property:"mcc"}:ee.color,mrc:en||J&&J.selectedSizeFn?{type:"identity",property:"mrc"}:ee.size/2,mo:ei||J&&J.selectedOpacityFn?{type:"identity",property:"mo"}:addTraceOpacity(ee.opacity)}}(o);ep.geojson=ey.geojson,ep.layout.visibility="visible",ef&&(ep.filter=["!",["has","point_count"]],em.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":arrayifyAttribute(er.cluster.color,er.cluster.step),"circle-radius":arrayifyAttribute(er.cluster.size,er.cluster.step),"circle-opacity":arrayifyAttribute(er.cluster.opacity,er.cluster.step)}},em.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),_.extendFlat(ep.paint,{"circle-color":ey.mcc,"circle-radius":ey.mrc,"circle-opacity":ey.mo})}if(ec&&ef&&(ep.filter=["!",["has","point_count"]]),(eu||el)&&(eg.geojson=function(i,o){for(var s=o._fullLayout,x=i[0].trace,N=x.marker||{},j=N.symbol,G=N.angle,Z="circle"!==j?getFillFunc(j):blankFillFunc,J="auto"!==G?getFillFunc(G,!0):blankFillFunc,er=X.hasText(x)?getFillFunc(x.text):blankFillFunc,en=[],ei=0;ei<i.length;ei++){var eo,es,el=i[ei];if(el.lonlat[0]!==F){var ec=x.texttemplate;if(ec){var eu=Array.isArray(ec)?ec[ei]||"":ec,ef=x._module.formatLabels(el,x,s),eh={};$(eh,x,el.i);var ed=x._meta||{};es=_.texttemplateString(eu,ef,s._d3locale,eh,el,ed)}else es=er(ei);es&&(es=es.replace(ee,"").replace(et,"\n")),en.push({type:"Feature",geometry:{type:"Point",coordinates:el.lonlat},properties:{symbol:Z(ei),angle:J(ei),text:es}})}}return{type:"FeatureCollection",features:en}}(o,i),_.extendFlat(eg.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),eu&&(_.extendFlat(eg.layout,{"icon-size":er.marker.size/10}),"angle"in er.marker&&"auto"!==er.marker.angle&&_.extendFlat(eg.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),eg.layout["icon-allow-overlap"]=er.marker.allowoverlap,_.extendFlat(eg.paint,{"icon-opacity":er.opacity*er.marker.opacity,"icon-color":er.marker.color})),el)){var ev=(er.marker||{}).size,ex=J(er.textposition,ev);_.extendFlat(eg.layout,{"text-size":er.textfont.size,"text-anchor":ex.anchor,"text-offset":ex.offset,"text-font":er.textfont.family.split(", ")}),_.extendFlat(eg.paint,{"text-color":er.textfont.color,"text-opacity":er.opacity})}return em}},76645:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(49508),N=s(11058),j=s(82410),G=s(28908),Z=s(99181),X=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];i.exports=function(i,o,s,J){function coerce(s,_){return x.coerce(i,o,Z,s,_)}function coerce2(s,_){return x.coerce2(i,o,Z,s,_)}if($=coerce("lon")||[],ee=coerce("lat")||[],et=Math.min($.length,ee.length),o._length=et,!et){o.visible=!1;return}if(coerce("text"),coerce("texttemplate"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode"),coerce("below"),_.hasLines(o)&&(N(i,o,s,J,coerce,{noDash:!0}),coerce("connectgaps")),_.hasMarkers(o)){F(i,o,s,J,coerce,{noLine:!0,noAngle:!0}),coerce("marker.allowoverlap"),coerce("marker.angle");var $,ee,et,er=o.marker;"circle"!==er.symbol&&(x.isArrayOrTypedArray(er.size)&&(er.size=er.size[0]),x.isArrayOrTypedArray(er.color)&&(er.color=er.color[0]))}var en=coerce2("cluster.maxzoom"),ei=coerce2("cluster.step"),eo=coerce2("cluster.color",o.marker&&o.marker.color||s),es=coerce2("cluster.size"),el=coerce2("cluster.opacity");coerce("cluster.enabled",!1!==en||!1!==ei||!1!==eo||!1!==es||!1!==el),_.hasText(o)&&j(i,o,J,coerce,{noSelect:!0,font:{family:-1!==X.indexOf(J.font.family)?J.font.family:"Open Sans Regular",size:J.font.size,color:J.font.color}}),coerce("fill"),"none"!==o.fill&&G(i,o,s,coerce),x.coerceSelectionMarkerOpacity(o,coerce)}},53353:function(i){"use strict";i.exports=function(i,o){return i.lon=o.lon,i.lat=o.lat,i}},15636:function(i,o,s){"use strict";var x=s(89298);i.exports=function(i,o,s){var _={},F=s[o.subplot]._subplot.mockAxis,N=i.lonlat;return _.lonLabel=x.tickText(F,F.c2l(N[0]),!0).text,_.latLabel=x.tickText(F,F.c2l(N[1]),!0).text,_}},28178:function(i,o,s){"use strict";var x=s(30211),_=s(71828),F=s(34603),N=_.fillText,j=s(50606).BADNUM,G=s(77734).traceLayerPrefix;function getExtraText(i,o,s){if(!i.hovertemplate){var x,_,F,j,G=(o.hi||i.hoverinfo).split("+"),Z=-1!==G.indexOf("all"),X=-1!==G.indexOf("lon"),J=-1!==G.indexOf("lat"),$=o.lonlat,ee=[];return Z||X&&J?ee.push("("+$[1]+"\xb0, "+$[0]+"\xb0)"):X?ee.push(s.lon+($[0]+"\xb0")):J&&ee.push(s.lat+($[1]+"\xb0")),(Z||-1!==G.indexOf("text"))&&N(o,i,ee),ee.join("<br>")}}i.exports={hoverPoints:function(i,o,s){var N=i.cd,Z=N[0].trace,X=i.xa,J=i.ya,$=i.subplot,ee=[],et=G+Z.uid+"-circle",er=Z.cluster&&Z.cluster.enabled;er&&(ee=$.map.queryRenderedFeatures(null,{layers:[et]}).map(function(i){return i.id}));var en=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),ei=o-en;if(x.getClosest(N,function(i){var o=i.lonlat;if(o[0]===j||er&&-1===ee.indexOf(i.i+1))return 1/0;var x=_.modHalf(o[0],360),F=o[1],N=$.project([x,F]),G=N.x-X.c2p([ei,F]),Z=N.y-J.c2p([x,s]),et=Math.max(3,i.mrc||0);return Math.max(Math.sqrt(G*G+Z*Z)-et,1-3/et)},i),!1!==i.index){var eo=N[i.index],es=eo.lonlat,el=[_.modHalf(es[0],360)+en,es[1]],ec=X.c2p(el),eu=J.c2p(el),ef=eo.mrc||1;i.x0=ec-ef,i.x1=ec+ef,i.y0=eu-ef,i.y1=eu+ef;var eh={};eh[Z.subplot]={_subplot:$};var ed=Z._module.formatLabels(eo,Z,eh);return i.lonLabel=ed.lonLabel,i.latLabel=ed.latLabel,i.color=F(Z,eo),i.extraText=getExtraText(Z,eo,N[0].t.labels),i.hovertemplate=Z.hovertemplate,[i]}},getExtraText:getExtraText}},20467:function(i,o,s){"use strict";i.exports={attributes:s(99181),supplyDefaults:s(76645),colorbar:s(4898),formatLabels:s(15636),calc:s(84622),plot:s(86951),hoverPoints:s(28178).hoverPoints,eventData:s(53353),selectPoints:s(86387),styleOnSelect:function(i,o){o&&o[0].trace._glTrace.update(o)},moduleType:"trace",name:"scattermapbox",basePlotModule:s(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(i,o,s){"use strict";var x=s(71828),_=s(15790),F=s(77734).traceLayerPrefix,N={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function ScatterMapbox(i,o,s,x){this.type="scattermapbox",this.subplot=i,this.uid=o,this.clusterEnabled=s,this.isHidden=x,this.sourceIds={fill:"source-"+o+"-fill",line:"source-"+o+"-line",circle:"source-"+o+"-circle",symbol:"source-"+o+"-symbol",cluster:"source-"+o+"-circle",clusterCount:"source-"+o+"-circle"},this.layerIds={fill:F+o+"-fill",line:F+o+"-line",circle:F+o+"-circle",symbol:F+o+"-symbol",cluster:F+o+"-cluster",clusterCount:F+o+"-cluster-count"},this.below=null}var j=ScatterMapbox.prototype;j.addSource=function(i,o,s){var _={type:"geojson",data:o.geojson};s&&s.enabled&&x.extendFlat(_,{cluster:!0,clusterMaxZoom:s.maxzoom});var F=this.subplot.map.getSource(this.sourceIds[i]);F?F.setData(o.geojson):this.subplot.map.addSource(this.sourceIds[i],_)},j.setSourceData=function(i,o){this.subplot.map.getSource(this.sourceIds[i]).setData(o.geojson)},j.addLayer=function(i,o,s){var x,_={type:o.type,id:this.layerIds[i],source:this.sourceIds[i],layout:o.layout,paint:o.paint};o.filter&&(_.filter=o.filter);for(var F=this.layerIds[i],N=this.subplot.getMapLayers(),j=0;j<N.length;j++)if(N[j].id===F){x=!0;break}x?(this.subplot.setOptions(F,"setLayoutProperty",_.layout),"visible"===_.layout.visibility&&this.subplot.setOptions(F,"setPaintProperty",_.paint)):this.subplot.addLayer(_,s)},j.update=function(i){var o=i[0].trace,s=this.subplot,x=s.map,F=_(s.gd,i),j=s.belowLookup["trace-"+this.uid],G=!!(o.cluster&&o.cluster.enabled),Z=!!this.clusterEnabled,X=this;function remove(i){Z?function(i){for(var o=N.cluster,s=o.length-1;s>=0;s--){var _=o[s];x.removeLayer(X.layerIds[_])}i||x.removeSource(X.sourceIds.circle)}(i):function(i){for(var o=N.nonCluster,s=o.length-1;s>=0;s--){var _=o[s];x.removeLayer(X.layerIds[_]),i||x.removeSource(X.sourceIds[_])}}(i)}function add(i){G?function(i){i||X.addSource("circle",F.circle,o.cluster);for(var s=N.cluster,x=0;x<s.length;x++){var _=s[x],G=F[_];X.addLayer(_,G,j)}}(i):function(i){for(var o=N.nonCluster,s=0;s<o.length;s++){var x=o[s],_=F[x];i||X.addSource(x,_),X.addLayer(x,_,j)}}(i)}var J=this.isHidden,$=!0!==o.visible;$?J||remove():J?$||add():Z!==G?(remove(),add()):(this.below!==j&&(remove(!0),add(!0)),function(){for(var i=G?N.cluster:N.nonCluster,o=0;o<i.length;o++){var x=i[o],_=F[x];_&&(s.setOptions(X.layerIds[x],"setLayoutProperty",_.layout),"visible"===_.layout.visibility&&("cluster"!==x&&X.setSourceData(x,_),s.setOptions(X.layerIds[x],"setPaintProperty",_.paint)))}}()),this.clusterEnabled=G,this.isHidden=$,this.below=j,i[0].trace._glTrace=this},j.dispose=function(){for(var i=this.subplot.map,o=this.clusterEnabled?N.cluster:N.nonCluster,s=o.length-1;s>=0;s--){var x=o[s];i.removeLayer(this.layerIds[x]),i.removeSource(this.sourceIds[x])}},i.exports=function(i,o){var s,x,F,j=o[0].trace,G=j.cluster&&j.cluster.enabled,Z=!0!==j.visible,X=new ScatterMapbox(i,j.uid,G,Z),J=_(i.gd,o),$=X.below=i.belowLookup["trace-"+j.uid];if(G)for(X.addSource("circle",J.circle,j.cluster),s=0;s<N.cluster.length;s++)F=J[x=N.cluster[s]],X.addLayer(x,F,$);else for(s=0;s<N.nonCluster.length;s++)F=J[x=N.nonCluster[s]],X.addSource(x,F,j.cluster),X.addLayer(x,F,$);return o[0].trace._glTrace=X,X}},86387:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(50606).BADNUM;i.exports=function(i,o){var s,N=i.cd,j=i.xaxis,G=i.yaxis,Z=[],X=N[0].trace;if(!_.hasMarkers(X))return[];if(!1===o)for(s=0;s<N.length;s++)N[s].selected=0;else for(s=0;s<N.length;s++){var J=N[s],$=J.lonlat;if($[0]!==F){var ee=[x.modHalf($[0],360),$[1]],et=[j.c2p(ee),G.c2p(ee)];o.contains(et,null,s,i)?(Z.push({pointNumber:s,lon:$[0],lat:$[1]}),J.selected=1):J.selected=0}}return Z}},81245:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(1426).extendFlat,N=s(82196),j=s(9012),G=N.line;i.exports={mode:N.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:N.text,texttemplate:_({editType:"plot"},{keys:["r","theta","text"]}),hovertext:N.hovertext,line:{color:G.color,width:G.width,dash:G.dash,backoff:G.backoff,shape:F({},G.shape,{values:["linear","spline"]}),smoothing:G.smoothing,editType:"calc"},connectgaps:N.connectgaps,marker:N.marker,cliponaxis:F({},N.cliponaxis,{dflt:!1}),textposition:N.textposition,textfont:N.textfont,fill:F({},N.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:N.fillcolor,hoverinfo:F({},j.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:N.hoveron,hovertemplate:x(),selected:N.selected,unselected:N.unselected}},26442:function(i,o,s){"use strict";var x=s(92770),_=s(50606).BADNUM,F=s(89298),N=s(36922),j=s(75225),G=s(66279),Z=s(47761).calcMarkerSize;i.exports=function(i,o){for(var s=i._fullLayout,X=o.subplot,J=s[X].radialaxis,$=s[X].angularaxis,ee=J.makeCalcdata(o,"r"),et=$.makeCalcdata(o,"theta"),er=o._length,en=Array(er),ei=0;ei<er;ei++){var eo=ee[ei],es=et[ei],el=en[ei]={};x(eo)&&x(es)?(el.r=eo,el.theta=es):el.r=_}var ec=Z(o,er);return o._extremes.x=F.findExtremes(J,ee,{ppad:ec}),N(i,o),j(en,o),G(en,o),en}},22184:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(49508),N=s(11058),j=s(94039),G=s(82410),Z=s(28908),X=s(47581).PTS_LINESONLY,J=s(81245);function handleRThetaDefaults(i,o,s,x){var _,F=x("r"),N=x("theta");if(F)N?_=Math.min(F.length,N.length):(_=F.length,x("theta0"),x("dtheta"));else{if(!N)return 0;_=o.theta.length,x("r0"),x("dr")}return o._length=_,_}i.exports={handleRThetaDefaults:handleRThetaDefaults,supplyDefaults:function(i,o,s,$){function coerce(s,_){return x.coerce(i,o,J,s,_)}var ee=handleRThetaDefaults(i,o,$,coerce);if(!ee){o.visible=!1;return}coerce("thetaunit"),coerce("mode",ee<X?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),_.hasLines(o)&&(N(i,o,s,$,coerce,{backoff:!0}),j(i,o,coerce),coerce("connectgaps")),_.hasMarkers(o)&&F(i,o,s,$,coerce,{gradient:!0}),_.hasText(o)&&(coerce("texttemplate"),G(i,o,$,coerce));var et=[];(_.hasMarkers(o)||_.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),et.push("points")),coerce("fill"),"none"===o.fill||(Z(i,o,s,coerce),_.hasLines(o)||j(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&et.push("fills"),coerce("hoveron",et.join("+")||"points"),x.coerceSelectionMarkerOpacity(o,coerce)}}},98608:function(i,o,s){"use strict";var x=s(71828),_=s(89298);i.exports=function(i,o,s){var F,N,j={},G=s[o.subplot]._subplot;G?(F=G.radialAxis,N=G.angularAxis):(F=(G=s[o.subplot]).radialaxis,N=G.angularaxis);var Z=F.c2l(i.r);j.rLabel=_.tickText(F,Z,!0).text;var X="degrees"===N.thetaunit?x.rad2deg(i.theta):i.theta;return j.thetaLabel=_.tickText(N,X,!0).text,j}},59150:function(i,o,s){"use strict";var x=s(33720);function makeHoverPointText(i,o,s,x){var _=s.radialAxis,F=s.angularAxis;_._hovertitle="r",F._hovertitle="";var N={};N[o.subplot]={_subplot:s};var j=o._module.formatLabels(i,o,N);x.rLabel=j.rLabel,x.thetaLabel=j.thetaLabel;var G=i.hi||o.hoverinfo,Z=[];function textPart(i,o){Z.push(i._hovertitle+": "+o)}if(!o.hovertemplate){var X=G.split("+");-1!==X.indexOf("all")&&(X=["r","theta","text"]),-1!==X.indexOf("r")&&textPart(_,x.rLabel),-1!==X.indexOf("theta")&&textPart(F,x.thetaLabel),-1!==X.indexOf("text")&&x.text&&(Z.push(x.text),delete x.text),x.extraText=Z.join("<br>")}}i.exports={hoverPoints:function(i,o,s,_){var F=x(i,o,s,_);if(F&&!1!==F[0].index){var N=F[0];if(void 0===N.index)return F;var j=i.subplot,G=N.cd[N.index],Z=N.trace;if(j.isPtInside(G))return N.xLabelVal=void 0,N.yLabelVal=void 0,makeHoverPointText(G,Z,j,N),N.hovertemplate=Z.hovertemplate,F}},makeHoverPointText:makeHoverPointText}},91271:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:s(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:s(81245),supplyDefaults:s(22184).supplyDefaults,colorbar:s(4898),formatLabels:s(98608),calc:s(26442),plot:s(45162),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(59150).hoverPoints,selectPoints:s(98002),meta:{}}},45162:function(i,o,s){"use strict";var x=s(32663),_=s(50606).BADNUM;i.exports=function(i,o,s){for(var F=o.layers.frontplot.select("g.scatterlayer"),N=o.xaxis,j=o.yaxis,G={xaxis:N,yaxis:j,plot:o.framework,layerClipId:o._hasClipOnAxisFalse?o.clipIds.forTraces:null},Z=o.radialAxis,X=o.angularAxis,J=0;J<s.length;J++)for(var $=s[J],ee=0;ee<$.length;ee++){0===ee&&($[0].trace._xA=N,$[0].trace._yA=j);var et=$[ee],er=et.r;if(er===_)et.x=et.y=_;else{var en=Z.c2g(er),ei=X.c2g(et.theta);et.x=en*Math.cos(ei),et.y=en*Math.sin(ei)}}x(i,G,s,F)}},53286:function(i,o,s){"use strict";var x=s(81245),_=s(42341),F=s(5386).si;i.exports={mode:x.mode,r:x.r,theta:x.theta,r0:x.r0,dr:x.dr,theta0:x.theta0,dtheta:x.dtheta,thetaunit:x.thetaunit,text:x.text,texttemplate:F({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,hovertemplate:x.hovertemplate,line:_.line,connectgaps:_.connectgaps,marker:_.marker,fill:_.fill,fillcolor:_.fillcolor,textposition:_.textposition,textfont:_.textfont,hoverinfo:x.hoverinfo,selected:x.selected,unselected:x.unselected}},65746:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:s(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:s(53286),supplyDefaults:s(75485),colorbar:s(4898),formatLabels:s(46255),calc:s(37499),hoverPoints:s(29347).hoverPoints,selectPoints:s(58147),meta:{}}},37499:function(i,o,s){"use strict";var x=s(36922),_=s(47761).calcMarkerSize,F=s(19635),N=s(89298),j=s(78232).TOO_MANY_POINTS;i.exports=function(i,o){var s,G=i._fullLayout,Z=o.subplot,X=G[Z].radialaxis,J=G[Z].angularaxis,$=o._r=X.makeCalcdata(o,"r"),ee=o._theta=J.makeCalcdata(o,"theta"),et=o._length,er={};et<$.length&&($=$.slice(0,et)),et<ee.length&&(ee=ee.slice(0,et)),er.r=$,er.theta=ee,x(i,o);var en=er.opts=F.style(i,o);return et<j?s=_(o,et):en.marker&&(s=2*(en.marker.sizeAvg||Math.max(en.marker.size,3))),o._extremes.x=N.findExtremes(X,$,{ppad:s}),[{x:!1,y:!1,t:er,trace:o}]}},75485:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(22184).handleRThetaDefaults,N=s(49508),j=s(11058),G=s(82410),Z=s(28908),X=s(47581).PTS_LINESONLY,J=s(53286);i.exports=function(i,o,s,$){function coerce(s,_){return x.coerce(i,o,J,s,_)}var ee=F(i,o,$,coerce);if(!ee){o.visible=!1;return}coerce("thetaunit"),coerce("mode",ee<X?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),_.hasLines(o)&&(j(i,o,s,$,coerce),coerce("connectgaps")),_.hasMarkers(o)&&N(i,o,s,$,coerce,{noAngleRef:!0,noStandOff:!0}),_.hasText(o)&&(coerce("texttemplate"),G(i,o,$,coerce)),coerce("fill"),"none"!==o.fill&&Z(i,o,s,coerce),x.coerceSelectionMarkerOpacity(o,coerce)}},46255:function(i,o,s){"use strict";var x=s(98608);i.exports=function(i,o,s){var _=i.i;return"r"in i||(i.r=o._r[_]),"theta"in i||(i.theta=o._theta[_]),x(i,o,s)}},29347:function(i,o,s){"use strict";var x=s(20794),_=s(59150).makeHoverPointText;i.exports={hoverPoints:function(i,o,s,F){var N=i.cd[0].t,j=N.r,G=N.theta,Z=x.hoverPoints(i,o,s,F);if(Z&&!1!==Z[0].index){var X=Z[0];if(void 0===X.index)return Z;var J=i.subplot,$=X.cd[X.index],ee=X.trace;if($.r=j[X.index],$.theta=G[X.index],J.isPtInside($))return X.xLabelVal=void 0,X.yLabelVal=void 0,_($,ee,J,X),Z}}}},21461:function(i,o,s){"use strict";var x=s(65746);x.plot=s(49741),i.exports=x},49741:function(i,o,s){"use strict";var x=s(88294),_=s(92770),F=s(26787),N=s(38967),j=s(19635),G=s(71828),Z=s(78232).TOO_MANY_POINTS;i.exports=function(i,o,s){if(s.length){var X=o.radialAxis,J=o.angularAxis,$=N(i,o);return s.forEach(function(s){if(s&&s[0]&&s[0].trace){var F=s[0],N=F.trace,ee=F.t,et=N._length,er=ee.r,en=ee.theta,ei=ee.opts,eo=er.slice(),es=en.slice();for(ef=0;ef<er.length;ef++)o.isPtInside({r:er[ef],theta:en[ef]})||(eo[ef]=NaN,es[ef]=NaN);var el=Array(2*et),ec=Array(et),eu=Array(et);for(ef=0;ef<et;ef++){var ef,eh,ed,ep=eo[ef];if(_(ep)){var eg=X.c2g(ep),em=J.c2g(es[ef],N.thetaunit);eh=eg*Math.cos(em),ed=eg*Math.sin(em)}else eh=ed=NaN;ec[ef]=el[2*ef]=eh,eu[ef]=el[2*ef+1]=ed}ee.tree=x(el),ei.marker&&et>=Z&&(ei.marker.cluster=ee.tree),ei.marker&&(ei.markerSel.positions=ei.markerUnsel.positions=ei.marker.positions=el),ei.line&&el.length>1&&G.extendFlat(ei.line,j.linePositions(i,N,el)),ei.text&&(G.extendFlat(ei.text,{positions:el},j.textPosition(i,N,ei.text,ei.marker)),G.extendFlat(ei.textSel,{positions:el},j.textPosition(i,N,ei.text,ei.markerSel)),G.extendFlat(ei.textUnsel,{positions:el},j.textPosition(i,N,ei.text,ei.markerUnsel))),ei.fill&&!$.fill2d&&($.fill2d=!0),ei.marker&&!$.scatter2d&&($.scatter2d=!0),ei.line&&!$.line2d&&($.line2d=!0),ei.text&&!$.glText&&($.glText=!0),$.lineOptions.push(ei.line),$.fillOptions.push(ei.fill),$.markerOptions.push(ei.marker),$.markerSelectedOptions.push(ei.markerSel),$.markerUnselectedOptions.push(ei.markerUnsel),$.textOptions.push(ei.text),$.textSelectedOptions.push(ei.textSel),$.textUnselectedOptions.push(ei.textUnsel),$.selectBatch.push([]),$.unselectBatch.push([]),ee.x=ec,ee.y=eu,ee.rawx=ec,ee.rawy=eu,ee.r=er,ee.theta=en,ee.positions=el,ee._scene=$,ee.index=$.count,$.count++}}),F(i,o,s)}},i.exports.reglPrecompiled={}},48300:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(1426).extendFlat,N=s(82196),j=s(9012),G=N.line;i.exports={mode:N.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:N.text,texttemplate:_({editType:"plot"},{keys:["real","imag","text"]}),hovertext:N.hovertext,line:{color:G.color,width:G.width,dash:G.dash,backoff:G.backoff,shape:F({},G.shape,{values:["linear","spline"]}),smoothing:G.smoothing,editType:"calc"},connectgaps:N.connectgaps,marker:N.marker,cliponaxis:F({},N.cliponaxis,{dflt:!1}),textposition:N.textposition,textfont:N.textfont,fill:F({},N.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:N.fillcolor,hoverinfo:F({},j.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:N.hoveron,hovertemplate:x(),selected:N.selected,unselected:N.unselected}},30621:function(i,o,s){"use strict";var x=s(92770),_=s(50606).BADNUM,F=s(36922),N=s(75225),j=s(66279),G=s(47761).calcMarkerSize;i.exports=function(i,o){for(var s=i._fullLayout,Z=o.subplot,X=s[Z].realaxis,J=s[Z].imaginaryaxis,$=X.makeCalcdata(o,"real"),ee=J.makeCalcdata(o,"imag"),et=o._length,er=Array(et),en=0;en<et;en++){var ei=$[en],eo=ee[en],es=er[en]={};x(ei)&&x(eo)?(es.real=ei,es.imag=eo):es.real=_}return G(o,et),F(i,o),N(er,o),j(er,o),er}},65269:function(i,o,s){"use strict";var x=s(71828),_=s(34098),F=s(49508),N=s(11058),j=s(94039),G=s(82410),Z=s(28908),X=s(47581).PTS_LINESONLY,J=s(48300);i.exports=function(i,o,s,$){function coerce(s,_){return x.coerce(i,o,J,s,_)}var ee,et,er,en=(et=coerce("real"),er=coerce("imag"),et&&er&&(ee=Math.min(et.length,er.length)),o._length=ee,ee);if(!en){o.visible=!1;return}coerce("mode",en<X?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),_.hasLines(o)&&(N(i,o,s,$,coerce,{backoff:!0}),j(i,o,coerce),coerce("connectgaps")),_.hasMarkers(o)&&F(i,o,s,$,coerce,{gradient:!0}),_.hasText(o)&&(coerce("texttemplate"),G(i,o,$,coerce));var ei=[];(_.hasMarkers(o)||_.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ei.push("points")),coerce("fill"),"none"===o.fill||(Z(i,o,s,coerce),_.hasLines(o)||j(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&ei.push("fills"),coerce("hoveron",ei.join("+")||"points"),x.coerceSelectionMarkerOpacity(o,coerce)}},62047:function(i,o,s){"use strict";var x=s(89298);i.exports=function(i,o,s){var _={},F=s[o.subplot]._subplot;return _.realLabel=x.tickText(F.radialAxis,i.real,!0).text,_.imagLabel=x.tickText(F.angularAxis,i.imag,!0).text,_}},11350:function(i,o,s){"use strict";var x=s(33720);function makeHoverPointText(i,o,s,x){var _=s.radialAxis,F=s.angularAxis;_._hovertitle="real",F._hovertitle="imag";var N={};N[o.subplot]={_subplot:s};var j=o._module.formatLabels(i,o,N);x.realLabel=j.realLabel,x.imagLabel=j.imagLabel;var G=i.hi||o.hoverinfo,Z=[];function textPart(i,o){Z.push(i._hovertitle+": "+o)}if(!o.hovertemplate){var X=G.split("+");-1!==X.indexOf("all")&&(X=["real","imag","text"]),-1!==X.indexOf("real")&&textPart(_,x.realLabel),-1!==X.indexOf("imag")&&textPart(F,x.imagLabel),-1!==X.indexOf("text")&&x.text&&(Z.push(x.text),delete x.text),x.extraText=Z.join("<br>")}}i.exports={hoverPoints:function(i,o,s,_){var F=x(i,o,s,_);if(F&&!1!==F[0].index){var N=F[0];if(void 0===N.index)return F;var j=i.subplot,G=N.cd[N.index],Z=N.trace;if(j.isPtInside(G))return N.xLabelVal=void 0,N.yLabelVal=void 0,makeHoverPointText(G,Z,j,N),N.hovertemplate=Z.hovertemplate,F}},makeHoverPointText:makeHoverPointText}},85956:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scattersmith",basePlotModule:s(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:s(48300),supplyDefaults:s(65269),colorbar:s(4898),formatLabels:s(62047),calc:s(30621),plot:s(12480),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(11350).hoverPoints,selectPoints:s(98002),meta:{}}},12480:function(i,o,s){"use strict";var x=s(32663),_=s(50606).BADNUM,F=s(23893).smith;i.exports=function(i,o,s){for(var N=o.layers.frontplot.select("g.scatterlayer"),j=o.xaxis,G=o.yaxis,Z={xaxis:j,yaxis:G,plot:o.framework,layerClipId:o._hasClipOnAxisFalse?o.clipIds.forTraces:null},X=0;X<s.length;X++)for(var J=s[X],$=0;$<J.length;$++){0===$&&(J[0].trace._xA=j,J[0].trace._yA=G);var ee=J[$],et=ee.real;if(et===_)ee.x=ee.y=_;else{var er=F([et,ee.imag]);ee.x=er[0],ee.y=er[1]}}x(i,Z,s,N)}},50413:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(82196),N=s(9012),j=s(50693),G=s(79952).P,Z=s(1426).extendFlat,X=F.marker,J=F.line,$=X.line;i.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:Z({},F.mode,{dflt:"markers"}),text:Z({},F.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:Z({},F.hovertext,{}),line:{color:J.color,width:J.width,dash:G,backoff:J.backoff,shape:Z({},J.shape,{values:["linear","spline"]}),smoothing:J.smoothing,editType:"calc"},connectgaps:F.connectgaps,cliponaxis:F.cliponaxis,fill:Z({},F.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:F.fillcolor,marker:Z({symbol:X.symbol,opacity:X.opacity,angle:X.angle,angleref:X.angleref,standoff:X.standoff,maxdisplayed:X.maxdisplayed,size:X.size,sizeref:X.sizeref,sizemin:X.sizemin,sizemode:X.sizemode,line:Z({width:$.width,editType:"calc"},j("marker.line")),gradient:X.gradient,editType:"calc"},j("marker")),textfont:F.textfont,textposition:F.textposition,selected:F.selected,unselected:F.unselected,hoverinfo:Z({},N.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:F.hoveron,hovertemplate:x()}},54337:function(i,o,s){"use strict";var x=s(92770),_=s(36922),F=s(75225),N=s(66279),j=s(47761).calcMarkerSize,G=["a","b","c"],Z={a:["b","c"],b:["a","c"],c:["a","b"]};i.exports=function(i,o){var s,X,J,$,ee,et,er,en,ei,eo,es,el,ec=i._fullLayout[o.subplot].sum,eu=o.sum||ec,ef={a:o.a,b:o.b,c:o.c};for(s=0;s<G.length;s++)if(!ef[J=G[s]]){for(X=0,ee=ef[Z[J][0]],et=ef[Z[J][1]],$=Array(ee.length);X<ee.length;X++)$[X]=eu-ee[X]-et[X];ef[J]=$}var eh=o._length,ed=Array(eh);for(s=0;s<eh;s++)er=ef.a[s],en=ef.b[s],ei=ef.c[s],x(er)&&x(en)&&x(ei)?(1!=(eo=ec/((er=+er)+(en=+en)+(ei=+ei)))&&(er*=eo,en*=eo,ei*=eo),el=er,es=ei-en,ed[s]={x:es,y:el,a:er,b:en,c:ei}):ed[s]={x:!1,y:!1};return j(o,eh),_(i,o),F(ed,o),N(ed,o),ed}},46008:function(i,o,s){"use strict";var x=s(71828),_=s(47581),F=s(34098),N=s(49508),j=s(11058),G=s(94039),Z=s(82410),X=s(28908),J=s(50413);i.exports=function(i,o,s,$){function coerce(s,_){return x.coerce(i,o,J,s,_)}var ee,et=coerce("a"),er=coerce("b"),en=coerce("c");if(et?(ee=et.length,er?(ee=Math.min(ee,er.length),en&&(ee=Math.min(ee,en.length))):ee=en?Math.min(ee,en.length):0):er&&en&&(ee=Math.min(er.length,en.length)),!ee){o.visible=!1;return}o._length=ee,coerce("sum"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),coerce("mode",ee<_.PTS_LINESONLY?"lines+markers":"lines"),F.hasLines(o)&&(j(i,o,s,$,coerce,{backoff:!0}),G(i,o,coerce),coerce("connectgaps")),F.hasMarkers(o)&&N(i,o,s,$,coerce,{gradient:!0}),F.hasText(o)&&(coerce("texttemplate"),Z(i,o,$,coerce));var ei=[];(F.hasMarkers(o)||F.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ei.push("points")),coerce("fill"),"none"===o.fill||(X(i,o,s,coerce),F.hasLines(o)||G(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&ei.push("fills"),coerce("hoveron",ei.join("+")||"points"),x.coerceSelectionMarkerOpacity(o,coerce)}},4524:function(i){"use strict";i.exports=function(i,o,s,x,_){if(o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),x[_]){var F=x[_];i.a=F.a,i.b=F.b,i.c=F.c}else i.a=o.a,i.b=o.b,i.c=o.c;return i}},93645:function(i,o,s){"use strict";var x=s(89298);i.exports=function(i,o,s){var _={},F=s[o.subplot]._subplot;return _.aLabel=x.tickText(F.aaxis,i.a,!0).text,_.bLabel=x.tickText(F.baxis,i.b,!0).text,_.cLabel=x.tickText(F.caxis,i.c,!0).text,_}},47250:function(i,o,s){"use strict";var x=s(33720);i.exports=function(i,o,s,_){var F=x(i,o,s,_);if(F&&!1!==F[0].index){var N=F[0];if(void 0===N.index){var j=1-N.y0/i.ya._length,G=i.xa._length,Z=G*j/2,X=G-Z;return N.x0=Math.max(Math.min(N.x0,X),Z),N.x1=Math.max(Math.min(N.x1,X),Z),F}var J=N.cd[N.index],$=N.trace,ee=N.subplot;N.a=J.a,N.b=J.b,N.c=J.c,N.xLabelVal=void 0,N.yLabelVal=void 0;var et={};et[$.subplot]={_subplot:ee};var er=$._module.formatLabels(J,$,et);N.aLabel=er.aLabel,N.bLabel=er.bLabel,N.cLabel=er.cLabel;var en=J.hi||$.hoverinfo,ei=[];if(!$.hovertemplate){var eo=en.split("+");-1!==eo.indexOf("all")&&(eo=["a","b","c"]),-1!==eo.indexOf("a")&&textPart(ee.aaxis,N.aLabel),-1!==eo.indexOf("b")&&textPart(ee.baxis,N.bLabel),-1!==eo.indexOf("c")&&textPart(ee.caxis,N.cLabel)}return N.extraText=ei.join("<br>"),N.hovertemplate=$.hovertemplate,F}function textPart(i,o){ei.push(i._hovertitle+": "+o)}}},52979:function(i,o,s){"use strict";i.exports={attributes:s(50413),supplyDefaults:s(46008),colorbar:s(4898),formatLabels:s(93645),calc:s(54337),plot:s(7507),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(47250),selectPoints:s(98002),eventData:s(4524),moduleType:"trace",name:"scatterternary",basePlotModule:s(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(i,o,s){"use strict";var x=s(32663);i.exports=function(i,o,s){var _=o.plotContainer;_.select(".scatterlayer").selectAll("*").remove();for(var F=o.xaxis,N=o.yaxis,j={xaxis:F,yaxis:N,plot:_,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},G=o.layers.frontplot.select("g.scatterlayer"),Z=0;Z<s.length;Z++){var X=s[Z];X.length&&(X[0].trace._xA=F,X[0].trace._yA=N)}x(i,j,s,G)}},46880:function(i,o,s){"use strict";var x=s(82196),_=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(42341),G=s(85555).idRegex,Z=s(44467).templatedArray,X=s(1426).extendFlat,J=x.marker,$=J.line,ee=X(_("marker.line",{editTypeOverride:"calc"}),{width:X({},$.width,{editType:"calc"}),editType:"calc"}),et=X(_("marker"),{symbol:J.symbol,angle:J.angle,size:X({},J.size,{editType:"markerSize"}),sizeref:J.sizeref,sizemin:J.sizemin,sizemode:J.sizemode,opacity:J.opacity,colorbar:J.colorbar,line:ee,editType:"calc"});function makeAxesValObject(i){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:G[i],editType:"plot"}}}et.color.editType=et.cmin.editType=et.cmax.editType="style",i.exports={dimensions:Z("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:X({},j.text,{}),hovertext:X({},j.hovertext,{}),hovertemplate:N(),xhoverformat:F("x"),yhoverformat:F("y"),marker:et,xaxes:makeAxesValObject("x"),yaxes:makeAxesValObject("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:j.selected.marker,editType:"calc"},unselected:{marker:j.unselected.marker,editType:"calc"},opacity:j.opacity}},65017:function(i,o,s){"use strict";var x=s(73972),_=s(83312);i.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:s(46880),supplyDefaults:s(25784),colorbar:s(4898),calc:s(87625),plot:s(79410),hoverPoints:s(8567).hoverPoints,selectPoints:s(8689),editStyle:s(28801),meta:{}},x.register(_)},16947:function(i,o,s){"use strict";var x=s(46075),_=s(73972),F=s(79749),N=s(27659).a0,j=s(93612),G=s(41675).getFromId,Z=s(89298).shouldShowZeroLine,X="splom",J={};function updateGrid(i){var o=i._fullLayout,s=o._glcanvas.data()[0].regl,_=o._splomGrid;_||(_=o._splomGrid=x(s)),_.update(function(i){var o=i._context.plotGlPixelRatio,s=i._fullLayout,x=s._size,_=[0,0,s.width*o,s.height*o],F={};function push(i,s,x,N,j,G){x*=o,N*=o,j*=o,G*=o;var Z=s[i+"color"],X=s[i+"width"],J=String(Z+X);J in F?F[J].data.push(NaN,NaN,x,N,j,G):F[J]={data:[x,N,j,G],join:"rect",thickness:X*o,color:Z,viewport:_,range:_,overlay:!1}}for(N in s._splomSubplots){var N,j,G,X=s._plots[N],J=X.xaxis,$=X.yaxis,ee=J._gridVals,et=$._gridVals,er=J._offset,en=J._length,ei=$._length,eo=x.b+$.domain[0]*x.h,es=-$._m,el=-es*$.r2l($.range[0],$.calendar);if(J.showgrid)for(N=0;N<ee.length;N++)j=er+J.l2p(ee[N].x),push("grid",J,j,eo,j,eo+ei);if($.showgrid)for(N=0;N<et.length;N++)push("grid",$,er,G=eo+el+es*et[N].x,er+en,G);Z(i,J,$)&&(j=er+J.l2p(0),push("zeroline",J,j,eo,j,eo+ei)),Z(i,$,J)&&push("zeroline",$,er,G=eo+el+0,er+en,G)}var ec=[];for(N in F)ec.push(F[N]);return ec}(i))}i.exports={name:X,attr:j.attr,attrRegex:j.attrRegex,layoutAttributes:j.layoutAttributes,supplyLayoutDefaults:j.supplyLayoutDefaults,drawFramework:j.drawFramework,plot:function(i){var o=i._fullLayout,s=_.getModule(X),x=N(i.calcdata,s)[0];F(i,["ANGLE_instanced_arrays","OES_element_index_uint"],J)&&(o._hasOnlyLargeSploms&&updateGrid(i),s.plot(i,{},x))},drag:function(i){var o=i.calcdata,s=i._fullLayout;s._hasOnlyLargeSploms&&updateGrid(i);for(var x=0;x<o.length;x++){var _=o[x][0].trace,F=s._splomScenes[_.uid];"splom"===_.type&&F&&F.matrix&&function(i,o,s){for(var x=s.matrixOptions.data.length,_=o._visibleDims,F=s.viewOpts.ranges=Array(x),N=0;N<_.length;N++){var j=_[N],Z=F[N]=[,,,,],X=G(i,o._diag[j][0]);X&&(Z[0]=X.r2l(X.range[0]),Z[2]=X.r2l(X.range[1]));var J=G(i,o._diag[j][1]);J&&(Z[1]=J.r2l(J.range[0]),Z[3]=J.r2l(J.range[1]))}s.selectBatch.length||s.unselectBatch.length?s.matrix.update({ranges:F},{ranges:F}):s.matrix.update({ranges:F})}(i,_,F)}},updateGrid:updateGrid,clean:function(i,o,s,x){var _,F={};if(x._splomScenes){for(_=0;_<i.length;_++){var N=i[_];"splom"===N.type&&(F[N.uid]=1)}for(_=0;_<s.length;_++){var G=s[_];if(!F[G.uid]){var Z=x._splomScenes[G.uid];Z&&Z.destroy&&Z.destroy(),x._splomScenes[G.uid]=null,delete x._splomScenes[G.uid]}}}0===Object.keys(x._splomScenes||{}).length&&delete x._splomScenes,x._splomGrid&&!o._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),j.clean(i,o,s,x)},updateFx:j.updateFx,toSVG:j.toSVG,reglPrecompiled:J}},87625:function(i,o,s){"use strict";var x=s(71828),_=s(41675),F=s(47761).calcMarkerSize,N=s(47761).calcAxisExpansion,j=s(36922),G=s(19635).markerSelection,Z=s(19635).markerStyle,X=s(10164),J=s(50606).BADNUM,$=s(78232).TOO_MANY_POINTS;i.exports=function(i,o){var s,ee,et,er,en,ei,eo=o.dimensions,es=o._length,el={},ec=el.cdata=[],eu=el.data=[],ef=o._visibleDims=[];function makeCalcdata(i,s){for(var _=i.makeCalcdata({v:s.values,vcalendar:o.calendar},"v"),F=0;F<_.length;F++)_[F]=_[F]===J?NaN:_[F];ec.push(_),eu.push("log"===i.type?x.simpleMap(_,i.c2l):_)}for(s=0;s<eo.length;s++)if((et=eo[s]).visible){if(er=_.getFromId(i,o._diag[s][0]),en=_.getFromId(i,o._diag[s][1]),er&&en&&er.type!==en.type){x.log("Skipping splom dimension "+s+" with conflicting axis types");continue}er?(makeCalcdata(er,et),en&&"category"===en.type&&(en._categories=er._categories.slice())):makeCalcdata(en,et),ef.push(s)}for(j(i,o),x.extendFlat(el,Z(i,o)),ei=ec.length*es>$?el.sizeAvg||Math.max(el.size,3):F(o,es),ee=0;ee<ef.length;ee++)et=eo[s=ef[ee]],er=_.getFromId(i,o._diag[s][0])||{},en=_.getFromId(i,o._diag[s][1])||{},N(i,o,er,en,ec[ee],ec[ee],ei);var eh=X(i,o);return eh.matrix||(eh.matrix=!0),eh.matrixOptions=el,eh.selectedOptions=G(i,o,o.selected),eh.unselectedOptions=G(i,o,o.unselected),[{x:!1,y:!1,t:{},trace:o}]}},25784:function(i,o,s){"use strict";var x=s(71828),_=s(85501),F=s(46880),N=s(34098),j=s(49508),G=s(94397),Z=s(68645).isOpenSymbol;function dimensionDefaults(i,o){function coerce(s,_){return x.coerce(i,o,F.dimensions,s,_)}coerce("label");var s=coerce("values");s&&s.length?coerce("visible"):o.visible=!1,coerce("axis.type"),coerce("axis.matches")}i.exports=function(i,o,s,X){function coerce(s,_){return x.coerce(i,o,F,s,_)}var J=_(i,o,{name:"dimensions",handleItemDefaults:dimensionDefaults}),$=coerce("diagonal.visible"),ee=coerce("showupperhalf"),et=coerce("showlowerhalf");if(!G(o,J,"values")||!$&&!ee&&!et){o.visible=!1;return}coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),j(i,o,s,X,coerce,{noAngleRef:!0,noStandOff:!0});var er=Z(o.marker.symbol),en=N.isBubble(o);coerce("marker.line.width",er||en?1:0),function(i,o,s,x){var _,F,N=o.dimensions,j=N.length,G=o.showupperhalf,Z=o.showlowerhalf,X=o.diagonal.visible,J=Array(j),$=Array(j);for(_=0;_<j;_++){var ee=_?_+1:"";J[_]="x"+ee,$[_]="y"+ee}var et=x("xaxes",J),er=x("yaxes",$),en=o._diag=Array(j);o._xaxes={},o._yaxes={};var ei=[],eo=[];function fillAxisStashes(i,x,_,F){if(i){var N=i.charAt(0),j=s._splomAxes[N];if(o["_"+N+"axes"][i]=1,F.push(i),!(i in j)){var G=j[i]={};_&&(G.label=_.label||"",_.visible&&_.axis&&(_.axis.type&&(G.type=_.axis.type),_.axis.matches&&(G.matches=x)))}}}var es=!X&&!Z,el=!X&&!G;for(_=0,o._axesDim={};_<j;_++){var ec=N[_],eu=0===_,ef=_===j-1,eh=eu&&es||ef&&el?void 0:et[_],ed=eu&&el||ef&&es?void 0:er[_];fillAxisStashes(eh,ed,ec,ei),fillAxisStashes(ed,eh,ec,eo),en[_]=[eh,ed],o._axesDim[eh]=_,o._axesDim[ed]=_}for(_=0;_<ei.length;_++)for(F=0;F<eo.length;F++){var ep=ei[_]+eo[F];_>F&&G?s._splomSubplots[ep]=1:_<F&&Z?s._splomSubplots[ep]=1:_!==F||!X&&Z&&G||(s._splomSubplots[ep]=1)}(!Z||!X&&G&&Z)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}(0,o,X,coerce),x.coerceSelectionMarkerOpacity(o,coerce)}},28801:function(i,o,s){"use strict";var x=s(71828),_=s(36922),F=s(19635).markerStyle;i.exports=function(i,o){var s=o.trace,N=i._fullLayout._splomScenes[s.uid];if(N){_(i,s),x.extendFlat(N.matrixOptions,F(i,s));var j=x.extendFlat({},N.matrixOptions,N.viewOpts);N.matrix.update(j,null)}}},35948:function(i,o){"use strict";o.getDimIndex=function(i,o){for(var s=o._id,x={x:0,y:1}[s.charAt(0)],_=i._visibleDims,F=0;F<_.length;F++){var N=_[F];if(i._diag[N][x]===s)return F}return!1}},8567:function(i,o,s){"use strict";var x=s(35948),_=s(20794).calcHover;i.exports={hoverPoints:function(i,o,s){var F,N,j=i.cd[0].trace,G=i.scene.matrixOptions.cdata,Z=i.xa,X=i.ya,J=Z.c2p(o),$=X.c2p(s),ee=i.distance,et=x.getDimIndex(j,Z),er=x.getDimIndex(j,X);if(!1===et||!1===er)return[i];for(var en=G[et],ei=G[er],eo=ee,es=0;es<en.length;es++){var el=en[es],ec=ei[es],eu=Z.c2p(el)-J,ef=X.c2p(ec)-$,eh=Math.sqrt(eu*eu+ef*ef);eh<eo&&(eo=N=eh,F=es)}return(i.index=F,i.distance=eo,i.dxy=N,void 0===F)?[i]:[_(i,en,ei,j)]}}},6419:function(i,o,s){"use strict";var x=s(65017);x.basePlotModule=s(16947),i.exports=x},79410:function(i,o,s){"use strict";var x=s(60487),_=s(71828),F=s(41675),N=s(64505).selectMode;i.exports=function(i,o,s){if(s.length)for(var j=0;j<s.length;j++)(function(i,o){var s,j,G,Z,X,J=i._fullLayout,$=J._size,ee=o.trace,et=o.t,er=J._splomScenes[ee.uid],en=er.matrixOptions,ei=en.cdata,eo=J._glcanvas.data()[0].regl,es=J.dragmode;if(0!==ei.length){en.lower=ee.showupperhalf,en.upper=ee.showlowerhalf,en.diagonal=ee.diagonal.visible;var el=ee._visibleDims,ec=ei.length,eu=er.viewOpts={};for(X=0,eu.ranges=Array(ec),eu.domains=Array(ec);X<el.length;X++){G=el[X];var ef=eu.ranges[X]=[,,,,],eh=eu.domains[X]=[,,,,];(s=F.getFromId(i,ee._diag[G][0]))&&(ef[0]=s._rl[0],ef[2]=s._rl[1],eh[0]=s.domain[0],eh[2]=s.domain[1]),(j=F.getFromId(i,ee._diag[G][1]))&&(ef[1]=j._rl[0],ef[3]=j._rl[1],eh[1]=j.domain[0],eh[3]=j.domain[1])}var ed=i._context.plotGlPixelRatio,ep=$.l*ed,eg=$.b*ed,em=$.w*ed,ey=$.h*ed;eu.viewport=[ep,eg,em+ep,ey+eg],!0===er.matrix&&(er.matrix=x(eo));var ev=J.clickmode.indexOf("select")>-1,ex=N(es)||!!ee.selectedpoints||ev,e_=!0;if(ex){var ew=ee._length;if(ee.selectedpoints){er.selectBatch=ee.selectedpoints;var eT=ee.selectedpoints,ek={};for(G=0;G<eT.length;G++)ek[eT[G]]=!0;var eA=[];for(G=0;G<ew;G++)ek[G]||eA.push(G);er.unselectBatch=eA}var eS=et.xpx=Array(ec),eM=et.ypx=Array(ec);for(X=0;X<el.length;X++){if(G=el[X],s=F.getFromId(i,ee._diag[G][0]))for(Z=0,eS[X]=Array(ew);Z<ew;Z++)eS[X][Z]=s.c2p(ei[X][Z]);if(j=F.getFromId(i,ee._diag[G][1]))for(Z=0,eM[X]=Array(ew);Z<ew;Z++)eM[X][Z]=j.c2p(ei[X][Z])}if(er.selectBatch.length||er.unselectBatch.length){var eC=_.extendFlat({},en,er.unselectedOptions,eu),eE=_.extendFlat({},en,er.selectedOptions,eu);er.matrix.update(eC,eE),e_=!1}}else et.xpx=et.ypx=null;if(e_){var eL=_.extendFlat({},en,eu);er.matrix.update(eL,null)}}})(i,s[j][0])}},10164:function(i,o,s){"use strict";var x=s(71828);i.exports=function(i,o){var s=i._fullLayout,_=o.uid,F=s._splomScenes;F||(F=s._splomScenes={});var N={dirty:!0,selectBatch:[],unselectBatch:[]},j=F[o.uid];return j||((j=F[_]=x.extendFlat({},N,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){j.matrix&&j.matrix.draw&&(j.selectBatch.length||j.unselectBatch.length?j.matrix.draw(j.unselectBatch,j.selectBatch):j.matrix.draw()),j.dirty=!1},j.destroy=function(){j.matrix&&j.matrix.destroy&&j.matrix.destroy(),j.matrixOptions=null,j.selectBatch=null,j.unselectBatch=null,j=null}),j.dirty||x.extendFlat(j,N),j}},8689:function(i,o,s){"use strict";var x=s(71828),_=x.pushUnique,F=s(34098),N=s(35948);i.exports=function(i,o){var s=i.cd,j=s[0].trace,G=s[0].t,Z=i.scene,X=Z.matrixOptions.cdata,J=i.xaxis,$=i.yaxis,ee=[];if(!Z)return ee;var et=!F.hasMarkers(j)&&!F.hasText(j);if(!0!==j.visible||et)return ee;var er=N.getDimIndex(j,J),en=N.getDimIndex(j,$);if(!1===er||!1===en)return ee;var ei=G.xpx[er],eo=G.ypx[en],es=X[er],el=X[en],ec=(i.scene.selectBatch||[]).slice(),eu=[];if(!1!==o&&!o.degenerate)for(var ef=0;ef<es.length;ef++)o.contains([ei[ef],eo[ef]],null,ef,i)?(ee.push({pointNumber:ef,x:es[ef],y:el[ef]}),_(ec,ef)):-1!==ec.indexOf(ef)?_(ec,ef):eu.push(ef);var eh=Z.matrixOptions;return ec.length||eu.length?Z.selectBatch.length||Z.unselectBatch.length||Z.matrix.update(Z.unselectedOptions,x.extendFlat({},eh,Z.selectedOptions,Z.viewOpts)):Z.matrix.update(eh,null),Z.selectBatch=ec,Z.unselectBatch=eu,ee}},21850:function(i,o,s){"use strict";var x=s(50693),_=s(12663).axisHoverFormat,F=s(5386).fF,N=s(2418),j=s(9012),G=s(1426).extendFlat,Z={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:F({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:_("u",1),vhoverformat:_("v",1),whoverformat:_("w",1),xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z"),showlegend:G({},j.showlegend,{dflt:!1})};G(Z,x("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){Z[i]=N[i]}),Z.hoverinfo=G({},j.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),Z.transforms=void 0,i.exports=Z},88489:function(i,o,s){"use strict";var x=s(71828),_=s(78803);function processGrid(i){var o,s,_,F,N,j,G,Z,X,J,$,ee,et=i._x,er=i._y,en=i._z,ei=i._len,eo=-1/0,es=1/0,el=-1/0,ec=1/0,eu=-1/0,ef=1/0,eh="";for(ei&&(G=et[0],X=er[0],$=en[0]),ei>1&&(Z=et[ei-1],J=er[ei-1],ee=en[ei-1]),o=0;o<ei;o++)eo=Math.max(eo,et[o]),es=Math.min(es,et[o]),el=Math.max(el,er[o]),ec=Math.min(ec,er[o]),eu=Math.max(eu,en[o]),ef=Math.min(ef,en[o]),F||et[o]===G||(F=!0,eh+="x"),N||er[o]===X||(N=!0,eh+="y"),j||en[o]===$||(j=!0,eh+="z");F||(eh+="x"),N||(eh+="y"),j||(eh+="z");var ed=distinctVals(i._x),ep=distinctVals(i._y),eg=distinctVals(i._z);eh=(eh=(eh=eh.replace("x",(G>Z?"-":"+")+"x")).replace("y",(X>J?"-":"+")+"y")).replace("z",($>ee?"-":"+")+"z");var empty=function(){ei=0,ed=[],ep=[],eg=[]};(!ei||ei<ed.length*ep.length*eg.length)&&empty();var getArray=function(i){return"x"===i?et:"y"===i?er:en},getVals=function(i){return"x"===i?ed:"y"===i?ep:eg},getDir=function(i){return i[ei-1]<i[0]?-1:1},em=getArray(eh[1]),ey=getArray(eh[3]),ev=getArray(eh[5]),ex=getVals(eh[1]).length,e_=getVals(eh[3]).length,ew=getVals(eh[5]).length,eT=!1,getIndex=function(i,o,s){return ex*(e_*i+o)+s},ek=getDir(getArray(eh[1])),eA=getDir(getArray(eh[3])),eS=getDir(getArray(eh[5]));for(o=0;o<ew-1;o++){for(s=0;s<e_-1;s++){for(_=0;_<ex-1;_++){var eM=getIndex(o,s,_),eC=getIndex(o,s,_+1),eE=getIndex(o,s+1,_),eL=getIndex(o+1,s,_);if(em[eM]*ek<em[eC]*ek&&ey[eM]*eA<ey[eE]*eA&&ev[eM]*eS<ev[eL]*eS||(eT=!0),eT)break}if(eT)break}if(eT)break}return eT&&(x.warn("Encountered arbitrary coordinates! Unable to input data grid."),empty()),{xMin:es,yMin:ec,zMin:ef,xMax:eo,yMax:el,zMax:eu,Xs:ed,Ys:ep,Zs:eg,len:ei,fill:eh}}function distinctVals(i){return x.distinctVals(i).vals}function filter(i,o){if(void 0===o&&(o=i.length),x.isTypedArray(i))return i.subarray(0,o);for(var s=[],_=0;_<o;_++)s[_]=+i[_];return s}i.exports={calc:function(i,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=filter(o.u,o._len),o._v=filter(o.v,o._len),o._w=filter(o.w,o._len),o._x=filter(o.x,o._len),o._y=filter(o.y,o._len),o._z=filter(o.z,o._len);var s,x,F,N,j=processGrid(o);o._gridFill=j.fill,o._Xs=j.Xs,o._Ys=j.Ys,o._Zs=j.Zs,o._len=j.len;var G=0;o.starts&&(s=filter(o.starts.x||[]),x=filter(o.starts.y||[]),F=filter(o.starts.z||[]),G=Math.min(s.length,x.length,F.length)),o._startsX=s||[],o._startsY=x||[],o._startsZ=F||[];var Z=0,X=1/0;for(N=0;N<o._len;N++){var J=o._u[N],$=o._v[N],ee=o._w[N],et=Math.sqrt(J*J+$*$+ee*ee);Z=Math.max(Z,et),X=Math.min(X,et)}for(_(i,o,{vals:[X,Z],containerStr:"",cLetter:"c"}),N=0;N<G;N++){var er=s[N];j.xMax=Math.max(j.xMax,er),j.xMin=Math.min(j.xMin,er);var en=x[N];j.yMax=Math.max(j.yMax,en),j.yMin=Math.min(j.yMin,en);var ei=F[N];j.zMax=Math.max(j.zMax,ei),j.zMin=Math.min(j.zMin,ei)}o._slen=G,o._normMax=Z,o._xbnds=[j.xMin,j.xMax],o._ybnds=[j.yMin,j.yMax],o._zbnds=[j.zMin,j.zMax]},filter:filter,processGrid:processGrid}},90154:function(i,o,s){"use strict";var x=s(9330).gl_streamtube3d,_=x.createTubeMesh,F=s(71828),N=s(81697).parseColorScale,j=s(21081).extractOpts,G=s(90060),Z={xaxis:0,yaxis:1,zaxis:2};function Streamtube(i,o){this.scene=i,this.uid=o,this.mesh=null,this.data=null}var X=Streamtube.prototype;function getDfltStartingPositions(i){var o=i.length;return o>2?i.slice(1,o-1):2===o?[(i[0]+i[1])/2]:i}function getBoundPads(i){var o=i.length;return 1===o?[.5,.5]:[i[1]-i[0],i[o-1]-i[o-2]]}function convert(i,o){var s=i.fullSceneLayout,_=i.dataScale,X=o._len,J={};function toDataCoords(i,o){var x=s[o],N=_[Z[o]];return F.simpleMap(i,function(i){return x.d2l(i)*N})}if(J.vectors=G(toDataCoords(o._u,"xaxis"),toDataCoords(o._v,"yaxis"),toDataCoords(o._w,"zaxis"),X),!X)return{positions:[],cells:[]};var $=toDataCoords(o._Xs,"xaxis"),ee=toDataCoords(o._Ys,"yaxis"),et=toDataCoords(o._Zs,"zaxis");if(J.meshgrid=[$,ee,et],J.gridFill=o._gridFill,o._slen)J.startingPositions=G(toDataCoords(o._startsX,"xaxis"),toDataCoords(o._startsY,"yaxis"),toDataCoords(o._startsZ,"zaxis"));else{for(var er=ee[0],en=getDfltStartingPositions($),ei=getDfltStartingPositions(et),eo=Array(en.length*ei.length),es=0,el=0;el<en.length;el++)for(var ec=0;ec<ei.length;ec++)eo[es++]=[en[el],er,ei[ec]];J.startingPositions=eo}J.colormap=N(o),J.tubeSize=o.sizeref,J.maxLength=o.maxdisplayed;var eu=toDataCoords(o._xbnds,"xaxis"),ef=toDataCoords(o._ybnds,"yaxis"),eh=toDataCoords(o._zbnds,"zaxis"),ed=getBoundPads($),ep=getBoundPads(ee),eg=getBoundPads(et),em=x(J,[[eu[0]-ed[0],ef[0]-ep[0],eh[0]-eg[0]],[eu[1]+ed[1],ef[1]+ep[1],eh[1]+eg[1]]]),ey=j(o);em.vertexIntensityBounds=[ey.min/o._normMax,ey.max/o._normMax];var ev=o.lightposition;return em.lightPosition=[ev.x,ev.y,ev.z],em.ambient=o.lighting.ambient,em.diffuse=o.lighting.diffuse,em.specular=o.lighting.specular,em.roughness=o.lighting.roughness,em.fresnel=o.lighting.fresnel,em.opacity=o.opacity,o._pad=em.tubeScale*o.sizeref*2,em}X.handlePick=function(i){var o=this.scene.fullSceneLayout,s=this.scene.dataScale;function fromDataScale(i,x){var _=o[x],F=s[Z[x]];return _.l2c(i)/F}if(i.object===this.mesh){var x=i.data.position,_=i.data.velocity;return i.traceCoordinate=[fromDataScale(x[0],"xaxis"),fromDataScale(x[1],"yaxis"),fromDataScale(x[2],"zaxis"),fromDataScale(_[0],"xaxis"),fromDataScale(_[1],"yaxis"),fromDataScale(_[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},X.update=function(i){this.data=i;var o=convert(this.scene,i);this.mesh.update(o)},X.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=function(i,o){var s=_(i.glplot.gl,convert(i,o)),x=new Streamtube(i,o.uid);return x.mesh=s,x.data=o,s._trace=x,i.glplot.add(s),x}},22459:function(i,o,s){"use strict";var x=s(71828),_=s(1586),F=s(21850);i.exports=function(i,o,s,N){function coerce(s,_){return x.coerce(i,o,F,s,_)}var j=coerce("u"),G=coerce("v"),Z=coerce("w"),X=coerce("x"),J=coerce("y"),$=coerce("z");if(!j||!j.length||!G||!G.length||!Z||!Z.length||!X||!X.length||!J||!J.length||!$||!$.length){o.visible=!1;return}coerce("starts.x"),coerce("starts.y"),coerce("starts.z"),coerce("maxdisplayed"),coerce("sizeref"),coerce("lighting.ambient"),coerce("lighting.diffuse"),coerce("lighting.specular"),coerce("lighting.roughness"),coerce("lighting.fresnel"),coerce("lightposition.x"),coerce("lightposition.y"),coerce("lightposition.z"),_(i,o,N,coerce,{prefix:"",cLetter:"c"}),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("uhoverformat"),coerce("vhoverformat"),coerce("whoverformat"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},61510:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"streamtube",basePlotModule:s(58547),categories:["gl3d","showLegend"],attributes:s(21850),supplyDefaults:s(22459),colorbar:{min:"cmin",max:"cmax"},calc:s(88489).calc,plot:s(90154),eventData:function(i,o){return i.tubex=i.x,i.tubey=i.y,i.tubez=i.z,i.tubeu=o.traceCoordinate[3],i.tubev=o.traceCoordinate[4],i.tubew=o.traceCoordinate[5],i.norm=o.traceCoordinate[6],i.divergence=o.traceCoordinate[7],delete i.x,delete i.y,delete i.z,i},meta:{}}},57564:function(i,o,s){"use strict";var x=s(9012),_=s(5386).fF,F=s(5386).si,N=s(50693),j=s(27670).Y,G=s(34e3),Z=s(7055),X=s(1426).extendFlat,J=s(79952).u;i.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:X({colors:{valType:"data_array",editType:"calc"},line:{color:X({},G.marker.line.color,{dflt:null}),width:X({},G.marker.line.width,{dflt:1}),editType:"calc"},pattern:J,editType:"calc"},N("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:G.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:F({editType:"plot"},{keys:Z.eventDataKeys.concat(["label","value"])}),hovertext:G.hovertext,hoverinfo:X({},x.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:_({},{keys:Z.eventDataKeys}),textfont:G.textfont,insidetextorientation:G.insidetextorientation,insidetextfont:G.insidetextfont,outsidetextfont:X({},G.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:G.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:j({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(i,o,s){"use strict";var x=s(74875);o.name="sunburst",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},52147:function(i,o,s){"use strict";var x=s(674),_=s(92770),F=s(71828),N=s(21081).makeColorScaleFuncFromTrace,j=s(32354).makePullColorFn,G=s(32354).generateExtendedColors,Z=s(21081).calc,X=s(50606).ALMOST_EQUAL,J={},$={},ee={};o.calc=function(i,o){var s,G,J,$=i._fullLayout,ee=o.ids,et=F.isArrayOrTypedArray(ee),er=o.labels,en=o.parents,ei=o.values,eo=F.isArrayOrTypedArray(ei),es=[],el={},ec={},isValidKey=function(i){return i||"number"==typeof i},isValidVal=function(i){return!eo||_(ei[i])&&ei[i]>=0};et?(em=Math.min(ee.length,en.length),ey=function(i){return isValidKey(ee[i])&&isValidVal(i)},ev=function(i){return String(ee[i])}):(em=Math.min(er.length,en.length),ey=function(i){return isValidKey(er[i])&&isValidVal(i)},ev=function(i){return String(er[i])}),eo&&(em=Math.min(em,ei.length));for(var eu=0;eu<em;eu++)if(ey(eu)){var ef=ev(eu),eh=isValidKey(en[eu])?String(en[eu]):"",ed={i:eu,id:ef,pid:eh,label:isValidKey(er[eu])?String(er[eu]):""};eo&&(ed.v=+ei[eu]),es.push(ed),el[eh]?el[eh].push(ef):el[eh]=[ef],ec[ef]=1}if(el[""]){if(el[""].length>1){for(var ep=F.randstr(),eg=0;eg<es.length;eg++)""===es[eg].pid&&(es[eg].pid=ep);es.unshift({hasMultipleRoots:!0,id:ep,pid:"",label:""})}}else{var em,ey,ev,ex,e_=[];for(ex in el)ec[ex]||e_.push(ex);if(1!==e_.length)return F.warn(["Multiple implied roots, cannot build",o.type,"hierarchy of",o.name+".","These roots include:",e_.join(", ")].join(" "));ex=e_[0],es.unshift({hasImpliedRoot:!0,id:ex,pid:"",label:ex})}try{s=x.stratify().id(function(i){return i.id}).parentId(function(i){return i.pid})(es)}catch(i){return F.warn(["Failed to build",o.type,"hierarchy of",o.name+".","Error:",i.message].join(" "))}var ew=x.hierarchy(s),eT=!1;if(eo)switch(o.branchvalues){case"remainder":ew.sum(function(i){return i.data.v});break;case"total":ew.each(function(i){var s=i.data.data,x=s.v;if(i.children){var _=i.children.reduce(function(i,o){return i+o.data.data.v},0);if((s.hasImpliedRoot||s.hasMultipleRoots)&&(x=_),x<_*X)return eT=!0,F.warn(["Total value for node",i.data.data.id,"of",o.name,"is smaller than the sum of its children.","\nparent value =",x,"\nchildren sum =",_].join(" "))}i.value=x})}else(function countDescendants(i,o,s){var x=0,_=i.children;if(_){for(var F=_.length,N=0;N<F;N++)x+=countDescendants(_[N],o,s);s.branches&&x++}else s.leaves&&x++;return i.value=i.data.data.value=x,o._values||(o._values=[]),o._values[i.data.data.i]=x,x})(ew,o,{branches:-1!==o.count.indexOf("branches"),leaves:-1!==o.count.indexOf("leaves")});if(!eT){o.sort&&ew.sort(function(i,o){return o.value-i.value});var ek=o.marker.colors||[],eA=!!ek.length;return o._hasColorscale?(eA||(ek=eo?o.values:o._values),Z(i,o,{vals:ek,containerStr:"marker",cLetter:"c"}),J=N(o.marker)):G=j($["_"+o.type+"colormap"]),ew.each(function(i){var s=i.data.data;s.color=o._hasColorscale?J(ek[s.i]):G(ek[s.i],s.id)}),es[0].hierarchy=ew,es}},o._runCrossTraceCalc=function(i,o){var s,x=o._fullLayout,_=o.calcdata,F=x[i+"colorway"],N=x["_"+i+"colormap"];x["extend"+i+"colors"]&&(F=G(F,"icicle"===i?ee:"treemap"===i?$:J));var j=0;function pickColor(i){var o=i.data.data,x=o.id;!1===o.color&&(N[x]?o.color=N[x]:i.parent?i.parent.parent?o.color=i.parent.data.data.color:(N[x]=o.color=F[j%F.length],j++):o.color=s)}for(var Z=0;Z<_.length;Z++){var X=_[Z][0];X.trace.type===i&&X.hierarchy&&(s=X.trace.root.color,X.hierarchy.each(pickColor))}},o.crossTraceCalc=function(i){return o._runCrossTraceCalc("sunburst",i)}},7055:function(i){"use strict";i.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(i,o,s){"use strict";var x=s(71828),_=s(57564),F=s(27670).c,N=s(90769).handleText,j=s(37434).handleMarkerDefaults,G=s(21081),Z=G.hasColorscale,X=G.handleDefaults;i.exports=function(i,o,s,G){function coerce(s,F){return x.coerce(i,o,_,s,F)}var J=coerce("labels"),$=coerce("parents");if(!J||!J.length||!$||!$.length){o.visible=!1;return}var ee=coerce("values");coerce(ee&&ee.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),j(i,o,G,coerce);var et=o._hasColorscale=Z(i,"marker","colors")||(i.marker||{}).coloraxis;et&&X(i,o,G,coerce,{prefix:"marker.",cLetter:"c"}),coerce("leaf.opacity",et?1:.7);var er=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(er)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate"),N(i,o,G,coerce,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("insidetextorientation"),coerce("sort"),coerce("rotation"),coerce("root.color"),F(o,G,coerce),o._length=null}},43467:function(i,o,s){"use strict";var x=s(91424),_=s(7901);i.exports=function(i,o,s,F,N){var j=o.data.data,G=j.i,Z=N||j.color;if(G>=0){o.i=j.i;var X=s.marker;X.pattern&&X.colors&&X.pattern.shape||(X.color=Z,o.color=Z),x.pointStyle(i,s,F,o)}else _.fill(i,Z)}},83523:function(i,o,s){"use strict";var x=s(39898),_=s(73972),F=s(23469).appendArrayPointValue,N=s(30211),j=s(71828),G=s(11086),Z=s(2791),X=s(53581).formatPieValue;function makeEventData(i,o,s){for(var x=i.data.data,_={curveNumber:o.index,pointNumber:x.i,data:o._input,fullData:o},N=0;N<s.length;N++){var j=s[N];j in i&&(_[j]=i[j])}return"parentString"in i&&!Z.isHierarchyRoot(i)&&(_.parent=i.parentString),F(_,o,x.i),_}i.exports=function(i,o,s,F,J){var $=F[0],ee=$.trace,et=$.hierarchy,er="sunburst"===ee.type,en="treemap"===ee.type||"icicle"===ee.type;"_hasHoverLabel"in ee||(ee._hasHoverLabel=!1),"_hasHoverEvent"in ee||(ee._hasHoverEvent=!1),i.on("mouseover",function(_){var F=s._fullLayout;if(!s._dragging&&!1!==F.hovermode){var G=s._fullData[ee.index],ei=_.data.data,eo=ei.i,es=Z.isHierarchyRoot(_),el=Z.getParent(et,_),ec=Z.getValue(_),_cast=function(i){return j.castOption(G,eo,i)},eu=_cast("hovertemplate"),ef=N.castHoverinfo(G,F,eo),eh=F.separators;if(eu||ef&&"none"!==ef&&"skip"!==ef){er&&(ep=$.cx+_.pxmid[0]*(1-_.rInscribed),eg=$.cy+_.pxmid[1]*(1-_.rInscribed)),en&&(ep=_._hoverX,eg=_._hoverY);var ed,ep,eg,em,ey={},ev=[],ex=[],hasFlag=function(i){return -1!==ev.indexOf(i)};ef&&(ev="all"===ef?G._module.attributes.hoverinfo.flags:ef.split("+")),ey.label=ei.label,hasFlag("label")&&ey.label&&ex.push(ey.label),ei.hasOwnProperty("v")&&(ey.value=ei.v,ey.valueLabel=X(ey.value,eh),hasFlag("value")&&ex.push(ey.valueLabel)),ey.currentPath=_.currentPath=Z.getPath(_.data),hasFlag("current path")&&!es&&ex.push(ey.currentPath);var e_=[],insertPercent=function(){-1===e_.indexOf(em)&&(ex.push(em),e_.push(em))};ey.percentParent=_.percentParent=ec/Z.getValue(el),ey.parent=_.parentString=Z.getPtLabel(el),hasFlag("percent parent")&&(em=Z.formatPercent(ey.percentParent,eh)+" of "+ey.parent,insertPercent()),ey.percentEntry=_.percentEntry=ec/Z.getValue(o),ey.entry=_.entry=Z.getPtLabel(o),!hasFlag("percent entry")||es||_.onPathbar||(em=Z.formatPercent(ey.percentEntry,eh)+" of "+ey.entry,insertPercent()),ey.percentRoot=_.percentRoot=ec/Z.getValue(et),ey.root=_.root=Z.getPtLabel(et),hasFlag("percent root")&&!es&&(em=Z.formatPercent(ey.percentRoot,eh)+" of "+ey.root,insertPercent()),ey.text=_cast("hovertext")||_cast("text"),hasFlag("text")&&(em=ey.text,j.isValidTextValue(em)&&ex.push(em)),ed=[makeEventData(_,G,J.eventDataKeys)];var ew={trace:G,y:eg,_x0:_._x0,_x1:_._x1,_y0:_._y0,_y1:_._y1,text:ex.join("<br>"),name:eu||hasFlag("name")?G.name:void 0,color:_cast("hoverlabel.bgcolor")||ei.color,borderColor:_cast("hoverlabel.bordercolor"),fontFamily:_cast("hoverlabel.font.family"),fontSize:_cast("hoverlabel.font.size"),fontColor:_cast("hoverlabel.font.color"),nameLength:_cast("hoverlabel.namelength"),textAlign:_cast("hoverlabel.align"),hovertemplate:eu,hovertemplateLabels:ey,eventData:ed};er&&(ew.x0=ep-_.rInscribed*_.rpx1,ew.x1=ep+_.rInscribed*_.rpx1,ew.idealAlign=_.pxmid[0]<0?"left":"right"),en&&(ew.x=ep,ew.idealAlign=ep<0?"left":"right"),N.loneHover(ew,{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:s,inOut_bbox:[]}),ed[0].bbox=[][0],ee._hasHoverLabel=!0}if(en){var eT=i.select("path.surface");J.styleOne(eT,_,G,s,{hovered:!0})}ee._hasHoverEvent=!0,s.emit("plotly_hover",{points:ed||[makeEventData(_,G,J.eventDataKeys)],event:x.event})}}),i.on("mouseout",function(o){var _=s._fullLayout,F=s._fullData[ee.index],j=x.select(this).datum();if(ee._hasHoverEvent&&(o.originalEvent=x.event,s.emit("plotly_unhover",{points:[makeEventData(j,F,J.eventDataKeys)],event:x.event}),ee._hasHoverEvent=!1),ee._hasHoverLabel&&(N.loneUnhover(_._hoverlayer.node()),ee._hasHoverLabel=!1),en){var G=i.select("path.surface");J.styleOne(G,j,F,s,{hovered:!1})}}),i.on("click",function(i){var o=s._fullLayout,F=s._fullData[ee.index],j=er&&(Z.isHierarchyRoot(i)||Z.isLeaf(i)),X=Z.getPtId(i),$=Z.isEntry(i)?Z.findEntryWithChild(et,X):Z.findEntryWithLevel(et,X),en=Z.getPtId($),ei={points:[makeEventData(i,F,J.eventDataKeys)],event:x.event};j||(ei.nextLevel=en);var eo=G.triggerHandler(s,"plotly_"+ee.type+"click",ei);if(!1!==eo&&o.hovermode&&(s._hoverdata=[makeEventData(i,F,J.eventDataKeys)],N.click(s,x.event)),!j&&!1!==eo&&!s._dragging&&!s._transitioning){_.call("_storeDirectGUIEdit",F,o._tracePreGUI[F.uid],{level:F.level});var es={data:[{level:en}],traces:[ee.index]},el={frame:{redraw:!1,duration:J.transitionTime},transition:{duration:J.transitionTime,easing:J.transitionEasing},mode:"immediate",fromcurrent:!0};N.loneUnhover(o._hoverlayer.node()),_.call("animate",s,es,el)}})}},2791:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(6964),N=s(53581);function getParentId(i){return i.data.data.pid}o.findEntryWithLevel=function(i,s){var x;return s&&i.eachAfter(function(i){if(o.getPtId(i)===s)return x=i.copy()}),x||i},o.findEntryWithChild=function(i,s){var x;return i.eachAfter(function(i){for(var _=i.children||[],F=0;F<_.length;F++){var N=_[F];if(o.getPtId(N)===s)return x=i.copy()}}),x||i},o.isEntry=function(i){return!i.parent},o.isLeaf=function(i){return!i.children},o.getPtId=function(i){return i.data.data.id},o.getPtLabel=function(i){return i.data.data.label},o.getValue=function(i){return i.value},o.isHierarchyRoot=function(i){return""===getParentId(i)},o.setSliceCursor=function(i,s,x){var _=x.isTransitioning;if(!_){var N=i.datum();_=x.hideOnRoot&&o.isHierarchyRoot(N)||x.hideOnLeaves&&o.isLeaf(N)}F(i,_?null:"pointer")},o.getInsideTextFontKey=function(i,o,s,_,F){var N=(F||{}).onPathbar,j=s.data.data.i;return x.castOption(o,j,(N?"pathbar.textfont":"insidetextfont")+"."+i)||x.castOption(o,j,"textfont."+i)||_.size},o.getOutsideTextFontKey=function(i,o,s,_){var F=s.data.data.i;return x.castOption(o,F,"outsidetextfont."+i)||x.castOption(o,F,"textfont."+i)||_.size},o.isOutsideText=function(i,s){return!i._hasColorscale&&o.isHierarchyRoot(s)},o.determineTextFont=function(i,s,F,N){var j,G,Z,X;return o.isOutsideText(i,s)?{color:o.getOutsideTextFontKey("color",i,s,F),family:o.getOutsideTextFontKey("family",i,s,F),size:o.getOutsideTextFontKey("size",i,s,F)}:(j=(N||{}).onPathbar,Z=(G=s.data.data).i,(X=x.castOption(i,Z,(j?"pathbar.textfont":"insidetextfont")+".color"))||!i._input.textfont||(X=x.castOption(i._input,Z,"textfont.color")),{color:X||_.contrast(G.color),family:o.getInsideTextFontKey("family",i,s,F,N),size:o.getInsideTextFontKey("size",i,s,F,N)})},o.hasTransition=function(i){return!!(i&&i.duration>0)},o.getMaxDepth=function(i){return i.maxdepth>=0?i.maxdepth:1/0},o.isHeader=function(i,s){return!(o.isLeaf(i)||i.depth===s._maxDepth-1)},o.getParent=function(i,s){return o.findEntryWithLevel(i,getParentId(s))},o.listPath=function(i,s){var x=i.parent;if(!x)return[];var _=s?[x.data[s]]:[x];return o.listPath(x,s).concat(_)},o.getPath=function(i){return o.listPath(i,"label").join("/")+"/"},o.formatValue=N.formatPieValue,o.formatPercent=function(i,o){var s=x.formatPercent(i,0);return"0%"===s&&(s=N.formatPiePercent(i,o)),s}},87619:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"sunburst",basePlotModule:s(66888),categories:[],animatable:!0,attributes:s(57564),layoutAttributes:s(2654),supplyDefaults:s(17094),supplyLayoutDefaults:s(57034),calc:s(52147).calc,crossTraceCalc:s(52147).crossTraceCalc,plot:s(24714).plot,style:s(29969).style,colorbar:s(4898),meta:{}}},2654:function(i){"use strict";i.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(i,o,s){"use strict";var x=s(71828),_=s(2654);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("sunburstcolorway",o.colorway),coerce("extendsunburstcolors")}},24714:function(i,o,s){"use strict";var x=s(39898),_=s(674),F=s(81684).sX,N=s(91424),j=s(71828),G=s(63893),Z=s(72597),X=Z.recordMinTextSize,J=Z.clearMinTextSize,$=s(14575),ee=s(53581).getRotationAngle,et=$.computeTransform,er=$.transformInsideText,en=s(29969).styleOne,ei=s(16688).resizeText,eo=s(83523),es=s(7055),el=s(2791);function plotOne(i,s,Z,J){var $=i._context.staticPlot,ei=i._fullLayout,ec=!ei.uniformtext.mode&&el.hasTransition(J),eu=x.select(Z).selectAll("g.slice"),ef=s[0],eh=ef.trace,ed=ef.hierarchy,ep=el.findEntryWithLevel(ed,eh.level),eg=el.getMaxDepth(eh),em=ei._size,ey=eh.domain,ev=em.w*(ey.x[1]-ey.x[0]),ex=em.h*(ey.y[1]-ey.y[0]),e_=.5*Math.min(ev,ex),ew=ef.cx=em.l+em.w*(ey.x[1]+ey.x[0])/2,eT=ef.cy=em.t+em.h*(1-ey.y[0])-ex/2;if(!ep)return eu.remove();var ek=null,eA={};ec&&eu.each(function(i){eA[el.getPtId(i)]={rpx0:i.rpx0,rpx1:i.rpx1,x0:i.x0,x1:i.x1,transform:i.transform},!ek&&el.isEntry(i)&&(ek=i)});var eS=_.partition().size([2*Math.PI,ep.height+1])(ep).descendants(),eM=ep.height+1,eC=0,eE=eg;ef.hasMultipleRoots&&el.isHierarchyRoot(ep)&&(eS=eS.slice(1),eM-=1,eC=1,eE+=1),eS=eS.filter(function(i){return i.y1<=eE});var eL=ee(eh.rotation);eL&&eS.forEach(function(i){i.x0+=eL,i.x1+=eL});var eP=Math.min(eM,eg),y2rpx=function(i){return(i-eC)/eP*e_},rx2px=function(i,o){return[i*Math.cos(o),-i*Math.sin(o)]},pathSlice=function(i){return j.pathAnnulus(i.rpx0,i.rpx1,i.x0,i.x1,ew,eT)},getTargetX=function(i){return ew+getTextXY(i)[0]*(i.transform.rCenter||0)+(i.transform.x||0)},getTargetY=function(i){return eT+getTextXY(i)[1]*(i.transform.rCenter||0)+(i.transform.y||0)};(eu=eu.data(eS,el.getPtId)).enter().append("g").classed("slice",!0),ec?eu.exit().transition().each(function(){var i=x.select(this);i.select("path.surface").transition().attrTween("d",function(i){var o=function(i){var o=el.getPtId(i),s=eA[o],x=eA[el.getPtId(ep)];if(x){var _=(i.x1>x.x1?2*Math.PI:0)+eL;N=i.rpx1<x.rpx1?{x0:i.x0,x1:i.x1,rpx0:0,rpx1:0}:{x0:_,x1:_,rpx0:i.rpx0,rpx1:i.rpx1}}else{var N,j,G,Z=el.getPtId(i.parent);eu.each(function(i){if(el.getPtId(i)===Z)return j=i});var X=j.children;X.forEach(function(i,s){if(el.getPtId(i)===o)return G=s});var J=X.length,$=F(j.x0,j.x1);N={rpx0:e_,rpx1:e_,x0:$(G/J),x1:$((G+1)/J)}}return F(s,N)}(i);return function(i){return pathSlice(o(i))}}),i.select("g.slicetext").attr("opacity",0)}).remove():eu.exit().remove(),eu.order();var eI=null;if(ec&&ek){var eO=el.getPtId(ek);eu.each(function(i){null===eI&&el.getPtId(i)===eO&&(eI=i.x1)})}var eD=eu;function interpX0X1FromParent(i){var o=i.parent,s=eA[el.getPtId(o)],x={};if(s){var _=o.children,N=_.indexOf(i),j=_.length,G=F(s.x0,s.x1);x.x0=G(N/j),x.x1=G(N/j)}else x.x0=x.x1=0;return x}ec&&(eD=eD.transition().each("end",function(){var o=x.select(this);el.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),eD.each(function(_){var Z=x.select(this),J=j.ensureSingle(Z,"path","surface",function(i){i.style("pointer-events",$?"none":"all")});_.rpx0=y2rpx(_.y0),_.rpx1=y2rpx(_.y1),_.xmid=(_.x0+_.x1)/2,_.pxmid=rx2px(_.rpx1,_.xmid),_.midangle=-(_.xmid-Math.PI/2),_.startangle=-(_.x0-Math.PI/2),_.stopangle=-(_.x1-Math.PI/2),_.halfangle=.5*Math.min(j.angleDelta(_.x0,_.x1)||Math.PI,Math.PI),_.ring=1-_.rpx0/_.rpx1,_.rInscribed=0===_.rpx0&&j.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2)),ec?J.transition().attrTween("d",function(i){var o=function(i){var o,s=eA[el.getPtId(i)],x={x0:i.x0,x1:i.x1,rpx0:i.rpx0,rpx1:i.rpx1};if(s)o=s;else if(ek){if(i.parent){if(eI){var _=(i.x1>eI?2*Math.PI:0)+eL;o={x0:_,x1:_}}else o={rpx0:e_,rpx1:e_},j.extendFlat(o,interpX0X1FromParent(i))}else o={rpx0:0,rpx1:0}}else o={x0:eL,x1:eL};return F(o,x)}(i);return function(i){return pathSlice(o(i))}}):J.attr("d",pathSlice),Z.call(eo,ep,i,s,{eventDataKeys:es.eventDataKeys,transitionTime:es.CLICK_TRANSITION_TIME,transitionEasing:es.CLICK_TRANSITION_EASING}).call(el.setSliceCursor,i,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:i._transitioning}),J.call(en,_,eh,i);var ee=j.ensureSingle(Z,"g","slicetext"),eu=j.ensureSingle(ee,"text","",function(i){i.attr("data-notex",1)}),ed=j.ensureUniformFontSize(i,el.determineTextFont(eh,_,ei.font));eu.text(o.formatSliceLabel(_,ep,eh,s,ei)).classed("slicetext",!0).attr("text-anchor","middle").call(N.font,ed).call(G.convertToTspans,i);var eg=N.bBox(eu.node());_.transform=er(eg,_,ef),_.transform.targetX=getTargetX(_),_.transform.targetY=getTargetY(_);var strTransform=function(i,o){var s=i.transform;return et(s,o),s.fontSize=ed.size,X(eh.type,s,ei),j.getTextTransform(s)};ec?eu.transition().attrTween("transform",function(i){var o=function(i){var o,s=eA[el.getPtId(i)],x=i.transform;if(s)o=s;else if(o={rpx1:i.rpx1,transform:{textPosAngle:x.textPosAngle,scale:0,rotate:x.rotate,rCenter:x.rCenter,x:x.x,y:x.y}},ek){if(i.parent){if(eI){var _=i.x1>eI?2*Math.PI:0;o.x0=o.x1=_}else j.extendFlat(o,interpX0X1FromParent(i))}else o.x0=o.x1=eL}else o.x0=o.x1=eL;var N=F(o.transform.textPosAngle,i.transform.textPosAngle),G=F(o.rpx1,i.rpx1),Z=F(o.x0,i.x0),J=F(o.x1,i.x1),$=F(o.transform.scale,x.scale),ee=F(o.transform.rotate,x.rotate),et=0===x.rCenter?3:0===o.transform.rCenter?1/3:1,er=F(o.transform.rCenter,x.rCenter);return function(i){var o=G(i),s=Z(i),_=J(i),F=er(Math.pow(i,et)),j={pxmid:rx2px(o,(s+_)/2),rpx1:o,transform:{textPosAngle:N(i),rCenter:F,x:x.x,y:x.y}};return X(eh.type,x,ei),{transform:{targetX:getTargetX(j),targetY:getTargetY(j),scale:$(i),rotate:ee(i),rCenter:F}}}}(i);return function(i){return strTransform(o(i),eg)}}):eu.attr("transform",strTransform(_,eg))})}function getTextXY(i){var o,s;return[(o=i.rpx1)*Math.sin(s=i.transform.textPosAngle),-o*Math.cos(s)]}o.plot=function(i,o,s,_){var F,N,j=i._fullLayout,G=j._sunburstlayer,Z=!s,X=!j.uniformtext.mode&&el.hasTransition(s);J("sunburst",j),(F=G.selectAll("g.trace.sunburst").data(o,function(i){return i[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),X?(_&&(N=_()),x.transition().duration(s.duration).ease(s.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()}).each(function(){G.selectAll("g.trace").each(function(o){plotOne(i,o,this,s)})})):(F.each(function(o){plotOne(i,o,this,s)}),j.uniformtext.mode&&ei(i,j._sunburstlayer.selectAll(".trace"),"sunburst")),Z&&F.exit().remove()},o.formatSliceLabel=function(i,o,s,x,_){var F=s.texttemplate,N=s.textinfo;if(!F&&(!N||"none"===N))return"";var G=_.separators,Z=x[0],X=i.data.data,J=Z.hierarchy,$=el.isHierarchyRoot(i),ee=el.getParent(J,i),et=el.getValue(i);if(!F){var er=N.split("+"),hasFlag=function(i){return -1!==er.indexOf(i)},en=[];if(hasFlag("label")&&X.label&&en.push(X.label),X.hasOwnProperty("v")&&hasFlag("value")&&en.push(el.formatValue(X.v,G)),!$){hasFlag("current path")&&en.push(el.getPath(i.data));var ei=0;hasFlag("percent parent")&&ei++,hasFlag("percent entry")&&ei++,hasFlag("percent root")&&ei++;var eo=ei>1;if(ei){var es,ec,addPercent=function(i){es=el.formatPercent(ec,G),eo&&(es+=" of "+i),en.push(es)};hasFlag("percent parent")&&!$&&(ec=et/el.getValue(ee),addPercent("parent")),hasFlag("percent entry")&&(ec=et/el.getValue(o),addPercent("entry")),hasFlag("percent root")&&(ec=et/el.getValue(J),addPercent("root"))}}return hasFlag("text")&&(es=j.castOption(s,X.i,"text"),j.isValidTextValue(es)&&en.push(es)),en.join("<br>")}var eu=j.castOption(s,X.i,"texttemplate");if(!eu)return"";var ef={};X.label&&(ef.label=X.label),X.hasOwnProperty("v")&&(ef.value=X.v,ef.valueLabel=el.formatValue(X.v,G)),ef.currentPath=el.getPath(i.data),$||(ef.percentParent=et/el.getValue(ee),ef.percentParentLabel=el.formatPercent(ef.percentParent,G),ef.parent=el.getPtLabel(ee)),ef.percentEntry=et/el.getValue(o),ef.percentEntryLabel=el.formatPercent(ef.percentEntry,G),ef.entry=el.getPtLabel(o),ef.percentRoot=et/el.getValue(J),ef.percentRootLabel=el.formatPercent(ef.percentRoot,G),ef.root=el.getPtLabel(J),X.hasOwnProperty("color")&&(ef.color=X.color);var eh=j.castOption(s,X.i,"text");return(j.isValidTextValue(eh)||""===eh)&&(ef.text=eh),ef.customdata=j.castOption(s,X.i,"customdata"),j.texttemplateString(eu,ef,_._d3locale,ef,s._meta||{})}},29969:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(71828),N=s(72597).resizeText,j=s(43467);function styleOne(i,o,s,x){var N=o.data.data,G=!o.children,Z=N.i,X=F.castOption(s,Z,"marker.line.color")||_.defaultLine,J=F.castOption(s,Z,"marker.line.width")||0;i.call(j,o,s,x).style("stroke-width",J).call(_.stroke,X).style("opacity",G?s.leaf.opacity:null)}i.exports={style:function(i){var o=i._fullLayout._sunburstlayer.selectAll(".trace");N(i,o,"sunburst"),o.each(function(o){var s=x.select(this),_=o[0].trace;s.style("opacity",_.opacity),s.selectAll("path.surface").each(function(o){x.select(this).call(styleOne,o,_,i)})})},styleOne:styleOne}},54532:function(i,o,s){"use strict";var x=s(7901),_=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(9012),G=s(1426).extendFlat,Z=s(30962).overrideAll;function makeContourProjAttr(i){return{valType:"boolean",dflt:!1}}function makeContourAttr(i){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:makeContourProjAttr("x"),y:makeContourProjAttr("y"),z:makeContourProjAttr("z")},color:{valType:"color",dflt:x.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:x.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var X=i.exports=Z(G({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:N(),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},_("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:makeContourAttr("x"),y:makeContourAttr("y"),z:makeContourAttr("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:G({},_.zauto,{}),zmin:G({},_.zmin,{}),zmax:G({},_.zmax,{})},hoverinfo:G({},j.hoverinfo),showlegend:G({},j.showlegend,{dflt:!1})}),"calc","nested");X.x.editType=X.y.editType=X.z.editType="calc+clearAxisTypes",X.transforms=void 0},18396:function(i,o,s){"use strict";var x=s(78803);i.exports=function(i,o){o.surfacecolor?x(i,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):x(i,o,{vals:o.z,containerStr:"",cLetter:"c"})}},43768:function(i,o,s){"use strict";var x=s(9330).gl_surface3d,_=s(9330).ndarray,F=s(9330).ndarray_linear_interpolate.d2,N=s(824),j=s(43907),G=s(71828).isArrayOrTypedArray,Z=s(81697).parseColorScale,X=s(78614),J=s(21081).extractOpts;function SurfaceTrace(i,o,s){this.scene=i,this.uid=s,this.surface=o,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var $=SurfaceTrace.prototype;$.getXat=function(i,o,s,x){var _=G(this.data.x)?G(this.data.x[0])?this.data.x[o][i]:this.data.x[i]:i;return void 0===s?_:x.d2l(_,0,s)},$.getYat=function(i,o,s,x){var _=G(this.data.y)?G(this.data.y[0])?this.data.y[o][i]:this.data.y[o]:o;return void 0===s?_:x.d2l(_,0,s)},$.getZat=function(i,o,s,x){var _=this.data.z[o][i];return null===_&&this.data.connectgaps&&this.data._interpolatedZ&&(_=this.data._interpolatedZ[o][i]),void 0===s?_:x.d2l(_,0,s)},$.handlePick=function(i){if(i.object===this.surface){var o=(i.data.index[0]-1)/this.dataScaleX-1,s=(i.data.index[1]-1)/this.dataScaleY-1,x=Math.max(Math.min(Math.round(o),this.data.z[0].length-1),0),_=Math.max(Math.min(Math.round(s),this.data._ylength-1),0);i.index=[x,_],i.traceCoordinate=[this.getXat(x,_),this.getYat(x,_),this.getZat(x,_)],i.dataCoordinate=[this.getXat(x,_,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(x,_,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(x,_,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var F=0;F<3;F++)null!=i.dataCoordinate[F]&&(i.dataCoordinate[F]*=this.scene.dataScale[F]);var N=this.data.hovertext||this.data.text;return Array.isArray(N)&&N[_]&&void 0!==N[_][x]?i.textLabel=N[_][x]:N?i.textLabel=N:i.textLabel="",i.data.dataCoordinate=i.dataCoordinate.slice(),this.surface.highlight(i.data),this.scene.glplot.spikes.position=i.dataCoordinate,!0}};var ee=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function getFactors(i){for(var o=[],s=0;s<ee.length;s++){var x=ee[s];o.push(function(i,o){if(i<o)return 0;for(var s=0;0===Math.floor(i%o);)i/=o,s++;return s}(i,x))}return o}function fnHomography(i,o,s){var x=s[8]+s[2]*o[0]+s[5]*o[1];return i[0]=(s[6]+s[0]*o[0]+s[3]*o[1])/x,i[1]=(s[7]+s[1]*o[0]+s[4]*o[1])/x,i}$.calcXnums=function(i){var o,s=[];for(o=1;o<i;o++){var x=this.getXat(o-1,0),_=this.getXat(o,0);_!==x&&null!=x&&null!=_?s[o-1]=Math.abs(_-x):s[o-1]=0}var F=0;for(o=1;o<i;o++)F+=s[o-1];for(o=1;o<i;o++)0===s[o-1]?s[o-1]=1:s[o-1]=Math.round(F/s[o-1]);return s},$.calcYnums=function(i){var o,s=[];for(o=1;o<i;o++){var x=this.getYat(0,o-1),_=this.getYat(0,o);_!==x&&null!=x&&null!=_?s[o-1]=Math.abs(_-x):s[o-1]=0}var F=0;for(o=1;o<i;o++)F+=s[o-1];for(o=1;o<i;o++)0===s[o-1]?s[o-1]=1:s[o-1]=Math.round(F/s[o-1]);return s},$.estimateScale=function(i,o){for(var s=1+function(i){if(0!==i.length){for(var o=1,s=0;s<i.length;s++)o=function(i,o){if(!(i<1)&&!(o<1)){for(var s=getFactors(i),x=getFactors(o),_=1,F=0;F<ee.length;F++)_*=Math.pow(ee[F],Math.max(s[F],x[F]));return _}}(o,i[s]);return o}}(0===o?this.calcXnums(i):this.calcYnums(i));s<120;)s*=2;for(;s>720;)s--,s/=function(i){for(var o=getFactors(i),s=i,x=0;x<ee.length;x++)if(o[x]>0){s=ee[x];break}return s}(s),++s<120&&(s=720);var x=Math.round(s/i);return x>1?x:1},$.refineCoords=function(i){for(var o=this.dataScaleX,s=this.dataScaleY,x=i[0].shape[0],N=i[0].shape[1],j=0|Math.floor(i[0].shape[0]*o+1),G=0|Math.floor(i[0].shape[1]*s+1),Z=1+x+1,X=1+N+1,J=_(new Float32Array(Z*X),[Z,X]),$=[1/o,0,0,0,1/s,0,0,0,1],ee=0;ee<i.length;++ee){this.surface.padField(J,i[ee]);var et=_(new Float32Array(j*G),[j,G]);(function(i,o,s,x){for(var _=[0,0],N=i.shape[0],j=i.shape[1],G=0;G<N;G++)for(var Z=0;Z<j;Z++)s(_,[G,Z],x),i.set(G,Z,F(o,_[0],_[1]))})(et,J,fnHomography,$),i[ee]=et}},$.setContourLevels=function(){var i,o,s,x=[[],[],[]],_=[!1,!1,!1],F=!1;for(i=0;i<3;++i)if(this.showContour[i]&&(F=!0,this.contourSize[i]>0&&null!==this.contourStart[i]&&null!==this.contourEnd[i]&&this.contourEnd[i]>this.contourStart[i]))for(_[i]=!0,o=this.contourStart[i];o<this.contourEnd[i];o+=this.contourSize[i])s=o*this.scene.dataScale[i],function(i,o){for(var s=!1,x=0;x<i.length;x++)if(o===i[x]){s=!0;break}!1===s&&i.push(o)}(x[i],s);if(F){var N=[[],[],[]];for(i=0;i<3;++i)this.showContour[i]&&(N[i]=_[i]?x[i]:this.scene.contourLevels[i]);this.surface.update({levels:N})}},$.update=function(i){var o,s,x,F,G,$,ee=this.scene,et=ee.fullSceneLayout,er=this.surface,en=Z(i),ei=ee.dataScale,eo=i.z[0].length,es=i._ylength,el=ee.contourLevels;this.data=i;var ec=[];for(x=0;x<3;x++)for(F=0,ec[x]=[];F<eo;F++)ec[x][F]=[];for(F=0;F<eo;F++)for(G=0;G<es;G++)ec[0][F][G]=this.getXat(F,G,i.xcalendar,et.xaxis),ec[1][F][G]=this.getYat(F,G,i.ycalendar,et.yaxis),ec[2][F][G]=this.getZat(F,G,i.zcalendar,et.zaxis);if(i.connectgaps)for(i._emptypoints=j(ec[2]),N(ec[2],i._emptypoints),i._interpolatedZ=[],F=0;F<eo;F++)for(G=0,i._interpolatedZ[F]=[];G<es;G++)i._interpolatedZ[F][G]=ec[2][F][G];for(x=0;x<3;x++)for(F=0;F<eo;F++)for(G=0;G<es;G++)null==($=ec[x][F][G])?ec[x][F][G]=NaN:$=ec[x][F][G]*=ei[x];for(x=0;x<3;x++)for(F=0;F<eo;F++)for(G=0;G<es;G++)null!=($=ec[x][F][G])&&(this.minValues[x]>$&&(this.minValues[x]=$),this.maxValues[x]<$&&(this.maxValues[x]=$));for(x=0;x<3;x++)this.objectOffset[x]=.5*(this.minValues[x]+this.maxValues[x]);for(x=0;x<3;x++)for(F=0;F<eo;F++)for(G=0;G<es;G++)null!=($=ec[x][F][G])&&(ec[x][F][G]-=this.objectOffset[x]);var eu=[_(new Float32Array(eo*es),[eo,es]),_(new Float32Array(eo*es),[eo,es]),_(new Float32Array(eo*es),[eo,es])];for(x=0;x<3;x++)for(F=0;F<eo;F++)for(G=0;G<es;G++)eu[x].set(F,G,ec[x][F][G]);ec=[];var ef={colormap:en,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!i.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:i.opacityscale,opacity:i.opacity},eh=J(i);if(ef.intensityBounds=[eh.min,eh.max],i.surfacecolor){var ed=_(new Float32Array(eo*es),[eo,es]);for(F=0;F<eo;F++)for(G=0;G<es;G++)ed.set(F,G,i.surfacecolor[G][F]);eu.push(ed)}else ef.intensityBounds[0]*=ei[2],ef.intensityBounds[1]*=ei[2];(720<eu[0].shape[0]||720<eu[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(eu[0].shape[0],0),this.dataScaleY=this.estimateScale(eu[0].shape[1],1),(1!==this.dataScaleX||1!==this.dataScaleY)&&this.refineCoords(eu)),i.surfacecolor&&(ef.intensity=eu.pop());var ep=[!0,!0,!0],eg=["x","y","z"];for(x=0;x<3;++x){var em=i.contours[eg[x]];ep[x]=em.highlight,ef.showContour[x]=em.show||em.highlight,ef.showContour[x]&&(ef.contourProject[x]=[em.project.x,em.project.y,em.project.z],em.show?(this.showContour[x]=!0,ef.levels[x]=el[x],er.highlightColor[x]=ef.contourColor[x]=X(em.color),em.usecolormap?er.highlightTint[x]=ef.contourTint[x]=0:er.highlightTint[x]=ef.contourTint[x]=1,ef.contourWidth[x]=em.width,this.contourStart[x]=em.start,this.contourEnd[x]=em.end,this.contourSize[x]=em.size):(this.showContour[x]=!1,this.contourStart[x]=null,this.contourEnd[x]=null,this.contourSize[x]=0),em.highlight&&(ef.dynamicColor[x]=X(em.highlightcolor),ef.dynamicWidth[x]=em.highlightwidth))}o=en[0].rgb,s=en[en.length-1].rgb,o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]&&o[3]===s[3]&&(ef.vertexColor=!0),ef.objectOffset=this.objectOffset,ef.coords=eu,er.update(ef),er.visible=i.visible,er.enableDynamic=ep,er.enableHighlight=ep,er.snapToData=!0,"lighting"in i&&(er.ambientLight=i.lighting.ambient,er.diffuseLight=i.lighting.diffuse,er.specularLight=i.lighting.specular,er.roughness=i.lighting.roughness,er.fresnel=i.lighting.fresnel),"lightposition"in i&&(er.lightPosition=[i.lightposition.x,i.lightposition.y,i.lightposition.z])},$.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},i.exports=function(i,o){var s=x({gl:i.glplot.gl}),_=new SurfaceTrace(i,s,o.uid);return s._trace=_,_.update(o),i.glplot.add(s),_}},91831:function(i,o,s){"use strict";var x=s(73972),_=s(71828),F=s(1586),N=s(54532);function opacityscaleDefaults(i,o,s,x){var _=x("opacityscale");"max"===_?o.opacityscale=[[0,.1],[1,1]]:"min"===_?o.opacityscale=[[0,1],[1,.1]]:"extremes"===_?o.opacityscale=function(i,o){for(var s=[],x=0;x<32;x++){var _=x/31,F=o+(1-o)*(1-Math.pow(Math.sin(1*_*Math.PI),2));s.push([_,Math.max(0,Math.min(1,F))])}return s}(0,.1):!function(i){var o=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var s=0;s<i.length;s++){var x=i[s];if(2!==x.length||+x[0]<o)return!1;o=+x[0]}return!0}(_)&&(o.opacityscale=void 0)}function mapLegacy(i,o,s){o in i&&!(s in i)&&(i[s]=i[o])}i.exports={supplyDefaults:function(i,o,s,j){function coerce(s,x){return _.coerce(i,o,N,s,x)}var G,Z,X=coerce("x"),J=coerce("y"),$=coerce("z");if(!$||!$.length||X&&X.length<1||J&&J.length<1){o.visible=!1;return}o._xlength=Array.isArray(X)&&_.isArrayOrTypedArray(X[0])?$.length:$[0].length,o._ylength=$.length,x.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],j),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(i){coerce(i)});var ee=coerce("surfacecolor"),et=["x","y","z"];for(G=0;G<3;++G){var er="contours."+et[G],en=coerce(er+".show"),ei=coerce(er+".highlight");if(en||ei)for(Z=0;Z<3;++Z)coerce(er+".project."+et[Z]);en&&(coerce(er+".color"),coerce(er+".width"),coerce(er+".usecolormap")),ei&&(coerce(er+".highlightcolor"),coerce(er+".highlightwidth")),coerce(er+".start"),coerce(er+".end"),coerce(er+".size")}ee||(mapLegacy(i,"zmin","cmin"),mapLegacy(i,"zmax","cmax"),mapLegacy(i,"zauto","cauto")),F(i,o,j,coerce,{prefix:"",cLetter:"c"}),opacityscaleDefaults(i,o,j,coerce),o._length=null},opacityscaleDefaults:opacityscaleDefaults}},93601:function(i,o,s){"use strict";i.exports={attributes:s(54532),supplyDefaults:s(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:s(18396),plot:s(43768),moduleType:"trace",name:"surface",basePlotModule:s(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(i,o,s){"use strict";var x=s(50215),_=s(1426).extendFlat,F=s(30962).overrideAll,N=s(41940),j=s(27670).Y,G=s(12663).descriptionOnlyNumbers;(i.exports=F({domain:j({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:G("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:_({},x.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:_({},N({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:G("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:_({},x.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:_({},N({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(i,o,s){"use strict";var x=s(27659).a0,_=s(36736),F="table";o.name=F,o.plot=function(i){var o=x(i.calcdata,F)[0];o.length&&_(i,o)},o.clean=function(i,o,s,x){var _=x._has&&x._has(F),N=o._has&&o._has(F);_&&!N&&x._paperdiv.selectAll(".table").remove()}},76333:function(i,o,s){"use strict";var x=s(28984).wrap;i.exports=function(){return x({})}},49850:function(i){"use strict";i.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(i,o,s){"use strict";var x=s(49850),_=s(1426).extendFlat,F=s(92770);function arrayMax(i){if(Array.isArray(i)){for(var o=0,s=0;s<i.length;s++)o=Math.max(o,arrayMax(i[s]));return o}return i}function sum(i,o){return i+o}function squareStringMatrix(i){var o,s=i.slice(),x=1/0,_=0;for(o=0;o<s.length;o++)Array.isArray(s[o])||(s[o]=[s[o]]),x=Math.min(x,s[o].length),_=Math.max(_,s[o].length);if(x!==_)for(o=0;o<s.length;o++){var F=_-s[o].length;F&&(s[o]=s[o].concat(emptyStrings(F)))}return s}function emptyStrings(i){for(var o=Array(i),s=0;s<i;s++)o[s]="";return o}function xScale(i){return i.calcdata.columns.reduce(function(o,s){return s.xIndex<i.xIndex?o+s.columnWidth:o},0)}function makeRowBlock(i,o){return Object.keys(i).map(function(s){return _({},i[s],{auxiliaryBlocks:o})})}function makeAnchorToRowBlock(i,o){for(var s,x={},_=0,F=0,N=makeIdentity(),j=0,G=0,Z=0;Z<i.length;Z++)s=i[Z],N.rows.push({rowIndex:Z,rowHeight:s}),((F+=s)>=o||Z===i.length-1)&&(x[_]=N,N.key=G++,N.firstRowIndex=j,N.lastRowIndex=Z,N=makeIdentity(),_+=F,j=Z+1,F=0);return x}function makeIdentity(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}i.exports=function(i,o){var s=squareStringMatrix(o.cells.values),slicer=function(i){return i.slice(o.header.values.length,i.length)},N=squareStringMatrix(o.header.values);N.length&&!N[0].length&&(N[0]=[""],N=squareStringMatrix(N));var j=N.concat(slicer(s).map(function(){return emptyStrings((N[0]||[""]).length)})),G=o.domain,Z=Math.floor(i._fullLayout._size.w*(G.x[1]-G.x[0])),X=Math.floor(i._fullLayout._size.h*(G.y[1]-G.y[0])),J=o.header.values.length?j[0].map(function(){return o.header.height}):[x.emptyHeaderHeight],$=s.length?s[0].map(function(){return o.cells.height}):[],ee=J.reduce(sum,0),et=makeAnchorToRowBlock($,X-ee+x.uplift),er=makeRowBlock(makeAnchorToRowBlock(J,ee),[]),en=makeRowBlock(et,er),ei={},eo=o._fullInput.columnorder.concat(slicer(s.map(function(i,o){return o}))),es=j.map(function(i,s){var x=Array.isArray(o.columnwidth)?o.columnwidth[Math.min(s,o.columnwidth.length-1)]:o.columnwidth;return F(x)?Number(x):1}),el=es.reduce(sum,0);es=es.map(function(i){return i/el*Z});var ec=Math.max(arrayMax(o.header.line.width),arrayMax(o.cells.line.width)),eu={key:o.uid+i._context.staticPlot,translateX:G.x[0]*i._fullLayout._size.w,translateY:i._fullLayout._size.h*(1-G.y[1]),size:i._fullLayout._size,width:Z,maxLineWidth:ec,height:X,columnOrder:eo,groupHeight:X,rowBlocks:en,headerRowBlocks:er,scrollY:0,cells:_({},o.cells,{values:s}),headerCells:_({},o.header,{values:j}),gdColumns:j.map(function(i){return i[0]}),gdColumnsOriginalOrder:j.map(function(i){return i[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:j.map(function(i,o){var s=ei[i];return ei[i]=(s||0)+1,{key:i+"__"+ei[i],label:i,specIndex:o,xIndex:eo[o],xScale:xScale,x:void 0,calcdata:void 0,columnWidth:es[o]}})};return eu.columns.forEach(function(i){i.calcdata=eu,i.x=xScale(i)}),eu}},56269:function(i,o,s){"use strict";var x=s(1426).extendFlat;o.splitToPanels=function(i){var o=[0,0],s=x({},i,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:i.calcdata.headerCells.values[i.specIndex],rowBlocks:i.calcdata.headerRowBlocks,calcdata:x({},i.calcdata,{cells:i.calcdata.headerCells})});return[x({},i,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),x({},i,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),s]},o.splitToCells=function(i){var o,s,x,_=(s=(o=i.rowBlocks[i.page])?o.rows[0].rowIndex:0,x=o?s+o.rows.length:0,[s,x]);return(i.values||[]).slice(_[0],_[1]).map(function(o,s){return{keyWithinBlock:s+("string"==typeof o&&o.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:_[0]+s,column:i,calcdata:i.calcdata,page:i.page,rowBlocks:i.rowBlocks,value:o}})}},39754:function(i,o,s){"use strict";var x=s(71828),_=s(44464),F=s(27670).c;i.exports=function(i,o,s,N){function coerce(s,F){return x.coerce(i,o,_,s,F)}F(o,N,coerce),coerce("columnwidth"),coerce("header.values"),coerce("header.format"),coerce("header.align"),coerce("header.prefix"),coerce("header.suffix"),coerce("header.height"),coerce("header.line.width"),coerce("header.line.color"),coerce("header.fill.color"),x.coerceFont(coerce,"header.font",x.extendFlat({},N.font)),function(i,o){for(var s=i.columnorder||[],x=i.header.values.length,_=s.slice(0,x),F=_.slice().sort(function(i,o){return i-o}),N=_.map(function(i){return F.indexOf(i)}),j=N.length;j<x;j++)N.push(j);o("columnorder",N)}(o,coerce),coerce("cells.values"),coerce("cells.format"),coerce("cells.align"),coerce("cells.prefix"),coerce("cells.suffix"),coerce("cells.height"),coerce("cells.line.width"),coerce("cells.line.color"),coerce("cells.fill.color"),x.coerceFont(coerce,"cells.font",x.extendFlat({},N.font)),o._length=null}},96595:function(i,o,s){"use strict";i.exports={attributes:s(44464),supplyDefaults:s(39754),calc:s(76333),plot:s(36736),moduleType:"trace",name:"table",basePlotModule:s(99469),categories:["noOpacity"],meta:{}}},36736:function(i,o,s){"use strict";var x=s(49850),_=s(39898),F=s(71828).numberFormat,N=s(28984),j=s(91424),G=s(63893),Z=s(71828).raiseToTop,X=s(71828).strTranslate,J=s(71828).cancelTransition,$=s(51018),ee=s(56269),et=s(7901);function roundHalfWidth(i){return Math.ceil(i.calcdata.maxLineWidth/2)}function scrollAreaBottomClipKey(i,o){return"clip"+i._fullLayout._uid+"_scrollAreaBottomClip_"+o.key}function columnBoundaryClipKey(i,o){return"clip"+i._fullLayout._uid+"_columnBoundaryClippath_"+o.calcdata.key+"_"+o.specIndex}function flatData(i){return[].concat.apply([],i.map(function(i){return i})).map(function(i){return i.__data__})}function renderScrollbarKit(i,o,s){var F=i.selectAll("."+x.cn.scrollbarKit).data(N.repeat,N.keyFun);F.enter().append("g").classed(x.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),F.each(function(i){var o,s=i.scrollbarState;s.totalHeight=firstRowAnchor(o=i.rowBlocks,o.length-1)+(o.length?rowsHeight(o[o.length-1],1/0):1),s.scrollableAreaHeight=i.groupHeight-headerHeight(i),s.currentlyVisibleHeight=Math.min(s.totalHeight,s.scrollableAreaHeight),s.ratio=s.currentlyVisibleHeight/s.totalHeight,s.barLength=Math.max(s.ratio*s.currentlyVisibleHeight,x.goldenRatio*x.scrollbarWidth),s.barWiggleRoom=s.currentlyVisibleHeight-s.barLength,s.wiggleRoom=Math.max(0,s.totalHeight-s.scrollableAreaHeight),s.topY=0===s.barWiggleRoom?0:i.scrollY/s.wiggleRoom*s.barWiggleRoom,s.bottomY=s.topY+s.barLength,s.dragMultiplier=s.wiggleRoom/s.barWiggleRoom}).attr("transform",function(i){return X(i.width+x.scrollbarWidth/2+x.scrollbarOffset,headerHeight(i))});var j=F.selectAll("."+x.cn.scrollbar).data(N.repeat,N.keyFun);j.enter().append("g").classed(x.cn.scrollbar,!0);var G=j.selectAll("."+x.cn.scrollbarSlider).data(N.repeat,N.keyFun);G.enter().append("g").classed(x.cn.scrollbarSlider,!0),G.attr("transform",function(i){return X(0,i.scrollbarState.topY||0)});var Z=G.selectAll("."+x.cn.scrollbarGlyph).data(N.repeat,N.keyFun);Z.enter().append("line").classed(x.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",x.scrollbarWidth).attr("stroke-linecap","round").attr("y1",x.scrollbarWidth/2),Z.attr("y2",function(i){return i.scrollbarState.barLength-x.scrollbarWidth/2}).attr("stroke-opacity",function(i){return i.columnDragInProgress||!i.scrollbarState.barWiggleRoom||s?0:.4}),Z.transition().delay(0).duration(0),Z.transition().delay(x.scrollbarHideDelay).duration(x.scrollbarHideDuration).attr("stroke-opacity",0);var J=j.selectAll("."+x.cn.scrollbarCaptureZone).data(N.repeat,N.keyFun);J.enter().append("line").classed(x.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",x.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(s){var x=_.event.y,F=this.getBoundingClientRect(),N=s.scrollbarState,j=x-F.top,G=_.scale.linear().domain([0,N.scrollableAreaHeight]).range([0,N.totalHeight]).clamp(!0);N.topY<=j&&j<=N.bottomY||makeDragRow(o,i,null,G(j-N.barLength/2))(s)}).call(_.behavior.drag().origin(function(i){return _.event.stopPropagation(),i.scrollbarState.scrollbarScrollInProgress=!0,i}).on("drag",makeDragRow(o,i)).on("dragend",function(){})),J.attr("y2",function(i){return i.scrollbarState.scrollableAreaHeight}),o._context.staticPlot&&(Z.remove(),J.remove())}function renderColumnCellTree(i,o,s,F){var G,Z,X,J,$,er=((Z=((G=s.selectAll("."+x.cn.columnCells).data(N.repeat,N.keyFun)).enter().append("g").classed(x.cn.columnCells,!0),G.exit().remove(),G).selectAll("."+x.cn.columnCell).data(ee.splitToCells,function(i){return i.keyWithinBlock})).enter().append("g").classed(x.cn.columnCell,!0),Z.exit().remove(),Z);(function(i){i.each(function(i,o){var s=i.calcdata.cells.font,x=i.column.specIndex,_={size:gridPick(s.size,x,o),color:gridPick(s.color,x,o),family:gridPick(s.family,x,o)};i.rowNumber=i.key,i.align=gridPick(i.calcdata.cells.align,x,o),i.cellBorderWidth=gridPick(i.calcdata.cells.line.width,x,o),i.font=_})})(er),function(i){i.attr("width",function(i){return i.column.columnWidth}).attr("stroke-width",function(i){return i.cellBorderWidth}).each(function(i){var o=_.select(this);et.stroke(o,gridPick(i.calcdata.cells.line.color,i.column.specIndex,i.rowNumber)),et.fill(o,gridPick(i.calcdata.cells.fill.color,i.column.specIndex,i.rowNumber))})}(((X=er.selectAll("."+x.cn.cellRect).data(N.repeat,function(i){return i.keyWithinBlock})).enter().append("rect").classed(x.cn.cellRect,!0),X));var en=(($=((J=er.selectAll("."+x.cn.cellTextHolder).data(N.repeat,function(i){return i.keyWithinBlock})).enter().append("g").classed(x.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),J).selectAll("."+x.cn.cellText).data(N.repeat,function(i){return i.keyWithinBlock})).enter().append("text").classed(x.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){_.event.stopPropagation()}),$);(function(i){i.each(function(i){j.font(_.select(this),i.font)})})(en),populateCellText(en,o,F,i),setCellHeightAndPositionY(er)}function populateCellText(i,o,s,N){i.text(function(i){var o,s,_=i.column.specIndex,N=i.rowNumber,j=i.value,G="string"==typeof j,Z=G&&j.match(/<br>/i),X=!G||Z;i.mayHaveMarkup=G&&j.match(/[<&>]/);var J="string"==typeof j&&j.match(x.latexCheck);i.latex=J;var $=J?"":gridPick(i.calcdata.cells.prefix,_,N)||"",ee=J?"":gridPick(i.calcdata.cells.suffix,_,N)||"",et=J?null:gridPick(i.calcdata.cells.format,_,N)||null,er=$+(et?F(et)(i.value):i.value)+ee;if(i.wrappingNeeded=!i.wrapped&&!X&&!J&&(o=hasWrapCharacter(er)),i.cellHeightMayIncrease=Z||J||i.mayHaveMarkup||(void 0===o?hasWrapCharacter(er):o),i.needsConvertToTspans=i.mayHaveMarkup||i.wrappingNeeded||i.latex,i.wrappingNeeded){var en=(" "===x.wrapSplitCharacter?er.replace(/<a href=/ig,"<a_href="):er).split(x.wrapSplitCharacter),ei=" "===x.wrapSplitCharacter?en.map(function(i){return i.replace(/<a_href=/ig,"<a href=")}):en;i.fragments=ei.map(function(i){return{text:i,width:null}}),i.fragments.push({fragment:x.wrapSpacer,width:null}),s=ei.join(x.lineBreaker)+x.lineBreaker+x.wrapSpacer}else delete i.fragments,s=er;return s}).attr("dy",function(i){return i.needsConvertToTspans?0:"0.75em"}).each(function(i){var F=_.select(this),j=i.wrappingNeeded?wrapTextMaker:updateYPositionMaker;i.needsConvertToTspans?G.convertToTspans(F,N,j(s,this,o,N,i)):_.select(this.parentNode).attr("transform",function(i){return X(xPosition(i),x.cellPad)}).attr("text-anchor",function(i){return({left:"start",center:"middle",right:"end"})[i.align]})})}function hasWrapCharacter(i){return -1!==i.indexOf(x.wrapSplitCharacter)}function gridPick(i,o,s){if(!Array.isArray(i))return i;var x=i[Math.min(o,i.length-1)];return Array.isArray(x)?x[Math.min(s,x.length-1)]:x}function easeColumn(i,o,s){i.transition().ease(x.releaseTransitionEase).duration(x.releaseTransitionDuration).attr("transform",X(o.x,s))}function cellsBlock(i){return"cells"===i.type}function headerBlock(i){return"header"===i.type}function headerHeight(i){return(i.rowBlocks.length?i.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(i,o){return i+rowsHeight(o,1/0)},0)}function updateBlockYPosition(i,o,s){var x=flatData(o)[0];if(void 0!==x){var _=x.rowBlocks,F=x.calcdata,N=firstRowAnchor(_,_.length),j=x.calcdata.groupHeight-headerHeight(x),G=F.scrollY=Math.max(0,Math.min(N-j,F.scrollY)),Z=function(i,o,s){for(var x=[],_=0,F=0;F<i.length;F++){for(var N=i[F],j=N.rows,G=0,Z=0;Z<j.length;Z++)G+=j[Z].rowHeight;N.allRowsHeight=G;var X=o+s;o<_+G&&X>_&&x.push(F),_+=G}return x}(_,G,j);1===Z.length&&(Z[0]===_.length-1?Z.unshift(Z[0]-1):Z.push(Z[0]+1)),Z[0]%2&&Z.reverse(),o.each(function(i,o){i.page=Z[o],i.scrollY=G}),o.attr("transform",function(i){return X(0,firstRowAnchor(i.rowBlocks,i.page)-i.scrollY)}),i&&(conditionalPanelRerender(i,s,o,Z,x.prevPages,x,0),conditionalPanelRerender(i,s,o,Z,x.prevPages,x,1),renderScrollbarKit(s,i))}}function makeDragRow(i,o,s,F){return function(N){var j=N.calcdata?N.calcdata:N,G=o.filter(function(i){return j.key===i.key}),Z=s||j.scrollbarState.dragMultiplier,X=j.scrollY;return j.scrollY=void 0===F?j.scrollY+Z*_.event.dy:F,updateBlockYPosition(i,G.selectAll("."+x.cn.yColumn).selectAll("."+x.cn.columnBlock).filter(cellsBlock),G),j.scrollY===X}}function conditionalPanelRerender(i,o,s,x,_,F,N){x[N]!==_[N]&&(clearTimeout(F.currentRepaint[N]),F.currentRepaint[N]=setTimeout(function(){renderColumnCellTree(i,o,s.filter(function(i,o){return o===N&&x[o]!==_[o]}),s),_[N]=x[N]}))}function wrapTextMaker(i,o,s,F){return function(){var N=_.select(o.parentNode);N.each(function(i){var o,s,_=i.fragments;N.selectAll("tspan.line").each(function(i,o){_[o].width=this.getComputedTextLength()});var F=_[_.length-1].width,j=_.slice(0,-1),G=[],Z=0,X=i.column.columnWidth-2*x.cellPad;for(i.value="";j.length;)Z+(s=(o=j.shift()).width+F)>X&&(i.value+=G.join(x.wrapSpacer)+x.lineBreaker,G=[],Z=0),G.push(o.text),Z+=s;Z&&(i.value+=G.join(x.wrapSpacer)),i.wrapped=!0}),N.selectAll("tspan.line").remove(),populateCellText(N.select("."+x.cn.cellText),s,i,F),_.select(o.parentNode.parentNode).call(setCellHeightAndPositionY)}}function updateYPositionMaker(i,o,s,F,N){return function(){if(!N.settledY){var j=_.select(o.parentNode),G=getBlock(N),Z=N.key-G.firstRowIndex,J=G.rows[Z].rowHeight,$=Math.max(N.cellHeightMayIncrease?o.parentNode.getBoundingClientRect().height+2*x.cellPad:J,J);$-G.rows[Z].rowHeight&&(G.rows[Z].rowHeight=$,i.selectAll("."+x.cn.columnCell).call(setCellHeightAndPositionY),updateBlockYPosition(null,i.filter(cellsBlock),0),renderScrollbarKit(s,F,!0)),j.attr("transform",function(){var i=this.parentNode.getBoundingClientRect(),o=_.select(this.parentNode).select("."+x.cn.cellRect).node().getBoundingClientRect(),s=this.transform.baseVal.consolidate(),F=o.top-i.top+(s?s.matrix.f:x.cellPad);return X(xPosition(N,_.select(this.parentNode).select("."+x.cn.cellTextHolder).node().getBoundingClientRect().width),F)}),N.settledY=!0}}}function xPosition(i,o){switch(i.align){case"left":default:return x.cellPad;case"right":return i.column.columnWidth-(o||0)-x.cellPad;case"center":return(i.column.columnWidth-(o||0))/2}}function setCellHeightAndPositionY(i){i.attr("transform",function(i){var o=i.rowBlocks[0].auxiliaryBlocks.reduce(function(i,o){return i+rowsHeight(o,1/0)},0);return X(0,rowsHeight(getBlock(i),i.key)+o)}).selectAll("."+x.cn.cellRect).attr("height",function(i){var o,s;return(o=getBlock(i),s=i.key,o.rows[s-o.firstRowIndex]).rowHeight})}function firstRowAnchor(i,o){for(var s=0,x=o-1;x>=0;x--)s+=function(i){var o=i.allRowsHeight;if(void 0!==o)return o;for(var s=0,x=0;x<i.rows.length;x++)s+=i.rows[x].rowHeight;return i.allRowsHeight=s,s}(i[x]);return s}function rowsHeight(i,o){for(var s=0,x=0;x<i.rows.length&&i.rows[x].rowIndex<o;x++)s+=i.rows[x].rowHeight;return s}function getBlock(i){return i.rowBlocks[i.page]}i.exports=function(i,o){var s=!i._context.staticPlot,F=i._fullLayout._paper.selectAll("."+x.cn.table).data(o.map(function(o){return $(i,N.unwrap(o).trace)}),N.keyFun);F.exit().remove(),F.enter().append("g").classed(x.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),F.attr("width",function(i){return i.width+i.size.l+i.size.r}).attr("height",function(i){return i.height+i.size.t+i.size.b}).attr("transform",function(i){return X(i.translateX,i.translateY)});var G=F.selectAll("."+x.cn.tableControlView).data(N.repeat,N.keyFun),et=G.enter().append("g").classed(x.cn.tableControlView,!0).style("box-sizing","content-box");if(s){var er="onwheel"in document?"wheel":"mousewheel";et.on("mousemove",function(o){G.filter(function(i){return o===i}).call(renderScrollbarKit,i)}).on(er,function(o){o.scrollbarState.wheeling||(o.scrollbarState.wheeling=!0,makeDragRow(i,G,null,o.scrollY+_.event.deltaY)(o)||(_.event.stopPropagation(),_.event.preventDefault()),o.scrollbarState.wheeling=!1)}).call(renderScrollbarKit,i,!0)}G.attr("transform",function(i){return X(i.size.l,i.size.t)});var en=G.selectAll("."+x.cn.scrollBackground).data(N.repeat,N.keyFun);en.enter().append("rect").classed(x.cn.scrollBackground,!0).attr("fill","none"),en.attr("width",function(i){return i.width}).attr("height",function(i){return i.height}),G.each(function(o){j.setClipUrl(_.select(this),scrollAreaBottomClipKey(i,o),i)});var ei=G.selectAll("."+x.cn.yColumn).data(function(i){return i.columns},N.keyFun);ei.enter().append("g").classed(x.cn.yColumn,!0),ei.exit().remove(),ei.attr("transform",function(i){return X(i.x,0)}),s&&ei.call(_.behavior.drag().origin(function(o){return easeColumn(_.select(this),o,-x.uplift),Z(this),o.calcdata.columnDragInProgress=!0,renderScrollbarKit(G.filter(function(i){return o.calcdata.key===i.key}),i),o}).on("drag",function(i){var o=_.select(this),getter=function(o){return(i===o?_.event.x:o.x)+o.columnWidth/2};i.x=Math.max(-x.overdrag,Math.min(i.calcdata.width+x.overdrag-i.columnWidth,_.event.x)),flatData(ei).filter(function(o){return o.calcdata.key===i.calcdata.key}).sort(function(i,o){return getter(i)-getter(o)}).forEach(function(o,s){o.xIndex=s,o.x=i===o?o.x:o.xScale(o)}),ei.filter(function(o){return i!==o}).transition().ease(x.transitionEase).duration(x.transitionDuration).attr("transform",function(i){return X(i.x,0)}),o.call(J).attr("transform",X(i.x,-x.uplift))}).on("dragend",function(o){var s,x,F=_.select(this),N=o.calcdata;o.x=o.xScale(o),o.calcdata.columnDragInProgress=!1,easeColumn(F,o,0),s=N.columns.map(function(i){return i.xIndex}),x=N.gdColumnsOriginalOrder,N.gdColumns.sort(function(i,o){return s[x.indexOf(i)]-s[x.indexOf(o)]}),N.columnorder=s,i.emit("plotly_restyle")})),ei.each(function(o){j.setClipUrl(_.select(this),columnBoundaryClipKey(i,o),i)});var eo=ei.selectAll("."+x.cn.columnBlock).data(ee.splitToPanels,N.keyFun);eo.enter().append("g").classed(x.cn.columnBlock,!0).attr("id",function(i){return i.key}),eo.style("cursor",function(i){return i.dragHandle?"ew-resize":i.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var es=eo.filter(headerBlock),el=eo.filter(cellsBlock);s&&el.call(_.behavior.drag().origin(function(i){return _.event.stopPropagation(),i}).on("drag",makeDragRow(i,G,-1)).on("dragend",function(){})),renderColumnCellTree(i,G,es,eo),renderColumnCellTree(i,G,el,eo);var ec=G.selectAll("."+x.cn.scrollAreaClip).data(N.repeat,N.keyFun);ec.enter().append("clipPath").classed(x.cn.scrollAreaClip,!0).attr("id",function(o){return scrollAreaBottomClipKey(i,o)});var eu=ec.selectAll("."+x.cn.scrollAreaClipRect).data(N.repeat,N.keyFun);eu.enter().append("rect").classed(x.cn.scrollAreaClipRect,!0).attr("x",-x.overdrag).attr("y",-x.uplift).attr("fill","none"),eu.attr("width",function(i){return i.width+2*x.overdrag}).attr("height",function(i){return i.height+x.uplift}),ei.selectAll("."+x.cn.columnBoundary).data(N.repeat,N.keyFun).enter().append("g").classed(x.cn.columnBoundary,!0);var ef=ei.selectAll("."+x.cn.columnBoundaryClippath).data(N.repeat,N.keyFun);ef.enter().append("clipPath").classed(x.cn.columnBoundaryClippath,!0),ef.attr("id",function(o){return columnBoundaryClipKey(i,o)});var eh=ef.selectAll("."+x.cn.columnBoundaryRect).data(N.repeat,N.keyFun);eh.enter().append("rect").classed(x.cn.columnBoundaryRect,!0).attr("fill","none"),eh.attr("width",function(i){return i.columnWidth+2*roundHalfWidth(i)}).attr("height",function(i){return i.calcdata.height+2*roundHalfWidth(i)+x.uplift}).attr("x",function(i){return-roundHalfWidth(i)}).attr("y",function(i){return-roundHalfWidth(i)}),updateBlockYPosition(null,el,G)}},45802:function(i,o,s){"use strict";var x=s(5386).fF,_=s(5386).si,F=s(50693),N=s(27670).Y,j=s(34e3),G=s(57564),Z=s(43473),X=s(1426).extendFlat,J=s(79952).u;i.exports={labels:G.labels,parents:G.parents,values:G.values,branchvalues:G.branchvalues,count:G.count,level:G.level,maxdepth:G.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:X({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:G.marker.colors,pattern:J,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:G.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},F("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:X({},j.textfont,{}),editType:"calc"},text:j.text,textinfo:G.textinfo,texttemplate:_({editType:"plot"},{keys:Z.eventDataKeys.concat(["label","value"])}),hovertext:j.hovertext,hoverinfo:G.hoverinfo,hovertemplate:x({},{keys:Z.eventDataKeys}),textfont:j.textfont,insidetextfont:j.insidetextfont,outsidetextfont:X({},j.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:j.sort,root:G.root,domain:N({name:"treemap",trace:!0,editType:"calc"})}},78018:function(i,o,s){"use strict";var x=s(74875);o.name="treemap",o.plot=function(i,s,_,F){x.plotBasePlot(o.name,i,s,_,F)},o.clean=function(i,s,_,F){x.cleanBasePlot(o.name,i,s,_,F)}},65039:function(i,o,s){"use strict";var x=s(52147);o.y=function(i,o){return x.calc(i,o)},o.T=function(i){return x._runCrossTraceCalc("treemap",i)}},43473:function(i){"use strict";i.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(i,o,s){"use strict";var x=s(71828),_=s(45802),F=s(7901),N=s(27670).c,j=s(90769).handleText,G=s(97313).TEXTPAD,Z=s(37434).handleMarkerDefaults,X=s(21081),J=X.hasColorscale,$=X.handleDefaults;i.exports=function(i,o,s,X){function coerce(s,F){return x.coerce(i,o,_,s,F)}var ee=coerce("labels"),et=coerce("parents");if(!ee||!ee.length||!et||!et.length){o.visible=!1;return}var er=coerce("values");coerce(er&&er.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),"squarify"===coerce("tiling.packing")&&coerce("tiling.squarifyratio"),coerce("tiling.flip"),coerce("tiling.pad");var en=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(en)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate");var ei=coerce("pathbar.visible");j(i,o,X,coerce,"auto",{hasPathbar:ei,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("textposition");var eo=-1!==o.textposition.indexOf("bottom");Z(i,o,X,coerce),(o._hasColorscale=J(i,"marker","colors")||(i.marker||{}).coloraxis)?$(i,o,X,coerce,{prefix:"marker.",cLetter:"c"}):coerce("marker.depthfade",!(o.marker.colors||[]).length);var es=2*o.textfont.size;coerce("marker.pad.t",eo?es/4:es),coerce("marker.pad.l",es/4),coerce("marker.pad.r",es/4),coerce("marker.pad.b",eo?es:es/4),coerce("marker.cornerradius"),o._hovered={marker:{line:{width:2,color:F.contrast(X.paper_bgcolor)}}},ei&&(coerce("pathbar.thickness",o.pathbar.textfont.size+2*G),coerce("pathbar.side"),coerce("pathbar.edgeshape")),coerce("sort"),coerce("root.color"),N(o,X,coerce),o._length=null}},80694:function(i,o,s){"use strict";var x=s(39898),_=s(2791),F=s(72597).clearMinTextSize,N=s(16688).resizeText,j=s(46650);i.exports=function(i,o,s,G,Z){var X,J,$=Z.type,ee=Z.drawDescendants,et=i._fullLayout,er=et["_"+$+"layer"],en=!s;F($,et),(X=er.selectAll("g.trace."+$).data(o,function(i){return i[0].trace.uid})).enter().append("g").classed("trace",!0).classed($,!0),X.order(),!et.uniformtext.mode&&_.hasTransition(s)?(G&&(J=G()),x.transition().duration(s.duration).ease(s.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()}).each(function(){er.selectAll("g.trace").each(function(o){j(i,o,this,s,ee)})})):(X.each(function(o){j(i,o,this,s,ee)}),et.uniformtext.mode&&N(i,er.selectAll(".trace"),$)),en&&X.exit().remove()}},66209:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(63893),j=s(37210),G=s(96362).styleOne,Z=s(43473),X=s(2791),J=s(83523);i.exports=function(i,o,s,$,ee){var et=ee.barDifY,er=ee.width,en=ee.height,ei=ee.viewX,eo=ee.viewY,es=ee.pathSlice,el=ee.toMoveInsideSlice,ec=ee.strTransform,eu=ee.hasTransition,ef=ee.handleSlicesExit,eh=ee.makeUpdateSliceInterpolator,ed=ee.makeUpdateTextInterpolator,ep={},eg=i._context.staticPlot,em=i._fullLayout,ey=o[0],ev=ey.trace,ex=ey.hierarchy,e_=er/ev._entryDepth,ew=X.listPath(s.data,"id"),eT=j(ex.copy(),[er,en],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(eT=eT.filter(function(i){var o=ew.indexOf(i.data.id);return -1!==o&&(i.x0=e_*o,i.x1=e_*(o+1),i.y0=et,i.y1=et+en,i.onPathbar=!0,!0)})).reverse(),($=$.data(eT,X.getPtId)).enter().append("g").classed("pathbar",!0),ef($,!0,ep,[er,en],es),$.order();var ek=$;eu&&(ek=ek.transition().each("end",function(){var o=x.select(this);X.setSliceCursor(o,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ek.each(function(j){j._x0=ei(j.x0),j._x1=ei(j.x1),j._y0=eo(j.y0),j._y1=eo(j.y1),j._hoverX=ei(j.x1-Math.min(er,en)/2),j._hoverY=eo(j.y1-en/2);var $=x.select(this),ee=_.ensureSingle($,"path","surface",function(i){i.style("pointer-events",eg?"none":"all")});eu?ee.transition().attrTween("d",function(i){var o=eh(i,!0,ep,[er,en]);return function(i){return es(o(i))}}):ee.attr("d",es),$.call(J,s,i,o,{styleOne:G,eventDataKeys:Z.eventDataKeys,transitionTime:Z.CLICK_TRANSITION_TIME,transitionEasing:Z.CLICK_TRANSITION_EASING}).call(X.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),ee.call(G,j,ev,i,{hovered:!1}),j._text=(X.getPtLabel(j)||"").split("<br>").join(" ")||"";var et=_.ensureSingle($,"g","slicetext"),ef=_.ensureSingle(et,"text","",function(i){i.attr("data-notex",1)}),ey=_.ensureUniformFontSize(i,X.determineTextFont(ev,j,em.font,{onPathbar:!0}));ef.text(j._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(F.font,ey).call(N.convertToTspans,i),j.textBB=F.bBox(ef.node()),j.transform=el(j,{fontSize:ey.size,onPathbar:!0}),j.transform.fontSize=ey.size,eu?ef.transition().attrTween("transform",function(i){var o=ed(i,!0,ep,[er,en]);return function(i){return ec(o(i))}}):ef.attr("transform",ec(j))})}},52583:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(63893),j=s(37210),G=s(96362).styleOne,Z=s(43473),X=s(2791),J=s(83523),$=s(24714).formatSliceLabel;i.exports=function(i,o,s,ee,et){var er=et.width,en=et.height,ei=et.viewX,eo=et.viewY,es=et.pathSlice,el=et.toMoveInsideSlice,ec=et.strTransform,eu=et.hasTransition,ef=et.handleSlicesExit,eh=et.makeUpdateSliceInterpolator,ed=et.makeUpdateTextInterpolator,ep=et.prevEntry,eg=i._context.staticPlot,em=i._fullLayout,ey=o[0].trace,ev=-1!==ey.textposition.indexOf("left"),ex=-1!==ey.textposition.indexOf("right"),e_=-1!==ey.textposition.indexOf("bottom"),ew=!e_&&!ey.marker.pad.t||e_&&!ey.marker.pad.b,eT=j(s,[er,en],{packing:ey.tiling.packing,squarifyratio:ey.tiling.squarifyratio,flipX:ey.tiling.flip.indexOf("x")>-1,flipY:ey.tiling.flip.indexOf("y")>-1,pad:{inner:ey.tiling.pad,top:ey.marker.pad.t,left:ey.marker.pad.l,right:ey.marker.pad.r,bottom:ey.marker.pad.b}}).descendants(),ek=1/0,eA=-1/0;eT.forEach(function(i){var o=i.depth;o>=ey._maxDepth?(i.x0=i.x1=(i.x0+i.x1)/2,i.y0=i.y1=(i.y0+i.y1)/2):(ek=Math.min(ek,o),eA=Math.max(eA,o))}),ee=ee.data(eT,X.getPtId),ey._maxVisibleLayers=isFinite(eA)?eA-ek+1:0,ee.enter().append("g").classed("slice",!0),ef(ee,!1,{},[er,en],es),ee.order();var eS=null;if(eu&&ep){var eM=X.getPtId(ep);ee.each(function(i){null===eS&&X.getPtId(i)===eM&&(eS={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})})}var getRefRect=function(){return eS||{x0:0,x1:er,y0:0,y1:en}},eC=ee;return eu&&(eC=eC.transition().each("end",function(){var o=x.select(this);X.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),eC.each(function(j){var ee=X.isHeader(j,ey);j._x0=ei(j.x0),j._x1=ei(j.x1),j._y0=eo(j.y0),j._y1=eo(j.y1),j._hoverX=ei(j.x1-ey.marker.pad.r),j._hoverY=e_?eo(j.y1-ey.marker.pad.b/2):eo(j.y0+ey.marker.pad.t/2);var et=x.select(this),ef=_.ensureSingle(et,"path","surface",function(i){i.style("pointer-events",eg?"none":"all")});eu?ef.transition().attrTween("d",function(i){var o=eh(i,!1,getRefRect(),[er,en]);return function(i){return es(o(i))}}):ef.attr("d",es),et.call(J,s,i,o,{styleOne:G,eventDataKeys:Z.eventDataKeys,transitionTime:Z.CLICK_TRANSITION_TIME,transitionEasing:Z.CLICK_TRANSITION_EASING}).call(X.setSliceCursor,i,{isTransitioning:i._transitioning}),ef.call(G,j,ey,i,{hovered:!1}),j.x0===j.x1||j.y0===j.y1?j._text="":ee?j._text=ew?"":X.getPtLabel(j)||"":j._text=$(j,s,ey,o,em)||"";var ep=_.ensureSingle(et,"g","slicetext"),eT=_.ensureSingle(ep,"text","",function(i){i.attr("data-notex",1)}),ek=_.ensureUniformFontSize(i,X.determineTextFont(ey,j,em.font));eT.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",ex?"end":ev||ee?"start":"middle").call(F.font,ek).call(N.convertToTspans,i),j.textBB=F.bBox(eT.node()),j.transform=el(j,{fontSize:ek.size,isHeader:ee}),j.transform.fontSize=ek.size,eu?eT.transition().attrTween("transform",function(i){var o=ed(i,!1,getRefRect(),[er,en]);return function(i){return ec(o(i))}}):eT.attr("transform",ec(j))}),eS}},14102:function(i){"use strict";i.exports=function flipTree(i,o,s){s.swapXY&&(x=i.x0,i.x0=i.y0,i.y0=x,x=i.x1,i.x1=i.y1,i.y1=x),s.flipX&&(x=i.x0,i.x0=o[0]-i.x1,i.x1=o[0]-x),s.flipY&&(x=i.y0,i.y0=o[1]-i.y1,i.y1=o[1]-x);var x,_=i.children;if(_)for(var F=0;F<_.length;F++)flipTree(_[F],o,s)}},70954:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"treemap",basePlotModule:s(78018),categories:[],animatable:!0,attributes:s(45802),layoutAttributes:s(55479),supplyDefaults:s(91174),supplyLayoutDefaults:s(77182),calc:s(65039).y,crossTraceCalc:s(65039).T,plot:s(5893),style:s(96362).style,colorbar:s(4898),meta:{}}},55479:function(i){"use strict";i.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(i,o,s){"use strict";var x=s(71828),_=s(55479);i.exports=function(i,o){function coerce(s,F){return x.coerce(i,o,_,s,F)}coerce("treemapcolorway",o.colorway),coerce("extendtreemapcolors")}},37210:function(i,o,s){"use strict";var x=s(674),_=s(14102);i.exports=function(i,o,s){var F,N=s.flipX,j=s.flipY,G="dice-slice"===s.packing,Z=s.pad[j?"bottom":"top"],X=s.pad[N?"right":"left"],J=s.pad[N?"left":"right"],$=s.pad[j?"top":"bottom"];G&&(F=X,X=Z,Z=F,F=J,J=$,$=F);var ee=x.treemap().tile(function(i,o){switch(i){case"squarify":return x.treemapSquarify.ratio(o);case"binary":return x.treemapBinary;case"dice":return x.treemapDice;case"slice":return x.treemapSlice;default:return x.treemapSliceDice}}(s.packing,s.squarifyratio)).paddingInner(s.pad.inner).paddingLeft(X).paddingRight(J).paddingTop(Z).paddingBottom($).size(G?[o[1],o[0]]:o)(i);return(G||N||j)&&_(ee,o,{swapXY:G,flipX:N,flipY:j}),ee}},5893:function(i,o,s){"use strict";var x=s(80694),_=s(52583);i.exports=function(i,o,s,F){return x(i,o,s,F,{type:"treemap",drawDescendants:_})}},46650:function(i,o,s){"use strict";var x=s(39898),_=s(81684).sX,F=s(2791),N=s(71828),j=s(97313).TEXTPAD,G=s(17295).toMoveInsideBar,Z=s(72597).recordMinTextSize,X=s(43473),J=s(66209);function getKey(i){return F.isHierarchyRoot(i)?"":F.getPtId(i)}i.exports=function(i,o,s,$,ee){var et=i._fullLayout,er=o[0],en=er.trace,ei="icicle"===en.type,eo=er.hierarchy,es=F.findEntryWithLevel(eo,en.level),el=x.select(s),ec=el.selectAll("g.pathbar"),eu=el.selectAll("g.slice");if(!es){ec.remove(),eu.remove();return}var ef=F.isHierarchyRoot(es),eh=!et.uniformtext.mode&&F.hasTransition($),ed=F.getMaxDepth(en),ep=et._size,eg=en.domain,em=ep.w*(eg.x[1]-eg.x[0]),ey=ep.h*(eg.y[1]-eg.y[0]),ev=en.pathbar.thickness,ex=en.marker.line.width+X.gapWithPathbar,e_=en.pathbar.visible?en.pathbar.side.indexOf("bottom")>-1?ey+ex:-(ev+ex):0,ew={x0:em,x1:em,y0:e_,y1:e_+ev},findClosestEdge=function(i,o,s){var x=en.tiling.pad,isLeftOfRect=function(i){return i-x<=o.x0},isRightOfRect=function(i){return i+x>=o.x1},isBottomOfRect=function(i){return i-x<=o.y0},isTopOfRect=function(i){return i+x>=o.y1};return i.x0===o.x0&&i.x1===o.x1&&i.y0===o.y0&&i.y1===o.y1?{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1}:{x0:isLeftOfRect(i.x0-x)?0:isRightOfRect(i.x0-x)?s[0]:i.x0,x1:isLeftOfRect(i.x1+x)?0:isRightOfRect(i.x1+x)?s[0]:i.x1,y0:isBottomOfRect(i.y0-x)?0:isTopOfRect(i.y0-x)?s[1]:i.y0,y1:isBottomOfRect(i.y1+x)?0:isTopOfRect(i.y1+x)?s[1]:i.y1}},eT=null,ek={},eA={},eS=null,getPrev=function(i,o){return o?ek[getKey(i)]:eA[getKey(i)]},getOrigin=function(i,o,s,x){if(o)return ek[getKey(eo)]||ew;var _=eA[en.level]||s;return i.data.depth-es.data.depth<ed?findClosestEdge(i,_,x):{}};er.hasMultipleRoots&&ef&&ed++,en._maxDepth=ed,en._backgroundColor=et.paper_bgcolor,en._entryDepth=es.data.depth,en._atRootLevel=ef;var eM=-em/2+ep.l+ep.w*(eg.x[1]+eg.x[0])/2,eC=-ey/2+ep.t+ep.h*(1-(eg.y[1]+eg.y[0])/2),viewMapX=function(i){return eM+i},viewMapY=function(i){return eC+i},eE=viewMapY(0),eL=viewMapX(0),viewBarX=function(i){return eL+i},viewBarY=function(i){return eE+i},eP=viewBarX(0),limitX0=function(i){i.x=Math.max(eP,i.x)},eI=en.pathbar.edgeshape,eO=en[ei?"tiling":"marker"].pad,hasFlag=function(i){return -1!==en.textposition.indexOf(i)},eD=hasFlag("top"),eR=hasFlag("left"),eB=hasFlag("right"),ez=hasFlag("bottom"),toMoveInsideSlice=function(i,o){var s=i.x0,x=i.x1,_=i.y0,F=i.y1,N=i.textBB,X=eD||o.isHeader&&!ez,J=hasFlag("right"),$=hasFlag("left")||o.onPathbar;if(o.isHeader){if((s+=(ei?eO:eO.l)-j)>=(x-=(ei?eO:eO.r)-j)){var ee,er=(s+x)/2;s=er,x=er}ez?_<(ee=F-(ei?eO:eO.b))&&ee<F&&(_=ee):(ee=_+(ei?eO:eO.t),_<ee&&ee<F&&(F=ee))}var eo=G(s,x,_,F,N,{isHorizontal:!1,constrained:!0,angle:0,anchor:X?"start":ez?"end":"middle",leftToRight:$?-1:J?1:0});return(eo.fontSize=o.fontSize,eo.targetX=viewMapX(eo.targetX),eo.targetY=viewMapY(eo.targetY),isNaN(eo.targetX)||isNaN(eo.targetY))?{}:(s!==x&&_!==F&&Z(en.type,eo,et),{scale:eo.scale,rotate:eo.rotate,textX:eo.textX,textY:eo.textY,anchorX:eo.anchorX,anchorY:eo.anchorY,targetX:eo.targetX,targetY:eo.targetY})},interpFromParent=function(i,o){for(var s,x=0,_=i;!s&&x<ed;)x++,(_=_.parent)?s=getPrev(_,o):x=ed;return s||{}},makeExitSliceInterpolator=function(i,o,s,x){var F,N=getPrev(i,o);if(o)F=ew;else{var j=getPrev(es,o);F=j?findClosestEdge(i,j,x):{}}return _(N,F)},makeUpdateSliceInterpolator=function(i,o,s,x,F){var j,G=getPrev(i,o);if(G)j=G;else if(o)j=ew;else if(eT){if(i.parent){var Z=eS||s;Z&&!o?j=findClosestEdge(i,Z,x):(j={},N.extendFlat(j,interpFromParent(i,o)))}else j=N.extendFlat({},i),ei&&("h"===F.orientation?F.flipX?j.x0=i.x1:j.x1=0:F.flipY?j.y0=i.y1:j.y1=0)}else j={};return _(j,{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})},makeUpdateTextInterpolator=function(i,o,s,x){var j=getPrev(i,o),G={},X=getOrigin(i,o,s,x);N.extendFlat(G,{transform:toMoveInsideSlice({x0:X.x0,x1:X.x1,y0:X.y0,y1:X.y1,textBB:i.textBB,_text:i._text},{isHeader:F.isHeader(i,en)})}),j?G=j:i.parent&&N.extendFlat(G,interpFromParent(i,o));var J=i.transform;return i.x0!==i.x1&&i.y0!==i.y1&&Z(en.type,J,et),_(G,{transform:{scale:J.scale,rotate:J.rotate,textX:J.textX,textY:J.textY,anchorX:J.anchorX,anchorY:J.anchorY,targetX:J.targetX,targetY:J.targetY}})},handleSlicesExit=function(i,o,s,_,F){var N=_[0],j=_[1];eh?i.exit().transition().each(function(){var i=x.select(this);i.select("path.surface").transition().attrTween("d",function(i){var x=makeExitSliceInterpolator(i,o,s,[N,j]);return function(i){return F(x(i))}}),i.select("g.slicetext").attr("opacity",0)}).remove():i.exit().remove()},strTransform=function(i){var o=i.transform;return i.x0!==i.x1&&i.y0!==i.y1&&Z(en.type,o,et),N.getTextTransform({textX:o.textX,textY:o.textY,anchorX:o.anchorX,anchorY:o.anchorY,targetX:o.targetX,targetY:o.targetY,scale:o.scale,rotate:o.rotate})};eh&&(ec.each(function(i){ek[getKey(i)]={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1},i.transform&&(ek[getKey(i)].transform={textX:i.transform.textX,textY:i.transform.textY,anchorX:i.transform.anchorX,anchorY:i.transform.anchorY,targetX:i.transform.targetX,targetY:i.transform.targetY,scale:i.transform.scale,rotate:i.transform.rotate})}),eu.each(function(i){eA[getKey(i)]={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1},i.transform&&(eA[getKey(i)].transform={textX:i.transform.textX,textY:i.transform.textY,anchorX:i.transform.anchorX,anchorY:i.transform.anchorY,targetX:i.transform.targetX,targetY:i.transform.targetY,scale:i.transform.scale,rotate:i.transform.rotate}),!eT&&F.isEntry(i)&&(eT=i)})),eS=ee(i,o,es,eu,{width:em,height:ey,viewX:viewMapX,viewY:viewMapY,pathSlice:function(i){var o=viewMapX(i.x0),s=viewMapX(i.x1),x=viewMapY(i.y0),_=viewMapY(i.y1),F=s-o,N=_-x;if(!F||!N)return"";var j=Math.min(en.marker.cornerradius||0,F/2,N/2);j&&i.data&&i.data.data&&i.data.data.label&&(eD&&(j=Math.min(j,eO.t)),eR&&(j=Math.min(j,eO.l)),eB&&(j=Math.min(j,eO.r)),ez&&(j=Math.min(j,eO.b)));var arc=function(i,o){return j?"a"+j+","+j+" 0 0 1 "+i+","+o:""};return"M"+o+","+(x+j)+arc(j,-j)+"L"+(s-j)+","+x+arc(j,j)+"L"+s+","+(_-j)+arc(-j,j)+"L"+(o+j)+","+_+arc(-j,-j)+"Z"},toMoveInsideSlice:toMoveInsideSlice,prevEntry:eT,makeUpdateSliceInterpolator:makeUpdateSliceInterpolator,makeUpdateTextInterpolator:makeUpdateTextInterpolator,handleSlicesExit:handleSlicesExit,hasTransition:eh,strTransform:strTransform}),en.pathbar.visible?J(i,o,es,ec,{barDifY:e_,width:em,height:ev,viewX:viewBarX,viewY:viewBarY,pathSlice:function(i){var o=viewBarX(Math.max(Math.min(i.x0,i.x0),0)),s=viewBarX(Math.min(Math.max(i.x1,i.x1),em)),x=viewBarY(i.y0),_=viewBarY(i.y1),F=ev/2,N={},j={};N.x=o,j.x=s,N.y=j.y=(x+_)/2;var G={x:o,y:x},Z={x:s,y:x},X={x:s,y:_},J={x:o,y:_};return">"===eI?(G.x-=F,Z.x-=F,X.x-=F,J.x-=F):"/"===eI?(X.x-=F,J.x-=F,N.x-=F/2,j.x-=F/2):"\\"===eI?(G.x-=F,Z.x-=F,N.x-=F/2,j.x-=F/2):"<"===eI&&(N.x-=F,j.x-=F),limitX0(G),limitX0(J),limitX0(N),limitX0(Z),limitX0(X),limitX0(j),"M"+G.x+","+G.y+"L"+Z.x+","+Z.y+"L"+j.x+","+j.y+"L"+X.x+","+X.y+"L"+J.x+","+J.y+"L"+N.x+","+N.y+"Z"},toMoveInsideSlice:toMoveInsideSlice,makeUpdateSliceInterpolator:makeUpdateSliceInterpolator,makeUpdateTextInterpolator:makeUpdateTextInterpolator,handleSlicesExit:handleSlicesExit,hasTransition:eh,strTransform:strTransform}):ec.remove()}},96362:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(71828),N=s(2791),j=s(72597).resizeText,G=s(43467);function styleOne(i,o,s,x,j){var Z=(j||{}).hovered,X=o.data.data,J=X.i,$=X.color,ee=N.isHierarchyRoot(o),et=1;if(Z)en=s._hovered.marker.line.color,ei=s._hovered.marker.line.width;else if(ee&&$===s.root.color)et=100,en="rgba(0,0,0,0)",ei=0;else if(en=F.castOption(s,J,"marker.line.color")||_.defaultLine,ei=F.castOption(s,J,"marker.line.width")||0,!s._hasColorscale&&!o.onPathbar){var er=s.marker.depthfade;if(er){var en,ei,eo,es=_.combine(_.addOpacity(s._backgroundColor,.75),$);if(!0===er?eo=isFinite(N.getMaxDepth(s))?N.isLeaf(o)?0:s._maxVisibleLayers-(o.data.depth-s._entryDepth):o.data.height+1:(eo=o.data.depth-s._entryDepth,!s._atRootLevel&&eo++),eo>0)for(var el=0;el<eo;el++){var ec=.5*el/eo;$=_.combine(_.addOpacity(es,ec),$)}}}i.call(G,o,s,x,$).style("stroke-width",ei).call(_.stroke,en).style("opacity",et)}i.exports={style:function(i){var o=i._fullLayout._treemaplayer.selectAll(".trace");j(i,o,"treemap"),o.each(function(o){var s=x.select(this),_=o[0].trace;s.style("opacity",_.opacity),s.selectAll("path.surface").each(function(o){x.select(this).call(styleOne,o,_,i,{hovered:!1})})})},styleOne:styleOne}},68875:function(i,o,s){"use strict";var x=s(53522),_=s(1426).extendFlat,F=s(12663).axisHoverFormat;i.exports={y:x.y,x:x.x,x0:x.x0,y0:x.y0,xhoverformat:F("x"),yhoverformat:F("y"),name:_({},x.name,{}),orientation:_({},x.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:x.fillcolor,points:_({},x.boxpoints,{}),jitter:_({},x.jitter,{}),pointpos:_({},x.pointpos,{}),width:_({},x.width,{}),marker:x.marker,text:x.text,hovertext:x.hovertext,hovertemplate:x.hovertemplate,quartilemethod:x.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:x.selected,unselected:x.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(48518),N=s(60168),j=s(50606).BADNUM;i.exports=function(i,o){var s=F(i,o);if(s[0].t.empty)return s;for(var G=i._fullLayout,Z=_.getFromId(i,o["h"===o.orientation?"xaxis":"yaxis"]),X=1/0,J=-1/0,$=0,ee=0,et=0;et<s.length;et++){var er=s[et],en=er.pts.map(N.extractVal),ei=er.bandwidth=function(i,o,s){var _=o.max-o.min;if(!_)return i.bandwidth?i.bandwidth:0;if(i.bandwidth)return Math.max(i.bandwidth,_/1e4);var F=s.length;return Math.max(1.059*Math.min(x.stdev(s,F-1,o.mean),(o.q3-o.q1)/1.349)*Math.pow(F,-.2),_/100)}(o,er,en),eo=er.span=function(i,o,s,x){var F,N=i.spanmode,G=i.span||[],Z=[o.min,o.max],X=[o.min-2*x,o.max+2*x];function calcSpanItem(x){var _=G[x],F="multicategory"===s.type?s.r2c(_):s.d2c(_,0,i[o.valLetter+"calendar"]);return F===j?X[x]:F}var J={type:"linear",range:F="soft"===N?X:"hard"===N?Z:[calcSpanItem(0),calcSpanItem(1)]};return _.setConvert(J),J.cleanRange(),F}(o,er,Z,ei);if(er.min===er.max&&0===ei)eo=er.span=[er.min,er.max],er.density=[{v:1,t:eo[0]}],er.bandwidth=ei,$=Math.max($,1);else{var es=eo[1]-eo[0],el=Math.ceil(es/(ei/3)),ec=es/el;if(!isFinite(ec)||!isFinite(el))return x.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var eu=N.makeKDE(er,o,en);er.density=Array(el);for(var ef=0,eh=eo[0];eh<eo[1]+ec/2;ef++,eh+=ec){var ed=eu(eh);er.density[ef]={v:ed,t:eh},$=Math.max($,ed)}}ee=Math.max(ee,en.length),X=Math.min(X,eo[0]),J=Math.max(J,eo[1])}var ep=_.findExtremes(Z,[X,J],{padded:!0});if(o._extremes[Z._id]=ep,o.width)s[0].t.maxKDE=$;else{var eg=G._violinScaleGroupStats,em=o.scalegroup,ey=eg[em];ey?(ey.maxKDE=Math.max(ey.maxKDE,$),ey.maxCount=Math.max(ey.maxCount,ee)):eg[em]={maxKDE:$,maxCount:ee}}return s[0].t.labels.kde=x._(i,"kde:"),s}},86403:function(i,o,s){"use strict";var x=s(37188).setPositionOffset,_=["v","h"];i.exports=function(i,o){for(var s=i.calcdata,F=o.xaxis,N=o.yaxis,j=0;j<_.length;j++){for(var G=_[j],Z="h"===G?N:F,X=[],J=0;J<s.length;J++){var $=s[J],ee=$[0].t,et=$[0].trace;!0!==et.visible||"violin"!==et.type||ee.empty||et.orientation!==G||et.xaxis!==F._id||et.yaxis!==N._id||X.push(J)}x("violin",i,X,Z)}}},15899:function(i,o,s){"use strict";var x=s(71828),_=s(7901),F=s(36411),N=s(68875);i.exports=function(i,o,s,j){function coerce(s,_){return x.coerce(i,o,N,s,_)}function coerce2(s,_){return x.coerce2(i,o,N,s,_)}if(F.handleSampleDefaults(i,o,coerce,j),!1!==o.visible){coerce("bandwidth"),coerce("side"),coerce("width")||(coerce("scalegroup",o.name),coerce("scalemode")),Array.isArray(coerce("span"))&&(G="manual"),coerce("spanmode",G);var G,Z=coerce("line.color",(i.marker||{}).color||s),X=coerce("line.width"),J=coerce("fillcolor",_.addOpacity(o.line.color,.5));F.handlePointsDefaults(i,o,coerce,{prefix:""});var $=coerce2("box.width"),ee=coerce2("box.fillcolor",J),et=coerce2("box.line.color",Z),er=coerce2("box.line.width",X);coerce("box.visible",!!($||ee||et||er))||(o.box={visible:!1});var en=coerce2("meanline.color",Z),ei=coerce2("meanline.width",X);coerce("meanline.visible",!!(en||ei))||(o.meanline={visible:!1}),coerce("quartilemethod")}}},60168:function(i,o,s){"use strict";var x=s(71828);o.makeKDE=function(i,o,s){var x=s.length,_=i.bandwidth,F=1/(x*_);return function(i){for(var o,N=0,j=0;j<x;j++)N+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(o=(i-s[j])/_)*o);return F*N}},o.getPositionOnKdePath=function(i,o,s){"h"===o.orientation?(_="y",F="x"):(_="x",F="y");var _,F,N=x.findPointOnPath(i.path,s,F,{pathLength:i.pathLength}),j=i.posCenterPx,G=N[_],Z="both"===o.side?2*j-G:j;return[G,Z]},o.getKdeValue=function(i,s,x){var _=i.pts.map(o.extractVal);return o.makeKDE(i,s,_)(x)/i.posDensityScale},o.extractVal=function(i){return i.v}},57634:function(i,o,s){"use strict";var x=s(7901),_=s(71828),F=s(89298),N=s(41868),j=s(60168);i.exports=function(i,o,s,G,Z){Z||(Z={});var X=Z.hoverLayer,J=i.cd,$=J[0].trace,ee=$.hoveron,et=-1!==ee.indexOf("violins"),er=-1!==ee.indexOf("kde"),en=[];if(et||er){var ei=N.hoverOnBoxes(i,o,s,G);if(er&&ei.length>0){var eo,es,el,ec,eu,ef,eh,ed=i.xa,ep=i.ya;"h"===$.orientation?(eh=o,el="y",eu=ep,ec="x",ef=ed):(eh=s,el="x",eu=ed,ec="y",ef=ep);var eg=J[i.index];if(eh>=eg.span[0]&&eh<=eg.span[1]){var em=_.extendFlat({},i),ey=ef.c2p(eh,!0),ev=j.getKdeValue(eg,$,eh),ex=j.getPositionOnKdePath(eg,$,ey),e_=eu._offset,ew=eu._length;em[el+"0"]=ex[0],em[el+"1"]=ex[1],em[ec+"0"]=em[ec+"1"]=ey,em[ec+"Label"]=ec+": "+F.hoverLabelText(ef,eh,$[ec+"hoverformat"])+", "+J[0].t.labels.kde+" "+ev.toFixed(3);for(var eT=0,ek=0;ek<ei.length;ek++)if("med"===ei[ek].attr){eT=ek;break}em.spikeDistance=ei[eT].spikeDistance;var eA=el+"Spike";em[eA]=ei[eT][eA],ei[eT].spikeDistance=void 0,ei[eT][eA]=void 0,em.hovertemplate=!1,en.push(em),(es={})[el+"1"]=_.constrain(e_+ex[0],e_,e_+ew),es[el+"2"]=_.constrain(e_+ex[1],e_,e_+ew),es[ec+"1"]=es[ec+"2"]=ef._offset+ey}}et&&(en=en.concat(ei))}-1!==ee.indexOf("points")&&(eo=N.hoverOnPoints(i,o,s));var eS=X.selectAll(".violinline-"+$.uid).data(es?[0]:[]);return(eS.enter().append("line").classed("violinline-"+$.uid,!0).attr("stroke-width",1.5),eS.exit().remove(),eS.attr(es).call(x.stroke,i.color),"closest"===G)?eo?[eo]:en:(eo&&en.push(eo),en)}},47462:function(i,o,s){"use strict";i.exports={attributes:s(68875),layoutAttributes:s(9228),supplyDefaults:s(15899),crossTraceDefaults:s(36411).crossTraceDefaults,supplyLayoutDefaults:s(33598),calc:s(38603),crossTraceCalc:s(86403),plot:s(28443),style:s(31847),styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(57634),selectPoints:s(24626),moduleType:"trace",name:"violin",basePlotModule:s(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(i,o,s){"use strict";var x=s(40094),_=s(71828).extendFlat;i.exports={violinmode:_({},x.boxmode,{}),violingap:_({},x.boxgap,{}),violingroupgap:_({},x.boxgroupgap,{})}},33598:function(i,o,s){"use strict";var x=s(71828),_=s(9228),F=s(4199);i.exports=function(i,o,s){F._supply(i,o,s,function(s,F){return x.coerce(i,o,_,s,F)},"violin")}},28443:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(86047),j=s(34621),G=s(60168);i.exports=function(i,o,s,Z){var X=i._context.staticPlot,J=i._fullLayout,$=o.xaxis,ee=o.yaxis;function makePath(i,o){var s=j(i,{xaxis:$,yaxis:ee,trace:o,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return F.smoothopen(s[0],1)}_.makeTraceGroups(Z,s,"trace violins").each(function(i){var s,F,j,Z=x.select(this),et=i[0],er=et.t,en=et.trace;if(!0!==en.visible||er.empty){Z.remove();return}var ei=er.bPos,eo=er.bdPos,es=o[er.valLetter+"axis"],el=o[er.posLetter+"axis"],ec="both"===en.side,eu=ec||"positive"===en.side,ef=ec||"negative"===en.side,eh=Z.selectAll("path.violin").data(_.identity);eh.enter().append("path").style("vector-effect",X?"none":"non-scaling-stroke").attr("class","violin"),eh.exit().remove(),eh.each(function(i){var o,s,_,F,N,j,G,Z,X=x.select(this),$=i.density,ee=$.length,et=el.c2l(i.pos+ei,!0),eh=el.l2p(et);if(en.width)o=er.maxKDE/eo;else{var ed=J._violinScaleGroupStats[en.scalegroup];o="count"===en.scalemode?ed.maxKDE/eo*(ed.maxCount/i.pts.length):ed.maxKDE/eo}if(eu){for(N=0,G=Array(ee);N<ee;N++)(Z=G[N]={})[er.posLetter]=et+$[N].v/o,Z[er.valLetter]=es.c2l($[N].t,!0);s=makePath(G,en)}if(ef){for(j=0,G=Array(ee),N=ee-1;j<ee;j++,N--)(Z=G[j]={})[er.posLetter]=et-$[N].v/o,Z[er.valLetter]=es.c2l($[N].t,!0);_=makePath(G,en)}if(ec)F=s+"L"+_.substr(1)+"Z";else{var ep=[eh,es.c2p($[0].t)],eg=[eh,es.c2p($[ee-1].t)];"h"===en.orientation&&(ep.reverse(),eg.reverse()),F=eu?"M"+ep+"L"+s.substr(1)+"L"+eg:"M"+eg+"L"+_.substr(1)+"L"+ep}X.attr("d",F),i.posCenterPx=eh,i.posDensityScale=o*eo,i.path=X.node(),i.pathLength=i.path.getTotalLength()/(ec?2:1)});var ed=en.box,ep=ed.width,eg=(ed.line||{}).width;ec?(s=eo*ep,F=0):eu?(s=[0,eo*ep/2],F=eg*({x:1,y:-1})[er.posLetter]):(s=[eo*ep/2,0],F=eg*({x:-1,y:1})[er.posLetter]),N.plotBoxAndWhiskers(Z,{pos:el,val:es},en,{bPos:ei,bdPos:s,bPosPxOffset:F}),N.plotBoxMean(Z,{pos:el,val:es},en,{bPos:ei,bdPos:s,bPosPxOffset:F}),!en.box.visible&&en.meanline.visible&&(j=_.identity);var em=Z.selectAll("path.meanline").data(j||[]);em.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",X?"none":"non-scaling-stroke"),em.exit().remove(),em.each(function(i){var o=es.c2p(i.mean,!0),s=G.getPositionOnKdePath(i,en,o);x.select(this).attr("d","h"===en.orientation?"M"+o+","+s[0]+"V"+s[1]:"M"+s[0]+","+o+"H"+s[1])}),N.plotPoints(Z,{x:$,y:ee},en,er)})}},31847:function(i,o,s){"use strict";var x=s(39898),_=s(7901),F=s(16296).stylePoints;i.exports=function(i){var o=x.select(i).selectAll("g.trace.violins");o.style("opacity",function(i){return i[0].trace.opacity}),o.each(function(o){var s=o[0].trace,N=x.select(this),j=s.box||{},G=j.line||{},Z=s.meanline||{},X=Z.width;N.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(_.stroke,s.line.color).call(_.fill,s.fillcolor),N.selectAll("path.box").style("stroke-width",G.width+"px").call(_.stroke,G.color).call(_.fill,j.fillcolor);var J={"stroke-width":X+"px","stroke-dasharray":2*X+"px,"+X+"px"};N.selectAll("path.mean").style(J).call(_.stroke,Z.color),N.selectAll("path.meanline").style(J).call(_.stroke,Z.color),F(N,s,i)})}},16336:function(i,o,s){"use strict";var x=s(50693),_=s(16249),F=s(54532),N=s(9012),j=s(1426).extendFlat,G=s(30962).overrideAll,Z=i.exports=G(j({x:_.x,y:_.y,z:_.z,value:_.value,isomin:_.isomin,isomax:_.isomax,surface:_.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:_.slices,caps:_.caps,text:_.text,hovertext:_.hovertext,xhoverformat:_.xhoverformat,yhoverformat:_.yhoverformat,zhoverformat:_.zhoverformat,valuehoverformat:_.valuehoverformat,hovertemplate:_.hovertemplate},x("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:_.colorbar,opacity:_.opacity,opacityscale:F.opacityscale,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:j({},N.hoverinfo),showlegend:j({},N.showlegend,{dflt:!1})}),"calc","nested");Z.x.editType=Z.y.editType=Z.z.editType=Z.value.editType="calc+clearAxisTypes",Z.transforms=void 0},64809:function(i,o,s){"use strict";var x=s(9330).gl_mesh3d,_=s(81697).parseColorScale,F=s(78614),N=s(21081).extractOpts,j=s(90060),G=s(22674).findNearestOnAxis,Z=s(22674).generateIsoMeshes;function VolumeTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var X=VolumeTrace.prototype;X.handlePick=function(i){if(i.object===this.mesh){var o=i.data.index,s=this.data._meshX[o],x=this.data._meshY[o],_=this.data._meshZ[o],F=this.data._Ys.length,N=this.data._Zs.length,j=G(s,this.data._Xs).id,Z=G(x,this.data._Ys).id,X=G(_,this.data._Zs).id,J=i.index=X+N*Z+N*F*j;i.traceCoordinate=[this.data._meshX[J],this.data._meshY[J],this.data._meshZ[J],this.data._value[J]];var $=this.data.hovertext||this.data.text;return Array.isArray($)&&void 0!==$[J]?i.textLabel=$[J]:$&&(i.textLabel=$),!0}},X.update=function(i){var o=this.scene,s=o.fullSceneLayout;function toDataCoords(i,o,s,x){return o.map(function(o){return i.d2l(o,0,x)*s})}this.data=Z(i);var x={positions:j(toDataCoords(s.xaxis,i._meshX,o.dataScale[0],i.xcalendar),toDataCoords(s.yaxis,i._meshY,o.dataScale[1],i.ycalendar),toDataCoords(s.zaxis,i._meshZ,o.dataScale[2],i.zcalendar)),cells:j(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:F(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},G=N(i);x.vertexIntensity=i._meshIntensity,x.vertexIntensityBounds=[G.min,G.max],x.colormap=_(i),this.mesh.update(x)},X.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=function(i,o){var s=x({gl:i.glplot.gl}),_=new VolumeTrace(i,s,o.uid);return s._trace=_,_.update(o),i.glplot.add(s),_}},47651:function(i,o,s){"use strict";var x=s(71828),_=s(16336),F=s(82738).supplyIsoDefaults,N=s(91831).opacityscaleDefaults;i.exports=function(i,o,s,j){function coerce(s,F){return x.coerce(i,o,_,s,F)}F(i,o,s,j,coerce),N(i,o,j,coerce)}},17659:function(i,o,s){"use strict";i.exports={attributes:s(16336),supplyDefaults:s(47651),calc:s(56959),colorbar:{min:"cmin",max:"cmax"},plot:s(64809),moduleType:"trace",name:"volume",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(i,o,s){"use strict";var x=s(1486),_=s(82196).line,F=s(9012),N=s(12663).axisHoverFormat,j=s(5386).fF,G=s(5386).si,Z=s(48334),X=s(1426).extendFlat,J=s(7901);function directionAttrs(i){return{marker:{color:X({},x.marker.color,{arrayOk:!1,editType:"style"}),line:{color:X({},x.marker.line.color,{arrayOk:!1,editType:"style"}),width:X({},x.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}i.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:N("x"),yhoverformat:N("y"),hovertext:x.hovertext,hovertemplate:j({},{keys:Z.eventDataKeys}),hoverinfo:X({},F.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:G({editType:"plot"},{keys:Z.eventDataKeys.concat(["label"])}),text:x.text,textposition:x.textposition,insidetextanchor:x.insidetextanchor,textangle:x.textangle,textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:x.orientation,offset:x.offset,width:x.width,increasing:directionAttrs("increasing"),decreasing:directionAttrs("decreasing"),totals:directionAttrs("intermediate sums and total"),connector:{line:{color:X({},_.color,{dflt:J.defaultLine}),width:X({},_.width,{editType:"plot"}),dash:_.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},52752:function(i,o,s){"use strict";var x=s(89298),_=s(42973),F=s(71828).mergeArray,N=s(66279),j=s(50606).BADNUM;function isAbsolute(i){return"a"===i||"absolute"===i}function isTotal(i){return"t"===i||"total"===i}i.exports=function(i,o){var s,G,Z,X,J,$,ee,et=x.getFromId(i,o.xaxis||"x"),er=x.getFromId(i,o.yaxis||"y");"h"===o.orientation?(s=et.makeCalcdata(o,"x"),Z=er.makeCalcdata(o,"y"),X=_(o,er,"y",Z),J=!!o.yperiodalignment,$="y"):(s=er.makeCalcdata(o,"y"),Z=et.makeCalcdata(o,"x"),X=_(o,et,"x",Z),J=!!o.xperiodalignment,$="x");for(var en=Math.min((G=X.vals).length,s.length),ei=Array(en),eo=0,es=!1,el=0;el<en;el++){var ec=s[el]||0,eu=!1;(s[el]!==j||isTotal(o.measure[el])||isAbsolute(o.measure[el]))&&el+1<en&&(s[el+1]!==j||isTotal(o.measure[el+1])||isAbsolute(o.measure[el+1]))&&(eu=!0);var ef=ei[el]={i:el,p:G[el],s:ec,rawS:ec,cNext:eu};isAbsolute(o.measure[el])?(eo=ef.s,ef.isSum=!0,ef.dir="totals",ef.s=eo):isTotal(o.measure[el])?(ef.isSum=!0,ef.dir="totals",ef.s=eo):(ef.isSum=!1,ef.dir=ef.rawS<0?"decreasing":"increasing",ee=ef.s,ef.s=eo+ee,eo+=ee),"totals"===ef.dir&&(es=!0),J&&(ei[el].orig_p=Z[el],ei[el][$+"End"]=X.ends[el],ei[el][$+"Start"]=X.starts[el]),o.ids&&(ef.id=String(o.ids[el])),ef.v=(o.base||0)+eo}return ei.length&&(ei[0].hasTotals=es),F(o.text,ei,"tx"),F(o.hovertext,ei,"htx"),N(ei,o),ei}},48334:function(i){"use strict";i.exports={eventDataKeys:["initial","delta","final"]}},70766:function(i,o,s){"use strict";var x=s(11661).setGroupPositions;i.exports=function(i,o){var s,_,F=i._fullLayout,N=i._fullData,j=i.calcdata,G=o.xaxis,Z=o.yaxis,X=[],J=[],$=[];for(_=0;_<N.length;_++){var ee=N[_];!0===ee.visible&&ee.xaxis===G._id&&ee.yaxis===Z._id&&"waterfall"===ee.type&&(s=j[_],"h"===ee.orientation?$.push(s):J.push(s),X.push(s))}var et={mode:F.waterfallmode,norm:F.waterfallnorm,gap:F.waterfallgap,groupgap:F.waterfallgroupgap};for(x(i,G,Z,J,et),x(i,Z,G,$,et),_=0;_<X.length;_++){s=X[_];for(var er=0;er<s.length;er++){var en=s[er];!1===en.isSum&&(en.s0+=0===er?0:s[er-1].s),er+1<s.length&&(s[er].nextP0=s[er+1].p0,s[er].nextS0=s[er+1].s0)}}}},83266:function(i,o,s){"use strict";var x=s(71828),_=s(26125),F=s(90769).handleText,N=s(67513),j=s(73927),G=s(43037),Z=s(7901),X=s(22372),J=X.INCREASING.COLOR,$=X.DECREASING.COLOR;function handleDirection(i,o,s){i(o+".marker.color",s),i(o+".marker.line.color",Z.defaultLine),i(o+".marker.line.width")}i.exports={supplyDefaults:function(i,o,s,_){function coerce(s,_){return x.coerce(i,o,G,s,_)}if(!N(i,o,_,coerce)){o.visible=!1;return}j(i,o,_,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("measure"),coerce("orientation",o.x&&!o.y?"h":"v"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate");var Z=coerce("textposition");F(i,o,_,coerce,Z,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||(coerce("texttemplate"),o.texttemplate||coerce("textinfo")),handleDirection(coerce,"increasing",J),handleDirection(coerce,"decreasing",$),handleDirection(coerce,"totals","#4499FF"),coerce("connector.visible")&&(coerce("connector.mode"),coerce("connector.line.width")&&(coerce("connector.line.color"),coerce("connector.line.dash")))},crossTraceDefaults:function(i,o){var s;function coerce(i){return x.coerce(s._input,s,G,i)}if("group"===o.waterfallmode)for(var F=0;F<i.length;F++)_((s=i[F])._input,s,o,coerce)}}},58593:function(i){"use strict";i.exports=function(i,o){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"initial"in o&&(i.initial=o.initial),"delta"in o&&(i.delta=o.delta),"final"in o&&(i.final=o.final),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},61326:function(i,o,s){"use strict";var x=s(89298).hoverLabelText,_=s(7901).opacity,F=s(95423).hoverOnBars,N=s(22372),j={increasing:N.INCREASING.SYMBOL,decreasing:N.DECREASING.SYMBOL};i.exports=function(i,o,s,N,G){var Z=F(i,o,s,N,G);if(Z){var X,J,$,ee,et=Z.cd,er=et[0].trace,en="h"===er.orientation,ei=en?"x":"y",eo=en?i.xa:i.ya,es=et[Z.index],el=es.isSum?es.b+es.s:es.rawS;Z.initial=es.b+es.s-el,Z.delta=el,Z.final=Z.initial+Z.delta;var ec=formatNumber(Math.abs(Z.delta));Z.deltaLabel=el<0?"("+ec+")":ec,Z.finalLabel=formatNumber(Z.final),Z.initialLabel=formatNumber(Z.initial);var eu=es.hi||er.hoverinfo,ef=[];if(eu&&"none"!==eu&&"skip"!==eu){var eh="all"===eu,ed=eu.split("+"),hasFlag=function(i){return eh||-1!==ed.indexOf(i)};!es.isSum&&(!hasFlag("final")||hasFlag(en?"x":"y")||ef.push(Z.finalLabel),hasFlag("delta")&&(el<0?ef.push(Z.deltaLabel+" "+j.decreasing):ef.push(Z.deltaLabel+" "+j.increasing)),hasFlag("initial")&&ef.push("Initial: "+Z.initialLabel))}return ef.length&&(Z.extraText=ef.join("<br>")),Z.color=(J=(X=er[es.dir].marker).color,$=X.line.color,ee=X.line.width,_(J)?J:_($)&&ee?$:void 0),[Z]}function formatNumber(i){return x(eo,i,er[ei+"hoverformat"])}}},19990:function(i,o,s){"use strict";i.exports={attributes:s(43037),layoutAttributes:s(13494),supplyDefaults:s(83266).supplyDefaults,crossTraceDefaults:s(83266).crossTraceDefaults,supplyLayoutDefaults:s(5176),calc:s(52752),crossTraceCalc:s(70766),plot:s(30436),style:s(55750).style,hoverPoints:s(61326),eventData:s(58593),selectPoints:s(81974),moduleType:"trace",name:"waterfall",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(i){"use strict";i.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(i,o,s){"use strict";var x=s(71828),_=s(13494);i.exports=function(i,o,s){var F=!1;function coerce(s,F){return x.coerce(i,o,_,s,F)}for(var N=0;N<s.length;N++){var j=s[N];if(j.visible&&"waterfall"===j.type){F=!0;break}}F&&(coerce("waterfallmode"),coerce("waterfallgap",.2),coerce("waterfallgroupgap"))}},30436:function(i,o,s){"use strict";var x=s(39898),_=s(71828),F=s(91424),N=s(50606).BADNUM,j=s(17295),G=s(72597).clearMinTextSize;i.exports=function(i,o,s,Z){var X=i._fullLayout;G("waterfall",X),j.plot(i,o,s,Z,{mode:X.waterfallmode,norm:X.waterfallmode,gap:X.waterfallgap,groupgap:X.waterfallgroupgap}),function(i,o,s,j){var G=o.xaxis,Z=o.yaxis;_.makeTraceGroups(j,s,"trace bars").each(function(s){var j=x.select(this),X=s[0].trace,J=_.ensureSingle(j,"g","lines");if(!X.connector||!X.connector.visible){J.remove();return}var $="h"===X.orientation,ee=X.connector.mode,et=J.selectAll("g.line").data(_.identity);et.enter().append("g").classed("line",!0),et.exit().remove();var er=et.size();et.each(function(s,j){if(j===er-1||s.cNext){var X,J,et,en,ei=(X=[],J=[],et=$?G:Z,en=$?Z:G,X[0]=et.c2p(s.s0,!0),J[0]=en.c2p(s.p0,!0),X[1]=et.c2p(s.s1,!0),J[1]=en.c2p(s.p1,!0),X[2]=et.c2p(s.nextS0,!0),J[2]=en.c2p(s.nextP0,!0),$?[X,J]:[J,X]),eo=ei[0],es=ei[1],el="";eo[0]!==N&&es[0]!==N&&eo[1]!==N&&es[1]!==N&&("spanning"===ee&&!s.isSum&&j>0&&($?el+="M"+eo[0]+","+es[1]+"V"+es[0]:el+="M"+eo[1]+","+es[0]+"H"+eo[0]),"between"!==ee&&(s.isSum||j<er-1)&&($?el+="M"+eo[1]+","+es[0]+"V"+es[1]:el+="M"+eo[0]+","+es[1]+"H"+eo[1]),eo[2]!==N&&es[2]!==N&&($?el+="M"+eo[1]+","+es[1]+"V"+es[2]:el+="M"+eo[1]+","+es[1]+"H"+eo[2])),""===el&&(el="M0,0Z"),_.ensureSingle(x.select(this),"path").attr("d",el).call(F.setClipUrl,o.layerClipId,i)}})})}(i,o,s,Z)}},55750:function(i,o,s){"use strict";var x=s(39898),_=s(91424),F=s(7901),N=s(37822).DESELECTDIM,j=s(16688),G=s(72597).resizeText,Z=j.styleTextPoints;i.exports={style:function(i,o,s){var j=s||x.select(i).selectAll("g.waterfalllayer").selectAll("g.trace");G(i,j,"waterfall"),j.style("opacity",function(i){return i[0].trace.opacity}),j.each(function(o){var s=x.select(this),j=o[0].trace;s.selectAll(".point > path").each(function(i){if(!i.isBlank){var o=j[i.dir].marker;x.select(this).call(F.fill,o.color).call(F.stroke,o.line.color).call(_.dashLine,o.line.dash,o.line.width).style("opacity",j.selectedpoints&&!i.selected?N:1)}}),Z(s,j,i),s.selectAll(".lines").each(function(){var i=j.connector.line;_.lineGroupStyle(x.select(this).selectAll("path"),i.width,i.color,i.dash)})})}}},82887:function(i,o,s){"use strict";var x=s(89298),_=s(71828),F=s(86281),N=s(79344).p,j=s(50606).BADNUM;o.moduleType="transform",o.name="aggregate";var G=o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},Z=G.aggregations;function aggregateOneArray(i,o,s,F){if(F.enabled){for(var N=F.target,G=_.nestedProperty(o,N),Z=G.get(),X=function(i,o){var s=i.func,x=o.d2c,F=o.c2d;switch(s){case"count":return count;case"first":return first;case"last":return last;case"sum":return function(i,o){for(var s=0,_=0;_<o.length;_++){var N=x(i[o[_]]);N!==j&&(s+=N)}return F(s)};case"avg":return function(i,o){for(var s=0,_=0,N=0;N<o.length;N++){var G=x(i[o[N]]);G!==j&&(s+=G,_++)}return _?F(s/_):j};case"min":return function(i,o){for(var s=1/0,_=0;_<o.length;_++){var N=x(i[o[_]]);N!==j&&(s=Math.min(s,N))}return s===1/0?j:F(s)};case"max":return function(i,o){for(var s=-1/0,_=0;_<o.length;_++){var N=x(i[o[_]]);N!==j&&(s=Math.max(s,N))}return s===-1/0?j:F(s)};case"range":return function(i,o){for(var s=1/0,_=-1/0,N=0;N<o.length;N++){var G=x(i[o[N]]);G!==j&&(s=Math.min(s,G),_=Math.max(_,G))}return _===-1/0||s===1/0?j:F(_-s)};case"change":return function(i,o){var s=x(i[o[0]]),_=x(i[o[o.length-1]]);return s===j||_===j?j:F(_-s)};case"median":return function(i,o){for(var s=[],N=0;N<o.length;N++){var G=x(i[o[N]]);G!==j&&s.push(G)}if(!s.length)return j;s.sort(_.sorterAsc);var Z=(s.length-1)/2;return F((s[Math.floor(Z)]+s[Math.ceil(Z)])/2)};case"mode":return function(i,o){for(var s={},_=0,N=j,G=0;G<o.length;G++){var Z=x(i[o[G]]);if(Z!==j){var X=s[Z]=(s[Z]||0)+1;X>_&&(_=X,N=Z)}}return _?F(N):j};case"rms":return function(i,o){for(var s=0,_=0,N=0;N<o.length;N++){var G=x(i[o[N]]);G!==j&&(s+=G*G,_++)}return _?F(Math.sqrt(s/_)):j};case"stddev":return function(o,s){var _,F=0,N=0,G=1,Z=j;for(_=0;_<s.length&&Z===j;_++)Z=x(o[s[_]]);if(Z===j)return j;for(;_<s.length;_++){var X=x(o[s[_]]);if(X!==j){var J=X-Z;F+=J,N+=J*J,G++}}var $="sample"===i.funcmode?G-1:G;return $?Math.sqrt((N-F*F/G)/$):0}}}(F,x.getDataConversions(i,o,N,Z)),J=Array(s.length),$=0;$<s.length;$++)J[$]=X(Z,s[$]);G.set(J),"count"===F.func&&_.pushUnique(o._arrayAttrs,N)}}function count(i,o){return o.length}function first(i,o){return i[o[0]]}function last(i,o){return i[o[o.length-1]]}o.supplyDefaults=function(i,o){var s,x,N={};function coerce(o,s){return _.coerce(i,N,G,o,s)}if(!coerce("enabled"))return N;var j=F.findArrayAttributes(o),X={};for(s=0;s<j.length;s++)X[j[s]]=1;var J=coerce("groups");if(!Array.isArray(J)){if(!X[J])return N.enabled=!1,N;X[J]=0}var $=i.aggregations||[],ee=N.aggregations=Array($.length);function coercei(i,o){return _.coerce($[s],x,Z,i,o)}for(s=0;s<$.length;s++){x={_index:s};var et=coercei("target"),er=coercei("func");coercei("enabled")&&et&&(X[et]||"count"===er&&void 0===X[et])?("stddev"===er&&coercei("funcmode"),X[et]=0,ee[s]=x):ee[s]={enabled:!1,_index:s}}for(s=0;s<j.length;s++)X[j[s]]&&ee.push({target:j[s],func:Z.func.dflt,enabled:!0,_index:-1});return N},o.calcTransform=function(i,o,s){if(s.enabled){var x,F,j,G,Z=s.groups,X=_.getTargetArray(o,{target:Z});if(X){var J={},$={},ee=[],et=N(o.transforms,s),er=X.length;for(o._length&&(er=Math.min(er,o._length)),x=0;x<er;x++)void 0===(j=J[F=X[x]])?(J[F]=ee.length,G=[x],ee.push(G),$[J[F]]=et(x)):(ee[j].push(x),$[J[F]]=($[J[F]]||[]).concat(et(x)));s._indexToPoints=$;var en=s.aggregations;for(x=0;x<en.length;x++)aggregateOneArray(i,o,ee,en[x]);"string"==typeof Z&&aggregateOneArray(i,o,ee,{target:Z,func:"first",enabled:!0}),o._length=ee.length}}}},14382:function(i,o,s){"use strict";var x=s(71828),_=s(73972),F=s(89298),N=s(79344).p,j=s(74808),G=j.COMPARISON_OPS,Z=j.INTERVAL_OPS,X=j.SET_OPS;o.moduleType="transform",o.name="filter",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(G).concat(Z).concat(X),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},o.supplyDefaults=function(i){var s={};function coerce(_,F){return x.coerce(i,s,o.attributes,_,F)}if(coerce("enabled")){var F=coerce("target");if(x.isArrayOrTypedArray(F)&&0===F.length)return s.enabled=!1,s;coerce("preservegaps"),coerce("operation"),coerce("value");var N=_.getComponentMethod("calendars","handleDefaults");N(i,s,"valuecalendar",null),N(i,s,"targetcalendar",null)}return s},o.calcTransform=function(i,o,s){if(s.enabled){var _,j,J=x.getTargetArray(o,s);if(J){var $=s.target,ee=J.length;o._length&&(ee=Math.min(ee,o._length));var et=s.targetcalendar,er=o._arrayAttrs,en=s.preservegaps;if("string"==typeof $){var ei=x.nestedProperty(o,$+"calendar").get();ei&&(et=ei)}var eo=function(i,o,s){var x,_=i.operation,F=i.value,N=Array.isArray(F);function isOperationIn(i){return -1!==i.indexOf(_)}var d2cValue=function(s){return o(s,0,i.valuecalendar)},d2cTarget=function(i){return o(i,0,s)};switch(isOperationIn(G)?x=d2cValue(N?F[0]:F):isOperationIn(Z)?x=N?[d2cValue(F[0]),d2cValue(F[1])]:[d2cValue(F),d2cValue(F)]:isOperationIn(X)&&(x=N?F.map(d2cValue):[d2cValue(F)]),_){case"=":return function(i){return d2cTarget(i)===x};case"!=":return function(i){return d2cTarget(i)!==x};case"<":return function(i){return d2cTarget(i)<x};case"<=":return function(i){return d2cTarget(i)<=x};case">":return function(i){return d2cTarget(i)>x};case">=":return function(i){return d2cTarget(i)>=x};case"[]":return function(i){var o=d2cTarget(i);return o>=x[0]&&o<=x[1]};case"()":return function(i){var o=d2cTarget(i);return o>x[0]&&o<x[1]};case"[)":return function(i){var o=d2cTarget(i);return o>=x[0]&&o<x[1]};case"(]":return function(i){var o=d2cTarget(i);return o>x[0]&&o<=x[1]};case"][":return function(i){var o=d2cTarget(i);return o<=x[0]||o>=x[1]};case")(":return function(i){var o=d2cTarget(i);return o<x[0]||o>x[1]};case"](":return function(i){var o=d2cTarget(i);return o<=x[0]||o>x[1]};case")[":return function(i){var o=d2cTarget(i);return o<x[0]||o>=x[1]};case"{}":return function(i){return -1!==x.indexOf(d2cTarget(i))};case"}{":return function(i){return -1===x.indexOf(d2cTarget(i))}}}(s,F.getDataToCoordFunc(i,o,$,J),et),es={},el={},ec=0;en?(_=function(i){es[i.astr]=x.extendDeep([],i.get()),i.set(Array(ee))},j=function(i,o){var s=es[i.astr][o];i.get()[o]=s}):(_=function(i){es[i.astr]=x.extendDeep([],i.get()),i.set([])},j=function(i,o){var s=es[i.astr][o];i.get().push(s)}),forAllAttrs(_);for(var eu=N(o.transforms,s),ef=0;ef<ee;ef++)eo(J[ef])?(forAllAttrs(j,ef),el[ec++]=eu(ef)):en&&ec++;s._indexToPoints=el,o._length=ec}}function forAllAttrs(i,s){for(var _=0;_<er.length;_++)i(x.nestedProperty(o,er[_]),s)}}},43102:function(i,o,s){"use strict";var x=s(71828),_=s(86281),F=s(74875),N=s(79344).p;o.moduleType="transform",o.name="groupby",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},o.supplyDefaults=function(i,s,_){var F,N={};function coerce(s,_){return x.coerce(i,N,o.attributes,s,_)}if(!coerce("enabled"))return N;coerce("groups"),coerce("nameformat",_._dataLength>1?"%{group} (%{trace})":"%{group}");var j=i.styles,G=N.styles=[];if(j)for(F=0;F<j.length;F++){var Z=G[F]={};x.coerce(j[F],G[F],o.attributes.styles,"target");var X=x.coerce(j[F],G[F],o.attributes.styles,"value");x.isPlainObject(X)?Z.value=x.extendDeep({},X):X&&delete Z.value}return N},o.transform=function(i,o){var s,j,G,Z=[];for(j=0;j<i.length;j++)for(G=0,s=function(i,o){var s,j,G,Z,X,J,$,ee,et,er,en=o.transform,ei=o.transformIndex,eo=i.transforms[ei].groups,es=N(i.transforms,en);if(!x.isArrayOrTypedArray(eo)||0===eo.length)return[i];var el=x.filterUnique(eo),ec=Array(el.length),eu=eo.length,ef=_.findArrayAttributes(i),eh=en.styles||[],ed={};for(s=0;s<eh.length;s++)ed[eh[s].target]=eh[s].value;en.styles&&(er=x.keyedContainer(en,"styles","target","value.name"));var ep={},eg={};for(s=0;s<el.length;s++){ep[J=el[s]]=s,eg[J]=0,($=ec[s]=x.extendDeepNoArrays({},i))._group=J,$.transforms[ei]._indexToPoints={};var em=null;for(er&&(em=er.get(J)),em||""===em?$.name=em:$.name=x.templateString(en.nameformat,{trace:i.name,group:J}),ee=$.transforms,$.transforms=[],j=0;j<ee.length;j++)$.transforms[j]=x.extendDeepNoArrays({},ee[j]);for(j=0;j<ef.length;j++)x.nestedProperty($,ef[j]).set([])}for(G=0;G<ef.length;G++){for(j=0,Z=ef[G],et=[];j<el.length;j++)et[j]=x.nestedProperty(ec[j],Z).get();for(j=0,X=x.nestedProperty(i,Z).get();j<eu;j++)et[ep[eo[j]]].push(X[j])}for(j=0;j<eu;j++)($=ec[ep[eo[j]]]).transforms[ei]._indexToPoints[eg[eo[j]]]=es(j),eg[eo[j]]++;for(s=0;s<el.length;s++)J=el[s],$=ec[s],F.clearExpandedTraceDefaultColors($),$=x.extendDeepNoArrays($,ed[J]||{});return ec}(i[j],o);G<s.length;G++)Z.push(s[G]);return Z}},79344:function(i,o){"use strict";o.p=function(i,o){for(var s,x,_=0;_<i.length&&(s=i[_])!==o;_++)s._indexToPoints&&!1!==s.enabled&&(x=s._indexToPoints);return x?function(i){return x[i]}:function(i){return[i]}}},32275:function(i,o,s){"use strict";var x=s(71828),_=s(89298),F=s(79344).p,N=s(50606).BADNUM;o.moduleType="transform",o.name="sort",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},o.supplyDefaults=function(i){var s={};function coerce(_,F){return x.coerce(i,s,o.attributes,_,F)}return coerce("enabled")&&(coerce("target"),coerce("order")),s},o.calcTransform=function(i,o,s){if(s.enabled){var j,G,Z=x.getTargetArray(o,s);if(Z){var X=s.target,J=Z.length;o._length&&(J=Math.min(J,o._length));var $=o._arrayAttrs,ee=_.getDataToCoordFunc(i,o,X,Z),et=function(i,o,s,x){var _,F=Array(x),j=Array(x);for(_=0;_<x;_++)F[_]={v:o[_],i:_};for(F.sort(function(i,o){switch(i.order){case"ascending":return function(i,s){var x=o(i.v),_=o(s.v);return x===N?1:_===N?-1:x-_};case"descending":return function(i,s){var x=o(i.v),_=o(s.v);return x===N?1:_===N?-1:_-x}}}(i,s)),_=0;_<x;_++)j[_]=F[_].i;return j}(s,Z,ee,J),er=F(o.transforms,s),en={};for(j=0;j<$.length;j++){var ei=x.nestedProperty(o,$[j]),eo=ei.get(),es=Array(J);for(G=0;G<J;G++)es[G]=eo[et[G]];ei.set(es)}for(G=0;G<J;G++)en[G]=er(et[G]);s._indexToPoints=en,o._length=J}}}},11506:function(i,o){"use strict";o.version="2.26.0"},9330:function(i,o,s){var _=s(90386);self,i.exports=function(){var i={7386:function(i,o,s){i.exports={alpha_shape:s(2350),convex_hull:s(5537),delaunay_triangulate:s(4419),gl_cone3d:s(1140),gl_error3d:s(3110),gl_heatmap2d:s(6386),gl_line3d:s(6086),gl_mesh3d:s(8116),gl_plot2d:s(2117),gl_plot3d:s(1059),gl_pointcloud2d:s(8271),gl_scatter3d:s(2182),gl_select_box:s(6623),gl_spikes2d:s(3050),gl_streamtube3d:s(7307),gl_surface3d:s(3754),ndarray:s(5050),ndarray_linear_interpolate:s(3581)}},2146:function(i,o,s){"use strict";function _defineProperties(i,o){for(var s=0;s<o.length;s++){var x=o[s];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(i,x.key,x)}}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(i,o)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var x=s(3910),_=s(3187),F="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function createBuffer(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');var o=new Uint8Array(i);return Object.setPrototypeOf(o,Buffer.prototype),o}function Buffer(i,o,s){if("number"==typeof i){if("string"==typeof o)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,o,s)}function from(i,o,s){if("string"==typeof i)return function(i,o){if(("string"!=typeof o||""===o)&&(o="utf8"),!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);var s=0|byteLength(i,o),x=createBuffer(s),_=x.write(i,o);return _!==s&&(x=x.slice(0,_)),x}(i,o);if(ArrayBuffer.isView(i))return function(i){if(isInstance(i,Uint8Array)){var o=new Uint8Array(i);return fromArrayBuffer(o.buffer,o.byteOffset,o.byteLength)}return fromArrayLike(i)}(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i));if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(i,SharedArrayBuffer)||i&&isInstance(i.buffer,SharedArrayBuffer)))return fromArrayBuffer(i,o,s);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');var x=i.valueOf&&i.valueOf();if(null!=x&&x!==i)return Buffer.from(x,o,s);var _=function(i){if(Buffer.isBuffer(i)){var o,s=0|checked(i.length),x=createBuffer(s);return 0===x.length||i.copy(x,0,0,s),x}return void 0!==i.length?"number"!=typeof i.length||(o=i.length)!=o?createBuffer(0):fromArrayLike(i):"Buffer"===i.type&&Array.isArray(i.data)?fromArrayLike(i.data):void 0}(i);if(_)return _;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer.from(i[Symbol.toPrimitive]("string"),o,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i))}function assertSize(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromArrayLike(i){for(var o=i.length<0?0:0|checked(i.length),s=createBuffer(o),x=0;x<o;x+=1)s[x]=255&i[x];return s}function fromArrayBuffer(i,o,s){var x;if(o<0||i.byteLength<o)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<o+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(x=void 0===o&&void 0===s?new Uint8Array(i):void 0===s?new Uint8Array(i,o):new Uint8Array(i,o,s),Buffer.prototype),x}function checked(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function byteLength(i,o){if(Buffer.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof(i));var s=i.length,x=arguments.length>2&&!0===arguments[2];if(!x&&0===s)return 0;for(var _=!1;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return base64ToBytes(i).length;default:if(_)return x?-1:utf8ToBytes(i).length;o=(""+o).toLowerCase(),_=!0}}function slowToString(i,o,s){var _,F,N=!1;if((void 0===o||o<0)&&(o=0),o>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0||(s>>>=0)<=(o>>>=0)))return"";for(i||(i="utf8");;)switch(i){case"hex":return function(i,o,s){var x=i.length;(!o||o<0)&&(o=0),(!s||s<0||s>x)&&(s=x);for(var _="",F=o;F<s;++F)_+=G[i[F]];return _}(this,o,s);case"utf8":case"utf-8":return utf8Slice(this,o,s);case"ascii":return function(i,o,s){var x="";s=Math.min(i.length,s);for(var _=o;_<s;++_)x+=String.fromCharCode(127&i[_]);return x}(this,o,s);case"latin1":case"binary":return function(i,o,s){var x="";s=Math.min(i.length,s);for(var _=o;_<s;++_)x+=String.fromCharCode(i[_]);return x}(this,o,s);case"base64":return _=o,F=s,0===_&&F===this.length?x.fromByteArray(this):x.fromByteArray(this.slice(_,F));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(i,o,s){for(var x=i.slice(o,s),_="",F=0;F<x.length-1;F+=2)_+=String.fromCharCode(x[F]+256*x[F+1]);return _}(this,o,s);default:if(N)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),N=!0}}function swap(i,o,s){var x=i[o];i[o]=i[s],i[s]=x}function bidirectionalIndexOf(i,o,s,x,_){var F;if(0===i.length)return -1;if("string"==typeof s?(x=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),(F=s=+s)!=F&&(s=_?0:i.length-1),s<0&&(s=i.length+s),s>=i.length){if(_)return -1;s=i.length-1}else if(s<0){if(!_)return -1;s=0}if("string"==typeof o&&(o=Buffer.from(o,x)),Buffer.isBuffer(o))return 0===o.length?-1:arrayIndexOf(i,o,s,x,_);if("number"==typeof o)return(o&=255,"function"==typeof Uint8Array.prototype.indexOf)?_?Uint8Array.prototype.indexOf.call(i,o,s):Uint8Array.prototype.lastIndexOf.call(i,o,s):arrayIndexOf(i,[o],s,x,_);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,o,s,x,_){var F,N=1,j=i.length,G=o.length;if(void 0!==x&&("ucs2"===(x=String(x).toLowerCase())||"ucs-2"===x||"utf16le"===x||"utf-16le"===x)){if(i.length<2||o.length<2)return -1;N=2,j/=2,G/=2,s/=2}function read(i,o){return 1===N?i[o]:i.readUInt16BE(o*N)}if(_){var Z=-1;for(F=s;F<j;F++)if(read(i,F)===read(o,-1===Z?0:F-Z)){if(-1===Z&&(Z=F),F-Z+1===G)return Z*N}else -1!==Z&&(F-=F-Z),Z=-1}else for(s+G>j&&(s=j-G),F=s;F>=0;F--){for(var X=!0,J=0;J<G;J++)if(read(i,F+J)!==read(o,J)){X=!1;break}if(X)return F}return -1}function utf8Slice(i,o,s){s=Math.min(i.length,s);for(var x=[],_=o;_<s;){var F=i[_],N=null,j=F>239?4:F>223?3:F>191?2:1;if(_+j<=s){var G=void 0,Z=void 0,X=void 0,J=void 0;switch(j){case 1:F<128&&(N=F);break;case 2:(192&(G=i[_+1]))==128&&(J=(31&F)<<6|63&G)>127&&(N=J);break;case 3:G=i[_+1],Z=i[_+2],(192&G)==128&&(192&Z)==128&&(J=(15&F)<<12|(63&G)<<6|63&Z)>2047&&(J<55296||J>57343)&&(N=J);break;case 4:G=i[_+1],Z=i[_+2],X=i[_+3],(192&G)==128&&(192&Z)==128&&(192&X)==128&&(J=(15&F)<<18|(63&G)<<12|(63&Z)<<6|63&X)>65535&&J<1114112&&(N=J)}}null===N?(N=65533,j=1):N>65535&&(N-=65536,x.push(N>>>10&1023|55296),N=56320|1023&N),x.push(N),_+=j}return function(i){var o=i.length;if(o<=4096)return String.fromCharCode.apply(String,i);for(var s="",x=0;x<o;)s+=String.fromCharCode.apply(String,i.slice(x,x+=4096));return s}(x)}function checkOffset(i,o,s){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+o>s)throw RangeError("Trying to access beyond buffer length")}function checkInt(i,o,s,x,_,F){if(!Buffer.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(o>_||o<F)throw RangeError('"value" argument is out of bounds');if(s+x>i.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(i,o,s,x,_){checkIntBI(o,x,_,i,s,7);var F=Number(o&BigInt(4294967295));i[s++]=F,F>>=8,i[s++]=F,F>>=8,i[s++]=F,F>>=8,i[s++]=F;var N=Number(o>>BigInt(32)&BigInt(4294967295));return i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,s}function wrtBigUInt64BE(i,o,s,x,_){checkIntBI(o,x,_,i,s,7);var F=Number(o&BigInt(4294967295));i[s+7]=F,F>>=8,i[s+6]=F,F>>=8,i[s+5]=F,F>>=8,i[s+4]=F;var N=Number(o>>BigInt(32)&BigInt(4294967295));return i[s+3]=N,N>>=8,i[s+2]=N,N>>=8,i[s+1]=N,N>>=8,i[s]=N,s+8}function checkIEEE754(i,o,s,x,_,F){if(s+x>i.length||s<0)throw RangeError("Index out of range")}function writeFloat(i,o,s,x,F){return o=+o,s>>>=0,F||checkIEEE754(i,o,s,4,34028234663852886e22,-34028234663852886e22),_.write(i,o,s,x,23,4),s+4}function writeDouble(i,o,s,x,F){return o=+o,s>>>=0,F||checkIEEE754(i,o,s,8,17976931348623157e292,-17976931348623157e292),_.write(i,o,s,x,52,8),s+8}o.lW=Buffer,o.h2=50,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var i=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(i,o),42===i.foo()}catch(i){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(i,o,s){return from(i,o,s)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(i,o,s){return(assertSize(i),i<=0)?createBuffer(i):void 0!==o?"string"==typeof s?createBuffer(i).fill(o,s):createBuffer(i).fill(o):createBuffer(i)},Buffer.allocUnsafe=function(i){return allocUnsafe(i)},Buffer.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==Buffer.prototype},Buffer.compare=function(i,o){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),isInstance(o,Uint8Array)&&(o=Buffer.from(o,o.offset,o.byteLength)),!Buffer.isBuffer(i)||!Buffer.isBuffer(o))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;for(var s=i.length,x=o.length,_=0,F=Math.min(s,x);_<F;++_)if(i[_]!==o[_]){s=i[_],x=o[_];break}return s<x?-1:x<s?1:0},Buffer.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(i,o){if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer.alloc(0);if(void 0===o)for(s=0,o=0;s<i.length;++s)o+=i[s].length;var s,x=Buffer.allocUnsafe(o),_=0;for(s=0;s<i.length;++s){var F=i[s];if(isInstance(F,Uint8Array))_+F.length>x.length?(Buffer.isBuffer(F)||(F=Buffer.from(F)),F.copy(x,_)):Uint8Array.prototype.set.call(x,F,_);else if(Buffer.isBuffer(F))F.copy(x,_);else throw TypeError('"list" argument must be an Array of Buffers');_+=F.length}return x},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)swap(this,o,o+1);return this},Buffer.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)swap(this,o,o+3),swap(this,o+1,o+2);return this},Buffer.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)swap(this,o,o+7),swap(this,o+1,o+6),swap(this,o+2,o+5),swap(this,o+3,o+4);return this},Buffer.prototype.toString=function(){var i=this.length;return 0===i?"":0==arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(i){if(!Buffer.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===Buffer.compare(this,i)},Buffer.prototype.inspect=function(){var i="",s=o.h2;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},F&&(Buffer.prototype[F]=Buffer.prototype.inspect),Buffer.prototype.compare=function(i,o,s,x,_){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof(i));if(void 0===o&&(o=0),void 0===s&&(s=i?i.length:0),void 0===x&&(x=0),void 0===_&&(_=this.length),o<0||s>i.length||x<0||_>this.length)throw RangeError("out of range index");if(x>=_&&o>=s)return 0;if(x>=_)return -1;if(o>=s)return 1;if(o>>>=0,s>>>=0,x>>>=0,_>>>=0,this===i)return 0;for(var F=_-x,N=s-o,j=Math.min(F,N),G=this.slice(x,_),Z=i.slice(o,s),X=0;X<j;++X)if(G[X]!==Z[X]){F=G[X],N=Z[X];break}return F<N?-1:N<F?1:0},Buffer.prototype.includes=function(i,o,s){return -1!==this.indexOf(i,o,s)},Buffer.prototype.indexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!0)},Buffer.prototype.lastIndexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!1)},Buffer.prototype.write=function(i,o,s,x){if(void 0===o)x="utf8",s=this.length,o=0;else if(void 0===s&&"string"==typeof o)x=o,s=this.length,o=0;else if(isFinite(o))o>>>=0,isFinite(s)?(s>>>=0,void 0===x&&(x="utf8")):(x=s,s=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _,F,N,j,G,Z,X,J,$=this.length-o;if((void 0===s||s>$)&&(s=$),i.length>0&&(s<0||o<0)||o>this.length)throw RangeError("Attempt to write outside buffer bounds");x||(x="utf8");for(var ee=!1;;)switch(x){case"hex":return function(i,o,s,x){s=Number(s)||0;var _,F=i.length-s;x?(x=Number(x))>F&&(x=F):x=F;var N=o.length;for(x>N/2&&(x=N/2),_=0;_<x;++_){var j=parseInt(o.substr(2*_,2),16);if(j!=j)break;i[s+_]=j}return _}(this,i,o,s);case"utf8":case"utf-8":return _=o,F=s,blitBuffer(utf8ToBytes(i,this.length-_),this,_,F);case"ascii":case"latin1":case"binary":return N=o,j=s,blitBuffer(function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o}(i),this,N,j);case"base64":return G=o,Z=s,blitBuffer(base64ToBytes(i),this,G,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X=o,J=s,blitBuffer(function(i,o){for(var s,x,_=[],F=0;F<i.length&&!((o-=2)<0);++F)x=(s=i.charCodeAt(F))>>8,_.push(s%256),_.push(x);return _}(i,this.length-X),this,X,J);default:if(ee)throw TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),ee=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(i,o){var s=this.length;i=~~i,o=void 0===o?s:~~o,i<0?(i+=s)<0&&(i=0):i>s&&(i=s),o<0?(o+=s)<0&&(o=0):o>s&&(o=s),o<i&&(o=i);var x=this.subarray(i,o);return Object.setPrototypeOf(x,Buffer.prototype),x},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i],_=1,F=0;++F<o&&(_*=256);)x+=this[i+F]*_;return x},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i+--o],_=1;o>0&&(_*=256);)x+=this[i+--o]*_;return x},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(i,o){return i>>>=0,o||checkOffset(i,1,this.length),this[i]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var x=o+256*this[++i]+65536*this[++i]+16777216*this[++i],_=this[++i]+256*this[++i]+65536*this[++i]+16777216*s;return BigInt(x)+(BigInt(_)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var x=16777216*o+65536*this[++i]+256*this[++i]+this[++i],_=16777216*this[++i]+65536*this[++i]+256*this[++i]+s;return(BigInt(x)<<BigInt(32))+BigInt(_)}),Buffer.prototype.readIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i],_=1,F=0;++F<o&&(_*=256);)x+=this[i+F]*_;return x>=(_*=128)&&(x-=Math.pow(2,8*o)),x},Buffer.prototype.readIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=o,_=1,F=this[i+--x];x>0&&(_*=256);)F+=this[i+--x]*_;return F>=(_*=128)&&(F-=Math.pow(2,8*o)),F},Buffer.prototype.readInt8=function(i,o){return(i>>>=0,o||checkOffset(i,1,this.length),128&this[i])?-((255-this[i]+1)*1):this[i]},Buffer.prototype.readInt16LE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i]|this[i+1]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt16BE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i+1]|this[i]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer.prototype.readInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt(this[i+4]+256*this[i+5]+65536*this[i+6]+(s<<24))<<BigInt(32))+BigInt(o+256*this[++i]+65536*this[++i]+16777216*this[++i])}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt((o<<24)+65536*this[++i]+256*this[++i]+this[++i])<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+s)}),Buffer.prototype.readFloatLE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),_.read(this,i,!0,23,4)},Buffer.prototype.readFloatBE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),_.read(this,i,!1,23,4)},Buffer.prototype.readDoubleLE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),_.read(this,i,!0,52,8)},Buffer.prototype.readDoubleBE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),_.read(this,i,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(i,o,s,x){if(i=+i,o>>>=0,s>>>=0,!x){var _=Math.pow(2,8*s)-1;checkInt(this,i,o,s,_,0)}var F=1,N=0;for(this[o]=255&i;++N<s&&(F*=256);)this[o+N]=i/F&255;return o+s},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(i,o,s,x){if(i=+i,o>>>=0,s>>>=0,!x){var _=Math.pow(2,8*s)-1;checkInt(this,i,o,s,_,0)}var F=s-1,N=1;for(this[o+F]=255&i;--F>=0&&(N*=256);)this[o+F]=i/N&255;return o+s},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,255,0),this[o]=255&i,o+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=255&i,o+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(i,o,s,x){if(i=+i,o>>>=0,!x){var _=Math.pow(2,8*s-1);checkInt(this,i,o,s,_-1,-_)}var F=0,N=1,j=0;for(this[o]=255&i;++F<s&&(N*=256);)i<0&&0===j&&0!==this[o+F-1]&&(j=1),this[o+F]=(i/N>>0)-j&255;return o+s},Buffer.prototype.writeIntBE=function(i,o,s,x){if(i=+i,o>>>=0,!x){var _=Math.pow(2,8*s-1);checkInt(this,i,o,s,_-1,-_)}var F=s-1,N=1,j=0;for(this[o+F]=255&i;--F>=0&&(N*=256);)i<0&&0===j&&0!==this[o+F+1]&&(j=1),this[o+F]=(i/N>>0)-j&255;return o+s},Buffer.prototype.writeInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=255&i,o+1},Buffer.prototype.writeInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),this[o]=255&i,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},Buffer.prototype.writeInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(i,o,s){return writeFloat(this,i,o,!0,s)},Buffer.prototype.writeFloatBE=function(i,o,s){return writeFloat(this,i,o,!1,s)},Buffer.prototype.writeDoubleLE=function(i,o,s){return writeDouble(this,i,o,!0,s)},Buffer.prototype.writeDoubleBE=function(i,o,s){return writeDouble(this,i,o,!1,s)},Buffer.prototype.copy=function(i,o,s,x){if(!Buffer.isBuffer(i))throw TypeError("argument should be a Buffer");if(s||(s=0),x||0===x||(x=this.length),o>=i.length&&(o=i.length),o||(o=0),x>0&&x<s&&(x=s),x===s||0===i.length||0===this.length)return 0;if(o<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(x<0)throw RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),i.length-o<x-s&&(x=i.length-o+s);var _=x-s;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,s,x):Uint8Array.prototype.set.call(i,this.subarray(s,x),o),_},Buffer.prototype.fill=function(i,o,s,x){if("string"==typeof i){if("string"==typeof o?(x=o,o=0,s=this.length):"string"==typeof s&&(x=s,s=this.length),void 0!==x&&"string"!=typeof x)throw TypeError("encoding must be a string");if("string"==typeof x&&!Buffer.isEncoding(x))throw TypeError("Unknown encoding: "+x);if(1===i.length){var _,F=i.charCodeAt(0);("utf8"===x&&F<128||"latin1"===x)&&(i=F)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(o<0||this.length<o||this.length<s)throw RangeError("Out of range index");if(s<=o)return this;if(o>>>=0,s=void 0===s?this.length:s>>>0,i||(i=0),"number"==typeof i)for(_=o;_<s;++_)this[_]=i;else{var N=Buffer.isBuffer(i)?i:Buffer.from(i,x),j=N.length;if(0===j)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<s-o;++_)this[_+o]=N[_%j]}return this};var N={};function E(i,o,s){N[i]=function(s){!function(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&_setPrototypeOf(i,o)}(NodeError,s);var x,_,F,N=(x=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}(),function(){var i,o=_getPrototypeOf(NodeError);if(x){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return function(i,o){if(o&&("object"===_typeof(o)||"function"==typeof o))return o;if(void 0!==o)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}(this,i)});function NodeError(){var s;return function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}(this,NodeError),Object.defineProperty(_assertThisInitialized(s=N.call(this)),"message",{value:o.apply(_assertThisInitialized(s),arguments),writable:!0,configurable:!0}),s.name="".concat(s.name," [").concat(i,"]"),s.stack,delete s.name,s}return _=[{key:"code",get:function(){return i},set:function(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(i,"]: ").concat(this.message)}}],_defineProperties(NodeError.prototype,_),F&&_defineProperties(NodeError,F),Object.defineProperty(NodeError,"prototype",{writable:!1}),NodeError}(s)}function addNumericalSeparator(i){for(var o="",s=i.length,x="-"===i[0]?1:0;s>=x+4;s-=3)o="_".concat(i.slice(s-3,s)).concat(o);return"".concat(i.slice(0,s)).concat(o)}function checkIntBI(i,o,s,x,_,F){if(i>s||i<o){var j,G="bigint"==typeof o?"n":"";throw j=F>3?0===o||o===BigInt(0)?">= 0".concat(G," and < 2").concat(G," ** ").concat((F+1)*8).concat(G):">= -(2".concat(G," ** ").concat((F+1)*8-1).concat(G,") and < 2 ** ")+"".concat((F+1)*8-1).concat(G):">= ".concat(o).concat(G," and <= ").concat(s).concat(G),new N.ERR_OUT_OF_RANGE("value",j,i)}validateNumber(_,"offset"),(void 0===x[_]||void 0===x[_+F])&&boundsError(_,x.length-(F+1))}function validateNumber(i,o){if("number"!=typeof i)throw new N.ERR_INVALID_ARG_TYPE(o,"number",i)}function boundsError(i,o,s){if(Math.floor(i)!==i)throw validateNumber(i,s),new N.ERR_OUT_OF_RANGE(s||"offset","an integer",i);if(o<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(o),i)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?"".concat(i," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(i,o){return'The "'.concat(i,'" argument must be of type number. Received type ').concat(_typeof(o))},TypeError),E("ERR_OUT_OF_RANGE",function(i,o,s){var x='The value of "'.concat(i,'" is out of range.'),_=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?_=addNumericalSeparator(String(s)):"bigint"==typeof s&&(_=String(s),(s>Math.pow(BigInt(2),BigInt(32))||s<-Math.pow(BigInt(2),BigInt(32)))&&(_=addNumericalSeparator(_)),_+="n"),x+=" It must be ".concat(o,". Received ").concat(_)},RangeError);var j=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(i,o){o=o||1/0;for(var s,x=i.length,_=null,F=[],N=0;N<x;++N){if((s=i.charCodeAt(N))>55295&&s<57344){if(!_){if(s>56319||N+1===x){(o-=3)>-1&&F.push(239,191,189);continue}_=s;continue}if(s<56320){(o-=3)>-1&&F.push(239,191,189),_=s;continue}s=(_-55296<<10|s-56320)+65536}else _&&(o-=3)>-1&&F.push(239,191,189);if(_=null,s<128){if((o-=1)<0)break;F.push(s)}else if(s<2048){if((o-=2)<0)break;F.push(s>>6|192,63&s|128)}else if(s<65536){if((o-=3)<0)break;F.push(s>>12|224,s>>6&63|128,63&s|128)}else if(s<1114112){if((o-=4)<0)break;F.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}else throw Error("Invalid code point")}return F}function base64ToBytes(i){return x.toByteArray(function(i){if((i=(i=i.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(i))}function blitBuffer(i,o,s,x){var _;for(_=0;_<x&&!(_+s>=o.length)&&!(_>=i.length);++_)o[_+s]=i[_];return _}function isInstance(i,o){return i instanceof o||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===o.name}var G=function(){for(var i="0123456789abcdef",o=Array(256),s=0;s<16;++s)for(var x=16*s,_=0;_<16;++_)o[x+_]=i[s]+i[_];return o}();function defineBigIntMethod(i){return"undefined"==typeof BigInt?BufferBigIntNotDefined:i}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}},2321:function(i){"use strict";i.exports=isMobile,i.exports.isMobile=isMobile,i.exports.default=isMobile;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,x=/android|ipad|playbook|silk/i;function isMobile(i){i||(i={});var _=i.ua;if(_||"undefined"==typeof navigator||(_=navigator.userAgent),_&&_.headers&&"string"==typeof _.headers["user-agent"]&&(_=_.headers["user-agent"]),"string"!=typeof _)return!1;var F=o.test(_)&&!s.test(_)||!!i.tablet&&x.test(_);return!F&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==_.indexOf("Macintosh")&&-1!==_.indexOf("Safari")&&(F=!0),F}},3910:function(i,o){"use strict";o.byteLength=function(i){var o=getLens(i),s=o[0],x=o[1];return(s+x)*3/4-x},o.toByteArray=function(i){var o,s,F=getLens(i),N=F[0],j=F[1],G=new _((N+j)*3/4-j),Z=0,X=j>0?N-4:N;for(s=0;s<X;s+=4)o=x[i.charCodeAt(s)]<<18|x[i.charCodeAt(s+1)]<<12|x[i.charCodeAt(s+2)]<<6|x[i.charCodeAt(s+3)],G[Z++]=o>>16&255,G[Z++]=o>>8&255,G[Z++]=255&o;return 2===j&&(o=x[i.charCodeAt(s)]<<2|x[i.charCodeAt(s+1)]>>4,G[Z++]=255&o),1===j&&(o=x[i.charCodeAt(s)]<<10|x[i.charCodeAt(s+1)]<<4|x[i.charCodeAt(s+2)]>>2,G[Z++]=o>>8&255,G[Z++]=255&o),G},o.fromByteArray=function(i){for(var o,x=i.length,_=x%3,F=[],N=0,j=x-_;N<j;N+=16383)F.push(function(i,o,x){for(var _,F=[],N=o;N<x;N+=3)F.push(s[(_=(i[N]<<16&16711680)+(i[N+1]<<8&65280)+(255&i[N+2]))>>18&63]+s[_>>12&63]+s[_>>6&63]+s[63&_]);return F.join("")}(i,N,N+16383>j?j:N+16383));return 1===_?F.push(s[(o=i[x-1])>>2]+s[o<<4&63]+"=="):2===_&&F.push(s[(o=(i[x-2]<<8)+i[x-1])>>10]+s[o>>4&63]+s[o<<2&63]+"="),F.join("")};for(var s=[],x=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,j=F.length;N<j;++N)s[N]=F[N],x[F.charCodeAt(N)]=N;function getLens(i){var o=i.length;if(o%4>0)throw Error("Invalid string. Length must be a multiple of 4");var s=i.indexOf("=");-1===s&&(s=o);var x=s===o?0:4-s%4;return[s,x]}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},3187:function(i,o){o.read=function(i,o,s,x,_){var F,N,j=8*_-x-1,G=(1<<j)-1,Z=G>>1,X=-7,J=s?_-1:0,$=s?-1:1,ee=i[o+J];for(J+=$,F=ee&(1<<-X)-1,ee>>=-X,X+=j;X>0;F=256*F+i[o+J],J+=$,X-=8);for(N=F&(1<<-X)-1,F>>=-X,X+=x;X>0;N=256*N+i[o+J],J+=$,X-=8);if(0===F)F=1-Z;else{if(F===G)return N?NaN:(ee?-1:1)*(1/0);N+=Math.pow(2,x),F-=Z}return(ee?-1:1)*N*Math.pow(2,F-x)},o.write=function(i,o,s,x,_,F){var N,j,G,Z=8*F-_-1,X=(1<<Z)-1,J=X>>1,$=23===_?5960464477539062e-23:0,ee=x?0:F-1,et=x?1:-1,er=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(j=isNaN(o)?1:0,N=X):(N=Math.floor(Math.log(o)/Math.LN2),o*(G=Math.pow(2,-N))<1&&(N--,G*=2),N+J>=1?o+=$/G:o+=$*Math.pow(2,1-J),o*G>=2&&(N++,G/=2),N+J>=X?(j=0,N=X):N+J>=1?(j=(o*G-1)*Math.pow(2,_),N+=J):(j=o*Math.pow(2,J-1)*Math.pow(2,_),N=0));_>=8;i[s+ee]=255&j,ee+=et,j/=256,_-=8);for(N=N<<_|j,Z+=_;Z>0;i[s+ee]=255&N,ee+=et,N/=256,Z-=8);i[s+ee-et]|=128*er}},1152:function(i,o,s){"use strict";i.exports=function(i){var o=(i=i||{}).eye||[0,0,1],s=i.center||[0,0,0],N=i.up||[0,1,0],j=i.distanceLimits||[0,1/0],G=i.mode||"turntable",Z=x(),X=_(),J=F();return Z.setDistanceLimits(j[0],j[1]),Z.lookAt(0,o,s,N),X.setDistanceLimits(j[0],j[1]),X.lookAt(0,o,s,N),J.setDistanceLimits(j[0],j[1]),J.lookAt(0,o,s,N),new ViewController({turntable:Z,orbit:X,matrix:J},G)};var x=s(3440),_=s(7774),F=s(9298);function ViewController(i,o){this._controllerNames=Object.keys(i),this._controllerList=this._controllerNames.map(function(o){return i[o]}),this._mode=o,this._active=i[o],this._active||(this._mode="turntable",this._active=i.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var N=ViewController.prototype;N.flush=function(i){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].flush(i)},N.idle=function(i){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].idle(i)},N.lookAt=function(i,o,s,x){for(var _=this._controllerList,F=0;F<_.length;++F)_[F].lookAt(i,o,s,x)},N.rotate=function(i,o,s,x){for(var _=this._controllerList,F=0;F<_.length;++F)_[F].rotate(i,o,s,x)},N.pan=function(i,o,s,x){for(var _=this._controllerList,F=0;F<_.length;++F)_[F].pan(i,o,s,x)},N.translate=function(i,o,s,x){for(var _=this._controllerList,F=0;F<_.length;++F)_[F].translate(i,o,s,x)},N.setMatrix=function(i,o){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].setMatrix(i,o)},N.setDistanceLimits=function(i,o){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].setDistanceLimits(i,o)},N.setDistance=function(i,o){for(var s=this._controllerList,x=0;x<s.length;++x)s[x].setDistance(i,o)},N.recalcMatrix=function(i){this._active.recalcMatrix(i)},N.getDistance=function(i){return this._active.getDistance(i)},N.getDistanceLimits=function(i){return this._active.getDistanceLimits(i)},N.lastT=function(){return this._active.lastT()},N.setMode=function(i){if(i!==this._mode){var o=this._controllerNames.indexOf(i);if(!(o<0)){var s=this._active,x=this._controllerList[o],_=Math.max(s.lastT(),x.lastT());s.recalcMatrix(_),x.setMatrix(_,s.computedMatrix),this._active=x,this._mode=i,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},N.getMode=function(){return this._mode}},8126:function(i,o,s){"use strict";var x="undefined"==typeof WeakMap?s(5346):WeakMap,_=s(5827),F=s(2944),N=new x;i.exports=function(i){var o=N.get(i),s=o&&(o._triangleBuffer.handle||o._triangleBuffer.buffer);if(!s||!i.isBuffer(s)){var x=_(i,new Float32Array([-1,-1,-1,4,4,-1]));(o=F(i,[{buffer:x,type:i.FLOAT,size:2}]))._triangleBuffer=x,N.set(i,o)}o.bind(),i.drawArrays(i.TRIANGLES,0,3),o.unbind()}},8008:function(i,o,s){var x=s(4930);i.exports=function(i,o,s){o="number"==typeof o?o:1,s=s||": ";var _=i.split(/\r?\n/),F=String(_.length+o-1).length;return _.map(function(i,_){var N=_+o,j=String(N).length;return x(N,F-j)+s+i}).join("\n")}},2153:function(i,o,s){"use strict";i.exports=function(i){var o=i.length;if(0===o)return[];if(1===o)return[0];for(var s=i[0].length,_=[i[0]],F=[0],N=1;N<o;++N){if(_.push(i[N]),!function(i,o){for(var s=Array(o+1),_=0;_<i.length;++_)s[_]=i[_];for(var _=0;_<=i.length;++_){for(var F=i.length;F<=o;++F){for(var N=Array(o),j=0;j<o;++j)N[j]=Math.pow(F+1-_,j);s[F]=N}if(x.apply(void 0,s))return!0}return!1}(_,s)){_.pop();continue}if(F.push(N),F.length===s+1)break}return F};var x=s(417)},4653:function(i,o,s){"use strict";i.exports=function(i,o){return x(o).filter(function(s){for(var x=Array(s.length),F=0;F<s.length;++F)x[F]=o[s[F]];return _(x)*i<1})};var x=s(4419),_=s(1778)},2350:function(i,o,s){i.exports=function(i,o){return _(x(i,o))};var x=s(4653),_=s(8691)},7896:function(i){i.exports=function(i){return atob(i)}},957:function(i,o,s){"use strict";i.exports=function(i,o){for(var s=o.length,_=Array(s+1),F=0;F<s;++F){for(var N=Array(s+1),j=0;j<=s;++j)N[j]=i[j][F];_[F]=N}_[s]=Array(s+1);for(var F=0;F<=s;++F)_[s][F]=1;for(var G=Array(s+1),F=0;F<s;++F)G[F]=o[F];G[s]=1;var Z=x(_,G),X=reduce(Z[s+1]);0===X&&(X=1);for(var J=Array(s+1),F=0;F<=s;++F)J[F]=reduce(Z[F])/X;return J};var x=s(6606);function reduce(i){for(var o=0,s=0;s<i.length;++s)o+=i[s];return o}},1539:function(i,o,s){"use strict";var x=s(8524);i.exports=function(i,o){return x(i[0].mul(o[1]).add(o[0].mul(i[1])),i[1].mul(o[1]))}},8846:function(i){"use strict";i.exports=function(i,o){return i[0].mul(o[1]).cmp(o[0].mul(i[1]))}},9189:function(i,o,s){"use strict";var x=s(8524);i.exports=function(i,o){return x(i[0].mul(o[1]),i[1].mul(o[0]))}},5125:function(i,o,s){"use strict";var x=s(234),_=s(3218),F=s(5514),N=s(2813),j=s(8524),G=s(9189);i.exports=function makeRational(i,o){if(x(i))return o?G(i,makeRational(o)):[i[0].clone(),i[1].clone()];var s,Z,X=0;if(_(i))s=i.clone();else if("string"==typeof i)s=N(i);else if(0===i)return[F(0),F(1)];else if(i===Math.floor(i))s=F(i);else{for(;i!==Math.floor(i);)i*=1157920892373162e62,X-=256;s=F(i)}if(x(o))s.mul(o[1]),Z=o[0].clone();else if(_(o))Z=o.clone();else if("string"==typeof o)Z=N(o);else if(o){if(o===Math.floor(o))Z=F(o);else{for(;o!==Math.floor(o);)o*=1157920892373162e62,X+=256;Z=F(o)}}else Z=F(1);return X>0?s=s.ushln(X):X<0&&(Z=Z.ushln(-X)),j(s,Z)}},234:function(i,o,s){"use strict";var x=s(3218);i.exports=function(i){return Array.isArray(i)&&2===i.length&&x(i[0])&&x(i[1])}},4275:function(i,o,s){"use strict";var x=s(1928);i.exports=function(i){return i.cmp(new x(0))}},9958:function(i,o,s){"use strict";var x=s(4275);i.exports=function(i){var o=i.length,s=i.words,_=0;if(1===o)_=s[0];else if(2===o)_=s[0]+67108864*s[1];else for(var F=0;F<o;F++)_+=s[F]*Math.pow(67108864,F);return x(i)*_}},1112:function(i,o,s){"use strict";var x=s(8362),_=s(2288).countTrailingZeros;i.exports=function(i){var o=_(x.lo(i));if(o<32)return o;var s=_(x.hi(i));return s>20?52:s+32}},3218:function(i,o,s){"use strict";s(1928),i.exports=function(i){return i&&"object"==typeof i&&!!i.words}},5514:function(i,o,s){"use strict";var x=s(1928),_=s(8362);i.exports=function(i){var o=_.exponent(i);return o<52?new x(i):new x(i*Math.pow(2,52-o)).ushln(o-52)}},8524:function(i,o,s){"use strict";var x=s(5514),_=s(4275);i.exports=function(i,o){var s=_(i),F=_(o);if(0===s)return[x(0),x(1)];if(0===F)return[x(0),x(0)];F<0&&(i=i.neg(),o=o.neg());var N=i.gcd(o);return N.cmpn(1)?[i.div(N),o.div(N)]:[i,o]}},2813:function(i,o,s){"use strict";var x=s(1928);i.exports=function(i){return new x(i)}},3962:function(i,o,s){"use strict";var x=s(8524);i.exports=function(i,o){return x(i[0].mul(o[0]),i[1].mul(o[1]))}},4951:function(i,o,s){"use strict";var x=s(4275);i.exports=function(i){return x(i[0])*x(i[1])}},4354:function(i,o,s){"use strict";var x=s(8524);i.exports=function(i,o){return x(i[0].mul(o[1]).sub(i[1].mul(o[0])),i[1].mul(o[1]))}},7999:function(i,o,s){"use strict";var x=s(9958),_=s(1112);i.exports=function(i){var o=i[0],s=i[1];if(0===o.cmpn(0))return 0;var F=o.abs().divmod(s.abs()),N=x(F.div),j=F.mod,G=o.negative!==s.negative?-1:1;if(0===j.cmpn(0))return G*N;if(N){var Z=_(N)+4,X=x(j.ushln(Z).divRound(s));return G*(N+X*Math.pow(2,-Z))}var J=s.bitLength()-j.bitLength()+53,X=x(j.ushln(J).divRound(s));return J<1023?G*X*Math.pow(2,-J):G*(X*=11125369292536007e-324)*Math.pow(2,1023-J)}},5070:function(i){"use strict";function ge(i,o,s,x,_){for(var F=_+1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)>=0?(F=N,_=N-1):x=N+1}return F}function gt(i,o,s,x,_){for(var F=_+1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)>0?(F=N,_=N-1):x=N+1}return F}function lt(i,o,s,x,_){for(var F=x-1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)<0?(F=N,x=N+1):_=N-1}return F}function le(i,o,s,x,_){for(var F=x-1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)<=0?(F=N,x=N+1):_=N-1}return F}function eq(i,o,s,x,_){for(;x<=_;){var F=x+_>>>1,N=i[F],j=void 0!==s?s(N,o):N-o;if(0===j)return F;j<=0?x=F+1:_=F-1}return -1}function norm(i,o,s,x,_,F){return"function"==typeof s?F(i,o,s,void 0===x?0:0|x,void 0===_?i.length-1:0|_):F(i,o,void 0,void 0===s?0:0|s,void 0===x?i.length-1:0|x)}i.exports={ge:function(i,o,s,x,_){return norm(i,o,s,x,_,ge)},gt:function(i,o,s,x,_){return norm(i,o,s,x,_,gt)},lt:function(i,o,s,x,_){return norm(i,o,s,x,_,lt)},le:function(i,o,s,x,_){return norm(i,o,s,x,_,le)},eq:function(i,o,s,x,_){return norm(i,o,s,x,_,eq)}}},2288:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,x=o,_=7;for(s>>>=1;s;s>>>=1)x<<=1,x|=1&s,--_;i[o]=x<<_&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},1928:function(i,o,s){!function(i,o){"use strict";function assert(i,o){if(!i)throw Error(o||"Assertion failed")}function inherits(i,o){i.super_=o;var TempCtor=function(){};TempCtor.prototype=o.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}function BN(i,o,s){if(BN.isBN(i))return i;this.negative=0,this.words=null,this.length=0,this.red=null,null!==i&&(("le"===o||"be"===o)&&(s=o,o=10),this._init(i||0,o||10,s||"be"))}"object"==typeof i?i.exports=BN:o.BN=BN,BN.BN=BN,BN.wordSize=26;try{x="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:s(6601).Buffer}catch(i){}function parseHex4Bits(i,o){var s=i.charCodeAt(o);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function parseHexByte(i,o,s){var x=parseHex4Bits(i,s);return s-1>=o&&(x|=parseHex4Bits(i,s-1)<<4),x}function parseBase(i,o,s,x){for(var _=0,F=Math.min(i.length,s),N=o;N<F;N++){var j=i.charCodeAt(N)-48;_*=x,j>=49?_+=j-49+10:j>=17?_+=j-17+10:_+=j}return _}BN.isBN=function(i){return i instanceof BN||null!==i&&"object"==typeof i&&i.constructor.wordSize===BN.wordSize&&Array.isArray(i.words)},BN.max=function(i,o){return i.cmp(o)>0?i:o},BN.min=function(i,o){return 0>i.cmp(o)?i:o},BN.prototype._init=function(i,o,s){if("number"==typeof i)return this._initNumber(i,o,s);if("object"==typeof i)return this._initArray(i,o,s);"hex"===o&&(o=16),assert(o===(0|o)&&o>=2&&o<=36);var x=0;"-"===(i=i.toString().replace(/\s+/g,""))[0]&&(x++,this.negative=1),x<i.length&&(16===o?this._parseHex(i,x,s):(this._parseBase(i,o,x),"le"===s&&this._initArray(this.toArray(),o,s)))},BN.prototype._initNumber=function(i,o,s){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[67108863&i],this.length=1):i<4503599627370496?(this.words=[67108863&i,i/67108864&67108863],this.length=2):(assert(i<9007199254740992),this.words=[67108863&i,i/67108864&67108863,1],this.length=3),"le"===s&&this._initArray(this.toArray(),o,s)},BN.prototype._initArray=function(i,o,s){if(assert("number"==typeof i.length),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=Array(this.length);for(var x,_,F=0;F<this.length;F++)this.words[F]=0;var N=0;if("be"===s)for(F=i.length-1,x=0;F>=0;F-=3)_=i[F]|i[F-1]<<8|i[F-2]<<16,this.words[x]|=_<<N&67108863,this.words[x+1]=_>>>26-N&67108863,(N+=24)>=26&&(N-=26,x++);else if("le"===s)for(F=0,x=0;F<i.length;F+=3)_=i[F]|i[F+1]<<8|i[F+2]<<16,this.words[x]|=_<<N&67108863,this.words[x+1]=_>>>26-N&67108863,(N+=24)>=26&&(N-=26,x++);return this.strip()},BN.prototype._parseHex=function(i,o,s){this.length=Math.ceil((i.length-o)/6),this.words=Array(this.length);for(var x,_=0;_<this.length;_++)this.words[_]=0;var F=0,N=0;if("be"===s)for(_=i.length-1;_>=o;_-=2)x=parseHexByte(i,o,_)<<F,this.words[N]|=67108863&x,F>=18?(F-=18,N+=1,this.words[N]|=x>>>26):F+=8;else for(_=(i.length-o)%2==0?o+1:o;_<i.length;_+=2)x=parseHexByte(i,o,_)<<F,this.words[N]|=67108863&x,F>=18?(F-=18,N+=1,this.words[N]|=x>>>26):F+=8;this.strip()},BN.prototype._parseBase=function(i,o,s){this.words=[0],this.length=1;for(var x=0,_=1;_<=67108863;_*=o)x++;x--,_=_/o|0;for(var F=i.length-s,N=F%x,j=Math.min(F,F-N)+s,G=0,Z=s;Z<j;Z+=x)G=parseBase(i,Z,Z+x,o),this.imuln(_),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(0!==N){var X=1;for(G=parseBase(i,Z,i.length,o),Z=0;Z<N;Z++)X*=o;this.imuln(X),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},BN.prototype.copy=function(i){i.words=Array(this.length);for(var o=0;o<this.length;o++)i.words[o]=this.words[o];i.length=this.length,i.negative=this.negative,i.red=this.red},BN.prototype.clone=function(){var i=new BN(null);return this.copy(i),i},BN.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},BN.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var x,_=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],F=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(i,o,s){s.negative=o.negative^i.negative;var x=i.length+o.length|0;s.length=x,x=x-1|0;var _=0|i.words[0],F=0|o.words[0],N=_*F,j=67108863&N,G=N/67108864|0;s.words[0]=j;for(var Z=1;Z<x;Z++){for(var X=G>>>26,J=67108863&G,$=Math.min(Z,o.length-1),ee=Math.max(0,Z-i.length+1);ee<=$;ee++){var et=Z-ee|0;X+=(N=(_=0|i.words[et])*(F=0|o.words[ee])+J)/67108864|0,J=67108863&N}s.words[Z]=0|J,G=0|X}return 0!==G?s.words[Z]=0|G:s.length--,s.strip()}BN.prototype.toString=function(i,o){if(o=0|o||1,16===(i=i||10)||"hex"===i){s="";for(var s,x=0,j=0,G=0;G<this.length;G++){var Z=this.words[G],X=((Z<<x|j)&16777215).toString(16);s=0!=(j=Z>>>24-x&16777215)||G!==this.length-1?_[6-X.length]+X+s:X+s,(x+=2)>=26&&(x-=26,G--)}for(0!==j&&(s=j.toString(16)+s);s.length%o!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(i===(0|i)&&i>=2&&i<=36){var J=F[i],$=N[i];s="";var ee=this.clone();for(ee.negative=0;!ee.isZero();){var et=ee.modn($).toString(i);s=(ee=ee.idivn($)).isZero()?et+s:_[J-et.length]+et+s}for(this.isZero()&&(s="0"+s);s.length%o!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var i=this.words[0];return 2===this.length?i+=67108864*this.words[1]:3===this.length&&1===this.words[2]?i+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-i:i},BN.prototype.toJSON=function(){return this.toString(16)},BN.prototype.toBuffer=function(i,o){return assert(void 0!==x),this.toArrayLike(x,i,o)},BN.prototype.toArray=function(i,o){return this.toArrayLike(Array,i,o)},BN.prototype.toArrayLike=function(i,o,s){var x,_,F=this.byteLength(),N=s||Math.max(1,F);assert(F<=N,"byte array longer than desired length"),assert(N>0,"Requested array length <= 0"),this.strip();var j=new i(N),G=this.clone();if("le"===o){for(_=0;!G.isZero();_++)x=G.andln(255),G.iushrn(8),j[_]=x;for(;_<N;_++)j[_]=0}else{for(_=0;_<N-F;_++)j[_]=0;for(_=0;!G.isZero();_++)x=G.andln(255),G.iushrn(8),j[N-_-1]=x}return j},Math.clz32?BN.prototype._countBits=function(i){return 32-Math.clz32(i)}:BN.prototype._countBits=function(i){var o=i,s=0;return o>=4096&&(s+=13,o>>>=13),o>=64&&(s+=7,o>>>=7),o>=8&&(s+=4,o>>>=4),o>=2&&(s+=2,o>>>=2),s+o},BN.prototype._zeroBits=function(i){if(0===i)return 26;var o=i,s=0;return(8191&o)==0&&(s+=13,o>>>=13),(127&o)==0&&(s+=7,o>>>=7),(15&o)==0&&(s+=4,o>>>=4),(3&o)==0&&(s+=2,o>>>=2),(1&o)==0&&s++,s},BN.prototype.bitLength=function(){var i=this.words[this.length-1],o=this._countBits(i);return(this.length-1)*26+o},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,o=0;o<this.length;o++){var s=this._zeroBits(this.words[o]);if(i+=s,26!==s)break}return i},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(i){return 0!==this.negative?this.abs().inotn(i).iaddn(1):this.clone()},BN.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var o=0;o<i.length;o++)this.words[o]=this.words[o]|i.words[o];return this.strip()},BN.prototype.ior=function(i){return assert((this.negative|i.negative)==0),this.iuor(i)},BN.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},BN.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},BN.prototype.iuand=function(i){var o;o=this.length>i.length?i:this;for(var s=0;s<o.length;s++)this.words[s]=this.words[s]&i.words[s];return this.length=o.length,this.strip()},BN.prototype.iand=function(i){return assert((this.negative|i.negative)==0),this.iuand(i)},BN.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},BN.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},BN.prototype.iuxor=function(i){this.length>i.length?(o=this,s=i):(o=i,s=this);for(var o,s,x=0;x<s.length;x++)this.words[x]=o.words[x]^s.words[x];if(this!==o)for(;x<o.length;x++)this.words[x]=o.words[x];return this.length=o.length,this.strip()},BN.prototype.ixor=function(i){return assert((this.negative|i.negative)==0),this.iuxor(i)},BN.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},BN.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},BN.prototype.inotn=function(i){assert("number"==typeof i&&i>=0);var o=0|Math.ceil(i/26),s=i%26;this._expand(o),s>0&&o--;for(var x=0;x<o;x++)this.words[x]=67108863&~this.words[x];return s>0&&(this.words[x]=~this.words[x]&67108863>>26-s),this.strip()},BN.prototype.notn=function(i){return this.clone().inotn(i)},BN.prototype.setn=function(i,o){assert("number"==typeof i&&i>=0);var s=i/26|0,x=i%26;return this._expand(s+1),o?this.words[s]=this.words[s]|1<<x:this.words[s]=this.words[s]&~(1<<x),this.strip()},BN.prototype.iadd=function(i){if(0!==this.negative&&0===i.negative)return this.negative=0,o=this.isub(i),this.negative^=1,this._normSign();if(0===this.negative&&0!==i.negative)return i.negative=0,o=this.isub(i),i.negative=1,o._normSign();this.length>i.length?(s=this,x=i):(s=i,x=this);for(var o,s,x,_=0,F=0;F<x.length;F++)o=(0|s.words[F])+(0|x.words[F])+_,this.words[F]=67108863&o,_=o>>>26;for(;0!==_&&F<s.length;F++)o=(0|s.words[F])+_,this.words[F]=67108863&o,_=o>>>26;if(this.length=s.length,0!==_)this.words[this.length]=_,this.length++;else if(s!==this)for(;F<s.length;F++)this.words[F]=s.words[F];return this},BN.prototype.add=function(i){var o;return 0!==i.negative&&0===this.negative?(i.negative=0,o=this.sub(i),i.negative^=1,o):0===i.negative&&0!==this.negative?(this.negative=0,o=i.sub(this),this.negative=1,o):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},BN.prototype.isub=function(i){if(0!==i.negative){i.negative=0;var o,s,x=this.iadd(i);return i.negative=1,x._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var _=this.cmp(i);if(0===_)return this.negative=0,this.length=1,this.words[0]=0,this;_>0?(o=this,s=i):(o=i,s=this);for(var F=0,N=0;N<s.length;N++)F=(x=(0|o.words[N])-(0|s.words[N])+F)>>26,this.words[N]=67108863&x;for(;0!==F&&N<o.length;N++)F=(x=(0|o.words[N])+F)>>26,this.words[N]=67108863&x;if(0===F&&N<o.length&&o!==this)for(;N<o.length;N++)this.words[N]=o.words[N];return this.length=Math.max(this.length,N),o!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function(i){return this.clone().isub(i)};var comb10MulTo=function(i,o,s){var x,_,F,N=i.words,j=o.words,G=s.words,Z=0,X=0|N[0],J=8191&X,$=X>>>13,ee=0|N[1],et=8191&ee,er=ee>>>13,en=0|N[2],ei=8191&en,eo=en>>>13,es=0|N[3],el=8191&es,ec=es>>>13,eu=0|N[4],ef=8191&eu,eh=eu>>>13,ed=0|N[5],ep=8191&ed,eg=ed>>>13,em=0|N[6],ey=8191&em,ev=em>>>13,ex=0|N[7],e_=8191&ex,ew=ex>>>13,eT=0|N[8],ek=8191&eT,eA=eT>>>13,eS=0|N[9],eM=8191&eS,eC=eS>>>13,eE=0|j[0],eL=8191&eE,eP=eE>>>13,eI=0|j[1],eO=8191&eI,eD=eI>>>13,eR=0|j[2],eB=8191&eR,ez=eR>>>13,eF=0|j[3],eN=8191&eF,ej=eF>>>13,eU=0|j[4],eV=8191&eU,eH=eU>>>13,eG=0|j[5],eW=8191&eG,eZ=eG>>>13,eY=0|j[6],eX=8191&eY,eK=eY>>>13,eJ=0|j[7],e$=8191&eJ,eQ=eJ>>>13,e0=0|j[8],e1=8191&e0,e2=e0>>>13,e3=0|j[9],e5=8191&e3,e4=e3>>>13;s.negative=i.negative^o.negative,s.length=19;var e6=(Z+(x=Math.imul(J,eL))|0)+((8191&(_=(_=Math.imul(J,eP))+Math.imul($,eL)|0))<<13)|0;Z=((F=Math.imul($,eP))+(_>>>13)|0)+(e6>>>26)|0,e6&=67108863,x=Math.imul(et,eL),_=(_=Math.imul(et,eP))+Math.imul(er,eL)|0,F=Math.imul(er,eP);var e8=(Z+(x=x+Math.imul(J,eO)|0)|0)+((8191&(_=(_=_+Math.imul(J,eD)|0)+Math.imul($,eO)|0))<<13)|0;Z=((F=F+Math.imul($,eD)|0)+(_>>>13)|0)+(e8>>>26)|0,e8&=67108863,x=Math.imul(ei,eL),_=(_=Math.imul(ei,eP))+Math.imul(eo,eL)|0,F=Math.imul(eo,eP),x=x+Math.imul(et,eO)|0,_=(_=_+Math.imul(et,eD)|0)+Math.imul(er,eO)|0,F=F+Math.imul(er,eD)|0;var e7=(Z+(x=x+Math.imul(J,eB)|0)|0)+((8191&(_=(_=_+Math.imul(J,ez)|0)+Math.imul($,eB)|0))<<13)|0;Z=((F=F+Math.imul($,ez)|0)+(_>>>13)|0)+(e7>>>26)|0,e7&=67108863,x=Math.imul(el,eL),_=(_=Math.imul(el,eP))+Math.imul(ec,eL)|0,F=Math.imul(ec,eP),x=x+Math.imul(ei,eO)|0,_=(_=_+Math.imul(ei,eD)|0)+Math.imul(eo,eO)|0,F=F+Math.imul(eo,eD)|0,x=x+Math.imul(et,eB)|0,_=(_=_+Math.imul(et,ez)|0)+Math.imul(er,eB)|0,F=F+Math.imul(er,ez)|0;var e9=(Z+(x=x+Math.imul(J,eN)|0)|0)+((8191&(_=(_=_+Math.imul(J,ej)|0)+Math.imul($,eN)|0))<<13)|0;Z=((F=F+Math.imul($,ej)|0)+(_>>>13)|0)+(e9>>>26)|0,e9&=67108863,x=Math.imul(ef,eL),_=(_=Math.imul(ef,eP))+Math.imul(eh,eL)|0,F=Math.imul(eh,eP),x=x+Math.imul(el,eO)|0,_=(_=_+Math.imul(el,eD)|0)+Math.imul(ec,eO)|0,F=F+Math.imul(ec,eD)|0,x=x+Math.imul(ei,eB)|0,_=(_=_+Math.imul(ei,ez)|0)+Math.imul(eo,eB)|0,F=F+Math.imul(eo,ez)|0,x=x+Math.imul(et,eN)|0,_=(_=_+Math.imul(et,ej)|0)+Math.imul(er,eN)|0,F=F+Math.imul(er,ej)|0;var te=(Z+(x=x+Math.imul(J,eV)|0)|0)+((8191&(_=(_=_+Math.imul(J,eH)|0)+Math.imul($,eV)|0))<<13)|0;Z=((F=F+Math.imul($,eH)|0)+(_>>>13)|0)+(te>>>26)|0,te&=67108863,x=Math.imul(ep,eL),_=(_=Math.imul(ep,eP))+Math.imul(eg,eL)|0,F=Math.imul(eg,eP),x=x+Math.imul(ef,eO)|0,_=(_=_+Math.imul(ef,eD)|0)+Math.imul(eh,eO)|0,F=F+Math.imul(eh,eD)|0,x=x+Math.imul(el,eB)|0,_=(_=_+Math.imul(el,ez)|0)+Math.imul(ec,eB)|0,F=F+Math.imul(ec,ez)|0,x=x+Math.imul(ei,eN)|0,_=(_=_+Math.imul(ei,ej)|0)+Math.imul(eo,eN)|0,F=F+Math.imul(eo,ej)|0,x=x+Math.imul(et,eV)|0,_=(_=_+Math.imul(et,eH)|0)+Math.imul(er,eV)|0,F=F+Math.imul(er,eH)|0;var tt=(Z+(x=x+Math.imul(J,eW)|0)|0)+((8191&(_=(_=_+Math.imul(J,eZ)|0)+Math.imul($,eW)|0))<<13)|0;Z=((F=F+Math.imul($,eZ)|0)+(_>>>13)|0)+(tt>>>26)|0,tt&=67108863,x=Math.imul(ey,eL),_=(_=Math.imul(ey,eP))+Math.imul(ev,eL)|0,F=Math.imul(ev,eP),x=x+Math.imul(ep,eO)|0,_=(_=_+Math.imul(ep,eD)|0)+Math.imul(eg,eO)|0,F=F+Math.imul(eg,eD)|0,x=x+Math.imul(ef,eB)|0,_=(_=_+Math.imul(ef,ez)|0)+Math.imul(eh,eB)|0,F=F+Math.imul(eh,ez)|0,x=x+Math.imul(el,eN)|0,_=(_=_+Math.imul(el,ej)|0)+Math.imul(ec,eN)|0,F=F+Math.imul(ec,ej)|0,x=x+Math.imul(ei,eV)|0,_=(_=_+Math.imul(ei,eH)|0)+Math.imul(eo,eV)|0,F=F+Math.imul(eo,eH)|0,x=x+Math.imul(et,eW)|0,_=(_=_+Math.imul(et,eZ)|0)+Math.imul(er,eW)|0,F=F+Math.imul(er,eZ)|0;var tr=(Z+(x=x+Math.imul(J,eX)|0)|0)+((8191&(_=(_=_+Math.imul(J,eK)|0)+Math.imul($,eX)|0))<<13)|0;Z=((F=F+Math.imul($,eK)|0)+(_>>>13)|0)+(tr>>>26)|0,tr&=67108863,x=Math.imul(e_,eL),_=(_=Math.imul(e_,eP))+Math.imul(ew,eL)|0,F=Math.imul(ew,eP),x=x+Math.imul(ey,eO)|0,_=(_=_+Math.imul(ey,eD)|0)+Math.imul(ev,eO)|0,F=F+Math.imul(ev,eD)|0,x=x+Math.imul(ep,eB)|0,_=(_=_+Math.imul(ep,ez)|0)+Math.imul(eg,eB)|0,F=F+Math.imul(eg,ez)|0,x=x+Math.imul(ef,eN)|0,_=(_=_+Math.imul(ef,ej)|0)+Math.imul(eh,eN)|0,F=F+Math.imul(eh,ej)|0,x=x+Math.imul(el,eV)|0,_=(_=_+Math.imul(el,eH)|0)+Math.imul(ec,eV)|0,F=F+Math.imul(ec,eH)|0,x=x+Math.imul(ei,eW)|0,_=(_=_+Math.imul(ei,eZ)|0)+Math.imul(eo,eW)|0,F=F+Math.imul(eo,eZ)|0,x=x+Math.imul(et,eX)|0,_=(_=_+Math.imul(et,eK)|0)+Math.imul(er,eX)|0,F=F+Math.imul(er,eK)|0;var tn=(Z+(x=x+Math.imul(J,e$)|0)|0)+((8191&(_=(_=_+Math.imul(J,eQ)|0)+Math.imul($,e$)|0))<<13)|0;Z=((F=F+Math.imul($,eQ)|0)+(_>>>13)|0)+(tn>>>26)|0,tn&=67108863,x=Math.imul(ek,eL),_=(_=Math.imul(ek,eP))+Math.imul(eA,eL)|0,F=Math.imul(eA,eP),x=x+Math.imul(e_,eO)|0,_=(_=_+Math.imul(e_,eD)|0)+Math.imul(ew,eO)|0,F=F+Math.imul(ew,eD)|0,x=x+Math.imul(ey,eB)|0,_=(_=_+Math.imul(ey,ez)|0)+Math.imul(ev,eB)|0,F=F+Math.imul(ev,ez)|0,x=x+Math.imul(ep,eN)|0,_=(_=_+Math.imul(ep,ej)|0)+Math.imul(eg,eN)|0,F=F+Math.imul(eg,ej)|0,x=x+Math.imul(ef,eV)|0,_=(_=_+Math.imul(ef,eH)|0)+Math.imul(eh,eV)|0,F=F+Math.imul(eh,eH)|0,x=x+Math.imul(el,eW)|0,_=(_=_+Math.imul(el,eZ)|0)+Math.imul(ec,eW)|0,F=F+Math.imul(ec,eZ)|0,x=x+Math.imul(ei,eX)|0,_=(_=_+Math.imul(ei,eK)|0)+Math.imul(eo,eX)|0,F=F+Math.imul(eo,eK)|0,x=x+Math.imul(et,e$)|0,_=(_=_+Math.imul(et,eQ)|0)+Math.imul(er,e$)|0,F=F+Math.imul(er,eQ)|0;var ti=(Z+(x=x+Math.imul(J,e1)|0)|0)+((8191&(_=(_=_+Math.imul(J,e2)|0)+Math.imul($,e1)|0))<<13)|0;Z=((F=F+Math.imul($,e2)|0)+(_>>>13)|0)+(ti>>>26)|0,ti&=67108863,x=Math.imul(eM,eL),_=(_=Math.imul(eM,eP))+Math.imul(eC,eL)|0,F=Math.imul(eC,eP),x=x+Math.imul(ek,eO)|0,_=(_=_+Math.imul(ek,eD)|0)+Math.imul(eA,eO)|0,F=F+Math.imul(eA,eD)|0,x=x+Math.imul(e_,eB)|0,_=(_=_+Math.imul(e_,ez)|0)+Math.imul(ew,eB)|0,F=F+Math.imul(ew,ez)|0,x=x+Math.imul(ey,eN)|0,_=(_=_+Math.imul(ey,ej)|0)+Math.imul(ev,eN)|0,F=F+Math.imul(ev,ej)|0,x=x+Math.imul(ep,eV)|0,_=(_=_+Math.imul(ep,eH)|0)+Math.imul(eg,eV)|0,F=F+Math.imul(eg,eH)|0,x=x+Math.imul(ef,eW)|0,_=(_=_+Math.imul(ef,eZ)|0)+Math.imul(eh,eW)|0,F=F+Math.imul(eh,eZ)|0,x=x+Math.imul(el,eX)|0,_=(_=_+Math.imul(el,eK)|0)+Math.imul(ec,eX)|0,F=F+Math.imul(ec,eK)|0,x=x+Math.imul(ei,e$)|0,_=(_=_+Math.imul(ei,eQ)|0)+Math.imul(eo,e$)|0,F=F+Math.imul(eo,eQ)|0,x=x+Math.imul(et,e1)|0,_=(_=_+Math.imul(et,e2)|0)+Math.imul(er,e1)|0,F=F+Math.imul(er,e2)|0;var ta=(Z+(x=x+Math.imul(J,e5)|0)|0)+((8191&(_=(_=_+Math.imul(J,e4)|0)+Math.imul($,e5)|0))<<13)|0;Z=((F=F+Math.imul($,e4)|0)+(_>>>13)|0)+(ta>>>26)|0,ta&=67108863,x=Math.imul(eM,eO),_=(_=Math.imul(eM,eD))+Math.imul(eC,eO)|0,F=Math.imul(eC,eD),x=x+Math.imul(ek,eB)|0,_=(_=_+Math.imul(ek,ez)|0)+Math.imul(eA,eB)|0,F=F+Math.imul(eA,ez)|0,x=x+Math.imul(e_,eN)|0,_=(_=_+Math.imul(e_,ej)|0)+Math.imul(ew,eN)|0,F=F+Math.imul(ew,ej)|0,x=x+Math.imul(ey,eV)|0,_=(_=_+Math.imul(ey,eH)|0)+Math.imul(ev,eV)|0,F=F+Math.imul(ev,eH)|0,x=x+Math.imul(ep,eW)|0,_=(_=_+Math.imul(ep,eZ)|0)+Math.imul(eg,eW)|0,F=F+Math.imul(eg,eZ)|0,x=x+Math.imul(ef,eX)|0,_=(_=_+Math.imul(ef,eK)|0)+Math.imul(eh,eX)|0,F=F+Math.imul(eh,eK)|0,x=x+Math.imul(el,e$)|0,_=(_=_+Math.imul(el,eQ)|0)+Math.imul(ec,e$)|0,F=F+Math.imul(ec,eQ)|0,x=x+Math.imul(ei,e1)|0,_=(_=_+Math.imul(ei,e2)|0)+Math.imul(eo,e1)|0,F=F+Math.imul(eo,e2)|0;var to=(Z+(x=x+Math.imul(et,e5)|0)|0)+((8191&(_=(_=_+Math.imul(et,e4)|0)+Math.imul(er,e5)|0))<<13)|0;Z=((F=F+Math.imul(er,e4)|0)+(_>>>13)|0)+(to>>>26)|0,to&=67108863,x=Math.imul(eM,eB),_=(_=Math.imul(eM,ez))+Math.imul(eC,eB)|0,F=Math.imul(eC,ez),x=x+Math.imul(ek,eN)|0,_=(_=_+Math.imul(ek,ej)|0)+Math.imul(eA,eN)|0,F=F+Math.imul(eA,ej)|0,x=x+Math.imul(e_,eV)|0,_=(_=_+Math.imul(e_,eH)|0)+Math.imul(ew,eV)|0,F=F+Math.imul(ew,eH)|0,x=x+Math.imul(ey,eW)|0,_=(_=_+Math.imul(ey,eZ)|0)+Math.imul(ev,eW)|0,F=F+Math.imul(ev,eZ)|0,x=x+Math.imul(ep,eX)|0,_=(_=_+Math.imul(ep,eK)|0)+Math.imul(eg,eX)|0,F=F+Math.imul(eg,eK)|0,x=x+Math.imul(ef,e$)|0,_=(_=_+Math.imul(ef,eQ)|0)+Math.imul(eh,e$)|0,F=F+Math.imul(eh,eQ)|0,x=x+Math.imul(el,e1)|0,_=(_=_+Math.imul(el,e2)|0)+Math.imul(ec,e1)|0,F=F+Math.imul(ec,e2)|0;var ts=(Z+(x=x+Math.imul(ei,e5)|0)|0)+((8191&(_=(_=_+Math.imul(ei,e4)|0)+Math.imul(eo,e5)|0))<<13)|0;Z=((F=F+Math.imul(eo,e4)|0)+(_>>>13)|0)+(ts>>>26)|0,ts&=67108863,x=Math.imul(eM,eN),_=(_=Math.imul(eM,ej))+Math.imul(eC,eN)|0,F=Math.imul(eC,ej),x=x+Math.imul(ek,eV)|0,_=(_=_+Math.imul(ek,eH)|0)+Math.imul(eA,eV)|0,F=F+Math.imul(eA,eH)|0,x=x+Math.imul(e_,eW)|0,_=(_=_+Math.imul(e_,eZ)|0)+Math.imul(ew,eW)|0,F=F+Math.imul(ew,eZ)|0,x=x+Math.imul(ey,eX)|0,_=(_=_+Math.imul(ey,eK)|0)+Math.imul(ev,eX)|0,F=F+Math.imul(ev,eK)|0,x=x+Math.imul(ep,e$)|0,_=(_=_+Math.imul(ep,eQ)|0)+Math.imul(eg,e$)|0,F=F+Math.imul(eg,eQ)|0,x=x+Math.imul(ef,e1)|0,_=(_=_+Math.imul(ef,e2)|0)+Math.imul(eh,e1)|0,F=F+Math.imul(eh,e2)|0;var tl=(Z+(x=x+Math.imul(el,e5)|0)|0)+((8191&(_=(_=_+Math.imul(el,e4)|0)+Math.imul(ec,e5)|0))<<13)|0;Z=((F=F+Math.imul(ec,e4)|0)+(_>>>13)|0)+(tl>>>26)|0,tl&=67108863,x=Math.imul(eM,eV),_=(_=Math.imul(eM,eH))+Math.imul(eC,eV)|0,F=Math.imul(eC,eH),x=x+Math.imul(ek,eW)|0,_=(_=_+Math.imul(ek,eZ)|0)+Math.imul(eA,eW)|0,F=F+Math.imul(eA,eZ)|0,x=x+Math.imul(e_,eX)|0,_=(_=_+Math.imul(e_,eK)|0)+Math.imul(ew,eX)|0,F=F+Math.imul(ew,eK)|0,x=x+Math.imul(ey,e$)|0,_=(_=_+Math.imul(ey,eQ)|0)+Math.imul(ev,e$)|0,F=F+Math.imul(ev,eQ)|0,x=x+Math.imul(ep,e1)|0,_=(_=_+Math.imul(ep,e2)|0)+Math.imul(eg,e1)|0,F=F+Math.imul(eg,e2)|0;var tc=(Z+(x=x+Math.imul(ef,e5)|0)|0)+((8191&(_=(_=_+Math.imul(ef,e4)|0)+Math.imul(eh,e5)|0))<<13)|0;Z=((F=F+Math.imul(eh,e4)|0)+(_>>>13)|0)+(tc>>>26)|0,tc&=67108863,x=Math.imul(eM,eW),_=(_=Math.imul(eM,eZ))+Math.imul(eC,eW)|0,F=Math.imul(eC,eZ),x=x+Math.imul(ek,eX)|0,_=(_=_+Math.imul(ek,eK)|0)+Math.imul(eA,eX)|0,F=F+Math.imul(eA,eK)|0,x=x+Math.imul(e_,e$)|0,_=(_=_+Math.imul(e_,eQ)|0)+Math.imul(ew,e$)|0,F=F+Math.imul(ew,eQ)|0,x=x+Math.imul(ey,e1)|0,_=(_=_+Math.imul(ey,e2)|0)+Math.imul(ev,e1)|0,F=F+Math.imul(ev,e2)|0;var tu=(Z+(x=x+Math.imul(ep,e5)|0)|0)+((8191&(_=(_=_+Math.imul(ep,e4)|0)+Math.imul(eg,e5)|0))<<13)|0;Z=((F=F+Math.imul(eg,e4)|0)+(_>>>13)|0)+(tu>>>26)|0,tu&=67108863,x=Math.imul(eM,eX),_=(_=Math.imul(eM,eK))+Math.imul(eC,eX)|0,F=Math.imul(eC,eK),x=x+Math.imul(ek,e$)|0,_=(_=_+Math.imul(ek,eQ)|0)+Math.imul(eA,e$)|0,F=F+Math.imul(eA,eQ)|0,x=x+Math.imul(e_,e1)|0,_=(_=_+Math.imul(e_,e2)|0)+Math.imul(ew,e1)|0,F=F+Math.imul(ew,e2)|0;var tf=(Z+(x=x+Math.imul(ey,e5)|0)|0)+((8191&(_=(_=_+Math.imul(ey,e4)|0)+Math.imul(ev,e5)|0))<<13)|0;Z=((F=F+Math.imul(ev,e4)|0)+(_>>>13)|0)+(tf>>>26)|0,tf&=67108863,x=Math.imul(eM,e$),_=(_=Math.imul(eM,eQ))+Math.imul(eC,e$)|0,F=Math.imul(eC,eQ),x=x+Math.imul(ek,e1)|0,_=(_=_+Math.imul(ek,e2)|0)+Math.imul(eA,e1)|0,F=F+Math.imul(eA,e2)|0;var th=(Z+(x=x+Math.imul(e_,e5)|0)|0)+((8191&(_=(_=_+Math.imul(e_,e4)|0)+Math.imul(ew,e5)|0))<<13)|0;Z=((F=F+Math.imul(ew,e4)|0)+(_>>>13)|0)+(th>>>26)|0,th&=67108863,x=Math.imul(eM,e1),_=(_=Math.imul(eM,e2))+Math.imul(eC,e1)|0,F=Math.imul(eC,e2);var td=(Z+(x=x+Math.imul(ek,e5)|0)|0)+((8191&(_=(_=_+Math.imul(ek,e4)|0)+Math.imul(eA,e5)|0))<<13)|0;Z=((F=F+Math.imul(eA,e4)|0)+(_>>>13)|0)+(td>>>26)|0,td&=67108863;var tp=(Z+(x=Math.imul(eM,e5))|0)+((8191&(_=(_=Math.imul(eM,e4))+Math.imul(eC,e5)|0))<<13)|0;return Z=((F=Math.imul(eC,e4))+(_>>>13)|0)+(tp>>>26)|0,tp&=67108863,G[0]=e6,G[1]=e8,G[2]=e7,G[3]=e9,G[4]=te,G[5]=tt,G[6]=tr,G[7]=tn,G[8]=ti,G[9]=ta,G[10]=to,G[11]=ts,G[12]=tl,G[13]=tc,G[14]=tu,G[15]=tf,G[16]=th,G[17]=td,G[18]=tp,0!==Z&&(G[19]=Z,s.length++),s};function jumboMulTo(i,o,s){return new FFTM().mulp(i,o,s)}function FFTM(i,o){this.x=i,this.y=o}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(i,o){var s=this.length+i.length;return 10===this.length&&10===i.length?comb10MulTo(this,i,o):s<63?smallMulTo(this,i,o):s<1024?function(i,o,s){s.negative=o.negative^i.negative,s.length=i.length+o.length;for(var x=0,_=0,F=0;F<s.length-1;F++){var N=_;_=0;for(var j=67108863&x,G=Math.min(F,o.length-1),Z=Math.max(0,F-i.length+1);Z<=G;Z++){var X=F-Z,J=(0|i.words[X])*(0|o.words[Z]),$=67108863&J;N=N+(J/67108864|0)|0,j=67108863&($=$+j|0),_+=(N=N+($>>>26)|0)>>>26,N&=67108863}s.words[F]=j,x=N,N=_}return 0!==x?s.words[F]=x:s.length--,s.strip()}(this,i,o):jumboMulTo(this,i,o)},FFTM.prototype.makeRBT=function(i){for(var o=Array(i),s=BN.prototype._countBits(i)-1,x=0;x<i;x++)o[x]=this.revBin(x,s,i);return o},FFTM.prototype.revBin=function(i,o,s){if(0===i||i===s-1)return i;for(var x=0,_=0;_<o;_++)x|=(1&i)<<o-_-1,i>>=1;return x},FFTM.prototype.permute=function(i,o,s,x,_,F){for(var N=0;N<F;N++)x[N]=o[i[N]],_[N]=s[i[N]]},FFTM.prototype.transform=function(i,o,s,x,_,F){this.permute(F,i,o,s,x,_);for(var N=1;N<_;N<<=1)for(var j=N<<1,G=Math.cos(2*Math.PI/j),Z=Math.sin(2*Math.PI/j),X=0;X<_;X+=j)for(var J=G,$=Z,ee=0;ee<N;ee++){var et=s[X+ee],er=x[X+ee],en=s[X+ee+N],ei=x[X+ee+N],eo=J*en-$*ei;ei=J*ei+$*en,en=eo,s[X+ee]=et+en,x[X+ee]=er+ei,s[X+ee+N]=et-en,x[X+ee+N]=er-ei,ee!==j&&(eo=G*J-Z*$,$=G*$+Z*J,J=eo)}},FFTM.prototype.guessLen13b=function(i,o){var s=1|Math.max(o,i),x=1&s,_=0;for(s=s/2|0;s;s>>>=1)_++;return 1<<_+1+x},FFTM.prototype.conjugate=function(i,o,s){if(!(s<=1))for(var x=0;x<s/2;x++){var _=i[x];i[x]=i[s-x-1],i[s-x-1]=_,_=o[x],o[x]=-o[s-x-1],o[s-x-1]=-_}},FFTM.prototype.normalize13b=function(i,o){for(var s=0,x=0;x<o/2;x++){var _=8192*Math.round(i[2*x+1]/o)+Math.round(i[2*x]/o)+s;i[x]=67108863&_,s=_<67108864?0:_/67108864|0}return i},FFTM.prototype.convert13b=function(i,o,s,x){for(var _=0,F=0;F<o;F++)_+=0|i[F],s[2*F]=8191&_,_>>>=13,s[2*F+1]=8191&_,_>>>=13;for(F=2*o;F<x;++F)s[F]=0;assert(0===_),assert((-8192&_)==0)},FFTM.prototype.stub=function(i){for(var o=Array(i),s=0;s<i;s++)o[s]=0;return o},FFTM.prototype.mulp=function(i,o,s){var x=2*this.guessLen13b(i.length,o.length),_=this.makeRBT(x),F=this.stub(x),N=Array(x),j=Array(x),G=Array(x),Z=Array(x),X=Array(x),J=Array(x),$=s.words;$.length=x,this.convert13b(i.words,i.length,N,x),this.convert13b(o.words,o.length,Z,x),this.transform(N,F,j,G,x,_),this.transform(Z,F,X,J,x,_);for(var ee=0;ee<x;ee++){var et=j[ee]*X[ee]-G[ee]*J[ee];G[ee]=j[ee]*J[ee]+G[ee]*X[ee],j[ee]=et}return this.conjugate(j,G,x),this.transform(j,G,$,F,x,_),this.conjugate($,F,x),this.normalize13b($,x),s.negative=i.negative^o.negative,s.length=i.length+o.length,s.strip()},BN.prototype.mul=function(i){var o=new BN(null);return o.words=Array(this.length+i.length),this.mulTo(i,o)},BN.prototype.mulf=function(i){var o=new BN(null);return o.words=Array(this.length+i.length),jumboMulTo(this,i,o)},BN.prototype.imul=function(i){return this.clone().mulTo(i,this)},BN.prototype.imuln=function(i){assert("number"==typeof i),assert(i<67108864);for(var o=0,s=0;s<this.length;s++){var x=(0|this.words[s])*i,_=(67108863&x)+(67108863&o);o>>=26,o+=(x/67108864|0)+(_>>>26),this.words[s]=67108863&_}return 0!==o&&(this.words[s]=o,this.length++),this},BN.prototype.muln=function(i){return this.clone().imuln(i)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(i){var o=function(i){for(var o=Array(i.bitLength()),s=0;s<o.length;s++){var x=s/26|0,_=s%26;o[s]=(i.words[x]&1<<_)>>>_}return o}(i);if(0===o.length)return new BN(1);for(var s=this,x=0;x<o.length&&0===o[x];x++,s=s.sqr());if(++x<o.length)for(var _=s.sqr();x<o.length;x++,_=_.sqr())0!==o[x]&&(s=s.mul(_));return s},BN.prototype.iushln=function(i){assert("number"==typeof i&&i>=0);var o,s=i%26,x=(i-s)/26,_=67108863>>>26-s<<26-s;if(0!==s){var F=0;for(o=0;o<this.length;o++){var N=this.words[o]&_,j=(0|this.words[o])-N<<s;this.words[o]=j|F,F=N>>>26-s}F&&(this.words[o]=F,this.length++)}if(0!==x){for(o=this.length-1;o>=0;o--)this.words[o+x]=this.words[o];for(o=0;o<x;o++)this.words[o]=0;this.length+=x}return this.strip()},BN.prototype.ishln=function(i){return assert(0===this.negative),this.iushln(i)},BN.prototype.iushrn=function(i,o,s){assert("number"==typeof i&&i>=0),x=o?(o-o%26)/26:0;var x,_=i%26,F=Math.min((i-_)/26,this.length),N=67108863^67108863>>>_<<_;if(x-=F,x=Math.max(0,x),s){for(var j=0;j<F;j++)s.words[j]=this.words[j];s.length=F}if(0===F);else if(this.length>F)for(this.length-=F,j=0;j<this.length;j++)this.words[j]=this.words[j+F];else this.words[0]=0,this.length=1;var G=0;for(j=this.length-1;j>=0&&(0!==G||j>=x);j--){var Z=0|this.words[j];this.words[j]=G<<26-_|Z>>>_,G=Z&N}return s&&0!==G&&(s.words[s.length++]=G),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function(i,o,s){return assert(0===this.negative),this.iushrn(i,o,s)},BN.prototype.shln=function(i){return this.clone().ishln(i)},BN.prototype.ushln=function(i){return this.clone().iushln(i)},BN.prototype.shrn=function(i){return this.clone().ishrn(i)},BN.prototype.ushrn=function(i){return this.clone().iushrn(i)},BN.prototype.testn=function(i){assert("number"==typeof i&&i>=0);var o=i%26,s=(i-o)/26;return!(this.length<=s)&&!!(this.words[s]&1<<o)},BN.prototype.imaskn=function(i){assert("number"==typeof i&&i>=0);var o=i%26,s=(i-o)/26;return(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)?this:(0!==o&&s++,this.length=Math.min(s,this.length),0!==o&&(this.words[this.length-1]&=67108863^67108863>>>o<<o),this.strip())},BN.prototype.maskn=function(i){return this.clone().imaskn(i)},BN.prototype.iaddn=function(i){return(assert("number"==typeof i),assert(i<67108864),i<0)?this.isubn(-i):0!==this.negative?(1===this.length&&(0|this.words[0])<i?(this.words[0]=i-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(i),this.negative=1),this):this._iaddn(i)},BN.prototype._iaddn=function(i){this.words[0]+=i;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},BN.prototype.isubn=function(i){if(assert("number"==typeof i),assert(i<67108864),i<0)return this.iaddn(-i);if(0!==this.negative)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this.strip()},BN.prototype.addn=function(i){return this.clone().iaddn(i)},BN.prototype.subn=function(i){return this.clone().isubn(i)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(i,o,s){var x,_,F=i.length+s;this._expand(F);var N=0;for(x=0;x<i.length;x++){_=(0|this.words[x+s])+N;var j=(0|i.words[x])*o;_-=67108863&j,N=(_>>26)-(j/67108864|0),this.words[x+s]=67108863&_}for(;x<this.length-s;x++)N=(_=(0|this.words[x+s])+N)>>26,this.words[x+s]=67108863&_;if(0===N)return this.strip();for(assert(-1===N),N=0,x=0;x<this.length;x++)N=(_=-(0|this.words[x])+N)>>26,this.words[x]=67108863&_;return this.negative=1,this.strip()},BN.prototype._wordDiv=function(i,o){var s,x=this.length-i.length,_=this.clone(),F=i,N=0|F.words[F.length-1];0!=(x=26-this._countBits(N))&&(F=F.ushln(x),_.iushln(x),N=0|F.words[F.length-1]);var j=_.length-F.length;if("mod"!==o){(s=new BN(null)).length=j+1,s.words=Array(s.length);for(var G=0;G<s.length;G++)s.words[G]=0}var Z=_.clone()._ishlnsubmul(F,1,j);0===Z.negative&&(_=Z,s&&(s.words[j]=1));for(var X=j-1;X>=0;X--){var J=(0|_.words[F.length+X])*67108864+(0|_.words[F.length+X-1]);for(J=Math.min(J/N|0,67108863),_._ishlnsubmul(F,J,X);0!==_.negative;)J--,_.negative=0,_._ishlnsubmul(F,1,X),_.isZero()||(_.negative^=1);s&&(s.words[X]=J)}return s&&s.strip(),_.strip(),"div"!==o&&0!==x&&_.iushrn(x),{div:s||null,mod:_}},BN.prototype.divmod=function(i,o,s){var x,_,F;return(assert(!i.isZero()),this.isZero())?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===i.negative?(F=this.neg().divmod(i,o),"mod"!==o&&(x=F.div.neg()),"div"!==o&&(_=F.mod.neg(),s&&0!==_.negative&&_.iadd(i)),{div:x,mod:_}):0===this.negative&&0!==i.negative?(F=this.divmod(i.neg(),o),"mod"!==o&&(x=F.div.neg()),{div:x,mod:F.mod}):(this.negative&i.negative)!=0?(F=this.neg().divmod(i.neg(),o),"div"!==o&&(_=F.mod.neg(),s&&0!==_.negative&&_.isub(i)),{div:F.div,mod:_}):i.length>this.length||0>this.cmp(i)?{div:new BN(0),mod:this}:1===i.length?"div"===o?{div:this.divn(i.words[0]),mod:null}:"mod"===o?{div:null,mod:new BN(this.modn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new BN(this.modn(i.words[0]))}:this._wordDiv(i,o)},BN.prototype.div=function(i){return this.divmod(i,"div",!1).div},BN.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},BN.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},BN.prototype.divRound=function(i){var o=this.divmod(i);if(o.mod.isZero())return o.div;var s=0!==o.div.negative?o.mod.isub(i):o.mod,x=i.ushrn(1),_=i.andln(1),F=s.cmp(x);return F<0||1===_&&0===F?o.div:0!==o.div.negative?o.div.isubn(1):o.div.iaddn(1)},BN.prototype.modn=function(i){assert(i<=67108863);for(var o=67108864%i,s=0,x=this.length-1;x>=0;x--)s=(o*s+(0|this.words[x]))%i;return s},BN.prototype.idivn=function(i){assert(i<=67108863);for(var o=0,s=this.length-1;s>=0;s--){var x=(0|this.words[s])+67108864*o;this.words[s]=x/i|0,o=x%i}return this.strip()},BN.prototype.divn=function(i){return this.clone().idivn(i)},BN.prototype.egcd=function(i){assert(0===i.negative),assert(!i.isZero());var o=this,s=i.clone();o=0!==o.negative?o.umod(i):o.clone();for(var x=new BN(1),_=new BN(0),F=new BN(0),N=new BN(1),j=0;o.isEven()&&s.isEven();)o.iushrn(1),s.iushrn(1),++j;for(var G=s.clone(),Z=o.clone();!o.isZero();){for(var X=0,J=1;(o.words[0]&J)==0&&X<26;++X,J<<=1);if(X>0)for(o.iushrn(X);X-- >0;)(x.isOdd()||_.isOdd())&&(x.iadd(G),_.isub(Z)),x.iushrn(1),_.iushrn(1);for(var $=0,ee=1;(s.words[0]&ee)==0&&$<26;++$,ee<<=1);if($>0)for(s.iushrn($);$-- >0;)(F.isOdd()||N.isOdd())&&(F.iadd(G),N.isub(Z)),F.iushrn(1),N.iushrn(1);o.cmp(s)>=0?(o.isub(s),x.isub(F),_.isub(N)):(s.isub(o),F.isub(x),N.isub(_))}return{a:F,b:N,gcd:s.iushln(j)}},BN.prototype._invmp=function(i){assert(0===i.negative),assert(!i.isZero());var o,s=this,x=i.clone();s=0!==s.negative?s.umod(i):s.clone();for(var _=new BN(1),F=new BN(0),N=x.clone();s.cmpn(1)>0&&x.cmpn(1)>0;){for(var j=0,G=1;(s.words[0]&G)==0&&j<26;++j,G<<=1);if(j>0)for(s.iushrn(j);j-- >0;)_.isOdd()&&_.iadd(N),_.iushrn(1);for(var Z=0,X=1;(x.words[0]&X)==0&&Z<26;++Z,X<<=1);if(Z>0)for(x.iushrn(Z);Z-- >0;)F.isOdd()&&F.iadd(N),F.iushrn(1);s.cmp(x)>=0?(s.isub(x),_.isub(F)):(x.isub(s),F.isub(_))}return 0>(o=0===s.cmpn(1)?_:F).cmpn(0)&&o.iadd(i),o},BN.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),s=i.clone();o.negative=0,s.negative=0;for(var x=0;o.isEven()&&s.isEven();x++)o.iushrn(1),s.iushrn(1);for(;;){for(;o.isEven();)o.iushrn(1);for(;s.isEven();)s.iushrn(1);var _=o.cmp(s);if(_<0){var F=o;o=s,s=F}else if(0===_||0===s.cmpn(1))break;o.isub(s)}return s.iushln(x)},BN.prototype.invm=function(i){return this.egcd(i).a.umod(i)},BN.prototype.isEven=function(){return(1&this.words[0])==0},BN.prototype.isOdd=function(){return(1&this.words[0])==1},BN.prototype.andln=function(i){return this.words[0]&i},BN.prototype.bincn=function(i){assert("number"==typeof i);var o=i%26,s=(i-o)/26,x=1<<o;if(this.length<=s)return this._expand(s+1),this.words[s]|=x,this;for(var _=x,F=s;0!==_&&F<this.length;F++){var N=0|this.words[F];N+=_,_=N>>>26,N&=67108863,this.words[F]=N}return 0!==_&&(this.words[F]=_,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(i){var o,s=i<0;if(0!==this.negative&&!s)return -1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)o=1;else{s&&(i=-i),assert(i<=67108863,"Number is too big");var x=0|this.words[0];o=x===i?0:x<i?-1:1}return 0!==this.negative?0|-o:o},BN.prototype.cmp=function(i){if(0!==this.negative&&0===i.negative)return -1;if(0===this.negative&&0!==i.negative)return 1;var o=this.ucmp(i);return 0!==this.negative?0|-o:o},BN.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return -1;for(var o=0,s=this.length-1;s>=0;s--){var x=0|this.words[s],_=0|i.words[s];if(x!==_){x<_?o=-1:x>_&&(o=1);break}}return o},BN.prototype.gtn=function(i){return 1===this.cmpn(i)},BN.prototype.gt=function(i){return 1===this.cmp(i)},BN.prototype.gten=function(i){return this.cmpn(i)>=0},BN.prototype.gte=function(i){return this.cmp(i)>=0},BN.prototype.ltn=function(i){return -1===this.cmpn(i)},BN.prototype.lt=function(i){return -1===this.cmp(i)},BN.prototype.lten=function(i){return 0>=this.cmpn(i)},BN.prototype.lte=function(i){return 0>=this.cmp(i)},BN.prototype.eqn=function(i){return 0===this.cmpn(i)},BN.prototype.eq=function(i){return 0===this.cmp(i)},BN.red=function(i){return new Red(i)},BN.prototype.toRed=function(i){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),i.convertTo(this)._forceRed(i)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(i){return this.red=i,this},BN.prototype.forceRed=function(i){return assert(!this.red,"Already a number in reduction context"),this._forceRed(i)},BN.prototype.redAdd=function(i){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},BN.prototype.redIAdd=function(i){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},BN.prototype.redSub=function(i){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},BN.prototype.redISub=function(i){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},BN.prototype.redShl=function(i){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},BN.prototype.redMul=function(i){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},BN.prototype.redIMul=function(i){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(i){return assert(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var j={k256:null,p224:null,p192:null,p25519:null};function MPrime(i,o){this.name=i,this.p=new BN(o,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(i){if("string"==typeof i){var o=BN._prime(i);this.m=o.p,this.prime=o}else assert(i.gtn(1),"modulus must be greater than 1"),this.m=i,this.prime=null}function Mont(i){Red.call(this,i),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var i=new BN(null);return i.words=Array(Math.ceil(this.n/13)),i},MPrime.prototype.ireduce=function(i){var o,s=i;do this.split(s,this.tmp),o=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength();while(o>this.n);var x=o<this.n?-1:s.ucmp(this.p);return 0===x?(s.words[0]=0,s.length=1):x>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},MPrime.prototype.split=function(i,o){i.iushrn(this.n,0,o)},MPrime.prototype.imulK=function(i){return i.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(i,o){for(var s=Math.min(i.length,9),x=0;x<s;x++)o.words[x]=i.words[x];if(o.length=s,i.length<=9){i.words[0]=0,i.length=1;return}var _=i.words[9];for(x=10,o.words[o.length++]=4194303&_;x<i.length;x++){var F=0|i.words[x];i.words[x-10]=(4194303&F)<<4|_>>>22,_=F}_>>>=22,i.words[x-10]=_,0===_&&i.length>10?i.length-=10:i.length-=9},K256.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var o=0,s=0;s<i.length;s++){var x=0|i.words[s];o+=977*x,i.words[s]=67108863&o,o=64*x+(o/67108864|0)}return 0===i.words[i.length-1]&&(i.length--,0===i.words[i.length-1]&&i.length--),i},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(i){for(var o=0,s=0;s<i.length;s++){var x=(0|i.words[s])*19+o,_=67108863&x;x>>>=26,i.words[s]=_,o=x}return 0!==o&&(i.words[i.length++]=o),i},BN._prime=function(i){var o;if(j[i])return j[i];if("k256"===i)o=new K256;else if("p224"===i)o=new P224;else if("p192"===i)o=new P192;else if("p25519"===i)o=new P25519;else throw Error("Unknown prime "+i);return j[i]=o,o},Red.prototype._verify1=function(i){assert(0===i.negative,"red works only with positives"),assert(i.red,"red works only with red numbers")},Red.prototype._verify2=function(i,o){assert((i.negative|o.negative)==0,"red works only with positives"),assert(i.red&&i.red===o.red,"red works only with red numbers")},Red.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):i.umod(this.m)._forceRed(this)},Red.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},Red.prototype.add=function(i,o){this._verify2(i,o);var s=i.add(o);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Red.prototype.iadd=function(i,o){this._verify2(i,o);var s=i.iadd(o);return s.cmp(this.m)>=0&&s.isub(this.m),s},Red.prototype.sub=function(i,o){this._verify2(i,o);var s=i.sub(o);return 0>s.cmpn(0)&&s.iadd(this.m),s._forceRed(this)},Red.prototype.isub=function(i,o){this._verify2(i,o);var s=i.isub(o);return 0>s.cmpn(0)&&s.iadd(this.m),s},Red.prototype.shl=function(i,o){return this._verify1(i),this.imod(i.ushln(o))},Red.prototype.imul=function(i,o){return this._verify2(i,o),this.imod(i.imul(o))},Red.prototype.mul=function(i,o){return this._verify2(i,o),this.imod(i.mul(o))},Red.prototype.isqr=function(i){return this.imul(i,i.clone())},Red.prototype.sqr=function(i){return this.mul(i,i)},Red.prototype.sqrt=function(i){if(i.isZero())return i.clone();var o=this.m.andln(3);if(assert(o%2==1),3===o){var s=this.m.add(new BN(1)).iushrn(2);return this.pow(i,s)}for(var x=this.m.subn(1),_=0;!x.isZero()&&0===x.andln(1);)_++,x.iushrn(1);assert(!x.isZero());var F=new BN(1).toRed(this),N=F.redNeg(),j=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new BN(2*G*G).toRed(this);0!==this.pow(G,j).cmp(N);)G.redIAdd(N);for(var Z=this.pow(G,x),X=this.pow(i,x.addn(1).iushrn(1)),J=this.pow(i,x),$=_;0!==J.cmp(F);){for(var ee=J,et=0;0!==ee.cmp(F);et++)ee=ee.redSqr();assert(et<$);var er=this.pow(Z,new BN(1).iushln($-et-1));X=X.redMul(er),Z=er.redSqr(),J=J.redMul(Z),$=et}return X},Red.prototype.invm=function(i){var o=i._invmp(this.m);return 0!==o.negative?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},Red.prototype.pow=function(i,o){if(o.isZero())return new BN(1).toRed(this);if(0===o.cmpn(1))return i.clone();var s=Array(16);s[0]=new BN(1).toRed(this),s[1]=i;for(var x=2;x<s.length;x++)s[x]=this.mul(s[x-1],i);var _=s[0],F=0,N=0,j=o.bitLength()%26;for(0===j&&(j=26),x=o.length-1;x>=0;x--){for(var G=o.words[x],Z=j-1;Z>=0;Z--){var X=G>>Z&1;if(_!==s[0]&&(_=this.sqr(_)),0===X&&0===F){N=0;continue}F<<=1,F|=X,(4==++N||0===x&&0===Z)&&(_=this.mul(_,s[F]),N=0,F=0)}j=26}return _},Red.prototype.convertTo=function(i){var o=i.umod(this.m);return o===i?o.clone():o},Red.prototype.convertFrom=function(i){var o=i.clone();return o.red=null,o},BN.mont=function(i){return new Mont(i)},inherits(Mont,Red),Mont.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},Mont.prototype.convertFrom=function(i){var o=this.imod(i.mul(this.rinv));return o.red=null,o},Mont.prototype.imul=function(i,o){if(i.isZero()||o.isZero())return i.words[0]=0,i.length=1,i;var s=i.imul(o),x=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=s.isub(x).iushrn(this.shift),F=_;return _.cmp(this.m)>=0?F=_.isub(this.m):0>_.cmpn(0)&&(F=_.iadd(this.m)),F._forceRed(this)},Mont.prototype.mul=function(i,o){if(i.isZero()||o.isZero())return new BN(0)._forceRed(this);var s=i.mul(o),x=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=s.isub(x).iushrn(this.shift),F=_;return _.cmp(this.m)>=0?F=_.isub(this.m):0>_.cmpn(0)&&(F=_.iadd(this.m)),F._forceRed(this)},Mont.prototype.invm=function(i){return this.imod(i._invmp(this.m).mul(this.r2))._forceRed(this)}}(i=s.nmd(i),this)},2692:function(i){"use strict";i.exports=function(i){var o,s,x,_=i.length,F=0;for(o=0;o<_;++o)F+=i[o].length;var N=Array(F),j=0;for(o=0;o<_;++o){var G=i[o],Z=G.length;for(s=0;s<Z;++s){var X=N[j++]=Array(Z-1),J=0;for(x=0;x<Z;++x)x!==s&&(X[J++]=G[x]);if(1&s){var $=X[1];X[1]=X[0],X[0]=$}}}return N}},2569:function(i,o,s){"use strict";i.exports=function(i,o,s){switch(arguments.length){case 1:return x=[],boxIntersect(i,i,appendItem,!0),x;case 2:if("function"==typeof o)return boxIntersect(i,i,o,!0);return x=[],boxIntersect(i,o,appendItem,!1),x;case 3:return boxIntersect(i,o,s,!1);default:throw Error("box-intersect: Invalid arguments")}};var x,_=s(5306),F=s(1390),N=s(2337);function convertBoxes(i,o,s,x){for(var _=0,F=0,N=0,j=i.length;N<j;++N){var G=i[N];if(!function(i,o){for(var s=0;s<i;++s)if(!(o[s]<=o[s+i]))return!0;return!1}(o,G)){for(var Z=0;Z<2*o;++Z)s[_++]=G[Z];x[F++]=N}}return F}function boxIntersect(i,o,s,x){var j,G=i.length,Z=o.length;if(!(G<=0)&&!(Z<=0)){var X=i[0].length>>>1;if(!(X<=0)){var J=_.mallocDouble(2*X*G),$=_.mallocInt32(G);if((G=convertBoxes(i,X,J,$))>0){if(1===X&&x)F.init(G),j=F.sweepComplete(X,s,0,G,J,$,0,G,J,$);else{var ee=_.mallocDouble(2*X*Z),et=_.mallocInt32(Z);(Z=convertBoxes(o,X,ee,et))>0&&(F.init(G+Z),j=1===X?F.sweepBipartite(X,s,0,G,J,$,0,Z,ee,et):N(X,s,x,G,J,$,Z,ee,et),_.free(ee),_.free(et))}_.free(J),_.free($)}return j}}}function appendItem(i,o){x.push([i,o])}},7333:function(i,o){"use strict";function bruteForcePlanner(i){return i?function(i,o,s,x,_,F,N,j,G,Z,X){return _-x>G-j?function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=x,ee=J*x;$<_;++$,ee+=J){var et=F[o+ee],er=F[o+ee+i],en=N[$];n:for(var ei=j,eo=J*j;ei<G;++ei,eo+=J){var es=Z[o+eo],el=Z[o+eo+i],ec=X[ei];if(!(el<et)&&!(er<es)){for(var eu=o+1;eu<i;++eu){var ef=F[eu+ee],eh=F[eu+i+ee],ed=Z[eu+eo],ep=Z[eu+i+eo];if(eh<ed||ep<ef)continue n}var eg=s(en,ec);if(void 0!==eg)return eg}}}}(i,o,s,x,_,F,N,j,G,Z,X):function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=j,ee=J*j;$<G;++$,ee+=J){var et=Z[o+ee],er=Z[o+ee+i],en=X[$];n:for(var ei=x,eo=J*x;ei<_;++ei,eo+=J){var es=F[o+eo],el=F[o+eo+i],ec=N[ei];if(!(er<es)&&!(el<et)){for(var eu=o+1;eu<i;++eu){var ef=F[eu+eo],eh=F[eu+i+eo],ed=Z[eu+ee],ep=Z[eu+i+ee];if(eh<ed||ep<ef)continue n}var eg=s(ec,en);if(void 0!==eg)return eg}}}}(i,o,s,x,_,F,N,j,G,Z,X)}:function(i,o,s,x,_,F,N,j,G,Z,X,J){return F-_>Z-G?x?function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=x,ee=J*x;$<_;++$,ee+=J){var et=F[o+ee],er=F[o+ee+i],en=N[$];n:for(var ei=j,eo=J*j;ei<G;++ei,eo+=J){var es=Z[o+eo],el=X[ei];if(!(es<=et)&&!(er<es)){for(var ec=o+1;ec<i;++ec){var eu=F[ec+ee],ef=F[ec+i+ee],eh=Z[ec+eo],ed=Z[ec+i+eo];if(ef<eh||ed<eu)continue n}var ep=s(el,en);if(void 0!==ep)return ep}}}}(i,o,s,_,F,N,j,G,Z,X,J):function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=x,ee=J*x;$<_;++$,ee+=J){var et=F[o+ee],er=F[o+ee+i],en=N[$];n:for(var ei=j,eo=J*j;ei<G;++ei,eo+=J){var es=Z[o+eo],el=X[ei];if(!(es<et)&&!(er<es)){for(var ec=o+1;ec<i;++ec){var eu=F[ec+ee],ef=F[ec+i+ee],eh=Z[ec+eo],ed=Z[ec+i+eo];if(ef<eh||ed<eu)continue n}var ep=s(en,el);if(void 0!==ep)return ep}}}}(i,o,s,_,F,N,j,G,Z,X,J):x?function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=j,ee=J*j;$<G;++$,ee+=J){var et=Z[o+ee],er=X[$];n:for(var en=x,ei=J*x;en<_;++en,ei+=J){var eo=F[o+ei],es=F[o+ei+i],el=N[en];if(!(et<=eo)&&!(es<et)){for(var ec=o+1;ec<i;++ec){var eu=F[ec+ei],ef=F[ec+i+ei],eh=Z[ec+ee],ed=Z[ec+i+ee];if(ef<eh||ed<eu)continue n}var ep=s(er,el);if(void 0!==ep)return ep}}}}(i,o,s,_,F,N,j,G,Z,X,J):function(i,o,s,x,_,F,N,j,G,Z,X){for(var J=2*i,$=j,ee=J*j;$<G;++$,ee+=J){var et=Z[o+ee],er=X[$];n:for(var en=x,ei=J*x;en<_;++en,ei+=J){var eo=F[o+ei],es=F[o+ei+i],el=N[en];if(!(et<eo)&&!(es<et)){for(var ec=o+1;ec<i;++ec){var eu=F[ec+ei],ef=F[ec+i+ei],eh=Z[ec+ee],ed=Z[ec+i+ee];if(ef<eh||ed<eu)continue n}var ep=s(el,er);if(void 0!==ep)return ep}}}}(i,o,s,_,F,N,j,G,Z,X,J)}}o.partial=bruteForcePlanner(!1),o.full=bruteForcePlanner(!0)},2337:function(i,o,s){"use strict";i.exports=function(i,o,s,F,X,es,el,ec,eu){eO=F+el,eD=8*_.log2(eO+1)*(i+1)|0,eR=_.nextPow2(6*eD),ei.length<eR&&(x.free(ei),ei=x.mallocInt32(eR)),eB=_.nextPow2(2*eD),eo.length<eB&&(x.free(eo),eo=x.mallocDouble(eB));var ef=0,eh=2*i;for(iterPush(ef++,0,0,F,0,el,s?16:0,-1/0,1/0),s||iterPush(ef++,0,0,el,0,F,1,-1/0,1/0);ef>0;){var ed=6*(ef-=1),ep=ei[ed],eg=ei[ed+1],em=ei[ed+2],ey=ei[ed+3],ev=ei[ed+4],ex=ei[ed+5],e_=2*ef,ew=eo[e_],eT=eo[e_+1],ek=1&ex,eA=!!(16&ex),eS=X,eM=es,eC=ec,eE=eu;if(ek&&(eS=ec,eM=eu,eC=X,eE=es),!(2&ex&&(em=ee(i,ep,eg,em,eS,eM,eT),eg>=em)||4&ex&&(eg=et(i,ep,eg,em,eS,eM,ew))>=em)){var eL=em-eg,eP=ev-ey;if(eA){if(i*eL*(eL+eP)<4194304){if(void 0!==(ez=G.scanComplete(i,ep,o,eg,em,eS,eM,ey,ev,eC,eE)))return ez;continue}}else{if(i*Math.min(eL,eP)<128){if(void 0!==(ez=N(i,ep,o,ek,eg,em,eS,eM,ey,ev,eC,eE)))return ez;continue}if(i*eL*eP<4194304){if(void 0!==(ez=G.scanBipartite(i,ep,o,ek,eg,em,eS,eM,ey,ev,eC,eE)))return ez;continue}}var eI=J(i,ep,eg,em,eS,eM,ew,eT);if(eg<eI){if(i*(eI-eg)<128){if(void 0!==(ez=j(i,ep+1,o,eg,eI,eS,eM,ey,ev,eC,eE)))return ez}else if(ep===i-2){if(void 0!==(ez=ek?G.sweepBipartite(i,o,ey,ev,eC,eE,eg,eI,eS,eM):G.sweepBipartite(i,o,eg,eI,eS,eM,ey,ev,eC,eE)))return ez}else iterPush(ef++,ep+1,eg,eI,ey,ev,ek,-1/0,1/0),iterPush(ef++,ep+1,ey,ev,eg,eI,1^ek,-1/0,1/0)}if(eI<em){var eO,eD,eR,eB,ez,eF,eN=Z(i,ep,ey,ev,eC,eE),ej=eC[eh*eN+ep],eU=$(i,ep,eN,ev,eC,eE,ej);if(eU<ev&&iterPush(ef++,ep,eI,em,eU,ev,(4|ek)+(eA?16:0),ej,eT),ey<eN&&iterPush(ef++,ep,eI,em,ey,eN,(2|ek)+(eA?16:0),ew,ej),eN+1===eU){if(void 0!==(ez=eA?function(i,o,s,x,_,F,N,j,G,Z){var X=2*i,J=j*X,$=G[J+o];i:for(var ee=x,et=x*X;ee<_;++ee,et+=X){var er=N[ee];if(er!==Z){var en=F[et+o],ei=F[et+o+i];if(!($<en)&&!(ei<$)){for(var eo=o+1;eo<i;++eo){var en=F[et+eo],ei=F[et+eo+i],es=G[J+eo],el=G[J+eo+i];if(ei<es||el<en)continue i}var ec=s(er,Z);if(void 0!==ec)return ec}}}}(i,ep,o,eI,em,eS,eM,eN,eC,eE[eN]):function(i,o,s,x,_,F,N,j,G,Z,X){var J=2*i,$=G*J,ee=Z[$+o];i:for(var et=_,er=_*J;et<F;++et,er+=J){var en,ei=N[er+o],eo=N[er+o+i];if(!(ee<ei)&&!(eo<ee)&&(!x||ee!==ei)){for(var es=j[et],el=o+1;el<i;++el){var ei=N[er+el],eo=N[er+el+i],ec=Z[$+el],eu=Z[$+el+i];if(eo<ec||eu<ei)continue i}if(void 0!==(en=x?s(X,es):s(es,X)))return en}}}(i,ep,o,ek,eI,em,eS,eM,eN,eC,eE[eN])))return ez}else if(eN<eU){if(eA){if(eF=er(i,ep,eI,em,eS,eM,ej),eI<eF){var eV=$(i,ep,eI,eF,eS,eM,ej);if(ep===i-2){if(eI<eV&&void 0!==(ez=G.sweepComplete(i,o,eI,eV,eS,eM,eN,eU,eC,eE))||eV<eF&&void 0!==(ez=G.sweepBipartite(i,o,eV,eF,eS,eM,eN,eU,eC,eE)))return ez}else eI<eV&&iterPush(ef++,ep+1,eI,eV,eN,eU,16,-1/0,1/0),eV<eF&&(iterPush(ef++,ep+1,eV,eF,eN,eU,0,-1/0,1/0),iterPush(ef++,ep+1,eN,eU,eV,eF,1,-1/0,1/0))}}else eF=ek?en(i,ep,eI,em,eS,eM,ej):er(i,ep,eI,em,eS,eM,ej),eI<eF&&(ep===i-2?ez=ek?G.sweepBipartite(i,o,eN,eU,eC,eE,eI,eF,eS,eM):G.sweepBipartite(i,o,eI,eF,eS,eM,eN,eU,eC,eE):(iterPush(ef++,ep+1,eI,eF,eN,eU,ek,-1/0,1/0),iterPush(ef++,ep+1,eN,eU,eI,eF,1^ek,-1/0,1/0)))}}}}};var x=s(5306),_=s(2288),F=s(7333),N=F.partial,j=F.full,G=s(1390),Z=s(2464),X=s(122),J=X("!(lo>=p0)&&!(p1>=hi)"),$=X("lo===p0"),ee=X("lo<p0"),et=X("hi<=p0"),er=X("lo<=p0&&p0<=hi"),en=X("lo<p0&&p0<=hi"),ei=x.mallocInt32(1024),eo=x.mallocDouble(1024);function iterPush(i,o,s,x,_,F,N,j,G){var Z=6*i;ei[Z]=o,ei[Z+1]=s,ei[Z+2]=x,ei[Z+3]=_,ei[Z+4]=F,ei[Z+5]=N;var X=2*i;eo[X]=j,eo[X+1]=G}},2464:function(i,o,s){"use strict";i.exports=function(i,o,s,_,F,N){if(_<=s+1)return s;for(var j=s,G=_,Z=_+s>>>1,X=2*i,J=Z,$=F[X*Z+o];j<G;){if(G-j<8){(function(i,o,s,x,_,F){for(var N=2*i,j=N*(s+1)+o,G=s+1;G<x;++G,j+=N)for(var Z=_[j],X=G,J=N*(G-1);X>s&&_[J+o]>Z;--X,J-=N){for(var $=J,ee=J+N,et=0;et<N;++et,++$,++ee){var er=_[$];_[$]=_[ee],_[ee]=er}var en=F[X];F[X]=F[X-1],F[X-1]=en}})(i,o,j,G,F,N),$=F[X*Z+o];break}var ee=G-j,et=Math.random()*ee+j|0,er=F[X*et+o],en=Math.random()*ee+j|0,ei=F[X*en+o],eo=Math.random()*ee+j|0,es=F[X*eo+o];er<=ei?es>=ei?(J=en,$=ei):er>=es?(J=et,$=er):(J=eo,$=es):ei>=es?(J=en,$=ei):es>=er?(J=et,$=er):(J=eo,$=es);for(var el=X*(G-1),ec=X*J,eu=0;eu<X;++eu,++el,++ec){var ef=F[el];F[el]=F[ec],F[ec]=ef}var eh=N[G-1];N[G-1]=N[J],N[J]=eh,J=x(i,o,j,G-1,F,N,$);for(var el=X*(G-1),ec=X*J,eu=0;eu<X;++eu,++el,++ec){var ef=F[el];F[el]=F[ec],F[ec]=ef}var eh=N[G-1];if(N[G-1]=N[J],N[J]=eh,Z<J){for(G=J-1;j<G&&F[X*(G-1)+o]===$;)G-=1;G+=1}else if(J<Z)for(j=J+1;j<G&&F[X*j+o]===$;)j+=1;else break}return x(i,o,s,Z,F,N,F[X*Z+o])};var x=s(122)("lo<p0")},122:function(i){"use strict";i.exports=function(i){return o[i]};var o={"lo===p0":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=s;x>J;++J,G+=j)if(_[G+o]===N){if(X===J)X+=1,Z+=j;else{for(var $=0;j>$;++$){var ee=_[G+$];_[G+$]=_[Z],_[Z++]=ee}var et=F[J];F[J]=F[X],F[X++]=et}}return X},"lo<p0":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=s;x>J;++J,G+=j)if(_[G+o]<N){if(X===J)X+=1,Z+=j;else{for(var $=0;j>$;++$){var ee=_[G+$];_[G+$]=_[Z],_[Z++]=ee}var et=F[J];F[J]=F[X],F[X++]=et}}return X},"lo<=p0":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=i+o,$=s;x>$;++$,G+=j)if(_[G+J]<=N){if(X===$)X+=1,Z+=j;else{for(var ee=0;j>ee;++ee){var et=_[G+ee];_[G+ee]=_[Z],_[Z++]=et}var er=F[$];F[$]=F[X],F[X++]=er}}return X},"hi<=p0":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=i+o,$=s;x>$;++$,G+=j)if(_[G+J]<=N){if(X===$)X+=1,Z+=j;else{for(var ee=0;j>ee;++ee){var et=_[G+ee];_[G+ee]=_[Z],_[Z++]=et}var er=F[$];F[$]=F[X],F[X++]=er}}return X},"lo<p0&&p0<=hi":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=i+o,$=s;x>$;++$,G+=j){var ee=_[G+o],et=_[G+J];if(ee<N&&N<=et){if(X===$)X+=1,Z+=j;else{for(var er=0;j>er;++er){var en=_[G+er];_[G+er]=_[Z],_[Z++]=en}var ei=F[$];F[$]=F[X],F[X++]=ei}}}return X},"lo<=p0&&p0<=hi":function(i,o,s,x,_,F,N){for(var j=2*i,G=j*s,Z=G,X=s,J=i+o,$=s;x>$;++$,G+=j){var ee=_[G+o],et=_[G+J];if(ee<=N&&N<=et){if(X===$)X+=1,Z+=j;else{for(var er=0;j>er;++er){var en=_[G+er];_[G+er]=_[Z],_[Z++]=en}var ei=F[$];F[$]=F[X],F[X++]=ei}}}return X},"!(lo>=p0)&&!(p1>=hi)":function(i,o,s,x,_,F,N,j){for(var G=2*i,Z=G*s,X=Z,J=s,$=i+o,ee=s;x>ee;++ee,Z+=G){var et=_[Z+o],er=_[Z+$];if(!(et>=N)&&!(j>=er)){if(J===ee)J+=1,X+=G;else{for(var en=0;G>en;++en){var ei=_[Z+en];_[Z+en]=_[X],_[X++]=ei}var eo=F[ee];F[ee]=F[J],F[J++]=eo}}}return J}}},309:function(i){"use strict";function insertionSort(i,o,s){for(var x=2*(i+1),_=i+1;_<=o;++_){for(var F=s[x++],N=s[x++],j=_,G=x-2;j-- >i;){var Z=s[G-2],X=s[G-1];if(Z<F||Z===F&&X<N)break;s[G]=Z,s[G+1]=X,G-=2}s[G]=F,s[G+1]=N}}function swap(i,o,s){o*=2;var x=s[i*=2],_=s[i+1];s[i]=s[o],s[i+1]=s[o+1],s[o]=x,s[o+1]=_}function move(i,o,s){o*=2,s[i*=2]=s[o],s[i+1]=s[o+1]}function shufflePivot(i,o,s,x,_){o*=2,_[i*=2]=_[o],_[o]=s,_[i+1]=_[o+1],_[o+1]=x}function compare(i,o,s){o*=2;var x=s[i*=2],_=s[o];return!(x<_)&&(x!==_||s[i+1]>s[o+1])}function comparePivot(i,o,s,x){var _=x[i*=2];return _<o||_===o&&x[i+1]<s}i.exports=function(i,o){o<=128?insertionSort(0,o-1,i):function quickSort(i,o,s){var x=(o-i+1)/6|0,_=i+x,F=o-x,N=i+o>>1,j=N-x,G=N+x,Z=_,X=j,J=N,$=G,ee=F,et=i+1,er=o-1,en=0;compare(Z,X,s)&&(en=Z,Z=X,X=en),compare($,ee,s)&&(en=$,$=ee,ee=en),compare(Z,J,s)&&(en=Z,Z=J,J=en),compare(X,J,s)&&(en=X,X=J,J=en),compare(Z,$,s)&&(en=Z,Z=$,$=en),compare(J,$,s)&&(en=J,J=$,$=en),compare(X,ee,s)&&(en=X,X=ee,ee=en),compare(X,J,s)&&(en=X,X=J,J=en),compare($,ee,s)&&(en=$,$=ee,ee=en);for(var ei=s[2*X],eo=s[2*X+1],es=s[2*$],el=s[2*$+1],ec=2*Z,eu=2*J,ef=2*ee,eh=2*_,ed=2*N,ep=2*F,eg=0;eg<2;++eg){var em=s[ec+eg],ey=s[eu+eg],ev=s[ef+eg];s[eh+eg]=em,s[ed+eg]=ey,s[ep+eg]=ev}move(j,i,s),move(G,o,s);for(var ex=et;ex<=er;++ex)if(comparePivot(ex,ei,eo,s))ex!==et&&swap(ex,et,s),++et;else if(!comparePivot(ex,es,el,s))for(;;){if(comparePivot(er,es,el,s)){comparePivot(er,ei,eo,s)?(function(i,o,s,x){o*=2,s*=2;var _=x[i*=2],F=x[i+1];x[i]=x[o],x[i+1]=x[o+1],x[o]=x[s],x[o+1]=x[s+1],x[s]=_,x[s+1]=F}(ex,et,er,s),++et):swap(ex,er,s),--er;break}if(--er<ex)break}shufflePivot(i,et-1,ei,eo,s),shufflePivot(o,er+1,es,el,s),et-2-i<=32?insertionSort(i,et-2,s):quickSort(i,et-2,s),o-(er+2)<=32?insertionSort(er+2,o,s):quickSort(er+2,o,s),er-et<=32?insertionSort(et,er,s):quickSort(et,er,s)}(0,o-1,i)}},1390:function(i,o,s){"use strict";i.exports={init:function(i){var o=_.nextPow2(i);N.length<o&&(x.free(N),N=x.mallocInt32(o)),j.length<o&&(x.free(j),j=x.mallocInt32(o)),G.length<o&&(x.free(G),G=x.mallocInt32(o)),Z.length<o&&(x.free(Z),Z=x.mallocInt32(o)),X.length<o&&(x.free(X),X=x.mallocInt32(o)),J.length<o&&(x.free(J),J=x.mallocInt32(o));var s=8*o;$.length<s&&(x.free($),$=x.mallocDouble(s))},sweepBipartite:function(i,o,s,x,_,X,J,ee,et,er){for(var en=0,ei=2*i,eo=i-1,es=ei-1,el=s;el<x;++el){var ec=X[el],eu=ei*el;$[en++]=_[eu+eo],$[en++]=-(ec+1),$[en++]=_[eu+es],$[en++]=ec}for(var el=J;el<ee;++el){var ec=er[el]+268435456,ef=ei*el;$[en++]=et[ef+eo],$[en++]=-ec,$[en++]=et[ef+es],$[en++]=ec}var eh=en>>>1;F($,eh);for(var ed=0,ep=0,el=0;el<eh;++el){var eg=0|$[2*el+1];if(eg>=268435456)eg=eg-268435456|0,sqPop(G,Z,ep--,eg);else if(eg>=0)sqPop(N,j,ed--,eg);else if(eg<=-268435456){eg=-eg-268435456|0;for(var em=0;em<ed;++em){var ey=o(N[em],eg);if(void 0!==ey)return ey}sqPush(G,Z,ep++,eg)}else{eg=-eg-1|0;for(var em=0;em<ep;++em){var ey=o(eg,G[em]);if(void 0!==ey)return ey}sqPush(N,j,ed++,eg)}}},sweepComplete:function(i,o,s,x,_,ee,et,er,en,ei){for(var eo=0,es=2*i,el=i-1,ec=es-1,eu=s;eu<x;++eu){var ef=ee[eu]+1<<1,eh=es*eu;$[eo++]=_[eh+el],$[eo++]=-ef,$[eo++]=_[eh+ec],$[eo++]=ef}for(var eu=et;eu<er;++eu){var ef=ei[eu]+1<<1,ed=es*eu;$[eo++]=en[ed+el],$[eo++]=1|-ef,$[eo++]=en[ed+ec],$[eo++]=1|ef}var ep=eo>>>1;F($,ep);for(var eg=0,em=0,ey=0,eu=0;eu<ep;++eu){var ev=0|$[2*eu+1],ex=1&ev;if(eu<ep-1&&ev>>1==$[2*eu+3]>>1&&(ex=2,eu+=1),ev<0){for(var e_=-(ev>>1)-1,ew=0;ew<ey;++ew){var eT=o(X[ew],e_);if(void 0!==eT)return eT}if(0!==ex)for(var ew=0;ew<eg;++ew){var eT=o(N[ew],e_);if(void 0!==eT)return eT}if(1!==ex)for(var ew=0;ew<em;++ew){var eT=o(G[ew],e_);if(void 0!==eT)return eT}0===ex?sqPush(N,j,eg++,e_):1===ex?sqPush(G,Z,em++,e_):2===ex&&sqPush(X,J,ey++,e_)}else{var e_=(ev>>1)-1;0===ex?sqPop(N,j,eg--,e_):1===ex?sqPop(G,Z,em--,e_):2===ex&&sqPop(X,J,ey--,e_)}}},scanBipartite:function(i,o,s,x,_,G,Z,X,J,ee,et,er){var en=0,ei=2*i,eo=o+i,es=1,el=1;x?el=268435456:es=268435456;for(var ec=_;ec<G;++ec){var eu=ec+es,ef=ei*ec;$[en++]=Z[ef+o],$[en++]=-eu,$[en++]=Z[ef+eo],$[en++]=eu}for(var ec=J;ec<ee;++ec){var eu=ec+el,eh=ei*ec;$[en++]=et[eh+o],$[en++]=-eu}var ed=en>>>1;F($,ed);for(var ep=0,ec=0;ec<ed;++ec){var eg=0|$[2*ec+1];if(eg<0){var eu=-eg,em=!1;if(eu>=268435456?(em=!x,eu-=268435456):(em=!!x,eu-=1),em)sqPush(N,j,ep++,eu);else{var ey=er[eu],ev=ei*eu,ex=et[ev+o+1],e_=et[ev+o+1+i];i:for(var ew=0;ew<ep;++ew){var eT,ek=N[ew],eA=ei*ek;if(!(e_<Z[eA+o+1])&&!(Z[eA+o+1+i]<ex)){for(var eS=o+2;eS<i;++eS)if(et[ev+eS+i]<Z[eA+eS]||Z[eA+eS+i]<et[ev+eS])continue i;var eM=X[ek];if(void 0!==(eT=x?s(ey,eM):s(eM,ey)))return eT}}}}else sqPop(N,j,ep--,eg-es)}},scanComplete:function(i,o,s,x,_,j,G,Z,X,J,ee){for(var et=0,er=2*i,en=o+i,ei=x;ei<_;++ei){var eo=ei+268435456,es=er*ei;$[et++]=j[es+o],$[et++]=-eo,$[et++]=j[es+en],$[et++]=eo}for(var ei=Z;ei<X;++ei){var eo=ei+1,el=er*ei;$[et++]=J[el+o],$[et++]=-eo}var ec=et>>>1;F($,ec);for(var eu=0,ei=0;ei<ec;++ei){var ef=0|$[2*ei+1];if(ef<0){var eo=-ef;if(eo>=268435456)N[eu++]=eo-268435456;else{var eh=ee[eo-=1],ed=er*eo,ep=J[ed+o+1],eg=J[ed+o+1+i];i:for(var em=0;em<eu;++em){var ey=N[em],ev=G[ey];if(ev===eh)break;var ex=er*ey;if(!(eg<j[ex+o+1])&&!(j[ex+o+1+i]<ep)){for(var e_=o+2;e_<i;++e_)if(J[ed+e_+i]<j[ex+e_]||j[ex+e_+i]<J[ed+e_])continue i;var ew=s(ev,eh);if(void 0!==ew)return ew}}}}else{for(var eo=ef-268435456,em=eu-1;em>=0;--em)if(N[em]===eo){for(var e_=em+1;e_<eu;++e_)N[e_-1]=N[e_];break}--eu}}}};var x=s(5306),_=s(2288),F=s(309),N=x.mallocInt32(1024),j=x.mallocInt32(1024),G=x.mallocInt32(1024),Z=x.mallocInt32(1024),X=x.mallocInt32(1024),J=x.mallocInt32(1024),$=x.mallocDouble(8192);function sqPop(i,o,s,x){var _=o[x],F=i[s-1];i[_]=F,o[F]=_}function sqPush(i,o,s,x){i[s]=x,o[x]=s}},7761:function(i,o,s){"use strict";var x=s(9971),_=s(743),F=s(2161),N=s(7098);function canonicalizeEdge(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function compareEdge(i,o){return i[0]-o[0]||i[1]-o[1]}function getDefault(i,o,s){return o in i?i[o]:s}i.exports=function(i,o,s){Array.isArray(o)?(s=s||{},o=o||[]):(s=o||{},o=[]);var j=!!getDefault(s,"delaunay",!0),G=!!getDefault(s,"interior",!0),Z=!!getDefault(s,"exterior",!0),X=!!getDefault(s,"infinity",!1);if(!G&&!Z||0===i.length)return[];var J=x(i,o);if(!j&&G===Z&&!X)return J;for(var $=_(i.length,o.map(canonicalizeEdge).sort(compareEdge)),ee=0;ee<J.length;++ee){var et=J[ee];$.addTriangle(et[0],et[1],et[2])}return(j&&F(i,$),Z)?G?X?N($,0,X):$.cells():N($,1,X):N($,-1)}},2161:function(i,o,s){"use strict";var x=s(2227)[4];function testFlip(i,o,s,_,F,N){var j=o.opposite(_,F);if(!(j<0)){if(F<_){var G=_;_=F,F=G,G=N,N=j,j=G}!o.isConstraint(_,F)&&0>x(i[_],i[F],i[N],i[j])&&s.push(_,F)}}s(5070),i.exports=function(i,o){for(var s=[],_=i.length,F=o.stars,N=0;N<_;++N)for(var j=F[N],G=1;G<j.length;G+=2){var Z=j[G];if(!(Z<N||o.isConstraint(N,Z))){for(var X=j[G-1],J=-1,$=1;$<j.length;$+=2)if(j[$-1]===Z){J=j[$];break}!(J<0)&&0>x(i[N],i[Z],i[X],i[J])&&s.push(N,Z)}}for(;s.length>0;){for(var Z=s.pop(),N=s.pop(),X=-1,J=-1,j=F[N],ee=1;ee<j.length;ee+=2){var et=j[ee-1],er=j[ee];et===Z?J=er:er===Z&&(X=et)}X<0||J<0||x(i[N],i[Z],i[X],i[J])>=0||(o.flip(N,Z),testFlip(i,o,s,X,N,J),testFlip(i,o,s,N,J,X),testFlip(i,o,s,J,Z,X),testFlip(i,o,s,Z,X,J))}}},7098:function(i,o,s){"use strict";var x,_=s(5070);function FaceIndex(i,o,s,x,_,F,N){this.cells=i,this.neighbor=o,this.flags=x,this.constraint=s,this.active=_,this.next=F,this.boundary=N}function compareCell(i,o){return i[0]-o[0]||i[1]-o[1]||i[2]-o[2]}i.exports=function(i,o,s){var x=function(i,o){for(var s=i.cells(),x=s.length,_=0;_<x;++_){var F=s[_],N=F[0],j=F[1],G=F[2];j<G?j<N&&(F[0]=j,F[1]=G,F[2]=N):G<N&&(F[0]=G,F[1]=N,F[2]=j)}s.sort(compareCell);for(var Z=Array(x),_=0;_<Z.length;++_)Z[_]=0;var X=[],J=[],$=Array(3*x),ee=Array(3*x),et=null;o&&(et=[]);for(var er=new FaceIndex(s,$,ee,Z,X,J,et),_=0;_<x;++_)for(var F=s[_],en=0;en<3;++en){var N=F[en],j=F[(en+1)%3],ei=$[3*_+en]=er.locate(j,N,i.opposite(j,N)),eo=ee[3*_+en]=i.isConstraint(N,j);ei<0&&(eo?J.push(_):(X.push(_),Z[_]=1),o&&et.push([j,N,-1]))}return er}(i,s);if(0===o)return s?x.cells.concat(x.boundary):x.cells;for(var _=1,F=x.active,N=x.next,j=x.flags,G=x.cells,Z=x.constraint,X=x.neighbor;F.length>0||N.length>0;){for(;F.length>0;){var J=F.pop();if(j[J]!==-_){j[J]=_,G[J];for(var $=0;$<3;++$){var ee=X[3*J+$];ee>=0&&0===j[ee]&&(Z[3*J+$]?N.push(ee):(F.push(ee),j[ee]=_))}}}var et=N;N=F,F=et,N.length=0,_=-_}var er=function(i,o,s){for(var x=0,_=0;_<i.length;++_)o[_]===s&&(i[x++]=i[_]);return i.length=x,i}(G,j,o);return s?er.concat(x.boundary):er},FaceIndex.prototype.locate=(x=[0,0,0],function(i,o,s){var F=i,N=o,j=s;return(o<s?o<i&&(F=o,N=s,j=i):s<i&&(F=s,N=i,j=o),F<0)?-1:(x[0]=F,x[1]=N,x[2]=j,_.eq(this.cells,x,compareCell))})},9971:function(i,o,s){"use strict";var x=s(5070),_=s(417)[3];function PartialHull(i,o,s,x,_){this.a=i,this.b=o,this.idx=s,this.lowerIds=x,this.upperIds=_}function Event(i,o,s,x){this.a=i,this.b=o,this.type=s,this.idx=x}function compareEvent(i,o){var s=i.a[0]-o.a[0]||i.a[1]-o.a[1]||i.type-o.type;return s||0!==i.type&&(s=_(i.a,i.b,o.b))?s:i.idx-o.idx}function testPoint(i,o){return _(i.a,i.b,o)}function findSplit(i,o){var s;return(s=i.a[0]<o.a[0]?_(i.a,i.b,o.a):_(o.b,o.a,i.a))?s:(s=o.b[0]<i.b[0]?_(i.a,i.b,o.b):_(o.b,o.a,i.b))||i.idx-o.idx}i.exports=function(i,o){for(var s=i.length,F=o.length,N=[],j=0;j<s;++j)N.push(new Event(i[j],null,0,j));for(var j=0;j<F;++j){var G=o[j],Z=i[G[0]],X=i[G[1]];Z[0]<X[0]?N.push(new Event(Z,X,2,j),new Event(X,Z,1,j)):Z[0]>X[0]&&N.push(new Event(X,Z,2,j),new Event(Z,X,1,j))}N.sort(compareEvent);for(var J=N[0].a[0]-(1+Math.abs(N[0].a[0]))*2220446049250313e-31,$=[new PartialHull([J,1],[J,0],-1,[],[],[],[])],ee=[],j=0,et=N.length;j<et;++j){var er=N[j],en=er.type;0===en?function(i,o,s,F,N){for(var j=x.lt(o,F,testPoint),G=x.gt(o,F,testPoint),Z=j;Z<G;++Z){for(var X=o[Z],J=X.lowerIds,$=J.length;$>1&&_(s[J[$-2]],s[J[$-1]],F)>0;)i.push([J[$-1],J[$-2],N]),$-=1;J.length=$,J.push(N);for(var ee=X.upperIds,$=ee.length;$>1&&0>_(s[ee[$-2]],s[ee[$-1]],F);)i.push([ee[$-2],ee[$-1],N]),$-=1;ee.length=$,ee.push(N)}}(ee,$,i,er.a,er.idx):2===en?function(i,o,s){var _=x.le(i,s,findSplit),F=i[_],N=F.upperIds,j=N[N.length-1];F.upperIds=[j],i.splice(_+1,0,new PartialHull(s.a,s.b,s.idx,[j],N))}($,0,er):function(i,o,s){var _=s.a;s.a=s.b,s.b=_;var F=x.eq(i,s,findSplit),N=i[F];i[F-1].upperIds=N.upperIds,i.splice(F,1)}($,0,er)}return ee}},743:function(i,o,s){"use strict";var x=s(5070);function Triangulation(i,o){this.stars=i,this.edges=o}i.exports=function(i,o){for(var s=Array(i),x=0;x<i;++x)s[x]=[];return new Triangulation(s,o)};var _=Triangulation.prototype;function removePair(i,o,s){for(var x=1,_=i.length;x<_;x+=2)if(i[x-1]===o&&i[x]===s){i[x-1]=i[_-2],i[x]=i[_-1],i.length=_-2;return}}_.isConstraint=function(){var i=[0,0];function compareLex(i,o){return i[0]-o[0]||i[1]-o[1]}return function(o,s){return i[0]=Math.min(o,s),i[1]=Math.max(o,s),x.eq(this.edges,i,compareLex)>=0}}(),_.removeTriangle=function(i,o,s){var x=this.stars;removePair(x[i],o,s),removePair(x[o],s,i),removePair(x[s],i,o)},_.addTriangle=function(i,o,s){var x=this.stars;x[i].push(o,s),x[o].push(s,i),x[s].push(i,o)},_.opposite=function(i,o){for(var s=this.stars[o],x=1,_=s.length;x<_;x+=2)if(s[x]===i)return s[x-1];return -1},_.flip=function(i,o){var s=this.opposite(i,o),x=this.opposite(o,i);this.removeTriangle(i,o,s),this.removeTriangle(o,i,x),this.addTriangle(i,x,s),this.addTriangle(o,s,x)},_.edges=function(){for(var i=this.stars,o=[],s=0,x=i.length;s<x;++s)for(var _=i[s],F=0,N=_.length;F<N;F+=2)o.push([_[F],_[F+1]]);return o},_.cells=function(){for(var i=this.stars,o=[],s=0,x=i.length;s<x;++s)for(var _=i[s],F=0,N=_.length;F<N;F+=2){var j=_[F],G=_[F+1];s<Math.min(j,G)&&o.push([s,j,G])}return o}},9887:function(i){"use strict";i.exports=function(i){for(var o=1,s=1;s<i.length;++s)for(var x=0;x<s;++x)if(i[s]<i[x])o=-o;else if(i[x]===i[s])return 0;return o}},9243:function(i,o,s){"use strict";var x=s(3094),_=s(6606);function dot(i,o){for(var s=0,x=i.length,_=0;_<x;++_)s+=i[_]*o[_];return s}function barycentricCircumcenter(i){var o=i.length;if(0===o)return[];i[0].length;var s=x([i.length+1,i.length+1],1),F=x([i.length+1],1);s[o][o]=0;for(var N=0;N<o;++N){for(var j=0;j<=N;++j)s[j][N]=s[N][j]=2*dot(i[N],i[j]);F[N]=dot(i[N],i[N])}for(var G=_(s,F),Z=0,X=G[o+1],N=0;N<X.length;++N)Z+=X[N];for(var J=Array(o),N=0;N<o;++N){for(var X=G[N],$=0,j=0;j<X.length;++j)$+=X[j];J[N]=$/Z}return J}function circumcenter(i){if(0===i.length)return[];for(var o=i[0].length,s=x([o]),_=barycentricCircumcenter(i),F=0;F<i.length;++F)for(var N=0;N<o;++N)s[N]+=i[F][N]*_[F];return s}circumcenter.barycenetric=barycentricCircumcenter,i.exports=circumcenter},1778:function(i,o,s){i.exports=function(i){for(var o=x(i),s=0,_=0;_<i.length;++_)for(var F=i[_],N=0;N<o.length;++N)s+=Math.pow(F[N]-o[N],2);return Math.sqrt(s/i.length)};var x=s(9243)},197:function(i,o,s){"use strict";i.exports=function(i,o,s){if(s){eu=o;for(var x,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef=Array(o.length),eh=0;eh<o.length;++eh){var ed=o[eh];ef[eh]=[ed[0],ed[1],s[eh]]}o=ef}for(var ep=(x=o,$=!!s,dedupEdges(x,ee=dedupPoints(i,[],boundPoints(i)),$),!!ee);et=o,er=!!s,en=function(i,o){for(var s=Array(o.length),x=0;x<o.length;++x){var _=o[x],F=i[_[0]],N=i[_[1]];s[x]=[X(Math.min(F[0],N[0]),-1/0),X(Math.min(F[1],N[1]),-1/0),X(Math.max(F[0],N[0]),1/0),X(Math.max(F[1],N[1]),1/0)]}return s}(i,et),ei=[],_(en,function(o,s){var x=et[o],_=et[s];x[0]!==_[0]&&x[0]!==_[1]&&x[1]!==_[0]&&x[1]!==_[1]&&F(i[x[0]],i[x[1]],i[_[0]],i[_[1]])&&ei.push([o,s])}),eo=boundPoints(i),es=[],_(en,eo,function(o,s){var x=et[o];if(x[0]!==s&&x[1]!==s){var _=i[s];F(i[x[0]],i[x[1]],_,_)&&es.push([o,s])}}),el=function(i,o,s,x,_){var F=i.map(function(i){return[N(i[0]),N(i[1])]});for(ei=0;ei<s.length;++ei){var X=s[ei];eo=X[0];var $=X[1],ee=o[eo],et=o[$],er=J(Z(i[ee[0]]),Z(i[ee[1]]),Z(i[et[0]]),Z(i[et[1]]));if(er){var en=i.length;i.push([G(er[0]),G(er[1])]),F.push(er),x.push([eo,en],[$,en])}}for(x.sort(function(i,o){if(i[0]!==o[0])return i[0]-o[0];var s=F[i[1]],x=F[o[1]];return j(s[0],x[0])||j(s[1],x[1])}),ei=x.length-1;ei>=0;--ei){var ei,eo,es,el=x[ei],ec=o[eo=el[0]],eu=ec[0],ef=ec[1],eh=i[eu],ed=i[ef];if(0>(eh[0]-ed[0]||eh[1]-ed[1])){var ep=eu;eu=ef,ef=ep}ec[0]=eu;var eg=ec[1]=el[1];for(_&&(es=ec[2]);ei>0&&x[ei-1][0]===eo;){var el=x[--ei],em=el[1];_?o.push([eg,em,es]):o.push([eg,em]),eg=em}_?o.push([eg,ef,es]):o.push([eg,ef])}return F}(i,et,ei,es,er),dedupEdges(et,ec=dedupPoints(i,el,eo),er),ec||ei.length>0||es.length>0;)ep=!0;if(s&&ep){eu.length=0,s.length=0;for(var eh=0;eh<o.length;++eh){var ed=o[eh];eu.push([ed[0],ed[1]]),s.push(ed[2])}}return ep};var x=s(1731),_=s(2569),F=s(4434),N=s(5125),j=s(8846),G=s(7999),Z=s(2826),X=s(8551),J=s(5528);function boundRat(i){var o=G(i);return[X(o,-1/0),X(o,1/0)]}function boundPoints(i){for(var o=Array(i.length),s=0;s<i.length;++s){var x=i[s];o[s]=[X(x[0],-1/0),X(x[1],-1/0),X(x[0],1/0),X(x[1],1/0)]}return o}function dedupPoints(i,o,s){for(var F=o.length,N=new x(F),j=[],G=0;G<o.length;++G){var Z=o[G],J=boundRat(Z[0]),$=boundRat(Z[1]);j.push([X(J[0],-1/0),X($[0],-1/0),X(J[1],1/0),X($[1],1/0)])}_(j,function(i,o){N.link(i,o)});for(var ee=!0,et=Array(F),G=0;G<F;++G){var er=N.find(G);er!==G&&(ee=!1,i[er]=[Math.min(i[G][0],i[er][0]),Math.min(i[G][1],i[er][1])])}if(ee)return null;for(var en=0,G=0;G<F;++G){var er=N.find(G);er===G?(et[G]=en,i[en++]=i[G]):et[G]=-1}i.length=en;for(var G=0;G<F;++G)et[G]<0&&(et[G]=et[N.find(G)]);return et}function compareLex2(i,o){return i[0]-o[0]||i[1]-o[1]}function compareLex3(i,o){return i[0]-o[0]||i[1]-o[1]||(i[2]<o[2]?-1:i[2]>o[2]?1:0)}function dedupEdges(i,o,s){if(0!==i.length){if(o)for(var x=0;x<i.length;++x){var _=i[x],F=o[_[0]],N=o[_[1]];_[0]=Math.min(F,N),_[1]=Math.max(F,N)}else for(var x=0;x<i.length;++x){var _=i[x],F=_[0],N=_[1];_[0]=Math.min(F,N),_[1]=Math.max(F,N)}s?i.sort(compareLex3):i.sort(compareLex2);for(var j=1,x=1;x<i.length;++x){var G=i[x-1],Z=i[x];(Z[0]!==G[0]||Z[1]!==G[1]||s&&Z[2]!==G[2])&&(i[j++]=Z)}i.length=j}}},5528:function(i,o,s){"use strict";i.exports=function(i,o,s,x){var F=j(o,i),X=j(x,s),J=ratPerp(F,X);if(0===N(J))return null;var $=Z(F,_(ratPerp(X,j(i,s)),J));return G(i,$)};var x=s(3962),_=s(9189),F=s(4354),N=s(4951),j=s(6695),G=s(7584),Z=s(4469);function ratPerp(i,o){return F(x(i[0],o[1]),x(i[1],o[0]))}},5692:function(i){i.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(i,o,s){"use strict";var x=s(5692),_=s(3578);function rgb2float(i){return[i[0]/255,i[1]/255,i[2]/255,i[3]]}function rgb2hex(i){for(var o,s="#",x=0;x<3;++x)s+=("00"+(o=(o=i[x]).toString(16))).substr(o.length);return s}function rgbaStr(i){return"rgba("+i.join(",")+")"}i.exports=function(i){if(i||(i={}),X=(i.nshades||72)-1,Z=i.format||"hex",(G=i.colormap)||(G="jet"),"string"==typeof G){if(!x[G=G.toLowerCase()])throw Error(G+" not a supported colorscale");j=x[G]}else if(Array.isArray(G))j=G.slice();else throw Error("unsupported colormap option",G);if(j.length>X+1)throw Error(G+" map requires nshades to be at least size "+j.length);$=Array.isArray(i.alpha)?2!==i.alpha.length?[1,1]:i.alpha.slice():"number"==typeof i.alpha?[i.alpha,i.alpha]:[1,1],o=j.map(function(i){return Math.round(i.index*X)}),$[0]=Math.min(Math.max($[0],0),1),$[1]=Math.min(Math.max($[1],0),1);var o,s,F,N,j,G,Z,X,J,$,ee,et=j.map(function(i,o){var s=j[o].index,x=j[o].rgb.slice();return 4===x.length&&x[3]>=0&&x[3]<=1||(x[3]=$[0]+($[1]-$[0])*s),x}),J=[];for(ee=0;ee<o.length-1;++ee){N=o[ee+1]-o[ee],s=et[ee],F=et[ee+1];for(var er=0;er<N;er++){var en=er/N;J.push([Math.round(_(s[0],F[0],en)),Math.round(_(s[1],F[1],en)),Math.round(_(s[2],F[2],en)),_(s[3],F[3],en)])}}return J.push(j[j.length-1].rgb.concat($[1])),"hex"===Z?J=J.map(rgb2hex):"rgbaString"===Z?J=J.map(rgbaStr):"float"===Z&&(J=J.map(rgb2float)),J}},9398:function(i,o,s){"use strict";i.exports=function(i,o,s,F){var N=x(o,s,F);if(0===N){var j=_(x(i,o,s)),G=_(x(i,o,F));if(j===G){if(0===j){var Z=testInterior(i,o,s);if(Z===testInterior(i,o,F));else if(Z)return 1;else return -1}return 0}return 0===G?j>0?-1:testInterior(i,o,F)?-1:1:0===j?G>0?1:testInterior(i,o,s)?1:-1:_(G-j)}var X=x(i,o,s);return X>0?N>0&&x(i,o,F)>0?1:-1:X<0?N>0||x(i,o,F)>0?1:-1:x(i,o,F)>0?1:testInterior(i,o,s)?1:-1};var x=s(417),_=s(7538),F=s(87),N=s(2019),j=s(9662);function testInterior(i,o,s){var x=F(i[0],-o[0]),_=F(i[1],-o[1]),G=F(s[0],-o[0]),Z=F(s[1],-o[1]),X=j(N(x,G),N(_,Z));return X[X.length-1]>=0}},7538:function(i){"use strict";i.exports=function(i){return i<0?-1:i>0?1:0}},9209:function(i){i.exports=function(i,s){var x=i.length,_=i.length-s.length;if(_)return _;switch(x){case 0:return 0;case 1:return i[0]-s[0];case 2:return i[0]+i[1]-s[0]-s[1]||o(i[0],i[1])-o(s[0],s[1]);case 3:var F=i[0]+i[1],N=s[0]+s[1];if(_=F+i[2]-(N+s[2]))return _;var j=o(i[0],i[1]),G=o(s[0],s[1]);return o(j,i[2])-o(G,s[2])||o(j+i[2],F)-o(G+s[2],N);case 4:var Z=i[0],X=i[1],J=i[2],$=i[3],ee=s[0],et=s[1],er=s[2],en=s[3];return Z+X+J+$-(ee+et+er+en)||o(Z,X,J,$)-o(ee,et,er,en,ee)||o(Z+X,Z+J,Z+$,X+J,X+$,J+$)-o(ee+et,ee+er,ee+en,et+er,et+en,er+en)||o(Z+X+J,Z+X+$,Z+J+$,X+J+$)-o(ee+et+er,ee+et+en,ee+er+en,et+er+en);default:for(var ei=i.slice().sort(compareInt),eo=s.slice().sort(compareInt),es=0;es<x;++es)if(_=ei[es]-eo[es])return _;return 0}};var o=Math.min;function compareInt(i,o){return i-o}},1284:function(i,o,s){"use strict";var x=s(9209),_=s(9887);i.exports=function(i,o){return x(i,o)||_(i)-_(o)}},5537:function(i,o,s){"use strict";var x=s(8950),_=s(8722),F=s(3332);i.exports=function(i){var o=i.length;if(0===o)return[];if(1===o)return[[0]];var s=i[0].length;return 0===s?[]:1===s?x(i):2===s?_(i):F(i,s)}},8950:function(i){"use strict";i.exports=function(i){for(var o=0,s=0,x=1;x<i.length;++x)i[x][0]<i[o][0]&&(o=x),i[x][0]>i[s][0]&&(s=x);return o<s?[[o],[s]]:o>s?[[s],[o]]:[[o]]}},8722:function(i,o,s){"use strict";i.exports=function(i){var o=x(i),s=o.length;if(s<=2)return[];for(var _=Array(s),F=o[s-1],N=0;N<s;++N){var j=o[N];_[N]=[F,j],F=j}return _};var x=s(3266)},3332:function(i,o,s){"use strict";i.exports=function(i,o){try{return x(i,!0)}catch(F){var s=_(i);if(s.length<=o)return[];return function(i,o){for(var s=i.length,x=o.length,_=0;_<s;++_)for(var F=i[_],N=0;N<F.length;++N){var j=F[N];if(j<x)F[N]=o[j];else{j-=x;for(var G=0;G<x;++G)j>=o[G]&&(j+=1);F[N]=j}}return i}(x(function(i,o){for(var s=i.length,x=Array(s),_=0;_<o.length;++_)x[_]=i[o[_]];for(var F=o.length,_=0;_<s;++_)0>o.indexOf(_)&&(x[F++]=i[_]);return x}(i,s),!0),s)}};var x=s(2183),_=s(2153)},9680:function(i){"use strict";i.exports=function(i,o,s,x,_,F){var N=_-1,j=_*_,G=N*N,Z=(1+2*_)*G,X=_*G,J=j*(3-2*_),$=j*N;if(i.length){F||(F=Array(i.length));for(var ee=i.length-1;ee>=0;--ee)F[ee]=Z*i[ee]+X*o[ee]+J*s[ee]+$*x[ee];return F}return Z*i+X*o+J*s+$*x},i.exports.derivative=function(i,o,s,x,_,F){var N=6*_*_-6*_,j=3*_*_-4*_+1,G=-6*_*_+6*_,Z=3*_*_-2*_;if(i.length){F||(F=Array(i.length));for(var X=i.length-1;X>=0;--X)F[X]=N*i[X]+j*o[X]+G*s[X]+Z*x[X];return F}return N*i+j*o+G*s[X]+Z*x}},4419:function(i,o,s){"use strict";var x=s(2183),_=s(1215);function LiftedPoint(i,o){this.point=i,this.index=o}function compareLifted(i,o){for(var s=i.point,x=o.point,_=s.length,F=0;F<_;++F){var N=x[F]-s[F];if(N)return N}return 0}i.exports=function(i,o){var s=i.length;if(0===s)return[];var F=i[0].length;if(F<1)return[];if(1===F)return function(i,o,s){if(1===i)return s?[[-1,0]]:[];var x=o.map(function(i,o){return[i[0],o]});x.sort(function(i,o){return i[0]-o[0]});for(var _=Array(i-1),F=1;F<i;++F){var N=x[F-1],j=x[F];_[F-1]=[N[1],j[1]]}return s&&_.push([-1,_[0][1]],[_[i-1][1],-1]),_}(s,i,o);for(var N=Array(s),j=1,G=0;G<s;++G){for(var Z=i[G],X=Array(F+1),J=0,$=0;$<F;++$){var ee=Z[$];X[$]=ee,J+=ee*ee}X[F]=J,N[G]=new LiftedPoint(X,G),j=Math.max(J,j)}_(N,compareLifted);for(var et=Array((s=N.length)+F+1),er=Array(s+F+1),en=(F+1)*(F+1)*j,ei=Array(F+1),G=0;G<=F;++G)ei[G]=0;ei[F]=en,et[0]=ei.slice(),er[0]=-1;for(var G=0;G<=F;++G){var X=ei.slice();X[G]=1,et[G+1]=X,er[G+1]=-1}for(var G=0;G<s;++G){var eo=N[G];et[G+F+1]=eo.point,er[G+F+1]=eo.index}var es=x(et,!1);if(es=o?es.filter(function(i){for(var o=0,s=0;s<=F;++s){var x=er[i[s]];if(x<0&&++o>=2)return!1;i[s]=x}return!0}):es.filter(function(i){for(var o=0;o<=F;++o){var s=er[i[o]];if(s<0)return!1;i[o]=s}return!0}),1&F)for(var G=0;G<es.length;++G){var eo=es[G],X=eo[0];eo[0]=eo[1],eo[1]=X}return es}},8362:function(i){var o=!1;if("undefined"!=typeof Float64Array){var s=new Float64Array(1),_=new Uint32Array(s.buffer);(s[0]=1,o=!0,1072693248===_[1])?(i.exports=function(i){return s[0]=i,[_[0],_[1]]},i.exports.pack=function(i,o){return _[0]=i,_[1]=o,s[0]},i.exports.lo=function(i){return s[0]=i,_[0]},i.exports.hi=function(i){return s[0]=i,_[1]}):1072693248===_[0]?(i.exports=function(i){return s[0]=i,[_[1],_[0]]},i.exports.pack=function(i,o){return _[1]=i,_[0]=o,s[0]},i.exports.lo=function(i){return s[0]=i,_[1]},i.exports.hi=function(i){return s[0]=i,_[0]}):o=!1}if(!o){var F=new x(8);i.exports=function(i){return F.writeDoubleLE(i,0,!0),[F.readUInt32LE(0,!0),F.readUInt32LE(4,!0)]},i.exports.pack=function(i,o){return F.writeUInt32LE(i,0,!0),F.writeUInt32LE(o,4,!0),F.readDoubleLE(0,!0)},i.exports.lo=function(i){return F.writeDoubleLE(i,0,!0),F.readUInt32LE(0,!0)},i.exports.hi=function(i){return F.writeDoubleLE(i,0,!0),F.readUInt32LE(4,!0)}}i.exports.sign=function(o){return i.exports.hi(o)>>>31},i.exports.exponent=function(o){return(i.exports.hi(o)<<1>>>21)-1023},i.exports.fraction=function(o){var s=i.exports.lo(o),x=i.exports.hi(o),_=1048575&x;return 2146435072&x&&(_+=1048576),[s,_]},i.exports.denormalized=function(o){return!(2146435072&i.exports.hi(o))}},3094:function(i){"use strict";i.exports=function(i,o){switch(void 0===o&&(o=0),typeof i){case"number":if(i>0)return function(i,o){var s,x;for(x=0,s=Array(i);x<i;++x)s[x]=o;return s}(0|i,o);break;case"object":if("number"==typeof i.length)return function dupe_array(i,o,s){var x=0|i[s];if(x<=0)return[];var _,F=Array(x);if(s===i.length-1)for(_=0;_<x;++_)F[_]=o;else for(_=0;_<x;++_)F[_]=dupe_array(i,o,s+1);return F}(i,o,0)}return[]}},8348:function(i,o,s){"use strict";i.exports=function(i,o){var s=i.length;if("number"!=typeof o){o=0;for(var _=0;_<s;++_){var F=i[_];o=Math.max(o,F[0],F[1])}o=(0|o)+1}for(var N=Array(o|=0),_=0;_<o;++_)N[_]=[];for(var _=0;_<s;++_){var F=i[_];N[F[0]].push(F[1]),N[F[1]].push(F[0])}for(var j=0;j<o;++j)x(N[j],function(i,o){return i-o});return N};var x=s(1215)},5795:function(i){"use strict";i.exports=function(i,o,s){var x=o||0,_=s||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[x*i[12]+i[8],x*i[13]+i[9],x*i[14]+i[10],x*i[15]+i[11]],[_*i[12]-i[8],_*i[13]-i[9],_*i[14]-i[10],_*i[15]-i[11]]]}},8444:function(i,o,s){"use strict";i.exports=function(i,o,s){switch(arguments.length){case 0:return new FilteredVector([0],[0],0);case 1:if("number"!=typeof i)return new FilteredVector(i,getZero(i.length),0);var x=getZero(i);return new FilteredVector(x,x,0);case 2:if("number"==typeof o){var x=getZero(i.length);return new FilteredVector(i,x,+o)}s=0;case 3:if(i.length!==o.length)throw Error("state and velocity lengths must match");return new FilteredVector(i,o,s)}};var x=s(9680),_=s(5070);function clamp(i,o,s){return Math.min(o,Math.max(i,s))}function FilteredVector(i,o,s){this.dimension=i.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var x=0;x<this.dimension;++x)this.bounds[0][x]=-1/0,this.bounds[1][x]=1/0;this._state=i.slice().reverse(),this._velocity=o.slice().reverse(),this._time=[s],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var F=FilteredVector.prototype;function getZero(i){for(var o=Array(i),s=0;s<i;++s)o[s]=0;return o}F.flush=function(i){var o=_.gt(this._time,i)-1;o<=0||(this._time.splice(0,o),this._state.splice(0,o*this.dimension),this._velocity.splice(0,o*this.dimension))},F.curve=function(i){var o=this._time,s=o.length,F=_.le(o,i),N=this._scratch[0],j=this._state,G=this._velocity,Z=this.dimension,X=this.bounds;if(F<0)for(var J=Z-1,$=0;$<Z;++$,--J)N[$]=j[J];else if(F>=s-1)for(var J=j.length-1,ee=i-o[s-1],$=0;$<Z;++$,--J)N[$]=j[J]+ee*G[J];else{for(var J=Z*(F+1)-1,et=o[F],er=o[F+1]-et||1,en=this._scratch[1],ei=this._scratch[2],eo=this._scratch[3],es=this._scratch[4],el=!0,$=0;$<Z;++$,--J)en[$]=j[J],eo[$]=G[J]*er,ei[$]=j[J+Z],es[$]=G[J+Z]*er,el=el&&en[$]===ei[$]&&eo[$]===es[$]&&0===eo[$];if(el)for(var $=0;$<Z;++$)N[$]=en[$];else x(en,eo,ei,es,(i-et)/er,N)}for(var ec=X[0],eu=X[1],$=0;$<Z;++$)N[$]=clamp(ec[$],eu[$],N[$]);return N},F.dcurve=function(i){var o=this._time,s=o.length,F=_.le(o,i),N=this._scratch[0],j=this._state,G=this._velocity,Z=this.dimension;if(F>=s-1){var X=j.length-1;o[s-1];for(var J=0;J<Z;++J,--X)N[J]=G[X]}else{for(var X=Z*(F+1)-1,$=o[F],ee=o[F+1]-$||1,et=this._scratch[1],er=this._scratch[2],en=this._scratch[3],ei=this._scratch[4],eo=!0,J=0;J<Z;++J,--X)et[J]=j[X],en[J]=G[X]*ee,er[J]=j[X+Z],ei[J]=G[X+Z]*ee,eo=eo&&et[J]===er[J]&&en[J]===ei[J]&&0===en[J];if(eo)for(var J=0;J<Z;++J)N[J]=0;else{x.derivative(et,en,er,ei,(i-$)/ee,N);for(var J=0;J<Z;++J)N[J]/=ee}}return N},F.lastT=function(){var i=this._time;return i[i.length-1]},F.stable=function(){for(var i=this._velocity,o=i.length,s=this.dimension-1;s>=0;--s)if(i[--o])return!1;return!0},F.jump=function(i){var o=this.lastT(),s=this.dimension;if(!(i<o)&&arguments.length===s+1){var x=this._state,_=this._velocity,F=x.length-this.dimension,N=this.bounds,j=N[0],G=N[1];this._time.push(o,i);for(var Z=0;Z<2;++Z)for(var X=0;X<s;++X)x.push(x[F++]),_.push(0);this._time.push(i);for(var X=s;X>0;--X)x.push(clamp(j[X-1],G[X-1],arguments[X])),_.push(0)}},F.push=function(i){var o=this.lastT(),s=this.dimension;if(!(i<o)&&arguments.length===s+1){var x=this._state,_=this._velocity,F=x.length-this.dimension,N=i-o,j=this.bounds,G=j[0],Z=j[1],X=N>1e-6?1/N:0;this._time.push(i);for(var J=s;J>0;--J){var $=clamp(G[J-1],Z[J-1],arguments[J]);x.push($),_.push(($-x[F++])*X)}}},F.set=function(i){var o=this.dimension;if(!(i<this.lastT())&&arguments.length===o+1){var s=this._state,x=this._velocity,_=this.bounds,F=_[0],N=_[1];this._time.push(i);for(var j=o;j>0;--j)s.push(clamp(F[j-1],N[j-1],arguments[j])),x.push(0)}},F.move=function(i){var o=this.lastT(),s=this.dimension;if(!(i<=o)&&arguments.length===s+1){var x=this._state,_=this._velocity,F=x.length-this.dimension,N=this.bounds,j=N[0],G=N[1],Z=i-o,X=Z>1e-6?1/Z:0;this._time.push(i);for(var J=s;J>0;--J){var $=arguments[J];x.push(clamp(j[J-1],G[J-1],x[F++]+$)),_.push($*X)}}},F.idle=function(i){var o=this.lastT();if(!(i<o)){var s=this.dimension,x=this._state,_=this._velocity,F=x.length-s,N=this.bounds,j=N[0],G=N[1],Z=i-o;this._time.push(i);for(var X=s-1;X>=0;--X)x.push(clamp(j[X],G[X],x[F]+Z*_[F])),_.push(0),F+=1}}},7080:function(i){"use strict";function RBNode(i,o,s,x,_,F){this._color=i,this.key=o,this.value=s,this.left=x,this.right=_,this._count=F}function cloneNode(i){return new RBNode(i._color,i.key,i.value,i.left,i.right,i._count)}function repaint(i,o){return new RBNode(i,o.key,o.value,o.left,o.right,o._count)}function recount(i){i._count=1+(i.left?i.left._count:0)+(i.right?i.right._count:0)}function RedBlackTree(i,o){this._compare=i,this.root=o}i.exports=function(i){return new RedBlackTree(i||defaultCompare,null)};var o=RedBlackTree.prototype;function RedBlackTreeIterator(i,o){this.tree=i,this._stack=o}Object.defineProperty(o,"keys",{get:function(){var i=[];return this.forEach(function(o,s){i.push(o)}),i}}),Object.defineProperty(o,"values",{get:function(){var i=[];return this.forEach(function(o,s){i.push(s)}),i}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(i,o){for(var s=this._compare,x=this.root,_=[],F=[];x;){var N=s(i,x.key);_.push(x),F.push(N),x=N<=0?x.left:x.right}_.push(new RBNode(0,i,o,null,null,1));for(var j=_.length-2;j>=0;--j){var x=_[j];F[j]<=0?_[j]=new RBNode(x._color,x.key,x.value,_[j+1],x.right,x._count+1):_[j]=new RBNode(x._color,x.key,x.value,x.left,_[j+1],x._count+1)}for(var j=_.length-1;j>1;--j){var G=_[j-1],x=_[j];if(1===G._color||1===x._color)break;var Z=_[j-2];if(Z.left===G){if(G.left===x){var X=Z.right;if(X&&0===X._color)G._color=1,Z.right=repaint(1,X),Z._color=0,j-=1;else{if(Z._color=0,Z.left=G.right,G._color=1,G.right=Z,_[j-2]=G,_[j-1]=x,recount(Z),recount(G),j>=3){var J=_[j-3];J.left===Z?J.left=G:J.right=G}break}}else{var X=Z.right;if(X&&0===X._color)G._color=1,Z.right=repaint(1,X),Z._color=0,j-=1;else{if(G.right=x.left,Z._color=0,Z.left=x.right,x._color=1,x.left=G,x.right=Z,_[j-2]=x,_[j-1]=G,recount(Z),recount(G),recount(x),j>=3){var J=_[j-3];J.left===Z?J.left=x:J.right=x}break}}}else if(G.right===x){var X=Z.left;if(X&&0===X._color)G._color=1,Z.left=repaint(1,X),Z._color=0,j-=1;else{if(Z._color=0,Z.right=G.left,G._color=1,G.left=Z,_[j-2]=G,_[j-1]=x,recount(Z),recount(G),j>=3){var J=_[j-3];J.right===Z?J.right=G:J.left=G}break}}else{var X=Z.left;if(X&&0===X._color)G._color=1,Z.left=repaint(1,X),Z._color=0,j-=1;else{if(G.left=x.right,Z._color=0,Z.right=x.left,x._color=1,x.right=G,x.left=Z,_[j-2]=x,_[j-1]=G,recount(Z),recount(G),recount(x),j>=3){var J=_[j-3];J.right===Z?J.right=x:J.left=x}break}}}return _[0]._color=1,new RedBlackTree(s,_[0])},o.forEach=function(i,o,s){if(this.root)switch(arguments.length){case 1:return function doVisitFull(i,o){if(o.left){var s=doVisitFull(i,o.left);if(s)return s}var s=i(o.key,o.value);return s||(o.right?doVisitFull(i,o.right):void 0)}(i,this.root);case 2:return function doVisitHalf(i,o,s,x){if(0>=o(i,x.key)){if(x.left){var _=doVisitHalf(i,o,s,x.left);if(_)return _}var _=s(x.key,x.value);if(_)return _}if(x.right)return doVisitHalf(i,o,s,x.right)}(o,this._compare,i,this.root);case 3:if(this._compare(o,s)>=0)return;return function doVisit(i,o,s,x,_){var F,N=s(i,_.key),j=s(o,_.key);return N<=0&&(_.left&&(F=doVisit(i,o,s,x,_.left))||j>0&&(F=x(_.key,_.value)))?F:j>0&&_.right?doVisit(i,o,s,x,_.right):void 0}(o,s,this._compare,i,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var i=[],o=this.root;o;)i.push(o),o=o.left;return new RedBlackTreeIterator(this,i)}}),Object.defineProperty(o,"end",{get:function(){for(var i=[],o=this.root;o;)i.push(o),o=o.right;return new RedBlackTreeIterator(this,i)}}),o.at=function(i){if(i<0)return new RedBlackTreeIterator(this,[]);for(var o=this.root,s=[];;){if(s.push(o),o.left){if(i<o.left._count){o=o.left;continue}i-=o.left._count}if(!i)return new RedBlackTreeIterator(this,s);if(i-=1,o.right){if(i>=o.right._count)break;o=o.right}else break}return new RedBlackTreeIterator(this,[])},o.ge=function(i){for(var o=this._compare,s=this.root,x=[],_=0;s;){var F=o(i,s.key);x.push(s),F<=0&&(_=x.length),s=F<=0?s.left:s.right}return x.length=_,new RedBlackTreeIterator(this,x)},o.gt=function(i){for(var o=this._compare,s=this.root,x=[],_=0;s;){var F=o(i,s.key);x.push(s),F<0&&(_=x.length),s=F<0?s.left:s.right}return x.length=_,new RedBlackTreeIterator(this,x)},o.lt=function(i){for(var o=this._compare,s=this.root,x=[],_=0;s;){var F=o(i,s.key);x.push(s),F>0&&(_=x.length),s=F<=0?s.left:s.right}return x.length=_,new RedBlackTreeIterator(this,x)},o.le=function(i){for(var o=this._compare,s=this.root,x=[],_=0;s;){var F=o(i,s.key);x.push(s),F>=0&&(_=x.length),s=F<0?s.left:s.right}return x.length=_,new RedBlackTreeIterator(this,x)},o.find=function(i){for(var o=this._compare,s=this.root,x=[];s;){var _=o(i,s.key);if(x.push(s),0===_)return new RedBlackTreeIterator(this,x);s=_<=0?s.left:s.right}return new RedBlackTreeIterator(this,[])},o.remove=function(i){var o=this.find(i);return o?o.remove():this},o.get=function(i){for(var o=this._compare,s=this.root;s;){var x=o(i,s.key);if(0===x)return s.value;s=x<=0?s.left:s.right}};var s=RedBlackTreeIterator.prototype;function swapNode(i,o){i.key=o.key,i.value=o.value,i.left=o.left,i.right=o.right,i._color=o._color,i._count=o._count}function defaultCompare(i,o){return i<o?-1:i>o?1:0}Object.defineProperty(s,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(s,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),s.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())},s.remove=function(){var i=this._stack;if(0===i.length)return this.tree;var o=Array(i.length),s=i[i.length-1];o[o.length-1]=new RBNode(s._color,s.key,s.value,s.left,s.right,s._count);for(var x=i.length-2;x>=0;--x){var s=i[x];s.left===i[x+1]?o[x]=new RBNode(s._color,s.key,s.value,o[x+1],s.right,s._count):o[x]=new RBNode(s._color,s.key,s.value,s.left,o[x+1],s._count)}if((s=o[o.length-1]).left&&s.right){var _=o.length;for(s=s.left;s.right;)o.push(s),s=s.right;var F=o[_-1];o.push(new RBNode(s._color,F.key,F.value,s.left,s.right,s._count)),o[_-1].key=s.key,o[_-1].value=s.value;for(var x=o.length-2;x>=_;--x)s=o[x],o[x]=new RBNode(s._color,s.key,s.value,s.left,o[x+1],s._count);o[_-1].left=o[_]}if(0===(s=o[o.length-1])._color){var N=o[o.length-2];N.left===s?N.left=null:N.right===s&&(N.right=null),o.pop();for(var x=0;x<o.length;++x)o[x]._count--}else if(s.left||s.right){s.left?swapNode(s,s.left):s.right&&swapNode(s,s.right),s._color=1;for(var x=0;x<o.length-1;++x)o[x]._count--}else{if(1===o.length)return new RedBlackTree(this.tree._compare,null);for(var x=0;x<o.length;++x)o[x]._count--;var j=o[o.length-2];(function(i){for(var o,s,x,_,F=i.length-1;F>=0;--F){if(o=i[F],0===F){o._color=1;return}if((s=i[F-1]).left===o){if((x=s.right).right&&0===x.right._color){if(_=(x=s.right=cloneNode(x)).right=cloneNode(x.right),s.right=x.left,x.left=s,x.right=_,x._color=s._color,o._color=1,s._color=1,_._color=1,recount(s),recount(x),F>1){var N=i[F-2];N.left===s?N.left=x:N.right=x}i[F-1]=x;return}if(x.left&&0===x.left._color){if(_=(x=s.right=cloneNode(x)).left=cloneNode(x.left),s.right=_.left,x.left=_.right,_.left=s,_.right=x,_._color=s._color,s._color=1,x._color=1,o._color=1,recount(s),recount(x),recount(_),F>1){var N=i[F-2];N.left===s?N.left=_:N.right=_}i[F-1]=_;return}if(1===x._color){if(0===s._color){s._color=1,s.right=repaint(0,x);return}s.right=repaint(0,x);continue}if(x=cloneNode(x),s.right=x.left,x.left=s,x._color=s._color,s._color=0,recount(s),recount(x),F>1){var N=i[F-2];N.left===s?N.left=x:N.right=x}i[F-1]=x,i[F]=s,F+1<i.length?i[F+1]=o:i.push(o),F+=2}else{if((x=s.left).left&&0===x.left._color){if(_=(x=s.left=cloneNode(x)).left=cloneNode(x.left),s.left=x.right,x.right=s,x.left=_,x._color=s._color,o._color=1,s._color=1,_._color=1,recount(s),recount(x),F>1){var N=i[F-2];N.right===s?N.right=x:N.left=x}i[F-1]=x;return}if(x.right&&0===x.right._color){if(_=(x=s.left=cloneNode(x)).right=cloneNode(x.right),s.left=_.right,x.right=_.left,_.right=s,_.left=x,_._color=s._color,s._color=1,x._color=1,o._color=1,recount(s),recount(x),recount(_),F>1){var N=i[F-2];N.right===s?N.right=_:N.left=_}i[F-1]=_;return}if(1===x._color){if(0===s._color){s._color=1,s.left=repaint(0,x);return}s.left=repaint(0,x);continue}if(x=cloneNode(x),s.left=x.right,x.right=s,x._color=s._color,s._color=0,recount(s),recount(x),F>1){var N=i[F-2];N.right===s?N.right=x:N.left=x}i[F-1]=x,i[F]=s,F+1<i.length?i[F+1]=o:i.push(o),F+=2}}})(o),j.left===s?j.left=null:j.right=null}return new RedBlackTree(this.tree._compare,o[0])},Object.defineProperty(s,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(s,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(s,"index",{get:function(){var i=0,o=this._stack;if(0===o.length){var s=this.tree.root;return s?s._count:0}o[o.length-1].left&&(i=o[o.length-1].left._count);for(var x=o.length-2;x>=0;--x)o[x+1]===o[x].right&&(++i,o[x].left&&(i+=o[x].left._count));return i},enumerable:!0}),s.next=function(){var i=this._stack;if(0!==i.length){var o=i[i.length-1];if(o.right)for(o=o.right;o;)i.push(o),o=o.left;else for(i.pop();i.length>0&&i[i.length-1].right===o;)o=i[i.length-1],i.pop()}},Object.defineProperty(s,"hasNext",{get:function(){var i=this._stack;if(0===i.length)return!1;if(i[i.length-1].right)return!0;for(var o=i.length-1;o>0;--o)if(i[o-1].left===i[o])return!0;return!1}}),s.update=function(i){var o=this._stack;if(0===o.length)throw Error("Can't update empty node!");var s=Array(o.length),x=o[o.length-1];s[s.length-1]=new RBNode(x._color,x.key,i,x.left,x.right,x._count);for(var _=o.length-2;_>=0;--_)(x=o[_]).left===o[_+1]?s[_]=new RBNode(x._color,x.key,x.value,s[_+1],x.right,x._count):s[_]=new RBNode(x._color,x.key,x.value,x.left,s[_+1],x._count);return new RedBlackTree(this.tree._compare,s[0])},s.prev=function(){var i=this._stack;if(0!==i.length){var o=i[i.length-1];if(o.left)for(o=o.left;o;)i.push(o),o=o.right;else for(i.pop();i.length>0&&i[i.length-1].left===o;)o=i[i.length-1],i.pop()}},Object.defineProperty(s,"hasPrev",{get:function(){var i=this._stack;if(0===i.length)return!1;if(i[i.length-1].left)return!0;for(var o=i.length-1;o>0;--o)if(i[o-1].right===i[o])return!0;return!1}})},7453:function(i,o,s){"use strict";i.exports=function(i,o){var s=new Axes(i);return s.update(o),s};var x=s(9557),_=s(1681),F=s(1011),N=s(2864),j=s(8468),G=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function copyVec3(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}function Axes(i){this.gl=i,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=F(i)}var Z=Axes.prototype;function OffsetInfo(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}Z.update=function(i){function parseOption(o,s,x){if(x in i){var _,F=i[x],N=this[x];(o?Array.isArray(F)&&Array.isArray(F[0]):Array.isArray(F))?this[x]=_=[s(F[0]),s(F[1]),s(F[2])]:this[x]=_=[s(F),s(F),s(F)];for(var j=0;j<3;++j)if(_[j]!==N[j])return!0}return!1}i=i||{};var o,s=parseOption.bind(this,!1,Number),F=parseOption.bind(this,!1,Boolean),N=parseOption.bind(this,!1,String),G=parseOption.bind(this,!0,function(i){if(Array.isArray(i)){if(3===i.length)return[+i[0],+i[1],+i[2],1];if(4===i.length)return[+i[0],+i[1],+i[2],+i[3]]}return[0,0,0,1]}),Z=!1,X=!1;if("bounds"in i)for(var J=i.bounds,$=0;$<2;++$)for(var ee=0;ee<3;++ee)J[$][ee]!==this.bounds[$][ee]&&(X=!0),this.bounds[$][ee]=J[$][ee];if("ticks"in i){o=i.ticks,Z=!0,this.autoTicks=!1;for(var $=0;$<3;++$)this.tickSpacing[$]=0}else s("tickSpacing")&&(this.autoTicks=!0,X=!0);if(this._firstInit&&("ticks"in i||"tickSpacing"in i||(this.autoTicks=!0),X=!0,Z=!0,this._firstInit=!1),X&&this.autoTicks&&(o=j.create(this.bounds,this.tickSpacing),Z=!0),Z){for(var $=0;$<3;++$)o[$].sort(function(i,o){return i.x-o.x});j.equal(o,this.ticks)?Z=!1:this.ticks=o}F("tickEnable"),N("tickFont")&&(Z=!0),s("tickSize"),s("tickAngle"),s("tickPad"),G("tickColor");var et=N("labels");N("labelFont")&&(et=!0),F("labelEnable"),s("labelSize"),s("labelPad"),G("labelColor"),F("lineEnable"),F("lineMirror"),s("lineWidth"),G("lineColor"),F("lineTickEnable"),F("lineTickMirror"),s("lineTickLength"),s("lineTickWidth"),G("lineTickColor"),F("gridEnable"),s("gridWidth"),G("gridColor"),F("zeroEnable"),G("zeroLineColor"),s("zeroLineWidth"),F("backgroundEnable"),G("backgroundColor"),this._text?this._text&&(et||Z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=x(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&Z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=_(this.gl,this.bounds,this.ticks))};var X=[new OffsetInfo,new OffsetInfo,new OffsetInfo],J=[0,0,0],$={model:G,view:G,projection:G,_ortho:!1};Z.isOpaque=function(){return!0},Z.isTransparent=function(){return!1},Z.drawTransparent=function(i){};var ee=[0,0,0],et=[0,0,0],er=[0,0,0];Z.draw=function(i){i=i||$;for(var o,s,x,_=this.gl,F=i.model||G,j=i.view||G,Z=i.projection||G,en=this.bounds,ei=i._ortho||!1,eo=N(F,j,Z,en,ei),es=eo.cubeEdges,el=eo.axis,ec=j[12],eu=j[13],ef=j[14],eh=j[15],ed=(ei?2:1)*this.pixelRatio*(Z[3]*ec+Z[7]*eu+Z[11]*ef+Z[15]*eh)/_.drawingBufferHeight,ep=0;ep<3;++ep)this.lastCubeProps.cubeEdges[ep]=es[ep],this.lastCubeProps.axis[ep]=el[ep];for(var ep=0;ep<3;++ep)!function(i,o,s,x,_){for(var F=i.primalOffset,N=i.primalMinor,j=i.mirrorOffset,G=i.mirrorMinor,Z=x[o],X=0;X<3;++X)if(o!==X){var J=F,$=j,ee=N,et=G;Z&1<<X&&(J=j,$=F,ee=G,et=N),J[X]=s[0][X],$[X]=s[1][X],_[X]>0?(ee[X]=-1,et[X]=0):(ee[X]=0,et[X]=1)}}(X[ep],ep,this.bounds,es,el);for(var _=this.gl,ep=0;ep<3;++ep)this.backgroundEnable[ep]?J[ep]=el[ep]:J[ep]=0;this._background.draw(F,j,Z,en,J,this.backgroundColor),this._lines.bind(F,j,Z,this);for(var ep=0;ep<3;++ep){var eg=[0,0,0];el[ep]>0?eg[ep]=en[1][ep]:eg[ep]=en[0][ep];for(var em=0;em<2;++em){var ey=(ep+1+em)%3,ev=(ep+1+(1^em))%3;this.gridEnable[ey]&&this._lines.drawGrid(ey,ev,this.bounds,eg,this.gridColor[ey],this.gridWidth[ey]*this.pixelRatio)}for(var em=0;em<2;++em){var ey=(ep+1+em)%3,ev=(ep+1+(1^em))%3;this.zeroEnable[ev]&&0>=Math.min(en[0][ev],en[1][ev])&&Math.max(en[0][ev],en[1][ev])>=0&&this._lines.drawZero(ey,ev,this.bounds,eg,this.zeroLineColor[ev],this.zeroLineWidth[ev]*this.pixelRatio)}}for(var ep=0;ep<3;++ep){this.lineEnable[ep]&&this._lines.drawAxisLine(ep,this.bounds,X[ep].primalOffset,this.lineColor[ep],this.lineWidth[ep]*this.pixelRatio),this.lineMirror[ep]&&this._lines.drawAxisLine(ep,this.bounds,X[ep].mirrorOffset,this.lineColor[ep],this.lineWidth[ep]*this.pixelRatio);for(var ex=copyVec3(ee,X[ep].primalMinor),e_=copyVec3(et,X[ep].mirrorMinor),ew=this.lineTickLength,em=0;em<3;++em){var eT=ed/F[5*em];ex[em]*=ew[em]*eT,e_[em]*=ew[em]*eT}this.lineTickEnable[ep]&&this._lines.drawAxisTicks(ep,X[ep].primalOffset,ex,this.lineTickColor[ep],this.lineTickWidth[ep]*this.pixelRatio),this.lineTickMirror[ep]&&this._lines.drawAxisTicks(ep,X[ep].mirrorOffset,e_,this.lineTickColor[ep],this.lineTickWidth[ep]*this.pixelRatio)}function alignTo(i){(x=[0,0,0])[i]=1}this._lines.unbind(),this._text.bind(F,j,Z,this.pixelRatio);for(var ep=0;ep<3;++ep){for(var ek=X[ep].primalMinor,eA=X[ep].mirrorMinor,eS=copyVec3(er,X[ep].primalOffset),em=0;em<3;++em)this.lineTickEnable[ep]&&(eS[em]+=ed*ek[em]*Math.max(this.lineTickLength[em],0)/F[5*em]);var eM=[0,0,0];if(eM[ep]=1,this.tickEnable[ep]){-3600===this.tickAngle[ep]?(this.tickAngle[ep]=0,this.tickAlign[ep]="auto"):this.tickAlign[ep]=-1,s=1,"auto"===(o=[this.tickAlign[ep],.5,s])[0]?o[0]=0:o[0]=parseInt(""+o[0]),x=[0,0,0],function(i,o,s){var x=(i+1)%3,_=(i+2)%3,F=o[x],N=o[_],j=s[x],G=s[_];if(F>0&&G>0||F>0&&G<0){alignTo(x);return}F<0&&G>0?alignTo(x):F<0&&G<0?alignTo(x):N>0&&j>0?alignTo(_):N>0&&j<0?alignTo(_):N<0&&j>0?alignTo(_):N<0&&j<0&&alignTo(_)}(ep,ek,eA);for(var em=0;em<3;++em)eS[em]+=ed*ek[em]*this.tickPad[em]/F[5*em];this._text.drawTicks(ep,this.tickSize[ep],this.tickAngle[ep],eS,this.tickColor[ep],eM,x,o)}if(this.labelEnable[ep]){s=0,x=[0,0,0],this.labels[ep].length>4&&(alignTo(ep),s=1),"auto"===(o=[this.labelAlign[ep],.5,s])[0]?o[0]=0:o[0]=parseInt(""+o[0]);for(var em=0;em<3;++em)eS[em]+=ed*ek[em]*this.labelPad[em]/F[5*em];eS[ep]+=.5*(en[0][ep]+en[1][ep]),this._text.drawLabel(ep,this.labelSize[ep],this.labelAngle[ep],eS,this.labelColor[ep],[0,0,0],x,o)}}this._text.unbind()},Z.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(i,o,s){"use strict";i.exports=function(i){for(var o=[],s=[],N=0,j=0;j<3;++j)for(var G=(j+1)%3,Z=(j+2)%3,X=[0,0,0],J=[0,0,0],$=-1;$<=1;$+=2){s.push(N,N+2,N+1,N+1,N+2,N+3),X[j]=$,J[j]=$;for(var ee=-1;ee<=1;ee+=2){X[G]=ee;for(var et=-1;et<=1;et+=2)X[Z]=et,o.push(X[0],X[1],X[2],J[0],J[1],J[2]),N+=1}var er=G;G=Z,Z=er}var en=x(i,new Float32Array(o)),ei=x(i,new Uint16Array(s),i.ELEMENT_ARRAY_BUFFER),eo=_(i,[{buffer:en,type:i.FLOAT,size:3,offset:0,stride:24},{buffer:en,type:i.FLOAT,size:3,offset:12,stride:24}],ei),es=F(i);return es.attributes.position.location=0,es.attributes.normal.location=1,new BackgroundCube(i,en,eo,es)};var x=s(5827),_=s(2944),F=s(1943).bg;function BackgroundCube(i,o,s,x){this.gl=i,this.buffer=o,this.vao=s,this.shader=x}var N=BackgroundCube.prototype;N.draw=function(i,o,s,x,_,F){for(var N=!1,j=0;j<3;++j)N=N||_[j];if(N){var G=this.gl;G.enable(G.POLYGON_OFFSET_FILL),G.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:i,view:o,projection:s,bounds:x,enable:_,colors:F},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),G.disable(G.POLYGON_OFFSET_FILL)}},N.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(i,o,s){"use strict";i.exports=function(i,o,s,en,ei){_(j,o,i),_(j,s,j);for(var eo=0,es=0;es<2;++es){X[2]=en[es][2];for(var el=0;el<2;++el){X[1]=en[el][1];for(var ec=0;ec<2;++ec)X[0]=en[ec][0],function(i,o,s){for(var x=0;x<4;++x){i[x]=s[12+x];for(var _=0;_<3;++_)i[x]+=o[_]*s[4*_+x]}}(G[eo],X,j),eo+=1}}for(var eu=-1,es=0;es<8;++es){for(var ef=G[es][3],eh=0;eh<3;++eh)Z[es][eh]=G[es][eh]/ef;ei&&(Z[es][2]*=-1),ef<0&&(eu<0?eu=es:Z[es][2]<Z[eu][2]&&(eu=es))}if(eu<0){eu=0;for(var ed=0;ed<3;++ed){for(var ep=(ed+2)%3,eg=(ed+1)%3,em=-1,ey=-1,ev=0;ev<2;++ev){var ex=ev<<ed,e_=ex+(ev<<ep)+(1-ev<<eg),ew=ex+(1-ev<<ep)+(ev<<eg);0>N(Z[ex],Z[e_],Z[ew],J)||(ev?em=1:ey=1)}if(em<0||ey<0){ey>em&&(eu|=1<<ed);continue}for(var ev=0;ev<2;++ev){var ex=ev<<ed,e_=ex+(ev<<ep)+(1-ev<<eg),ew=ex+(1-ev<<ep)+(ev<<eg),eT=function(i){for(var o=0;o<$.length;++o)if((i=F.positive(i,$[o])).length<3)return 0;for(var s=i[0],x=s[0]/s[3],_=s[1]/s[3],N=0,o=1;o+1<i.length;++o){var j=i[o],G=i[o+1],Z=j[0]/j[3],X=j[1]/j[3],J=G[0]/G[3],ee=G[1]/G[3],et=X-_;N+=Math.abs((Z-x)*(ee-_)-et*(J-x))}return N}([G[ex],G[e_],G[ew],G[ex+(1<<ep)+(1<<eg)]]);ev?em=eT:ey=eT}if(ey>em){eu|=1<<ed;continue}}}for(var ek=7^eu,eA=-1,es=0;es<8;++es)es!==eu&&es!==ek&&(eA<0?eA=es:Z[eA][1]>Z[es][1]&&(eA=es));for(var eS=-1,es=0;es<3;++es){var eM=eA^1<<es;if(eM!==eu&&eM!==ek){eS<0&&(eS=eM);var eg=Z[eM];eg[0]<Z[eS][0]&&(eS=eM)}}for(var eC=-1,es=0;es<3;++es){var eM=eA^1<<es;if(eM!==eu&&eM!==ek&&eM!==eS){eC<0&&(eC=eM);var eg=Z[eM];eg[0]>Z[eC][0]&&(eC=eM)}}ee[0]=ee[1]=ee[2]=0,ee[x.log2(eS^eA)]=eA&eS,ee[x.log2(eA^eC)]=eA&eC;var eE=7^eC;eE===eu||eE===ek?(eE=7^eS,ee[x.log2(eC^eE)]=eE&eC):ee[x.log2(eS^eE)]=eE&eS;for(var eL=eu,ed=0;ed<3;++ed)eL&1<<ed?et[ed]=-1:et[ed]=1;return er};var x=s(2288),_=s(104),F=s(4670),N=s(417),j=Array(16),G=Array(8),Z=Array(8),X=[,,,],J=[0,0,0];!function(){for(var i=0;i<8;++i)G[i]=[1,1,1,1],Z[i]=[1,1,1]}();var $=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],ee=[1,1,1],et=[0,0,0],er={cubeEdges:ee,axis:et}},1681:function(i,o,s){"use strict";i.exports=function(i,o,s){var N=[],j=[0,0,0],G=[0,0,0],Z=[0,0,0],X=[0,0,0];N.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var J=0;J<3;++J){for(var $=N.length/3|0,ee=0;ee<s[J].length;++ee){var et=+s[J][ee].x;N.push(et,0,1,et,1,1,et,0,-1,et,0,-1,et,1,1,et,1,-1)}var er=N.length/3|0;j[J]=$,G[J]=er-$;for(var $=N.length/3|0,en=0;en<s[J].length;++en){var et=+s[J][en].x;N.push(et,0,1,et,1,1,et,0,-1,et,0,-1,et,1,1,et,1,-1)}var er=N.length/3|0;Z[J]=$,X[J]=er-$}var ei=x(i,new Float32Array(N)),eo=_(i,[{buffer:ei,type:i.FLOAT,size:3,stride:0,offset:0}]),es=F(i);return es.attributes.position.location=0,new Lines(i,ei,eo,es,G,j,X,Z)};var x=s(5827),_=s(2944),F=s(1943).j,N=[0,0,0],j=[0,0,0],G=[0,0,0],Z=[0,0,0],X=[1,1];function zeroVec(i){return i[0]=i[1]=i[2]=0,i}function copyVec(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}function Lines(i,o,s,x,_,F,N,j){this.gl=i,this.vertBuffer=o,this.vao=s,this.shader=x,this.tickCount=_,this.tickOffset=F,this.gridCount=N,this.gridOffset=j}var J=Lines.prototype;J.bind=function(i,o,s){this.shader.bind(),this.shader.uniforms.model=i,this.shader.uniforms.view=o,this.shader.uniforms.projection=s,X[0]=this.gl.drawingBufferWidth,X[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=X,this.vao.bind()},J.unbind=function(){this.vao.unbind()},J.drawAxisLine=function(i,o,s,x,_){var F=zeroVec(j);this.shader.uniforms.majorAxis=j,F[i]=o[1][i]-o[0][i],this.shader.uniforms.minorAxis=F;var N=copyVec(Z,s);N[i]+=o[0][i],this.shader.uniforms.offset=N,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=x;var X=zeroVec(G);X[(i+2)%3]=1,this.shader.uniforms.screenAxis=X,this.vao.draw(this.gl.TRIANGLES,6);var X=zeroVec(G);X[(i+1)%3]=1,this.shader.uniforms.screenAxis=X,this.vao.draw(this.gl.TRIANGLES,6)},J.drawAxisTicks=function(i,o,s,x,_){if(this.tickCount[i]){var F=zeroVec(N);F[i]=1,this.shader.uniforms.majorAxis=F,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=s,this.shader.uniforms.color=x,this.shader.uniforms.lineWidth=_;var j=zeroVec(G);j[i]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,this.tickCount[i],this.tickOffset[i])}},J.drawGrid=function(i,o,s,x,_,F){if(this.gridCount[i]){var X=zeroVec(j);X[o]=s[1][o]-s[0][o],this.shader.uniforms.minorAxis=X;var J=copyVec(Z,x);J[o]+=s[0][o],this.shader.uniforms.offset=J;var $=zeroVec(N);$[i]=1,this.shader.uniforms.majorAxis=$;var ee=zeroVec(G);ee[i]=1,this.shader.uniforms.screenAxis=ee,this.shader.uniforms.lineWidth=F,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[i],this.gridOffset[i])}},J.drawZero=function(i,o,s,x,_,F){var N=zeroVec(j);this.shader.uniforms.majorAxis=N,N[i]=s[1][i]-s[0][i],this.shader.uniforms.minorAxis=N;var X=copyVec(Z,x);X[i]+=s[0][i],this.shader.uniforms.offset=X;var J=zeroVec(G);J[o]=1,this.shader.uniforms.screenAxis=J,this.shader.uniforms.lineWidth=F,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},J.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(i,o,s){"use strict";var x=s(6832),_=s(5158),F=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),N=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);o.j=function(i){return _(i,F,N,null,[{name:"position",type:"vec3"}])};var j=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),G=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);o.f=function(i){return _(i,j,G,null,[{name:"position",type:"vec3"}])};var Z=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),X=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);o.bg=function(i){return _(i,Z,X,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(i,o,s){"use strict";i.exports=function(i,o,s,_,N,G){var Z=x(i),X=F(i,[{buffer:Z,size:3}]),J=j(i);J.attributes.position.location=0;var $=new TextSprites(i,J,Z,X);return $.update(o,s,_,N,G),$};var x=s(5827),F=s(2944),N=s(875),j=s(1943).f,G=window||_.global||{},Z=G.__TEXT_CACHE||{};function TextSprites(i,o,s,x){this.gl=i,this.shader=o,this.buffer=s,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}G.__TEXT_CACHE={};var X=TextSprites.prototype,J=[0,0];X.bind=function(i,o,s,x){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=i,_.view=o,_.projection=s,_.pixelScale=x,J[0]=this.gl.drawingBufferWidth,J[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=J},X.unbind=function(){this.vao.unbind()},X.update=function(i,o,s,x,_){var F=[];function addItem(i,o,s,x,_,j){var G=Z[s];G||(G=Z[s]={});var X=G[o];X||(X=G[o]=function(i,o){try{return N(i,o)}catch(o){return console.warn('error vectorizing text:"'+i+'" error:',o),{cells:[],positions:[]}}}(o,{triangles:!0,font:s,textAlign:"center",textBaseline:"middle",lineSpacing:_,styletags:j}));for(var J=(x||12)/12,$=X.positions,ee=X.cells,et=0,er=ee.length;et<er;++et)for(var en=ee[et],ei=2;ei>=0;--ei){var eo=$[en[ei]];F.push(J*eo[0],-J*eo[1],i)}}for(var j=[0,0,0],G=[0,0,0],X=[0,0,0],J=[0,0,0],$={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},ee=0;ee<3;++ee){X[ee]=F.length/3|0,addItem(.5*(i[0][ee]+i[1][ee]),o[ee],s[ee],12,1.25,$),J[ee]=(F.length/3|0)-X[ee],j[ee]=F.length/3|0;for(var et=0;et<x[ee].length;++et)x[ee][et].text&&addItem(x[ee][et].x,x[ee][et].text,x[ee][et].font||_,x[ee][et].fontSize||12,1.25,$);G[ee]=(F.length/3|0)-j[ee]}this.buffer.update(F),this.tickOffset=j,this.tickCount=G,this.labelOffset=X,this.labelCount=J},X.drawTicks=function(i,o,s,x,_,F,N,j){this.tickCount[i]&&(this.shader.uniforms.axis=F,this.shader.uniforms.color=_,this.shader.uniforms.angle=s,this.shader.uniforms.scale=o,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=N,this.shader.uniforms.alignOpt=j,this.vao.draw(this.gl.TRIANGLES,this.tickCount[i],this.tickOffset[i]))},X.drawLabel=function(i,o,s,x,_,F,N,j){this.labelCount[i]&&(this.shader.uniforms.axis=F,this.shader.uniforms.color=_,this.shader.uniforms.angle=s,this.shader.uniforms.scale=o,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=N,this.shader.uniforms.alignOpt=j,this.vao.draw(this.gl.TRIANGLES,this.labelCount[i],this.labelOffset[i]))},X.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(i,o){"use strict";function prettyPrint(i,o){var s=i+"",x=s.indexOf("."),_=0;x>=0&&(_=s.length-x-1);var F=Math.pow(10,_),N=Math.round(i*o*F),j=N+"";if(j.indexOf("e")>=0)return j;var G=N/F,Z=N%F;N<0?(G=0|-Math.ceil(G),Z=0|-Z):(G=0|Math.floor(G),Z|=0);var X=""+G;if(N<0&&(X="-"+X),!_)return X;for(var J=""+Z;J.length<_;)J="0"+J;return X+"."+J}o.create=function(i,o){for(var s=[],x=0;x<3;++x){var _=[];i[0][x],i[1][x];for(var F=0;F*o[x]<=i[1][x];++F)_.push({x:F*o[x],text:prettyPrint(o[x],F)});for(var F=-1;F*o[x]>=i[0][x];--F)_.push({x:F*o[x],text:prettyPrint(o[x],F)});s.push(_)}return s},o.equal=function(i,o){for(var s=0;s<3;++s){if(i[s].length!==o[s].length)return!1;for(var x=0;x<i[s].length;++x){var _=i[s][x],F=o[s][x];if(_.x!==F.x||_.text!==F.text||_.font!==F.font||_.fontColor!==F.fontColor||_.fontSize!==F.fontSize||_.dx!==F.dx||_.dy!==F.dy)return!1}}return!0}},2771:function(i,o,s){"use strict";i.exports=function(i,o,s,er,en){var ei=o.model||Z,eo=o.view||Z,es=o.projection||Z,el=o._ortho||!1,ec=i.bounds,en=en||F(ei,eo,es,ec,el),eu=en.axis;N(X,eo,ei),N(X,es,X);for(var ef=0;ef<3;++ef)ee[ef].lo=1/0,ee[ef].hi=-1/0,ee[ef].pixelsPerDataUnit=1/0;var eh=x(j(X,X));j(X,X);for(var ed=0;ed<3;++ed){var ep=(ed+1)%3,eg=(ed+2)%3;a:for(var ef=0;ef<2;++ef){var em=[];if(eu[ed]<0!=!!ef){et[ed]=ec[ef][ed];for(var ey=0;ey<2;++ey){et[ep]=ec[ey^ef][ep];for(var ev=0;ev<2;++ev)et[eg]=ec[ev^ey^ef][eg],em.push(et.slice())}for(var ex=el?5:4,ey=ex;ey===ex;++ey){if(0===em.length)continue a;em=_.positive(em,eh[ey])}for(var ey=0;ey<em.length;++ey)for(var eg=em[ey],e_=function(i,o,s,x,_){for(var F=0;F<3;++F){for(var N=0;N<3;++N)$[N]=J[N]=s[N];$[3]=J[3]=1,$[F]+=1,G($,$,o),$[3]<0&&(i[F]=1/0),J[F]-=1,G(J,J,o),J[3]<0&&(i[F]=1/0);var j=(J[0]/J[3]-$[0]/$[3])*x,Z=(J[1]/J[3]-$[1]/$[3])*_;i[F]=.25*Math.sqrt(j*j+Z*Z)}return i}(et,X,eg,s,er),ev=0;ev<3;++ev)ee[ev].lo=Math.min(ee[ev].lo,eg[ev]),ee[ev].hi=Math.max(ee[ev].hi,eg[ev]),ev!==ed&&(ee[ev].pixelsPerDataUnit=Math.min(ee[ev].pixelsPerDataUnit,Math.abs(e_[ev])))}}}return ee};var x=s(5795),_=s(4670),F=s(2864),N=s(104),j=s(2142),G=s(6342),Z=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),X=new Float32Array(16);function AxesRange3D(i,o,s){this.lo=i,this.hi=o,this.pixelsPerDataUnit=s}var J=[0,0,0,1],$=[0,0,0,1],ee=[new AxesRange3D(1/0,-1/0,1/0),new AxesRange3D(1/0,-1/0,1/0),new AxesRange3D(1/0,-1/0,1/0)],et=[0,0,0]},5827:function(i,o,s){"use strict";var x=s(5306),_=s(7498),F=s(5050),N=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function GLBuffer(i,o,s,x,_){this.gl=i,this.type=o,this.handle=s,this.length=x,this.usage=_}var j=GLBuffer.prototype;function updateTypeArray(i,o,s,x,_,F){var N=_.length*_.BYTES_PER_ELEMENT;if(F<0)return i.bufferData(o,_,x),N;if(N+F>s)throw Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(o,F,_),s}function makeScratchTypeArray(i,o){for(var s=x.malloc(i.length,o),_=i.length,F=0;F<_;++F)s[F]=i[F];return s}j.bind=function(){this.gl.bindBuffer(this.type,this.handle)},j.unbind=function(){this.gl.bindBuffer(this.type,null)},j.dispose=function(){this.gl.deleteBuffer(this.handle)},j.update=function(i,o){if("number"!=typeof o&&(o=-1),this.bind(),"object"==typeof i&&void 0!==i.shape){var s,j=i.dtype;if(0>N.indexOf(j)&&(j="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(j=gl.getExtension("OES_element_index_uint")&&"uint16"!==j?"uint32":"uint16"),j===i.dtype&&function(i,o){for(var s=1,x=o.length-1;x>=0;--x){if(o[x]!==s)return!1;s*=i[x]}return!0}(i.shape,i.stride))0===i.offset&&i.data.length===i.shape[0]?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i.data,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),o);else{var G=x.malloc(i.size,j),Z=F(G,i.shape);_.assign(Z,i),o<0?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,G,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,G.subarray(0,i.size),o),x.free(G)}}else if(Array.isArray(i))s=this.type===this.gl.ELEMENT_ARRAY_BUFFER?makeScratchTypeArray(i,"uint16"):makeScratchTypeArray(i,"float32"),o<0?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s.subarray(0,i.length),o),x.free(s);else if("object"==typeof i&&"number"==typeof i.length)this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i,o);else if("number"==typeof i||void 0===i){if(o>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(i|=0)<=0&&(i=1),this.gl.bufferData(this.type,0|i,this.usage),this.length=i}else throw Error("gl-buffer: Invalid data type")},i.exports=function(i,o,s,x){if(s=s||i.ARRAY_BUFFER,x=x||i.DYNAMIC_DRAW,s!==i.ARRAY_BUFFER&&s!==i.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(x!==i.DYNAMIC_DRAW&&x!==i.STATIC_DRAW&&x!==i.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var _=i.createBuffer(),F=new GLBuffer(i,s,_,0,x);return F.update(o),F}},1140:function(i,o,s){"use strict";var x=s(2858);i.exports=function(i,o){var s=i.positions,_=i.vectors,F={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(0===i.positions.length)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),F;for(var N=0,j=1/0,G=-1/0,Z=1/0,X=-1/0,J=1/0,$=-1/0,ee=null,et=null,er=[],en=1/0,ei=!1,eo=0;eo<s.length;eo++){var es=s[eo];j=Math.min(es[0],j),G=Math.max(es[0],G),Z=Math.min(es[1],Z),X=Math.max(es[1],X),J=Math.min(es[2],J),$=Math.max(es[2],$);var el=_[eo];if(x.length(el)>N&&(N=x.length(el)),eo){var ec=2*x.distance(ee,es)/(x.length(et)+x.length(el));ec?(en=Math.min(en,ec),ei=!1):ei=!0}ei||(ee=es,et=el),er.push(el)}var eu=[j,Z,J],ef=[G,X,$];o&&(o[0]=eu,o[1]=ef),0===N&&(N=1);var eh=1/N;isFinite(en)||(en=1),F.vectorScale=en;var ed=i.coneSize||.5;i.absoluteConeSize&&(ed=i.absoluteConeSize*eh),F.coneScale=ed;for(var eo=0,ep=0;eo<s.length;eo++)for(var es=s[eo],eg=es[0],em=es[1],ey=es[2],ev=er[eo],ex=x.length(ev)*eh,e_=0;e_<8;e_++){F.positions.push([eg,em,ey,ep++]),F.positions.push([eg,em,ey,ep++]),F.positions.push([eg,em,ey,ep++]),F.positions.push([eg,em,ey,ep++]),F.positions.push([eg,em,ey,ep++]),F.positions.push([eg,em,ey,ep++]),F.vectors.push(ev),F.vectors.push(ev),F.vectors.push(ev),F.vectors.push(ev),F.vectors.push(ev),F.vectors.push(ev),F.vertexIntensity.push(ex,ex,ex),F.vertexIntensity.push(ex,ex,ex);var ew=F.positions.length;F.cells.push([ew-6,ew-5,ew-4],[ew-3,ew-2,ew-1])}return F};var _=s(7234);i.exports.createMesh=s(5028),i.exports.createConeMesh=function(o,s){return i.exports.createMesh(o,s,{shaders:_,traceType:"cone"})}},5028:function(i,o,s){"use strict";var x=s(5158),_=s(5827),F=s(2944),N=s(8931),j=s(104),G=s(7437),Z=s(5050),X=s(9156),J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function VectorMesh(i,o,s,x,_,F,N,j,G,Z,X){this.gl=i,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=o,this.dirty=!0,this.triShader=s,this.pickShader=x,this.trianglePositions=_,this.triangleVectors=F,this.triangleColors=j,this.triangleUVs=G,this.triangleIds=N,this.triangleVAO=Z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=X,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=J,this._view=J,this._projection=J,this._resolution=[1,1]}var $=VectorMesh.prototype;$.isOpaque=function(){return this.opacity>=1},$.isTransparent=function(){return this.opacity<1},$.pickSlots=1,$.setPickBase=function(i){this.pickId=i},$.update=function(i){i=i||{};var o=this.gl;this.dirty=!0,"lightPosition"in i&&(this.lightPosition=i.lightPosition),"opacity"in i&&(this.opacity=i.opacity),"ambient"in i&&(this.ambientLight=i.ambient),"diffuse"in i&&(this.diffuseLight=i.diffuse),"specular"in i&&(this.specularLight=i.specular),"roughness"in i&&(this.roughness=i.roughness),"fresnel"in i&&(this.fresnel=i.fresnel),void 0!==i.tubeScale&&(this.tubeScale=i.tubeScale),void 0!==i.vectorScale&&(this.vectorScale=i.vectorScale),void 0!==i.coneScale&&(this.coneScale=i.coneScale),void 0!==i.coneOffset&&(this.coneOffset=i.coneOffset),i.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=o.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=o.LINEAR,this.texture.setPixels(function(i){for(var o=X({colormap:i,nshades:256,format:"rgba"}),s=new Uint8Array(1024),x=0;x<256;++x){for(var _=o[x],F=0;F<3;++F)s[4*x+F]=_[F];s[4*x+3]=255*_[3]}return Z(s,[256,256,4],[4,0,1])}(i.colormap)),this.texture.generateMipmap());var s=i.cells,x=i.positions,_=i.vectors;if(x&&s&&_){var F=[],N=[],j=[],G=[],J=[];this.cells=s,this.positions=x,this.vectors=_;var $=i.meshColor||[1,1,1,1],ee=i.vertexIntensity,et=1/0,er=-1/0;if(ee){if(i.vertexIntensityBounds)et=+i.vertexIntensityBounds[0],er=+i.vertexIntensityBounds[1];else for(var en=0;en<ee.length;++en){var ei=ee[en];et=Math.min(et,ei),er=Math.max(er,ei)}}else for(var en=0;en<x.length;++en){var ei=x[en][2];et=Math.min(et,ei),er=Math.max(er,ei)}ee?this.intensity=ee:this.intensity=function(i){for(var o=i.length,s=Array(o),x=0;x<o;++x)s[x]=i[x][2];return s}(x),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var en=0;en<x.length;++en)for(var eo=x[en],es=0;es<3;++es)!isNaN(eo[es])&&isFinite(eo[es])&&(this.bounds[0][es]=Math.min(this.bounds[0][es],eo[es]),this.bounds[1][es]=Math.max(this.bounds[1][es],eo[es]));var el=0;o:for(var en=0;en<s.length;++en){var ec=s[en];if(3===ec.length){for(var es=0;es<3;++es)for(var eu=ec[es],eo=x[eu],ef=0;ef<3;++ef)if(isNaN(eo[ef])||!isFinite(eo[ef]))continue o;for(var es=0;es<3;++es){var eh,eu=ec[2-es],eo=x[eu];F.push(eo[0],eo[1],eo[2],eo[3]);var ed=_[eu];N.push(ed[0],ed[1],ed[2],ed[3]||0),3===$.length?j.push($[0],$[1],$[2],1):j.push($[0],$[1],$[2],$[3]),eh=ee?[(ee[eu]-et)/(er-et),0]:[(eo[2]-et)/(er-et),0],G.push(eh[0],eh[1]),J.push(en)}el+=1}}this.triangleCount=el,this.trianglePositions.update(F),this.triangleVectors.update(N),this.triangleColors.update(j),this.triangleUVs.update(G),this.triangleIds.update(new Uint32Array(J))}},$.drawTransparent=$.draw=function(i){i=i||{};for(var o=this.gl,s=i.model||J,x=i.view||J,_=i.projection||J,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)F[0][N]=Math.max(F[0][N],this.clipBounds[0][N]),F[1][N]=Math.min(F[1][N],this.clipBounds[1][N]);var Z={model:s,view:x,projection:_,inverseModel:J.slice(),clipBounds:F,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};Z.inverseModel=G(Z.inverseModel,Z.model),o.disable(o.CULL_FACE),this.texture.bind(0);var X=Array(16);j(X,Z.view,Z.model),j(X,Z.projection,X),G(X,X);for(var N=0;N<3;++N)Z.eyePosition[N]=X[12+N]/X[15];for(var $=X[15],N=0;N<3;++N)$+=this.lightPosition[N]*X[4*N+3];for(var N=0;N<3;++N){for(var ee=X[12+N],et=0;et<3;++et)ee+=X[4*et+N]*this.lightPosition[et];Z.lightPosition[N]=ee/$}if(this.triangleCount>0){var er=this.triShader;er.bind(),er.uniforms=Z,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},$.drawPick=function(i){i=i||{};for(var o=this.gl,s=i.model||J,x=i.view||J,_=i.projection||J,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)F[0][N]=Math.max(F[0][N],this.clipBounds[0][N]),F[1][N]=Math.min(F[1][N],this.clipBounds[1][N]);this._model=[].slice.call(s),this._view=[].slice.call(x),this._projection=[].slice.call(_),this._resolution=[o.drawingBufferWidth,o.drawingBufferHeight];var j={model:s,view:x,projection:_,clipBounds:F,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},G=this.pickShader;G.bind(),G.uniforms=j,this.triangleCount>0&&(this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},$.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=i.value[0]+256*i.value[1]+65536*i.value[2],s=this.cells[o],x=this.positions[s[1]].slice(0,3),_={position:x,dataCoordinate:x,index:Math.floor(s[1]/48)};return"cone"===this.traceType?_.index=Math.floor(s[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[s[1]],_.velocity=this.vectors[s[1]].slice(0,3),_.divergence=this.vectors[s[1]][3],_.index=o),_},$.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},i.exports=function(i,o,s){var j,G,X=s.shaders;1==arguments.length&&(i=(o=i).gl);var J=((j=x(i,X.meshShader.vertex,X.meshShader.fragment,null,X.meshShader.attributes)).attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.vector.location=4,j),$=((G=x(i,X.pickShader.vertex,X.pickShader.fragment,null,X.pickShader.attributes)).attributes.position.location=0,G.attributes.id.location=1,G.attributes.vector.location=4,G),ee=N(i,Z(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=i.LINEAR_MIPMAP_LINEAR,ee.magFilter=i.LINEAR;var et=_(i),er=_(i),en=_(i),ei=_(i),eo=_(i),es=F(i,[{buffer:et,type:i.FLOAT,size:4},{buffer:eo,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:en,type:i.FLOAT,size:4},{buffer:ei,type:i.FLOAT,size:2},{buffer:er,type:i.FLOAT,size:4}]),el=new VectorMesh(i,ee,J,$,et,er,eo,en,ei,es,s.traceType||"cone");return el.update(o),el}},7234:function(i,o,s){var x=s(6832),_=x(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),F=x(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),N=x(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),j=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);o.meshShader={vertex:_,fragment:F,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:N,fragment:j,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(i){i.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(i,o,s){var x=s(1950);i.exports=function(i){return x[i]}},3110:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=x(o),N=_(o,[{buffer:s,type:o.FLOAT,size:3,offset:0,stride:40},{buffer:s,type:o.FLOAT,size:4,offset:12,stride:40},{buffer:s,type:o.FLOAT,size:3,offset:28,stride:40}]),j=F(o);j.attributes.position.location=0,j.attributes.color.location=1,j.attributes.offset.location=2;var G=new ErrorBars(o,s,N,j);return G.update(i),G};var x=s(5827),_=s(2944),F=s(7667),N=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function ErrorBars(i,o,s,x){this.gl=i,this.shader=x,this.buffer=o,this.vao=s,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var j=ErrorBars.prototype;function updateBounds(i,o){for(var s=0;s<3;++s)i[0][s]=Math.min(i[0][s],o[s]),i[1][s]=Math.max(i[1][s],o[s])}j.isOpaque=function(){return!this.hasAlpha},j.isTransparent=function(){return this.hasAlpha},j.drawTransparent=j.draw=function(i){var o=this.gl,s=this.shader.uniforms;this.shader.bind();var x=s.view=i.view||N,_=s.projection=i.projection||N;s.model=i.model||N,s.clipBounds=this.clipBounds,s.opacity=this.opacity;var F=x[12],j=x[13],G=x[14],Z=x[15],X=(i._ortho?2:1)*this.pixelRatio*(_[3]*F+_[7]*j+_[11]*G+_[15]*Z)/o.drawingBufferHeight;this.vao.bind();for(var J=0;J<3;++J)o.lineWidth(this.lineWidth[J]*this.pixelRatio),s.capSize=this.capSize[J]*X,this.lineCount[J]&&o.drawArrays(o.LINES,this.lineOffset[J],this.lineCount[J]);this.vao.unbind()};var G=function(){for(var i=[,,,],o=0;o<3;++o){for(var s=[],x=1;x<=2;++x)for(var _=-1;_<=1;_+=2){var F=[0,0,0];F[(x+o)%3]=_,s.push(F)}i[o]=s}return i}();function emitFace(i,o,s,x){for(var _=G[x],F=0;F<_.length;++F){var N=_[F];i.push(o[0],o[1],o[2],s[0],s[1],s[2],s[3],N[0],N[1],N[2])}return _.length}j.update=function(i){"lineWidth"in(i=i||{})&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var o=i.color||[[0,0,0],[0,0,0],[0,0,0]],s=i.position,x=i.error;if(Array.isArray(o[0])||(o=[o,o,o]),s&&x){var _=[],F=s.length,N=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var j=0;j<3;++j){this.lineOffset[j]=N;a:for(var G=0;G<F;++G){for(var Z=s[G],X=0;X<3;++X)if(isNaN(Z[X])||!isFinite(Z[X]))continue a;var J=x[G],$=o[j];if(Array.isArray($[0])&&($=o[G]),3===$.length?$=[$[0],$[1],$[2],1]:4===$.length&&($=[$[0],$[1],$[2],$[3]],!this.hasAlpha&&$[3]<1&&(this.hasAlpha=!0)),!(isNaN(J[0][j])||isNaN(J[1][j]))){if(J[0][j]<0){var ee=Z.slice();ee[j]+=J[0][j],_.push(Z[0],Z[1],Z[2],$[0],$[1],$[2],$[3],0,0,0,ee[0],ee[1],ee[2],$[0],$[1],$[2],$[3],0,0,0),updateBounds(this.bounds,ee),N+=2+emitFace(_,ee,$,j)}if(J[1][j]>0){var ee=Z.slice();ee[j]+=J[1][j],_.push(Z[0],Z[1],Z[2],$[0],$[1],$[2],$[3],0,0,0,ee[0],ee[1],ee[2],$[0],$[1],$[2],$[3],0,0,0),updateBounds(this.bounds,ee),N+=2+emitFace(_,ee,$,j)}}}this.lineCount[j]=N-this.lineOffset[j]}this.buffer.update(_)}},j.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(i,o,s){"use strict";var x=s(6832),_=s(5158),F=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),N=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);i.exports=function(i){return _(i,F,N,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(i,o,s){"use strict";var x,_,F,N,j=s(8931);i.exports=function(i,o,s,j){x||(x=i.FRAMEBUFFER_UNSUPPORTED,_=i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,F=i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,N=i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var Z=i.getExtension("WEBGL_draw_buffers");if(!G&&Z&&function(i,o){var s=i.getParameter(o.MAX_COLOR_ATTACHMENTS_WEBGL);G=Array(s+1);for(var x=0;x<=s;++x){for(var _=Array(s),F=0;F<x;++F)_[F]=i.COLOR_ATTACHMENT0+F;for(var F=x;F<s;++F)_[F]=i.NONE;G[x]=_}}(i,Z),Array.isArray(o)&&(j=s,s=0|o[1],o=0|o[0]),"number"!=typeof o)throw Error("gl-fbo: Missing shape parameter");var X=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(o<0||o>X||s<0||s>X)throw Error("gl-fbo: Parameters are too large for FBO");var J=1;if("color"in(j=j||{})){if((J=Math.max(0|j.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(J>1){if(Z){if(J>i.getParameter(Z.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+J+" draw buffers")}else throw Error("gl-fbo: Multiple draw buffer extension not supported")}}var $=i.UNSIGNED_BYTE,ee=i.getExtension("OES_texture_float");if(j.float&&J>0){if(!ee)throw Error("gl-fbo: Context does not support floating point textures");$=i.FLOAT}else j.preferFloat&&J>0&&ee&&($=i.FLOAT);var et=!0;"depth"in j&&(et=!!j.depth);var er=!1;return"stencil"in j&&(er=!!j.stencil),new Framebuffer(i,o,s,$,J,et,er,Z)};var G=null;function saveFBOState(i){return[i.getParameter(i.FRAMEBUFFER_BINDING),i.getParameter(i.RENDERBUFFER_BINDING),i.getParameter(i.TEXTURE_BINDING_2D)]}function restoreFBOState(i,o){i.bindFramebuffer(i.FRAMEBUFFER,o[0]),i.bindRenderbuffer(i.RENDERBUFFER,o[1]),i.bindTexture(i.TEXTURE_2D,o[2])}function throwFBOError(i){switch(i){case x:throw Error("gl-fbo: Framebuffer unsupported");case _:throw Error("gl-fbo: Framebuffer incomplete attachment");case F:throw Error("gl-fbo: Framebuffer incomplete dimensions");case N:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function initTexture(i,o,s,x,_,F){if(!x)return null;var N=j(i,o,s,_,x);return N.magFilter=i.NEAREST,N.minFilter=i.NEAREST,N.mipSamples=1,N.bind(),i.framebufferTexture2D(i.FRAMEBUFFER,F,i.TEXTURE_2D,N.handle,0),N}function initRenderBuffer(i,o,s,x,_){var F=i.createRenderbuffer();return i.bindRenderbuffer(i.RENDERBUFFER,F),i.renderbufferStorage(i.RENDERBUFFER,x,o,s),i.framebufferRenderbuffer(i.FRAMEBUFFER,_,i.RENDERBUFFER,F),F}function Framebuffer(i,o,s,x,_,F,N,j){this.gl=i,this._shape=[0|o,0|s],this._destroyed=!1,this._ext=j,this.color=Array(_);for(var Z=0;Z<_;++Z)this.color[Z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=x,this._useDepth=F,this._useStencil=N;var X=this,J=[0|o,0|s];Object.defineProperties(J,{0:{get:function(){return X._shape[0]},set:function(i){return X.width=i}},1:{get:function(){return X._shape[1]},set:function(i){return X.height=i}}}),this._shapeVector=J,function(i){var o=saveFBOState(i.gl),s=i.gl,x=i.handle=s.createFramebuffer(),_=i._shape[0],F=i._shape[1],N=i.color.length,j=i._ext,Z=i._useStencil,X=i._useDepth,J=i._colorType;s.bindFramebuffer(s.FRAMEBUFFER,x);for(var $=0;$<N;++$)i.color[$]=initTexture(s,_,F,J,s.RGBA,s.COLOR_ATTACHMENT0+$);0===N?(i._color_rb=initRenderBuffer(s,_,F,s.RGBA4,s.COLOR_ATTACHMENT0),j&&j.drawBuffersWEBGL(G[0])):N>1&&j.drawBuffersWEBGL(G[N]);var ee=s.getExtension("WEBGL_depth_texture");ee?Z?i.depth=initTexture(s,_,F,ee.UNSIGNED_INT_24_8_WEBGL,s.DEPTH_STENCIL,s.DEPTH_STENCIL_ATTACHMENT):X&&(i.depth=initTexture(s,_,F,s.UNSIGNED_SHORT,s.DEPTH_COMPONENT,s.DEPTH_ATTACHMENT)):X&&Z?i._depth_rb=initRenderBuffer(s,_,F,s.DEPTH_STENCIL,s.DEPTH_STENCIL_ATTACHMENT):X?i._depth_rb=initRenderBuffer(s,_,F,s.DEPTH_COMPONENT16,s.DEPTH_ATTACHMENT):Z&&(i._depth_rb=initRenderBuffer(s,_,F,s.STENCIL_INDEX,s.STENCIL_ATTACHMENT));var et=s.checkFramebufferStatus(s.FRAMEBUFFER);if(et!==s.FRAMEBUFFER_COMPLETE){i._destroyed=!0,s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteFramebuffer(i.handle),i.handle=null,i.depth&&(i.depth.dispose(),i.depth=null),i._depth_rb&&(s.deleteRenderbuffer(i._depth_rb),i._depth_rb=null);for(var $=0;$<i.color.length;++$)i.color[$].dispose(),i.color[$]=null;i._color_rb&&(s.deleteRenderbuffer(i._color_rb),i._color_rb=null),restoreFBOState(s,o),throwFBOError(et)}restoreFBOState(s,o)}(this)}var Z=Framebuffer.prototype;function reshapeFBO(i,o,s){if(i._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(i._shape[0]!==o||i._shape[1]!==s){var x=i.gl,_=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(o<0||o>_||s<0||s>_)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");i._shape[0]=o,i._shape[1]=s;for(var F=saveFBOState(x),N=0;N<i.color.length;++N)i.color[N].shape=i._shape;i._color_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,i._color_rb),x.renderbufferStorage(x.RENDERBUFFER,x.RGBA4,i._shape[0],i._shape[1])),i.depth&&(i.depth.shape=i._shape),i._depth_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,i._depth_rb),i._useDepth&&i._useStencil?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_STENCIL,i._shape[0],i._shape[1]):i._useDepth?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_COMPONENT16,i._shape[0],i._shape[1]):i._useStencil&&x.renderbufferStorage(x.RENDERBUFFER,x.STENCIL_INDEX,i._shape[0],i._shape[1])),x.bindFramebuffer(x.FRAMEBUFFER,i.handle);var j=x.checkFramebufferStatus(x.FRAMEBUFFER);j!==x.FRAMEBUFFER_COMPLETE&&(i.dispose(),restoreFBOState(x,F),throwFBOError(j)),restoreFBOState(x,F)}}Object.defineProperties(Z,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(i){if(Array.isArray(i)||(i=[0|i,0|i]),2!==i.length)throw Error("gl-fbo: Shape vector must be length 2");var o=0|i[0],s=0|i[1];return reshapeFBO(this,o,s),[o,s]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(i){return reshapeFBO(this,i|=0,this._shape[1]),i},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(i){return i|=0,reshapeFBO(this,this._shape[0],i),i},enumerable:!1}}),Z.bind=function(){if(!this._destroyed){var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,this.handle),i.viewport(0,0,this._shape[0],this._shape[1])}},Z.dispose=function(){if(!this._destroyed){this._destroyed=!0;var i=this.gl;i.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(i.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var o=0;o<this.color.length;++o)this.color[o].dispose(),this.color[o]=null;this._color_rb&&(i.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(i,o,s){var x=s(8974).sprintf,_=s(6603),F=s(9365),N=s(8008);i.exports=function(i,o,s){"use strict";var j=F(o)||"of unknown name (see npm glsl-shader-name)",G="unknown type";void 0!==s&&(G=s===_.FRAGMENT_SHADER?"fragment":"vertex");for(var Z=x("Error compiling %s shader %s:\n",G,j),X=x("%s%s",Z,i),J=i.split("\n"),$={},ee=0;ee<J.length;ee++){var et=J[ee];if(""!==et&&"\x00"!==et){var er=parseInt(et.split(":")[2]);if(isNaN(er))throw Error(x("Could not parse error: %s",et));$[er]=et}}for(var en=N(o).split("\n"),ee=0;ee<en.length;ee++)if(($[ee+3]||$[ee+2]||$[ee+1])&&(Z+=en[ee]+"\n",$[ee+1])){var ei=$[ee+1];Z+=x("^^^ %s\n\n",ei=ei.substr(ei.split(":",3).join(":").length+1).trim())}return{long:Z.trim(),short:X.trim()}}},6386:function(i,o,s){"use strict";i.exports=function(i,o){var s=i.gl,x=Z(s,J.vertex,J.fragment),_=Z(s,J.pickVertex,J.pickFragment),F=X(s),N=X(s),j=X(s),G=X(s),$=new GLHeatmap2D(i,x,_,F,N,j,G);return $.update(o),i.addObject($),$};var x,_,F,N=s(5070),j=s(9560),G=s(5306),Z=s(5158),X=s(5827),J=s(1292);function GLHeatmap2D(i,o,s,x,_,F,N){this.plot=i,this.shader=o,this.pickShader=s,this.positionBuffer=x,this.weightBuffer=_,this.colorBuffer=F,this.idBuffer=N,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var $=GLHeatmap2D.prototype,ee=[0,0,1,0,0,1,1,0,1,1,0,1];$.draw=(x=[1,0,0,0,1,0,0,0,1],function(){var i=this.plot,o=this.shader,s=this.bounds,_=this.numVertices;if(!(_<=0)){var F=i.gl,N=i.dataBox,j=s[2]-s[0],G=s[3]-s[1],Z=N[2]-N[0],X=N[3]-N[1];x[0]=2*j/Z,x[4]=2*G/X,x[6]=2*(s[0]-N[0])/Z-1,x[7]=2*(s[1]-N[1])/X-1,o.bind();var J=o.uniforms;J.viewTransform=x,J.shape=this.shape;var $=o.attributes;this.positionBuffer.bind(),$.position.pointer(),this.weightBuffer.bind(),$.weight.pointer(F.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),$.color.pointer(F.UNSIGNED_BYTE,!0),F.drawArrays(F.TRIANGLES,0,_)}}),$.drawPick=(_=[1,0,0,0,1,0,0,0,1],F=[0,0,0,0],function(i){var o=this.plot,s=this.pickShader,x=this.bounds,N=this.numVertices;if(!(N<=0)){var j=o.gl,G=o.dataBox,Z=x[2]-x[0],X=x[3]-x[1],J=G[2]-G[0],$=G[3]-G[1];_[0]=2*Z/J,_[4]=2*X/$,_[6]=2*(x[0]-G[0])/J-1,_[7]=2*(x[1]-G[1])/$-1;for(var ee=0;ee<4;++ee)F[ee]=i>>8*ee&255;this.pickOffset=i,s.bind();var et=s.uniforms;et.viewTransform=_,et.pickOffset=F,et.shape=this.shape;var er=s.attributes;return this.positionBuffer.bind(),er.position.pointer(),this.weightBuffer.bind(),er.weight.pointer(j.UNSIGNED_BYTE,!1),this.idBuffer.bind(),er.pickId.pointer(j.UNSIGNED_BYTE,!1),j.drawArrays(j.TRIANGLES,0,N),i+this.shape[0]*this.shape[1]}}),$.pick=function(i,o,s){var x=this.pickOffset,_=this.shape[0]*this.shape[1];if(s<x||s>=x+_)return null;var F=s-x,N=this.xData,j=this.yData;return{object:this,pointId:F,dataCoord:[N[F%this.shape[0]],j[F/this.shape[0]|0]]}},$.update=function(i){var o=(i=i||{}).shape||[0,0],s=i.x||j(o[0]),x=i.y||j(o[1]),_=i.z||new Float32Array(o[0]*o[1]),F=!1!==i.zsmooth;this.xData=s,this.yData=x;var Z=i.colorLevels||[0],X=i.colorValues||[0,0,0,1],J=Z.length,$=this.bounds;F?(ey=$[0]=s[0],ev=$[1]=x[0],ex=$[2]=s[s.length-1],e_=$[3]=x[x.length-1]):(ey=$[0]=s[0]+(s[1]-s[0])/2,ev=$[1]=x[0]+(x[1]-x[0])/2,ex=$[2]=s[s.length-1]+(s[s.length-1]-s[s.length-2])/2,e_=$[3]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2);var et=1/(ex-ey),er=1/(e_-ev),en=o[0],ei=o[1];this.shape=[en,ei];var eo=(F?(en-1)*(ei-1):en*ei)*(ee.length>>>1);this.numVertices=eo;for(var es=G.mallocUint8(4*eo),el=G.mallocFloat32(2*eo),ec=G.mallocUint8(2*eo),eu=G.mallocUint32(eo),ef=0,eh=F?en-1:en,ed=F?ei-1:ei,ep=0;ep<ed;++ep){F?(ew=er*(x[ep]-ev),eT=er*(x[ep+1]-ev)):(ew=ep<ei-1?er*(x[ep]-(x[ep+1]-x[ep])/2-ev):er*(x[ep]-(x[ep]-x[ep-1])/2-ev),eT=ep<ei-1?er*(x[ep]+(x[ep+1]-x[ep])/2-ev):er*(x[ep]+(x[ep]-x[ep-1])/2-ev));for(var eg=0;eg<eh;++eg){F?(ek=et*(s[eg]-ey),eA=et*(s[eg+1]-ey)):(ek=eg<en-1?et*(s[eg]-(s[eg+1]-s[eg])/2-ey):et*(s[eg]-(s[eg]-s[eg-1])/2-ey),eA=eg<en-1?et*(s[eg]+(s[eg+1]-s[eg])/2-ey):et*(s[eg]+(s[eg]-s[eg-1])/2-ey));for(var em=0;em<ee.length;em+=2){var ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC,eE,eL=ee[em],eP=ee[em+1],eI=_[F?(ep+eP)*en+(eg+eL):ep*en+eg],eO=N.le(Z,eI);if(eO<0)eS=X[0],eM=X[1],eC=X[2],eE=X[3];else if(eO===J-1)eS=X[4*J-4],eM=X[4*J-3],eC=X[4*J-2],eE=X[4*J-1];else{var eD=(eI-Z[eO])/(Z[eO+1]-Z[eO]),eR=1-eD,eB=4*eO,ez=4*(eO+1);eS=eR*X[eB]+eD*X[ez],eM=eR*X[eB+1]+eD*X[ez+1],eC=eR*X[eB+2]+eD*X[ez+2],eE=eR*X[eB+3]+eD*X[ez+3]}es[4*ef]=255*eS,es[4*ef+1]=255*eM,es[4*ef+2]=255*eC,es[4*ef+3]=255*eE,el[2*ef]=.5*ek+.5*eA,el[2*ef+1]=.5*ew+.5*eT,ec[2*ef]=eL,ec[2*ef+1]=eP,eu[ef]=ep*en+eg,ef+=1}}}this.positionBuffer.update(el),this.weightBuffer.update(ec),this.colorBuffer.update(es),this.idBuffer.update(eu),G.free(el),G.free(es),G.free(ec),G.free(eu)},$.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(i,o,s){"use strict";var x=s(6832);i.exports={fragment:x(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:x(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(i,o,s){var x=s(6832),_=s(5158),F=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),N=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),j=x(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),G=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(i){return _(i,F,N,null,G)},o.createPickShader=function(i){return _(i,F,j,null,G)}},6086:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl||i.scene&&i.scene.gl,s=J(o);s.attributes.position.location=0,s.attributes.nextPosition.location=1,s.attributes.arcLength.location=2,s.attributes.lineWidth.location=3,s.attributes.color.location=4;var N=$(o);N.attributes.position.location=0,N.attributes.nextPosition.location=1,N.attributes.arcLength.location=2,N.attributes.lineWidth.location=3,N.attributes.color.location=4;for(var j=x(o),G=_(o,[{buffer:j,size:3,offset:0,stride:48},{buffer:j,size:3,offset:12,stride:48},{buffer:j,size:1,offset:24,stride:48},{buffer:j,size:1,offset:28,stride:48},{buffer:j,size:4,offset:32,stride:48}]),X=Z(Array(1024),[256,1,4]),ee=0;ee<1024;++ee)X.data[ee]=255;var et=F(o,X);et.wrap=o.REPEAT;var er=new LinePlot(o,s,N,j,G,et);return er.update(i),er};var x=s(5827),_=s(2944),F=s(8931),N=new Uint8Array(4),j=new Float32Array(N.buffer),G=s(5070),Z=s(5050),X=s(248),J=X.createShader,$=X.createPickShader,ee=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function filterClipBounds(i){for(var o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)o[0][s]=Math.max(i[0][s],o[0][s]),o[1][s]=Math.min(i[1][s],o[1][s]);return o}function PickResult(i,o,s,x){this.arcLength=i,this.position=o,this.index=s,this.dataCoordinate=x}function LinePlot(i,o,s,x,_,F){this.gl=i,this.shader=o,this.pickShader=s,this.buffer=x,this.vao=_,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=F,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var et=LinePlot.prototype;et.isTransparent=function(){return this.hasAlpha},et.isOpaque=function(){return!this.hasAlpha},et.pickSlots=1,et.setPickBase=function(i){this.pickId=i},et.drawTransparent=et.draw=function(i){if(this.vertexCount){var o=this.gl,s=this.shader,x=this.vao;s.bind(),s.uniforms={model:i.model||ee,view:i.view||ee,projection:i.projection||ee,clipBounds:filterClipBounds(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[o.drawingBufferWidth,o.drawingBufferHeight],pixelRatio:this.pixelRatio},x.bind(),x.draw(o.TRIANGLE_STRIP,this.vertexCount),x.unbind()}},et.drawPick=function(i){if(this.vertexCount){var o=this.gl,s=this.pickShader,x=this.vao;s.bind(),s.uniforms={model:i.model||ee,view:i.view||ee,projection:i.projection||ee,pickId:this.pickId,clipBounds:filterClipBounds(this.clipBounds),screenShape:[o.drawingBufferWidth,o.drawingBufferHeight],pixelRatio:this.pixelRatio},x.bind(),x.draw(o.TRIANGLE_STRIP,this.vertexCount),x.unbind()}},et.update=function(i){this.dirty=!0;var o=!!i.connectGaps;"dashScale"in i&&(this.dashScale=i.dashScale),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=[],x=[],_=[],F=0,N=0,j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],X=i.position||i.positions;if(X){var J=i.color||i.colors||[0,0,0,1],$=i.lineWidth||1,ee=!1;o:for(et=1;et<X.length;++et){var et,er,en,ei,eo,es=X[et-1],el=X[et];for(x.push(F),_.push(es.slice()),er=0;er<3;++er){if(isNaN(es[er])||isNaN(el[er])||!isFinite(es[er])||!isFinite(el[er])){if(!o&&s.length>0){for(var ec=0;ec<24;++ec)s.push(s[s.length-12]);N+=2,ee=!0}continue o}j[0][er]=Math.min(j[0][er],es[er],el[er]),j[1][er]=Math.max(j[1][er],es[er],el[er])}Array.isArray(J[0])?(en=J.length>et-1?J[et-1]:J.length>0?J[J.length-1]:[0,0,0,1],ei=J.length>et?J[et]:J.length>0?J[J.length-1]:[0,0,0,1]):en=ei=J,3===en.length&&(en=[en[0],en[1],en[2],1]),3===ei.length&&(ei=[ei[0],ei[1],ei[2],1]),!this.hasAlpha&&en[3]<1&&(this.hasAlpha=!0),eo=Array.isArray($)?$.length>et-1?$[et-1]:$.length>0?$[$.length-1]:[0,0,0,1]:$;var eu=F;if(F+=function(i,o){for(var s=0,x=0;x<3;++x){var _=i[x]-o[x];s+=_*_}return Math.sqrt(s)}(es,el),ee){for(er=0;er<2;++er)s.push(es[0],es[1],es[2],el[0],el[1],el[2],eu,eo,en[0],en[1],en[2],en[3]);N+=2,ee=!1}s.push(es[0],es[1],es[2],el[0],el[1],el[2],eu,eo,en[0],en[1],en[2],en[3],es[0],es[1],es[2],el[0],el[1],el[2],eu,-eo,en[0],en[1],en[2],en[3],el[0],el[1],el[2],es[0],es[1],es[2],F,-eo,ei[0],ei[1],ei[2],ei[3],el[0],el[1],el[2],es[0],es[1],es[2],F,eo,ei[0],ei[1],ei[2],ei[3]),N+=4}}if(this.buffer.update(s),x.push(F),_.push(X[X.length-1].slice()),this.bounds=j,this.vertexCount=N,this.points=_,this.arcLength=x,"dashes"in i){var ef=i.dashes.slice();for(ef.unshift(0),et=1;et<ef.length;++et)ef[et]=ef[et-1]+ef[et];var eh=Z(Array(1024),[256,1,4]);for(et=0;et<256;++et){for(er=0;er<4;++er)eh.set(et,0,er,0);1&G.le(ef,ef[ef.length-1]*et/255)?eh.set(et,0,0,0):eh.set(et,0,0,255)}this.texture.setPixels(eh)}},et.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},et.pick=function(i){if(!i||i.id!==this.pickId)return null;var o,s,x,_=(o=i.value[0],s=i.value[1],x=i.value[2],N[0]=0,N[1]=x,N[2]=s,N[3]=o,j[0]),F=G.le(this.arcLength,_);if(F<0)return null;if(F===this.arcLength.length-1)return new PickResult(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),F);for(var Z=this.points[F],X=this.points[Math.min(F+1,this.points.length-1)],J=(_-this.arcLength[F])/(this.arcLength[F+1]-this.arcLength[F]),$=1-J,ee=[0,0,0],et=0;et<3;++et)ee[et]=$*Z[et]+J*X[et];var er=Math.min(J<.5?F:F+1,this.points.length-1);return new PickResult(_,ee,er,this.points[er])}},7332:function(i){i.exports=function(i){var o=new Float32Array(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o}},9823:function(i){i.exports=function(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7787:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2],_=i[3],F=i[4],N=i[5],j=i[6],G=i[7],Z=i[8],X=i[9],J=i[10],$=i[11],ee=i[12],et=i[13],er=i[14],en=i[15];return(o*N-s*F)*(J*en-$*er)-(o*j-x*F)*(X*en-$*et)+(o*G-_*F)*(X*er-J*et)+(s*j-x*N)*(Z*en-$*ee)-(s*G-_*N)*(Z*er-J*ee)+(x*G-_*j)*(Z*et-X*ee)}},5950:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=s+s,j=x+x,G=_+_,Z=s*N,X=x*N,J=x*j,$=_*N,ee=_*j,et=_*G,er=F*N,en=F*j,ei=F*G;return i[0]=1-J-et,i[1]=X+ei,i[2]=$-en,i[3]=0,i[4]=X-ei,i[5]=1-Z-et,i[6]=ee+er,i[7]=0,i[8]=$+en,i[9]=ee-er,i[10]=1-Z-J,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7280:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=x+x,G=_+_,Z=F+F,X=x*j,J=x*G,$=x*Z,ee=_*G,et=_*Z,er=F*Z,en=N*j,ei=N*G,eo=N*Z;return i[0]=1-(ee+er),i[1]=J+eo,i[2]=$-ei,i[3]=0,i[4]=J-eo,i[5]=1-(X+er),i[6]=et+en,i[7]=0,i[8]=$+ei,i[9]=et-en,i[10]=1-(X+ee),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}},9947:function(i){i.exports=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7437:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=o[4],j=o[5],G=o[6],Z=o[7],X=o[8],J=o[9],$=o[10],ee=o[11],et=o[12],er=o[13],en=o[14],ei=o[15],eo=s*j-x*N,es=s*G-_*N,el=s*Z-F*N,ec=x*G-_*j,eu=x*Z-F*j,ef=_*Z-F*G,eh=X*er-J*et,ed=X*en-$*et,ep=X*ei-ee*et,eg=J*en-$*er,em=J*ei-ee*er,ey=$*ei-ee*en,ev=eo*ey-es*em+el*eg+ec*ep-eu*ed+ef*eh;return ev?(ev=1/ev,i[0]=(j*ey-G*em+Z*eg)*ev,i[1]=(_*em-x*ey-F*eg)*ev,i[2]=(er*ef-en*eu+ei*ec)*ev,i[3]=($*eu-J*ef-ee*ec)*ev,i[4]=(G*ep-N*ey-Z*ed)*ev,i[5]=(s*ey-_*ep+F*ed)*ev,i[6]=(en*el-et*ef-ei*es)*ev,i[7]=(X*ef-$*el+ee*es)*ev,i[8]=(N*em-j*ep+Z*eh)*ev,i[9]=(x*ep-s*em-F*eh)*ev,i[10]=(et*eu-er*el+ei*eo)*ev,i[11]=(J*el-X*eu-ee*eo)*ev,i[12]=(j*ed-N*eg-G*eh)*ev,i[13]=(s*eg-x*ed+_*eh)*ev,i[14]=(er*es-et*ec-en*eo)*ev,i[15]=(X*ec-J*es+$*eo)*ev,i):null}},3012:function(i,o,s){var x=s(9947);i.exports=function(i,o,s,_){var F,N,j,G,Z,X,J,$,ee,et,er=o[0],en=o[1],ei=o[2],eo=_[0],es=_[1],el=_[2],ec=s[0],eu=s[1],ef=s[2];return 1e-6>Math.abs(er-ec)&&1e-6>Math.abs(en-eu)&&1e-6>Math.abs(ei-ef)?x(i):(et=1/Math.sqrt((J=er-ec)*J+($=en-eu)*$+(ee=ei-ef)*ee),J*=et,$*=et,ee*=et,(et=Math.sqrt((F=es*ee-el*$)*F+(N=el*J-eo*ee)*N+(j=eo*$-es*J)*j))?(F*=et=1/et,N*=et,j*=et):(F=0,N=0,j=0),(et=Math.sqrt((G=$*j-ee*N)*G+(Z=ee*F-J*j)*Z+(X=J*N-$*F)*X))?(G*=et=1/et,Z*=et,X*=et):(G=0,Z=0,X=0),i[0]=F,i[1]=G,i[2]=J,i[3]=0,i[4]=N,i[5]=Z,i[6]=$,i[7]=0,i[8]=j,i[9]=X,i[10]=ee,i[11]=0,i[12]=-(F*er+N*en+j*ei),i[13]=-(G*er+Z*en+X*ei),i[14]=-(J*er+$*en+ee*ei),i[15]=1,i)}},104:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],er=o[12],en=o[13],ei=o[14],eo=o[15],es=s[0],el=s[1],ec=s[2],eu=s[3];return i[0]=es*x+el*j+ec*J+eu*er,i[1]=es*_+el*G+ec*$+eu*en,i[2]=es*F+el*Z+ec*ee+eu*ei,i[3]=es*N+el*X+ec*et+eu*eo,es=s[4],el=s[5],ec=s[6],eu=s[7],i[4]=es*x+el*j+ec*J+eu*er,i[5]=es*_+el*G+ec*$+eu*en,i[6]=es*F+el*Z+ec*ee+eu*ei,i[7]=es*N+el*X+ec*et+eu*eo,es=s[8],el=s[9],ec=s[10],eu=s[11],i[8]=es*x+el*j+ec*J+eu*er,i[9]=es*_+el*G+ec*$+eu*en,i[10]=es*F+el*Z+ec*ee+eu*ei,i[11]=es*N+el*X+ec*et+eu*eo,es=s[12],el=s[13],ec=s[14],eu=s[15],i[12]=es*x+el*j+ec*J+eu*er,i[13]=es*_+el*G+ec*$+eu*en,i[14]=es*F+el*Z+ec*ee+eu*ei,i[15]=es*N+el*X+ec*et+eu*eo,i}},5268:function(i){i.exports=function(i,o,s,x,_,F,N){var j=1/(o-s),G=1/(x-_),Z=1/(F-N);return i[0]=-2*j,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*G,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*Z,i[11]=0,i[12]=(o+s)*j,i[13]=(_+x)*G,i[14]=(N+F)*Z,i[15]=1,i}},1120:function(i){i.exports=function(i,o,s,x,_){var F=1/Math.tan(o/2),N=1/(x-_);return i[0]=F/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=F,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(_+x)*N,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*_*x*N,i[15]=0,i}},4422:function(i){i.exports=function(i,o,s,x){var _,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em=x[0],ey=x[1],ev=x[2],ex=Math.sqrt(em*em+ey*ey+ev*ev);return 1e-6>Math.abs(ex)?null:(em*=ex=1/ex,ey*=ex,ev*=ex,_=Math.sin(s),N=1-(F=Math.cos(s)),j=o[0],G=o[1],Z=o[2],X=o[3],J=o[4],$=o[5],ee=o[6],et=o[7],er=o[8],en=o[9],ei=o[10],eo=o[11],es=em*em*N+F,el=ey*em*N+ev*_,ec=ev*em*N-ey*_,eu=em*ey*N-ev*_,ef=ey*ey*N+F,eh=ev*ey*N+em*_,ed=em*ev*N+ey*_,ep=ey*ev*N-em*_,eg=ev*ev*N+F,i[0]=j*es+J*el+er*ec,i[1]=G*es+$*el+en*ec,i[2]=Z*es+ee*el+ei*ec,i[3]=X*es+et*el+eo*ec,i[4]=j*eu+J*ef+er*eh,i[5]=G*eu+$*ef+en*eh,i[6]=Z*eu+ee*ef+ei*eh,i[7]=X*eu+et*ef+eo*eh,i[8]=j*ed+J*ep+er*eg,i[9]=G*ed+$*ep+en*eg,i[10]=Z*ed+ee*ep+ei*eg,i[11]=X*ed+et*ep+eo*eg,o!==i&&(i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i)}},6109:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[4],N=o[5],j=o[6],G=o[7],Z=o[8],X=o[9],J=o[10],$=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=F*_+Z*x,i[5]=N*_+X*x,i[6]=j*_+J*x,i[7]=G*_+$*x,i[8]=Z*_-F*x,i[9]=X*_-N*x,i[10]=J*_-j*x,i[11]=$*_-G*x,i}},7115:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[0],N=o[1],j=o[2],G=o[3],Z=o[8],X=o[9],J=o[10],$=o[11];return o!==i&&(i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=F*_-Z*x,i[1]=N*_-X*x,i[2]=j*_-J*x,i[3]=G*_-$*x,i[8]=F*x+Z*_,i[9]=N*x+X*_,i[10]=j*x+J*_,i[11]=G*x+$*_,i}},5240:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[0],N=o[1],j=o[2],G=o[3],Z=o[4],X=o[5],J=o[6],$=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=F*_+Z*x,i[1]=N*_+X*x,i[2]=j*_+J*x,i[3]=G*_+$*x,i[4]=Z*_-F*x,i[5]=X*_-N*x,i[6]=J*_-j*x,i[7]=$*_-G*x,i}},3668:function(i){i.exports=function(i,o,s){var x=s[0],_=s[1],F=s[2];return i[0]=o[0]*x,i[1]=o[1]*x,i[2]=o[2]*x,i[3]=o[3]*x,i[4]=o[4]*_,i[5]=o[5]*_,i[6]=o[6]*_,i[7]=o[7]*_,i[8]=o[8]*F,i[9]=o[9]*F,i[10]=o[10]*F,i[11]=o[11]*F,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},998:function(i){i.exports=function(i,o,s){var x,_,F,N,j,G,Z,X,J,$,ee,et,er=s[0],en=s[1],ei=s[2];return o===i?(i[12]=o[0]*er+o[4]*en+o[8]*ei+o[12],i[13]=o[1]*er+o[5]*en+o[9]*ei+o[13],i[14]=o[2]*er+o[6]*en+o[10]*ei+o[14],i[15]=o[3]*er+o[7]*en+o[11]*ei+o[15]):(x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],i[0]=x,i[1]=_,i[2]=F,i[3]=N,i[4]=j,i[5]=G,i[6]=Z,i[7]=X,i[8]=J,i[9]=$,i[10]=ee,i[11]=et,i[12]=x*er+j*en+J*ei+o[12],i[13]=_*er+G*en+$*ei+o[13],i[14]=F*er+Z*en+ee*ei+o[14],i[15]=N*er+X*en+et*ei+o[15]),i}},2142:function(i){i.exports=function(i,o){if(i===o){var s=o[1],x=o[2],_=o[3],F=o[6],N=o[7],j=o[11];i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=s,i[6]=o[9],i[7]=o[13],i[8]=x,i[9]=F,i[11]=o[14],i[12]=_,i[13]=N,i[14]=j}else i[0]=o[0],i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=o[1],i[5]=o[5],i[6]=o[9],i[7]=o[13],i[8]=o[2],i[9]=o[6],i[10]=o[10],i[11]=o[14],i[12]=o[3],i[13]=o[7],i[14]=o[11],i[15]=o[15];return i}},4340:function(i,o,s){"use strict";var x=s(957),_=s(7309);function xformMatrix(i,o){for(var s=[0,0,0,0],x=0;x<4;++x)for(var _=0;_<4;++_)s[_]+=i[4*x+_]*o[x];return s}i.exports=function(i,o,s,F,N,j){if(1===i.length)return[0,i[0].slice()];for(var G=Array(i.length),Z=0;Z<i.length;++Z)G[Z]=function(i,o,s,x,_){for(var F=xformMatrix(x,xformMatrix(s,xformMatrix(o,[i[0],i[1],i[2],1]))),N=0;N<3;++N)F[N]/=F[3];return[.5*_[0]*(1+F[0]),.5*_[1]*(1-F[1])]}(i[Z],s,F,N,j);for(var X=0,J=1/0,Z=0;Z<G.length;++Z){for(var $=0,ee=0;ee<2;++ee)$+=Math.pow(G[Z][ee]-o[ee],2);$<J&&(J=$,X=Z)}for(var et=function(i,o){if(2===i.length){for(var s=0,F=0,N=0;N<2;++N)s+=Math.pow(o[N]-i[0][N],2),F+=Math.pow(o[N]-i[1][N],2);return(s=Math.sqrt(s))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(s+F),s/(F+s)]}if(3===i.length){var j=[0,0];return _(i[0],i[1],i[2],o,j),x(i,j)}return[]}(G,o),er=0,Z=0;Z<3;++Z){if(et[Z]<-.001||et[Z]>1.0001)return null;er+=et[Z]}return Math.abs(er-1)>.001?null:[X,function(i,o){for(var s=[0,0,0],x=0;x<i.length;++x)for(var _=i[x],F=o[x],N=0;N<3;++N)s[N]+=F*_[N];return s}(i,et),et]}},2056:function(i,o,s){var x=s(6832),_=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),F=x(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),N=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),j=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),G=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),Z=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),X=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),J=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),$=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),ee=x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),et=x(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);o.meshShader={vertex:_,fragment:F,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:N,fragment:j,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:G,fragment:Z,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:X,fragment:J,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:$,fragment:J,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:ee,fragment:et,attributes:[{name:"position",type:"vec3"}]}},8116:function(i,o,s){"use strict";var x=s(5158),_=s(5827),F=s(2944),N=s(8931),j=s(115),G=s(104),Z=s(7437),X=s(5050),J=s(9156),$=s(7212),ee=s(5306),et=s(2056),er=s(4340),en=et.meshShader,ei=et.wireShader,eo=et.pointShader,es=et.pickShader,el=et.pointPickShader,ec=et.contourShader,eu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function SimplicialMesh(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,ef,eh,ed,ep,eg){this.gl=i,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=o,this.dirty=!0,this.triShader=s,this.lineShader=x,this.pointShader=_,this.pickShader=F,this.pointPickShader=N,this.contourShader=j,this.trianglePositions=G,this.triangleColors=X,this.triangleNormals=$,this.triangleUVs=J,this.triangleIds=Z,this.triangleVAO=ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=et,this.edgeColors=en,this.edgeUVs=ei,this.edgeIds=er,this.edgeVAO=eo,this.edgeCount=0,this.pointPositions=es,this.pointColors=ec,this.pointUVs=ef,this.pointSizes=eh,this.pointIds=el,this.pointVAO=ed,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ep,this.contourVAO=eg,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=eu,this._view=eu,this._projection=eu,this._resolution=[1,1]}var ef=SimplicialMesh.prototype;function getOpacityFromScale(i,o){if(!o||!o.length)return 1;for(var s=0;s<o.length&&!(o.length<2);++s){if(o[s][0]===i)return o[s][1];if(o[s][0]>i&&s>0){var x=(o[s][0]-i)/(o[s][0]-o[s-1][0]);return o[s][1]*(1-x)+x*o[s-1][1]}}return 1}ef.isOpaque=function(){return!this.hasAlpha},ef.isTransparent=function(){return this.hasAlpha},ef.pickSlots=1,ef.setPickBase=function(i){this.pickId=i},ef.highlight=function(i){if(!i||!this.contourEnable){this.contourCount=0;return}for(var o=$(this.cells,this.intensity,i.intensity),s=o.cells,x=o.vertexIds,_=o.vertexWeights,F=s.length,N=ee.mallocFloat32(6*F),j=0,G=0;G<F;++G)for(var Z=s[G],X=0;X<2;++X){var J=Z[0];2===Z.length&&(J=Z[X]);for(var et=x[J][0],er=x[J][1],en=_[J],ei=1-en,eo=this.positions[et],es=this.positions[er],el=0;el<3;++el)N[j++]=en*eo[el]+ei*es[el]}this.contourCount=j/3|0,this.contourPositions.update(N.subarray(0,j)),ee.free(N)},ef.update=function(i){i=i||{};var o=this.gl;this.dirty=!0,"contourEnable"in i&&(this.contourEnable=i.contourEnable),"contourColor"in i&&(this.contourColor=i.contourColor),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"lightPosition"in i&&(this.lightPosition=i.lightPosition),this.hasAlpha=!1,"opacity"in i&&(this.opacity=i.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in i&&(this.opacityscale=i.opacityscale,this.hasAlpha=!0),"ambient"in i&&(this.ambientLight=i.ambient),"diffuse"in i&&(this.diffuseLight=i.diffuse),"specular"in i&&(this.specularLight=i.specular),"roughness"in i&&(this.roughness=i.roughness),"fresnel"in i&&(this.fresnel=i.fresnel),i.texture?(this.texture.dispose(),this.texture=N(o,i.texture)):i.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=o.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=o.LINEAR,this.texture.setPixels(function(i,o){for(var s=J({colormap:i,nshades:256,format:"rgba"}),x=new Uint8Array(1024),_=0;_<256;++_){for(var F=s[_],N=0;N<3;++N)x[4*_+N]=F[N];o?x[4*_+3]=255*getOpacityFromScale(_/255,o):x[4*_+3]=255*F[3]}return X(x,[256,256,4],[4,0,1])}(i.colormap,this.opacityscale)),this.texture.generateMipmap());var s=i.cells,x=i.positions;if(x&&s){var _=[],F=[],G=[],Z=[],$=[],ee=[],et=[],er=[],en=[],ei=[],eo=[],es=[],el=[],ec=[];this.cells=s,this.positions=x;var eu=i.vertexNormals,ef=i.cellNormals,eh=void 0===i.vertexNormalsEpsilon?1e-6:i.vertexNormalsEpsilon,ed=void 0===i.faceNormalsEpsilon?1e-6:i.faceNormalsEpsilon;i.useFacetNormals&&!ef&&(ef=j.faceNormals(s,x,ed)),ef||eu||(eu=j.vertexNormals(s,x,eh));var ep=i.vertexColors,eg=i.cellColors,em=i.meshColor||[1,1,1,1],ey=i.vertexUVs,ev=i.vertexIntensity,ex=i.cellUVs,e_=i.cellIntensity,ew=1/0,eT=-1/0;if(!ey&&!ex){if(ev){if(i.vertexIntensityBounds)ew=+i.vertexIntensityBounds[0],eT=+i.vertexIntensityBounds[1];else for(var ek=0;ek<ev.length;++ek){var eA=ev[ek];ew=Math.min(ew,eA),eT=Math.max(eT,eA)}}else if(e_){if(i.cellIntensityBounds)ew=+i.cellIntensityBounds[0],eT=+i.cellIntensityBounds[1];else for(var ek=0;ek<e_.length;++ek){var eA=e_[ek];ew=Math.min(ew,eA),eT=Math.max(eT,eA)}}else for(var ek=0;ek<x.length;++ek){var eA=x[ek][2];ew=Math.min(ew,eA),eT=Math.max(eT,eA)}}ev?this.intensity=ev:e_?this.intensity=e_:this.intensity=function(i){for(var o=i.length,s=Array(o),x=0;x<o;++x)s[x]=i[x][2];return s}(x),this.pickVertex=!(e_||eg);var eS=i.pointSizes,eM=i.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var ek=0;ek<x.length;++ek)for(var eC=x[ek],eE=0;eE<3;++eE)!isNaN(eC[eE])&&isFinite(eC[eE])&&(this.bounds[0][eE]=Math.min(this.bounds[0][eE],eC[eE]),this.bounds[1][eE]=Math.max(this.bounds[1][eE],eC[eE]));var eL=0,eP=0,eI=0;o:for(var ek=0;ek<s.length;++ek){var eO=s[ek];switch(eO.length){case 1:for(var eD,eR,eB=eO[0],eC=x[eB],eE=0;eE<3;++eE)if(isNaN(eC[eE])||!isFinite(eC[eE]))continue o;ei.push(eC[0],eC[1],eC[2]),eD=ep?ep[eB]:eg?eg[ek]:em,this.opacityscale&&ev?F.push(eD[0],eD[1],eD[2],this.opacity*getOpacityFromScale((ev[eB]-ew)/(eT-ew),this.opacityscale)):3===eD.length?eo.push(eD[0],eD[1],eD[2],this.opacity):(eo.push(eD[0],eD[1],eD[2],eD[3]*this.opacity),eD[3]<1&&(this.hasAlpha=!0)),eR=ey?ey[eB]:ev?[(ev[eB]-ew)/(eT-ew),0]:ex?ex[ek]:e_?[(e_[ek]-ew)/(eT-ew),0]:[(eC[2]-ew)/(eT-ew),0],es.push(eR[0],eR[1]),eS?el.push(eS[eB]):el.push(eM),ec.push(ek),eI+=1;break;case 2:for(var eE=0;eE<2;++eE)for(var eB=eO[eE],eC=x[eB],ez=0;ez<3;++ez)if(isNaN(eC[ez])||!isFinite(eC[ez]))continue o;for(var eE=0;eE<2;++eE){var eD,eR,eB=eO[eE],eC=x[eB];ee.push(eC[0],eC[1],eC[2]),eD=ep?ep[eB]:eg?eg[ek]:em,this.opacityscale&&ev?F.push(eD[0],eD[1],eD[2],this.opacity*getOpacityFromScale((ev[eB]-ew)/(eT-ew),this.opacityscale)):3===eD.length?et.push(eD[0],eD[1],eD[2],this.opacity):(et.push(eD[0],eD[1],eD[2],eD[3]*this.opacity),eD[3]<1&&(this.hasAlpha=!0)),eR=ey?ey[eB]:ev?[(ev[eB]-ew)/(eT-ew),0]:ex?ex[ek]:e_?[(e_[ek]-ew)/(eT-ew),0]:[(eC[2]-ew)/(eT-ew),0],er.push(eR[0],eR[1]),en.push(ek)}eP+=1;break;case 3:for(var eE=0;eE<3;++eE)for(var eB=eO[eE],eC=x[eB],ez=0;ez<3;++ez)if(isNaN(eC[ez])||!isFinite(eC[ez]))continue o;for(var eE=0;eE<3;++eE){var eD,eR,eF,eB=eO[2-eE],eC=x[eB];_.push(eC[0],eC[1],eC[2]),(eD=ep?ep[eB]:eg?eg[ek]:em)?this.opacityscale&&ev?F.push(eD[0],eD[1],eD[2],this.opacity*getOpacityFromScale((ev[eB]-ew)/(eT-ew),this.opacityscale)):3===eD.length?F.push(eD[0],eD[1],eD[2],this.opacity):(F.push(eD[0],eD[1],eD[2],eD[3]*this.opacity),eD[3]<1&&(this.hasAlpha=!0)):F.push(.5,.5,.5,1),eR=ey?ey[eB]:ev?[(ev[eB]-ew)/(eT-ew),0]:ex?ex[ek]:e_?[(e_[ek]-ew)/(eT-ew),0]:[(eC[2]-ew)/(eT-ew),0],Z.push(eR[0],eR[1]),eF=eu?eu[eB]:ef[ek],G.push(eF[0],eF[1],eF[2]),$.push(ek)}eL+=1}}this.pointCount=eI,this.edgeCount=eP,this.triangleCount=eL,this.pointPositions.update(ei),this.pointColors.update(eo),this.pointUVs.update(es),this.pointSizes.update(el),this.pointIds.update(new Uint32Array(ec)),this.edgePositions.update(ee),this.edgeColors.update(et),this.edgeUVs.update(er),this.edgeIds.update(new Uint32Array(en)),this.trianglePositions.update(_),this.triangleColors.update(F),this.triangleUVs.update(Z),this.triangleNormals.update(G),this.triangleIds.update(new Uint32Array($))}},ef.drawTransparent=ef.draw=function(i){i=i||{};for(var o=this.gl,s=i.model||eu,x=i.view||eu,_=i.projection||eu,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)F[0][N]=Math.max(F[0][N],this.clipBounds[0][N]),F[1][N]=Math.min(F[1][N],this.clipBounds[1][N]);var j={model:s,view:x,projection:_,inverseModel:eu.slice(),clipBounds:F,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};j.inverseModel=Z(j.inverseModel,j.model),o.disable(o.CULL_FACE),this.texture.bind(0);var X=Array(16);G(X,j.view,j.model),G(X,j.projection,X),Z(X,X);for(var N=0;N<3;++N)j.eyePosition[N]=X[12+N]/X[15];for(var J=X[15],N=0;N<3;++N)J+=this.lightPosition[N]*X[4*N+3];for(var N=0;N<3;++N){for(var $=X[12+N],ee=0;ee<3;++ee)$+=X[4*ee+N]*this.lightPosition[ee];j.lightPosition[N]=$/J}if(this.triangleCount>0){var et=this.triShader;et.bind(),et.uniforms=j,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var et=this.lineShader;et.bind(),et.uniforms=j,this.edgeVAO.bind(),o.lineWidth(this.lineWidth*this.pixelRatio),o.drawArrays(o.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var et=this.pointShader;et.bind(),et.uniforms=j,this.pointVAO.bind(),o.drawArrays(o.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var et=this.contourShader;et.bind(),et.uniforms=j,this.contourVAO.bind(),o.drawArrays(o.LINES,0,this.contourCount),this.contourVAO.unbind()}},ef.drawPick=function(i){i=i||{};for(var o=this.gl,s=i.model||eu,x=i.view||eu,_=i.projection||eu,F=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)F[0][N]=Math.max(F[0][N],this.clipBounds[0][N]),F[1][N]=Math.min(F[1][N],this.clipBounds[1][N]);this._model=[].slice.call(s),this._view=[].slice.call(x),this._projection=[].slice.call(_),this._resolution=[o.drawingBufferWidth,o.drawingBufferHeight];var j={model:s,view:x,projection:_,clipBounds:F,pickId:this.pickId/255},G=this.pickShader;if(G.bind(),G.uniforms=j,this.triangleCount>0&&(this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),o.lineWidth(this.lineWidth*this.pixelRatio),o.drawArrays(o.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var G=this.pointPickShader;G.bind(),G.uniforms=j,this.pointVAO.bind(),o.drawArrays(o.POINTS,0,this.pointCount),this.pointVAO.unbind()}},ef.pick=function(i){if(!i||i.id!==this.pickId)return null;for(var o=i.value[0]+256*i.value[1]+65536*i.value[2],s=this.cells[o],x=this.positions,_=Array(s.length),F=0;F<s.length;++F)_[F]=x[s[F]];var N=i.coord[0],j=i.coord[1];if(!this.pickVertex){var G=this.positions[s[0]],Z=this.positions[s[1]],X=this.positions[s[2]],J=[(G[0]+Z[0]+X[0])/3,(G[1]+Z[1]+X[1])/3,(G[2]+Z[2]+X[2])/3];return{_cellCenter:!0,position:[N,j],index:o,cell:s,cellId:o,intensity:this.intensity[o],dataCoordinate:J}}var $=er(_,[N*this.pixelRatio,this._resolution[1]-j*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!$)return null;for(var ee=$[2],et=0,F=0;F<s.length;++F)et+=ee[F]*this.intensity[s[F]];return{position:$[1],index:s[$[0]],cell:s,cellId:o,intensity:et,dataCoordinate:this.positions[s[$[0]]]}},ef.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},i.exports=function(i,o){if(1==arguments.length&&(i=(o=i).gl),!(i.getExtension("OES_standard_derivatives")||i.getExtension("MOZ_OES_standard_derivatives")||i.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var s,j,G,Z,J,$,ee=((s=x(i,en.vertex,en.fragment)).attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.normal.location=4,s),et=((j=x(i,ei.vertex,ei.fragment)).attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j),er=((G=x(i,eo.vertex,eo.fragment)).attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.pointSize.location=4,G),eu=((Z=x(i,es.vertex,es.fragment)).attributes.position.location=0,Z.attributes.id.location=1,Z),ef=((J=x(i,el.vertex,el.fragment)).attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J),eh=(($=x(i,ec.vertex,ec.fragment)).attributes.position.location=0,$),ed=N(i,X(new Uint8Array([255,255,255,255]),[1,1,4]));ed.generateMipmap(),ed.minFilter=i.LINEAR_MIPMAP_LINEAR,ed.magFilter=i.LINEAR;var ep=_(i),eg=_(i),em=_(i),ey=_(i),ev=_(i),ex=F(i,[{buffer:ep,type:i.FLOAT,size:3},{buffer:ev,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:eg,type:i.FLOAT,size:4},{buffer:em,type:i.FLOAT,size:2},{buffer:ey,type:i.FLOAT,size:3}]),e_=_(i),ew=_(i),eT=_(i),ek=_(i),eA=F(i,[{buffer:e_,type:i.FLOAT,size:3},{buffer:ek,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ew,type:i.FLOAT,size:4},{buffer:eT,type:i.FLOAT,size:2}]),eS=_(i),eM=_(i),eC=_(i),eE=_(i),eL=_(i),eP=F(i,[{buffer:eS,type:i.FLOAT,size:3},{buffer:eL,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:eM,type:i.FLOAT,size:4},{buffer:eC,type:i.FLOAT,size:2},{buffer:eE,type:i.FLOAT,size:1}]),eI=_(i),eO=F(i,[{buffer:eI,type:i.FLOAT,size:3}]),eD=new SimplicialMesh(i,ed,ee,et,er,eu,ef,eh,ep,ev,eg,em,ey,ex,e_,ek,ew,eT,eA,eS,eL,eM,eC,eE,eP,eI,eO);return eD.update(o),eD}},4554:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=F(o,[0,0,0,1,1,0,1,1]),x=N(o,j.boxVert,j.lineFrag);return new Boxes(i,s,x)};var x,_,F=s(5827),N=s(5158),j=s(2709);function Boxes(i,o,s){this.plot=i,this.vbo=o,this.shader=s}var G=Boxes.prototype;G.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},G.drawBox=(x=[0,0],_=[0,0],function(i,o,s,F,N){var j=this.plot,G=this.shader,Z=j.gl;x[0]=i,x[1]=o,_[0]=s,_[1]=F,G.uniforms.lo=x,G.uniforms.hi=_,G.uniforms.color=N,Z.drawArrays(Z.TRIANGLE_STRIP,0,4)}),G.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=et(o),x=er(o,ei.gridVert,ei.gridFrag),_=er(o,ei.tickVert,ei.gridFrag);return new Grid(i,s,x,_)};var x,_,F,N,j,G,Z,X,J,$,ee,et=s(5827),er=s(5158),en=s(5070),ei=s(2709);function Grid(i,o,s,x){this.plot=i,this.vbo=o,this.shader=s,this.tickShader=x,this.ticks=[[],[]]}function compareTickNum(i,o){return i-o}var eo=Grid.prototype;eo.draw=(x=[0,0],_=[0,0],F=[0,0],function(){for(var i=this.plot,o=this.vbo,s=this.shader,N=this.ticks,j=i.gl,G=i._tickBounds,Z=i.dataBox,X=i.viewBox,J=i.gridLineWidth,$=i.gridLineColor,ee=i.gridLineEnable,et=i.pixelRatio,er=0;er<2;++er){var en=G[er],ei=G[er+2]-en,eo=.5*(Z[er+2]+Z[er]),es=Z[er+2]-Z[er];_[er]=2*ei/es,x[er]=2*(en-eo)/es}s.bind(),o.bind(),s.attributes.dataCoord.pointer(),s.uniforms.dataShift=x,s.uniforms.dataScale=_;for(var el=0,er=0;er<2;++er){F[0]=F[1]=0,F[er]=1,s.uniforms.dataAxis=F,s.uniforms.lineWidth=J[er]/(X[er+2]-X[er])*et,s.uniforms.color=$[er];var ec=6*N[er].length;ee[er]&&ec&&j.drawArrays(j.TRIANGLES,el,ec),el+=ec}}),eo.drawTickMarks=(N=[0,0],j=[0,0],G=[1,0],Z=[0,1],X=[0,0],J=[0,0],function(){for(var i=this.plot,o=this.vbo,s=this.tickShader,x=this.ticks,_=i.gl,F=i._tickBounds,$=i.dataBox,ee=i.viewBox,et=i.pixelRatio,er=i.screenBox,ei=er[2]-er[0],eo=er[3]-er[1],es=ee[2]-ee[0],el=ee[3]-ee[1],ec=0;ec<2;++ec){var eu=F[ec],ef=F[ec+2]-eu,eh=.5*($[ec+2]+$[ec]),ed=$[ec+2]-$[ec];j[ec]=2*ef/ed,N[ec]=2*(eu-eh)/ed}j[0]*=es/ei,N[0]*=es/ei,j[1]*=el/eo,N[1]*=el/eo,s.bind(),o.bind(),s.attributes.dataCoord.pointer();var ep=s.uniforms;ep.dataShift=N,ep.dataScale=j;var eg=i.tickMarkLength,em=i.tickMarkWidth,ey=i.tickMarkColor,ev=6*x[0].length,ex=Math.min(en.ge(x[0],($[0]-F[0])/(F[2]-F[0]),compareTickNum),x[0].length),e_=Math.min(en.gt(x[0],($[2]-F[0])/(F[2]-F[0]),compareTickNum),x[0].length),ew=0+6*ex,eT=6*Math.max(0,e_-ex),ek=Math.min(en.ge(x[1],($[1]-F[1])/(F[3]-F[1]),compareTickNum),x[1].length),eA=Math.min(en.gt(x[1],($[3]-F[1])/(F[3]-F[1]),compareTickNum),x[1].length),eS=ev+6*ek,eM=6*Math.max(0,eA-ek);X[0]=2*(ee[0]-eg[1])/ei-1,X[1]=(ee[3]+ee[1])/eo-1,J[0]=eg[1]*et/ei,J[1]=em[1]*et/eo,eM&&(ep.color=ey[1],ep.tickScale=J,ep.dataAxis=Z,ep.screenOffset=X,_.drawArrays(_.TRIANGLES,eS,eM)),X[0]=(ee[2]+ee[0])/ei-1,X[1]=2*(ee[1]-eg[0])/eo-1,J[0]=em[0]*et/ei,J[1]=eg[0]*et/eo,eT&&(ep.color=ey[0],ep.tickScale=J,ep.dataAxis=G,ep.screenOffset=X,_.drawArrays(_.TRIANGLES,ew,eT)),X[0]=2*(ee[2]+eg[3])/ei-1,X[1]=(ee[3]+ee[1])/eo-1,J[0]=eg[3]*et/ei,J[1]=em[3]*et/eo,eM&&(ep.color=ey[3],ep.tickScale=J,ep.dataAxis=Z,ep.screenOffset=X,_.drawArrays(_.TRIANGLES,eS,eM)),X[0]=(ee[2]+ee[0])/ei-1,X[1]=2*(ee[3]+eg[2])/eo-1,J[0]=em[2]*et/ei,J[1]=eg[2]*et/eo,eT&&(ep.color=ey[2],ep.tickScale=J,ep.dataAxis=G,ep.screenOffset=X,_.drawArrays(_.TRIANGLES,ew,eT))}),eo.update=($=[1,1,-1,-1,1,-1],ee=[1,-1,1,1,-1,-1],function(i){var o=i.ticks,s=i.bounds,x=new Float32Array(18*(o[0].length+o[1].length));this.plot.zeroLineEnable;for(var _=0,F=[[],[]],N=0;N<2;++N)for(var j=F[N],G=o[N],Z=s[N],X=s[N+2],J=0;J<G.length;++J){var et=(G[J].x-Z)/(X-Z);j.push(et);for(var er=0;er<6;++er)x[_++]=et,x[_++]=$[er],x[_++]=ee[er]}this.ticks=F,this.vbo.update(x)}),eo.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=F(o,[-1,-1,-1,1,1,-1,1,1]),x=N(o,j.lineVert,j.lineFrag);return new Lines(i,s,x)};var x,_,F=s(5827),N=s(5158),j=s(2709);function Lines(i,o,s){this.plot=i,this.vbo=o,this.shader=s}var G=Lines.prototype;G.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},G.drawLine=(x=[0,0],_=[0,0],function(i,o,s,F,N,j){var G=this.plot,Z=this.shader,X=G.gl;x[0]=i,x[1]=o,_[0]=s,_[1]=F,Z.uniforms.start=x,Z.uniforms.end=_,Z.uniforms.width=N*G.pixelRatio,Z.uniforms.color=j,X.drawArrays(X.TRIANGLE_STRIP,0,4)}),G.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(i,o,s){"use strict";var x=s(6832),_=x(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);i.exports={lineVert:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:_,textVert:x(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:_,gridVert:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:_,boxVert:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=J(o),x=$(o,er.textVert,er.textFrag);return new TextElements(i,s,x)};var x,_,F,N,j,G,Z,X,J=s(5827),$=s(5158),ee=s(6946),et=s(5070),er=s(2709);function TextElements(i,o,s){this.plot=i,this.vbo=o,this.shader=s,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var en=TextElements.prototype;en.drawTicks=(x=[0,0],_=[0,0],F=[0,0],function(i){var o=this.plot,s=this.shader,N=this.tickX[i],j=this.tickOffset[i],G=o.gl,Z=o.viewBox,X=o.dataBox,J=o.screenBox,$=o.pixelRatio,ee=o.tickEnable,er=o.tickPad,en=o.tickColor,ei=o.tickAngle,eo=o.labelEnable,es=o.labelPad,el=o.labelColor,ec=o.labelAngle,eu=this.labelOffset[i],ef=this.labelCount[i],eh=et.lt(N,X[i]),ed=et.le(N,X[i+2]);x[0]=x[1]=0,x[i]=1,_[i]=(Z[2+i]+Z[i])/(J[2+i]-J[i])-1;var ep=2/J[2+(1^i)]-J[1^i];_[1^i]=ep*Z[1^i]-1,ee[i]&&(_[1^i]-=ep*$*er[i],eh<ed&&j[ed]>j[eh]&&(s.uniforms.dataAxis=x,s.uniforms.screenOffset=_,s.uniforms.color=en[i],s.uniforms.angle=ei[i],G.drawArrays(G.TRIANGLES,j[eh],j[ed]-j[eh]))),eo[i]&&ef&&(_[1^i]-=ep*$*es[i],s.uniforms.dataAxis=F,s.uniforms.screenOffset=_,s.uniforms.color=el[i],s.uniforms.angle=ec[i],G.drawArrays(G.TRIANGLES,eu,ef)),_[1^i]=ep*Z[2+(1^i)]-1,ee[i+2]&&(_[1^i]+=ep*$*er[i+2],eh<ed&&j[ed]>j[eh]&&(s.uniforms.dataAxis=x,s.uniforms.screenOffset=_,s.uniforms.color=en[i+2],s.uniforms.angle=ei[i+2],G.drawArrays(G.TRIANGLES,j[eh],j[ed]-j[eh]))),eo[i+2]&&ef&&(_[1^i]+=ep*$*es[i+2],s.uniforms.dataAxis=F,s.uniforms.screenOffset=_,s.uniforms.color=el[i+2],s.uniforms.angle=ec[i+2],G.drawArrays(G.TRIANGLES,eu,ef))}),en.drawTitle=(N=[0,0],j=[0,0],function(){var i=this.plot,o=this.shader,s=i.gl,x=i.screenBox,_=i.titleCenter,F=i.titleAngle,G=i.titleColor,Z=i.pixelRatio;if(this.titleCount){for(var X=0;X<2;++X)j[X]=2*(_[X]*Z-x[X])/(x[2+X]-x[X])-1;o.bind(),o.uniforms.dataAxis=N,o.uniforms.screenOffset=j,o.uniforms.angle=F,o.uniforms.color=G,s.drawArrays(s.TRIANGLES,this.titleOffset,this.titleCount)}}),en.bind=(G=[0,0],Z=[0,0],X=[0,0],function(){var i=this.plot,o=this.shader,s=i._tickBounds,x=i.dataBox,_=i.screenBox,F=i.viewBox;o.bind();for(var N=0;N<2;++N){var j=s[N],J=s[N+2]-j,$=.5*(x[N+2]+x[N]),ee=x[N+2]-x[N],et=F[N],er=F[N+2]-et,en=_[N],ei=_[N+2]-en;Z[N]=2*J/ee*er/ei,G[N]=2*(j-$)/ee*er/ei}X[1]=2*i.pixelRatio/(_[3]-_[1]),X[0]=X[1]*(_[3]-_[1])/(_[2]-_[0]),o.uniforms.dataScale=Z,o.uniforms.dataShift=G,o.uniforms.textScale=X,this.vbo.bind(),o.attributes.textCoordinate.pointer()}),en.update=function(i){var o,s,x,_,F,N=[],j=i.ticks,G=i.bounds;for(F=0;F<2;++F){var Z=[Math.floor(N.length/3)],X=[-1/0],J=j[F];for(o=0;o<J.length;++o){var $=J[o],et=$.x,er=$.text,en=$.font||"sans-serif";_=$.fontSize||12;for(var ei=1/(G[F+2]-G[F]),eo=G[F],es=er.split("\n"),el=0;el<es.length;el++)for(s=0,x=ee(en,es[el]).data;s<x.length;s+=2)N.push(x[s]*_,-x[s+1]*_-el*_*1.2,(et-eo)*ei);Z.push(Math.floor(N.length/3)),X.push(et)}this.tickOffset[F]=Z,this.tickX[F]=X}for(F=0;F<2;++F){for(o=0,this.labelOffset[F]=Math.floor(N.length/3),x=ee(i.labelFont[F],i.labels[F],{textAlign:"center"}).data,_=i.labelSize[F];o<x.length;o+=2)N.push(x[o]*_,-x[o+1]*_,0);this.labelCount[F]=Math.floor(N.length/3)-this.labelOffset[F]}for(o=0,this.titleOffset=Math.floor(N.length/3),x=ee(i.titleFont,i.title).data,_=i.titleSize;o<x.length;o+=2)N.push(x[o]*_,-x[o+1]*_,0);this.titleCount=Math.floor(N.length/3)-this.titleOffset,this.vbo.update(N)},en.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=x(o,[o.drawingBufferWidth,o.drawingBufferHeight]),G=new GLPlot2D(o,s);return G.grid=_(G),G.text=F(G),G.line=N(G),G.box=j(G),G.update(i),G};var x=s(2611),_=s(3016),F=s(5613),N=s(1154),j=s(4554);function GLPlot2D(i,o){this.gl=i,this.pickBuffer=o,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var G=GLPlot2D.prototype;function deepClone(i){for(var o=i.slice(),s=0;s<o.length;++s)o[s]=o[s].slice();return o}function compareTicks(i,o){return i.x-o.x}G.setDirty=function(){this.dirty=this.pickDirty=!0},G.setOverlayDirty=function(){this.dirty=!0},G.nextDepthValue=function(){return this._depthCounter++/65536},G.draw=function(){var i=this.gl,o=this.screenBox,s=this.viewBox,x=this.dataBox,_=this.pixelRatio,F=this.grid,N=this.line,j=this.text,G=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]);var Z=this.borderColor;i.clearColor(Z[0]*Z[3],Z[1]*Z[3],Z[2]*Z[3],Z[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),i.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]);var X=this.backgroundColor;i.clearColor(X[0]*X[3],X[1]*X[3],X[2]*X[3],X[3]),i.clear(i.COLOR_BUFFER_BIT),F.draw();var J=this.zeroLineEnable,$=this.zeroLineColor,ee=this.zeroLineWidth;if(J[0]||J[1]){N.bind();for(var et=0;et<2;++et)if(J[et]&&x[et]<=0&&x[et+2]>=0){var er=o[et]-x[et]*(o[et+2]-o[et])/(x[et+2]-x[et]);0===et?N.drawLine(er,o[1],er,o[3],ee[et],$[et]):N.drawLine(o[0],er,o[2],er,ee[et],$[et])}}for(var et=0;et<G.length;++et)G[et].draw();i.viewport(o[0],o[1],o[2]-o[0],o[3]-o[1]),i.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]),this.grid.drawTickMarks(),N.bind();var en=this.borderLineEnable,ei=this.borderLineWidth,eo=this.borderLineColor;en[1]&&N.drawLine(s[0],s[1]-.5*ei[1]*_,s[0],s[3]+.5*ei[3]*_,ei[1],eo[1]),en[0]&&N.drawLine(s[0]-.5*ei[0]*_,s[1],s[2]+.5*ei[2]*_,s[1],ei[0],eo[0]),en[3]&&N.drawLine(s[2],s[1]-.5*ei[1]*_,s[2],s[3]+.5*ei[3]*_,ei[3],eo[3]),en[2]&&N.drawLine(s[0]-.5*ei[0]*_,s[3],s[2]+.5*ei[2]*_,s[3],ei[2],eo[2]),j.bind();for(var et=0;et<2;++et)j.drawTicks(et);this.titleEnable&&j.drawTitle();for(var es=this.overlays,et=0;et<es.length;++et)es[et].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}},G.drawPick=function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var o=1,s=this.objects,x=0;x<s.length;++x)o=s[x].drawPick(o);i.end()}},G.pick=function(i,o){if(!this.static){var s=this.pixelRatio,x=this.pickPixelRatio,_=this.viewBox,F=0|Math.round((i-_[0]/s)*x),N=0|Math.round((o-_[1]/s)*x),j=this.pickBuffer.query(F,N,this.pickRadius);if(!j)return null;for(var G=j.id+(j.value[0]<<8)+(j.value[1]<<16)+(j.value[2]<<24),Z=this.objects,X=0;X<Z.length;++X){var J=Z[X].pick(F,N,G);if(J)return J}return null}},G.setScreenBox=function(i){var o=this.screenBox,s=this.pixelRatio;o[0]=0|Math.round(i[0]*s),o[1]=0|Math.round(i[1]*s),o[2]=0|Math.round(i[2]*s),o[3]=0|Math.round(i[3]*s),this.setDirty()},G.setDataBox=function(i){var o=this.dataBox;(o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3])&&(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],this.setDirty())},G.setViewBox=function(i){var o=this.pixelRatio,s=this.viewBox;s[0]=0|Math.round(i[0]*o),s[1]=0|Math.round(i[1]*o),s[2]=0|Math.round(i[2]*o),s[3]=0|Math.round(i[3]*o);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((i[2]-i[0])*x),0|Math.round((i[3]-i[1])*x)],this.setDirty()},G.update=function(i){i=i||{};var o=this.gl;this.pixelRatio=i.pixelRatio||1;var s=this.pixelRatio;this.pickPixelRatio=Math.max(s,1),this.setScreenBox(i.screenBox||[0,0,o.drawingBufferWidth/s,o.drawingBufferHeight/s]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/s,.125*(this.screenBox[3]-this.screenBox[1])/s,.875*(this.screenBox[2]-this.screenBox[0])/s,.875*(this.screenBox[3]-this.screenBox[1])/s]);var x=this.viewBox,_=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(i.dataBox||[-10,-10/_,10,10/_]),this.borderColor=!1!==i.borderColor&&(i.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=deepClone(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=deepClone(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=deepClone(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(x[0]+x[2])/s,(x[3]+120)/s]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=deepClone(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=deepClone(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=deepClone(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var F=i.ticks||[[],[]],N=this._tickBounds;N[0]=N[1]=1/0,N[2]=N[3]=-1/0;for(var j=0;j<2;++j){var G=F[j].slice(0);0!==G.length&&(G.sort(compareTicks),N[j]=Math.min(N[j],G[0].x),N[j+2]=Math.max(N[j+2],G[G.length-1].x))}this.grid.update({bounds:N,ticks:F}),this.text.update({bounds:N,ticks:F,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif"}),this.static=!!i.static,this.setDirty()},G.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},G.addObject=function(i){0>this.objects.indexOf(i)&&(this.objects.push(i),this.setDirty())},G.removeObject=function(i){for(var o=this.objects,s=0;s<o.length;++s)if(o[s]===i){o.splice(s,1),this.setDirty();break}},G.addOverlay=function(i){0>this.overlays.indexOf(i)&&(this.overlays.push(i),this.setOverlayDirty())},G.removeOverlay=function(i){for(var o=this.overlays,s=0;s<o.length;++s)if(o[s]===i){o.splice(s,1),this.setOverlayDirty();break}}},4296:function(i,o,s){"use strict";i.exports=function(i,o){i=i||document.body;var s=[.01,1/0];"distanceLimits"in(o=o||{})&&(s[0]=o.distanceLimits[0],s[1]=o.distanceLimits[1]),"zoomMin"in o&&(s[0]=o.zoomMin),"zoomMax"in o&&(s[1]=o.zoomMax);var Z=_({center:o.center||[0,0,0],up:o.up||[0,1,0],eye:o.eye||[0,0,10],mode:o.mode||"orbit",distanceLimits:s}),X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J=0,$=i.clientWidth,ee=i.clientHeight,et={keyBindingMode:"rotate",enableWheel:!0,view:Z,element:i,delay:o.delay||16,rotateSpeed:o.rotateSpeed||1,zoomSpeed:o.zoomSpeed||1,translateSpeed:o.translateSpeed||1,flipX:!!o.flipX,flipY:!!o.flipY,modes:Z.modes,_ortho:o._ortho||o.projection&&"orthographic"===o.projection.type||!1,tick:function(){var o=x(),s=this.delay,_=o-2*s;Z.idle(o-s),Z.recalcMatrix(_),Z.flush(o-(100+2*s));for(var F=!0,N=Z.computedMatrix,j=0;j<16;++j)F=F&&X[j]===N[j],X[j]=N[j];var G=i.clientWidth===$&&i.clientHeight===ee;return($=i.clientWidth,ee=i.clientHeight,F)?!G:(J=Math.exp(Z.computedRadius[0]),!0)},lookAt:function(i,o,s){Z.lookAt(Z.lastT(),i,o,s)},rotate:function(i,o,s){Z.rotate(Z.lastT(),i,o,s)},pan:function(i,o,s){Z.pan(Z.lastT(),i,o,s)},translate:function(i,o,s){Z.translate(Z.lastT(),i,o,s)}};return Object.defineProperties(et,{matrix:{get:function(){return Z.computedMatrix},set:function(i){return Z.setMatrix(Z.lastT(),i),Z.computedMatrix},enumerable:!0},mode:{get:function(){return Z.getMode()},set:function(i){var o=Z.computedUp.slice(),s=Z.computedEye.slice(),_=Z.computedCenter.slice();if(Z.setMode(i),"turntable"===i){var F=x();Z._active.lookAt(F,s,_,o),Z._active.lookAt(F+500,s,_,[0,0,1]),Z._active.flush(F)}return Z.getMode()},enumerable:!0},center:{get:function(){return Z.computedCenter},set:function(i){return Z.lookAt(Z.lastT(),null,i),Z.computedCenter},enumerable:!0},eye:{get:function(){return Z.computedEye},set:function(i){return Z.lookAt(Z.lastT(),i),Z.computedEye},enumerable:!0},up:{get:function(){return Z.computedUp},set:function(i){return Z.lookAt(Z.lastT(),null,null,i),Z.computedUp},enumerable:!0},distance:{get:function(){return J},set:function(i){return Z.setDistance(Z.lastT(),i),i},enumerable:!0},distanceLimits:{get:function(){return Z.getDistanceLimits(s)},set:function(i){return Z.setDistanceLimits(i),i},enumerable:!0}}),i.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),et._lastX=-1,et._lastY=-1,et._lastMods={shift:!1,control:!1,alt:!1,meta:!1},et.enableMouseListeners=function(){function handleInteraction(o,s,_,F){var N=et.keyBindingMode;if(!1!==N){var j=!!F.control,G=!!F.alt,X=!!F.shift,$=!!(1&o),ee=1/i.clientHeight,er=ee*(s-et._lastX),en=ee*(_-et._lastY),ei=et.flipX?1:-1,eo=et.flipY?1:-1,es=Math.PI*et.rotateSpeed,el=x();if(-1!==et._lastX&&-1!==et._lastY&&(("rotate"!==N||!$||j||G||X)&&(!$||j||G||!X)||Z.rotate(el,ei*es*er,-eo*es*en,0),("pan"!==N||!$||j||G||X)&&!(2&o)&&(!$||!j||G||X)||Z.pan(el,-et.translateSpeed*er*J,et.translateSpeed*en*J,0),"zoom"===N&&$&&!j&&!G&&!X||4&o||$&&!j&&G&&!X)){var ec=-et.zoomSpeed*en/window.innerHeight*(el-Z.lastT())*100;Z.pan(el,0,0,J*(Math.exp(ec)-1))}return et._lastX=s,et._lastY=_,et._lastMods=F,!0}}et.mouseListener=F(i,handleInteraction),i.addEventListener("touchstart",function(o){var s=j(o.changedTouches[0],i);handleInteraction(0,s[0],s[1],et._lastMods),handleInteraction(1,s[0],s[1],et._lastMods)},!!G&&{passive:!0}),i.addEventListener("touchmove",function(o){var s=j(o.changedTouches[0],i);handleInteraction(1,s[0],s[1],et._lastMods),o.preventDefault()},!!G&&{passive:!1}),i.addEventListener("touchend",function(i){handleInteraction(0,et._lastX,et._lastY,et._lastMods)},!!G&&{passive:!0}),et.wheelListener=N(i,function(i,o){if(!1!==et.keyBindingMode&&et.enableWheel){var s=et.flipX?1:-1,_=et.flipY?1:-1,F=x();if(Math.abs(i)>Math.abs(o))Z.rotate(F,0,0,-i*s*Math.PI*et.rotateSpeed/window.innerWidth);else if(!et._ortho){var N=-et.zoomSpeed*_*o/window.innerHeight*(F-Z.lastT())/20;Z.pan(F,0,0,J*(Math.exp(N)-1))}}},!0)},et.enableMouseListeners(),et};var x=s(8161),_=s(1152),F=s(6145),N=s(6475),j=s(2565),G=s(5233)},8245:function(i,o,s){var x=s(6832),_=s(5158),F=x(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),N=x(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);i.exports=function(i){return _(i,F,N,null,[{name:"position",type:"vec2"}])}},1059:function(i,o,s){"use strict";var x=s(4296),_=s(7453),F=s(2771),N=s(6496),j=s(2611),G=s(4234),Z=s(8126),X=s(6145),J=s(1120),$=s(5268),ee=s(8245),et=s(2321)({tablet:!0,featureDetect:!0});function MouseSelect(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function defaultBool(i){return"boolean"!=typeof i||i}i.exports={createScene:function(i){(i=i||{}).camera=i.camera||{};var o=i.canvas;o||(o=document.createElement("canvas"),i.container?i.container.appendChild(o):document.body.appendChild(o));var s=i.gl;if(s||(i.glOptions&&(et=!!i.glOptions.preserveDrawingBuffer),s=function(i,o){var s=null;try{(s=i.getContext("webgl",o))||(s=i.getContext("experimental-webgl",o))}catch(i){return null}return s}(o,i.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:et})),!s)throw Error("webgl not supported");var er=i.bounds||[[-10,-10,-10],[10,10,10]],en=new MouseSelect,ei=G(s,s.drawingBufferWidth,s.drawingBufferHeight,{preferFloat:!et}),eo=ee(s),es=i.cameraObject&&!0===i.cameraObject._ortho||i.camera.projection&&"orthographic"===i.camera.projection.type||!1,el={eye:i.camera.eye||[2,0,0],center:i.camera.center||[0,0,0],up:i.camera.up||[0,1,0],zoomMin:i.camera.zoomMax||.1,zoomMax:i.camera.zoomMin||100,mode:i.camera.mode||"turntable",_ortho:es},ec=i.axes||{},eu=_(s,ec);eu.enable=!ec.disable;var ef=i.spikes||{},eh=N(s,ef),ed=[],ep=[],eg=[],em=[],ey=!0,ev=!0,ex={view:null,projection:Array(16),model:Array(16),_ortho:!1},ev=!0,e_=[s.drawingBufferWidth,s.drawingBufferHeight],ew=i.cameraObject||x(o,el),eT={gl:s,contextLost:!1,pixelRatio:i.pixelRatio||1,canvas:o,selection:en,camera:ew,axes:eu,axesPixels:null,spikes:eh,bounds:er,objects:ed,shape:e_,aspect:i.aspectRatio||[1,1,1],pickRadius:i.pickRadius||10,zNear:i.zNear||.01,zFar:i.zFar||1e3,fovy:i.fovy||Math.PI/4,clearColor:i.clearColor||[0,0,0,0],autoResize:defaultBool(i.autoResize),autoBounds:defaultBool(i.autoBounds),autoScale:!!i.autoScale,autoCenter:defaultBool(i.autoCenter),clipToBounds:defaultBool(i.clipToBounds),snapToData:!!i.snapToData,onselect:i.onselect||null,onrender:i.onrender||null,onclick:i.onclick||null,cameraParams:ex,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(i){this.aspect[0]=i.x,this.aspect[1]=i.y,this.aspect[2]=i.z,ev=!0},setBounds:function(i,o){this.bounds[0][i]=o.min,this.bounds[1][i]=o.max},setClearColor:function(i){this.clearColor=i},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ek=[s.drawingBufferWidth/eT.pixelRatio|0,s.drawingBufferHeight/eT.pixelRatio|0];function resizeListener(){if(!eT._stopped&&eT.autoResize){var i=o.parentNode,s=1,x=1;i&&i!==document.body?(s=i.clientWidth,x=i.clientHeight):(s=window.innerWidth,x=window.innerHeight);var _=0|Math.ceil(s*eT.pixelRatio),F=0|Math.ceil(x*eT.pixelRatio);if(_!==o.width||F!==o.height){o.width=_,o.height=F;var N=o.style;N.position=N.position||"absolute",N.left="0px",N.top="0px",N.width=s+"px",N.height=x+"px",ey=!0}}}function reallocPickIds(){for(var i=ed.length,o=em.length,x=0;x<o;++x)eg[x]=0;s:for(var x=0;x<i;++x){var _=ed[x],F=_.pickSlots;if(!F){ep[x]=-1;continue}for(var N=0;N<o;++N)if(eg[N]+F<255){ep[x]=N,_.setPickBase(eg[N]+1),eg[N]+=F;continue s}var G=j(s,e_);ep[x]=o,em.push(G),eg.push(F),_.setPickBase(1),o+=1}for(;o>0&&0===eg[o-1];)eg.pop(),em.pop().dispose()}function checkContextLoss(){if(eT.contextLost)return!0;s.isContextLost()&&(eT.contextLost=!0,eT.mouseListener.enabled=!1,eT.selection.object=null,eT.oncontextloss&&eT.oncontextloss())}eT.autoResize&&resizeListener(),window.addEventListener("resize",resizeListener),eT.update=function(i){eT._stopped||(i=i||{},ey=!0,ev=!0)},eT.add=function(i){eT._stopped||(i.axes=eu,ed.push(i),ep.push(-1),ey=!0,ev=!0,reallocPickIds())},eT.remove=function(i){if(!eT._stopped){var o=ed.indexOf(i);o<0||(ed.splice(o,1),ep.pop(),ey=!0,ev=!0,reallocPickIds())}},eT.dispose=function(){if(!eT._stopped&&(eT._stopped=!0,window.removeEventListener("resize",resizeListener),o.removeEventListener("webglcontextlost",checkContextLoss),eT.mouseListener.enabled=!1,!eT.contextLost)){eu.dispose(),eh.dispose();for(var i=0;i<ed.length;++i)ed[i].dispose();ei.dispose();for(var i=0;i<em.length;++i)em[i].dispose();eo.dispose(),s=null,eu=null,eh=null,ed=[]}},eT._mouseRotating=!1,eT._prevButtons=0,eT.enableMouseListeners=function(){eT.mouseListener=X(o,function(i,o,s){if(!eT._stopped){var x=em.length,_=ed.length,F=en.object;en.distance=1/0,en.mouse[0]=o,en.mouse[1]=s,en.object=null,en.screen=null,en.dataCoordinate=en.dataPosition=null;var N=!1;if(i&&eT._prevButtons)eT._mouseRotating=!0;else{eT._mouseRotating&&(ev=!0),eT._mouseRotating=!1;for(var j=0;j<x;++j){var G=em[j].query(o,ek[1]-s-1,eT.pickRadius);if(G){if(G.distance>en.distance)continue;for(var Z=0;Z<_;++Z){var X=ed[Z];if(ep[Z]===j){var J=X.pick(G);J&&(en.buttons=i,en.screen=G.coord,en.distance=G.distance,en.object=X,en.index=J.distance,en.dataPosition=J.position,en.dataCoordinate=J.dataCoordinate,en.data=J,N=!0)}}}}}F&&F!==en.object&&(F.highlight&&F.highlight(null),ey=!0),en.object&&(en.object.highlight&&en.object.highlight(en.data),ey=!0),(N=N||en.object!==F)&&eT.onselect&&eT.onselect(en),1&i&&!(1&eT._prevButtons)&&eT.onclick&&eT.onclick(en),eT._prevButtons=i}})},o.addEventListener("webglcontextlost",checkContextLoss);var eA=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],eS=[eA[0].slice(),eA[1].slice()];function redraw(){if(!checkContextLoss()){resizeListener();var i=eT.camera.tick();ex.view=eT.camera.matrix,ey=ey||i,ev=ev||i,eu.pixelRatio=eT.pixelRatio,eh.pixelRatio=eT.pixelRatio;var o=ed.length,x=eA[0],_=eA[1];x[0]=x[1]=x[2]=1/0,_[0]=_[1]=_[2]=-1/0;for(var N=0;N<o;++N){var j=ed[N];j.pixelRatio=eT.pixelRatio,j.axes=eT.axes,ey=ey||!!j.dirty,ev=ev||!!j.dirty;var G=j.bounds;if(G)for(var X=G[0],ee=G[1],et=0;et<3;++et)x[et]=Math.min(x[et],X[et]),_[et]=Math.max(_[et],ee[et])}var er=eT.bounds;if(eT.autoBounds)for(var et=0;et<3;++et){if(_[et]<x[et])x[et]=-1,_[et]=1;else{x[et]===_[et]&&(x[et]-=1,_[et]+=1);var el=.05*(_[et]-x[et]);x[et]=x[et]-el,_[et]=_[et]+el}er[0][et]=x[et],er[1][et]=_[et]}for(var ec=!1,et=0;et<3;++et)ec=ec||eS[0][et]!==er[0][et]||eS[1][et]!==er[1][et],eS[0][et]=er[0][et],eS[1][et]=er[1][et];if(ev=ev||ec,ey=ey||ec){if(ec){for(var ef=[0,0,0],N=0;N<3;++N)ef[N]=function(i){var o=Math.round(Math.log(Math.abs(i))/Math.log(10));if(o<0){var s=Math.round(Math.pow(10,-o));return Math.ceil(i*s)/s}if(o>0){var s=Math.round(Math.pow(10,o));return Math.ceil(i/s)*s}return Math.ceil(i)}((er[1][N]-er[0][N])/10);eu.autoTicks?eu.update({bounds:er,tickSpacing:ef}):eu.update({bounds:er})}var eg=s.drawingBufferWidth,ew=s.drawingBufferHeight;e_[0]=eg,e_[1]=ew,ek[0]=0|Math.max(eg/eT.pixelRatio,1),ek[1]=0|Math.max(ew/eT.pixelRatio,1),function(i,o){var s=i.bounds,x=i.cameraParams,_=x.projection,F=x.model,N=i.gl.drawingBufferWidth,j=i.gl.drawingBufferHeight,G=i.zNear,Z=i.zFar,X=i.fovy,ee=N/j;o?($(_,-ee,ee,-1,1,G,Z),x._ortho=!0):(J(_,X,ee,G,Z),x._ortho=!1);for(var et=0;et<16;++et)F[et]=0;F[15]=1;for(var er=0,et=0;et<3;++et)er=Math.max(er,s[1][et]-s[0][et]);for(var et=0;et<3;++et)i.autoScale?F[5*et]=i.aspect[et]/(s[1][et]-s[0][et]):F[5*et]=1/er,i.autoCenter&&(F[12+et]=-(.5*F[5*et])*(s[0][et]+s[1][et]))}(eT,es);for(var N=0;N<o;++N){var j=ed[N];j.axesBounds=er,eT.clipToBounds&&(j.clipBounds=er)}en.object&&(eT.snapToData?eh.position=en.dataCoordinate:eh.position=en.dataPosition,eh.bounds=er),ev&&(ev=!1,function(){if(!checkContextLoss()){s.colorMask(!0,!0,!0,!0),s.depthMask(!0),s.disable(s.BLEND),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL);for(var i=ed.length,o=em.length,x=0;x<o;++x){var _=em[x];_.shape=ek,_.begin();for(var F=0;F<i;++F)if(ep[F]===x){var N=ed[F];N.drawPick&&(N.pixelRatio=1,N.drawPick(ex))}_.end()}}}()),eT.axesPixels=F(eT.axes,ex,eg,ew),eT.onrender&&eT.onrender(),s.bindFramebuffer(s.FRAMEBUFFER,null),s.viewport(0,0,eg,ew),eT.clearRGBA(),s.depthMask(!0),s.colorMask(!0,!0,!0,!0),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),s.disable(s.BLEND),s.disable(s.CULL_FACE);var eM=!1;eu.enable&&(eM=eM||eu.isTransparent(),eu.draw(ex)),eh.axes=eu,en.object&&eh.draw(ex),s.disable(s.CULL_FACE);for(var N=0;N<o;++N){var j=ed[N];j.axes=eu,j.pixelRatio=eT.pixelRatio,j.isOpaque&&j.isOpaque()&&j.draw(ex),j.isTransparent&&j.isTransparent()&&(eM=!0)}if(eM){ei.shape=e_,ei.bind(),s.clear(s.DEPTH_BUFFER_BIT),s.colorMask(!1,!1,!1,!1),s.depthMask(!0),s.depthFunc(s.LESS),eu.enable&&eu.isTransparent()&&eu.drawTransparent(ex);for(var N=0;N<o;++N){var j=ed[N];j.isOpaque&&j.isOpaque()&&j.draw(ex)}s.enable(s.BLEND),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.colorMask(!0,!0,!0,!0),s.depthMask(!1),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),eu.isTransparent()&&eu.drawTransparent(ex);for(var N=0;N<o;++N){var j=ed[N];j.isTransparent&&j.isTransparent()&&j.drawTransparent(ex)}s.bindFramebuffer(s.FRAMEBUFFER,null),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.disable(s.DEPTH_TEST),eo.bind(),ei.color[0].bind(0),eo.uniforms.accumBuffer=0,Z(s),s.disable(s.BLEND)}ey=!1;for(var N=0;N<o;++N)ed[N].dirty=!1}}}return eT.enableMouseListeners(),function render(){eT._stopped||eT.contextLost||(redraw(),requestAnimationFrame(render))}(),eT.redraw=function(){eT._stopped||(ey=!0,redraw())},eT},createCamera:x}},8023:function(i,o,s){var x=s(6832);o.pointVertex=x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),o.pointFragment=x(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),o.pickVertex=x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),o.pickFragment=x(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(i,o,s){"use strict";var x,_,F=s(5158),N=s(5827),j=s(5306),G=s(8023);function Pointcloud2D(i,o,s,x,_){this.plot=i,this.offsetBuffer=o,this.pickBuffer=s,this.shader=x,this.pickShader=_,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}i.exports=function(i,o){var s=i.gl,x=N(s),_=N(s),j=F(s,G.pointVertex,G.pointFragment),Z=F(s,G.pickVertex,G.pickFragment),X=new Pointcloud2D(i,x,_,j,Z);return X.update(o),i.addObject(X),X};var Z=Pointcloud2D.prototype;Z.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},Z.update=function(i){function dflt(o,s){return o in i?i[o]:s}i=i||{},this.sizeMin=dflt("sizeMin",.5),this.sizeMax=dflt("sizeMax",20),this.color=dflt("color",[1,0,0,1]).slice(),this.areaRatio=dflt("areaRatio",1),this.borderColor=dflt("borderColor",[0,0,0,1]).slice(),this.blend=dflt("blend",!1);var o,s=i.positions.length>>>1,x=i.positions instanceof Float32Array,_=i.idToIndex instanceof Int32Array&&i.idToIndex.length>=s,F=i.positions,N=x?F:j.mallocFloat32(F.length),G=_?i.idToIndex:j.mallocInt32(s);if(x||N.set(F),!_)for(N.set(F),o=0;o<s;o++)G[o]=o;this.points=F,this.offsetBuffer.update(N),this.pickBuffer.update(G),x||j.free(N),_||j.free(G),this.pointCount=s,this.pickOffset=0},Z.unifiedDraw=(x=[1,0,0,0,1,0,0,0,1],_=[0,0,0,0],function(i){var o=void 0!==i,s=o?this.pickShader:this.shader,F=this.plot.gl,N=this.plot.dataBox;if(0===this.pointCount)return i;var j=N[2]-N[0],G=N[3]-N[1],Z=function(i,o){var s,x=0,_=i.length>>>1;for(s=0;s<_;s++){var F=i[2*s],N=i[2*s+1];F>=o[0]&&F<=o[2]&&N>=o[1]&&N<=o[3]&&x++}return x}(this.points,N),X=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(Z,.33333)));x[0]=2/j,x[4]=2/G,x[6]=-2*N[0]/j-1,x[7]=-2*N[1]/G-1,this.offsetBuffer.bind(),s.bind(),s.attributes.position.pointer(),s.uniforms.matrix=x,s.uniforms.color=this.color,s.uniforms.borderColor=this.borderColor,s.uniforms.pointCloud=X<5,s.uniforms.pointSize=X,s.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),o&&(_[0]=255&i,_[1]=i>>8&255,_[2]=i>>16&255,_[3]=i>>24&255,this.pickBuffer.bind(),s.attributes.pickId.pointer(F.UNSIGNED_BYTE),s.uniforms.pickOffset=_,this.pickOffset=i);var J=F.getParameter(F.BLEND),$=F.getParameter(F.DITHER);return J&&!this.blend&&F.disable(F.BLEND),$&&F.disable(F.DITHER),F.drawArrays(F.POINTS,0,this.pointCount),J&&!this.blend&&F.enable(F.BLEND),$&&F.enable(F.DITHER),i+this.pointCount}),Z.draw=Z.unifiedDraw,Z.drawPick=Z.unifiedDraw,Z.pick=function(i,o,s){var x=this.pickOffset,_=this.pointCount;if(s<x||s>=x+_)return null;var F=s-x,N=this.points;return{object:this,pointId:F,dataCoord:[N[2*F],N[2*F+1]]}}},6093:function(i){i.exports=function(i,o,s,x){var _,F,N,j,G,Z=o[0],X=o[1],J=o[2],$=o[3],ee=s[0],et=s[1],er=s[2],en=s[3];return(F=Z*ee+X*et+J*er+$*en)<0&&(F=-F,ee=-ee,et=-et,er=-er,en=-en),1-F>1e-6?(N=Math.sin(_=Math.acos(F)),j=Math.sin((1-x)*_)/N,G=Math.sin(x*_)/N):(j=1-x,G=x),i[0]=j*Z+G*ee,i[1]=j*X+G*et,i[2]=j*J+G*er,i[3]=j*$+G*en,i}},8240:function(i){"use strict";i.exports=function(i){return i||0===i?i.toString():""}},4123:function(i,o,s){"use strict";var x=s(875);i.exports=function(i,o,s){var F,N,j=_[o];if(j||(j=_[o]={}),i in j)return j[i];var G={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};G.triangles=!0;var Z=x(i,G);G.triangles=!1;var X=x(i,G);if(s&&1!==s){for(F=0;F<Z.positions.length;++F)for(N=0;N<Z.positions[F].length;++N)Z.positions[F][N]/=s;for(F=0;F<X.positions.length;++F)for(N=0;N<X.positions[F].length;++N)X.positions[F][N]/=s}var J=[[1/0,1/0],[-1/0,-1/0]],$=X.positions.length;for(F=0;F<$;++F){var ee=X.positions[F];for(N=0;N<2;++N)J[0][N]=Math.min(J[0][N],ee[N]),J[1][N]=Math.max(J[1][N],ee[N])}return j[i]=[Z,X,J]};var _={}},9282:function(i,o,s){var x=s(5158),_=s(6832),F=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),N=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),G=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),Z=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),X=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],J={vertex:F,fragment:G,attributes:X},$={vertex:N,fragment:G,attributes:X},ee={vertex:j,fragment:G,attributes:X},et={vertex:F,fragment:Z,attributes:X},er={vertex:N,fragment:Z,attributes:X},en={vertex:j,fragment:Z,attributes:X};function createShader(i,o){var s=x(i,o),_=s.attributes;return _.position.location=0,_.color.location=1,_.glyph.location=2,_.id.location=3,s}o.createPerspective=function(i){return createShader(i,J)},o.createOrtho=function(i){return createShader(i,$)},o.createProject=function(i){return createShader(i,ee)},o.createPickPerspective=function(i){return createShader(i,et)},o.createPickOrtho=function(i){return createShader(i,er)},o.createPickProject=function(i){return createShader(i,en)}},2182:function(i,o,s){"use strict";var x=s(3596),_=s(5827),F=s(2944),N=s(5306),j=s(104),G=s(9282),Z=s(4123),X=s(8240),J=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function transformMat4(i,o){var s=i[0],x=i[1],_=i[2],F=i[3];return i[0]=o[0]*s+o[4]*x+o[8]*_+o[12]*F,i[1]=o[1]*s+o[5]*x+o[9]*_+o[13]*F,i[2]=o[2]*s+o[6]*x+o[10]*_+o[14]*F,i[3]=o[3]*s+o[7]*x+o[11]*_+o[15]*F,i}function project(i,o,s,x){return transformMat4(x,x,s),transformMat4(x,x,o),transformMat4(x,x,i)}function ScatterPlotPickResult(i,o){this.index=i,this.dataCoordinate=this.position=o}function fixOpacity(i){return!0===i||i>1?1:i}function PointCloud(i,o,s,x,_,F,N,j,G,Z,X,J){this.gl=i,this.pixelRatio=1,this.shader=o,this.orthoShader=s,this.projectShader=x,this.pointBuffer=_,this.colorBuffer=F,this.glyphBuffer=N,this.idBuffer=j,this.vao=G,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Z,this.pickOrthoShader=X,this.pickProjectShader=J,this.points=[],this._selectResult=new ScatterPlotPickResult(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}i.exports=function(i){var o=i.gl,s=G.createPerspective(o),x=G.createOrtho(o),N=G.createProject(o),j=G.createPickPerspective(o),Z=G.createPickOrtho(o),X=G.createPickProject(o),J=_(o),$=_(o),ee=_(o),et=_(o),er=F(o,[{buffer:J,size:3,type:o.FLOAT},{buffer:$,size:4,type:o.FLOAT},{buffer:ee,size:2,type:o.FLOAT},{buffer:et,size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),en=new PointCloud(o,s,x,N,J,$,ee,et,er,j,Z,X);return en.update(i),en};var $=PointCloud.prototype;$.pickSlots=1,$.setPickBase=function(i){this.pickId=i},$.isTransparent=function(){if(this.hasAlpha)return!0;for(var i=0;i<3;++i)if(this.axesProject[i]&&this.projectHasAlpha)return!0;return!1},$.isOpaque=function(){if(!this.hasAlpha)return!0;for(var i=0;i<3;++i)if(this.axesProject[i]&&!this.projectHasAlpha)return!0;return!1};var ee=[0,0],et=[0,0,0],er=[0,0,0],en=[0,0,0,1],ei=[0,0,0,1],eo=J.slice(),es=[0,0,0],el=[[0,0,0],[0,0,0]];function zeroVec(i){return i[0]=i[1]=i[2]=0,i}function augment(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=1,i}function setComponent(i,o,s,x){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[s]=x,i}var ec=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function drawFull(i,o,s,x,_,F,N){var G=s.gl;if((F===s.projectHasAlpha||N)&&function(i,o,s,x){var _,F=o.axesProject,N=o.gl,G=i.uniforms,Z=s.model||J,X=s.view||J,$=s.projection||J,ec=o.axesBounds,eu=function(i){for(var o=0;o<2;++o)for(var s=0;s<3;++s)el[o][s]=Math.max(Math.min(i[o][s],1e8),-1e8);return el}(o.clipBounds);_=o.axes&&o.axes.lastCubeProps?o.axes.lastCubeProps.axis:[1,1,1],ee[0]=2/N.drawingBufferWidth,ee[1]=2/N.drawingBufferHeight,i.bind(),G.view=X,G.projection=$,G.screenSize=ee,G.highlightId=o.highlightId,G.highlightScale=o.highlightScale,G.clipBounds=eu,G.pickGroup=o.pickId/255,G.pixelRatio=x;for(var ef=0;ef<3;++ef)if(F[ef]){G.scale=o.projectScale[ef],G.opacity=o.projectOpacity[ef];for(var eh=0;eh<16;++eh)eo[eh]=0;for(var eh=0;eh<4;++eh)eo[5*eh]=1;eo[5*ef]=0,_[ef]<0?eo[12+ef]=ec[0][ef]:eo[12+ef]=ec[1][ef],j(eo,Z,eo),G.model=eo;var ed=(ef+1)%3,ep=(ef+2)%3,eg=zeroVec(et),em=zeroVec(er);eg[ed]=1,em[ep]=1;var ey=project($,X,Z,augment(en,eg)),ev=project($,X,Z,augment(ei,em));if(Math.abs(ey[1])>Math.abs(ev[1])){var ex=ey;ey=ev,ev=ex,ex=eg,eg=em,em=ex;var e_=ed;ed=ep,ep=e_}ey[0]<0&&(eg[ed]=-1),ev[1]>0&&(em[ep]=-1);for(var ew=0,eT=0,eh=0;eh<4;++eh)ew+=Math.pow(Z[4*ed+eh],2),eT+=Math.pow(Z[4*ep+eh],2);eg[ed]/=Math.sqrt(ew),em[ep]/=Math.sqrt(eT),G.axes[0]=eg,G.axes[1]=em,G.fragClipBounds[0]=setComponent(es,eu[0],ef,-1e8),G.fragClipBounds[1]=setComponent(es,eu[1],ef,1e8),o.vao.bind(),o.vao.draw(N.TRIANGLES,o.vertexCount),o.lineWidth>0&&(N.lineWidth(o.lineWidth*x),o.vao.draw(N.LINES,o.lineVertexCount,o.vertexCount)),o.vao.unbind()}}(o,s,x,_),F===s.hasAlpha||N){i.bind();var Z=i.uniforms;Z.model=x.model||J,Z.view=x.view||J,Z.projection=x.projection||J,ee[0]=2/G.drawingBufferWidth,ee[1]=2/G.drawingBufferHeight,Z.screenSize=ee,Z.highlightId=s.highlightId,Z.highlightScale=s.highlightScale,Z.fragClipBounds=ec,Z.clipBounds=s.axes.bounds,Z.opacity=s.opacity,Z.pickGroup=s.pickId/255,Z.pixelRatio=_,s.vao.bind(),s.vao.draw(G.TRIANGLES,s.vertexCount),s.lineWidth>0&&(G.lineWidth(s.lineWidth*_),s.vao.draw(G.LINES,s.lineVertexCount,s.vertexCount)),s.vao.unbind()}}function get_glyphData(i,o,s,_){F=X(F=Array.isArray(i)?o<i.length?i[o]:void 0:i);var F,N=!0;x(F)&&(F="",N=!1);var j=Z(F,s,_);return{mesh:j[0],lines:j[1],bounds:j[2],visible:N}}$.draw=function(i){drawFull(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,i,this.pixelRatio,!1,!1)},$.drawTransparent=function(i){drawFull(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,i,this.pixelRatio,!0,!1)},$.drawPick=function(i){drawFull(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,i,1,!0,!0)},$.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=i.value[2]+(i.value[1]<<8)+(i.value[0]<<16);if(o>=this.pointCount||o<0)return null;var s=this.points[o],x=this._selectResult;x.index=o;for(var _=0;_<3;++_)x.position[_]=x.dataCoordinate[_]=s[_];return x},$.highlight=function(i){if(i){var o=i.index;this.highlightId=[(255&o)/255,(o>>8&255)/255,(o>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},$.update=function(i){if("perspective"in(i=i||{})&&(this.useOrtho=!i.perspective),"orthographic"in i&&(this.useOrtho=!!i.orthographic),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"project"in i){if(Array.isArray(i.project))this.axesProject=i.project;else{var o=!!i.project;this.axesProject=[o,o,o]}}if("projectScale"in i){if(Array.isArray(i.projectScale))this.projectScale=i.projectScale.slice();else{var s=+i.projectScale;this.projectScale=[s,s,s]}}if(this.projectHasAlpha=!1,"projectOpacity"in i){if(Array.isArray(i.projectOpacity))this.projectOpacity=i.projectOpacity.slice();else{var s=+i.projectOpacity;this.projectOpacity=[s,s,s]}for(var x=0;x<3;++x)this.projectOpacity[x]=fixOpacity(this.projectOpacity[x]),this.projectOpacity[x]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in i&&(this.opacity=fixOpacity(i.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var _=i.position,F=i.font||"normal",j=i.alignment||[0,0];if(2===j.length)eA=j[0],eS=j[1];else{eA=[],eS=[];for(var x=0;x<j.length;++x)eA[x]=j[x][0],eS[x]=j[x][1]}var G=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],X=i.glyph,J=i.color,$=i.size,ee=i.angle,et=i.lineColor,er=-1,en=0,ei=0,eo=0;if(_.length){eo=_.length;l:for(var x=0;x<eo;++x){for(var es=_[x],el=0;el<3;++el)if(isNaN(es[el])||!isFinite(es[el]))continue l;var ec=get_glyphData(X,x,F,this.pixelRatio),eu=ec.mesh,ef=ec.lines,eh=ec.bounds;en+=3*eu.cells.length,ei+=2*ef.edges.length}}var ed=en+ei,ep=N.mallocFloat(3*ed),eg=N.mallocFloat(4*ed),em=N.mallocFloat(2*ed),ey=N.mallocUint32(ed);if(ed>0){var ev=0,ex=en,e_=[0,0,0,1],ew=[0,0,0,1],eT=Array.isArray(J)&&Array.isArray(J[0]),ek=Array.isArray(et)&&Array.isArray(et[0]);o:for(var x=0;x<eo;++x){er+=1;for(var eA,eS,eM,es=_[x],el=0;el<3;++el){if(isNaN(es[el])||!isFinite(es[el]))continue o;Z[el]=Math.max(Z[el],es[el]),G[el]=Math.min(G[el],es[el])}var ec=get_glyphData(X,x,F,this.pixelRatio),eu=ec.mesh,ef=ec.lines,eh=ec.bounds,eC=ec.visible;if(eC){if(Array.isArray(J)){if(3===(eM=eT?x<J.length?J[x]:[0,0,0,0]:J).length){for(var el=0;el<3;++el)e_[el]=eM[el];e_[3]=1}else if(4===eM.length){for(var el=0;el<4;++el)e_[el]=eM[el];!this.hasAlpha&&eM[3]<1&&(this.hasAlpha=!0)}}else e_[0]=e_[1]=e_[2]=0,e_[3]=1}else e_=[1,1,1,0];if(eC){if(Array.isArray(et)){if(3===(eM=ek?x<et.length?et[x]:[0,0,0,0]:et).length){for(var el=0;el<3;++el)ew[el]=eM[el];ew[el]=1}else if(4===eM.length){for(var el=0;el<4;++el)ew[el]=eM[el];!this.hasAlpha&&eM[3]<1&&(this.hasAlpha=!0)}}else ew[0]=ew[1]=ew[2]=0,ew[3]=1}else ew=[1,1,1,0];var eE=.5;eC?Array.isArray($)?eE=x<$.length?+$[x]:12:$?eE=+$:this.useOrtho&&(eE=12):eE=0;var eL=0;Array.isArray(ee)?eL=x<ee.length?+ee[x]:0:ee&&(eL=+ee);for(var eP=Math.cos(eL),eI=Math.sin(eL),es=_[x],el=0;el<3;++el)Z[el]=Math.max(Z[el],es[el]),G[el]=Math.min(G[el],es[el]);var eO=eS,eD=0;Array.isArray(eA)?eD=x<eA.length?eA[x]:0:eA&&(eD=eA);var eO=0;Array.isArray(eS)?eO=x<eS.length?eS[x]:0:eS&&(eO=eS),eD*=eD>0?1-eh[0][0]:eD<0?1+eh[1][0]:1,eO*=eO>0?1-eh[0][1]:eO<0?1+eh[1][1]:1;for(var eR=[eD,eO],eB=eu.cells||[],ez=eu.positions||[],el=0;el<eB.length;++el)for(var eF=eB[el],eN=0;eN<3;++eN){for(var ej=0;ej<3;++ej)ep[3*ev+ej]=es[ej];for(var ej=0;ej<4;++ej)eg[4*ev+ej]=e_[ej];ey[ev]=er;var eU=ez[eF[eN]];em[2*ev]=eE*(eP*eU[0]-eI*eU[1]+eR[0]),em[2*ev+1]=eE*(eI*eU[0]+eP*eU[1]+eR[1]),ev+=1}for(var eB=ef.edges,ez=ef.positions,el=0;el<eB.length;++el)for(var eF=eB[el],eN=0;eN<2;++eN){for(var ej=0;ej<3;++ej)ep[3*ex+ej]=es[ej];for(var ej=0;ej<4;++ej)eg[4*ex+ej]=ew[ej];ey[ex]=er;var eU=ez[eF[eN]];em[2*ex]=eE*(eP*eU[0]-eI*eU[1]+eR[0]),em[2*ex+1]=eE*(eI*eU[0]+eP*eU[1]+eR[1]),ex+=1}}}this.bounds=[G,Z],this.points=_,this.pointCount=_.length,this.vertexCount=en,this.lineVertexCount=ei,this.pointBuffer.update(ep),this.colorBuffer.update(eg),this.glyphBuffer.update(em),this.idBuffer.update(ey),N.free(ep),N.free(eg),N.free(em),N.free(ey)},$.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(i,o,s){"use strict";var x=s(6832);o.boxVertex=x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),o.boxFragment=x(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(i,o,s){"use strict";var x=s(5158),_=s(5827),F=s(1884);function SelectBox(i,o,s){this.plot=i,this.boxBuffer=o,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}i.exports=function(i,o){var s=i.gl,N=_(s,[0,0,0,1,1,0,1,1]),j=x(s,F.boxVertex,F.boxFragment),G=new SelectBox(i,N,j);return G.update(o),i.addOverlay(G),G};var N=SelectBox.prototype;N.draw=function(){if(this.enabled){var i=this.plot,o=this.selectBox,s=this.borderWidth;this.innerFill;var x=this.innerColor;this.outerFill;var _=this.outerColor,F=this.borderColor,N=i.box,j=i.screenBox,G=i.dataBox,Z=i.viewBox,X=i.pixelRatio,J=(o[0]-G[0])*(Z[2]-Z[0])/(G[2]-G[0])+Z[0],$=(o[1]-G[1])*(Z[3]-Z[1])/(G[3]-G[1])+Z[1],ee=(o[2]-G[0])*(Z[2]-Z[0])/(G[2]-G[0])+Z[0],et=(o[3]-G[1])*(Z[3]-Z[1])/(G[3]-G[1])+Z[1];if(J=Math.max(J,Z[0]),$=Math.max($,Z[1]),ee=Math.min(ee,Z[2]),et=Math.min(et,Z[3]),!(ee<J)&&!(et<$)){N.bind();var er=j[2]-j[0],en=j[3]-j[1];if(this.outerFill&&(N.drawBox(0,0,er,$,_),N.drawBox(0,$,J,et,_),N.drawBox(0,et,er,en,_),N.drawBox(ee,$,er,et,_)),this.innerFill&&N.drawBox(J,$,ee,et,x),s>0){var ei=s*X;N.drawBox(J-ei,$-ei,ee+ei,$+ei,F),N.drawBox(J-ei,et-ei,ee+ei,et+ei,F),N.drawBox(J-ei,$-ei,J+ei,et+ei,F),N.drawBox(ee-ei,$-ei,ee+ei,et+ei,F)}}}},N.update=function(i){i=i||{},this.innerFill=!!i.innerFill,this.outerFill=!!i.outerFill,this.innerColor=(i.innerColor||[0,0,0,.5]).slice(),this.outerColor=(i.outerColor||[0,0,0,.5]).slice(),this.borderColor=(i.borderColor||[0,0,0,1]).slice(),this.borderWidth=i.borderWidth||0,this.selectBox=(i.selectBox||this.selectBox).slice()},N.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(i,o,s){"use strict";i.exports=function(i,o){var s=o[0],F=o[1],N=x(i,s,F,{}),j=_.mallocUint8(s*F*4);return new SelectBuffer(i,N,j)};var x=s(4234),_=s(5306),F=s(5050),N=s(2288).nextPow2,selectRange=function(i,o,s){for(var x=1e8,_=-1,F=-1,N=i.shape[0],j=i.shape[1],G=0;G<N;G++)for(var Z=0;Z<j;Z++){var X=i.get(G,Z,0),J=i.get(G,Z,1),$=i.get(G,Z,2),ee=i.get(G,Z,3);if(X<255||J<255||$<255||ee<255){var et=o-G,er=s-Z,en=et*et+er*er;en<x&&(x=en,_=G,F=Z)}}return[_,F,x]};function SelectResult(i,o,s,x,_){this.coord=[i,o],this.id=s,this.value=x,this.distance=_}function SelectBuffer(i,o,s){this.gl=i,this.fbo=o,this.buffer=s,this._readTimeout=null;var x=this;this._readCallback=function(){x.gl&&(o.bind(),i.readPixels(0,0,o.shape[0],o.shape[1],i.RGBA,i.UNSIGNED_BYTE,x.buffer),x._readTimeout=null)}}var j=SelectBuffer.prototype;Object.defineProperty(j,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var o=this.fbo.shape[0],s=this.fbo.shape[1];if(s*o*4>this.buffer.length){_.free(this.buffer);for(var x=this.buffer=_.mallocUint8(N(s*o*4)),F=0;F<s*o*4;++F)x[F]=255}return i}}}),j.begin=function(){var i=this.gl;this.shape,i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},j.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},j.query=function(i,o,s){if(!this.gl)return null;var x=this.fbo.shape.slice();o|=0,"number"!=typeof s&&(s=1);var _=0|Math.min(Math.max((i|=0)-s,0),x[0]),N=0|Math.min(Math.max(i+s,0),x[0]),j=0|Math.min(Math.max(o-s,0),x[1]),G=0|Math.min(Math.max(o+s,0),x[1]);if(N<=_||G<=j)return null;var Z=[N-_,G-j],X=F(this.buffer,[Z[0],Z[1],4],[4,4*x[0],1],4*(_+x[0]*j)),J=selectRange(X.hi(Z[0],Z[1],1),s,s),$=J[0],ee=J[1];if($<0||Math.pow(this.radius,2)<J[2])return null;var et=X.get($,ee,0),er=X.get($,ee,1),en=X.get($,ee,2),ei=X.get($,ee,3);return new SelectResult($+_|0,ee+j|0,et,[er,en,ei],Math.sqrt(J[2]))},j.dispose=function(){this.gl&&(this.fbo.dispose(),_.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(i,o,s){"use strict";var x=s(9016),_=s(4280),F=s(3984),N=s(1628),j=s(2631),G=s(9068);function Shader(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var Z=Shader.prototype;function compareAttributes(i,o){return i.name<o.name?-1:1}Z.bind=function(){this.program||this._relink();var i,o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),s=this.gl.lastAttribCount;if(o>s)for(i=s;i<o;i++)this.gl.enableVertexAttribArray(i);else if(s>o)for(i=o;i<s;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=o,this.gl.useProgram(this.program)},Z.dispose=function(){for(var i=this.gl.lastAttribCount,o=0;o<i;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},Z.update=function(i,o,s,Z){if(!o||1==arguments.length){var X,J=i;i=J.vertex,o=J.fragment,s=J.uniforms,Z=J.attributes}var $=this,ee=$.gl,et=$._vref;$._vref=N.shader(ee,ee.VERTEX_SHADER,i),et&&et.dispose(),$.vertShader=$._vref.shader;var er=this._fref;if($._fref=N.shader(ee,ee.FRAGMENT_SHADER,o),er&&er.dispose(),$.fragShader=$._fref.shader,!s||!Z){var en=ee.createProgram();if(ee.attachShader(en,$.fragShader),ee.attachShader(en,$.vertShader),ee.linkProgram(en),!ee.getProgramParameter(en,ee.LINK_STATUS)){var ei=ee.getProgramInfoLog(en);throw new G(ei,"Error linking program:"+ei)}s=s||j.uniforms(ee,en),Z=Z||j.attributes(ee,en),ee.deleteProgram(en)}(Z=Z.slice()).sort(compareAttributes);var eo=[],es=[],el=[];for(X=0;X<Z.length;++X){var ec=Z[X];if(ec.type.indexOf("mat")>=0){for(var eu=0|ec.type.charAt(ec.type.length-1),ef=Array(eu),eh=0;eh<eu;++eh)ef[eh]=el.length,es.push(ec.name+"["+eh+"]"),"number"==typeof ec.location?el.push(ec.location+eh):Array.isArray(ec.location)&&ec.location.length===eu&&"number"==typeof ec.location[eh]?el.push(0|ec.location[eh]):el.push(-1);eo.push({name:ec.name,type:ec.type,locations:ef})}else eo.push({name:ec.name,type:ec.type,locations:[el.length]}),es.push(ec.name),"number"==typeof ec.location?el.push(0|ec.location):el.push(-1)}var ed=0;for(X=0;X<el.length;++X)if(el[X]<0){for(;el.indexOf(ed)>=0;)ed+=1;el[X]=ed}var ep=Array(s.length);function relink(){$.program=N.program(ee,$._vref,$._fref,es,el);for(var i=0;i<s.length;++i)ep[i]=ee.getUniformLocation($.program,s[i].name)}relink(),$._relink=relink,$.types={uniforms:F(s),attributes:F(Z)},$.attributes=_(ee,$,eo,el),Object.defineProperty($,"uniforms",x(ee,$,s,ep))},i.exports=function(i,o,s,x,_){var F=new Shader(i);return F.update(o,s,x,_),F}},9068:function(i){function GLError(i,o,s){this.shortMessage=o||"",this.longMessage=s||"",this.rawError=i||"",this.message="gl-shader: "+(o||i||"")+(s?"\n"+s:""),this.stack=Error().stack}GLError.prototype=Error(),GLError.prototype.name="GLError",GLError.prototype.constructor=GLError,i.exports=GLError},4280:function(i,o,s){"use strict";i.exports=function(i,o,s,_){for(var F={},N=0,j=s.length;N<j;++N){var G=s[N],Z=G.name,X=G.type,J=G.locations;switch(X){case"bool":case"int":case"float":addVectorAttribute(i,o,J[0],_,1,F,Z);break;default:if(X.indexOf("vec")>=0){var $=X.charCodeAt(X.length-1)-48;if($<2||$>4)throw new x("","Invalid data type for attribute "+Z+": "+X);addVectorAttribute(i,o,J[0],_,$,F,Z)}else if(X.indexOf("mat")>=0){var $=X.charCodeAt(X.length-1)-48;if($<2||$>4)throw new x("","Invalid data type for attribute "+Z+": "+X);!function(i,o,s,x,_,F,N){for(var j=Array(_),G=Array(_),Z=0;Z<_;++Z)addVectorAttribute(i,o,s[Z],x,_,j,Z),G[Z]=j[Z];Object.defineProperty(j,"location",{set:function(i){if(Array.isArray(i))for(var o=0;o<_;++o)G[o].location=i[o];else for(var o=0;o<_;++o)G[o].location=i+o;return i},get:function(){for(var i=Array(_),o=0;o<_;++o)i[o]=x[s[o]];return i},enumerable:!0}),j.pointer=function(o,F,N,j){o=o||i.FLOAT,F=!!F,N=N||_*_,j=j||0;for(var G=0;G<_;++G){var Z=x[s[G]];i.vertexAttribPointer(Z,_,o,F,N,j+G*_),i.enableVertexAttribArray(Z)}};var X=Array(_),J=i["vertexAttrib"+_+"fv"];Object.defineProperty(F,N,{set:function(o){for(var F=0;F<_;++F){var N=x[s[F]];if(i.disableVertexAttribArray(N),Array.isArray(o[0]))J.call(i,N,o[F]);else{for(var j=0;j<_;++j)X[j]=o[_*F+j];J.call(i,N,X)}}return o},get:function(){return j},enumerable:!0})}(i,o,J,_,$,F,Z)}else throw new x("","Unknown data type for attribute "+Z+": "+X)}}return F};var x=s(9068);function ShaderAttribute(i,o,s,x,_,F){this._gl=i,this._wrapper=o,this._index=s,this._locations=x,this._dimension=_,this._constFunc=F}var _=ShaderAttribute.prototype;_.pointer=function(i,o,s,x){var _=this._gl,F=this._locations[this._index];_.vertexAttribPointer(F,this._dimension,i||_.FLOAT,!!o,s||0,x||0),_.enableVertexAttribArray(F)},_.set=function(i,o,s,x){return this._constFunc(this._locations[this._index],i,o,s,x)},Object.defineProperty(_,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=0|i,this._wrapper.program=null),0|i}});var F=[function(i,o,s){return void 0===s.length?i.vertexAttrib1f(o,s):i.vertexAttrib1fv(o,s)},function(i,o,s,x){return void 0===s.length?i.vertexAttrib2f(o,s,x):i.vertexAttrib2fv(o,s)},function(i,o,s,x,_){return void 0===s.length?i.vertexAttrib3f(o,s,x,_):i.vertexAttrib3fv(o,s)},function(i,o,s,x,_,F){return void 0===s.length?i.vertexAttrib4f(o,s,x,_,F):i.vertexAttrib4fv(o,s)}];function addVectorAttribute(i,o,s,x,_,N,j){var G=F[_],Z=new ShaderAttribute(i,o,s,x,_,G);Object.defineProperty(N,j,{set:function(o){return i.disableVertexAttribArray(x[s]),G(i,x[s],o),o},get:function(){return Z},enumerable:!0})}},9016:function(i,o,s){"use strict";var x=s(3984),_=s(9068);function identity(i){return function(){return i}}function makeVector(i,o){for(var s=Array(i),x=0;x<i;++x)s[x]=o;return s}i.exports=function(i,o,s,F){function makeSetter(o){return function(x){for(var N=function enumerateIndices(i,o){if("object"!=typeof o)return[[i,o]];var s=[];for(var x in o){var _=o[x],F=i;parseInt(x)+""===x?F+="["+x+"]":F+="."+x,"object"==typeof _?s.push.apply(s,enumerateIndices(F,_)):s.push([F,_])}return s}("",o),j=0;j<N.length;++j){var G=N[j],Z=G[0],X=G[1];if(F[X]){var J,$=x;if("string"==typeof Z&&(0===Z.indexOf(".")||0===Z.indexOf("["))){var ee=Z;if(0===Z.indexOf(".")&&(ee=Z.slice(1)),ee.indexOf("]")===ee.length-1){var et=ee.indexOf("["),er=ee.slice(0,et),en=ee.slice(et+1,ee.length-1);$=er?x[er][en]:x[en]}else $=x[ee]}var ei=s[X].type;switch(ei){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(F[X],$);break;case"float":i.uniform1f(F[X],$);break;default:var eo=ei.indexOf("vec");if(0<=eo&&eo<=1&&ei.length===4+eo){if((J=ei.charCodeAt(ei.length-1)-48)<2||J>4)throw new _("","Invalid data type");switch(ei.charAt(0)){case"b":case"i":i["uniform"+J+"iv"](F[X],$);break;case"v":i["uniform"+J+"fv"](F[X],$);break;default:throw new _("","Unrecognized data type for vector "+name+": "+ei)}}else if(0===ei.indexOf("mat")&&4===ei.length){if((J=ei.charCodeAt(ei.length-1)-48)<2||J>4)throw new _("","Invalid uniform dimension type for matrix "+name+": "+ei);i["uniformMatrix"+J+"fv"](F[X],!1,$);break}else throw new _("","Unknown uniform data type for "+name+": "+ei)}}}}}function storeProperty(i,o,x){"object"==typeof x?Object.defineProperty(i,o,{get:identity(processObject(x)),set:makeSetter(x),enumerable:!0,configurable:!1}):F[x]?Object.defineProperty(i,o,{get:function(i,o,s){return i.getUniform(o.program,s[x])},set:makeSetter(x),enumerable:!0,configurable:!1}):i[o]=function(i){switch(i){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var o=i.indexOf("vec");if(0<=o&&o<=1&&i.length===4+o){var s=i.charCodeAt(i.length-1)-48;if(s<2||s>4)throw new _("","Invalid data type");if("b"===i.charAt(0))return makeVector(s,!1);return makeVector(s,0)}if(0===i.indexOf("mat")&&4===i.length){var s=i.charCodeAt(i.length-1)-48;if(s<2||s>4)throw new _("","Invalid uniform dimension type for matrix "+name+": "+i);return makeVector(s*s,0)}throw new _("","Unknown uniform data type for "+name+": "+i)}}(s[x].type)}function processObject(i){var o;if(Array.isArray(i)){o=Array(i.length);for(var s=0;s<i.length;++s)storeProperty(o,s,i[s])}else for(var x in o={},i)storeProperty(o,x,i[x]);return o}var N=x(s,!0);return{get:identity(processObject(N)),set:makeSetter(N),enumerable:!0,configurable:!0}}},3984:function(i){"use strict";i.exports=function(i,o){for(var s={},x=0;x<i.length;++x)for(var _=i[x].name.split("."),F=s,N=0;N<_.length;++N){var j=_[N].split("[");if(j.length>1){j[0]in F||(F[j[0]]=[]),F=F[j[0]];for(var G=1;G<j.length;++G){var Z=parseInt(j[G]);G<j.length-1||N<_.length-1?(Z in F||(G<j.length-1?F[Z]=[]:F[Z]={}),F=F[Z]):o?F[Z]=x:F[Z]=i[x].type}}else N<_.length-1?(j[0]in F||(F[j[0]]={}),F=F[j[0]]):o?F[j[0]]=x:F[j[0]]=i[x].type}return s}},2631:function(i,o){"use strict";o.uniforms=function(i,o){for(var s=i.getProgramParameter(o,i.ACTIVE_UNIFORMS),x=[],_=0;_<s;++_){var F=i.getActiveUniform(o,_);if(F){var N=getType(i,F.type);if(F.size>1)for(var j=0;j<F.size;++j)x.push({name:F.name.replace("[0]","["+j+"]"),type:N});else x.push({name:F.name,type:N})}}return x},o.attributes=function(i,o){for(var s=i.getProgramParameter(o,i.ACTIVE_ATTRIBUTES),x=[],_=0;_<s;++_){var F=i.getActiveAttrib(o,_);F&&x.push({name:F.name,type:getType(i,F.type)})}return x};var s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},x=null;function getType(i,o){if(!x){var _=Object.keys(s);x={};for(var F=0;F<_.length;++F){var N=_[F];x[i[N]]=s[N]}}return x[o]}},1628:function(i,o,s){"use strict";o.shader=function(i,o,s){return getCache(i).getShaderReference(o,s)},o.program=function(i,o,s,x,_){return getCache(i).getProgram(o,s,x,_)};var x=s(9068),_=s(3530),F=new("undefined"==typeof WeakMap?s(4037):WeakMap),N=0;function ShaderReference(i,o,s,x,_,F,N){this.id=i,this.src=o,this.type=s,this.shader=x,this.count=F,this.programs=[],this.cache=N}function ContextCache(i){this.gl=i,this.shaders=[{},{}],this.programs={}}ShaderReference.prototype.dispose=function(){if(0==--this.count){for(var i=this.cache,o=i.gl,s=this.programs,x=0,_=s.length;x<_;++x){var F=i.programs[s[x]];F&&(delete i.programs[x],o.deleteProgram(F))}o.deleteShader(this.shader),delete i.shaders[this.type===o.FRAGMENT_SHADER|0][this.src]}};var j=ContextCache.prototype;function getCache(i){var o=F.get(i);return o||(o=new ContextCache(i),F.set(i,o)),o}j.getShaderReference=function(i,o){var s=this.gl,F=this.shaders[i===s.FRAGMENT_SHADER|0],j=F[o];if(j&&s.isShader(j.shader))j.count+=1;else{var G=function(i,o,s){var F=i.createShader(o);if(i.shaderSource(F,s),i.compileShader(F),!i.getShaderParameter(F,i.COMPILE_STATUS)){var N=i.getShaderInfoLog(F);try{var j=_(N,s,o)}catch(i){throw console.warn("Failed to format compiler error: "+i),new x(N,"Error compiling shader:\n"+N)}throw new x(N,j.short,j.long)}return F}(s,i,o);j=F[o]=new ShaderReference(N++,o,i,G,[],1,this)}return j},j.getProgram=function(i,o,s,_){var F=[i.id,o.id,s.join(":"),_.join(":")].join("@"),N=this.programs[F];return N&&this.gl.isProgram(N)||(this.programs[F]=N=function(i,o,s,_,F){var N=i.createProgram();i.attachShader(N,o),i.attachShader(N,s);for(var j=0;j<_.length;++j)i.bindAttribLocation(N,F[j],_[j]);if(i.linkProgram(N),!i.getProgramParameter(N,i.LINK_STATUS)){var G=i.getProgramInfoLog(N);throw new x(G,"Error linking program: "+G)}return N}(this.gl,i.shader,o.shader,s,_),i.programs.push(F),o.programs.push(F)),N}},3050:function(i){"use strict";function GLSpikes2D(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}i.exports=function(i,o){var s=new GLSpikes2D(i);return s.update(o),i.addOverlay(s),s};var o=GLSpikes2D.prototype;o.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(i){return i.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var i=this.enable,o=this.width,s=this.color,x=this.center,_=this.plot,F=_.line,N=_.dataBox,j=_.viewBox;if(F.bind(),N[0]<=x[0]&&x[0]<=N[2]&&N[1]<=x[1]&&x[1]<=N[3]){var G=j[0]+(x[0]-N[0])/(N[2]-N[0])*(j[2]-j[0]),Z=j[1]+(x[1]-N[1])/(N[3]-N[1])*(j[3]-j[1]);i[0]&&F.drawLine(G,Z,j[0],Z,o[0],s[0]),i[1]&&F.drawLine(G,Z,G,j[1],o[1],s[1]),i[2]&&F.drawLine(G,Z,j[2],Z,o[2],s[2]),i[3]&&F.drawLine(G,Z,G,j[3],o[3],s[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},3540:function(i,o,s){"use strict";var x=s(6832),_=s(5158),F=x(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),N=x(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);i.exports=function(i){return _(i,F,N,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(i,o,s){"use strict";var x=s(5827),_=s(2944),F=s(3540);i.exports=function(i,o){var s=[];function line(i,o,x,_,F,N){var j=[i,o,x,0,0,0,1];j[_+3]=1,j[_]=F,s.push.apply(s,j),j[6]=-1,s.push.apply(s,j),j[_]=N,s.push.apply(s,j),s.push.apply(s,j),j[6]=1,s.push.apply(s,j),j[_]=F,s.push.apply(s,j)}line(0,0,0,0,0,1),line(0,0,0,1,0,1),line(0,0,0,2,0,1),line(1,0,0,1,-1,1),line(1,0,0,2,-1,1),line(0,1,0,0,-1,1),line(0,1,0,2,-1,1),line(0,0,1,0,-1,1),line(0,0,1,1,-1,1);var N=x(i,s),j=_(i,[{type:i.FLOAT,buffer:N,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:N,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:N,size:1,offset:24,stride:28}]),G=F(i);G.attributes.position.location=0,G.attributes.color.location=1,G.attributes.weight.location=2;var Z=new AxisSpikes(i,N,j,G);return Z.update(o),Z};var N=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function AxisSpikes(i,o,s,x){this.gl=i,this.buffer=o,this.vao=s,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var j=AxisSpikes.prototype,G=[0,0,0],Z=[0,0,0],X=[0,0];j.isTransparent=function(){return!1},j.drawTransparent=function(i){},j.draw=function(i){var o,s=this.gl,x=this.vao,_=this.shader;x.bind(),_.bind();var F=i.model||N,j=i.view||N,J=i.projection||N;this.axes&&(o=this.axes.lastCubeProps.axis);for(var $=0;$<3;++$)o&&o[$]<0?(G[$]=this.bounds[0][$],Z[$]=this.bounds[1][$]):(G[$]=this.bounds[1][$],Z[$]=this.bounds[0][$]);X[0]=s.drawingBufferWidth,X[1]=s.drawingBufferHeight,_.uniforms.model=F,_.uniforms.view=j,_.uniforms.projection=J,_.uniforms.coordinates=[this.position,G,Z],_.uniforms.colors=this.colors,_.uniforms.screenShape=X;for(var $=0;$<3;++$)_.uniforms.lineWidth=this.lineWidth[$]*this.pixelRatio,this.enabled[$]&&(x.draw(s.TRIANGLES,6,6*$),this.drawSides[$]&&x.draw(s.TRIANGLES,12,18+12*$));x.unbind()},j.update=function(i){i&&("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(i,o,s){var x=s(6832),_=x(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),F=x(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),N=x(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),j=x(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);o.meshShader={vertex:_,fragment:F,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:N,fragment:j,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(i,o,s){"use strict";var x=s(2858),_=s(4020),F=["xyz","xzy","yxz","yzx","zxy","zyx"],streamToTube=function(i,o,s,F){for(var N=i.points,j=i.velocities,G=i.divergences,Z=[],X=[],J=[],$=[],ee=[],et=[],er=0,en=0,ei=_.create(),eo=_.create(),es=0;es<N.length;es++){var el=N[es],ec=j[es],eu=G[es];0===o&&(eu=.05*s),en=x.length(ec)/F,ei=_.create(),x.copy(ei,ec),ei[3]=eu;for(var ef=0;ef<8;ef++)ee[ef]=[el[0],el[1],el[2],ef];if($.length>0)for(var ef=0;ef<8;ef++){var eh=(ef+1)%8;Z.push($[ef],ee[ef],ee[eh],ee[eh],$[eh],$[ef]),J.push(eo,ei,ei,ei,eo,eo),et.push(er,en,en,en,er,er);var ed=Z.length;X.push([ed-6,ed-5,ed-4],[ed-3,ed-2,ed-1])}var ep=$;$=ee,ee=ep;var eg=eo;eo=ei,ei=eg;var em=er;er=en,en=em}return{positions:Z,cells:X,vectors:J,vertexIntensity:et}},createTubes=function(i,o,s,_){for(var F=0,N=0;N<i.length;N++)for(var j=i[N].velocities,G=0;G<j.length;G++)F=Math.max(F,x.length(j[G]));for(var Z=i.map(function(i){return streamToTube(i,s,_,F)}),X=[],J=[],$=[],ee=[],N=0;N<Z.length;N++){var et=Z[N],er=X.length;X=X.concat(et.positions),$=$.concat(et.vectors),ee=ee.concat(et.vertexIntensity);for(var G=0;G<et.cells.length;G++){var en=et.cells[G],ei=[];J.push(ei);for(var eo=0;eo<en.length;eo++)ei.push(en[eo]+er)}}return{positions:X,cells:J,vectors:$,vertexIntensity:ee,colormap:o}},findLastSmallerIndex=function(i,o){var s,x=i.length;for(s=0;s<x;s++){var _=i[s];if(_===o)break;if(_>o)return s-1}return s},clamp=function(i,o,s){return i<o?o:i>s?s:i},sampleMeshgrid=function(i,o,s){var _,F,N,j,G,Z,X=o.vectors,J=o.meshgrid,$=i[0],ee=i[1],et=i[2],er=J[0].length,en=J[1].length,ei=J[2].length,eo=findLastSmallerIndex(J[0],$),es=findLastSmallerIndex(J[1],ee),el=findLastSmallerIndex(J[2],et),ec=eo+1,eu=es+1,ef=el+1;if(eo=clamp(eo,0,er-1),ec=clamp(ec,0,er-1),es=clamp(es,0,en-1),eu=clamp(eu,0,en-1),el=clamp(el,0,ei-1),ef=clamp(ef,0,ei-1),eo<0||es<0||el<0||ec>er-1||eu>en-1||ef>ei-1)return x.create();var eh=J[0][eo],ed=J[0][ec],ep=J[1][es],eg=J[1][eu],em=J[2][el],ey=J[2][ef],ev=($-eh)/(ed-eh),ex=(ee-ep)/(eg-ep),e_=(et-em)/(ey-em);switch(isFinite(ev)||(ev=.5),isFinite(ex)||(ex=.5),isFinite(e_)||(e_=.5),s.reversedX&&(eo=er-1-eo,ec=er-1-ec),s.reversedY&&(es=en-1-es,eu=en-1-eu),s.reversedZ&&(el=ei-1-el,ef=ei-1-ef),s.filled){case 5:G=el,Z=ef,N=es*ei,j=eu*ei,_=eo*ei*en,F=ec*ei*en;break;case 4:G=el,Z=ef,_=eo*ei,F=ec*ei,N=es*ei*er,j=eu*ei*er;break;case 3:N=es,j=eu,G=el*en,Z=ef*en,_=eo*en*ei,F=ec*en*ei;break;case 2:N=es,j=eu,_=eo*en,F=ec*en,G=el*en*er,Z=ef*en*er;break;case 1:_=eo,F=ec,G=el*er,Z=ef*er,N=es*er*ei,j=eu*er*ei;break;default:_=eo,F=ec,N=es*er,j=eu*er,G=el*er*en,Z=ef*er*en}var ew=X[_+N+G],eT=X[_+N+Z],ek=X[_+j+G],eA=X[_+j+Z],eS=X[F+N+G],eM=X[F+N+Z],eC=X[F+j+G],eE=X[F+j+Z],eL=x.create(),eP=x.create(),eI=x.create(),eO=x.create();x.lerp(eL,ew,eS,ev),x.lerp(eP,eT,eM,ev),x.lerp(eI,ek,eC,ev),x.lerp(eO,eA,eE,ev);var eD=x.create(),eR=x.create();x.lerp(eD,eL,eI,ex),x.lerp(eR,eP,eO,ex);var eB=x.create();return x.lerp(eB,eD,eR,e_),eB},findMinSeparation=function(i){var o=1/0;i.sort(function(i,o){return i-o});for(var s=i.length,x=1;x<s;x++){var _=Math.abs(i[x]-i[x-1]);_<o&&(o=_)}return o},calculateMinPositionDistance=function(i){for(var o=[],s=[],x=[],_={},F={},N={},j=i.length,G=0;G<j;G++){var Z=i[G],X=Z[0],J=Z[1],$=Z[2];_[X]||(o.push(X),_[X]=!0),F[J]||(s.push(J),F[J]=!0),N[$]||(x.push($),N[$]=!0)}var ee=Math.min(findMinSeparation(o),findMinSeparation(s),findMinSeparation(x));return isFinite(ee)?ee:1};i.exports=function(i,o){var s=i.startingPositions,_=i.maxLength||1e3,N=i.tubeSize||1,j=i.absoluteTubeSize,G=i.gridFill||"+x+y+z",Z={};-1!==G.indexOf("-x")&&(Z.reversedX=!0),-1!==G.indexOf("-y")&&(Z.reversedY=!0),-1!==G.indexOf("-z")&&(Z.reversedZ=!0),Z.filled=F.indexOf(G.replace(/-/g,"").replace(/\+/g,""));var X=i.getVelocity||function(o){return sampleMeshgrid(o,i,Z)},J=i.getDivergence||function(i,o){var s=x.create();x.add(s,i,[1e-4,0,0]);var _=X(s);x.subtract(_,_,o),x.scale(_,_,1e4),x.add(s,i,[0,1e-4,0]);var F=X(s);x.subtract(F,F,o),x.scale(F,F,1e4),x.add(s,i,[0,0,1e-4]);var N=X(s);return x.subtract(N,N,o),x.scale(N,N,1e4),x.add(s,_,F),x.add(s,s,N),s},$=[],ee=o[0][0],et=o[0][1],er=o[0][2],en=o[1][0],ei=o[1][1],eo=o[1][2],es=10*x.distance(o[0],o[1])/_,el=es*es,ec=1,eu=0,ef=s.length;ef>1&&(ec=calculateMinPositionDistance(s));for(var eh=0;eh<ef;eh++){var ed=x.create();x.copy(ed,s[eh]);var ep=[ed],eg=[],em=X(ed),ey=ed;eg.push(em);var ev=[],ex=J(ed,em),e_=x.length(ex);isFinite(e_)&&e_>eu&&(eu=e_),ev.push(e_),$.push({points:ep,velocities:eg,divergences:ev});for(var ew=0;ew<100*_&&ep.length<_&&function(i){var o=i[0],s=i[1],x=i[2];return!(o<ee||o>en||s<et||s>ei||x<er||x>eo)}(ed);){ew++;var eT=x.clone(em),ek=x.squaredLength(eT);if(0===ek)break;if(ek>el&&x.scale(eT,eT,es/Math.sqrt(ek)),x.add(eT,eT,ed),em=X(eT),x.squaredDistance(ey,eT)-el>-.0001*el){ep.push(eT),ey=eT,eg.push(em);var ex=J(eT,em),e_=x.length(ex);isFinite(e_)&&e_>eu&&(eu=e_),ev.push(e_)}ed=eT}}var eA=createTubes($,i.colormap,eu,ec);return j?eA.tubeScale=j:(0===eu&&(eu=1),eA.tubeScale=.5*N*ec/eu),eA};var N=s(9578),j=s(1140).createMesh;i.exports.createTubeMesh=function(i,o){return j(i,o,{shaders:N,traceType:"streamtube"})}},9054:function(i,o,s){var x=s(5158),_=s(6832),F=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),N=_(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),G=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);o.createShader=function(i){var o=x(i,F,N,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},o.createPickShader=function(i){var o=x(i,F,G,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},o.createContourShader=function(i){var o=x(i,j,N,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},o.createPickContourShader=function(i){var o=x(i,j,G,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},3754:function(i,o,s){"use strict";i.exports=function(i){var o=i.gl,s=eo(o),x=el(o),j=es(o),G=ec(o),Z=_(o),X=F(o,[{buffer:Z,size:4,stride:40,offset:0},{buffer:Z,size:3,stride:40,offset:16},{buffer:Z,size:3,stride:40,offset:28}]),J=_(o),$=F(o,[{buffer:J,size:4,stride:20,offset:0},{buffer:J,size:1,stride:20,offset:16}]),ee=_(o),et=F(o,[{buffer:ee,size:2,type:o.FLOAT}]),er=N(o,1,256,o.RGBA,o.UNSIGNED_BYTE);er.minFilter=o.LINEAR,er.magFilter=o.LINEAR;var en=new SurfacePlot(o,[0,0],[[0,0,0],[0,0,0]],s,x,Z,X,er,j,G,J,$,ee,et,[0,0,0]),ei={levels:[[],[],[]]};for(var eu in i)ei[eu]=i[eu];return ei.colormap=ei.colormap||"jet",en.update(ei),en};var x=s(2288),_=s(5827),F=s(2944),N=s(8931),j=s(5306),G=s(9156),Z=s(7498),X=s(7382),J=s(5050),$=s(4162),ee=s(104),et=s(7437),er=s(5070),en=s(9144),ei=s(9054),eo=ei.createShader,es=ei.createContourShader,el=ei.createPickShader,ec=ei.createPickContourShader,eu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ef=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],eh=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function SurfacePickResult(i,o,s,x,_){this.position=i,this.index=o,this.uv=s,this.level=x,this.dataCoordinate=_}function SurfacePlot(i,o,s,x,_,F,N,G,Z,X,$,ee,et,er,en){this.gl=i,this.shape=o,this.bounds=s,this.objectOffset=en,this.intensityBounds=[],this._shader=x,this._pickShader=_,this._coordinateBuffer=F,this._vao=N,this._colorMap=G,this._contourShader=Z,this._contourPickShader=X,this._contourBuffer=$,this._contourVAO=ee,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new SurfacePickResult([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=et,this._dynamicVAO=er,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[J(j.mallocFloat(1024),[0,0]),J(j.mallocFloat(1024),[0,0]),J(j.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var i=0;i<3;++i){var o=eh[i],s=(i+1)%3,x=(i+2)%3;o[s+0]=1,o[x+3]=1,o[i+6]=1}}();var ed=SurfacePlot.prototype;ed.genColormap=function(i,o){var s=!1,x=X([G({colormap:i,nshades:256,format:"rgba"}).map(function(i,x){var _=o?function(i,o){if(!o||!o.length)return 1;for(var s=0;s<o.length&&!(o.length<2);++s){if(o[s][0]===i)return o[s][1];if(o[s][0]>i&&s>0){var x=(o[s][0]-i)/(o[s][0]-o[s-1][0]);return o[s][1]*(1-x)+x*o[s-1][1]}}return 1}(x/255,o):i[3];return _<1&&(s=!0),[i[0],i[1],i[2],255*_]})]);return Z.divseq(x,255),this.hasAlphaScale=s,x},ed.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},ed.isOpaque=function(){return!this.isTransparent()},ed.pickSlots=1,ed.setPickBase=function(i){this.pickId=i};var ep=[0,0,0],eg={showSurface:!1,showContour:!1,projections:[eu.slice(),eu.slice(),eu.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function computeProjectionData(i,o){var s,x,_,F=o.axes&&o.axes.lastCubeProps.axis||ep,N=o.showSurface,j=o.showContour;for(s=0;s<3;++s)for(x=0,N=N||o.surfaceProject[s];x<3;++x)j=j||o.contourProject[s][x];for(s=0;s<3;++s){var G=eg.projections[s];for(x=0;x<16;++x)G[x]=0;for(x=0;x<4;++x)G[5*x]=1;G[5*s]=0,G[12+s]=o.axesBounds[+(F[s]>0)][s],ee(G,i.model,G);var Z=eg.clipBounds[s];for(_=0;_<2;++_)for(x=0;x<3;++x)Z[_][x]=i.clipBounds[_][x];Z[0][s]=-1e8,Z[1][s]=1e8}return eg.showSurface=N,eg.showContour=j,eg}var em={model:eu,view:eu,projection:eu,inverseModel:eu.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ey=eu.slice(),ev=[1,0,0,0,1,0,0,0,1];function drawCore(i,o){i=i||{};var s=this.gl;s.disable(s.CULL_FACE),this._colorMap.bind(0),em.model=i.model||eu,em.view=i.view||eu,em.projection=i.projection||eu,em.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],em.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],em.objectOffset=this.objectOffset,em.contourColor=this.contourColor[0],em.inverseModel=et(em.inverseModel,em.model);for(var x=0;x<2;++x)for(var _=em.clipBounds[x],F=0;F<3;++F)_[F]=Math.min(Math.max(this.clipBounds[x][F],-1e8),1e8);for(em.kambient=this.ambientLight,em.kdiffuse=this.diffuseLight,em.kspecular=this.specularLight,em.roughness=this.roughness,em.fresnel=this.fresnel,em.opacity=this.opacity,em.height=0,em.permutation=ev,em.vertexColor=this.vertexColor,ee(ey,em.view,em.model),ee(ey,em.projection,ey),et(ey,ey),x=0;x<3;++x)em.eyePosition[x]=ey[12+x]/ey[15];var N=ey[15];for(x=0;x<3;++x)N+=this.lightPosition[x]*ey[4*x+3];for(x=0;x<3;++x){var j=ey[12+x];for(F=0;F<3;++F)j+=ey[4*F+x]*this.lightPosition[F];em.lightPosition[x]=j/N}var G=computeProjectionData(em,this);if(G.showSurface){for(this._shader.bind(),this._shader.uniforms=em,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(s.TRIANGLES,this._vertexCount),x=0;x<3;++x)this.surfaceProject[x]&&this.vertexCount&&(this._shader.uniforms.model=G.projections[x],this._shader.uniforms.clipBounds=G.clipBounds[x],this._vao.draw(s.TRIANGLES,this._vertexCount));this._vao.unbind()}if(G.showContour){var Z=this._contourShader;em.kambient=1,em.kdiffuse=0,em.kspecular=0,em.opacity=1,Z.bind(),Z.uniforms=em;var X=this._contourVAO;for(X.bind(),x=0;x<3;++x)for(Z.uniforms.permutation=eh[x],s.lineWidth(this.contourWidth[x]*this.pixelRatio),F=0;F<this.contourLevels[x].length;++F)F===this.highlightLevel[x]?(Z.uniforms.contourColor=this.highlightColor[x],Z.uniforms.contourTint=this.highlightTint[x]):(0===F||F-1===this.highlightLevel[x])&&(Z.uniforms.contourColor=this.contourColor[x],Z.uniforms.contourTint=this.contourTint[x]),this._contourCounts[x][F]&&(Z.uniforms.height=this.contourLevels[x][F],X.draw(s.LINES,this._contourCounts[x][F],this._contourOffsets[x][F]));for(x=0;x<3;++x)for(F=0,Z.uniforms.model=G.projections[x],Z.uniforms.clipBounds=G.clipBounds[x];F<3;++F)if(this.contourProject[x][F]){Z.uniforms.permutation=eh[F],s.lineWidth(this.contourWidth[F]*this.pixelRatio);for(var J=0;J<this.contourLevels[F].length;++J)J===this.highlightLevel[F]?(Z.uniforms.contourColor=this.highlightColor[F],Z.uniforms.contourTint=this.highlightTint[F]):(0===J||J-1===this.highlightLevel[F])&&(Z.uniforms.contourColor=this.contourColor[F],Z.uniforms.contourTint=this.contourTint[F]),this._contourCounts[F][J]&&(Z.uniforms.height=this.contourLevels[F][J],X.draw(s.LINES,this._contourCounts[F][J],this._contourOffsets[F][J]))}for(X.unbind(),(X=this._dynamicVAO).bind(),x=0;x<3;++x)if(0!==this._dynamicCounts[x])for(Z.uniforms.model=em.model,Z.uniforms.clipBounds=em.clipBounds,Z.uniforms.permutation=eh[x],s.lineWidth(this.dynamicWidth[x]*this.pixelRatio),Z.uniforms.contourColor=this.dynamicColor[x],Z.uniforms.contourTint=this.dynamicTint[x],Z.uniforms.height=this.dynamicLevel[x],X.draw(s.LINES,this._dynamicCounts[x],this._dynamicOffsets[x]),F=0;F<3;++F)this.contourProject[F][x]&&(Z.uniforms.model=G.projections[F],Z.uniforms.clipBounds=G.clipBounds[F],X.draw(s.LINES,this._dynamicCounts[x],this._dynamicOffsets[x]));X.unbind()}}ed.draw=function(i){return drawCore.call(this,i,!1)},ed.drawTransparent=function(i){return drawCore.call(this,i,!0)};var ex={model:eu,view:eu,projection:eu,inverseModel:eu,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function handleArray(i,o){return Array.isArray(i)?[o(i[0]),o(i[1]),o(i[2])]:[o(i),o(i),o(i)]}function toColor(i){return Array.isArray(i)?3===i.length?[i[0],i[1],i[2],1]:[i[0],i[1],i[2],i[3]]:[0,0,0,1]}function handleColor(i){if(Array.isArray(i)){if(Array.isArray(i))return[toColor(i[0]),toColor(i[1]),toColor(i[2])];var o=toColor(i);return[o.slice(),o.slice(),o.slice()]}}ed.drawPick=function(i){i=i||{};var o=this.gl;o.disable(o.CULL_FACE),ex.model=i.model||eu,ex.view=i.view||eu,ex.projection=i.projection||eu,ex.shape=this._field[2].shape,ex.pickId=this.pickId/255,ex.lowerBound=this.bounds[0],ex.upperBound=this.bounds[1],ex.objectOffset=this.objectOffset,ex.permutation=ev;for(var s=0;s<2;++s)for(var x=ex.clipBounds[s],_=0;_<3;++_)x[_]=Math.min(Math.max(this.clipBounds[s][_],-1e8),1e8);var F=computeProjectionData(ex,this);if(F.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ex,this._vao.bind(),this._vao.draw(o.TRIANGLES,this._vertexCount),s=0;s<3;++s)this.surfaceProject[s]&&(this._pickShader.uniforms.model=F.projections[s],this._pickShader.uniforms.clipBounds=F.clipBounds[s],this._vao.draw(o.TRIANGLES,this._vertexCount));this._vao.unbind()}if(F.showContour){var N=this._contourPickShader;N.bind(),N.uniforms=ex;var j=this._contourVAO;for(j.bind(),_=0;_<3;++_)for(o.lineWidth(this.contourWidth[_]*this.pixelRatio),N.uniforms.permutation=eh[_],s=0;s<this.contourLevels[_].length;++s)this._contourCounts[_][s]&&(N.uniforms.height=this.contourLevels[_][s],j.draw(o.LINES,this._contourCounts[_][s],this._contourOffsets[_][s]));for(s=0;s<3;++s)for(_=0,N.uniforms.model=F.projections[s],N.uniforms.clipBounds=F.clipBounds[s];_<3;++_)if(this.contourProject[s][_]){N.uniforms.permutation=eh[_],o.lineWidth(this.contourWidth[_]*this.pixelRatio);for(var G=0;G<this.contourLevels[_].length;++G)this._contourCounts[_][G]&&(N.uniforms.height=this.contourLevels[_][G],j.draw(o.LINES,this._contourCounts[_][G],this._contourOffsets[_][G]))}j.unbind()}},ed.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=this._field[2].shape,s=this._pickResult,x=o[0]*(i.value[0]+(i.value[2]>>4)/16)/255,_=Math.floor(x),F=x-_,N=o[1]*(i.value[1]+(15&i.value[2])/16)/255,j=Math.floor(N),G=N-j;_+=1,j+=1;var Z=s.position;Z[0]=Z[1]=Z[2]=0;for(var X=0;X<2;++X)for(var J=X?F:1-F,$=0;$<2;++$)for(var ee=$?G:1-G,et=_+X,en=j+$,ei=J*ee,eo=0;eo<3;++eo)Z[eo]+=this._field[eo].get(et,en)*ei;for(var es=this._pickResult.level,el=0;el<3;++el)if(es[el]=er.le(this.contourLevels[el],Z[el]),es[el]<0)this.contourLevels[el].length>0&&(es[el]=0);else if(es[el]<this.contourLevels[el].length-1){var ec=this.contourLevels[el][es[el]],eu=this.contourLevels[el][es[el]+1];Math.abs(ec-Z[el])>Math.abs(eu-Z[el])&&(es[el]+=1)}for(eo=0,s.index[0]=F<.5?_:_+1,s.index[1]=G<.5?j:j+1,s.uv[0]=x/o[0],s.uv[1]=N/o[1];eo<3;++eo)s.dataCoordinate[eo]=this._field[eo].get(s.index[0],s.index[1]);return s},ed.padField=function(i,o){var s=o.shape.slice(),x=i.shape.slice();Z.assign(i.lo(1,1).hi(s[0],s[1]),o),Z.assign(i.lo(1).hi(s[0],1),o.hi(s[0],1)),Z.assign(i.lo(1,x[1]-1).hi(s[0],1),o.lo(0,s[1]-1).hi(s[0],1)),Z.assign(i.lo(0,1).hi(1,s[1]),o.hi(1)),Z.assign(i.lo(x[0]-1,1).hi(1,s[1]),o.lo(s[0]-1)),i.set(0,0,o.get(0,0)),i.set(0,x[1]-1,o.get(0,s[1]-1)),i.set(x[0]-1,0,o.get(s[0]-1,0)),i.set(x[0]-1,x[1]-1,o.get(s[0]-1,s[1]-1))},ed.update=function(i){i=i||{},this.objectOffset=i.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in i&&(this.contourWidth=handleArray(i.contourWidth,Number)),"showContour"in i&&(this.showContour=handleArray(i.showContour,Boolean)),"showSurface"in i&&(this.showSurface=!!i.showSurface),"contourTint"in i&&(this.contourTint=handleArray(i.contourTint,Boolean)),"contourColor"in i&&(this.contourColor=handleColor(i.contourColor)),"contourProject"in i&&(this.contourProject=handleArray(i.contourProject,function(i){return handleArray(i,Boolean)})),"surfaceProject"in i&&(this.surfaceProject=i.surfaceProject),"dynamicColor"in i&&(this.dynamicColor=handleColor(i.dynamicColor)),"dynamicTint"in i&&(this.dynamicTint=handleArray(i.dynamicTint,Number)),"dynamicWidth"in i&&(this.dynamicWidth=handleArray(i.dynamicWidth,Number)),"opacity"in i&&(this.opacity=i.opacity),"opacityscale"in i&&(this.opacityscale=i.opacityscale),"colorBounds"in i&&(this.colorBounds=i.colorBounds),"vertexColor"in i&&(this.vertexColor=i.vertexColor?1:0),"colormap"in i&&this._colorMap.setPixels(this.genColormap(i.colormap,this.opacityscale));var o=i.field||i.coords&&i.coords[2]||null,s=!1;if(o||(o=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in i||"coords"in i){var _=(o.shape[0]+2)*(o.shape[1]+2);_>this._field[2].data.length&&(j.freeFloat(this._field[2].data),this._field[2].data=j.mallocFloat(x.nextPow2(_))),this._field[2]=J(this._field[2].data,[o.shape[0]+2,o.shape[1]+2]),this.padField(this._field[2],o),this.shape=o.shape.slice();for(var F=this.shape,N=0;N<2;++N)this._field[2].size>this._field[N].data.length&&(j.freeFloat(this._field[N].data),this._field[N].data=j.mallocFloat(this._field[2].size)),this._field[N]=J(this._field[N].data,[F[0]+2,F[1]+2]);if(i.coords){var G=i.coords;if(!Array.isArray(G)||3!==G.length)throw Error("gl-surface: invalid coordinates for x/y");for(N=0;N<2;++N){var Z=G[N];for(ei=0;ei<2;++ei)if(Z.shape[ei]!==F[ei])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[N],Z)}}else if(i.ticks){var X=i.ticks;if(!Array.isArray(X)||2!==X.length)throw Error("gl-surface: invalid ticks");for(N=0;N<2;++N){var ee=X[N];if((Array.isArray(ee)||ee.length)&&(ee=J(ee)),ee.shape[0]!==F[N])throw Error("gl-surface: invalid tick length");var et=J(ee.data,F);et.stride[N]=ee.stride[0],et.stride[1^N]=0,this.padField(this._field[N],et)}}else{for(N=0;N<2;++N){var er=[0,0];er[N]=1,this._field[N]=J(this._field[N].data,[F[0]+2,F[1]+2],er,0)}this._field[0].set(0,0,0);for(var ei=0;ei<F[0];++ei)this._field[0].set(ei+1,0,ei);for(this._field[0].set(F[0]+1,0,F[0]-1),this._field[1].set(0,0,0),ei=0;ei<F[1];++ei)this._field[1].set(0,ei+1,ei);this._field[1].set(0,F[1]+1,F[1]-1)}var eo=this._field,es=J(j.mallocFloat(6*eo[2].size),[3,F[0]+2,F[1]+2,2]);for(N=0;N<3;++N)en(es.pick(N),eo[N],"mirror");var el=J(j.mallocFloat(3*eo[2].size),[F[0]+2,F[1]+2,3]);for(N=0;N<F[0]+2;++N)for(ei=0;ei<F[1]+2;++ei){var ec=es.get(0,N,ei,0),eu=es.get(0,N,ei,1),eh=es.get(1,N,ei,0),ed=es.get(1,N,ei,1),ep=es.get(2,N,ei,0),eg=es.get(2,N,ei,1),em=eh*eg-ed*ep,ey=ep*eu-eg*ec,ev=ec*ed-eu*eh,ex=Math.sqrt(em*em+ey*ey+ev*ev);ex<1e-8?(ex=Math.max(Math.abs(em),Math.abs(ey),Math.abs(ev)))<1e-8?(ev=1,ey=em=0,ex=1):ex=1/ex:ex=1/Math.sqrt(ex),el.set(N,ei,0,em*ex),el.set(N,ei,1,ey*ex),el.set(N,ei,2,ev*ex)}j.free(es.data);var e_=[1/0,1/0,1/0],ew=[-1/0,-1/0,-1/0],eT=1/0,ek=-1/0,eA=(F[0]-1)*(F[1]-1)*6,eS=j.mallocFloat(x.nextPow2(10*eA)),eM=0,eC=0;for(N=0;N<F[0]-1;++N)c:for(ei=0;ei<F[1]-1;++ei){for(var eE=0;eE<2;++eE)for(var eL=0;eL<2;++eL)for(var eP=0;eP<3;++eP){var eI=this._field[eP].get(1+N+eE,1+ei+eL);if(isNaN(eI)||!isFinite(eI))continue c}for(eP=0;eP<6;++eP){var eO=N+ef[eP][0],eD=ei+ef[eP][1],eR=this._field[0].get(eO+1,eD+1),eB=this._field[1].get(eO+1,eD+1);eI=this._field[2].get(eO+1,eD+1),em=el.get(eO+1,eD+1,0),ey=el.get(eO+1,eD+1,1),ev=el.get(eO+1,eD+1,2),i.intensity&&(ez=i.intensity.get(eO,eD));var ez=i.intensity?i.intensity.get(eO,eD):eI+this.objectOffset[2];eS[eM++]=eO,eS[eM++]=eD,eS[eM++]=eR,eS[eM++]=eB,eS[eM++]=eI,eS[eM++]=0,eS[eM++]=ez,eS[eM++]=em,eS[eM++]=ey,eS[eM++]=ev,e_[0]=Math.min(e_[0],eR+this.objectOffset[0]),e_[1]=Math.min(e_[1],eB+this.objectOffset[1]),e_[2]=Math.min(e_[2],eI+this.objectOffset[2]),eT=Math.min(eT,ez),ew[0]=Math.max(ew[0],eR+this.objectOffset[0]),ew[1]=Math.max(ew[1],eB+this.objectOffset[1]),ew[2]=Math.max(ew[2],eI+this.objectOffset[2]),ek=Math.max(ek,ez),eC+=1}}for(i.intensityBounds&&(eT=+i.intensityBounds[0],ek=+i.intensityBounds[1]),N=6;N<eM;N+=10)eS[N]=(eS[N]-eT)/(ek-eT);this._vertexCount=eC,this._coordinateBuffer.update(eS.subarray(0,eM)),j.freeFloat(eS),j.free(el.data),this.bounds=[e_,ew],this.intensity=i.intensity||this._field[2],(this.intensityBounds[0]!==eT||this.intensityBounds[1]!==ek)&&(s=!0),this.intensityBounds=[eT,ek]}if("levels"in i){var eF=i.levels;for(N=0,eF=Array.isArray(eF[0])?eF.slice():[[],[],eF];N<3;++N)eF[N]=eF[N].slice(),eF[N].sort(function(i,o){return i-o});for(N=0;N<3;++N)for(ei=0;ei<eF[N].length;++ei)eF[N][ei]-=this.objectOffset[N];u:for(N=0;N<3;++N){if(eF[N].length!==this.contourLevels[N].length){s=!0;break}for(ei=0;ei<eF[N].length;++ei)if(eF[N][ei]!==this.contourLevels[N][ei]){s=!0;break u}}this.contourLevels=eF}if(s){eo=this._field,F=this.shape;for(var eN=[],ej=0;ej<3;++ej){var eU=this.contourLevels[ej],eV=[],eH=[],eG=[0,0,0];for(N=0;N<eU.length;++N){var eW=$(this._field[ej],eU[N]);eV.push(eN.length/5|0),eC=0;f:for(ei=0;ei<eW.cells.length;++ei){var eZ=eW.cells[ei];for(eP=0;eP<2;++eP){var eY=eW.positions[eZ[eP]],eX=eY[0],eK=0|Math.floor(eX),eJ=eX-eK,e$=eY[1],eQ=0|Math.floor(e$),e0=e$-eQ,e1=!1;h:for(var e2=0;e2<3;++e2){eG[e2]=0;var e3=(ej+e2+1)%3;for(eE=0;eE<2;++eE){var e5=eE?eJ:1-eJ;for(eL=0,eO=0|Math.min(Math.max(eK+eE,0),F[0]);eL<2;++eL){var e4=eL?e0:1-e0;if(eD=0|Math.min(Math.max(eQ+eL,0),F[1]),!isFinite(eI=e2<2?this._field[e3].get(eO,eD):(this.intensity.get(eO,eD)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(eI)){e1=!0;break h}var e6=e5*e4;eG[e2]+=e6*eI}}}if(e1){if(eP>0){for(var e8=0;e8<5;++e8)eN.pop();eC-=1}continue f}eN.push(eG[0],eG[1],eY[0],eY[1],eG[2]),eC+=1}}eH.push(eC)}this._contourOffsets[ej]=eV,this._contourCounts[ej]=eH}var e7=j.mallocFloat(eN.length);for(N=0;N<eN.length;++N)e7[N]=eN[N];this._contourBuffer.update(e7),j.freeFloat(e7)}},ed.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var i=0;i<3;++i)j.freeFloat(this._field[i].data)},ed.highlight=function(i){if(!i){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(o=0;o<3;++o)this.enableHighlight[o]?this.highlightLevel[o]=i.level[o]:this.highlightLevel[o]=-1;for(o=0,s=this.snapToData?i.dataCoordinate:i.position;o<3;++o)s[o]-=this.objectOffset[o];if(this.enableDynamic[0]&&s[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&s[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&s[2]!==this.dynamicLevel[2]){for(var o,s,x=0,_=this.shape,F=j.mallocFloat(12*_[0]*_[1]),N=0;N<3;++N){if(!this.enableDynamic[N]){this.dynamicLevel[N]=NaN,this._dynamicCounts[N]=0;continue}this.dynamicLevel[N]=s[N];var G=(N+1)%3,Z=(N+2)%3,X=this._field[N],J=this._field[G],ee=this._field[Z],et=$(X,s[N]),er=et.cells,en=et.positions;for(o=0,this._dynamicOffsets[N]=x;o<er.length;++o)for(var ei=er[o],eo=0;eo<2;++eo){var es=en[ei[eo]],el=+es[0],ec=0|el,eu=0|Math.min(ec+1,_[0]),ef=el-ec,eh=1-ef,ed=+es[1],ep=0|ed,eg=0|Math.min(ep+1,_[1]),em=ed-ep,ey=1-em,ev=eh*ey,ex=eh*em,e_=ef*ey,ew=ef*em,eT=ev*J.get(ec,ep)+ex*J.get(ec,eg)+e_*J.get(eu,ep)+ew*J.get(eu,eg),ek=ev*ee.get(ec,ep)+ex*ee.get(ec,eg)+e_*ee.get(eu,ep)+ew*ee.get(eu,eg);if(isNaN(eT)||isNaN(ek)){eo&&(x-=1);break}F[2*x+0]=eT,F[2*x+1]=ek,x+=1}this._dynamicCounts[N]=x-this._dynamicOffsets[N]}this._dynamicBuffer.update(F.subarray(0,2*x)),j.freeFloat(F)}}},8931:function(i,o,s){"use strict";var x=s(5050),_=s(7498),F=s(5306);i.exports=function(i){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(!N&&(N=[i.LINEAR,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_NEAREST],j=[i.NEAREST,i.LINEAR,i.NEAREST_MIPMAP_NEAREST,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_LINEAR],G=[i.REPEAT,i.CLAMP_TO_EDGE,i.MIRRORED_REPEAT]),"number"==typeof arguments[1])return createTextureShape(i,arguments[1],arguments[2],arguments[3]||i.RGBA,arguments[4]||i.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return createTextureShape(i,0|arguments[1][0],0|arguments[1][1],arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var o,s,Z,X,J,$=arguments[1],ee=acceptTextureDOM($)?$:$.raw;if(ee)return o=0|$.width,s=0|$.height,Z=arguments[2]||i.RGBA,X=arguments[3]||i.UNSIGNED_BYTE,J=initTexture(i),i.texImage2D(i.TEXTURE_2D,0,Z,Z,X,ee),new Texture2D(i,J,o,s,Z,X);if($.shape&&$.data&&$.stride)return function(i,o){var s,N,j=o.dtype,G=o.shape.slice(),Z=i.getParameter(i.MAX_TEXTURE_SIZE);if(G[0]<0||G[0]>Z||G[1]<0||G[1]>Z)throw Error("gl-texture2d: Invalid texture size");var X=isPacked(G,o.stride.slice()),J=0;"float32"===j?J=i.FLOAT:"float64"===j?(J=i.FLOAT,X=!1,j="float32"):"uint8"===j?J=i.UNSIGNED_BYTE:(J=i.UNSIGNED_BYTE,X=!1,j="uint8");var $=0;if(2===G.length)$=i.LUMINANCE,G=[G[0],G[1],1],o=x(o.data,G,[o.stride[0],o.stride[1],1],o.offset);else if(3===G.length){if(1===G[2])$=i.ALPHA;else if(2===G[2])$=i.LUMINANCE_ALPHA;else if(3===G[2])$=i.RGB;else if(4===G[2])$=i.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords")}else throw Error("gl-texture2d: Invalid shape for texture");J!==i.FLOAT||i.getExtension("OES_texture_float")||(J=i.UNSIGNED_BYTE,X=!1);var ee=o.size;if(X)s=0===o.offset&&o.data.length===ee?o.data:o.data.subarray(o.offset,o.offset+ee);else{var et=[G[2],G[2]*G[0],1],er=x(N=F.malloc(ee,j),G,et,0);("float32"===j||"float64"===j)&&J===i.UNSIGNED_BYTE?convertFloatToUint8(er,o):_.assign(er,o),s=N.subarray(0,ee)}var en=initTexture(i);return i.texImage2D(i.TEXTURE_2D,0,$,G[0],G[1],0,$,J,s),X||F.free(N),new Texture2D(i,en,G[0],G[1],$,J)}(i,$)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")};var N=null,j=null,G=null;function acceptTextureDOM(i){return"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&i instanceof ImageData}var convertFloatToUint8=function(i,o){_.muls(i,o,255)};function reshapeTexture(i,o,s){var x=i.gl,_=x.getParameter(x.MAX_TEXTURE_SIZE);if(o<0||o>_||s<0||s>_)throw Error("gl-texture2d: Invalid texture size");return i._shape=[o,s],i.bind(),x.texImage2D(x.TEXTURE_2D,0,i.format,o,s,0,i.format,i.type,null),i._mipLevels=[0],i}function Texture2D(i,o,s,x,_,F){this.gl=i,this.handle=o,this.format=_,this.type=F,this._shape=[s,x],this._mipLevels=[0],this._magFilter=i.NEAREST,this._minFilter=i.NEAREST,this._wrapS=i.CLAMP_TO_EDGE,this._wrapT=i.CLAMP_TO_EDGE,this._anisoSamples=1;var N=this,j=[this._wrapS,this._wrapT];Object.defineProperties(j,[{get:function(){return N._wrapS},set:function(i){return N.wrapS=i}},{get:function(){return N._wrapT},set:function(i){return N.wrapT=i}}]),this._wrapVector=j;var G=[this._shape[0],this._shape[1]];Object.defineProperties(G,[{get:function(){return N._shape[0]},set:function(i){return N.width=i}},{get:function(){return N._shape[1]},set:function(i){return N.height=i}}]),this._shapeVector=G}var Z=Texture2D.prototype;function isPacked(i,o){return 3===i.length?1===o[2]&&o[1]===i[0]*i[2]&&o[0]===i[2]:1===o[0]&&o[1]===i[0]}function initTexture(i){var o=i.createTexture();return i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),o}function createTextureShape(i,o,s,x,_){var F=i.getParameter(i.MAX_TEXTURE_SIZE);if(o<0||o>F||s<0||s>F)throw Error("gl-texture2d: Invalid texture shape");if(_===i.FLOAT&&!i.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var N=initTexture(i);return i.texImage2D(i.TEXTURE_2D,0,x,o,s,0,x,_,null),new Texture2D(i,N,o,s,x,_)}Object.defineProperties(Z,{minFilter:{get:function(){return this._minFilter},set:function(i){this.bind();var o=this.gl;if(this.type===o.FLOAT&&N.indexOf(i)>=0&&!o.getExtension("OES_texture_float_linear")&&(i=o.NEAREST),0>j.indexOf(i))throw Error("gl-texture2d: Unknown filter mode "+i);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,i),this._minFilter=i}},magFilter:{get:function(){return this._magFilter},set:function(i){this.bind();var o=this.gl;if(this.type===o.FLOAT&&N.indexOf(i)>=0&&!o.getExtension("OES_texture_float_linear")&&(i=o.NEAREST),0>j.indexOf(i))throw Error("gl-texture2d: Unknown filter mode "+i);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,i),this._magFilter=i}},mipSamples:{get:function(){return this._anisoSamples},set:function(i){var o=this._anisoSamples;if(this._anisoSamples=0|Math.max(i,1),o!==this._anisoSamples){var s=this.gl.getExtension("EXT_texture_filter_anisotropic");s&&this.gl.texParameterf(this.gl.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(i){if(this.bind(),0>G.indexOf(i))throw Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i),this._wrapS=i}},wrapT:{get:function(){return this._wrapT},set:function(i){if(this.bind(),0>G.indexOf(i))throw Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i),this._wrapT=i}},wrap:{get:function(){return this._wrapVector},set:function(i){if(Array.isArray(i)||(i=[i,i]),2!==i.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var o=0;o<2;++o)if(0>G.indexOf(i[o]))throw Error("gl-texture2d: Unknown wrap mode "+i);this._wrapS=i[0],this._wrapT=i[1];var s=this.gl;return this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this._wrapS),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this._wrapT),i}},shape:{get:function(){return this._shapeVector},set:function(i){if(Array.isArray(i)){if(2!==i.length)throw Error("gl-texture2d: Invalid texture shape")}else i=[0|i,0|i];return reshapeTexture(this,0|i[0],0|i[1]),[0|i[0],0|i[1]]}},width:{get:function(){return this._shape[0]},set:function(i){return reshapeTexture(this,i|=0,this._shape[1]),i}},height:{get:function(){return this._shape[1]},set:function(i){return i|=0,reshapeTexture(this,this._shape[0],i),i}}}),Z.bind=function(i){var o=this.gl;return(void 0!==i&&o.activeTexture(o.TEXTURE0+(0|i)),o.bindTexture(o.TEXTURE_2D,this.handle),void 0!==i)?0|i:o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0},Z.dispose=function(){this.gl.deleteTexture(this.handle)},Z.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var i=Math.min(this._shape[0],this._shape[1]),o=0;i>0;++o,i>>>=1)0>this._mipLevels.indexOf(o)&&this._mipLevels.push(o)},Z.setPixels=function(i,o,s,N){var j=this.gl;this.bind(),Array.isArray(o)?(N=s,s=0|o[1],o=0|o[0]):(o=o||0,s=s||0),N=N||0;var G=acceptTextureDOM(i)?i:i.raw;if(G)0>this._mipLevels.indexOf(N)?(j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,this.type,G),this._mipLevels.push(N)):j.texSubImage2D(j.TEXTURE_2D,N,o,s,this.format,this.type,G);else if(i.shape&&i.stride&&i.data){if(i.shape.length<2||o+i.shape[1]>this._shape[1]>>>N||s+i.shape[0]>this._shape[0]>>>N||o<0||s<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");(function(i,o,s,N,j,G,Z,X){var J=X.dtype,$=X.shape.slice();if($.length<2||$.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ee=0,et=0,er=isPacked($,X.stride.slice());if("float32"===J?ee=i.FLOAT:"float64"===J?(ee=i.FLOAT,er=!1,J="float32"):"uint8"===J?ee=i.UNSIGNED_BYTE:(ee=i.UNSIGNED_BYTE,er=!1,J="uint8"),2===$.length)et=i.LUMINANCE,$=[$[0],$[1],1],X=x(X.data,$,[X.stride[0],X.stride[1],1],X.offset);else if(3===$.length){if(1===$[2])et=i.ALPHA;else if(2===$[2])et=i.LUMINANCE_ALPHA;else if(3===$[2])et=i.RGB;else if(4===$[2])et=i.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");$[2]}else throw Error("gl-texture2d: Invalid shape for texture");if((et===i.LUMINANCE||et===i.ALPHA)&&(j===i.LUMINANCE||j===i.ALPHA)&&(et=j),et!==j)throw Error("gl-texture2d: Incompatible texture format for setPixels");var en=X.size,ei=0>Z.indexOf(N);if(ei&&Z.push(N),ee===G&&er)0===X.offset&&X.data.length===en?ei?i.texImage2D(i.TEXTURE_2D,N,j,$[0],$[1],0,j,G,X.data):i.texSubImage2D(i.TEXTURE_2D,N,o,s,$[0],$[1],j,G,X.data):ei?i.texImage2D(i.TEXTURE_2D,N,j,$[0],$[1],0,j,G,X.data.subarray(X.offset,X.offset+en)):i.texSubImage2D(i.TEXTURE_2D,N,o,s,$[0],$[1],j,G,X.data.subarray(X.offset,X.offset+en));else{var eo,es=x(eo=G===i.FLOAT?F.mallocFloat32(en):F.mallocUint8(en),$,[$[2],$[2]*$[0],1]);ee===i.FLOAT&&G===i.UNSIGNED_BYTE?convertFloatToUint8(es,X):_.assign(es,X),ei?i.texImage2D(i.TEXTURE_2D,N,j,$[0],$[1],0,j,G,eo.subarray(0,en)):i.texSubImage2D(i.TEXTURE_2D,N,o,s,$[0],$[1],j,G,eo.subarray(0,en)),G===i.FLOAT?F.freeFloat32(eo):F.freeUint8(eo)}})(j,o,s,N,this.format,this.type,this._mipLevels,i)}else throw Error("gl-texture2d: Unsupported data type")}},3056:function(i){"use strict";i.exports=function(i,o,s){o?o.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var x=0|i.getParameter(i.MAX_VERTEX_ATTRIBS);if(s){if(s.length>x)throw Error("gl-vao: Too many vertex attributes");for(var _=0;_<s.length;++_){var F=s[_];if(F.buffer){var N=F.buffer,j=F.size||4,G=F.type||i.FLOAT,Z=!!F.normalized,X=F.stride||0,J=F.offset||0;N.bind(),i.enableVertexAttribArray(_),i.vertexAttribPointer(_,j,G,Z,X,J)}else{if("number"==typeof F)i.vertexAttrib1f(_,F);else if(1===F.length)i.vertexAttrib1f(_,F[0]);else if(2===F.length)i.vertexAttrib2f(_,F[0],F[1]);else if(3===F.length)i.vertexAttrib3f(_,F[0],F[1],F[2]);else if(4===F.length)i.vertexAttrib4f(_,F[0],F[1],F[2],F[3]);else throw Error("gl-vao: Invalid vertex attribute");i.disableVertexAttribArray(_)}}for(;_<x;++_)i.disableVertexAttribArray(_)}else{i.bindBuffer(i.ARRAY_BUFFER,null);for(var _=0;_<x;++_)i.disableVertexAttribArray(_)}}},7220:function(i,o,s){"use strict";var x=s(3056);function VAOEmulated(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}VAOEmulated.prototype.bind=function(){x(this.gl,this._elements,this._attributes)},VAOEmulated.prototype.update=function(i,o,s){this._elements=o,this._attributes=i,this._elementsType=s||this.gl.UNSIGNED_SHORT},VAOEmulated.prototype.dispose=function(){},VAOEmulated.prototype.unbind=function(){},VAOEmulated.prototype.draw=function(i,o,s){s=s||0;var x=this.gl;this._elements?x.drawElements(i,o,this._elementsType,s):x.drawArrays(i,s,o)},i.exports=function(i){return new VAOEmulated(i)}},3778:function(i,o,s){"use strict";var x=s(3056);function VertexAttribute(i,o,s,x,_,F){this.location=i,this.dimension=o,this.a=s,this.b=x,this.c=_,this.d=F}function VAONative(i,o,s){this.gl=i,this._ext=o,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=i.UNSIGNED_SHORT}VertexAttribute.prototype.bind=function(i){switch(this.dimension){case 1:i.vertexAttrib1f(this.location,this.a);break;case 2:i.vertexAttrib2f(this.location,this.a,this.b);break;case 3:i.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:i.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},VAONative.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var i=0;i<this._attribs.length;++i)this._attribs[i].bind(this.gl)},VAONative.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},VAONative.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},VAONative.prototype.update=function(i,o,s){if(this.bind(),x(this.gl,o,i),this.unbind(),this._attribs.length=0,i)for(var _=0;_<i.length;++_){var F=i[_];"number"==typeof F?this._attribs.push(new VertexAttribute(_,1,F)):Array.isArray(F)&&this._attribs.push(new VertexAttribute(_,F.length,F[0],F[1],F[2],F[3]))}this._useElements=!!o,this._elementsType=s||this.gl.UNSIGNED_SHORT},VAONative.prototype.draw=function(i,o,s){s=s||0;var x=this.gl;this._useElements?x.drawElements(i,o,this._elementsType,s):x.drawArrays(i,s,o)},i.exports=function(i,o){return new VAONative(i,o,o.createVertexArrayOES())}},2944:function(i,o,s){"use strict";var x=s(3778),_=s(7220);function ExtensionShim(i){this.bindVertexArrayOES=i.bindVertexArray.bind(i),this.createVertexArrayOES=i.createVertexArray.bind(i),this.deleteVertexArrayOES=i.deleteVertexArray.bind(i)}i.exports=function(i,o,s,F){var N,j=i.createVertexArray?new ExtensionShim(i):i.getExtension("OES_vertex_array_object");return(N=j?x(i,j):_(i)).update(o,s,F),N}},2598:function(i){i.exports=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i}},5879:function(i,o,s){i.exports=function(i,o){var s=x(i[0],i[1],i[2]),N=x(o[0],o[1],o[2]);_(s,s),_(N,N);var j=F(s,N);return j>1?0:Math.acos(j)};var x=s(5415),_=s(899),F=s(9305)},8827:function(i){i.exports=function(i,o){return i[0]=Math.ceil(o[0]),i[1]=Math.ceil(o[1]),i[2]=Math.ceil(o[2]),i}},7622:function(i){i.exports=function(i){var o=new Float32Array(3);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o}},8782:function(i){i.exports=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}},8501:function(i){i.exports=function(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},903:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=s[0],j=s[1],G=s[2];return i[0]=_*G-F*j,i[1]=F*N-x*G,i[2]=x*j-_*N,i}},5981:function(i,o,s){i.exports=s(8288)},8288:function(i){i.exports=function(i,o){var s=o[0]-i[0],x=o[1]-i[1],_=o[2]-i[2];return Math.sqrt(s*s+x*x+_*_)}},8629:function(i,o,s){i.exports=s(7979)},7979:function(i){i.exports=function(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i}},9305:function(i){i.exports=function(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}},154:function(i){i.exports=1e-6},4932:function(i,o,s){i.exports=function(i,o){var s=i[0],_=i[1],F=i[2],N=o[0],j=o[1],G=o[2];return Math.abs(s-N)<=x*Math.max(1,Math.abs(s),Math.abs(N))&&Math.abs(_-j)<=x*Math.max(1,Math.abs(_),Math.abs(j))&&Math.abs(F-G)<=x*Math.max(1,Math.abs(F),Math.abs(G))};var x=s(154)},5777:function(i){i.exports=function(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]}},3306:function(i){i.exports=function(i,o){return i[0]=Math.floor(o[0]),i[1]=Math.floor(o[1]),i[2]=Math.floor(o[2]),i}},7447:function(i,o,s){i.exports=function(i,o,s,_,F,N){var j,G;for(o||(o=3),s||(s=0),G=_?Math.min(_*o+s,i.length):i.length,j=s;j<G;j+=o)x[0]=i[j],x[1]=i[j+1],x[2]=i[j+2],F(x,x,N),i[j]=x[0],i[j+1]=x[1],i[j+2]=x[2];return i};var x=s(8501)()},5415:function(i){i.exports=function(i,o,s){var x=new Float32Array(3);return x[0]=i,x[1]=o,x[2]=s,x}},2858:function(i,o,s){i.exports={EPSILON:s(154),create:s(8501),clone:s(7622),angle:s(5879),fromValues:s(5415),copy:s(8782),set:s(831),equals:s(4932),exactEquals:s(5777),add:s(2598),subtract:s(911),sub:s(8921),multiply:s(105),mul:s(5733),divide:s(7979),div:s(8629),min:s(3605),max:s(1716),floor:s(3306),ceil:s(8827),round:s(1624),scale:s(5685),scaleAndAdd:s(6722),distance:s(8288),dist:s(5981),squaredDistance:s(6403),sqrDist:s(5294),length:s(4693),len:s(1468),squaredLength:s(4337),sqrLen:s(3303),negate:s(435),inverse:s(2073),normalize:s(899),dot:s(9305),cross:s(903),lerp:s(1868),random:s(6660),transformMat4:s(3255),transformMat3:s(9908),transformQuat:s(6568),rotateX:s(392),rotateY:s(3222),rotateZ:s(3388),forEach:s(7447)}},2073:function(i){i.exports=function(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i}},1468:function(i,o,s){i.exports=s(4693)},4693:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2];return Math.sqrt(o*o+s*s+x*x)}},1868:function(i){i.exports=function(i,o,s,x){var _=o[0],F=o[1],N=o[2];return i[0]=_+x*(s[0]-_),i[1]=F+x*(s[1]-F),i[2]=N+x*(s[2]-N),i}},1716:function(i){i.exports=function(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i}},3605:function(i){i.exports=function(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i}},5733:function(i,o,s){i.exports=s(105)},105:function(i){i.exports=function(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i}},435:function(i){i.exports=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i}},899:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=s*s+x*x+_*_;return F>0&&(F=1/Math.sqrt(F),i[0]=o[0]*F,i[1]=o[1]*F,i[2]=o[2]*F),i}},6660:function(i){i.exports=function(i,o){var s=2*Math.random()*Math.PI,x=2*Math.random()-1,_=Math.sqrt(1-x*x)*(o=o||1);return i[0]=Math.cos(s)*_,i[1]=Math.sin(s)*_,i[2]=x*o,i}},392:function(i){i.exports=function(i,o,s,x){var _=s[1],F=s[2],N=o[1]-_,j=o[2]-F,G=Math.sin(x),Z=Math.cos(x);return i[0]=o[0],i[1]=_+N*Z-j*G,i[2]=F+N*G+j*Z,i}},3222:function(i){i.exports=function(i,o,s,x){var _=s[0],F=s[2],N=o[0]-_,j=o[2]-F,G=Math.sin(x),Z=Math.cos(x);return i[0]=_+j*G+N*Z,i[1]=o[1],i[2]=F+j*Z-N*G,i}},3388:function(i){i.exports=function(i,o,s,x){var _=s[0],F=s[1],N=o[0]-_,j=o[1]-F,G=Math.sin(x),Z=Math.cos(x);return i[0]=_+N*Z-j*G,i[1]=F+N*G+j*Z,i[2]=o[2],i}},1624:function(i){i.exports=function(i,o){return i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i[2]=Math.round(o[2]),i}},5685:function(i){i.exports=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i}},6722:function(i){i.exports=function(i,o,s,x){return i[0]=o[0]+s[0]*x,i[1]=o[1]+s[1]*x,i[2]=o[2]+s[2]*x,i}},831:function(i){i.exports=function(i,o,s,x){return i[0]=o,i[1]=s,i[2]=x,i}},5294:function(i,o,s){i.exports=s(6403)},3303:function(i,o,s){i.exports=s(4337)},6403:function(i){i.exports=function(i,o){var s=o[0]-i[0],x=o[1]-i[1],_=o[2]-i[2];return s*s+x*x+_*_}},4337:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2];return o*o+s*s+x*x}},8921:function(i,o,s){i.exports=s(911)},911:function(i){i.exports=function(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i}},9908:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2];return i[0]=x*s[0]+_*s[3]+F*s[6],i[1]=x*s[1]+_*s[4]+F*s[7],i[2]=x*s[2]+_*s[5]+F*s[8],i}},3255:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=s[3]*x+s[7]*_+s[11]*F+s[15];return N=N||1,i[0]=(s[0]*x+s[4]*_+s[8]*F+s[12])/N,i[1]=(s[1]*x+s[5]*_+s[9]*F+s[13])/N,i[2]=(s[2]*x+s[6]*_+s[10]*F+s[14])/N,i}},6568:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=s[0],j=s[1],G=s[2],Z=s[3],X=Z*x+j*F-G*_,J=Z*_+G*x-N*F,$=Z*F+N*_-j*x,ee=-N*x-j*_-G*F;return i[0]=X*Z+-(ee*N)+-(J*G)- -($*j),i[1]=J*Z+-(ee*j)+-($*N)- -(X*G),i[2]=$*Z+-(ee*G)+-(X*j)- -(J*N),i}},3433:function(i){i.exports=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i}},1413:function(i){i.exports=function(i){var o=new Float32Array(4);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o}},3470:function(i){i.exports=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i}},5313:function(i){i.exports=function(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},5446:function(i){i.exports=function(i,o){var s=o[0]-i[0],x=o[1]-i[1],_=o[2]-i[2],F=o[3]-i[3];return Math.sqrt(s*s+x*x+_*_+F*F)}},205:function(i){i.exports=function(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i[3]=o[3]/s[3],i}},4242:function(i){i.exports=function(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]}},5680:function(i){i.exports=function(i,o,s,x){var _=new Float32Array(4);return _[0]=i,_[1]=o,_[2]=s,_[3]=x,_}},4020:function(i,o,s){i.exports={create:s(5313),clone:s(1413),fromValues:s(5680),copy:s(3470),set:s(6453),add:s(3433),subtract:s(2705),multiply:s(746),divide:s(205),min:s(2170),max:s(3030),scale:s(5510),scaleAndAdd:s(4224),distance:s(5446),squaredDistance:s(1542),length:s(8177),squaredLength:s(9037),negate:s(6459),inverse:s(8057),normalize:s(381),dot:s(4242),lerp:s(8746),random:s(3770),transformMat4:s(6342),transformQuat:s(5022)}},8057:function(i){i.exports=function(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i[3]=1/o[3],i}},8177:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2],_=i[3];return Math.sqrt(o*o+s*s+x*x+_*_)}},8746:function(i){i.exports=function(i,o,s,x){var _=o[0],F=o[1],N=o[2],j=o[3];return i[0]=_+x*(s[0]-_),i[1]=F+x*(s[1]-F),i[2]=N+x*(s[2]-N),i[3]=j+x*(s[3]-j),i}},3030:function(i){i.exports=function(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i[3]=Math.max(o[3],s[3]),i}},2170:function(i){i.exports=function(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i[3]=Math.min(o[3],s[3]),i}},746:function(i){i.exports=function(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i[3]=o[3]*s[3],i}},6459:function(i){i.exports=function(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i[3]=-o[3],i}},381:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=s*s+x*x+_*_+F*F;return N>0&&(N=1/Math.sqrt(N),i[0]=s*N,i[1]=x*N,i[2]=_*N,i[3]=F*N),i}},3770:function(i,o,s){var x=s(381),_=s(5510);i.exports=function(i,o){return o=o||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),x(i,i),_(i,i,o),i}},5510:function(i){i.exports=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i}},4224:function(i){i.exports=function(i,o,s,x){return i[0]=o[0]+s[0]*x,i[1]=o[1]+s[1]*x,i[2]=o[2]+s[2]*x,i[3]=o[3]+s[3]*x,i}},6453:function(i){i.exports=function(i,o,s,x,_){return i[0]=o,i[1]=s,i[2]=x,i[3]=_,i}},1542:function(i){i.exports=function(i,o){var s=o[0]-i[0],x=o[1]-i[1],_=o[2]-i[2],F=o[3]-i[3];return s*s+x*x+_*_+F*F}},9037:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2],_=i[3];return o*o+s*s+x*x+_*_}},2705:function(i){i.exports=function(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i}},6342:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3];return i[0]=s[0]*x+s[4]*_+s[8]*F+s[12]*N,i[1]=s[1]*x+s[5]*_+s[9]*F+s[13]*N,i[2]=s[2]*x+s[6]*_+s[10]*F+s[14]*N,i[3]=s[3]*x+s[7]*_+s[11]*F+s[15]*N,i}},5022:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=s[0],j=s[1],G=s[2],Z=s[3],X=Z*x+j*F-G*_,J=Z*_+G*x-N*F,$=Z*F+N*_-j*x,ee=-N*x-j*_-G*F;return i[0]=X*Z+-(ee*N)+-(J*G)- -($*j),i[1]=J*Z+-(ee*j)+-($*N)- -(X*G),i[2]=$*Z+-(ee*G)+-(X*j)- -(J*N),i[3]=o[3],i}},9365:function(i,o,s){var x=s(8096),_=s(7896);i.exports=function(i){for(var o=Array.isArray(i)?i:x(i),s=0;s<o.length;s++){var F=o[s];if("preprocessor"===F.type){var N=F.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(N&&N[2]){var j=N[1],G=N[2];return(j?_(G):G).trim()}}}}},3193:function(i,o,s){i.exports=function(i){var o,s,Z,X=0,J=0,$=999,ee=[],et=[],er=1,en=0,ei=0,eo=!1,es=!1,el="",ec=F,eu=x;"300 es"===(i=i||{}).version&&(ec=j,eu=N);for(var ef={},eh={},X=0;X<ec.length;X++)ef[ec[X]]=!0;for(var X=0;X<eu.length;X++)eh[eu[X]]=!0;return function(i){return(et=[],null!==i)?function(i){var x;for(X=0,i.toString&&(i=i.toString()),el+=i.replace(/\r\n/g,"\n"),Z=el.length;o=el[X],X<Z;){switch(x=X,$){case 0:"/"===o&&"*"===s?(ee.push(o),token(ee.join("")),$=999):(ee.push(o),s=o),X+=1;break;case 1:case 2:X=function(){return("\r"===o||"\n"===o)&&"\\"!==s?(token(ee.join("")),$=999,X):(ee.push(o),s=o,X+1)}();break;case 3:X=function(){if("."===s&&/\d/.test(o))return $=5,X;if("/"===s&&"*"===o)return $=0,X;if("/"===s&&"/"===o)return $=1,X;if("."===o&&ee.length){for(;determine_operator(ee););return $=5,X}if(";"===o||")"===o||"("===o){if(ee.length)for(;determine_operator(ee););return token(o),$=999,X+1}var i=2===ee.length&&"="!==o;if(/[\w_\d\s]/.test(o)||i){for(;determine_operator(ee););return $=999,X}return ee.push(o),s=o,X+1}();break;case 4:X="."===o||/[eE]/.test(o)?(ee.push(o),$=5,s=o,X+1):"x"===o&&1===ee.length&&"0"===ee[0]?($=11,ee.push(o),s=o,X+1):/[^\d]/.test(o)?(token(ee.join("")),$=999,X):(ee.push(o),s=o,X+1);break;case 11:X=/[^a-fA-F0-9]/.test(o)?(token(ee.join("")),$=999,X):(ee.push(o),s=o,X+1);break;case 5:"f"===o&&(ee.push(o),s=o,X+=1),X=/[eE]/.test(o)||("-"===o||"+"===o)&&/[eE]/.test(s)?(ee.push(o),s=o,X+1):/[^\d]/.test(o)?(token(ee.join("")),$=999,X):(ee.push(o),s=o,X+1);break;case 9999:X=function(){if(/[^\d\w_]/.test(o)){var i=ee.join("");return $=eh[i]?8:ef[i]?7:6,token(ee.join("")),$=999,X}return ee.push(o),s=o,X+1}();break;case 9:X=/[^\s]/g.test(o)?(token(ee.join("")),$=999,X):(ee.push(o),s=o,X+1);break;case 999:ee=ee.length?[]:ee,X="/"===s&&"*"===o?(ei=J+X-1,$=0,s=o,X+1):"/"===s&&"/"===o?(ei=J+X-1,$=1,s=o,X+1):("#"===o?($=2,ei=J+X):/\s/.test(o)?($=9,ei=J+X):(eo=/\d/.test(o),es=/[^\w_]/.test(o),ei=J+X,$=eo?4:es?3:9999),X)}x!==X&&("\n"===el[x]?(en=0,++er):++en)}return J+=X,el=el.slice(X),et}(i):(ee.length&&token(ee.join("")),$=10,token("(eof)"),et)};function token(i){i.length&&et.push({type:G[$],data:i,position:ei,line:er,column:en})}function determine_operator(i){for(var o,s,x=0;;){if(o=_.indexOf(i.slice(0,i.length+x).join("")),s=_[o],-1===o){if(x--+i.length>0)continue;s=i.slice(0,1).join("")}return token(s),ei+=s.length,(ee=ee.slice(s.length)).length}}};var x=s(399),_=s(9746),F=s(9525),N=s(9458),j=s(3585),G=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(i,o,s){var x=s(9525);x=x.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),i.exports=x.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(i){i.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(i,o,s){var x=s(399);i.exports=x.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(i){i.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(i){i.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(i,o,s){var x=s(3193);i.exports=function(i,o){var s=x(o),_=[];return(_=_.concat(s(i))).concat(s(null))}},6832:function(i){i.exports=function(i){"string"==typeof i&&(i=[i]);for(var o=[].slice.call(arguments,1),s=[],x=0;x<i.length-1;x++)s.push(i[x],o[x]||"");return s.push(i[x]),s.join("")}},5233:function(i,o,s){"use strict";var x=s(4846);i.exports=x&&function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(o){i=!1}return i}()},2183:function(i,o,s){"use strict";i.exports=function(i,o){var s=i.length;if(0===s)throw Error("Must have at least d+1 points");var _=i[0].length;if(s<=_)throw Error("Must input at least d+1 points");var F=i.slice(0,_+1),N=x.apply(void 0,F);if(0===N)throw Error("Input not in general position");for(var j=Array(_+1),G=0;G<=_;++G)j[G]=G;N<0&&(j[0]=1,j[1]=0);for(var Z=new Simplex(j,Array(_+1),!1),X=Z.adjacent,J=Array(_+2),G=0;G<=_;++G){for(var $=j.slice(),ee=0;ee<=_;++ee)ee===G&&($[ee]=-1);var et=$[0];$[0]=$[1],$[1]=et;var er=new Simplex($,Array(_+1),!0);X[G]=er,J[G]=er}J[_+1]=Z;for(var G=0;G<=_;++G)for(var $=X[G].vertices,en=X[G].adjacent,ee=0;ee<=_;++ee){var ei=$[ee];if(ei<0){en[ee]=Z;continue}for(var eo=0;eo<=_;++eo)0>X[eo].vertices.indexOf(ei)&&(en[ee]=X[eo])}for(var es=new Triangulation(_,F,J),el=!!o,G=_+1;G<s;++G)es.insert(i[G],el);return es.boundary()};var x=s(417),_=s(8211).H;function Simplex(i,o,s){this.vertices=i,this.adjacent=o,this.boundary=s,this.lastVisited=-1}function GlueFacet(i,o,s){this.vertices=i,this.cell=o,this.index=s}function compareGlue(i,o){return _(i.vertices,o.vertices)}Simplex.prototype.flip=function(){var i=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=i;var o=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=o};var F=[];function Triangulation(i,o,s){this.dimension=i,this.vertices=o,this.simplices=s,this.interior=s.filter(function(i){return!i.boundary}),this.tuple=Array(i+1);for(var _,N,j=0;j<=i;++j)this.tuple[j]=this.vertices[j];var G=F[i];G||(G=F[i]=((_=x[i+1])||(_=x),N=_,function(){var i=this.tuple;return N.apply(this,i)})),this.orient=G}var N=Triangulation.prototype;N.handleBoundaryDegeneracy=function(i,o){var s=this.dimension,x=this.vertices.length-1,_=this.tuple,F=this.vertices,N=[i];for(i.lastVisited=-x;N.length>0;)for(var j=(i=N.pop()).adjacent,G=0;G<=s;++G){var Z=j[G];if(Z.boundary&&!(Z.lastVisited<=-x)){for(var X=Z.vertices,J=0;J<=s;++J){var $=X[J];$<0?_[J]=o:_[J]=F[$]}var ee=this.orient();if(ee>0)return Z;Z.lastVisited=-x,0===ee&&N.push(Z)}}return null},N.walk=function(i,o){var s=this.vertices.length-1,x=this.dimension,_=this.vertices,F=this.tuple,N=o?this.interior.length*Math.random()|0:this.interior.length-1,j=this.interior[N];d:for(;!j.boundary;){for(var G=j.vertices,Z=j.adjacent,X=0;X<=x;++X)F[X]=_[G[X]];j.lastVisited=s;for(var X=0;X<=x;++X){var J=Z[X];if(!(J.lastVisited>=s)){var $=F[X];F[X]=i;var ee=this.orient();if(F[X]=$,ee<0){j=J;continue d}J.boundary?J.lastVisited=-s:J.lastVisited=s}}return}return j},N.addPeaks=function(i,o){var s=this.vertices.length-1,x=this.dimension,_=this.vertices,F=this.tuple,N=this.interior,j=this.simplices,G=[o];o.lastVisited=s,o.vertices[o.vertices.indexOf(-1)]=s,o.boundary=!1,N.push(o);for(var Z=[];G.length>0;){var o=G.pop(),X=o.vertices,J=o.adjacent,$=X.indexOf(s);if(!($<0))for(var ee=0;ee<=x;++ee){if(ee!==$){var et=J[ee];if(et.boundary&&!(et.lastVisited>=s)){var er=et.vertices;if(et.lastVisited!==-s){for(var en=0,ei=0;ei<=x;++ei)er[ei]<0?(en=ei,F[ei]=i):F[ei]=_[er[ei]];if(this.orient()>0){er[en]=s,et.boundary=!1,N.push(et),G.push(et),et.lastVisited=s;continue}et.lastVisited=-s}var eo=et.adjacent,es=X.slice(),el=J.slice(),ec=new Simplex(es,el,!0);j.push(ec);var eu=eo.indexOf(o);if(!(eu<0)){eo[eu]=ec,el[$]=et,es[ee]=-1,el[ee]=o,J[ee]=ec,ec.flip();for(var ei=0;ei<=x;++ei){var ef=es[ei];if(!(ef<0)&&ef!==s){for(var eh=Array(x-1),ed=0,ep=0;ep<=x;++ep){var eg=es[ep];eg<0||ep===ei||(eh[ed++]=eg)}Z.push(new GlueFacet(eh,ec,ei))}}}}}}}Z.sort(compareGlue);for(var ee=0;ee+1<Z.length;ee+=2){var em=Z[ee],ey=Z[ee+1],ev=em.index,ex=ey.index;ev<0||ex<0||(em.cell.adjacent[em.index]=ey.cell,ey.cell.adjacent[ey.index]=em.cell)}},N.insert=function(i,o){var s=this.vertices;s.push(i);var x=this.walk(i,o);if(x){for(var _=this.dimension,F=this.tuple,N=0;N<=_;++N){var j=x.vertices[N];j<0?F[N]=i:F[N]=s[j]}var G=this.orient(F);!(G<0)&&(0!==G||(x=this.handleBoundaryDegeneracy(x,i)))&&this.addPeaks(i,x)}},N.boundary=function(){for(var i=this.dimension,o=[],s=this.simplices,x=s.length,_=0;_<x;++_){var F=s[_];if(F.boundary){for(var N=Array(i),j=F.vertices,G=0,Z=0,X=0;X<=i;++X)j[X]>=0?N[G++]=j[X]:Z=1&X;if(Z===(1&i)){var J=N[0];N[0]=N[1],N[1]=J}o.push(N)}}return o}},9014:function(i,o,s){"use strict";var x=s(5070);function IntervalTreeNode(i,o,s,x,_){this.mid=i,this.left=o,this.right=s,this.leftPoints=x,this.rightPoints=_,this.count=(o?o.count:0)+(s?s.count:0)+x.length}i.exports=function(i){return new IntervalTree(i&&0!==i.length?createIntervalTree(i):null)};var _=IntervalTreeNode.prototype;function copy(i,o){i.mid=o.mid,i.left=o.left,i.right=o.right,i.leftPoints=o.leftPoints,i.rightPoints=o.rightPoints,i.count=o.count}function rebuild(i,o){var s=createIntervalTree(o);i.mid=s.mid,i.left=s.left,i.right=s.right,i.leftPoints=s.leftPoints,i.rightPoints=s.rightPoints,i.count=s.count}function rebuildWithInterval(i,o){var s=i.intervals([]);s.push(o),rebuild(i,s)}function rebuildWithoutInterval(i,o){var s=i.intervals([]),x=s.indexOf(o);return x<0?0:(s.splice(x,1),rebuild(i,s),1)}function reportLeftRange(i,o,s){for(var x=0;x<i.length&&i[x][0]<=o;++x){var _=s(i[x]);if(_)return _}}function reportRightRange(i,o,s){for(var x=i.length-1;x>=0&&i[x][1]>=o;--x){var _=s(i[x]);if(_)return _}}function reportRange(i,o){for(var s=0;s<i.length;++s){var x=o(i[s]);if(x)return x}}function compareNumbers(i,o){return i-o}function compareBegin(i,o){return i[0]-o[0]||i[1]-o[1]}function compareEnd(i,o){return i[1]-o[1]||i[0]-o[0]}function createIntervalTree(i){if(0===i.length)return null;for(var o=[],s=0;s<i.length;++s)o.push(i[s][0],i[s][1]);o.sort(compareNumbers);for(var x=o[o.length>>1],_=[],F=[],N=[],s=0;s<i.length;++s){var j=i[s];j[1]<x?_.push(j):x<j[0]?F.push(j):N.push(j)}var G=N.slice();return N.sort(compareBegin),G.sort(compareEnd),new IntervalTreeNode(x,createIntervalTree(_),createIntervalTree(F),N,G)}function IntervalTree(i){this.root=i}_.intervals=function(i){return i.push.apply(i,this.leftPoints),this.left&&this.left.intervals(i),this.right&&this.right.intervals(i),i},_.insert=function(i){var o=this.count-this.leftPoints.length;if(this.count+=1,i[1]<this.mid)this.left?4*(this.left.count+1)>3*(o+1)?rebuildWithInterval(this,i):this.left.insert(i):this.left=createIntervalTree([i]);else if(i[0]>this.mid)this.right?4*(this.right.count+1)>3*(o+1)?rebuildWithInterval(this,i):this.right.insert(i):this.right=createIntervalTree([i]);else{var s=x.ge(this.leftPoints,i,compareBegin),_=x.ge(this.rightPoints,i,compareEnd);this.leftPoints.splice(s,0,i),this.rightPoints.splice(_,0,i)}},_.remove=function(i){var o=this.count-this.leftPoints;if(i[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(o-1))return rebuildWithoutInterval(this,i);var s=this.left.remove(i);return 2===s?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s)}if(i[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(o-1))return rebuildWithoutInterval(this,i);var s=this.right.remove(i);return 2===s?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s)}if(1===this.count)return this.leftPoints[0]===i?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===i){if(this.left&&this.right){for(var _=this,F=this.left;F.right;)_=F,F=F.right;if(_===this)F.right=this.right;else{var N=this.left,s=this.right;_.count-=F.count,_.right=F.left,F.left=N,F.right=s}copy(this,F),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?copy(this,this.left):copy(this,this.right);return 1}for(var N=x.ge(this.leftPoints,i,compareBegin);N<this.leftPoints.length&&this.leftPoints[N][0]===i[0];++N)if(this.leftPoints[N]===i){this.count-=1,this.leftPoints.splice(N,1);for(var s=x.ge(this.rightPoints,i,compareEnd);s<this.rightPoints.length&&this.rightPoints[s][1]===i[1];++s)if(this.rightPoints[s]===i)return this.rightPoints.splice(s,1),1}return 0},_.queryPoint=function(i,o){if(i<this.mid){if(this.left){var s=this.left.queryPoint(i,o);if(s)return s}return reportLeftRange(this.leftPoints,i,o)}if(!(i>this.mid))return reportRange(this.leftPoints,o);if(this.right){var s=this.right.queryPoint(i,o);if(s)return s}return reportRightRange(this.rightPoints,i,o)},_.queryInterval=function(i,o,s){if(i<this.mid&&this.left){var x=this.left.queryInterval(i,o,s);if(x)return x}if(o>this.mid&&this.right){var x=this.right.queryInterval(i,o,s);if(x)return x}return o<this.mid?reportLeftRange(this.leftPoints,o,s):i>this.mid?reportRightRange(this.rightPoints,i,s):reportRange(this.leftPoints,s)};var F=IntervalTree.prototype;F.insert=function(i){this.root?this.root.insert(i):this.root=new IntervalTreeNode(i[0],null,null,[i],[i])},F.remove=function(i){if(this.root){var o=this.root.remove(i);return 2===o&&(this.root=null),0!==o}return!1},F.queryPoint=function(i,o){if(this.root)return this.root.queryPoint(i,o)},F.queryInterval=function(i,o,s){if(i<=o&&this.root)return this.root.queryInterval(i,o,s)},Object.defineProperty(F,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(F,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(i){"use strict";i.exports=function(i){for(var o=Array(i),s=0;s<i;++s)o[s]=s;return o}},4846:function(i){i.exports=!0},4780:function(i){function isBuffer(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}i.exports=function(i){return null!=i&&(isBuffer(i)||"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&isBuffer(i.slice(0,0))||!!i._isBuffer)}},3596:function(i){"use strict";i.exports=function(i){for(var o,s=i.length,x=0;x<s;x++)if(((o=i.charCodeAt(x))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},3578:function(i){i.exports=function(i,o,s){return i*(1-s)+o*s}},7191:function(i,o,s){var x=s(4690),_=s(9823),F=s(7332),N=s(7787),j=s(7437),G=s(2142),Z={length:s(4693),normalize:s(899),dot:s(9305),cross:s(903)},X=_(),J=_(),$=[0,0,0,0],ee=[[0,0,0],[0,0,0],[0,0,0]],et=[0,0,0];function combine(i,o,s,x,_){i[0]=o[0]*x+s[0]*_,i[1]=o[1]*x+s[1]*_,i[2]=o[2]*x+s[2]*_}i.exports=function(i,o,s,_,er,en){if(o||(o=[0,0,0]),s||(s=[0,0,0]),_||(_=[0,0,0]),er||(er=[0,0,0,1]),en||(en=[0,0,0,1]),!x(X,i)||(F(J,X),J[3]=0,J[7]=0,J[11]=0,J[15]=1,Math.abs(1e-8>N(J))))return!1;var ei,eo,es,el,ec,eu=X[3],ef=X[7],eh=X[11],ed=X[12],ep=X[13],eg=X[14],em=X[15];if(0!==eu||0!==ef||0!==eh){if($[0]=eu,$[1]=ef,$[2]=eh,$[3]=em,!j(J,J))return!1;G(J,J),ei=er,eo=$[0],es=$[1],el=$[2],ec=$[3],ei[0]=J[0]*eo+J[4]*es+J[8]*el+J[12]*ec,ei[1]=J[1]*eo+J[5]*es+J[9]*el+J[13]*ec,ei[2]=J[2]*eo+J[6]*es+J[10]*el+J[14]*ec,ei[3]=J[3]*eo+J[7]*es+J[11]*el+J[15]*ec}else er[0]=er[1]=er[2]=0,er[3]=1;if(o[0]=ed,o[1]=ep,o[2]=eg,ee[0][0]=X[0],ee[0][1]=X[1],ee[0][2]=X[2],ee[1][0]=X[4],ee[1][1]=X[5],ee[1][2]=X[6],ee[2][0]=X[8],ee[2][1]=X[9],ee[2][2]=X[10],s[0]=Z.length(ee[0]),Z.normalize(ee[0],ee[0]),_[0]=Z.dot(ee[0],ee[1]),combine(ee[1],ee[1],ee[0],1,-_[0]),s[1]=Z.length(ee[1]),Z.normalize(ee[1],ee[1]),_[0]/=s[1],_[1]=Z.dot(ee[0],ee[2]),combine(ee[2],ee[2],ee[0],1,-_[1]),_[2]=Z.dot(ee[1],ee[2]),combine(ee[2],ee[2],ee[1],1,-_[2]),s[2]=Z.length(ee[2]),Z.normalize(ee[2],ee[2]),_[1]/=s[2],_[2]/=s[2],Z.cross(et,ee[1],ee[2]),0>Z.dot(ee[0],et))for(var ey=0;ey<3;ey++)s[ey]*=-1,ee[ey][0]*=-1,ee[ey][1]*=-1,ee[ey][2]*=-1;return en[0]=.5*Math.sqrt(Math.max(1+ee[0][0]-ee[1][1]-ee[2][2],0)),en[1]=.5*Math.sqrt(Math.max(1-ee[0][0]+ee[1][1]-ee[2][2],0)),en[2]=.5*Math.sqrt(Math.max(1-ee[0][0]-ee[1][1]+ee[2][2],0)),en[3]=.5*Math.sqrt(Math.max(1+ee[0][0]+ee[1][1]+ee[2][2],0)),ee[2][1]>ee[1][2]&&(en[0]=-en[0]),ee[0][2]>ee[2][0]&&(en[1]=-en[1]),ee[1][0]>ee[0][1]&&(en[2]=-en[2]),!0}},4690:function(i){i.exports=function(i,o){var s=o[15];if(0===s)return!1;for(var x=1/s,_=0;_<16;_++)i[_]=o[_]*x;return!0}},7649:function(i,o,s){var x=s(1868),_=s(1102),F=s(7191),N=s(7787),j=s(1116),G=state(),Z=state(),X=state();function state(){return{translate:vec3(),scale:vec3(1),skew:vec3(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function vec3(i){return[i||0,i||0,i||0]}i.exports=function(i,o,s,J){if(0===N(o)||0===N(s))return!1;var $=F(o,G.translate,G.scale,G.skew,G.perspective,G.quaternion),ee=F(s,Z.translate,Z.scale,Z.skew,Z.perspective,Z.quaternion);return!!$&&!!ee&&(x(X.translate,G.translate,Z.translate,J),x(X.skew,G.skew,Z.skew,J),x(X.scale,G.scale,Z.scale,J),x(X.perspective,G.perspective,Z.perspective,J),j(X.quaternion,G.quaternion,Z.quaternion,J),_(i,X.translate,X.scale,X.skew,X.perspective,X.quaternion),!0)}},1102:function(i,o,s){var x={identity:s(9947),translate:s(998),multiply:s(104),create:s(9823),scale:s(3668),fromRotationTranslation:s(7280)};x.create();var _=x.create();i.exports=function(i,o,s,F,N,j){return x.identity(i),x.fromRotationTranslation(i,j,o),i[3]=N[0],i[7]=N[1],i[11]=N[2],i[15]=N[3],x.identity(_),0!==F[2]&&(_[9]=F[2],x.multiply(i,i,_)),0!==F[1]&&(_[9]=0,_[8]=F[1],x.multiply(i,i,_)),0!==F[0]&&(_[8]=0,_[4]=F[0],x.multiply(i,i,_)),x.scale(i,i,s),i}},9298:function(i,o,s){"use strict";var x=s(5070),_=s(7649),F=s(7437),N=s(6109),j=s(7115),G=s(5240),Z=s(3012),X=s(998);s(3668);var J=s(899),$=[0,0,0];function MatrixCameraController(i){this._components=i.slice(),this._time=[0],this.prevMatrix=i.slice(),this.nextMatrix=i.slice(),this.computedMatrix=i.slice(),this.computedInverse=i.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}i.exports=function(i){var o=(i=i||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new MatrixCameraController(o)};var ee=MatrixCameraController.prototype;ee.recalcMatrix=function(i){var o=this._time,s=x.le(o,i),N=this.computedMatrix;if(!(s<0)){var j=this._components;if(s===o.length-1)for(var G=16*s,Z=0;Z<16;++Z)N[Z]=j[G++];else{for(var X=o[s+1]-o[s],G=16*s,$=this.prevMatrix,ee=!0,Z=0;Z<16;++Z)$[Z]=j[G++];for(var et=this.nextMatrix,Z=0;Z<16;++Z)et[Z]=j[G++],ee=ee&&$[Z]===et[Z];if(X<1e-6||ee)for(var Z=0;Z<16;++Z)N[Z]=$[Z];else _(N,$,et,(i-o[s])/X)}var er=this.computedUp;er[0]=N[1],er[1]=N[5],er[2]=N[9],J(er,er);var en=this.computedInverse;F(en,N);var ei=this.computedEye,eo=en[15];ei[0]=en[12]/eo,ei[1]=en[13]/eo,ei[2]=en[14]/eo;for(var es=this.computedCenter,el=Math.exp(this.computedRadius[0]),Z=0;Z<3;++Z)es[Z]=ei[Z]-N[2+4*Z]*el}},ee.idle=function(i){if(!(i<this.lastT())){for(var o=this._components,s=o.length-16,x=0;x<16;++x)o.push(o[s++]);this._time.push(i)}},ee.flush=function(i){var o=x.gt(this._time,i)-2;o<0||(this._time.splice(0,o),this._components.splice(0,16*o))},ee.lastT=function(){return this._time[this._time.length-1]},ee.lookAt=function(i,o,s,x){this.recalcMatrix(i),o=o||this.computedEye,s=s||$,x=x||this.computedUp,this.setMatrix(i,Z(this.computedMatrix,o,s,x));for(var _=0,F=0;F<3;++F)_+=Math.pow(s[F]-o[F],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},ee.rotate=function(i,o,s,x){this.recalcMatrix(i);var _=this.computedInverse;o&&j(_,_,o),s&&N(_,_,s),x&&G(_,_,x),this.setMatrix(i,F(this.computedMatrix,_))};var et=[0,0,0];ee.pan=function(i,o,s,x){et[0]=-(o||0),et[1]=-(s||0),et[2]=-(x||0),this.recalcMatrix(i);var _=this.computedInverse;X(_,_,et),this.setMatrix(i,F(_,_))},ee.translate=function(i,o,s,x){et[0]=o||0,et[1]=s||0,et[2]=x||0,this.recalcMatrix(i);var _=this.computedMatrix;X(_,_,et),this.setMatrix(i,_)},ee.setMatrix=function(i,o){if(!(i<this.lastT())){this._time.push(i);for(var s=0;s<16;++s)this._components.push(o[s])}},ee.setDistance=function(i,o){this.computedRadius[0]=o},ee.setDistanceLimits=function(i,o){var s=this._limits;s[0]=i,s[1]=o},ee.getDistanceLimits=function(i){var o=this._limits;return i?(i[0]=o[0],i[1]=o[1],i):o}},3266:function(i,o,s){"use strict";i.exports=function(i){var o=i.length;if(o<3){for(var s=Array(o),_=0;_<o;++_)s[_]=_;return 2===o&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:s}for(var F=Array(o),_=0;_<o;++_)F[_]=_;F.sort(function(o,s){return i[o][0]-i[s][0]||i[o][1]-i[s][1]});for(var N=[F[0],F[1]],j=[F[0],F[1]],_=2;_<o;++_){for(var G=F[_],Z=i[G],X=N.length;X>1&&0>=x(i[N[X-2]],i[N[X-1]],Z);)X-=1,N.pop();for(N.push(G),X=j.length;X>1&&x(i[j[X-2]],i[j[X-1]],Z)>=0;)X-=1,j.pop();j.push(G)}for(var s=Array(j.length+N.length-2),J=0,_=0,$=N.length;_<$;++_)s[J++]=N[_];for(var ee=j.length-2;ee>0;--ee)s[J++]=j[ee];return s};var x=s(417)[3]},6145:function(i,o,s){"use strict";i.exports=function(i,o){o||(o=i,i=window);var s=0,_=0,F=0,N={shift:!1,alt:!1,control:!1,meta:!1},j=!1;function updateMods(i){var o=!1;return"altKey"in i&&(o=o||i.altKey!==N.alt,N.alt=!!i.altKey),"shiftKey"in i&&(o=o||i.shiftKey!==N.shift,N.shift=!!i.shiftKey),"ctrlKey"in i&&(o=o||i.ctrlKey!==N.control,N.control=!!i.ctrlKey),"metaKey"in i&&(o=o||i.metaKey!==N.meta,N.meta=!!i.metaKey),o}function handleEvent(i,j){var G=x.x(j),Z=x.y(j);"buttons"in j&&(i=0|j.buttons),(i!==s||G!==_||Z!==F||updateMods(j))&&(s=0|i,_=G||0,F=Z||0,o&&o(s,_,F,N))}function clearState(i){handleEvent(0,i)}function handleBlur(){(s||_||F||N.shift||N.alt||N.meta||N.control)&&(_=F=0,s=0,N.shift=N.alt=N.control=N.meta=!1,o&&o(0,0,0,N))}function handleMods(i){updateMods(i)&&o&&o(s,_,F,N)}function handleMouseMove(i){0===x.buttons(i)?handleEvent(0,i):handleEvent(s,i)}function handleMouseDown(i){handleEvent(s|x.buttons(i),i)}function handleMouseUp(i){handleEvent(s&~x.buttons(i),i)}function attachListeners(){j||(j=!0,i.addEventListener("mousemove",handleMouseMove),i.addEventListener("mousedown",handleMouseDown),i.addEventListener("mouseup",handleMouseUp),i.addEventListener("mouseleave",clearState),i.addEventListener("mouseenter",clearState),i.addEventListener("mouseout",clearState),i.addEventListener("mouseover",clearState),i.addEventListener("blur",handleBlur),i.addEventListener("keyup",handleMods),i.addEventListener("keydown",handleMods),i.addEventListener("keypress",handleMods),i!==window&&(window.addEventListener("blur",handleBlur),window.addEventListener("keyup",handleMods),window.addEventListener("keydown",handleMods),window.addEventListener("keypress",handleMods)))}attachListeners();var G={element:i};return Object.defineProperties(G,{enabled:{get:function(){return j},set:function(o){o?attachListeners():j&&(j=!1,i.removeEventListener("mousemove",handleMouseMove),i.removeEventListener("mousedown",handleMouseDown),i.removeEventListener("mouseup",handleMouseUp),i.removeEventListener("mouseleave",clearState),i.removeEventListener("mouseenter",clearState),i.removeEventListener("mouseout",clearState),i.removeEventListener("mouseover",clearState),i.removeEventListener("blur",handleBlur),i.removeEventListener("keyup",handleMods),i.removeEventListener("keydown",handleMods),i.removeEventListener("keypress",handleMods),i!==window&&(window.removeEventListener("blur",handleBlur),window.removeEventListener("keyup",handleMods),window.removeEventListener("keydown",handleMods),window.removeEventListener("keypress",handleMods)))},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return _},enumerable:!0},y:{get:function(){return F},enumerable:!0},mods:{get:function(){return N},enumerable:!0}}),G};var x=s(4110)},2565:function(i){var o={left:0,top:0};i.exports=function(i,s,x){s=s||i.currentTarget||i.srcElement,Array.isArray(x)||(x=[0,0]);var _,F=i.clientX||0,N=i.clientY||0,j=(_=s)===window||_===document||_===document.body?o:_.getBoundingClientRect();return x[0]=F-j.left,x[1]=N-j.top,x}},4110:function(i,o){"use strict";function mouseElement(i){return i.target||i.srcElement||window}o.buttons=function(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){var o=i.which;if(2===o)return 4;if(3===o)return 2;if(o>0)return 1<<o-1}else if("button"in i){var o=i.button;if(1===o)return 4;if(2===o)return 2;if(o>=0)return 1<<o}}return 0},o.element=mouseElement,o.x=function(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var o=mouseElement(i).getBoundingClientRect();return i.clientX-o.left}return 0},o.y=function(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var o=mouseElement(i).getBoundingClientRect();return i.clientY-o.top}return 0}},6475:function(i,o,s){"use strict";var x=s(14);i.exports=function(i,o,s){"function"==typeof i&&(s=!!o,o=i,i=window);var _=x("ex",i),listener=function(i){s&&i.preventDefault();var x=i.deltaX||0,F=i.deltaY||0,N=i.deltaZ||0,j=i.deltaMode,G=1;switch(j){case 1:G=_;break;case 2:G=window.innerHeight}if(x*=G,F*=G,N*=G,x||F||N)return o(x,F,N,i)};return i.addEventListener("wheel",listener),listener}},9284:function(i,o,s){"use strict";var x=s(5306);i.exports=function(i){function error(i){throw Error("ndarray-extract-contour: "+i)}"object"!=typeof i&&error("Must specify arguments");var o,s,F,N=i.order;Array.isArray(N)||error("Must specify order");var j=i.arrayArguments||1;j<1&&error("Must have at least one array argument"),0>(i.scalarArguments||0)&&error("Scalar arg count must be > 0"),"function"!=typeof i.vertex&&error("Must specify vertex creation function"),"function"!=typeof i.cell&&error("Must specify cell creation function"),"function"!=typeof i.phase&&error("Must specify phase function");for(var G=i.getters||[],Z=Array(j),X=0;X<j;++X)G.indexOf(X)>=0?Z[X]=!0:Z[X]=!1;return o=i.vertex,s=i.cell,F=i.phase,(0,_[[Z,N].join(",")])(o,s,F,x.mallocUint32,x.freeUint32)};var _={"false,0,1":function(i,o,s,x,_){return function(F,N,j,G){var Z,X=0|F.shape[0],J=0|F.shape[1],$=F.data,ee=0|F.offset,et=0|F.stride[0],er=0|F.stride[1],en=ee,ei=0|-et,eo=0,es=0|-er,el=0,ec=-et-er|0,eu=0,ef=0|et,eh=er-et*X|0,ed=0,ep=0,eg=0,em=2*X|0,ey=x(em),ev=x(em),ex=0,e_=0,ew=-1,eT=-1,ek=0,eA=0|-X,eS=0|X,eM=0,eC=-X-1|0,eE=X-1|0,eL=0,eP=0,eI=0;for(ed=0;ed<X;++ed)ey[ex++]=s($[en],N,j,G),en+=ef;if(en+=eh,J>0){if(ep=1,ey[ex++]=s($[en],N,j,G),en+=ef,X>0)for(ed=1,Z=$[en],e_=ey[ex]=s(Z,N,j,G),ek=ey[ex+ew],eM=ey[ex+eA],eL=ey[ex+eC],(e_!==ek||e_!==eM||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,ek,eM,eL,N,j,G),eP=ev[ex]=eg++),ex+=1,en+=ef,ed=2;ed<X;++ed)Z=$[en],e_=ey[ex]=s(Z,N,j,G),ek=ey[ex+ew],eM=ey[ex+eA],eL=ey[ex+eC],(e_!==ek||e_!==eM||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,ek,eM,eL,N,j,G),eP=ev[ex]=eg++,eL!==ek&&o(ev[ex+ew],eP,eu,eo,eL,ek,N,j,G)),ex+=1,en+=ef;for(en+=eh,ex=0,eI=ew,ew=eT,eT=eI,eI=eA,eA=eS,eS=eI,eI=eC,eC=eE,eE=eI,ep=2;ep<J;++ep){if(ey[ex++]=s($[en],N,j,G),en+=ef,X>0)for(ed=1,Z=$[en],e_=ey[ex]=s(Z,N,j,G),ek=ey[ex+ew],eM=ey[ex+eA],eL=ey[ex+eC],(e_!==ek||e_!==eM||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,ek,eM,eL,N,j,G),eP=ev[ex]=eg++,eL!==eM&&o(ev[ex+eA],eP,el,eu,eM,eL,N,j,G)),ex+=1,en+=ef,ed=2;ed<X;++ed)Z=$[en],e_=ey[ex]=s(Z,N,j,G),ek=ey[ex+ew],eM=ey[ex+eA],eL=ey[ex+eC],(e_!==ek||e_!==eM||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,ek,eM,eL,N,j,G),eP=ev[ex]=eg++,eL!==eM&&o(ev[ex+eA],eP,el,eu,eM,eL,N,j,G),eL!==ek&&o(ev[ex+ew],eP,eu,eo,eL,ek,N,j,G)),ex+=1,en+=ef;1&ep&&(ex=0),eI=ew,ew=eT,eT=eI,eI=eA,eA=eS,eS=eI,eI=eC,eC=eE,eE=eI,en+=eh}}_(ev),_(ey)}},"false,1,0":function(i,o,s,x,_){return function(F,N,j,G){var Z,X=0|F.shape[0],J=0|F.shape[1],$=F.data,ee=0|F.offset,et=0|F.stride[0],er=0|F.stride[1],en=ee,ei=0|-et,eo=0,es=0|-er,el=0,ec=-et-er|0,eu=0,ef=0|er,eh=et-er*J|0,ed=0,ep=0,eg=0,em=2*J|0,ey=x(em),ev=x(em),ex=0,e_=0,ew=-1,eT=-1,ek=0,eA=0|-J,eS=0|J,eM=0,eC=-J-1|0,eE=J-1|0,eL=0,eP=0,eI=0;for(ep=0;ep<J;++ep)ey[ex++]=s($[en],N,j,G),en+=ef;if(en+=eh,X>0){if(ed=1,ey[ex++]=s($[en],N,j,G),en+=ef,J>0)for(ep=1,Z=$[en],e_=ey[ex]=s(Z,N,j,G),eM=ey[ex+eA],ek=ey[ex+ew],eL=ey[ex+eC],(e_!==eM||e_!==ek||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,eM,ek,eL,N,j,G),eP=ev[ex]=eg++),ex+=1,en+=ef,ep=2;ep<J;++ep)Z=$[en],e_=ey[ex]=s(Z,N,j,G),eM=ey[ex+eA],ek=ey[ex+ew],eL=ey[ex+eC],(e_!==eM||e_!==ek||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,eM,ek,eL,N,j,G),eP=ev[ex]=eg++,eL!==ek&&o(ev[ex+ew],eP,el,eu,ek,eL,N,j,G)),ex+=1,en+=ef;for(en+=eh,ex=0,eI=eA,eA=eS,eS=eI,eI=ew,ew=eT,eT=eI,eI=eC,eC=eE,eE=eI,ed=2;ed<X;++ed){if(ey[ex++]=s($[en],N,j,G),en+=ef,J>0)for(ep=1,Z=$[en],e_=ey[ex]=s(Z,N,j,G),eM=ey[ex+eA],ek=ey[ex+ew],eL=ey[ex+eC],(e_!==eM||e_!==ek||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,eM,ek,eL,N,j,G),eP=ev[ex]=eg++,eL!==eM&&o(ev[ex+eA],eP,eu,eo,eL,eM,N,j,G)),ex+=1,en+=ef,ep=2;ep<J;++ep)Z=$[en],e_=ey[ex]=s(Z,N,j,G),eM=ey[ex+eA],ek=ey[ex+ew],eL=ey[ex+eC],(e_!==eM||e_!==ek||e_!==eL)&&(i(ed,ep,Z,eo=$[en+ei],el=$[en+es],eu=$[en+ec],e_,eM,ek,eL,N,j,G),eP=ev[ex]=eg++,eL!==ek&&o(ev[ex+ew],eP,el,eu,ek,eL,N,j,G),eL!==eM&&o(ev[ex+eA],eP,eu,eo,eL,eM,N,j,G)),ex+=1,en+=ef;1&ed&&(ex=0),eI=eA,eA=eS,eS=eI,eI=ew,ew=eT,eT=eI,eI=eC,eC=eE,eE=eI,en+=eh}}_(ev),_(ey)}}}},9144:function(i,o,s){"use strict";var x=s(3094),_={zero:function(i,o,s,x){var _=i[0],F=s[0];x|=0;var N=0;for(N=0;N<_;++N)o[x]=0,x+=F},fdTemplate1:function(i,o,s,x,_,F,N){var j=i[0],G=s[0],Z=F[0],X=-1*G;x|=0,N|=0;var J=0;for(J=0;J<j;++J)_[N]=.5*(o[x+X]-o[x+G]),x+=G,N+=Z},fdTemplate2:function(i,o,s,x,_,F,N,j,G,Z){var X=i[0],J=i[1],$=s[0],ee=s[1],et=F[0],er=F[1],en=G[0],ei=G[1],eo=-1*$,es=-1*ee;x|=0,N|=0,Z|=0;var el=0,ec=0,eu=$-J*ee,ef=et-J*er,eh=en-J*ei;for(ec=0;ec<X;++ec){for(el=0;el<J;++el)_[N]=.5*(o[x+eo]-o[x+$]),j[Z]=.5*(o[x+es]-o[x+ee]),x+=ee,N+=er,Z+=ei;x+=eu,N+=ef,Z+=eh}}},F={cdiff:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=_.dtype,X=_.order,J=[F,N.join(),j,G.join(),Z,X.join()].join(),$=o[J];return $||(o[J]=$=i([F,N,j,G,Z,X])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_.data,_.stride,0|_.offset)}},zero:function(i){var o={};return function(s){var x=s.dtype,_=s.order,F=[x,_.join()].join(),N=o[F];return N||(o[F]=N=i([x,_])),N(s.shape.slice(0),s.data,s.stride,0|s.offset)}},fdTemplate1:function(i){var o={};return function(s,x){var _=s.dtype,F=s.order,N=x.dtype,j=x.order,G=[_,F.join(),N,j.join()].join(),Z=o[G];return Z||(o[G]=Z=i([_,F,N,j])),Z(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset)}},fdTemplate2:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=_.dtype,X=_.order,J=[F,N.join(),j,G.join(),Z,X.join()].join(),$=o[J];return $||(o[J]=$=i([F,N,j,G,Z,X])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_.data,_.stride,0|_.offset)}}};function compile(i){return _[i.funcName]}function cwiseCompiler(i){var o;return(0,F[(o={funcName:i.funcName}).funcName])(compile.bind(void 0,o))}var N={},j={},G=cwiseCompiler({funcName:"cdiff"}),Z=cwiseCompiler({funcName:"zero"});function CACHED_link(i,o,s,x){return function(i,_){var F=_.shape.slice();return F[0]>2&&F[1]>2&&x(_.pick(-1,-1).lo(1,1).hi(F[0]-2,F[1]-2),i.pick(-1,-1,0).lo(1,1).hi(F[0]-2,F[1]-2),i.pick(-1,-1,1).lo(1,1).hi(F[0]-2,F[1]-2)),F[1]>2&&(s(_.pick(0,-1).lo(1).hi(F[1]-2),i.pick(0,-1,1).lo(1).hi(F[1]-2)),o(i.pick(0,-1,0).lo(1).hi(F[1]-2))),F[1]>2&&(s(_.pick(F[0]-1,-1).lo(1).hi(F[1]-2),i.pick(F[0]-1,-1,1).lo(1).hi(F[1]-2)),o(i.pick(F[0]-1,-1,0).lo(1).hi(F[1]-2))),F[0]>2&&(s(_.pick(-1,0).lo(1).hi(F[0]-2),i.pick(-1,0,0).lo(1).hi(F[0]-2)),o(i.pick(-1,0,1).lo(1).hi(F[0]-2))),F[0]>2&&(s(_.pick(-1,F[1]-1).lo(1).hi(F[0]-2),i.pick(-1,F[1]-1,0).lo(1).hi(F[0]-2)),o(i.pick(-1,F[1]-1,1).lo(1).hi(F[0]-2))),i.set(0,0,0,0),i.set(0,0,1,0),i.set(F[0]-1,0,0,0),i.set(F[0]-1,0,1,0),i.set(0,F[1]-1,0,0),i.set(0,F[1]-1,1,0),i.set(F[0]-1,F[1]-1,0,0),i.set(F[0]-1,F[1]-1,1,0),i}}i.exports=function(i,o,s){return(Array.isArray(s)||(s="string"==typeof s?x(o.dimension,s):x(o.dimension,"clamp")),0===o.size)?i:0===o.dimension?(i.set(0),i):(function(i){var o,s=i.join(),x=j[s];if(x)return x;for(var _=i.length,F=[G,Z],X=1;X<=_;++X)F.push((o=X)in N?N[o]:N[o]=cwiseCompiler({funcName:"fdTemplate"+o}));var x=CACHED_link.apply(void 0,F);return j[s]=x,x})(s)(i,o)}},3581:function(i){"use strict";function interp1d(i,o){var s=Math.floor(o),x=o-s,_=0<=s&&s<i.shape[0],F=0<=s+1&&s+1<i.shape[0];return(1-x)*(_?+i.get(s):0)+x*(F?+i.get(s+1):0)}function interp2d(i,o,s){var x=Math.floor(o),_=o-x,F=0<=x&&x<i.shape[0],N=0<=x+1&&x+1<i.shape[0],j=Math.floor(s),G=s-j,Z=0<=j&&j<i.shape[1],X=0<=j+1&&j+1<i.shape[1],J=F&&Z?i.get(x,j):0,$=F&&X?i.get(x,j+1):0;return(1-G)*((1-_)*J+_*(N&&Z?i.get(x+1,j):0))+G*((1-_)*$+_*(N&&X?i.get(x+1,j+1):0))}function interp3d(i,o,s,x){var _=Math.floor(o),F=o-_,N=0<=_&&_<i.shape[0],j=0<=_+1&&_+1<i.shape[0],G=Math.floor(s),Z=s-G,X=0<=G&&G<i.shape[1],J=0<=G+1&&G+1<i.shape[1],$=Math.floor(x),ee=x-$,et=0<=$&&$<i.shape[2],er=0<=$+1&&$+1<i.shape[2],en=N&&X&&et?i.get(_,G,$):0,ei=N&&J&&et?i.get(_,G+1,$):0,eo=j&&X&&et?i.get(_+1,G,$):0,es=j&&J&&et?i.get(_+1,G+1,$):0,el=N&&X&&er?i.get(_,G,$+1):0,ec=N&&J&&er?i.get(_,G+1,$+1):0;return(1-ee)*((1-Z)*((1-F)*en+F*eo)+Z*((1-F)*ei+F*es))+ee*((1-Z)*((1-F)*el+F*(j&&X&&er?i.get(_+1,G,$+1):0))+Z*((1-F)*ec+F*(j&&J&&er?i.get(_+1,G+1,$+1):0)))}function interpNd(i){var o,s,x=0|i.shape.length,_=Array(x),F=Array(x),N=Array(x),j=Array(x);for(o=0;o<x;++o)s=+arguments[o+1],_[o]=Math.floor(s),F[o]=s-_[o],N[o]=0<=_[o]&&_[o]<i.shape[o],j[o]=0<=_[o]+1&&_[o]+1<i.shape[o];var G,Z,X,J=0;a:for(o=0;o<1<<x;++o){for(G=0,Z=1,X=i.offset;G<x;++G)if(o&1<<G){if(!j[G])continue a;Z*=F[G],X+=i.stride[G]*(_[G]+1)}else{if(!N[G])continue a;Z*=1-F[G],X+=i.stride[G]*_[G]}J+=Z*i.data[X]}return J}i.exports=function(i,o,s,x){switch(i.shape.length){case 0:return 0;case 1:return interp1d(i,o);case 2:return interp2d(i,o,s);case 3:return interp3d(i,o,s,x);default:return interpNd.apply(void 0,arguments)}},i.exports.d1=interp1d,i.exports.d2=interp2d,i.exports.d3=interp3d},7498:function(i,o){"use strict";var s={"float64,2,1,0":function(){return function(i,o,s,x,_){var F=i[0],N=i[1],j=i[2],G=s[0],Z=s[1],X=s[2];x|=0;var J=0,$=0,ee=0,et=Z-j*X,er=G-N*Z;for(ee=0;ee<F;++ee){for($=0;$<N;++$){for(J=0;J<j;++J)o[x]/=_,x+=X;x+=et}x+=er}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,o,s,x,_,F,N,j){for(var G=i[0],Z=i[1],X=i[2],J=s[0],$=s[1],ee=s[2],et=F[0],er=F[1],en=F[2],ei=x|=0,eo=N|=0,es=0|i[0];es>0;){es<64?(G=es,es=0):(G=64,es-=64);for(var el=0|i[1];el>0;){el<64?(Z=el,el=0):(Z=64,el-=64),x=ei+es*J+el*$,N=eo+es*et+el*er;var ec=0,eu=0,ef=0,eh=J-X*ee,ed=$-G*J,ep=et-X*en,eg=er-G*et;for(ef=0;ef<Z;++ef){for(eu=0;eu<G;++eu){for(ec=0;ec<X;++ec)o[x]=_[N]*j,x+=ee,N+=en;x+=eh,N+=ep}x+=ed,N+=eg}}}}},"float32,1,0,float32,1,0":function(){return function(i,o,s,x,_,F,N){var j=i[0],G=i[1],Z=s[0],X=s[1],J=F[0],$=F[1];x|=0,N|=0;var ee=0,et=0,er=Z-G*X,en=J-G*$;for(et=0;et<j;++et){for(ee=0;ee<G;++ee)o[x]=_[N],x+=X,N+=$;x+=er,N+=en}}},"float32,1,0,float32,0,1":function(){return function(i,o,s,x,_,F,N){for(var j=i[0],G=i[1],Z=s[0],X=s[1],J=F[0],$=F[1],ee=x|=0,et=N|=0,er=0|i[1];er>0;){er<64?(G=er,er=0):(G=64,er-=64);for(var en=0|i[0];en>0;){en<64?(j=en,en=0):(j=64,en-=64),x=ee+er*X+en*Z,N=et+er*$+en*J;var ei=0,eo=0,es=Z-G*X,el=J-G*$;for(eo=0;eo<j;++eo){for(ei=0;ei<G;++ei)o[x]=_[N],x+=X,N+=$;x+=es,N+=el}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,o,s,x,_,F,N){for(var j=i[0],G=i[1],Z=i[2],X=s[0],J=s[1],$=s[2],ee=F[0],et=F[1],er=F[2],en=x|=0,ei=N|=0,eo=0|i[2];eo>0;){eo<64?(Z=eo,eo=0):(Z=64,eo-=64);for(var es=0|i[0];es>0;){es<64?(j=es,es=0):(j=64,es-=64);for(var el=0|i[1];el>0;){el<64?(G=el,el=0):(G=64,el-=64),x=en+eo*$+es*X+el*J,N=ei+eo*er+es*ee+el*et;var ec=0,eu=0,ef=0,eh=X-Z*$,ed=J-j*X,ep=ee-Z*er,eg=et-j*ee;for(ef=0;ef<G;++ef){for(eu=0;eu<j;++eu){for(ec=0;ec<Z;++ec)o[x]=_[N],x+=$,N+=er;x+=eh,N+=ep}x+=ed,N+=eg}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,o,s,x,_,F,N){var j=i[0],G=i[1],Z=i[2],X=s[0],J=s[1],$=s[2],ee=F[0],et=F[1],er=F[2];x|=0,N|=0;var en=0,ei=0,eo=0,es=X-Z*$,el=J-j*X,ec=ee-Z*er,eu=et-j*ee;for(eo=0;eo<G;++eo){for(ei=0;ei<j;++ei){for(en=0;en<Z;++en)o[x]=_[N],x+=$,N+=er;x+=es,N+=ec}x+=el,N+=eu}}}},compile=function(i,o){return(0,s[o.join(",")])()},x={mul:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=_.dtype,X=_.order,J=[F,N.join(),j,G.join(),Z,X.join()].join(),$=o[J];return $||(o[J]=$=i([F,N,j,G,Z,X])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_.data,_.stride,0|_.offset)}},muls:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=[F,N.join(),j,G.join()].join(),X=o[Z];return X||(o[Z]=X=i([F,N,j,G])),X(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_)}},mulseq:function(i){var o={};return function(s,x){var _=s.dtype,F=s.order,N=[_,F.join()].join(),j=o[N];return j||(o[N]=j=i([_,F])),j(s.shape.slice(0),s.data,s.stride,0|s.offset,x)}},div:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=_.dtype,X=_.order,J=[F,N.join(),j,G.join(),Z,X.join()].join(),$=o[J];return $||(o[J]=$=i([F,N,j,G,Z,X])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_.data,_.stride,0|_.offset)}},divs:function(i){var o={};return function(s,x,_){var F=s.dtype,N=s.order,j=x.dtype,G=x.order,Z=[F,N.join(),j,G.join()].join(),X=o[Z];return X||(o[Z]=X=i([F,N,j,G])),X(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset,_)}},divseq:function(i){var o={};return function(s,x){var _=s.dtype,F=s.order,N=[_,F.join()].join(),j=o[N];return j||(o[N]=j=i([_,F])),j(s.shape.slice(0),s.data,s.stride,0|s.offset,x)}},assign:function(i){var o={};return function(s,x){var _=s.dtype,F=s.order,N=x.dtype,j=x.order,G=[_,F.join(),N,j.join()].join(),Z=o[G];return Z||(o[G]=Z=i([_,F,N,j])),Z(s.shape.slice(0),s.data,s.stride,0|s.offset,x.data,x.stride,0|x.offset)}}};function makeOp(i){var o;return(0,x[(o={funcName:i.funcName}).funcName])(compile.bind(void 0,o))}var _={mul:"*",div:"/"};(function(){for(var i in _)o[i]=makeOp({funcName:i}),o[i+"s"]=makeOp({funcName:i+"s"}),o[i+"seq"]=makeOp({funcName:i+"seq"})})(),o.assign=makeOp({funcName:"assign"})},7382:function(i,o,s){"use strict";var x=s(5050),_=s(9262);i.exports=function(i,o){for(var s=[],F=i,N=1;Array.isArray(F);)s.push(F.length),N*=F.length,F=F[0];return 0===s.length?x():(o||(o=x(new Float64Array(N),s)),_(o,i),o)}},9262:function(i){"use strict";var o,s;i.exports=(o=(function(){return function(i,o,s,x,_){var F=i[0],N=i[1],j=i[2],G=s[0],Z=s[1],X=s[2],J=[0,0,0];x|=0;var $=0,ee=0,et=0,er=Z-j*X,en=G-N*Z;for(et=0;et<F;++et){for(ee=0;ee<N;++ee){for($=0;$<j;++$){var ei,eo=_;for(ei=0;ei<J.length-1;++ei)eo=eo[J[ei]];o[x]=eo[J[J.length-1]],x+=X,++J[2]}x+=er,J[2]-=j,++J[1]}x+=en,J[1]-=N,++J[0]}}}).bind(void 0,{funcName:"convert"}),s={},function(i,x){var _=i.dtype,F=i.order,N=[_,F.join()].join(),j=s[N];return j||(s[N]=j=o([_,F])),j(i.shape.slice(0),i.data,i.stride,0|i.offset,x)})},8139:function(i,o,s){"use strict";var x=s(5306);function getMallocFree(i){return"uint32"===i?[x.mallocUint32,x.freeUint32]:null}var _={"uint32,1,0":function(i,o){return function(s,x,_,F,N,j,G,Z,X,J,$){var ee,et,er,en,ei,eo,es,el,ec=s*N+F,eu=i(Z);for(ee=s+1;ee<=x;++ee){for(et=ee,ec+=N,er=ec,ei=0,eo=ec,en=0;en<Z;++en)eu[ei++]=_[eo],eo+=X;p:for(;et-- >s;){for(en=0,ei=0,eo=er-N;en<Z;++en){if((es=_[eo])<(el=eu[ei]))break p;if(es>el)break;eo+=J,ei+=$}for(en=0,ei=er,eo=er-N;en<Z;++en)_[ei]=_[eo],ei+=X,eo+=X;er-=N}for(en=0,ei=er,eo=0;en<Z;++en)_[ei]=eu[eo++],ei+=X}o(eu)}}},F={"uint32,1,0":function(i,o,s){return function ndarrayQuickSort1d0uint32(x,_,F,N,j,G,Z,X,J,$,ee){var et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC=(_-x+1)/6|0,eE=x+eC,eL=_-eC,eP=x+_>>1,eI=eP-eC,eO=eP+eC,eD=eE,eR=eI,eB=eP,ez=eO,eF=eL,eN=x+1,ej=_-1,eU=!0,eV=0,eH=0,eG=0,eW=o(X),eZ=o(X);for(ef=0,eh=j*eD,ed=j*eR,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eD,eD=eR,eR=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*ez,ed=j*eF,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=ez,ez=eF,eF=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eD,ed=j*eB,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eD,eD=eB,eB=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eR,ed=j*eB,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eR,eR=eB,eB=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eD,ed=j*ez,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eD,eD=ez,ez=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eB,ed=j*ez,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eB,eB=ez,ez=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eR,ed=j*eF,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eR,eR=eF,eF=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eR,ed=j*eB,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=eR,eR=eB,eB=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*ez,ed=j*eF,eM=N;ef<X;++ef){if(el=eh+eM,ec=ed+eM,(eG=F[el]-F[ec])>0){er=ez,ez=eF,eF=er;break}if(eG<0)break;eM+=$}for(ef=0,eh=j*eD,ed=j*eR,ep=j*eB,eg=j*ez,em=j*eF,ey=j*eE,ev=j*eP,ex=j*eL,eS=0,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,eu=ep+eM,e_=eg+eM,ew=em+eM,eT=ey+eM,ek=ev+eM,eA=ex+eM,eW[eS]=F[ec],eZ[eS]=F[e_],eU=eU&&eW[eS]===eZ[eS],en=F[el],ei=F[eu],eo=F[ew],F[eT]=en,F[ek]=ei,F[eA]=eo,++eS,eM+=J;for(ef=0,eh=j*eI,ed=j*x,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,F[el]=F[ec],eM+=J;for(ef=0,eh=j*eO,ed=j*_,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,F[el]=F[ec],eM+=J;if(eU)for(es=eN;es<=ej;++es){for(ef=0,el=N+es*j,eS=0;ef<X&&0==(eG=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(0!==eG){if(eG<0){if(es!==eN)for(ef=0,eh=j*es,ed=j*eN,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;++eN}else for(;;){for(ef=0,el=N+ej*j,eS=0;ef<X&&0==(eG=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(eG>0)ej--;else if(eG<0){for(ef=0,eh=j*es,ed=j*eN,ep=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,eu=ep+eM,et=F[el],F[el]=F[ec],F[ec]=F[eu],F[eu]=et,eM+=J;++eN,--ej;break}else{for(ef=0,eh=j*es,ed=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;--ej;break}}}}else for(es=eN;es<=ej;++es){for(ef=0,el=N+es*j,eS=0;ef<X&&0==(eV=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(eV<0){if(es!==eN)for(ef=0,eh=j*es,ed=j*eN,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;++eN}else{for(ef=0,el=N+es*j,eS=0;ef<X&&0==(eH=F[el]-eZ[eS]);++ef)eS+=ee,el+=$;if(eH>0)for(;;){for(ef=0,el=N+ej*j,eS=0;ef<X&&0==(eG=F[el]-eZ[eS]);++ef)eS+=ee,el+=$;if(eG>0){if(--ej<es)break;continue}for(ef=0,el=N+ej*j,eS=0;ef<X&&0==(eG=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(eG<0){for(ef=0,eh=j*es,ed=j*eN,ep=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,eu=ep+eM,et=F[el],F[el]=F[ec],F[ec]=F[eu],F[eu]=et,eM+=J;++eN,--ej}else{for(ef=0,eh=j*es,ed=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;--ej}break}}}for(ef=0,eh=j*x,ed=j*(eN-1),eS=0,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,F[el]=F[ec],F[ec]=eW[eS],++eS,eM+=J;for(ef=0,eh=j*_,ed=j*(ej+1),eS=0,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,F[el]=F[ec],F[ec]=eZ[eS],++eS,eM+=J;if(eN-2-x<=32?i(x,eN-2,F,N,j,G,Z,X,J,$,ee):ndarrayQuickSort1d0uint32(x,eN-2,F,N,j,G,Z,X,J,$,ee),_-(ej+2)<=32?i(ej+2,_,F,N,j,G,Z,X,J,$,ee):ndarrayQuickSort1d0uint32(ej+2,_,F,N,j,G,Z,X,J,$,ee),eU){s(eW),s(eZ);return}if(eN<eE&&ej>eL){g:for(;;){for(ef=0,el=N+eN*j,eS=0,eM=N;ef<X;++ef){if(F[el]!==eW[eS])break g;++eS,el+=J}++eN}m:for(;;){for(ef=0,el=N+ej*j,eS=0,eM=N;ef<X;++ef){if(F[el]!==eZ[eS])break m;++eS,el+=J}--ej}for(es=eN;es<=ej;++es){for(ef=0,el=N+es*j,eS=0;ef<X&&0==(eV=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(0===eV){if(es!==eN)for(ef=0,eh=j*es,ed=j*eN,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;++eN}else{for(ef=0,el=N+es*j,eS=0;ef<X&&0==(eH=F[el]-eZ[eS]);++ef)eS+=ee,el+=$;if(0===eH)for(;;){for(ef=0,el=N+ej*j,eS=0;ef<X&&0==(eG=F[el]-eZ[eS]);++ef)eS+=ee,el+=$;if(0===eG){if(--ej<es)break;continue}for(ef=0,el=N+ej*j,eS=0;ef<X&&0==(eG=F[el]-eW[eS]);++ef)eS+=ee,el+=$;if(eG<0){for(ef=0,eh=j*es,ed=j*eN,ep=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,eu=ep+eM,et=F[el],F[el]=F[ec],F[ec]=F[eu],F[eu]=et,eM+=J;++eN,--ej}else{for(ef=0,eh=j*es,ed=j*ej,eM=N;ef<X;++ef)el=eh+eM,ec=ed+eM,et=F[el],F[el]=F[ec],F[ec]=et,eM+=J;--ej}break}}}}s(eW),s(eZ),ej-eN<=32?i(eN,ej,F,N,j,G,Z,X,J,$,ee):ndarrayQuickSort1d0uint32(eN,ej,F,N,j,G,Z,X,J,$,ee)}}},N={"uint32,1,0":function(i,o){return function(s){var x=s.data,_=0|s.offset,F=s.shape,N=s.stride,j=0|N[0],G=0|F[0],Z=0|N[1],X=0|F[1];G<=32?i(0,G-1,x,_,j,Z,G,X,Z,Z,1):o(0,G-1,x,_,j,Z,G,X,Z,Z,1)}}};i.exports=function(i,o){var s,x,j,G,Z=N[[o,i].join(",")],X=(s=getMallocFree(o),x=_[[o,i].join(",")],s?x(s[0],s[1]):x()),J=(j=getMallocFree(o),G=F[[o,i].join(",")],i.length>1&&j?G(X,j[0],j[1]):G(X));return Z(X,J)}},8729:function(i,o,s){"use strict";var x=s(8139),_={};i.exports=function(i){var o=i.order,s=i.dtype,F=[o,s].join(":"),N=_[F];return N||(_[F]=N=x(o,s)),N(i),i}},5050:function(i,o,s){var x=s(4780),_="undefined"!=typeof Float64Array;function compare1st(i,o){return i[0]-o[0]}function order(){var i,o=this.stride,s=Array(o.length);for(i=0;i<s.length;++i)s[i]=[Math.abs(o[i]),i];s.sort(compare1st);var x=Array(s.length);for(i=0;i<x.length;++i)x[i]=s[i][1];return x}var F={T:function(i){function View(i){this.data=i}var o=View.prototype;return o.dtype=i,o.index=function(){return -1},o.size=0,o.dimension=-1,o.shape=o.stride=o.order=[],o.lo=o.hi=o.transpose=o.step=function(){return new View(this.data)},o.get=o.set=function(){},o.pick=function(){return null},function(i){return new View(i)}},0:function(i,o){function View(i,o){this.data=i,this.offset=o}var s=View.prototype;return s.dtype=i,s.index=function(){return this.offset},s.dimension=0,s.size=1,s.shape=s.stride=s.order=[],s.lo=s.hi=s.transpose=s.step=function(){return new View(this.data,this.offset)},s.pick=function(){return o(this.data)},s.valueOf=s.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},s.set=function(o){return"generic"===i?this.data.set(this.offset,o):this.data[this.offset]=o},function(i,o,s,x){return new View(i,x)}},1:function(i,o,s){function View(i,o,s,x){this.data=i,this.shape=[o],this.stride=[s],this.offset=0|x}var x=View.prototype;return x.dtype=i,x.dimension=1,Object.defineProperty(x,"size",{get:function(){return this.shape[0]}}),x.order=[0],x.set=function(o,s){return"generic"===i?this.data.set(this.offset+this.stride[0]*o,s):this.data[this.offset+this.stride[0]*o]=s},x.get=function(o){return"generic"===i?this.data.get(this.offset+this.stride[0]*o):this.data[this.offset+this.stride[0]*o]},x.index=function(i){return this.offset+this.stride[0]*i},x.hi=function(i){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,this.stride[0],this.offset)},x.lo=function(i){var o=this.offset,s=0,x=this.shape[0],_=this.stride[0];return"number"==typeof i&&i>=0&&(o+=_*(s=0|i),x-=s),new View(this.data,x,_,o)},x.step=function(i){var o=this.shape[0],s=this.stride[0],x=this.offset,_=0,F=Math.ceil;return"number"==typeof i&&((_=0|i)<0?(x+=s*(o-1),o=F(-o/_)):o=F(o/_),s*=_),new View(this.data,o,s,x)},x.transpose=function(i){i=void 0===i?0:0|i;var o=this.shape,s=this.stride;return new View(this.data,o[i],s[i],this.offset)},x.pick=function(i){var s=[],x=[],_=this.offset;return"number"==typeof i&&i>=0?_=_+this.stride[0]*i|0:(s.push(this.shape[0]),x.push(this.stride[0])),(0,o[s.length+1])(this.data,s,x,_)},function(i,o,s,x){return new View(i,o[0],s[0],x)}},2:function(i,o,s){function View(i,o,s,x,_,F){this.data=i,this.shape=[o,s],this.stride=[x,_],this.offset=0|F}var x=View.prototype;return x.dtype=i,x.dimension=2,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(x,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),x.set=function(o,s,x){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s,x):this.data[this.offset+this.stride[0]*o+this.stride[1]*s]=x},x.get=function(o,s){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s):this.data[this.offset+this.stride[0]*o+this.stride[1]*s]},x.index=function(i,o){return this.offset+this.stride[0]*i+this.stride[1]*o},x.hi=function(i,o){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},x.lo=function(i,o){var s=this.offset,x=0,_=this.shape[0],F=this.shape[1],N=this.stride[0],j=this.stride[1];return"number"==typeof i&&i>=0&&(s+=N*(x=0|i),_-=x),"number"==typeof o&&o>=0&&(s+=j*(x=0|o),F-=x),new View(this.data,_,F,N,j,s)},x.step=function(i,o){var s=this.shape[0],x=this.shape[1],_=this.stride[0],F=this.stride[1],N=this.offset,j=0,G=Math.ceil;return"number"==typeof i&&((j=0|i)<0?(N+=_*(s-1),s=G(-s/j)):s=G(s/j),_*=j),"number"==typeof o&&((j=0|o)<0?(N+=F*(x-1),x=G(-x/j)):x=G(x/j),F*=j),new View(this.data,s,x,_,F,N)},x.transpose=function(i,o){i=void 0===i?0:0|i,o=void 0===o?1:0|o;var s=this.shape,x=this.stride;return new View(this.data,s[i],s[o],x[i],x[o],this.offset)},x.pick=function(i,s){var x=[],_=[],F=this.offset;return"number"==typeof i&&i>=0?F=F+this.stride[0]*i|0:(x.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof s&&s>=0?F=F+this.stride[1]*s|0:(x.push(this.shape[1]),_.push(this.stride[1])),(0,o[x.length+1])(this.data,x,_,F)},function(i,o,s,x){return new View(i,o[0],o[1],s[0],s[1],x)}},3:function(i,o,s){function View(i,o,s,x,_,F,N,j){this.data=i,this.shape=[o,s,x],this.stride=[_,F,N],this.offset=0|j}var x=View.prototype;return x.dtype=i,x.dimension=3,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(x,"order",{get:function(){var i=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),s=Math.abs(this.stride[2]);return i>o?o>s?[2,1,0]:i>s?[1,2,0]:[1,0,2]:i>s?[2,0,1]:s>o?[0,1,2]:[0,2,1]}}),x.set=function(o,s,x,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x,_):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x]=_},x.get=function(o,s,x){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x]},x.index=function(i,o,s){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s},x.hi=function(i,o,s){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,this.stride[0],this.stride[1],this.stride[2],this.offset)},x.lo=function(i,o,s){var x=this.offset,_=0,F=this.shape[0],N=this.shape[1],j=this.shape[2],G=this.stride[0],Z=this.stride[1],X=this.stride[2];return"number"==typeof i&&i>=0&&(x+=G*(_=0|i),F-=_),"number"==typeof o&&o>=0&&(x+=Z*(_=0|o),N-=_),"number"==typeof s&&s>=0&&(x+=X*(_=0|s),j-=_),new View(this.data,F,N,j,G,Z,X,x)},x.step=function(i,o,s){var x=this.shape[0],_=this.shape[1],F=this.shape[2],N=this.stride[0],j=this.stride[1],G=this.stride[2],Z=this.offset,X=0,J=Math.ceil;return"number"==typeof i&&((X=0|i)<0?(Z+=N*(x-1),x=J(-x/X)):x=J(x/X),N*=X),"number"==typeof o&&((X=0|o)<0?(Z+=j*(_-1),_=J(-_/X)):_=J(_/X),j*=X),"number"==typeof s&&((X=0|s)<0?(Z+=G*(F-1),F=J(-F/X)):F=J(F/X),G*=X),new View(this.data,x,_,F,N,j,G,Z)},x.transpose=function(i,o,s){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s;var x=this.shape,_=this.stride;return new View(this.data,x[i],x[o],x[s],_[i],_[o],_[s],this.offset)},x.pick=function(i,s,x){var _=[],F=[],N=this.offset;return"number"==typeof i&&i>=0?N=N+this.stride[0]*i|0:(_.push(this.shape[0]),F.push(this.stride[0])),"number"==typeof s&&s>=0?N=N+this.stride[1]*s|0:(_.push(this.shape[1]),F.push(this.stride[1])),"number"==typeof x&&x>=0?N=N+this.stride[2]*x|0:(_.push(this.shape[2]),F.push(this.stride[2])),(0,o[_.length+1])(this.data,_,F,N)},function(i,o,s,x){return new View(i,o[0],o[1],o[2],s[0],s[1],s[2],x)}},4:function(i,o,s){function View(i,o,s,x,_,F,N,j,G,Z){this.data=i,this.shape=[o,s,x,_],this.stride=[F,N,j,G],this.offset=0|Z}var x=View.prototype;return x.dtype=i,x.dimension=4,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(x,"order",{get:s}),x.set=function(o,s,x,_,F){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_,F):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_]=F},x.get=function(o,s,x,_){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_]},x.index=function(i,o,s,x){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s+this.stride[3]*x},x.hi=function(i,o,s,x){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,"number"!=typeof x||x<0?this.shape[3]:0|x,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},x.lo=function(i,o,s,x){var _=this.offset,F=0,N=this.shape[0],j=this.shape[1],G=this.shape[2],Z=this.shape[3],X=this.stride[0],J=this.stride[1],$=this.stride[2],ee=this.stride[3];return"number"==typeof i&&i>=0&&(_+=X*(F=0|i),N-=F),"number"==typeof o&&o>=0&&(_+=J*(F=0|o),j-=F),"number"==typeof s&&s>=0&&(_+=$*(F=0|s),G-=F),"number"==typeof x&&x>=0&&(_+=ee*(F=0|x),Z-=F),new View(this.data,N,j,G,Z,X,J,$,ee,_)},x.step=function(i,o,s,x){var _=this.shape[0],F=this.shape[1],N=this.shape[2],j=this.shape[3],G=this.stride[0],Z=this.stride[1],X=this.stride[2],J=this.stride[3],$=this.offset,ee=0,et=Math.ceil;return"number"==typeof i&&((ee=0|i)<0?($+=G*(_-1),_=et(-_/ee)):_=et(_/ee),G*=ee),"number"==typeof o&&((ee=0|o)<0?($+=Z*(F-1),F=et(-F/ee)):F=et(F/ee),Z*=ee),"number"==typeof s&&((ee=0|s)<0?($+=X*(N-1),N=et(-N/ee)):N=et(N/ee),X*=ee),"number"==typeof x&&((ee=0|x)<0?($+=J*(j-1),j=et(-j/ee)):j=et(j/ee),J*=ee),new View(this.data,_,F,N,j,G,Z,X,J,$)},x.transpose=function(i,o,s,x){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s,x=void 0===x?3:0|x;var _=this.shape,F=this.stride;return new View(this.data,_[i],_[o],_[s],_[x],F[i],F[o],F[s],F[x],this.offset)},x.pick=function(i,s,x,_){var F=[],N=[],j=this.offset;return"number"==typeof i&&i>=0?j=j+this.stride[0]*i|0:(F.push(this.shape[0]),N.push(this.stride[0])),"number"==typeof s&&s>=0?j=j+this.stride[1]*s|0:(F.push(this.shape[1]),N.push(this.stride[1])),"number"==typeof x&&x>=0?j=j+this.stride[2]*x|0:(F.push(this.shape[2]),N.push(this.stride[2])),"number"==typeof _&&_>=0?j=j+this.stride[3]*_|0:(F.push(this.shape[3]),N.push(this.stride[3])),(0,o[F.length+1])(this.data,F,N,j)},function(i,o,s,x){return new View(i,o[0],o[1],o[2],o[3],s[0],s[1],s[2],s[3],x)}},5:function(i,o,s){function View(i,o,s,x,_,F,N,j,G,Z,X,J){this.data=i,this.shape=[o,s,x,_,F],this.stride=[N,j,G,Z,X],this.offset=0|J}var x=View.prototype;return x.dtype=i,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:s}),x.set=function(o,s,x,_,F,N){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_+this.stride[4]*F,N):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_+this.stride[4]*F]=N},x.get=function(o,s,x,_,F){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_+this.stride[4]*F):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*x+this.stride[3]*_+this.stride[4]*F]},x.index=function(i,o,s,x,_){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s+this.stride[3]*x+this.stride[4]*_},x.hi=function(i,o,s,x,_){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,"number"!=typeof x||x<0?this.shape[3]:0|x,"number"!=typeof _||_<0?this.shape[4]:0|_,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(i,o,s,x,_){var F=this.offset,N=0,j=this.shape[0],G=this.shape[1],Z=this.shape[2],X=this.shape[3],J=this.shape[4],$=this.stride[0],ee=this.stride[1],et=this.stride[2],er=this.stride[3],en=this.stride[4];return"number"==typeof i&&i>=0&&(F+=$*(N=0|i),j-=N),"number"==typeof o&&o>=0&&(F+=ee*(N=0|o),G-=N),"number"==typeof s&&s>=0&&(F+=et*(N=0|s),Z-=N),"number"==typeof x&&x>=0&&(F+=er*(N=0|x),X-=N),"number"==typeof _&&_>=0&&(F+=en*(N=0|_),J-=N),new View(this.data,j,G,Z,X,J,$,ee,et,er,en,F)},x.step=function(i,o,s,x,_){var F=this.shape[0],N=this.shape[1],j=this.shape[2],G=this.shape[3],Z=this.shape[4],X=this.stride[0],J=this.stride[1],$=this.stride[2],ee=this.stride[3],et=this.stride[4],er=this.offset,en=0,ei=Math.ceil;return"number"==typeof i&&((en=0|i)<0?(er+=X*(F-1),F=ei(-F/en)):F=ei(F/en),X*=en),"number"==typeof o&&((en=0|o)<0?(er+=J*(N-1),N=ei(-N/en)):N=ei(N/en),J*=en),"number"==typeof s&&((en=0|s)<0?(er+=$*(j-1),j=ei(-j/en)):j=ei(j/en),$*=en),"number"==typeof x&&((en=0|x)<0?(er+=ee*(G-1),G=ei(-G/en)):G=ei(G/en),ee*=en),"number"==typeof _&&((en=0|_)<0?(er+=et*(Z-1),Z=ei(-Z/en)):Z=ei(Z/en),et*=en),new View(this.data,F,N,j,G,Z,X,J,$,ee,et,er)},x.transpose=function(i,o,s,x,_){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s,x=void 0===x?3:0|x,_=void 0===_?4:0|_;var F=this.shape,N=this.stride;return new View(this.data,F[i],F[o],F[s],F[x],F[_],N[i],N[o],N[s],N[x],N[_],this.offset)},x.pick=function(i,s,x,_,F){var N=[],j=[],G=this.offset;return"number"==typeof i&&i>=0?G=G+this.stride[0]*i|0:(N.push(this.shape[0]),j.push(this.stride[0])),"number"==typeof s&&s>=0?G=G+this.stride[1]*s|0:(N.push(this.shape[1]),j.push(this.stride[1])),"number"==typeof x&&x>=0?G=G+this.stride[2]*x|0:(N.push(this.shape[2]),j.push(this.stride[2])),"number"==typeof _&&_>=0?G=G+this.stride[3]*_|0:(N.push(this.shape[3]),j.push(this.stride[3])),"number"==typeof F&&F>=0?G=G+this.stride[4]*F|0:(N.push(this.shape[4]),j.push(this.stride[4])),(0,o[N.length+1])(this.data,N,j,G)},function(i,o,s,x){return new View(i,o[0],o[1],o[2],o[3],o[4],s[0],s[1],s[2],s[3],s[4],x)}}},N={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};i.exports=function(i,o,s,j){if(void 0===i){var G=N.array[0];return G([])}"number"==typeof i&&(i=[i]),void 0===o&&(o=[i.length]);var Z=o.length;if(void 0===s){s=Array(Z);for(var X=Z-1,J=1;X>=0;--X)s[X]=J,J*=o[X]}if(void 0===j){j=0;for(var X=0;X<Z;++X)s[X]<0&&(j-=(o[X]-1)*s[X])}for(var $=function(i){if(x(i))return"buffer";if(_)switch(Object.prototype.toString.call(i)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(i)?"array":"generic"}(i),ee=N[$];ee.length<=Z+1;)ee.push(function(i,o){var s=F[-1===o?"T":String(o)];return -1===o?s(i):0===o?s(i,N[i][0]):s(i,N[i],order)}($,ee.length-1));var G=ee[Z+1];return G(i,o,s,j)}},8551:function(i,o,s){"use strict";var x=s(8362);i.exports=function(i,o){if(isNaN(i)||isNaN(o))return NaN;if(i===o)return i;if(0===i)return o<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var s=x.hi(i),_=x.lo(i);return o>i==i>0?4294967295===_?(s+=1,_=0):_+=1:0===_?(_=4294967295,s-=1):_-=1,x.pack(_,s)}},115:function(i,o){o.vertexNormals=function(i,o,s){for(var x=o.length,_=Array(x),F=void 0===s?1e-6:s,N=0;N<x;++N)_[N]=[0,0,0];for(var N=0;N<i.length;++N)for(var j=i[N],G=0,Z=j[j.length-1],X=j[0],J=0;J<j.length;++J){G=Z,Z=X,X=j[(J+1)%j.length];for(var $=o[G],ee=o[Z],et=o[X],er=[,,,],en=0,ei=[,,,],eo=0,es=0;es<3;++es)er[es]=$[es]-ee[es],en+=er[es]*er[es],ei[es]=et[es]-ee[es],eo+=ei[es]*ei[es];if(en*eo>F)for(var el=_[Z],ec=1/Math.sqrt(en*eo),es=0;es<3;++es){var eu=(es+1)%3,ef=(es+2)%3;el[es]+=ec*(ei[eu]*er[ef]-ei[ef]*er[eu])}}for(var N=0;N<x;++N){for(var el=_[N],eh=0,es=0;es<3;++es)eh+=el[es]*el[es];if(eh>F)for(var ec=1/Math.sqrt(eh),es=0;es<3;++es)el[es]*=ec;else for(var es=0;es<3;++es)el[es]=0}return _},o.faceNormals=function(i,o,s){for(var x=i.length,_=Array(x),F=void 0===s?1e-6:s,N=0;N<x;++N){for(var j=i[N],G=[,,,],Z=0;Z<3;++Z)G[Z]=o[j[Z]];for(var X=[,,,],J=[,,,],Z=0;Z<3;++Z)X[Z]=G[1][Z]-G[0][Z],J[Z]=G[2][Z]-G[0][Z];for(var $=[,,,],ee=0,Z=0;Z<3;++Z){var et=(Z+1)%3,er=(Z+2)%3;$[Z]=X[et]*J[er]-X[er]*J[et],ee+=$[Z]*$[Z]}ee=ee>F?1/Math.sqrt(ee):0;for(var Z=0;Z<3;++Z)$[Z]*=ee;_[N]=$}return _}},567:function(i){"use strict";i.exports=function(i,o,s,x,_,F,N,j,G,Z){var X=o+F+Z;if(J>0){var J=Math.sqrt(X+1);i[0]=.5*(N-G)/J,i[1]=.5*(j-x)/J,i[2]=.5*(s-F)/J,i[3]=.5*J}else{var $=Math.max(o,F,Z),J=Math.sqrt(2*$-X+1);o>=$?(i[0]=.5*J,i[1]=.5*(_+s)/J,i[2]=.5*(j+x)/J,i[3]=.5*(N-G)/J):F>=$?(i[0]=.5*(s+_)/J,i[1]=.5*J,i[2]=.5*(G+N)/J,i[3]=.5*(j-x)/J):(i[0]=.5*(x+j)/J,i[1]=.5*(N+G)/J,i[2]=.5*J,i[3]=.5*(s-_)/J)}return i}},7774:function(i,o,s){"use strict";i.exports=function(i){var o=(i=i||{}).center||[0,0,0],s=i.rotation||[0,0,0,1],x=i.radius||1;o=[].slice.call(o,0,3),normalize4(s=[].slice.call(s,0,4),s);var _=new OrbitCameraController(s,o,Math.log(x));return _.setDistanceLimits(i.zoomMin,i.zoomMax),("eye"in i||"up"in i)&&_.lookAt(0,i.eye,i.center,i.up),_};var x=s(8444),_=s(3012),F=s(5950),N=s(7437),j=s(567);function len3(i,o,s){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2))}function len4(i,o,s,x){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2)+Math.pow(x,2))}function normalize4(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=len4(s,x,_,F);N>1e-6?(i[0]=s/N,i[1]=x/N,i[2]=_/N,i[3]=F/N):(i[0]=i[1]=i[2]=0,i[3]=1)}function OrbitCameraController(i,o,s){this.radius=x([s]),this.center=x(o),this.rotation=x(i),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var G=OrbitCameraController.prototype;G.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},G.recalcMatrix=function(i){this.radius.curve(i),this.center.curve(i),this.rotation.curve(i);var o=this.computedRotation;normalize4(o,o);var s=this.computedMatrix;F(s,o);var x=this.computedCenter,_=this.computedEye,N=this.computedUp,j=Math.exp(this.computedRadius[0]);_[0]=x[0]+j*s[2],_[1]=x[1]+j*s[6],_[2]=x[2]+j*s[10],N[0]=s[1],N[1]=s[5],N[2]=s[9];for(var G=0;G<3;++G){for(var Z=0,X=0;X<3;++X)Z+=s[G+4*X]*_[X];s[12+G]=-Z}},G.getMatrix=function(i,o){this.recalcMatrix(i);var s=this.computedMatrix;if(o){for(var x=0;x<16;++x)o[x]=s[x];return o}return s},G.idle=function(i){this.center.idle(i),this.radius.idle(i),this.rotation.idle(i)},G.flush=function(i){this.center.flush(i),this.radius.flush(i),this.rotation.flush(i)},G.pan=function(i,o,s,x){o=o||0,s=s||0,x=x||0,this.recalcMatrix(i);var _=this.computedMatrix,F=_[1],N=_[5],j=_[9],G=len3(F,N,j);F/=G,N/=G,j/=G;var Z=_[0],X=_[4],J=_[8],$=Z*F+X*N+J*j,ee=len3(Z-=F*$,X-=N*$,J-=j*$);Z/=ee,X/=ee,J/=ee;var et=_[2],er=_[6],en=_[10],ei=et*F+er*N+en*j,eo=et*Z+er*X+en*J,es=len3(et-=ei*F+eo*Z,er-=ei*N+eo*X,en-=ei*j+eo*J);et/=es,er/=es,en/=es;var el=Z*o+F*s,ec=X*o+N*s,eu=J*o+j*s;this.center.move(i,el,ec,eu);var ef=Math.exp(this.computedRadius[0]);ef=Math.max(1e-4,ef+x),this.radius.set(i,Math.log(ef))},G.rotate=function(i,o,s,x){this.recalcMatrix(i),o=o||0,s=s||0;var _=this.computedMatrix,F=_[0],N=_[4],j=_[8],G=_[1],Z=_[5],X=_[9],J=_[2],$=_[6],ee=_[10],et=o*F+s*G,er=o*N+s*Z,en=o*j+s*X,ei=-($*en-ee*er),eo=-(ee*et-J*en),es=-(J*er-$*et),el=Math.sqrt(Math.max(0,1-Math.pow(ei,2)-Math.pow(eo,2)-Math.pow(es,2))),ec=len4(ei,eo,es,el);ec>1e-6?(ei/=ec,eo/=ec,es/=ec,el/=ec):(ei=eo=es=0,el=1);var eu=this.computedRotation,ef=eu[0],eh=eu[1],ed=eu[2],ep=eu[3],eg=ef*el+ep*ei+eh*es-ed*eo,em=eh*el+ep*eo+ed*ei-ef*es,ey=ed*el+ep*es+ef*eo-eh*ei,ev=ep*el-ef*ei-eh*eo-ed*es;if(x){var ex=Math.sin(x)/len3(ei=J,eo=$,es=ee);ei*=ex,eo*=ex,es*=ex,eg=eg*(el=Math.cos(o))+ev*ei+em*es-ey*eo,em=em*el+ev*eo+ey*ei-eg*es,ey=ey*el+ev*es+eg*eo-em*ei,ev=ev*el-eg*ei-em*eo-ey*es}var e_=len4(eg,em,ey,ev);e_>1e-6?(eg/=e_,em/=e_,ey/=e_,ev/=e_):(eg=em=ey=0,ev=1),this.rotation.set(i,eg,em,ey,ev)},G.lookAt=function(i,o,s,x){this.recalcMatrix(i),s=s||this.computedCenter,o=o||this.computedEye,x=x||this.computedUp;var F=this.computedMatrix;_(F,o,s,x);var N=this.computedRotation;j(N,F[0],F[1],F[2],F[4],F[5],F[6],F[8],F[9],F[10]),normalize4(N,N),this.rotation.set(i,N[0],N[1],N[2],N[3]);for(var G=0,Z=0;Z<3;++Z)G+=Math.pow(s[Z]-o[Z],2);this.radius.set(i,.5*Math.log(Math.max(G,1e-6))),this.center.set(i,s[0],s[1],s[2])},G.translate=function(i,o,s,x){this.center.move(i,o||0,s||0,x||0)},G.setMatrix=function(i,o){var s=this.computedRotation;j(s,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),normalize4(s,s),this.rotation.set(i,s[0],s[1],s[2],s[3]);var x=this.computedMatrix;N(x,o);var _=x[15];if(Math.abs(_)>1e-6){var F=x[12]/_,G=x[13]/_,Z=x[14]/_;this.recalcMatrix(i);var X=Math.exp(this.computedRadius[0]);this.center.set(i,F-x[2]*X,G-x[6]*X,Z-x[10]*X),this.radius.idle(i)}else this.center.idle(i),this.radius.idle(i)},G.setDistance=function(i,o){o>0&&this.radius.set(i,Math.log(o))},G.setDistanceLimits=function(i,o){i=i>0?Math.log(i):-1/0,o=Math.max(o=o>0?Math.log(o):1/0,i),this.radius.bounds[0][0]=i,this.radius.bounds[1][0]=o},G.getDistanceLimits=function(i){var o=this.radius.bounds;return i?(i[0]=Math.exp(o[0][0]),i[1]=Math.exp(o[1][0]),i):[Math.exp(o[0][0]),Math.exp(o[1][0])]},G.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},G.fromJSON=function(i){var o=this.lastT(),s=i.center;s&&this.center.set(o,s[0],s[1],s[2]);var x=i.rotation;x&&this.rotation.set(o,x[0],x[1],x[2],x[3]);var _=i.distance;_&&_>0&&this.radius.set(o,Math.log(_)),this.setDistanceLimits(i.zoomMin,i.zoomMax)}},4930:function(i,o,s){"use strict";/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */var x=s(6184);i.exports=function(i,o,s){return x(s=void 0!==s?s+"":" ",o)+i}},4405:function(i){i.exports=function(i,o){o||(o=[0,""]);var s=parseFloat(i=String(i),10);return o[0]=s,o[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},4166:function(i,o,s){"use strict";i.exports=function(i,o){for(var s=0|o.length,_=i.length,F=[Array(s),Array(s)],N=0;N<s;++N)F[0][N]=[],F[1][N]=[];for(var N=0;N<_;++N){var j=i[N];F[0][j[0]].push(j),F[1][j[1]].push(j)}for(var G=[],N=0;N<s;++N)F[0][N].length+F[1][N].length===0&&G.push([N]);function cut(i,o){var s=F[o][i[o]];s.splice(s.indexOf(i),1)}function next(i,s,_){for(var N,j,G,Z=0;Z<2;++Z)if(F[Z][s].length>0){N=F[Z][s][0],G=Z;break}j=N[1^G];for(var X=0;X<2;++X)for(var J=F[X][s],$=0;$<J.length;++$){var ee=J[$],et=ee[1^X];x(o[i],o[s],o[j],o[et])>0&&(N=ee,j=et,G=X)}return _||N&&cut(N,G),j}for(var N=0;N<s;++N)for(var Z=0;Z<2;++Z){for(var X=[];F[Z][N].length>0;){F[0][N].length;var J=function(i,s){var _=F[s][i][0],N=[i];cut(_,s);for(var j=_[1^s];;){for(;j!==i;)N.push(j),j=next(N[N.length-2],j,!1);if(F[0][i].length+F[1][i].length===0)break;var G=N[N.length-1],Z=N[1],X=next(G,i,!0);if(0>x(o[G],o[i],o[Z],o[X]))break;N.push(i),j=next(G,i)}return N}(N,Z);J[1]===J[J.length-1]?X.push.apply(X,J):(X.length>0&&G.push(X),X=J)}X.length>0&&G.push(X)}return G};var x=s(9398)},3959:function(i,o,s){"use strict";i.exports=function(i,o){for(var s=x(i,o.length),_=Array(o.length),F=Array(o.length),N=[],j=0;j<o.length;++j){var G=s[j].length;F[j]=G,_[j]=!0,G<=1&&N.push(j)}for(;N.length>0;){var Z=N.pop();_[Z]=!1;for(var X=s[Z],j=0;j<X.length;++j){var J=X[j];0==--F[J]&&N.push(J)}}for(var $=Array(o.length),ee=[],j=0;j<o.length;++j)if(_[j]){var Z=ee.length;$[j]=Z,ee.push(o[j])}else $[j]=-1;for(var et=[],j=0;j<i.length;++j){var er=i[j];_[er[0]]&&_[er[1]]&&et.push([$[er[0]],$[er[1]]])}return[et,ee]};var x=s(8348)},8040:function(i,o,s){"use strict";i.exports=function(i,o){var s=Z(i,o);i=s[0];var X=(o=s[1]).length;i.length;for(var J=x(i,o.length),$=0;$<X;++$)if(J[$].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");for(var ee=_(i,o),et=(ee=ee.filter(function(i){for(var s=i.length,x=[0],_=0;_<s;++_){var F=o[i[_]],G=o[i[(_+1)%s]],Z=N(-F[0],F[1]),X=N(-F[0],G[1]),J=N(G[0],F[1]),$=N(G[0],G[1]);x=j(x,j(j(Z,X),j(J,$)))}return x[x.length-1]>0})).length,er=Array(et),en=Array(et),$=0;$<et;++$){er[$]=$;var ei=Array(et),eo=F([ee[$].map(function(i){return o[i]})]),es=0;y:for(var el=0;el<et;++el)if(ei[el]=0,$!==el){for(var ec=ee[el],eu=ec.length,ef=0;ef<eu;++ef){var eh=eo(o[ec[ef]]);if(0!==eh){eh<0&&(ei[el]=1,es+=1);continue y}}ei[el]=1,es+=1}en[$]=[es,$,ei]}en.sort(function(i,o){return o[0]-i[0]});for(var $=0;$<et;++$)for(var ei=en[$],ed=ei[1],ep=ei[2],el=0;el<et;++el)ep[el]&&(er[el]=ed);for(var eg=function(i){for(var o=Array(i),s=0;s<i;++s)o[s]=[];return o}(et),$=0;$<et;++$)eg[$].push(er[$]),eg[er[$]].push($);for(var em={},ey=makeArray(X,!1),$=0;$<et;++$)for(var ec=ee[$],eu=ec.length,el=0;el<eu;++el){var ev=ec[el],ex=ec[(el+1)%eu],e_=Math.min(ev,ex)+":"+Math.max(ev,ex);if(e_ in em){var ew=em[e_];eg[ew].push($),eg[$].push(ew),ey[ev]=ey[ex]=!0}else em[e_]=$}function sharedBoundary(i){for(var o=i.length,s=0;s<o;++s)if(!ey[i[s]])return!1;return!0}for(var eT=[],ek=makeArray(et,-1),$=0;$<et;++$)er[$]!==$||sharedBoundary(ee[$])?ek[$]=-1:(eT.push($),ek[$]=0);for(var s=[];eT.length>0;){var eA,eS=eT.pop(),eM=eg[eS];G(eM,function(i,o){return i-o});var eC=eM.length,eE=ek[eS];if(0===eE){var ec=ee[eS];eA=[ec]}for(var $=0;$<eC;++$){var eL=eM[$];if(!(ek[eL]>=0)&&(ek[eL]=1^eE,eT.push(eL),0===eE)){var ec=ee[eL];sharedBoundary(ec)||(ec.reverse(),eA.push(ec))}}0===eE&&s.push(eA)}return s};var x=s(8348),_=s(4166),F=s(211),N=s(9660),j=s(9662),G=s(1215),Z=s(3959);function makeArray(i,o){for(var s=Array(i),x=0;x<i;++x)s[x]=o;return s}},211:function(i,o,s){i.exports=function(i){for(var o,s,F,j,G=i.length,Z=[],X=[],J=0;J<G;++J)for(var $=i[J],ee=$.length,et=ee-1,er=0;er<ee;et=er++){var en=$[et],ei=$[er];en[0]===ei[0]?X.push([en,ei]):Z.push([en,ei])}if(0===Z.length)return 0===X.length?classifyEmpty:(o=buildVerticalIndex(X),function(i){return o(i[0],i[1])?0:1});var eo=_(Z),es=(s=eo.slabs,F=eo.coordinates,function(i){var o=N.le(F,i[0]);if(o<0)return 1;var _=s[o];if(!_){if(!(o>0)||F[o]!==i[0])return 1;_=s[o-1]}for(var j=1;_;){var G=_.key,Z=x(i,G[0],G[1]);if(G[0][0]<G[1][0]){if(Z<0)_=_.left;else{if(!(Z>0))return 0;j=-1,_=_.right}}else if(Z>0)_=_.left;else{if(!(Z<0))return 0;j=1,_=_.right}}return j});return 0===X.length?es:(j=buildVerticalIndex(X),function(i){return j(i[0],i[1])?0:es(i)})};var x=s(417)[3],_=s(4385),F=s(9014),N=s(5070);function visitInterval(){return!0}function buildVerticalIndex(i){for(var o={},s=0;s<i.length;++s){var x=i[s],_=x[0][0],N=x[0][1],j=x[1][1],G=[Math.min(N,j),Math.max(N,j)];_ in o?o[_].push(G):o[_]=[G]}for(var Z={},X=Object.keys(o),s=0;s<X.length;++s){var J=o[X[s]];Z[X[s]]=F(J)}return function(i,o){var s=Z[i];return!!s&&!!s.queryPoint(o,visitInterval)}}function classifyEmpty(i){return 1}},7309:function(i){"use strict";var o=new Float64Array(4),s=new Float64Array(4),x=new Float64Array(4);i.exports=function(i,_,F,N,j){o.length<N.length&&(o=new Float64Array(N.length),s=new Float64Array(N.length),x=new Float64Array(N.length));for(var G,Z,X,J,$,ee=0;ee<N.length;++ee)o[ee]=i[ee]-N[ee],s[ee]=_[ee]-i[ee],x[ee]=F[ee]-i[ee];for(var et=0,er=0,en=0,ei=0,eo=0,es=0,ee=0;ee<N.length;++ee){var el=s[ee],ec=x[ee],eu=o[ee];et+=el*el,er+=el*ec,en+=ec*ec,ei+=eu*el,eo+=eu*ec,es+=eu*eu}var ef=Math.abs(et*en-er*er),eh=er*eo-en*ei,ed=er*ei-et*eo;if(eh+ed<=ef){if(eh<0)ed<0&&ei<0?(ed=0,-ei>=et?(eh=1,G=et+2*ei+es):(eh=-ei/et,G=ei*eh+es)):(eh=0,eo>=0?(ed=0,G=es):-eo>=en?(ed=1,G=en+2*eo+es):(ed=-eo/en,G=eo*ed+es));else if(ed<0)ed=0,ei>=0?(eh=0,G=es):-ei>=et?(eh=1,G=et+2*ei+es):(eh=-ei/et,G=ei*eh+es);else{var ep=1/ef;eh*=ep,ed*=ep,G=eh*(et*eh+er*ed+2*ei)+ed*(er*eh+en*ed+2*eo)+es}}else eh<0?(Z=er+ei,(X=en+eo)>Z?(J=X-Z)>=($=et-2*er+en)?(eh=1,ed=0,G=et+2*ei+es):(ed=1-(eh=J/$),G=eh*(et*eh+er*ed+2*ei)+ed*(er*eh+en*ed+2*eo)+es):(eh=0,X<=0?(ed=1,G=en+2*eo+es):eo>=0?(ed=0,G=es):(ed=-eo/en,G=eo*ed+es))):ed<0?(Z=er+eo,(X=et+ei)>Z?(J=X-Z)>=($=et-2*er+en)?(ed=1,eh=0,G=en+2*eo+es):G=(eh=1-(ed=J/$))*(et*eh+er*ed+2*ei)+ed*(er*eh+en*ed+2*eo)+es:(ed=0,X<=0?(eh=1,G=et+2*ei+es):ei>=0?(eh=0,G=es):(eh=-ei/et,G=ei*eh+es))):(J=en+eo-er-ei)<=0?(eh=0,ed=1,G=en+2*eo+es):J>=($=et-2*er+en)?(eh=1,ed=0,G=et+2*ei+es):(ed=1-(eh=J/$),G=eh*(et*eh+er*ed+2*ei)+ed*(er*eh+en*ed+2*eo)+es);for(var eg=1-eh-ed,ee=0;ee<N.length;++ee)j[ee]=eg*i[ee]+eh*_[ee]+ed*F[ee];return G<0?0:G}},1116:function(i,o,s){i.exports=s(6093)},7584:function(i,o,s){"use strict";var x=s(1539);i.exports=function(i,o){for(var s=i.length,_=Array(s),F=0;F<s;++F)_[F]=x(i[F],o[F]);return _}},2826:function(i,o,s){"use strict";i.exports=function(i){for(var o=Array(i.length),s=0;s<i.length;++s)o[s]=x(i[s]);return o};var x=s(5125)},4469:function(i,o,s){"use strict";var x=s(5125),_=s(3962);i.exports=function(i,o){for(var s=x(o),F=i.length,N=Array(F),j=0;j<F;++j)N[j]=_(i[j],s);return N}},6695:function(i,o,s){"use strict";var x=s(4354);i.exports=function(i,o){for(var s=i.length,_=Array(s),F=0;F<s;++F)_[F]=x(i[F],o[F]);return _}},7037:function(i,o,s){"use strict";var x=s(9209),_=s(1284),F=s(9887);i.exports=function(i){i.sort(_);for(var o=i.length,s=0,N=0;N<o;++N){var j=i[N],G=F(j);if(0!==G){if(s>0){var Z=i[s-1];if(0===x(j,Z)&&F(Z)!==G){s-=1;continue}}i[s++]=j}}return i.length=s,i}},6184:function(i){"use strict";/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var o,s="";i.exports=function(i,x){if("string"!=typeof i)throw TypeError("expected a string");if(1===x)return i;if(2===x)return i+i;var _=i.length*x;if(o!==i||void 0===o)o=i,s="";else if(s.length>=_)return s.substr(0,_);for(;_>s.length&&x>1;)1&x&&(s+=i),x>>=1,i+=i;return s+=i,s=s.substr(0,_)}},8161:function(i,o,s){i.exports=s.g.performance&&s.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(i){"use strict";i.exports=function(i){for(var o=i.length,s=i[i.length-1],x=o,_=o-2;_>=0;--_){var F=s,N=i[_],j=(s=F+N)-F,G=N-j;G&&(i[--x]=s,s=G)}for(var Z=0,_=x;_<o;++_){var F=i[_],N=s,j=(s=F+N)-F,G=N-j;G&&(i[Z++]=G)}return i[Z++]=s,i.length=Z,i}},8167:function(i,o,s){"use strict";var x=s(9660),_=s(9662),F=s(8289),N=s(402);function compileDeterminant(i){return(2===i?function(i,o,s,x){return function(o){return x(i(s(o[0][0],o[1][1]),s(-o[0][1],o[1][0])))}}:3===i?function(i,o,s,x){return function(_){return x(i(o(i(s(_[1][1],_[2][2]),s(-_[1][2],_[2][1])),_[0][0]),i(o(i(s(_[1][0],_[2][2]),s(-_[1][2],_[2][0])),-_[0][1]),o(i(s(_[1][0],_[2][1]),s(-_[1][1],_[2][0])),_[0][2]))))}}:4===i?function(i,o,s,x){return function(_){return x(i(i(o(i(o(i(s(_[2][2],_[3][3]),s(-_[2][3],_[3][2])),_[1][1]),i(o(i(s(_[2][1],_[3][3]),s(-_[2][3],_[3][1])),-_[1][2]),o(i(s(_[2][1],_[3][2]),s(-_[2][2],_[3][1])),_[1][3]))),_[0][0]),o(i(o(i(s(_[2][2],_[3][3]),s(-_[2][3],_[3][2])),_[1][0]),i(o(i(s(_[2][0],_[3][3]),s(-_[2][3],_[3][0])),-_[1][2]),o(i(s(_[2][0],_[3][2]),s(-_[2][2],_[3][0])),_[1][3]))),-_[0][1])),i(o(i(o(i(s(_[2][1],_[3][3]),s(-_[2][3],_[3][1])),_[1][0]),i(o(i(s(_[2][0],_[3][3]),s(-_[2][3],_[3][0])),-_[1][1]),o(i(s(_[2][0],_[3][1]),s(-_[2][1],_[3][0])),_[1][3]))),_[0][2]),o(i(o(i(s(_[2][1],_[3][2]),s(-_[2][2],_[3][1])),_[1][0]),i(o(i(s(_[2][0],_[3][2]),s(-_[2][2],_[3][0])),-_[1][1]),o(i(s(_[2][0],_[3][1]),s(-_[2][1],_[3][0])),_[1][2]))),-_[0][3]))))}}:5===i?function(i,o,s,x){return function(_){return x(i(i(o(i(i(o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][2]),i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),-_[2][3]),o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][4]))),_[1][1]),o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][1]),i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),-_[2][3]),o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),_[2][4]))),-_[1][2])),i(o(i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),_[2][1]),i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),-_[2][2]),o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][4]))),_[1][3]),o(i(o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][1]),i(o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),-_[2][2]),o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][3]))),-_[1][4]))),_[0][0]),o(i(i(o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][2]),i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),-_[2][3]),o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][4]))),_[1][0]),o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][3]),o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),_[2][4]))),-_[1][2])),i(o(i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][2]),o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),_[2][4]))),_[1][3]),o(i(o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][0]),i(o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),-_[2][2]),o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),_[2][3]))),-_[1][4]))),-_[0][1])),i(o(i(i(o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][1]),i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),-_[2][3]),o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),_[2][4]))),_[1][0]),o(i(o(i(s(_[3][3],_[4][4]),s(-_[3][4],_[4][3])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][3]),o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),_[2][4]))),-_[1][1])),i(o(i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][4]))),_[1][3]),o(i(o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][3]))),-_[1][4]))),_[0][2]),i(o(i(i(o(i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),_[2][1]),i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),-_[2][2]),o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][4]))),_[1][0]),o(i(o(i(s(_[3][2],_[4][4]),s(-_[3][4],_[4][2])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][2]),o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),_[2][4]))),-_[1][1])),i(o(i(o(i(s(_[3][1],_[4][4]),s(-_[3][4],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][4]),s(-_[3][4],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][4]))),_[1][2]),o(i(o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][2]))),-_[1][4]))),-_[0][3]),o(i(i(o(i(o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][1]),i(o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),-_[2][2]),o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][3]))),_[1][0]),o(i(o(i(s(_[3][2],_[4][3]),s(-_[3][3],_[4][2])),_[2][0]),i(o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),-_[2][2]),o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),_[2][3]))),-_[1][1])),i(o(i(o(i(s(_[3][1],_[4][3]),s(-_[3][3],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][3]),s(-_[3][3],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][3]))),_[1][2]),o(i(o(i(s(_[3][1],_[4][2]),s(-_[3][2],_[4][1])),_[2][0]),i(o(i(s(_[3][0],_[4][2]),s(-_[3][2],_[4][0])),-_[2][1]),o(i(s(_[3][0],_[4][1]),s(-_[3][1],_[4][0])),_[2][2]))),-_[1][3]))),_[0][4])))))}}:void 0)(_,F,x,N)}var j=[function(){return[0]},function(i){return[i[0][0]]}];function proc(i,o,s,x,_,F,N,j){return function(G){switch(G.length){case 0:return i(G);case 1:return o(G);case 2:return s(G);case 3:return x(G);case 4:return _(G);case 5:return F(G)}var Z=N[G.length];return Z||(Z=N[G.length]=j(G.length)),Z(G)}}!function(){for(;j.length<6;)j.push(compileDeterminant(j.length));i.exports=proc.apply(void 0,j.concat([j,compileDeterminant]));for(var o=0;o<j.length;++o)i.exports[o]=j[o]}()},9130:function(i,o,s){"use strict";var x=s(9660),_=s(9662);i.exports=function(i,o){for(var s=x(i[0],o[0]),F=1;F<i.length;++F)s=_(s,x(i[F],o[F]));return s}},2227:function(i,o,s){"use strict";var x=s(9660),_=s(9662),F=s(4078),N=s(8289);function orientation(i){return(3===i?function(i,o,s,x){return function(_,F,N){var j=s(_[0],_[0]),G=x(j,F[0]),Z=x(j,N[0]),X=s(F[0],F[0]),J=x(X,_[0]),$=x(X,N[0]),ee=s(N[0],N[0]),et=x(ee,_[0]),er=i(o(x(ee,F[0]),$),o(J,G)),en=o(et,Z),ei=o(er,en);return ei[ei.length-1]}}:4===i?function(i,o,s,x){return function(_,F,N,j){var G=i(s(_[0],_[0]),s(_[1],_[1])),Z=x(G,F[0]),X=x(G,N[0]),J=x(G,j[0]),$=i(s(F[0],F[0]),s(F[1],F[1])),ee=x($,_[0]),et=x($,N[0]),er=x($,j[0]),en=i(s(N[0],N[0]),s(N[1],N[1])),ei=x(en,_[0]),eo=x(en,F[0]),es=x(en,j[0]),el=i(s(j[0],j[0]),s(j[1],j[1])),ec=x(el,_[0]),eu=x(el,F[0]),ef=x(el,N[0]),eh=i(i(x(o(ef,es),F[1]),i(x(o(eu,er),-N[1]),x(o(eo,et),j[1]))),i(x(o(eu,er),_[1]),i(x(o(ec,J),-F[1]),x(o(ee,Z),j[1])))),ed=i(i(x(o(ef,es),_[1]),i(x(o(ec,J),-N[1]),x(o(ei,X),j[1]))),i(x(o(eo,et),_[1]),i(x(o(ei,X),-F[1]),x(o(ee,Z),N[1])))),ep=o(eh,ed);return ep[ep.length-1]}}:5===i?function(i,o,s,x){return function(_,F,N,j,G){var Z=i(s(_[0],_[0]),i(s(_[1],_[1]),s(_[2],_[2]))),X=x(Z,F[0]),J=x(Z,N[0]),$=x(Z,j[0]),ee=x(Z,G[0]),et=i(s(F[0],F[0]),i(s(F[1],F[1]),s(F[2],F[2]))),er=x(et,_[0]),en=x(et,N[0]),ei=x(et,j[0]),eo=x(et,G[0]),es=i(s(N[0],N[0]),i(s(N[1],N[1]),s(N[2],N[2]))),el=x(es,_[0]),ec=x(es,F[0]),eu=x(es,j[0]),ef=x(es,G[0]),eh=i(s(j[0],j[0]),i(s(j[1],j[1]),s(j[2],j[2]))),ed=x(eh,_[0]),ep=x(eh,F[0]),eg=x(eh,N[0]),em=x(eh,G[0]),ey=i(s(G[0],G[0]),i(s(G[1],G[1]),s(G[2],G[2]))),ev=x(ey,_[0]),ex=x(ey,F[0]),e_=x(ey,N[0]),ew=x(ey,j[0]),eT=i(i(i(x(i(x(o(ew,em),N[1]),i(x(o(e_,ef),-j[1]),x(o(eg,eu),G[1]))),F[2]),i(x(i(x(o(ew,em),F[1]),i(x(o(ex,eo),-j[1]),x(o(ep,ei),G[1]))),-N[2]),x(i(x(o(e_,ef),F[1]),i(x(o(ex,eo),-N[1]),x(o(ec,en),G[1]))),j[2]))),i(x(i(x(o(eg,eu),F[1]),i(x(o(ep,ei),-N[1]),x(o(ec,en),j[1]))),-G[2]),i(x(i(x(o(ew,em),F[1]),i(x(o(ex,eo),-j[1]),x(o(ep,ei),G[1]))),_[2]),x(i(x(o(ew,em),_[1]),i(x(o(ev,ee),-j[1]),x(o(ed,$),G[1]))),-F[2])))),i(i(x(i(x(o(ex,eo),_[1]),i(x(o(ev,ee),-F[1]),x(o(er,X),G[1]))),j[2]),i(x(i(x(o(ep,ei),_[1]),i(x(o(ed,$),-F[1]),x(o(er,X),j[1]))),-G[2]),x(i(x(o(eg,eu),F[1]),i(x(o(ep,ei),-N[1]),x(o(ec,en),j[1]))),_[2]))),i(x(i(x(o(eg,eu),_[1]),i(x(o(ed,$),-N[1]),x(o(el,J),j[1]))),-F[2]),i(x(i(x(o(ep,ei),_[1]),i(x(o(ed,$),-F[1]),x(o(er,X),j[1]))),N[2]),x(i(x(o(ec,en),_[1]),i(x(o(el,J),-F[1]),x(o(er,X),N[1]))),-j[2]))))),ek=i(i(i(x(i(x(o(ew,em),N[1]),i(x(o(e_,ef),-j[1]),x(o(eg,eu),G[1]))),_[2]),x(i(x(o(ew,em),_[1]),i(x(o(ev,ee),-j[1]),x(o(ed,$),G[1]))),-N[2])),i(x(i(x(o(e_,ef),_[1]),i(x(o(ev,ee),-N[1]),x(o(el,J),G[1]))),j[2]),x(i(x(o(eg,eu),_[1]),i(x(o(ed,$),-N[1]),x(o(el,J),j[1]))),-G[2]))),i(i(x(i(x(o(e_,ef),F[1]),i(x(o(ex,eo),-N[1]),x(o(ec,en),G[1]))),_[2]),x(i(x(o(e_,ef),_[1]),i(x(o(ev,ee),-N[1]),x(o(el,J),G[1]))),-F[2])),i(x(i(x(o(ex,eo),_[1]),i(x(o(ev,ee),-F[1]),x(o(er,X),G[1]))),N[2]),x(i(x(o(ec,en),_[1]),i(x(o(el,J),-F[1]),x(o(er,X),N[1]))),-G[2])))),eA=o(eT,ek);return eA[eA.length-1]}}:function(i,o,s,x){return function(_,F,N,j,G,Z){var X=i(i(s(_[0],_[0]),s(_[1],_[1])),i(s(_[2],_[2]),s(_[3],_[3]))),J=x(X,F[0]),$=x(X,N[0]),ee=x(X,j[0]),et=x(X,G[0]),er=x(X,Z[0]),en=i(i(s(F[0],F[0]),s(F[1],F[1])),i(s(F[2],F[2]),s(F[3],F[3]))),ei=x(en,_[0]),eo=x(en,N[0]),es=x(en,j[0]),el=x(en,G[0]),ec=x(en,Z[0]),eu=i(i(s(N[0],N[0]),s(N[1],N[1])),i(s(N[2],N[2]),s(N[3],N[3]))),ef=x(eu,_[0]),eh=x(eu,F[0]),ed=x(eu,j[0]),ep=x(eu,G[0]),eg=x(eu,Z[0]),em=i(i(s(j[0],j[0]),s(j[1],j[1])),i(s(j[2],j[2]),s(j[3],j[3]))),ey=x(em,_[0]),ev=x(em,F[0]),ex=x(em,N[0]),e_=x(em,G[0]),ew=x(em,Z[0]),eT=i(i(s(G[0],G[0]),s(G[1],G[1])),i(s(G[2],G[2]),s(G[3],G[3]))),ek=x(eT,_[0]),eA=x(eT,F[0]),eS=x(eT,N[0]),eM=x(eT,j[0]),eC=x(eT,Z[0]),eE=i(i(s(Z[0],Z[0]),s(Z[1],Z[1])),i(s(Z[2],Z[2]),s(Z[3],Z[3]))),eL=x(eE,_[0]),eP=x(eE,F[0]),eI=x(eE,N[0]),eO=x(eE,j[0]),eD=x(eE,G[0]),eR=i(i(i(x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),N[2]),x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),G[2]),x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),-Z[2]))),F[3]),i(x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),F[2]),x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),G[2]),x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),-Z[2]))),-N[3]),x(i(i(x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),F[2]),x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),G[2]),x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),-Z[2]))),j[3]))),i(i(x(i(i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),F[2]),x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),j[2]),x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),-Z[2]))),-G[3]),x(i(i(x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),F[2]),x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),-N[2])),i(x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),j[2]),x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),-G[2]))),Z[3])),i(x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),F[2]),x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),G[2]),x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),-Z[2]))),_[3]),x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),G[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-Z[2]))),-F[3])))),i(i(i(x(i(i(x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),G[2]),x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),-Z[2]))),j[3]),x(i(i(x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),_[2]),x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),j[2]),x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),-Z[2]))),-G[3])),i(x(i(i(x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),_[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-F[2])),i(x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),j[2]),x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),-G[2]))),Z[3]),x(i(i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),F[2]),x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),j[2]),x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),-Z[2]))),_[3]))),i(i(x(i(i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),_[2]),x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),j[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-Z[2]))),-F[3]),x(i(i(x(i(x(o(eO,ew),F[1]),i(x(o(eP,ec),-j[1]),x(o(ev,es),Z[1]))),_[2]),x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),j[2]),x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),-Z[2]))),N[3])),i(x(i(i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),_[2]),x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-Z[2]))),-j[3]),x(i(i(x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),_[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-F[2])),i(x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-j[2]))),Z[3]))))),eB=i(i(i(x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),N[2]),x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),G[2]),x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),-Z[2]))),_[3]),i(x(i(i(x(i(x(o(eD,eC),j[1]),i(x(o(eO,ew),-G[1]),x(o(eM,e_),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-j[2])),i(x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),G[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-Z[2]))),-N[3]),x(i(i(x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),G[2]),x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),-Z[2]))),j[3]))),i(i(x(i(i(x(i(x(o(eO,ew),N[1]),i(x(o(eI,eg),-j[1]),x(o(ex,ed),Z[1]))),_[2]),x(i(x(o(eO,ew),_[1]),i(x(o(eL,er),-j[1]),x(o(ey,ee),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),j[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-Z[2]))),-G[3]),x(i(i(x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),_[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-N[2])),i(x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),j[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-G[2]))),Z[3])),i(x(i(i(x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),F[2]),x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),G[2]),x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),-Z[2]))),_[3]),x(i(i(x(i(x(o(eD,eC),N[1]),i(x(o(eI,eg),-G[1]),x(o(eS,ep),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-N[2])),i(x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),G[2]),x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),-Z[2]))),-F[3])))),i(i(i(x(i(i(x(i(x(o(eD,eC),F[1]),i(x(o(eP,ec),-G[1]),x(o(eA,el),Z[1]))),_[2]),x(i(x(o(eD,eC),_[1]),i(x(o(eL,er),-G[1]),x(o(ek,et),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),G[2]),x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),-Z[2]))),N[3]),x(i(i(x(i(x(o(eI,eg),F[1]),i(x(o(eP,ec),-N[1]),x(o(eh,eo),Z[1]))),_[2]),x(i(x(o(eI,eg),_[1]),i(x(o(eL,er),-N[1]),x(o(ef,$),Z[1]))),-F[2])),i(x(i(x(o(eP,ec),_[1]),i(x(o(eL,er),-F[1]),x(o(ei,J),Z[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-Z[2]))),-G[3])),i(x(i(i(x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),_[2]),x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),-F[2])),i(x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-G[2]))),Z[3]),x(i(i(x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),F[2]),x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),-N[2])),i(x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),j[2]),x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),-G[2]))),_[3]))),i(i(x(i(i(x(i(x(o(eM,e_),N[1]),i(x(o(eS,ep),-j[1]),x(o(ex,ed),G[1]))),_[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-N[2])),i(x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),j[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-G[2]))),-F[3]),x(i(i(x(i(x(o(eM,e_),F[1]),i(x(o(eA,el),-j[1]),x(o(ev,es),G[1]))),_[2]),x(i(x(o(eM,e_),_[1]),i(x(o(ek,et),-j[1]),x(o(ey,ee),G[1]))),-F[2])),i(x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),j[2]),x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),-G[2]))),N[3])),i(x(i(i(x(i(x(o(eS,ep),F[1]),i(x(o(eA,el),-N[1]),x(o(eh,eo),G[1]))),_[2]),x(i(x(o(eS,ep),_[1]),i(x(o(ek,et),-N[1]),x(o(ef,$),G[1]))),-F[2])),i(x(i(x(o(eA,el),_[1]),i(x(o(ek,et),-F[1]),x(o(ei,J),G[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-G[2]))),-j[3]),x(i(i(x(i(x(o(ex,ed),F[1]),i(x(o(ev,es),-N[1]),x(o(eh,eo),j[1]))),_[2]),x(i(x(o(ex,ed),_[1]),i(x(o(ey,ee),-N[1]),x(o(ef,$),j[1]))),-F[2])),i(x(i(x(o(ev,es),_[1]),i(x(o(ey,ee),-F[1]),x(o(ei,J),j[1]))),N[2]),x(i(x(o(eh,eo),_[1]),i(x(o(ef,$),-F[1]),x(o(ei,J),N[1]))),-j[2]))),G[3]))))),ez=o(eR,eB);return ez[ez.length-1]}})(_,F,x,N)}var j=[function(){return 0},function(){return 0},function(){return 0}];function slowInSphere(i){var o=j[i.length];return o||(o=j[i.length]=orientation(i.length)),o.apply(void 0,i)}function proc(i,o,s,x,_,F,N,j){return function(o,s,G,Z,X,J){switch(arguments.length){case 0:case 1:return 0;case 2:return x(o,s);case 3:return _(o,s,G);case 4:return F(o,s,G,Z);case 5:return N(o,s,G,Z,X);case 6:return j(o,s,G,Z,X,J)}for(var $=Array(arguments.length),ee=0;ee<arguments.length;++ee)$[ee]=arguments[ee];return i($)}}!function(){for(;j.length<=6;)j.push(orientation(j.length));i.exports=proc.apply(void 0,[slowInSphere].concat(j));for(var o=0;o<=6;++o)i.exports[o]=j[o]}()},6606:function(i,o,s){"use strict";var x=s(8167);function generateSolver(i){return(2===i?solve2d:3===i?solve3d:4===i?solve4d:5===i?solve5d:solve6d)(i<6?x[i]:x)}function solve2d(i){return function(o,s){return[i([[+s[0],+o[0][1]],[+s[1],+o[1][1]]]),i([[+o[0][0],+s[0]],[+o[1][0],+s[1]]]),i(o)]}}function solve3d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2]],[+s[1],+o[1][1],+o[1][2]],[+s[2],+o[2][1],+o[2][2]]]),i([[+o[0][0],+s[0],+o[0][2]],[+o[1][0],+s[1],+o[1][2]],[+o[2][0],+s[2],+o[2][2]]]),i([[+o[0][0],+o[0][1],+s[0]],[+o[1][0],+o[1][1],+s[1]],[+o[2][0],+o[2][1],+s[2]]]),i(o)]}}function solve4d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3]],[+s[1],+o[1][1],+o[1][2],+o[1][3]],[+s[2],+o[2][1],+o[2][2],+o[2][3]],[+s[3],+o[3][1],+o[3][2],+o[3][3]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3]],[+o[1][0],+s[1],+o[1][2],+o[1][3]],[+o[2][0],+s[2],+o[2][2],+o[2][3]],[+o[3][0],+s[3],+o[3][2],+o[3][3]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3]],[+o[1][0],+o[1][1],+s[1],+o[1][3]],[+o[2][0],+o[2][1],+s[2],+o[2][3]],[+o[3][0],+o[3][1],+s[3],+o[3][3]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+s[3]]]),i(o)]}}function solve5d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4]],[+s[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4]],[+s[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4]],[+s[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4]],[+s[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3],+o[0][4]],[+o[1][0],+s[1],+o[1][2],+o[1][3],+o[1][4]],[+o[2][0],+s[2],+o[2][2],+o[2][3],+o[2][4]],[+o[3][0],+s[3],+o[3][2],+o[3][3],+o[3][4]],[+o[4][0],+s[4],+o[4][2],+o[4][3],+o[4][4]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3],+o[0][4]],[+o[1][0],+o[1][1],+s[1],+o[1][3],+o[1][4]],[+o[2][0],+o[2][1],+s[2],+o[2][3],+o[2][4]],[+o[3][0],+o[3][1],+s[3],+o[3][3],+o[3][4]],[+o[4][0],+o[4][1],+s[4],+o[4][3],+o[4][4]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0],+o[0][4]],[+o[1][0],+o[1][1],+o[1][2],+s[1],+o[1][4]],[+o[2][0],+o[2][1],+o[2][2],+s[2],+o[2][4]],[+o[3][0],+o[3][1],+o[3][2],+s[3],+o[3][4]],[+o[4][0],+o[4][1],+o[4][2],+s[4],+o[4][4]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+s[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+s[4]]]),i(o)]}}function solve6d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+s[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+s[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+s[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+s[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+s[5],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+s[1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+s[2],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+s[3],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+s[4],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+s[5],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+s[1],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+s[2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+s[3],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+s[4],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+s[5],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+s[1],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+s[2],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+s[3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+s[4],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+s[5],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+s[0],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+s[1],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+s[2],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+s[3],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+s[4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+s[5],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+s[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+s[4]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+s[5]]]),i(o)]}}var _=[function(){return[[0]]},function(i,o){return[[o[0]],[i[0][0]]]}];function proc(i,o,s,x,_,F,N,j){return function(G,Z){switch(G.length){case 0:return i(G,Z);case 1:return o(G,Z);case 2:return s(G,Z);case 3:return x(G,Z);case 4:return _(G,Z);case 5:return F(G,Z)}var X=N[G.length];return X||(X=N[G.length]=j(G.length)),X(G,Z)}}!function(){for(;_.length<6;)_.push(generateSolver(_.length));i.exports=proc.apply(void 0,_.concat([_,generateSolver]));for(var o=0;o<6;++o)i.exports[o]=_[o]}()},417:function(i,o,s){"use strict";var x=s(9660),_=s(9662),F=s(8289),N=s(4078),j=(3+17763568394002505e-31)*11102230246251565e-32,G=(7+6217248937900877e-30)*11102230246251565e-32;function orientation(i){return(3===i?function(i,o,s,x){return function(s,_,F){var N=x(i(i(o(_[1],F[0]),o(-F[1],_[0])),i(o(s[1],_[0]),o(-_[1],s[0]))),i(o(s[1],F[0]),o(-F[1],s[0])));return N[N.length-1]}}:4===i?function(i,o,s,x){return function(_,F,N,j){var G=x(i(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2]))),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),j[2])))),i(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-N[2]),s(i(o(_[1],N[0]),o(-N[1],_[0])),j[2]))),i(s(i(o(F[1],N[0]),o(-N[1],F[0])),_[2]),i(s(i(o(_[1],N[0]),o(-N[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),N[2])))));return G[G.length-1]}}:function(i,o,s,x){return function(_,F,N,j,G){var Z=x(i(i(i(s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),N[2]),i(s(i(o(N[1],G[0]),o(-G[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),G[2]))),F[3]),i(s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),F[2]),i(s(i(o(F[1],G[0]),o(-G[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),G[2]))),-N[3]),s(i(s(i(o(N[1],G[0]),o(-G[1],N[0])),F[2]),i(s(i(o(F[1],G[0]),o(-G[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),G[2]))),j[3]))),i(s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2]))),-G[3]),i(s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),F[2]),i(s(i(o(F[1],G[0]),o(-G[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),G[2]))),_[3]),s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-j[2]),s(i(o(_[1],j[0]),o(-j[1],_[0])),G[2]))),-F[3])))),i(i(s(i(s(i(o(F[1],G[0]),o(-G[1],F[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),G[2]))),j[3]),i(s(i(s(i(o(F[1],j[0]),o(-j[1],F[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),j[2]))),-G[3]),s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2]))),_[3]))),i(s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-N[2]),s(i(o(_[1],N[0]),o(-N[1],_[0])),j[2]))),-F[3]),i(s(i(s(i(o(F[1],j[0]),o(-j[1],F[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),j[2]))),N[3]),s(i(s(i(o(F[1],N[0]),o(-N[1],F[0])),_[2]),i(s(i(o(_[1],N[0]),o(-N[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),N[2]))),-j[3]))))),i(i(i(s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),N[2]),i(s(i(o(N[1],G[0]),o(-G[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),G[2]))),_[3]),s(i(s(i(o(j[1],G[0]),o(-G[1],j[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-j[2]),s(i(o(_[1],j[0]),o(-j[1],_[0])),G[2]))),-N[3])),i(s(i(s(i(o(N[1],G[0]),o(-G[1],N[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-N[2]),s(i(o(_[1],N[0]),o(-N[1],_[0])),G[2]))),j[3]),s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),_[2]),i(s(i(o(_[1],j[0]),o(-j[1],_[0])),-N[2]),s(i(o(_[1],N[0]),o(-N[1],_[0])),j[2]))),-G[3]))),i(i(s(i(s(i(o(N[1],G[0]),o(-G[1],N[0])),F[2]),i(s(i(o(F[1],G[0]),o(-G[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),G[2]))),_[3]),s(i(s(i(o(N[1],G[0]),o(-G[1],N[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-N[2]),s(i(o(_[1],N[0]),o(-N[1],_[0])),G[2]))),-F[3])),i(s(i(s(i(o(F[1],G[0]),o(-G[1],F[0])),_[2]),i(s(i(o(_[1],G[0]),o(-G[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),G[2]))),N[3]),s(i(s(i(o(F[1],N[0]),o(-N[1],F[0])),_[2]),i(s(i(o(_[1],N[0]),o(-N[1],_[0])),-F[2]),s(i(o(_[1],F[0]),o(-F[1],_[0])),N[2]))),-G[3])))));return Z[Z.length-1]}})(_,x,F,N)}var Z=orientation(3),X=orientation(4),J=[function(){return 0},function(){return 0},function(i,o){return o[0]-i[0]},function(i,o,s){var x,_=(i[1]-s[1])*(o[0]-s[0]),F=(i[0]-s[0])*(o[1]-s[1]),N=_-F;if(_>0){if(F<=0)return N;x=_+F}else{if(!(_<0)||F>=0)return N;x=-(_+F)}var G=j*x;return N>=G||N<=-G?N:Z(i,o,s)},function(i,o,s,x){var _=i[0]-x[0],F=o[0]-x[0],N=s[0]-x[0],j=i[1]-x[1],Z=o[1]-x[1],J=s[1]-x[1],$=i[2]-x[2],ee=o[2]-x[2],et=s[2]-x[2],er=F*J,en=N*Z,ei=N*j,eo=_*J,es=_*Z,el=F*j,ec=$*(er-en)+ee*(ei-eo)+et*(es-el),eu=G*((Math.abs(er)+Math.abs(en))*Math.abs($)+(Math.abs(ei)+Math.abs(eo))*Math.abs(ee)+(Math.abs(es)+Math.abs(el))*Math.abs(et));return ec>eu||-ec>eu?ec:X(i,o,s,x)}];function slowOrient(i){var o=J[i.length];return o||(o=J[i.length]=orientation(i.length)),o.apply(void 0,i)}function proc(i,o,s,x,_,F,N){return function(o,s,j,G,Z){switch(arguments.length){case 0:case 1:return 0;case 2:return x(o,s);case 3:return _(o,s,j);case 4:return F(o,s,j,G);case 5:return N(o,s,j,G,Z)}for(var X=Array(arguments.length),J=0;J<arguments.length;++J)X[J]=arguments[J];return i(X)}}!function(){for(;J.length<=5;)J.push(orientation(J.length));i.exports=proc.apply(void 0,[slowOrient].concat(J));for(var o=0;o<=5;++o)i.exports[o]=J[o]}()},2019:function(i,o,s){"use strict";var x=s(9662),_=s(8289);i.exports=function(i,o){if(1===i.length)return _(o,i[0]);if(1===o.length)return _(i,o[0]);if(0===i.length||0===o.length)return[0];var s=[0];if(i.length<o.length)for(var F=0;F<i.length;++F)s=x(s,_(o,i[F]));else for(var F=0;F<o.length;++F)s=x(s,_(i,o[F]));return s}},8289:function(i,o,s){"use strict";var x=s(9660),_=s(87);i.exports=function(i,o){var s=i.length;if(1===s){var F=x(i[0],o);return F[0]?F:[F[1]]}var N=Array(2*s),j=[.1,.1],G=[.1,.1],Z=0;x(i[0],o,j),j[0]&&(N[Z++]=j[0]);for(var X=1;X<s;++X){x(i[X],o,G),_(j[1],G[0],j),j[0]&&(N[Z++]=j[0]);var J=G[1],$=j[1],ee=J+$,et=$-(ee-J);j[1]=ee,et&&(N[Z++]=et)}return j[1]&&(N[Z++]=j[1]),0===Z&&(N[Z++]=0),N.length=Z,N}},4434:function(i,o,s){"use strict";i.exports=function(i,o,s,_){var F=x(i,s,_),N=x(o,s,_);if(F>0&&N>0||F<0&&N<0)return!1;var j=x(s,i,o),G=x(_,i,o);return(!(j>0)||!(G>0))&&(!(j<0)||!(G<0))&&(0!==F||0!==N||0!==j||0!==G||function(i,o,s,x){for(var _=0;_<2;++_){var F=i[_],N=o[_],j=Math.min(F,N),G=Math.max(F,N),Z=s[_],X=x[_],J=Math.min(Z,X);if(Math.max(Z,X)<j||G<J)return!1}return!0}(i,o,s,_))};var x=s(417)[3]},4078:function(i){"use strict";i.exports=function(i,o){var s,x,_,F,N,j,G,Z,X,J,$,ee=0|i.length,et=0|o.length;if(1===ee&&1===et)return F=(_=(s=i[0])+(x=-o[0]))-s,(N=s-(_-F)+(x-F))?[N,_]:[_];var er=Array(ee+et),en=0,ei=0,eo=0,es=Math.abs,el=i[0],ec=es(el),eu=-o[eo],ef=es(eu);ec<ef?(G=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(G=eu,(eo+=1)<et&&(ef=es(eu=-o[eo]))),ei<ee&&ec<ef||eo>=et?(j=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(j=eu,(eo+=1)<et&&(ef=es(eu=-o[eo])));for(var eh=j+G,ed=eh-j,ep=G-ed,eg=ep,em=eh;ei<ee&&eo<et;)ec<ef?(j=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(j=eu,(eo+=1)<et&&(ef=es(eu=-o[eo]))),ed=(eh=j+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z;for(;ei<ee;)ed=(eh=(j=el)+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z,(ei+=1)<ee&&(el=i[ei]);for(;eo<et;)ed=(eh=(j=eu)+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z,(eo+=1)<et&&(eu=-o[eo]);return eg&&(er[en++]=eg),em&&(er[en++]=em),en||(er[en++]=0),er.length=en,er}},9662:function(i){"use strict";i.exports=function(i,o){var s,x,_,F,N,j,G,Z,X,J,$,ee=0|i.length,et=0|o.length;if(1===ee&&1===et)return F=(_=(s=i[0])+(x=o[0]))-s,(N=s-(_-F)+(x-F))?[N,_]:[_];var er=Array(ee+et),en=0,ei=0,eo=0,es=Math.abs,el=i[0],ec=es(el),eu=o[eo],ef=es(eu);ec<ef?(G=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(G=eu,(eo+=1)<et&&(ef=es(eu=o[eo]))),ei<ee&&ec<ef||eo>=et?(j=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(j=eu,(eo+=1)<et&&(ef=es(eu=o[eo])));for(var eh=j+G,ed=eh-j,ep=G-ed,eg=ep,em=eh;ei<ee&&eo<et;)ec<ef?(j=el,(ei+=1)<ee&&(ec=es(el=i[ei]))):(j=eu,(eo+=1)<et&&(ef=es(eu=o[eo]))),ed=(eh=j+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z;for(;ei<ee;)ed=(eh=(j=el)+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z,(ei+=1)<ee&&(el=i[ei]);for(;eo<et;)ed=(eh=(j=eu)+(G=eg))-j,(ep=G-ed)&&(er[en++]=ep),X=(Z=em+eh)-em,eg=em-(Z-X)+(eh-X),em=Z,(eo+=1)<et&&(eu=o[eo]);return eg&&(er[en++]=eg),em&&(er[en++]=em),en||(er[en++]=0),er.length=en,er}},8691:function(i,o,s){"use strict";i.exports=function(i){return _(x(i))};var x=s(2692),_=s(7037)},7212:function(i,o,s){"use strict";i.exports=function(i,o,s,j){if(s=s||0,void 0===j&&(j=function(i){for(var o=i.length,s=0,x=0;x<o;++x)s=0|Math.max(s,i[x].length);return s-1}(i)),0===i.length||j<1)return{cells:[],vertexIds:[],vertexWeights:[]};var G=function(i,o){for(var s=i.length,x=_.mallocUint8(s),F=0;F<s;++F)x[F]=i[F]<o|0;return x}(o,+s),Z=function(i,o){for(var s=i.length,N=o*(o+1)/2*s|0,j=_.mallocUint32(2*N),G=0,Z=0;Z<s;++Z)for(var X=i[Z],o=X.length,J=0;J<o;++J)for(var $=0;$<J;++$){var ee=X[$],et=X[J];j[G++]=0|Math.min(ee,et),j[G++]=0|Math.max(ee,et)}F(x(j,[G/2|0,2]));for(var er=2,Z=2;Z<G;Z+=2)(j[Z-2]!==j[Z]||j[Z-1]!==j[Z+1])&&(j[er++]=j[Z],j[er++]=j[Z+1]);return x(j,[er/2|0,2])}(i,j),X=function(i,o,s,F){for(var N=i.data,j=i.shape[0],G=_.mallocDouble(j),Z=0,X=0;X<j;++X){var J=N[2*X],$=N[2*X+1];if(s[J]!==s[$]){var ee=o[J],et=o[$];N[2*Z]=J,N[2*Z+1]=$,G[Z++]=(et-F)/(et-ee)}}return i.shape[0]=Z,x(G,[Z])}(Z,o,G,+s),J=function(i,o){var s=_.mallocInt32(2*o),x=i.shape[0],F=i.data;s[0]=0;for(var N=0,j=0;j<x;++j){var G=F[2*j];if(G!==N){for(s[2*N+1]=j;++N<G;)s[2*N]=j,s[2*N+1]=j;s[2*N]=j}}for(s[2*N+1]=x;++N<o;)s[2*N]=s[2*N+1]=x;return s}(Z,0|o.length),$=N(j)(i,Z.data,J,G),ee=function(i){for(var o=0|i.shape[0],s=i.data,x=Array(o),_=0;_<o;++_)x[_]=[s[2*_],s[2*_+1]];return x}(Z),et=[].slice.call(X.data,0,X.shape[0]);return _.free(G),_.free(Z.data),_.free(X.data),_.free(J),{cells:$,vertexIds:ee,vertexWeights:et}};var x=s(5050),_=s(5306),F=s(8729),N=s(1168)},1168:function(i){"use strict";i.exports=function(i){return o[i]()};var o=[function(){return function(i,o,s,x){for(var _=i.length,F=0;F<_;++F)i[F].length;return[]}},function(){function B(i,o,s,x){for(var _=0|Math.min(s,x),F=0|Math.max(s,x),N=i[2*_],j=i[2*_+1];N<j;){var G=N+j>>1,Z=o[2*G+1];if(Z===F)return G;F<Z?j=G:N=G+1}return N}return function(i,o,s,x){for(var _=i.length,F=[],N=0;N<_;++N){var j=i[N];if(2===j.length){var G=(x[j[0]]<<0)+(x[j[1]]<<1);if(0===G||3===G)continue;switch(G){case 0:break;case 1:F.push([B(s,o,j[0],j[1])]);break;case 2:F.push([B(s,o,j[1],j[0])])}}}return F}},function(){function B(i,o,s,x){for(var _=0|Math.min(s,x),F=0|Math.max(s,x),N=i[2*_],j=i[2*_+1];N<j;){var G=N+j>>1,Z=o[2*G+1];if(Z===F)return G;F<Z?j=G:N=G+1}return N}return function(i,o,s,x){for(var _=i.length,F=[],N=0;N<_;++N){var j=i[N],G=j.length;if(3===G){var Z=(x[j[0]]<<0)+(x[j[1]]<<1)+(x[j[2]]<<2);if(0===Z||7===Z)continue;switch(Z){case 0:break;case 1:F.push([B(s,o,j[0],j[2]),B(s,o,j[0],j[1])]);break;case 2:F.push([B(s,o,j[1],j[0]),B(s,o,j[1],j[2])]);break;case 3:F.push([B(s,o,j[0],j[2]),B(s,o,j[1],j[2])]);break;case 4:F.push([B(s,o,j[2],j[1]),B(s,o,j[2],j[0])]);break;case 5:F.push([B(s,o,j[2],j[1]),B(s,o,j[0],j[1])]);break;case 6:F.push([B(s,o,j[1],j[0]),B(s,o,j[2],j[0])])}}else if(2===G){var Z=(x[j[0]]<<0)+(x[j[1]]<<1);if(0===Z||3===Z)continue;switch(Z){case 0:break;case 1:F.push([B(s,o,j[0],j[1])]);break;case 2:F.push([B(s,o,j[1],j[0])])}}}return F}},function(){function B(i,o,s,x){for(var _=0|Math.min(s,x),F=0|Math.max(s,x),N=i[2*_],j=i[2*_+1];N<j;){var G=N+j>>1,Z=o[2*G+1];if(Z===F)return G;F<Z?j=G:N=G+1}return N}return function(i,o,s,x){for(var _=i.length,F=[],N=0;N<_;++N){var j=i[N],G=j.length;if(4===G){var Z=(x[j[0]]<<0)+(x[j[1]]<<1)+(x[j[2]]<<2)+(x[j[3]]<<3);if(0===Z||15===Z)continue;switch(Z){case 0:break;case 1:F.push([B(s,o,j[0],j[1]),B(s,o,j[0],j[2]),B(s,o,j[0],j[3])]);break;case 2:F.push([B(s,o,j[1],j[2]),B(s,o,j[1],j[0]),B(s,o,j[1],j[3])]);break;case 3:F.push([B(s,o,j[1],j[2]),B(s,o,j[0],j[2]),B(s,o,j[0],j[3])],[B(s,o,j[1],j[3]),B(s,o,j[1],j[2]),B(s,o,j[0],j[3])]);break;case 4:F.push([B(s,o,j[2],j[0]),B(s,o,j[2],j[1]),B(s,o,j[2],j[3])]);break;case 5:F.push([B(s,o,j[0],j[1]),B(s,o,j[2],j[1]),B(s,o,j[0],j[3])],[B(s,o,j[2],j[1]),B(s,o,j[2],j[3]),B(s,o,j[0],j[3])]);break;case 6:F.push([B(s,o,j[2],j[0]),B(s,o,j[1],j[0]),B(s,o,j[1],j[3])],[B(s,o,j[2],j[3]),B(s,o,j[2],j[0]),B(s,o,j[1],j[3])]);break;case 7:F.push([B(s,o,j[0],j[3]),B(s,o,j[1],j[3]),B(s,o,j[2],j[3])]);break;case 8:F.push([B(s,o,j[3],j[1]),B(s,o,j[3],j[0]),B(s,o,j[3],j[2])]);break;case 9:F.push([B(s,o,j[3],j[1]),B(s,o,j[0],j[1]),B(s,o,j[0],j[2])],[B(s,o,j[3],j[2]),B(s,o,j[3],j[1]),B(s,o,j[0],j[2])]);break;case 10:F.push([B(s,o,j[1],j[0]),B(s,o,j[3],j[0]),B(s,o,j[1],j[2])],[B(s,o,j[3],j[0]),B(s,o,j[3],j[2]),B(s,o,j[1],j[2])]);break;case 11:F.push([B(s,o,j[1],j[2]),B(s,o,j[0],j[2]),B(s,o,j[3],j[2])]);break;case 12:F.push([B(s,o,j[3],j[0]),B(s,o,j[2],j[0]),B(s,o,j[2],j[1])],[B(s,o,j[3],j[1]),B(s,o,j[3],j[0]),B(s,o,j[2],j[1])]);break;case 13:F.push([B(s,o,j[0],j[1]),B(s,o,j[2],j[1]),B(s,o,j[3],j[1])]);break;case 14:F.push([B(s,o,j[2],j[0]),B(s,o,j[1],j[0]),B(s,o,j[3],j[0])])}}else if(3===G){var Z=(x[j[0]]<<0)+(x[j[1]]<<1)+(x[j[2]]<<2);if(0===Z||7===Z)continue;switch(Z){case 0:break;case 1:F.push([B(s,o,j[0],j[2]),B(s,o,j[0],j[1])]);break;case 2:F.push([B(s,o,j[1],j[0]),B(s,o,j[1],j[2])]);break;case 3:F.push([B(s,o,j[0],j[2]),B(s,o,j[1],j[2])]);break;case 4:F.push([B(s,o,j[2],j[1]),B(s,o,j[2],j[0])]);break;case 5:F.push([B(s,o,j[2],j[1]),B(s,o,j[0],j[1])]);break;case 6:F.push([B(s,o,j[1],j[0]),B(s,o,j[2],j[0])])}}else if(2===G){var Z=(x[j[0]]<<0)+(x[j[1]]<<1);if(0===Z||3===Z)continue;switch(Z){case 0:break;case 1:F.push([B(s,o,j[0],j[1])]);break;case 2:F.push([B(s,o,j[1],j[0])])}}}return F}}]},8211:function(i,o,s){"use strict";function compareCells(i,o){var s=i.length,x=i.length-o.length,_=Math.min;if(x)return x;switch(s){case 0:return 0;case 1:return i[0]-o[0];case 2:var F=i[0]+i[1]-o[0]-o[1];if(F)return F;return _(i[0],i[1])-_(o[0],o[1]);case 3:var N=i[0]+i[1],j=o[0]+o[1];if(F=N+i[2]-(j+o[2]))return F;var G=_(i[0],i[1]),Z=_(o[0],o[1]),F=_(G,i[2])-_(Z,o[2]);if(F)return F;return _(G+i[2],N)-_(Z+o[2],j);default:var X=i.slice(0);X.sort();var J=o.slice(0);J.sort();for(var $=0;$<s;++$)if(x=X[$]-J[$])return x;return 0}}s(2288);s(1731),o.H=compareCells},9392:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,x=o,_=7;for(s>>>=1;s;s>>>=1)x<<=1,x|=1&s,--_;i[o]=x<<_&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},6656:function(i,o,s){"use strict";var x=s(9392),_=s(9521);function compareCells(i,o){var s=i.length,x=i.length-o.length,_=Math.min;if(x)return x;switch(s){case 0:return 0;case 1:return i[0]-o[0];case 2:var F=i[0]+i[1]-o[0]-o[1];if(F)return F;return _(i[0],i[1])-_(o[0],o[1]);case 3:var N=i[0]+i[1],j=o[0]+o[1];if(F=N+i[2]-(j+o[2]))return F;var G=_(i[0],i[1]),Z=_(o[0],o[1]),F=_(G,i[2])-_(Z,o[2]);if(F)return F;return _(G+i[2],N)-_(Z+o[2],j);default:var X=i.slice(0);X.sort();var J=o.slice(0);J.sort();for(var $=0;$<s;++$)if(x=X[$]-J[$])return x;return 0}}function compareZipped(i,o){return compareCells(i[0],o[0])}function normalize(i,o){if(!o)return i.sort(compareCells),i;for(var s=i.length,x=Array(s),_=0;_<s;++_)x[_]=[i[_],o[_]];x.sort(compareZipped);for(var _=0;_<s;++_)i[_]=x[_][0],o[_]=x[_][1];return i}function unique(i){if(0===i.length)return[];for(var o=1,s=i.length,x=1;x<s;++x){var _=i[x];if(compareCells(_,i[x-1])){if(x===o){o++;continue}i[o++]=_}}return i.length=o,i}function findCell(i,o){for(var s=0,x=i.length-1,_=-1;s<=x;){var F=s+x>>1,N=compareCells(i[F],o);N<=0?(0===N&&(_=F),s=F+1):N>0&&(x=F-1)}return _}function incidence(i,o){for(var s=Array(i.length),_=0,F=s.length;_<F;++_)s[_]=[];for(var N=[],_=0,j=o.length;_<j;++_)for(var G=o[_],Z=G.length,X=1,J=1<<Z;X<J;++X){N.length=x.popCount(X);for(var $=0,ee=0;ee<Z;++ee)X&1<<ee&&(N[$++]=G[ee]);var et=findCell(i,N);if(!(et<0))for(;s[et++].push(_),!(et>=i.length)&&0===compareCells(i[et],N););}return s}function skeleton(i,o){if(o<0)return[];for(var s=[],_=(1<<o+1)-1,F=0;F<i.length;++F)for(var N=i[F],j=_;j<1<<N.length;j=x.nextCombination(j)){for(var G=Array(o+1),Z=0,X=0;X<N.length;++X)j&1<<X&&(G[Z++]=N[X]);s.push(G)}return normalize(s)}o.dimension=function(i){for(var o=0,s=Math.max,x=0,_=i.length;x<_;++x)o=s(o,i[x].length);return o-1},o.countVertices=function(i){for(var o=-1,s=Math.max,x=0,_=i.length;x<_;++x)for(var F=i[x],N=0,j=F.length;N<j;++N)o=s(o,F[N]);return o+1},o.cloneCells=function(i){for(var o=Array(i.length),s=0,x=i.length;s<x;++s)o[s]=i[s].slice(0);return o},o.compareCells=compareCells,o.normalize=normalize,o.unique=unique,o.findCell=findCell,o.incidence=incidence,o.dual=function(i,o){if(!o)return incidence(unique(skeleton(i,0)),i,0);for(var s=Array(o),x=0;x<o;++x)s[x]=[];for(var x=0,_=i.length;x<_;++x)for(var F=i[x],N=0,j=F.length;N<j;++N)s[F[N]].push(x);return s},o.explode=function(i){for(var o=[],s=0,x=i.length;s<x;++s)for(var _=i[s],F=0|_.length,N=1,j=1<<F;N<j;++N){for(var G=[],Z=0;Z<F;++Z)N>>>Z&1&&G.push(_[Z]);o.push(G)}return normalize(o)},o.skeleton=skeleton,o.boundary=function(i){for(var o=[],s=0,x=i.length;s<x;++s)for(var _=i[s],F=0,N=_.length;F<N;++F){for(var j=Array(_.length-1),G=0,Z=0;G<N;++G)G!==F&&(j[Z++]=_[G]);o.push(j)}return normalize(o)},o.connectedComponents=function(i,o){return o?function(i,o){for(var s=new _(o),x=0;x<i.length;++x)for(var F=i[x],N=0;N<F.length;++N)for(var j=N+1;j<F.length;++j)s.link(F[N],F[j]);for(var G=[],Z=s.ranks,x=0;x<Z.length;++x)Z[x]=-1;for(var x=0;x<i.length;++x){var X=s.find(i[x][0]);Z[X]<0?(Z[X]=G.length,G.push([i[x].slice(0)])):G[Z[X]].push(i[x].slice(0))}return G}(i,o):function(i){for(var o=unique(normalize(skeleton(i,0))),s=new _(o.length),x=0;x<i.length;++x)for(var F=i[x],N=0;N<F.length;++N)for(var j=findCell(o,[F[N]]),G=N+1;G<F.length;++G)s.link(j,findCell(o,[F[G]]));for(var Z=[],X=s.ranks,x=0;x<X.length;++x)X[x]=-1;for(var x=0;x<i.length;++x){var J=s.find(findCell(o,[i[x][0]]));X[J]<0?(X[J]=Z.length,Z.push([i[x].slice(0)])):Z[X[J]].push(i[x].slice(0))}return Z}(i)}},9521:function(i){"use strict";function UnionFind(i){this.roots=Array(i),this.ranks=Array(i);for(var o=0;o<i;++o)this.roots[o]=o,this.ranks[o]=0}i.exports=UnionFind,UnionFind.prototype.length=function(){return this.roots.length},UnionFind.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},UnionFind.prototype.find=function(i){for(var o=this.roots;o[i]!==i;){var s=o[i];o[i]=o[s],i=s}return i},UnionFind.prototype.link=function(i,o){var s=this.find(i),x=this.find(o);if(s!==x){var _=this.ranks,F=this.roots,N=_[s],j=_[x];N<j?F[s]=x:j<N?F[x]=s:(F[x]=s,++_[s])}}},8243:function(i,o,s){"use strict";i.exports=function(i,o,s){for(var F=o.length,N=i.length,j=Array(F),G=Array(F),Z=Array(F),X=Array(F),J=0;J<F;++J)j[J]=G[J]=-1,Z[J]=1/0,X[J]=!1;for(var J=0;J<N;++J){var $=i[J];if(2!==$.length)throw Error("Input must be a graph");var ee=$[1],et=$[0];-1!==G[et]?G[et]=-2:G[et]=ee,-1!==j[ee]?j[ee]=-2:j[ee]=et}function computeWeight(i){if(X[i])return 1/0;var s,_,F=j[i],N=G[i];return F<0||N<0?1/0:Math.abs(x(o[i],s=o[F],_=o[N]))/Math.sqrt(Math.pow(s[0]-_[0],2)+Math.pow(s[1]-_[1],2))}function heapSwap(i,o){var s=er[i],x=er[o];er[i]=x,er[o]=s,en[s]=o,en[x]=i}function heapWeight(i){return Z[er[i]]}function heapDown(i){for(var o=heapWeight(i);;){var s=o,x=2*i+1,_=2*(i+1),F=i;if(x<ei){var N=heapWeight(x);N<s&&(F=x,s=N)}if(_<ei&&heapWeight(_)<s&&(F=_),F===i)return i;heapSwap(i,F),i=F}}function heapUp(i){for(var o=heapWeight(i);i>0;){var s,x=1&(s=i)?s-1>>1:(s>>1)-1;if(x>=0&&o<heapWeight(x)){heapSwap(i,x),i=x;continue}return i}}function heapPop(){if(ei>0){var i=er[0];return heapSwap(0,ei-1),ei-=1,heapDown(0),i}return -1}function heapUpdate(i,o){var s=er[i];return Z[s]===o?i:(Z[s]=-1/0,heapUp(i),heapPop(),Z[s]=o,heapUp((ei+=1)-1))}for(var er=[],en=Array(F),J=0;J<F;++J)(Z[J]=computeWeight(J))<1/0?(en[J]=er.length,er.push(J)):en[J]=-1;for(var ei=er.length,J=ei>>1;J>=0;--J)heapDown(J);for(;;){var eo=heapPop();if(eo<0||Z[eo]>s)break;!function(i){if(!X[i]){X[i]=!0;var o=j[i],s=G[i];j[s]>=0&&(j[s]=o),G[o]>=0&&(G[o]=s),en[o]>=0&&heapUpdate(en[o],computeWeight(o)),en[s]>=0&&heapUpdate(en[s],computeWeight(s))}}(eo)}for(var es=[],J=0;J<F;++J)X[J]||(en[J]=es.length,es.push(o[J].slice()));function tortoiseHare(i,o){if(i[o]<0)return o;var s=o,x=o;do{var _=i[x];if(!X[x]||_<0||_===x||(_=i[x=_],!X[x]||_<0||_===x))break;x=_,s=i[s]}while(s!==x);for(var F=o;F!==x;F=i[F])i[F]=x;return x}var el=[];return i.forEach(function(i){var o=tortoiseHare(j,i[0]),s=tortoiseHare(G,i[1]);if(o>=0&&s>=0&&o!==s){var x=en[o],_=en[s];x!==_&&el.push([x,_])}}),_.unique(_.normalize(el)),{positions:es,edges:el}};var x=s(417),_=s(6656)},6638:function(i,o,s){"use strict";i.exports=function(i,o){if(o[0][0]<o[1][0])s=o[0],_=o[1];else{if(!(o[0][0]>o[1][0]))return horizontalOrder(o,i);s=o[1],_=o[0]}if(i[0][0]<i[1][0])F=i[0],N=i[1];else{if(!(i[0][0]>i[1][0]))return-horizontalOrder(i,o);F=i[1],N=i[0]}var s,_,F,N,j=x(s,_,N),G=x(s,_,F);if(j<0){if(G<=0)return j}else if(j>0){if(G>=0)return j}else if(G)return G;if(j=x(N,F,_),G=x(N,F,s),j<0){if(G<=0)return j}else if(j>0){if(G>=0)return j}else if(G)return G;return _[0]-N[0]};var x=s(417);function horizontalOrder(i,o){if(o[0][0]<o[1][0])s=o[0],_=o[1];else if(o[0][0]>o[1][0])s=o[1],_=o[0];else{var s,_,F,N,j=Math.min(i[0][1],i[1][1]),G=Math.max(i[0][1],i[1][1]),Z=Math.min(o[0][1],o[1][1]),X=Math.max(o[0][1],o[1][1]);return G<Z?G-Z:j>X?j-X:G-X}i[0][1]<i[1][1]?(F=i[0],N=i[1]):(F=i[1],N=i[0]);var J=x(_,s,F);return J||(J=x(_,s,N))?J:N-_}},4385:function(i,o,s){"use strict";i.exports=function(i){for(var o=i.length,s=2*o,x=Array(s),F=0;F<o;++F){var j=i[F],G=j[0][0]<j[1][0];x[2*F]=new Event(j[0][0],j,G,F),x[2*F+1]=new Event(j[1][0],j,!G,F)}x.sort(function(i,o){var s=i.x-o.x;return s||(s=i.create-o.create)?s:Math.min(i.segment[0][1],i.segment[1][1])-Math.min(o.segment[0][1],o.segment[1][1])});for(var Z=_(N),X=[],J=[],$=[],F=0;F<s;){for(var ee=x[F].x,et=[];F<s;){var er=x[F];if(er.x!==ee)break;F+=1,er.segment[0][0]===er.x&&er.segment[1][0]===er.x?er.create&&(er.segment[0][1]<er.segment[1][1]?(et.push(new IntervalSegment(er.segment[0][1],er.index,!0,!0)),et.push(new IntervalSegment(er.segment[1][1],er.index,!1,!1))):(et.push(new IntervalSegment(er.segment[1][1],er.index,!0,!1)),et.push(new IntervalSegment(er.segment[0][1],er.index,!1,!0)))):Z=er.create?Z.insert(er.segment,er.index):Z.remove(er.segment)}X.push(Z.root),J.push(ee),$.push(et)}return new SlabDecomposition(X,J,$)};var x=s(5070),_=s(7080),F=s(417),N=s(6638);function SlabDecomposition(i,o,s){this.slabs=i,this.coordinates=o,this.horizontal=s}function compareHorizontal(i,o){return i.y-o}function searchBucket(i,o){for(var s=null;i;){var x,_,N=i.key;N[0][0]<N[1][0]?(x=N[0],_=N[1]):(x=N[1],_=N[0]);var j=F(x,_,o);if(j<0)i=i.left;else if(j>0){if(o[0]!==N[1][0])s=i,i=i.right;else{var G=searchBucket(i.right,o);if(G)return G;i=i.left}}else{if(o[0]!==N[1][0])return i;var G=searchBucket(i.right,o);if(G)return G;i=i.left}}return s}function IntervalSegment(i,o,s,x){this.y=i,this.index=o,this.start=s,this.closed=x}function Event(i,o,s,x){this.x=i,this.segment=o,this.create=s,this.index=x}SlabDecomposition.prototype.castUp=function(i){var o=x.le(this.coordinates,i[0]);if(o<0)return -1;this.slabs[o];var s=searchBucket(this.slabs[o],i),_=-1;if(s&&(_=s.value),this.coordinates[o]===i[0]){var j=null;if(s&&(j=s.key),o>0){var G=searchBucket(this.slabs[o-1],i);G&&(j?N(G.key,j)>0&&(j=G.key,_=G.value):(_=G.value,j=G.key))}var Z=this.horizontal[o];if(Z.length>0){var X=x.ge(Z,i[1],compareHorizontal);if(X<Z.length){var J=Z[X];if(i[1]===J.y){if(J.closed)return J.index;for(;X<Z.length-1&&Z[X+1].y===i[1];)if(X+=1,(J=Z[X]).closed)return J.index;if(J.y===i[1]&&!J.start){if((X+=1)>=Z.length)return _;J=Z[X]}}if(J.start){if(j){var $=F(j[0],j[1],[i[0],J.y]);j[0][0]>j[1][0]&&($=-$),$>0&&(_=J.index)}else _=J.index}else J.y!==i[1]&&(_=J.index)}}}return _}},4670:function(i,o,s){"use strict";var x=s(9130),_=s(9662);function planeT(i,o){var s=_(x(i,o),[o[o.length-1]]);return s[s.length-1]}function lerpW(i,o,s,x){var _=-o/(x-o);_<0?_=0:_>1&&(_=1);for(var F=1-_,N=i.length,j=Array(N),G=0;G<N;++G)j[G]=_*i[G]+F*s[G];return j}i.exports=function(i,o){for(var s=[],x=[],_=planeT(i[i.length-1],o),F=i[i.length-1],N=i[0],j=0;j<i.length;++j,F=N){var G=planeT(N=i[j],o);if(_<0&&G>0||_>0&&G<0){var Z=lerpW(F,G,N,_);s.push(Z),x.push(Z.slice())}G<0?x.push(N.slice()):G>0?s.push(N.slice()):(s.push(N.slice()),x.push(N.slice())),_=G}return{positive:s,negative:x}},i.exports.positive=function(i,o){for(var s=[],x=planeT(i[i.length-1],o),_=i[i.length-1],F=i[0],N=0;N<i.length;++N,_=F){var j=planeT(F=i[N],o);(x<0&&j>0||x>0&&j<0)&&s.push(lerpW(_,j,F,x)),j>=0&&s.push(F.slice()),x=j}return s},i.exports.negative=function(i,o){for(var s=[],x=planeT(i[i.length-1],o),_=i[i.length-1],F=i[0],N=0;N<i.length;++N,_=F){var j=planeT(F=i[N],o);(x<0&&j>0||x>0&&j<0)&&s.push(lerpW(_,j,F,x)),j<=0&&s.push(F.slice()),x=j}return s}},8974:function(i,o,s){var x;!function(){"use strict";var _={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(i){return function(i,o){var s,x,F,N,j,G,Z,X,J,$=1,ee=i.length,et="";for(x=0;x<ee;x++)if("string"==typeof i[x])et+=i[x];else if("object"==typeof i[x]){if((N=i[x]).keys)for(F=0,s=o[$];F<N.keys.length;F++){if(void 0==s)throw Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',N.keys[F],N.keys[F-1]));s=s[N.keys[F]]}else s=N.param_no?o[N.param_no]:o[$++];if(_.not_type.test(N.type)&&_.not_primitive.test(N.type)&&s instanceof Function&&(s=s()),_.numeric_arg.test(N.type)&&"number"!=typeof s&&isNaN(s))throw TypeError(sprintf("[sprintf] expecting number but found %T",s));switch(_.number.test(N.type)&&(X=s>=0),N.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,N.width?parseInt(N.width):0);break;case"e":s=N.precision?parseFloat(s).toExponential(N.precision):parseFloat(s).toExponential();break;case"f":s=N.precision?parseFloat(s).toFixed(N.precision):parseFloat(s);break;case"g":s=N.precision?String(Number(s.toPrecision(N.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=N.precision?s.substring(0,N.precision):s;break;case"t":s=String(!!s),s=N.precision?s.substring(0,N.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=N.precision?s.substring(0,N.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=N.precision?s.substring(0,N.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}_.json.test(N.type)?et+=s:(_.number.test(N.type)&&(!X||N.sign)?(J=X?"+":"-",s=s.toString().replace(_.sign,"")):J="",G=N.pad_char?"0"===N.pad_char?"0":N.pad_char.charAt(1):" ",Z=N.width-(J+s).length,j=N.width&&Z>0?G.repeat(Z):"",et+=N.align?J+s+j:"0"===G?J+j+s:j+J+s)}return et}(function(i){if(F[i])return F[i];for(var o,s=i,x=[],N=0;s;){if(null!==(o=_.text.exec(s)))x.push(o[0]);else if(null!==(o=_.modulo.exec(s)))x.push("%");else if(null!==(o=_.placeholder.exec(s))){if(o[2]){N|=1;var j=[],G=o[2],Z=[];if(null!==(Z=_.key.exec(G)))for(j.push(Z[1]);""!==(G=G.substring(Z[0].length));)if(null!==(Z=_.key_access.exec(G)))j.push(Z[1]);else if(null!==(Z=_.index_access.exec(G)))j.push(Z[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");o[2]=j}else N|=2;if(3===N)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");x.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");s=s.substring(o[0].length)}return F[i]=x}(i),arguments)}function vsprintf(i,o){return sprintf.apply(null,[i].concat(o||[]))}var F=Object.create(null);o.sprintf=sprintf,o.vsprintf=vsprintf,"undefined"!=typeof window&&(window.sprintf=sprintf,window.vsprintf=vsprintf,void 0!==(x=(function(){return{sprintf:sprintf,vsprintf:vsprintf}}).call(o,s,o,i))&&(i.exports=x))}()},4162:function(i,o,s){"use strict";i.exports=function(i,o){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(i,o){for(var s=_(i,o),x=s.length,F=Array(x),N=Array(x),j=0;j<x;++j)F[j]=[s[j]],N[j]=[j];return{positions:F,cells:N}}(i,o);var s=i.order.join()+"-"+i.dtype,j=N[s],o=+o||0;return j||(j=N[s]=function(i,o){var s=F[i.length+"d"];if(s)return s(x,i,o)}(i.order,i.dtype)),j(i,o)};var x=s(9284),_=s(9584),F={"2d":function(i,o,s){var x=i({order:o,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(i,o,s,x){return i>x|0},vertex:function(i,o,s,x,_,F,N,j,G,Z,X,J,$){var ee=(N<<0)+(j<<1)+(G<<2)+(Z<<3)|0;if(0!==ee&&15!==ee)switch(ee){case 0:case 15:X.push([i-.5,o-.5]);break;case 1:X.push([i-.25-.25*(x+s-2*$)/(s-x),o-.25-.25*(_+s-2*$)/(s-_)]);break;case 2:X.push([i-.75-.25*(-x-s+2*$)/(x-s),o-.25-.25*(F+x-2*$)/(x-F)]);break;case 3:X.push([i-.5,o-.5-.5*(_+s+F+x-4*$)/(s-_+x-F)]);break;case 4:X.push([i-.25-.25*(F+_-2*$)/(_-F),o-.75-.25*(-_-s+2*$)/(_-s)]);break;case 5:X.push([i-.5-.5*(x+s+F+_-4*$)/(s-x+_-F),o-.5]);break;case 6:X.push([i-.5-.25*(-x-s+F+_)/(x-s+_-F),o-.5-.25*(-_-s+F+x)/(_-s+x-F)]);break;case 7:X.push([i-.75-.25*(F+_-2*$)/(_-F),o-.75-.25*(F+x-2*$)/(x-F)]);break;case 8:X.push([i-.75-.25*(-F-_+2*$)/(F-_),o-.75-.25*(-F-x+2*$)/(F-x)]);break;case 9:X.push([i-.5-.25*(x+s+-F-_)/(s-x+F-_),o-.5-.25*(_+s+-F-x)/(s-_+F-x)]);break;case 10:X.push([i-.5-.5*(-x-s+-F-_+4*$)/(x-s+F-_),o-.5]);break;case 11:X.push([i-.25-.25*(-F-_+2*$)/(F-_),o-.75-.25*(_+s-2*$)/(s-_)]);break;case 12:X.push([i-.5,o-.5-.5*(-_-s+-F-x+4*$)/(_-s+F-x)]);break;case 13:X.push([i-.75-.25*(x+s-2*$)/(s-x),o-.25-.25*(-F-x+2*$)/(F-x)]);break;case 14:X.push([i-.25-.25*(-x-s+2*$)/(x-s),o-.25-.25*(-_-s+2*$)/(_-s)])}},cell:function(i,o,s,x,_,F,N,j,G){_?j.push([i,o]):j.push([o,i])}});return function(i,o){var s=[],_=[];return x(i,s,_,o),{positions:s,cells:_}}}},N={}},6946:function(i,o,s){"use strict";i.exports=function textGet(i,o,s){var s=s||{},_=N[i];_||(_=N[i]={" ":{data:new Float32Array(0),shape:.2}});var F=_[o];if(!F){if(o.length<=1||!/\d/.test(o))F=_[o]=function(i){for(var o=i.cells,s=i.positions,x=new Float32Array(6*o.length),_=0,F=0,N=0;N<o.length;++N)for(var j=o[N],G=0;G<3;++G){var Z=s[j[G]];x[_++]=Z[0],x[_++]=Z[1]+1.4,F=Math.max(Z[0],F)}return{data:x,shape:F}}(x(o,{triangles:!0,font:i,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var j=o.split(/(\d|\s)/),G=Array(j.length),Z=0,X=0,J=0;J<j.length;++J)G[J]=textGet(i,j[J]),Z+=G[J].data.length,X+=G[J].shape,J>0&&(X+=.02);for(var $=new Float32Array(Z),ee=0,et=-.5*X,J=0;J<G.length;++J){for(var er=G[J].data,en=0;en<er.length;en+=2)$[ee++]=er[en]+et,$[ee++]=er[en+1];et+=G[J].shape+.02}F=_[o]={data:$,shape:X}}}return F};var x=s(875),F=window||_.global||{},N=F.__TEXT_CACHE||{};F.__TEXT_CACHE={}},14:function(i,o,s){"use strict";var x=s(4405);function getPropertyInPX(i,o){var s=x(getComputedStyle(i).getPropertyValue(o));return s[0]*toPX(s[1],i)}function toPX(i,o){switch(o=o||document.body,i=(i||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),i){case"%":return o.clientHeight/100;case"ch":case"ex":var s,x,_,F;return s=i,x=o,(_=document.createElement("div")).style["font-size"]="128"+s,x.appendChild(_),F=getPropertyInPX(_,"font-size")/128,x.removeChild(_),F;case"em":return getPropertyInPX(o,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}i.exports=toPX},3440:function(i,o,s){"use strict";i.exports=function(i){var o=(i=i||{}).center||[0,0,0],s=i.up||[0,1,0],x=i.right||findOrthoPair(s),_=i.radius||1,F=i.theta||0,Z=i.phi||0;if(o=[].slice.call(o,0,3),j(s=[].slice.call(s,0,3),s),j(x=[].slice.call(x,0,3),x),"eye"in i){var X=i.eye,J=[X[0]-o[0],X[1]-o[1],X[2]-o[2]];N(x,J,s),1e-6>len3(x[0],x[1],x[2])?x=findOrthoPair(s):j(x,x),_=len3(J[0],J[1],J[2]);var $=G(s,J)/_,ee=G(x,J)/_;Z=Math.acos($),F=Math.acos(ee)}return _=Math.log(_),new TurntableController(i.zoomMin,i.zoomMax,o,s,x,_,F,Z)};var x=s(8444),_=s(7437),F=s(4422),N=s(903),j=s(899),G=s(9305);function len3(i,o,s){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2))}function clamp1(i){return Math.min(1,Math.max(-1,i))}function findOrthoPair(i){var o=Math.abs(i[0]),s=Math.abs(i[1]),x=Math.abs(i[2]),_=[0,0,0];o>Math.max(s,x)?_[2]=1:s>Math.max(o,x)?_[0]=1:_[1]=1;for(var F=0,N=0,G=0;G<3;++G)F+=i[G]*i[G],N+=_[G]*i[G];for(var G=0;G<3;++G)_[G]-=N/F*i[G];return j(_,_),_}function TurntableController(i,o,s,_,F,N,j,G){this.center=x(s),this.up=x(_),this.right=x(F),this.radius=x([N]),this.angle=x([j,G]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(i,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var Z=0;Z<16;++Z)this.computedMatrix[Z]=.5;this.recalcMatrix(0)}var Z=TurntableController.prototype;Z.setDistanceLimits=function(i,o){i=i>0?Math.log(i):-1/0,o=Math.max(o=o>0?Math.log(o):1/0,i),this.radius.bounds[0][0]=i,this.radius.bounds[1][0]=o},Z.getDistanceLimits=function(i){var o=this.radius.bounds[0];return i?(i[0]=Math.exp(o[0][0]),i[1]=Math.exp(o[1][0]),i):[Math.exp(o[0][0]),Math.exp(o[1][0])]},Z.recalcMatrix=function(i){this.center.curve(i),this.up.curve(i),this.right.curve(i),this.radius.curve(i),this.angle.curve(i);for(var o=this.computedUp,s=this.computedRight,x=0,_=0,F=0;F<3;++F)_+=o[F]*s[F],x+=o[F]*o[F];for(var G=Math.sqrt(x),Z=0,F=0;F<3;++F)s[F]-=o[F]*_/x,Z+=s[F]*s[F],o[F]/=G;for(var X=Math.sqrt(Z),F=0;F<3;++F)s[F]/=X;var J=this.computedToward;N(J,o,s),j(J,J);for(var $=Math.exp(this.computedRadius[0]),ee=this.computedAngle[0],et=this.computedAngle[1],er=Math.cos(ee),en=Math.sin(ee),ei=Math.cos(et),eo=Math.sin(et),es=this.computedCenter,el=er*ei,ec=en*ei,eu=-er*eo,ef=-en*eo,eh=this.computedEye,ed=this.computedMatrix,F=0;F<3;++F){var ep=el*s[F]+ec*J[F]+eo*o[F];ed[4*F+1]=eu*s[F]+ef*J[F]+ei*o[F],ed[4*F+2]=ep,ed[4*F+3]=0}var eg=ed[1],em=ed[5],ey=ed[9],ev=ed[2],ex=ed[6],e_=ed[10],ew=em*e_-ey*ex,eT=ey*ev-eg*e_,ek=eg*ex-em*ev,eA=len3(ew,eT,ek);ew/=eA,eT/=eA,ek/=eA,ed[0]=ew,ed[4]=eT,ed[8]=ek;for(var F=0;F<3;++F)eh[F]=es[F]+ed[2+4*F]*$;for(var F=0;F<3;++F){for(var Z=0,eS=0;eS<3;++eS)Z+=ed[F+4*eS]*eh[eS];ed[12+F]=-Z}ed[15]=1},Z.getMatrix=function(i,o){this.recalcMatrix(i);var s=this.computedMatrix;if(o){for(var x=0;x<16;++x)o[x]=s[x];return o}return s};var X=[0,0,0];Z.rotate=function(i,o,s,x){if(this.angle.move(i,o,s),x){this.recalcMatrix(i);var _=this.computedMatrix;X[0]=_[2],X[1]=_[6],X[2]=_[10];for(var N=this.computedUp,j=this.computedRight,G=this.computedToward,Z=0;Z<3;++Z)_[4*Z]=N[Z],_[4*Z+1]=j[Z],_[4*Z+2]=G[Z];F(_,_,x,X);for(var Z=0;Z<3;++Z)N[Z]=_[4*Z],j[Z]=_[4*Z+1];this.up.set(i,N[0],N[1],N[2]),this.right.set(i,j[0],j[1],j[2])}},Z.pan=function(i,o,s,x){o=o||0,s=s||0,x=x||0,this.recalcMatrix(i);var _=this.computedMatrix;this.computedRadius[0];var F=_[1],N=_[5],j=_[9],G=len3(F,N,j);F/=G,N/=G,j/=G;var Z=_[0],X=_[4],J=_[8],$=Z*F+X*N+J*j,ee=len3(Z-=F*$,X-=N*$,J-=j*$),et=(Z/=ee)*o+F*s,er=(X/=ee)*o+N*s,en=(J/=ee)*o+j*s;this.center.move(i,et,er,en);var ei=Math.exp(this.computedRadius[0]);ei=Math.max(1e-4,ei+x),this.radius.set(i,Math.log(ei))},Z.translate=function(i,o,s,x){this.center.move(i,o||0,s||0,x||0)},Z.setMatrix=function(i,o,s,x){var F,N,j=1;"number"==typeof s&&(j=0|s),(j<0||j>3)&&(j=1);var G=(j+2)%3;o||(this.recalcMatrix(i),o=this.computedMatrix);var Z=o[j],X=o[j+4],J=o[j+8];if(x){var $=Math.abs(Z),ee=Math.abs(J),et=Math.max($,Math.abs(X),ee);$===et?(Z=Z<0?-1:1,X=J=0):ee===et?(J=J<0?-1:1,Z=X=0):(X=X<0?-1:1,Z=J=0)}else{var er=len3(Z,X,J);Z/=er,X/=er,J/=er}var en=o[G],ei=o[G+4],eo=o[G+8],es=en*Z+ei*X+eo*J,el=len3(en-=Z*es,ei-=X*es,eo-=J*es);en/=el,ei/=el;var ec=X*(eo/=el)-J*ei,eu=J*en-Z*eo,ef=Z*ei-X*en,eh=len3(ec,eu,ef);if(ec/=eh,eu/=eh,ef/=eh,this.center.jump(i,eL,eP,eI),this.radius.idle(i),this.up.jump(i,Z,X,J),this.right.jump(i,en,ei,eo),2===j){var ed=o[1],ep=o[5],eg=o[9],em=ed*en+ep*ei+eg*eo,ey=ed*ec+ep*eu+eg*ef;F=ew<0?-Math.PI/2:Math.PI/2,N=Math.atan2(ey,em)}else{var ev=o[2],ex=o[6],e_=o[10],ew=ev*Z+ex*X+e_*J,eT=ev*en+ex*ei+e_*eo,ek=ev*ec+ex*eu+e_*ef;F=Math.asin(clamp1(ew)),N=Math.atan2(ek,eT)}this.angle.jump(i,N,F),this.recalcMatrix(i);var eA=o[2],eS=o[6],eM=o[10],eC=this.computedMatrix;_(eC,o);var eE=eC[15],eL=eC[12]/eE,eP=eC[13]/eE,eI=eC[14]/eE,eO=Math.exp(this.computedRadius[0]);this.center.jump(i,eL-eA*eO,eP-eS*eO,eI-eM*eO)},Z.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},Z.idle=function(i){this.center.idle(i),this.up.idle(i),this.right.idle(i),this.radius.idle(i),this.angle.idle(i)},Z.flush=function(i){this.center.flush(i),this.up.flush(i),this.right.flush(i),this.radius.flush(i),this.angle.flush(i)},Z.setDistance=function(i,o){o>0&&this.radius.set(i,Math.log(o))},Z.lookAt=function(i,o,s,x){this.recalcMatrix(i),o=o||this.computedEye,s=s||this.computedCenter;var _=(x=x||this.computedUp)[0],F=x[1],N=x[2],j=len3(_,F,N);if(!(j<1e-6)){_/=j,F/=j,N/=j;var G=o[0]-s[0],Z=o[1]-s[1],X=o[2]-s[2],J=len3(G,Z,X);if(!(J<1e-6)){G/=J,Z/=J,X/=J;var $=this.computedRight,ee=$[0],et=$[1],er=$[2],en=_*ee+F*et+N*er,ei=len3(ee-=en*_,et-=en*F,er-=en*N);if(!(ei<.01&&(ei=len3(ee=F*X-N*Z,et=N*G-_*X,er=_*Z-F*G))<1e-6)){ee/=ei,et/=ei,er/=ei,this.up.set(i,_,F,N),this.right.set(i,ee,et,er),this.center.set(i,s[0],s[1],s[2]),this.radius.set(i,Math.log(J));var eo=F*er-N*et,es=N*ee-_*er,el=_*et-F*ee,ec=len3(eo,es,el),eu=_*G+F*Z+N*X,ef=ee*G+et*Z+er*X,eh=(eo/=ec)*G+(es/=ec)*Z+(el/=ec)*X,ed=Math.asin(clamp1(eu)),ep=Math.atan2(eh,ef),eg=this.angle._state,em=eg[eg.length-1],ey=eg[eg.length-2],ev=Math.abs((em%=2*Math.PI)+2*Math.PI-ep),ex=Math.abs(em-ep),e_=Math.abs(em-2*Math.PI-ep);ev<ex&&(em+=2*Math.PI),e_<ex&&(em-=2*Math.PI),this.angle.jump(this.angle.lastT(),em,ey),this.angle.set(i,ep,ed)}}}}},9660:function(i){"use strict";i.exports=function(i,s,x){var _=i*s,F=o*i,N=F-(F-i),j=i-N,G=o*s,Z=G-(G-s),X=s-Z,J=j*X-(_-N*Z-j*Z-N*X);return x?(x[0]=J,x[1]=_,x):[J,_]};var o=134217729},87:function(i){"use strict";i.exports=function(i,o,s){var x=i+o,_=x-i,F=o-_,N=i-(x-_);return s?(s[0]=N+F,s[1]=x,s):[N+F,x]}},5306:function(i,o,s){"use strict";var x=s(2288),_=s(3094),F=s(2146).lW;s.g.__TYPEDARRAY_POOL||(s.g.__TYPEDARRAY_POOL={UINT8:_([32,0]),UINT16:_([32,0]),UINT32:_([32,0]),BIGUINT64:_([32,0]),INT8:_([32,0]),INT16:_([32,0]),INT32:_([32,0]),BIGINT64:_([32,0]),FLOAT:_([32,0]),DOUBLE:_([32,0]),DATA:_([32,0]),UINT8C:_([32,0]),BUFFER:_([32,0])});var N="undefined"!=typeof Uint8ClampedArray,j="undefined"!=typeof BigUint64Array,G="undefined"!=typeof BigInt64Array,Z=s.g.__TYPEDARRAY_POOL;Z.UINT8C||(Z.UINT8C=_([32,0])),Z.BIGUINT64||(Z.BIGUINT64=_([32,0])),Z.BIGINT64||(Z.BIGINT64=_([32,0])),Z.BUFFER||(Z.BUFFER=_([32,0]));var X=Z.DATA,J=Z.BUFFER;function freeArrayBuffer(i){if(i){var o=i.length||i.byteLength;X[x.log2(o)].push(i)}}function mallocArrayBuffer(i){var i=x.nextPow2(i),o=X[x.log2(i)];return o.length>0?o.pop():new ArrayBuffer(i)}function mallocUint8(i){return new Uint8Array(mallocArrayBuffer(i),0,i)}function mallocUint16(i){return new Uint16Array(mallocArrayBuffer(2*i),0,i)}function mallocUint32(i){return new Uint32Array(mallocArrayBuffer(4*i),0,i)}function mallocInt8(i){return new Int8Array(mallocArrayBuffer(i),0,i)}function mallocInt16(i){return new Int16Array(mallocArrayBuffer(2*i),0,i)}function mallocInt32(i){return new Int32Array(mallocArrayBuffer(4*i),0,i)}function mallocFloat(i){return new Float32Array(mallocArrayBuffer(4*i),0,i)}function mallocDouble(i){return new Float64Array(mallocArrayBuffer(8*i),0,i)}function mallocUint8Clamped(i){return N?new Uint8ClampedArray(mallocArrayBuffer(i),0,i):mallocUint8(i)}function mallocBigUint64(i){return j?new BigUint64Array(mallocArrayBuffer(8*i),0,i):null}function mallocBigInt64(i){return G?new BigInt64Array(mallocArrayBuffer(8*i),0,i):null}function mallocDataView(i){return new DataView(mallocArrayBuffer(i),0,i)}function mallocBuffer(i){i=x.nextPow2(i);var o=J[x.log2(i)];return o.length>0?o.pop():new F(i)}o.free=function(i){if(F.isBuffer(i))J[x.log2(i.length)].push(i);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(i)&&(i=i.buffer),!i)return;var o=i.length||i.byteLength;X[0|x.log2(o)].push(i)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(i){freeArrayBuffer(i.buffer)},o.freeArrayBuffer=freeArrayBuffer,o.freeBuffer=function(i){J[x.log2(i.length)].push(i)},o.malloc=function(i,o){if(void 0===o||"arraybuffer"===o)return mallocArrayBuffer(i);switch(o){case"uint8":return mallocUint8(i);case"uint16":return mallocUint16(i);case"uint32":return mallocUint32(i);case"int8":return mallocInt8(i);case"int16":return mallocInt16(i);case"int32":return mallocInt32(i);case"float":case"float32":return mallocFloat(i);case"double":case"float64":return mallocDouble(i);case"uint8_clamped":return mallocUint8Clamped(i);case"bigint64":return mallocBigInt64(i);case"biguint64":return mallocBigUint64(i);case"buffer":return mallocBuffer(i);case"data":case"dataview":return mallocDataView(i)}return null},o.mallocArrayBuffer=mallocArrayBuffer,o.mallocUint8=mallocUint8,o.mallocUint16=mallocUint16,o.mallocUint32=mallocUint32,o.mallocInt8=mallocInt8,o.mallocInt16=mallocInt16,o.mallocInt32=mallocInt32,o.mallocFloat32=o.mallocFloat=mallocFloat,o.mallocFloat64=o.mallocDouble=mallocDouble,o.mallocUint8Clamped=mallocUint8Clamped,o.mallocBigUint64=mallocBigUint64,o.mallocBigInt64=mallocBigInt64,o.mallocDataView=mallocDataView,o.mallocBuffer=mallocBuffer,o.clearCache=function(){for(var i=0;i<32;++i)Z.UINT8[i].length=0,Z.UINT16[i].length=0,Z.UINT32[i].length=0,Z.INT8[i].length=0,Z.INT16[i].length=0,Z.INT32[i].length=0,Z.FLOAT[i].length=0,Z.DOUBLE[i].length=0,Z.BIGUINT64[i].length=0,Z.BIGINT64[i].length=0,Z.UINT8C[i].length=0,X[i].length=0,J[i].length=0}},1731:function(i){"use strict";function UnionFind(i){this.roots=Array(i),this.ranks=Array(i);for(var o=0;o<i;++o)this.roots[o]=o,this.ranks[o]=0}i.exports=UnionFind;var o=UnionFind.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},o.find=function(i){for(var o=i,s=this.roots;s[i]!==i;)i=s[i];for(;s[o]!==i;){var x=s[o];s[o]=i,o=x}return i},o.link=function(i,o){var s=this.find(i),x=this.find(o);if(s!==x){var _=this.ranks,F=this.roots,N=_[s],j=_[x];N<j?F[s]=x:j<N?F[x]=s:(F[x]=s,++_[s])}}},1215:function(i){"use strict";i.exports=function(i,o,s){return 0===i.length?i:o?(s||i.sort(o),function(i,o){for(var s=1,x=i.length,_=i[0],F=i[0],N=1;N<x;++N)if(F=_,o(_=i[N],F)){if(N===s){s++;continue}i[s++]=_}return i.length=s,i}(i,o)):(s||i.sort(),function(i){for(var o=1,s=i.length,x=i[0],_=i[0],F=1;F<s;++F,_=x)if(_=x,(x=i[F])!==_){if(F===o){o++;continue}i[o++]=x}return i.length=o,i}(i))}},875:function(i,o,s){"use strict";i.exports=function(i,o){return("object"!=typeof o||null===o)&&(o={}),x(i,o.canvas||_,o.context||F,o)};var x=s(712),_=null,F=null;"undefined"!=typeof document&&((_=document.createElement("canvas")).width=8192,_.height=1024,F=_.getContext("2d"))},712:function(i,o,s){i.exports=function(i,o,s,x){var F=64,N=1.25,j={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return x&&(x.size&&x.size>0&&(F=x.size),x.lineSpacing&&x.lineSpacing>0&&(N=x.lineSpacing),x.styletags&&x.styletags.breaklines&&(j.breaklines=!!x.styletags.breaklines),x.styletags&&x.styletags.bolds&&(j.bolds=!!x.styletags.bolds),x.styletags&&x.styletags.italics&&(j.italics=!!x.styletags.italics),x.styletags&&x.styletags.subscripts&&(j.subscripts=!!x.styletags.subscripts),x.styletags&&x.styletags.superscripts&&(j.superscripts=!!x.styletags.superscripts)),s.font=[x.fontStyle,x.fontVariant,x.fontWeight,F+"px",x.font].filter(function(i){return i}).join(" "),s.textAlign="start",s.textBaseline="alphabetic",s.direction="ltr",processPixels(function(i,o,s,x,F,N){s=s.replace(/\n/g,""),s=!0===N.breaklines?s.replace(/\<br\>/g,"\n"):s.replace(/\<br\>/g," ");var j,G,Z,X,J,$="",ee=[];for(G=0;G<s.length;++G)ee[G]=$;!0===N.bolds&&(ee=parseTag("b","b|",s,ee)),!0===N.italics&&(ee=parseTag("i","i|",s,ee)),!0===N.superscripts&&(ee=parseTag("sup","+1",s,ee)),!0===N.subscripts&&(ee=parseTag("sub","-1",s,ee));var et=[],er="";for(G=0;G<s.length;++G)null!==ee[G]&&(er+=s[G],et.push(ee[G]));var en=er.split("\n"),ei=en.length,eo=Math.round(F*x),es=2*x,el=0,ec=ei*eo+es;i.height<ec&&(i.height=ec),o.fillStyle="#000",o.fillRect(0,0,i.width,i.height),o.fillStyle="#fff";var eu=0,ef="";function writeBuffer(){if(""!==ef){var i=o.measureText(ef).width;o.fillText(ef,x+Z,es+X),Z+=i}}function getTextFontSize(){return""+Math.round(J)+"px "}for(j=0;j<ei;++j){var eh=en[j]+"\n";for(G=0,Z=0,X=j*eo,J=x,ef="";G<eh.length;++G){var ed=G+eu<et.length?et[G+eu]:et[et.length-1];$===ed?ef+=eh[G]:(writeBuffer(),ef=eh[G],void 0!==ed&&(function(i,s){var x=""+o.font;if(!0===N.subscripts){var _=i.indexOf("-"),F=s.indexOf("-"),j=_>-1?parseInt(i[1+_]):0,G=F>-1?parseInt(s[1+F]):0;j!==G&&(x=x.replace(getTextFontSize(),"?px "),J*=Math.pow(.75,G-j),x=x.replace("?px ",getTextFontSize())),X+=.25*eo*(G-j)}if(!0===N.superscripts){var Z=i.indexOf("+"),$=s.indexOf("+"),ee=Z>-1?parseInt(i[1+Z]):0,et=$>-1?parseInt(s[1+$]):0;ee!==et&&(x=x.replace(getTextFontSize(),"?px "),J*=Math.pow(.75,et-ee),x=x.replace("?px ",getTextFontSize())),X-=.25*eo*(et-ee)}if(!0===N.bolds){var er=i.indexOf("b|")>-1,en=s.indexOf("b|")>-1;!er&&en&&(x=ei?x.replace("italic ","italic bold "):"bold "+x),er&&!en&&(x=x.replace("bold ",""))}if(!0===N.italics){var ei=i.indexOf("i|")>-1,es=s.indexOf("i|")>-1;!ei&&es&&(x="italic "+x),ei&&!es&&(x=x.replace("italic ",""))}o.font=x}($,ed),$=ed))}writeBuffer(),eu+=eh.length;var ep=0|Math.round(Z+2*x);el<ep&&(el=ep)}var eg=el,em=es+eo*ei;return _(o.getImageData(0,0,eg,em).data,[em,eg,4]).pick(-1,-1,0).transpose(1,0)}(o,s,i,F,N,j),x,F)},i.exports.processPixels=processPixels;var x=s(4162),_=s(5050),F=s(8243),N=s(197),j=s(7761),G=s(8040);function parseTag(i,o,s,x){for(var _="<"+i+">",F="</"+i+">",N=_.length,j=F.length,G="+"===o[0]||"-"===o[0],Z=0,X=-j;Z>-1&&-1!==(Z=s.indexOf(_,Z))&&-1!==(X=s.indexOf(F,Z+N))&&!(X<=Z);){for(var J=Z;J<X+j;++J)if(J<Z+N||J>=X)x[J]=null,s=s.substr(0,J)+" "+s.substr(J+1);else if(null!==x[J]){var $=x[J].indexOf(o[0]);-1===$?x[J]+=o:G&&(x[J]=x[J].substr(0,$+1)+(1+parseInt(x[J][$+1]))+x[J].substr($+2))}var ee=Z+N,et=s.substr(ee,X-ee).indexOf(_);Z=-1!==et?et:X+j}return x}function processPixelsImpl(i,o,s,_){var Z,X=(Z=x(i,128),_?F(Z.cells,Z.positions,.25):{edges:Z.cells,positions:Z.positions}),J=function(i,o,s){for(var x=o.textAlign||"start",_=o.textBaseline||"alphabetic",F=[1073741824,1073741824],N=[0,0],j=i.length,G=0;G<j;++G)for(var Z=i[G],X=0;X<2;++X)F[X]=0|Math.min(F[X],Z[X]),N[X]=0|Math.max(N[X],Z[X]);var J=0;switch(x){case"center":J=-.5*(F[0]+N[0]);break;case"right":case"end":J=-N[0];break;case"left":case"start":J=-F[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+x+"'")}var $=0;switch(_){case"hanging":case"top":$=-F[1];break;case"middle":$=-.5*(F[1]+N[1]);break;case"alphabetic":case"ideographic":$=-3*s;break;case"bottom":$=-N[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+_+"'")}var ee=1/s;return"lineHeight"in o?ee*=+o.lineHeight:"width"in o?ee=o.width/(N[0]-F[0]):"height"in o&&(ee=o.height/(N[1]-F[1])),i.map(function(i){return[ee*(i[0]+J),ee*(i[1]+$)]})}(X.positions,o,s),$=X.edges,ee="ccw"===o.orientation;if(N(J,$),o.polygons||o.polygon||o.polyline){for(var et=G($,J),er=Array(et.length),en=0;en<et.length;++en){for(var ei=et[en],eo=Array(ei.length),es=0;es<ei.length;++es){for(var el=ei[es],ec=Array(el.length),eu=0;eu<el.length;++eu)ec[eu]=J[el[eu]].slice();ee&&ec.reverse(),eo[es]=ec}er[en]=eo}return er}return o.triangles||o.triangulate||o.triangle?{cells:j(J,$,{delaunay:!1,exterior:!1,interior:!0}),positions:J}:{edges:$,positions:J}}function processPixels(i,o,s){try{return processPixelsImpl(i,o,s,!0)}catch(i){}try{return processPixelsImpl(i,o,s,!1)}catch(i){}return o.polygons||o.polyline||o.polygon?[]:o.triangles||o.triangulate||o.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(i){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=weakMapPermitHostObjects);var o,s,x,_=!1;if("function"==typeof WeakMap){var F=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var N=new F,j=Object.freeze({});if(N.set(j,1),1!==N.get(j))_=!0;else{i.exports=WeakMap;return}}}Object.prototype.hasOwnProperty;var G=Object.getOwnPropertyNames,Z=Object.defineProperty,X=Object.isExtensible,J="weakmap:",$=J+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var ee=new ArrayBuffer(25),et=new Uint8Array(ee);crypto.getRandomValues(et),$=J+"rand:"+Array.prototype.map.call(et,function(i){return(i%36).toString(36)}).join("")+"___"}if(Z(Object,"getOwnPropertyNames",{value:function(i){return G(i).filter(isNotHiddenName)}}),"getPropertyNames"in Object){var er=Object.getPropertyNames;Z(Object,"getPropertyNames",{value:function(i){return er(i).filter(isNotHiddenName)}})}o=Object.freeze,Z(Object,"freeze",{value:function(i){return getHiddenRecord(i),o(i)}}),s=Object.seal,Z(Object,"seal",{value:function(i){return getHiddenRecord(i),s(i)}}),x=Object.preventExtensions,Z(Object,"preventExtensions",{value:function(i){return getHiddenRecord(i),x(i)}});var en=!1,ei=0,OurWeakMap=function(){this instanceof OurWeakMap||calledAsFunctionWarning();var i=[],o=[],s=ei++;return Object.create(OurWeakMap.prototype,{get___:{value:constFunc(function(x,_){var F,N=getHiddenRecord(x);return N?s in N?N[s]:_:(F=i.indexOf(x))>=0?o[F]:_})},has___:{value:constFunc(function(o){var x=getHiddenRecord(o);return x?s in x:i.indexOf(o)>=0})},set___:{value:constFunc(function(x,_){var F,N=getHiddenRecord(x);return N?N[s]=_:(F=i.indexOf(x))>=0?o[F]=_:(o[F=i.length]=_,i[F]=x),this})},delete___:{value:constFunc(function(x){var _,F,N=getHiddenRecord(x);return N?s in N&&delete N[s]:!((_=i.indexOf(x))<0)&&(F=i.length-1,i[_]=void 0,o[_]=o[F],i[_]=i[F],i.length=F,o.length=F,!0)})}})};OurWeakMap.prototype=Object.create(Object.prototype,{get:{value:function(i,o){return this.get___(i,o)},writable:!0,configurable:!0},has:{value:function(i){return this.has___(i)},writable:!0,configurable:!0},set:{value:function(i,o){return this.set___(i,o)},writable:!0,configurable:!0},delete:{value:function(i){return this.delete___(i)},writable:!0,configurable:!0}}),"function"==typeof F?function(){function DoubleWeakMap(){this instanceof OurWeakMap||calledAsFunctionWarning();var i,o=new F,s=void 0,x=!1;return i=_?function(i,x){return o.set(i,x),o.has(i)||(s||(s=new OurWeakMap),s.set(i,x)),this}:function(i,_){if(x)try{o.set(i,_)}catch(o){s||(s=new OurWeakMap),s.set___(i,_)}else o.set(i,_);return this},Object.create(OurWeakMap.prototype,{get___:{value:constFunc(function(i,x){return s?o.has(i)?o.get(i):s.get___(i,x):o.get(i,x)})},has___:{value:constFunc(function(i){return o.has(i)||!!s&&s.has___(i)})},set___:{value:constFunc(i)},delete___:{value:constFunc(function(i){var x=!!o.delete(i);return s&&s.delete___(i)||x})},permitHostObjects___:{value:constFunc(function(i){if(i===weakMapPermitHostObjects)x=!0;else throw Error("bogus call to permitHostObjects___")})}})}_&&"undefined"!=typeof Proxy&&(Proxy=void 0),DoubleWeakMap.prototype=OurWeakMap.prototype,i.exports=DoubleWeakMap,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),i.exports=OurWeakMap)}function weakMapPermitHostObjects(i){i.permitHostObjects___&&i.permitHostObjects___(weakMapPermitHostObjects)}function isNotHiddenName(i){return!(i.substr(0,J.length)==J&&"___"===i.substr(i.length-3))}function getHiddenRecord(i){if(i!==Object(i))throw TypeError("Not an object: "+i);var o=i[$];if(o&&o.key===i)return o;if(X(i)){o={key:i};try{return Z(i,$,{value:o,writable:!1,enumerable:!1,configurable:!1}),o}catch(i){return}}}function constFunc(i){return i.prototype=null,Object.freeze(i)}function calledAsFunctionWarning(){en||"undefined"==typeof console||(en=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(i,o,s){var x=s(7178);i.exports=function(){var i={};return function(o){if(("object"!=typeof o||null===o)&&"function"!=typeof o)throw Error("Weakmap-shim: Key must be object");var s=o.valueOf(i);return s&&s.identity===i?s:x(o,i)}}},7178:function(i){i.exports=function(i,o){var s={identity:o},x=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(i){return i!==o?x.apply(this,arguments):s},writable:!0}),s}},4037:function(i,o,s){var x=s(9222);i.exports=function(){var i=x();return{get:function(o,s){var x=i(o);return x.hasOwnProperty("value")?x.value:s},set:function(o,s){return i(o).value=s,this},has:function(o){return"value"in i(o)},delete:function(o){return delete i(o).value}}}},6183:function(i){"use strict";var o,s;i.exports=(o=(function(){return function(i,o,s,x,_,F){var N=i[0],j=s[0],G=[0];x|=0;var Z=0;for(Z=0;Z<N;++Z){var X=o[x]-F,J=o[x+j]-F;X>=0!=J>=0&&_.push(G[0]+.5+.5*(X+J)/(X-J)),x+=j,++G[0]}}}).bind(void 0,{funcName:"zeroCrossings"}),s={},function(i,x,_){var F=i.dtype,N=i.order,j=[F,N.join()].join(),G=s[j];return G||(s[j]=G=o([F,N])),G(i.shape.slice(0),i.data,i.stride,0|i.offset,x,_)})},9584:function(i,o,s){"use strict";i.exports=function(i,o){var s=[];return o=+o||0,x(i.hi(i.shape[0]-1),s,o),s};var x=s(6183)},6601:function(){}},o={};function __nested_webpack_require_889453__(s){var x=o[s];if(void 0!==x)return x.exports;var _=o[s]={id:s,loaded:!1,exports:{}};return i[s].call(_.exports,_,_.exports,__nested_webpack_require_889453__),_.loaded=!0,_.exports}return __nested_webpack_require_889453__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__nested_webpack_require_889453__.nmd=function(i){return i.paths=[],i.children||(i.children=[]),i},__nested_webpack_require_889453__(7386)}()},12856:function(i,o,s){"use strict";function _defineProperties(i,o){for(var s=0;s<o.length;s++){var x=o[s];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(i,function(i){var o=function(i,o){if("object"!==_typeof(i)||null===i)return i;var s=i[Symbol.toPrimitive];if(void 0!==s){var x=s.call(i,o||"default");if("object"!==_typeof(x))return x;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(i)}(i,"string");return"symbol"===_typeof(o)?o:String(o)}(x.key),x)}}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(i,o)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var x=s(95341),_=s(95280),F="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function createBuffer(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');var o=new Uint8Array(i);return Object.setPrototypeOf(o,Buffer.prototype),o}function Buffer(i,o,s){if("number"==typeof i){if("string"==typeof o)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,o,s)}function from(i,o,s){if("string"==typeof i)return function(i,o){if(("string"!=typeof o||""===o)&&(o="utf8"),!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);var s=0|byteLength(i,o),x=createBuffer(s),_=x.write(i,o);return _!==s&&(x=x.slice(0,_)),x}(i,o);if(ArrayBuffer.isView(i))return function(i){if(isInstance(i,Uint8Array)){var o=new Uint8Array(i);return fromArrayBuffer(o.buffer,o.byteOffset,o.byteLength)}return fromArrayLike(i)}(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i));if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(i,SharedArrayBuffer)||i&&isInstance(i.buffer,SharedArrayBuffer)))return fromArrayBuffer(i,o,s);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');var x=i.valueOf&&i.valueOf();if(null!=x&&x!==i)return Buffer.from(x,o,s);var _=function(i){if(Buffer.isBuffer(i)){var o,s=0|checked(i.length),x=createBuffer(s);return 0===x.length||i.copy(x,0,0,s),x}return void 0!==i.length?"number"!=typeof i.length||(o=i.length)!=o?createBuffer(0):fromArrayLike(i):"Buffer"===i.type&&Array.isArray(i.data)?fromArrayLike(i.data):void 0}(i);if(_)return _;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer.from(i[Symbol.toPrimitive]("string"),o,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i))}function assertSize(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromArrayLike(i){for(var o=i.length<0?0:0|checked(i.length),s=createBuffer(o),x=0;x<o;x+=1)s[x]=255&i[x];return s}function fromArrayBuffer(i,o,s){var x;if(o<0||i.byteLength<o)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<o+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(x=void 0===o&&void 0===s?new Uint8Array(i):void 0===s?new Uint8Array(i,o):new Uint8Array(i,o,s),Buffer.prototype),x}function checked(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function byteLength(i,o){if(Buffer.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof(i));var s=i.length,x=arguments.length>2&&!0===arguments[2];if(!x&&0===s)return 0;for(var _=!1;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return base64ToBytes(i).length;default:if(_)return x?-1:utf8ToBytes(i).length;o=(""+o).toLowerCase(),_=!0}}function slowToString(i,o,s){var _,F,N=!1;if((void 0===o||o<0)&&(o=0),o>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0||(s>>>=0)<=(o>>>=0)))return"";for(i||(i="utf8");;)switch(i){case"hex":return function(i,o,s){var x=i.length;(!o||o<0)&&(o=0),(!s||s<0||s>x)&&(s=x);for(var _="",F=o;F<s;++F)_+=G[i[F]];return _}(this,o,s);case"utf8":case"utf-8":return utf8Slice(this,o,s);case"ascii":return function(i,o,s){var x="";s=Math.min(i.length,s);for(var _=o;_<s;++_)x+=String.fromCharCode(127&i[_]);return x}(this,o,s);case"latin1":case"binary":return function(i,o,s){var x="";s=Math.min(i.length,s);for(var _=o;_<s;++_)x+=String.fromCharCode(i[_]);return x}(this,o,s);case"base64":return _=o,F=s,0===_&&F===this.length?x.fromByteArray(this):x.fromByteArray(this.slice(_,F));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(i,o,s){for(var x=i.slice(o,s),_="",F=0;F<x.length-1;F+=2)_+=String.fromCharCode(x[F]+256*x[F+1]);return _}(this,o,s);default:if(N)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),N=!0}}function swap(i,o,s){var x=i[o];i[o]=i[s],i[s]=x}function bidirectionalIndexOf(i,o,s,x,_){var F;if(0===i.length)return -1;if("string"==typeof s?(x=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),(F=s=+s)!=F&&(s=_?0:i.length-1),s<0&&(s=i.length+s),s>=i.length){if(_)return -1;s=i.length-1}else if(s<0){if(!_)return -1;s=0}if("string"==typeof o&&(o=Buffer.from(o,x)),Buffer.isBuffer(o))return 0===o.length?-1:arrayIndexOf(i,o,s,x,_);if("number"==typeof o)return(o&=255,"function"==typeof Uint8Array.prototype.indexOf)?_?Uint8Array.prototype.indexOf.call(i,o,s):Uint8Array.prototype.lastIndexOf.call(i,o,s):arrayIndexOf(i,[o],s,x,_);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,o,s,x,_){var F,N=1,j=i.length,G=o.length;if(void 0!==x&&("ucs2"===(x=String(x).toLowerCase())||"ucs-2"===x||"utf16le"===x||"utf-16le"===x)){if(i.length<2||o.length<2)return -1;N=2,j/=2,G/=2,s/=2}function read(i,o){return 1===N?i[o]:i.readUInt16BE(o*N)}if(_){var Z=-1;for(F=s;F<j;F++)if(read(i,F)===read(o,-1===Z?0:F-Z)){if(-1===Z&&(Z=F),F-Z+1===G)return Z*N}else -1!==Z&&(F-=F-Z),Z=-1}else for(s+G>j&&(s=j-G),F=s;F>=0;F--){for(var X=!0,J=0;J<G;J++)if(read(i,F+J)!==read(o,J)){X=!1;break}if(X)return F}return -1}function utf8Slice(i,o,s){s=Math.min(i.length,s);for(var x=[],_=o;_<s;){var F=i[_],N=null,j=F>239?4:F>223?3:F>191?2:1;if(_+j<=s){var G=void 0,Z=void 0,X=void 0,J=void 0;switch(j){case 1:F<128&&(N=F);break;case 2:(192&(G=i[_+1]))==128&&(J=(31&F)<<6|63&G)>127&&(N=J);break;case 3:G=i[_+1],Z=i[_+2],(192&G)==128&&(192&Z)==128&&(J=(15&F)<<12|(63&G)<<6|63&Z)>2047&&(J<55296||J>57343)&&(N=J);break;case 4:G=i[_+1],Z=i[_+2],X=i[_+3],(192&G)==128&&(192&Z)==128&&(192&X)==128&&(J=(15&F)<<18|(63&G)<<12|(63&Z)<<6|63&X)>65535&&J<1114112&&(N=J)}}null===N?(N=65533,j=1):N>65535&&(N-=65536,x.push(N>>>10&1023|55296),N=56320|1023&N),x.push(N),_+=j}return function(i){var o=i.length;if(o<=4096)return String.fromCharCode.apply(String,i);for(var s="",x=0;x<o;)s+=String.fromCharCode.apply(String,i.slice(x,x+=4096));return s}(x)}function checkOffset(i,o,s){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+o>s)throw RangeError("Trying to access beyond buffer length")}function checkInt(i,o,s,x,_,F){if(!Buffer.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(o>_||o<F)throw RangeError('"value" argument is out of bounds');if(s+x>i.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(i,o,s,x,_){checkIntBI(o,x,_,i,s,7);var F=Number(o&BigInt(4294967295));i[s++]=F,F>>=8,i[s++]=F,F>>=8,i[s++]=F,F>>=8,i[s++]=F;var N=Number(o>>BigInt(32)&BigInt(4294967295));return i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,s}function wrtBigUInt64BE(i,o,s,x,_){checkIntBI(o,x,_,i,s,7);var F=Number(o&BigInt(4294967295));i[s+7]=F,F>>=8,i[s+6]=F,F>>=8,i[s+5]=F,F>>=8,i[s+4]=F;var N=Number(o>>BigInt(32)&BigInt(4294967295));return i[s+3]=N,N>>=8,i[s+2]=N,N>>=8,i[s+1]=N,N>>=8,i[s]=N,s+8}function checkIEEE754(i,o,s,x,_,F){if(s+x>i.length||s<0)throw RangeError("Index out of range")}function writeFloat(i,o,s,x,F){return o=+o,s>>>=0,F||checkIEEE754(i,o,s,4,34028234663852886e22,-34028234663852886e22),_.write(i,o,s,x,23,4),s+4}function writeDouble(i,o,s,x,F){return o=+o,s>>>=0,F||checkIEEE754(i,o,s,8,17976931348623157e292,-17976931348623157e292),_.write(i,o,s,x,52,8),s+8}o.Buffer=Buffer,o.SlowBuffer=function(i){return+i!=i&&(i=0),Buffer.alloc(+i)},o.INSPECT_MAX_BYTES=50,o.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var i=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(i,o),42===i.foo()}catch(i){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(i,o,s){return from(i,o,s)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(i,o,s){return(assertSize(i),i<=0)?createBuffer(i):void 0!==o?"string"==typeof s?createBuffer(i).fill(o,s):createBuffer(i).fill(o):createBuffer(i)},Buffer.allocUnsafe=function(i){return allocUnsafe(i)},Buffer.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==Buffer.prototype},Buffer.compare=function(i,o){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),isInstance(o,Uint8Array)&&(o=Buffer.from(o,o.offset,o.byteLength)),!Buffer.isBuffer(i)||!Buffer.isBuffer(o))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;for(var s=i.length,x=o.length,_=0,F=Math.min(s,x);_<F;++_)if(i[_]!==o[_]){s=i[_],x=o[_];break}return s<x?-1:x<s?1:0},Buffer.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(i,o){if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer.alloc(0);if(void 0===o)for(s=0,o=0;s<i.length;++s)o+=i[s].length;var s,x=Buffer.allocUnsafe(o),_=0;for(s=0;s<i.length;++s){var F=i[s];if(isInstance(F,Uint8Array))_+F.length>x.length?(Buffer.isBuffer(F)||(F=Buffer.from(F)),F.copy(x,_)):Uint8Array.prototype.set.call(x,F,_);else if(Buffer.isBuffer(F))F.copy(x,_);else throw TypeError('"list" argument must be an Array of Buffers');_+=F.length}return x},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)swap(this,o,o+1);return this},Buffer.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)swap(this,o,o+3),swap(this,o+1,o+2);return this},Buffer.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)swap(this,o,o+7),swap(this,o+1,o+6),swap(this,o+2,o+5),swap(this,o+3,o+4);return this},Buffer.prototype.toString=function(){var i=this.length;return 0===i?"":0==arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(i){if(!Buffer.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===Buffer.compare(this,i)},Buffer.prototype.inspect=function(){var i="",s=o.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},F&&(Buffer.prototype[F]=Buffer.prototype.inspect),Buffer.prototype.compare=function(i,o,s,x,_){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof(i));if(void 0===o&&(o=0),void 0===s&&(s=i?i.length:0),void 0===x&&(x=0),void 0===_&&(_=this.length),o<0||s>i.length||x<0||_>this.length)throw RangeError("out of range index");if(x>=_&&o>=s)return 0;if(x>=_)return -1;if(o>=s)return 1;if(o>>>=0,s>>>=0,x>>>=0,_>>>=0,this===i)return 0;for(var F=_-x,N=s-o,j=Math.min(F,N),G=this.slice(x,_),Z=i.slice(o,s),X=0;X<j;++X)if(G[X]!==Z[X]){F=G[X],N=Z[X];break}return F<N?-1:N<F?1:0},Buffer.prototype.includes=function(i,o,s){return -1!==this.indexOf(i,o,s)},Buffer.prototype.indexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!0)},Buffer.prototype.lastIndexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!1)},Buffer.prototype.write=function(i,o,s,x){if(void 0===o)x="utf8",s=this.length,o=0;else if(void 0===s&&"string"==typeof o)x=o,s=this.length,o=0;else if(isFinite(o))o>>>=0,isFinite(s)?(s>>>=0,void 0===x&&(x="utf8")):(x=s,s=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var _,F,N,j,G,Z,X,J,$=this.length-o;if((void 0===s||s>$)&&(s=$),i.length>0&&(s<0||o<0)||o>this.length)throw RangeError("Attempt to write outside buffer bounds");x||(x="utf8");for(var ee=!1;;)switch(x){case"hex":return function(i,o,s,x){s=Number(s)||0;var _,F=i.length-s;x?(x=Number(x))>F&&(x=F):x=F;var N=o.length;for(x>N/2&&(x=N/2),_=0;_<x;++_){var j=parseInt(o.substr(2*_,2),16);if(j!=j)break;i[s+_]=j}return _}(this,i,o,s);case"utf8":case"utf-8":return _=o,F=s,blitBuffer(utf8ToBytes(i,this.length-_),this,_,F);case"ascii":case"latin1":case"binary":return N=o,j=s,blitBuffer(function(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o}(i),this,N,j);case"base64":return G=o,Z=s,blitBuffer(base64ToBytes(i),this,G,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X=o,J=s,blitBuffer(function(i,o){for(var s,x,_=[],F=0;F<i.length&&!((o-=2)<0);++F)x=(s=i.charCodeAt(F))>>8,_.push(s%256),_.push(x);return _}(i,this.length-X),this,X,J);default:if(ee)throw TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),ee=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(i,o){var s=this.length;i=~~i,o=void 0===o?s:~~o,i<0?(i+=s)<0&&(i=0):i>s&&(i=s),o<0?(o+=s)<0&&(o=0):o>s&&(o=s),o<i&&(o=i);var x=this.subarray(i,o);return Object.setPrototypeOf(x,Buffer.prototype),x},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i],_=1,F=0;++F<o&&(_*=256);)x+=this[i+F]*_;return x},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i+--o],_=1;o>0&&(_*=256);)x+=this[i+--o]*_;return x},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(i,o){return i>>>=0,o||checkOffset(i,1,this.length),this[i]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var x=o+256*this[++i]+65536*this[++i]+16777216*this[++i],_=this[++i]+256*this[++i]+65536*this[++i]+16777216*s;return BigInt(x)+(BigInt(_)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var x=16777216*o+65536*this[++i]+256*this[++i]+this[++i],_=16777216*this[++i]+65536*this[++i]+256*this[++i]+s;return(BigInt(x)<<BigInt(32))+BigInt(_)}),Buffer.prototype.readIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=this[i],_=1,F=0;++F<o&&(_*=256);)x+=this[i+F]*_;return x>=(_*=128)&&(x-=Math.pow(2,8*o)),x},Buffer.prototype.readIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var x=o,_=1,F=this[i+--x];x>0&&(_*=256);)F+=this[i+--x]*_;return F>=(_*=128)&&(F-=Math.pow(2,8*o)),F},Buffer.prototype.readInt8=function(i,o){return(i>>>=0,o||checkOffset(i,1,this.length),128&this[i])?-((255-this[i]+1)*1):this[i]},Buffer.prototype.readInt16LE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i]|this[i+1]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt16BE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i+1]|this[i]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer.prototype.readInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt(this[i+4]+256*this[i+5]+65536*this[i+6]+(s<<24))<<BigInt(32))+BigInt(o+256*this[++i]+65536*this[++i]+16777216*this[++i])}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt((o<<24)+65536*this[++i]+256*this[++i]+this[++i])<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+s)}),Buffer.prototype.readFloatLE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),_.read(this,i,!0,23,4)},Buffer.prototype.readFloatBE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),_.read(this,i,!1,23,4)},Buffer.prototype.readDoubleLE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),_.read(this,i,!0,52,8)},Buffer.prototype.readDoubleBE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),_.read(this,i,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(i,o,s,x){if(i=+i,o>>>=0,s>>>=0,!x){var _=Math.pow(2,8*s)-1;checkInt(this,i,o,s,_,0)}var F=1,N=0;for(this[o]=255&i;++N<s&&(F*=256);)this[o+N]=i/F&255;return o+s},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(i,o,s,x){if(i=+i,o>>>=0,s>>>=0,!x){var _=Math.pow(2,8*s)-1;checkInt(this,i,o,s,_,0)}var F=s-1,N=1;for(this[o+F]=255&i;--F>=0&&(N*=256);)this[o+F]=i/N&255;return o+s},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,255,0),this[o]=255&i,o+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=255&i,o+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(i,o,s,x){if(i=+i,o>>>=0,!x){var _=Math.pow(2,8*s-1);checkInt(this,i,o,s,_-1,-_)}var F=0,N=1,j=0;for(this[o]=255&i;++F<s&&(N*=256);)i<0&&0===j&&0!==this[o+F-1]&&(j=1),this[o+F]=(i/N>>0)-j&255;return o+s},Buffer.prototype.writeIntBE=function(i,o,s,x){if(i=+i,o>>>=0,!x){var _=Math.pow(2,8*s-1);checkInt(this,i,o,s,_-1,-_)}var F=s-1,N=1,j=0;for(this[o+F]=255&i;--F>=0&&(N*=256);)i<0&&0===j&&0!==this[o+F+1]&&(j=1),this[o+F]=(i/N>>0)-j&255;return o+s},Buffer.prototype.writeInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=255&i,o+1},Buffer.prototype.writeInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),this[o]=255&i,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},Buffer.prototype.writeInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(i,o,s){return writeFloat(this,i,o,!0,s)},Buffer.prototype.writeFloatBE=function(i,o,s){return writeFloat(this,i,o,!1,s)},Buffer.prototype.writeDoubleLE=function(i,o,s){return writeDouble(this,i,o,!0,s)},Buffer.prototype.writeDoubleBE=function(i,o,s){return writeDouble(this,i,o,!1,s)},Buffer.prototype.copy=function(i,o,s,x){if(!Buffer.isBuffer(i))throw TypeError("argument should be a Buffer");if(s||(s=0),x||0===x||(x=this.length),o>=i.length&&(o=i.length),o||(o=0),x>0&&x<s&&(x=s),x===s||0===i.length||0===this.length)return 0;if(o<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(x<0)throw RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),i.length-o<x-s&&(x=i.length-o+s);var _=x-s;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,s,x):Uint8Array.prototype.set.call(i,this.subarray(s,x),o),_},Buffer.prototype.fill=function(i,o,s,x){if("string"==typeof i){if("string"==typeof o?(x=o,o=0,s=this.length):"string"==typeof s&&(x=s,s=this.length),void 0!==x&&"string"!=typeof x)throw TypeError("encoding must be a string");if("string"==typeof x&&!Buffer.isEncoding(x))throw TypeError("Unknown encoding: "+x);if(1===i.length){var _,F=i.charCodeAt(0);("utf8"===x&&F<128||"latin1"===x)&&(i=F)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(o<0||this.length<o||this.length<s)throw RangeError("Out of range index");if(s<=o)return this;if(o>>>=0,s=void 0===s?this.length:s>>>0,i||(i=0),"number"==typeof i)for(_=o;_<s;++_)this[_]=i;else{var N=Buffer.isBuffer(i)?i:Buffer.from(i,x),j=N.length;if(0===j)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(_=0;_<s-o;++_)this[_+o]=N[_%j]}return this};var N={};function E(i,o,s){N[i]=function(s){!function(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&_setPrototypeOf(i,o)}(NodeError,s);var x,_,F,N=(x=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}(),function(){var i,o=_getPrototypeOf(NodeError);if(x){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return function(i,o){if(o&&("object"===_typeof(o)||"function"==typeof o))return o;if(void 0!==o)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}(this,i)});function NodeError(){var s;return(/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}(this,NodeError),Object.defineProperty(_assertThisInitialized(s=N.call(this)),"message",{value:o.apply(_assertThisInitialized(s),arguments),writable:!0,configurable:!0}),s.name="".concat(s.name," [").concat(i,"]"),s.stack,delete s.name,s)}return _=[{key:"code",get:function(){return i},set:function(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(i,"]: ").concat(this.message)}}],_defineProperties(NodeError.prototype,_),F&&_defineProperties(NodeError,F),Object.defineProperty(NodeError,"prototype",{writable:!1}),NodeError}(s)}function addNumericalSeparator(i){for(var o="",s=i.length,x="-"===i[0]?1:0;s>=x+4;s-=3)o="_".concat(i.slice(s-3,s)).concat(o);return"".concat(i.slice(0,s)).concat(o)}function checkIntBI(i,o,s,x,_,F){if(i>s||i<o){var j,G="bigint"==typeof o?"n":"";throw j=F>3?0===o||o===BigInt(0)?">= 0".concat(G," and < 2").concat(G," ** ").concat((F+1)*8).concat(G):">= -(2".concat(G," ** ").concat((F+1)*8-1).concat(G,") and < 2 ** ")+"".concat((F+1)*8-1).concat(G):">= ".concat(o).concat(G," and <= ").concat(s).concat(G),new N.ERR_OUT_OF_RANGE("value",j,i)}validateNumber(_,"offset"),(void 0===x[_]||void 0===x[_+F])&&boundsError(_,x.length-(F+1))}function validateNumber(i,o){if("number"!=typeof i)throw new N.ERR_INVALID_ARG_TYPE(o,"number",i)}function boundsError(i,o,s){if(Math.floor(i)!==i)throw validateNumber(i,s),new N.ERR_OUT_OF_RANGE(s||"offset","an integer",i);if(o<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(o),i)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?"".concat(i," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(i,o){return'The "'.concat(i,'" argument must be of type number. Received type ').concat(_typeof(o))},TypeError),E("ERR_OUT_OF_RANGE",function(i,o,s){var x='The value of "'.concat(i,'" is out of range.'),_=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?_=addNumericalSeparator(String(s)):"bigint"==typeof s&&(_=String(s),(s>Math.pow(BigInt(2),BigInt(32))||s<-Math.pow(BigInt(2),BigInt(32)))&&(_=addNumericalSeparator(_)),_+="n"),x+=" It must be ".concat(o,". Received ").concat(_)},RangeError);var j=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(i,o){o=o||1/0;for(var s,x=i.length,_=null,F=[],N=0;N<x;++N){if((s=i.charCodeAt(N))>55295&&s<57344){if(!_){if(s>56319||N+1===x){(o-=3)>-1&&F.push(239,191,189);continue}_=s;continue}if(s<56320){(o-=3)>-1&&F.push(239,191,189),_=s;continue}s=(_-55296<<10|s-56320)+65536}else _&&(o-=3)>-1&&F.push(239,191,189);if(_=null,s<128){if((o-=1)<0)break;F.push(s)}else if(s<2048){if((o-=2)<0)break;F.push(s>>6|192,63&s|128)}else if(s<65536){if((o-=3)<0)break;F.push(s>>12|224,s>>6&63|128,63&s|128)}else if(s<1114112){if((o-=4)<0)break;F.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}else throw Error("Invalid code point")}return F}function base64ToBytes(i){return x.toByteArray(function(i){if((i=(i=i.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}(i))}function blitBuffer(i,o,s,x){var _;for(_=0;_<x&&!(_+s>=o.length)&&!(_>=i.length);++_)o[_+s]=i[_];return _}function isInstance(i,o){return i instanceof o||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===o.name}var G=function(){for(var i="0123456789abcdef",o=Array(256),s=0;s<16;++s)for(var x=16*s,_=0;_<16;++_)o[x+_]=i[s]+i[_];return o}();function defineBigIntMethod(i){return"undefined"==typeof BigInt?BufferBigIntNotDefined:i}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}},35791:function(i){"use strict";i.exports=isMobile,i.exports.isMobile=isMobile,i.exports.default=isMobile;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,x=/android|ipad|playbook|silk/i;function isMobile(i){i||(i={});var _=i.ua;if(_||"undefined"==typeof navigator||(_=navigator.userAgent),_&&_.headers&&"string"==typeof _.headers["user-agent"]&&(_=_.headers["user-agent"]),"string"!=typeof _)return!1;var F=o.test(_)&&!s.test(_)||!!i.tablet&&x.test(_);return!F&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==_.indexOf("Macintosh")&&-1!==_.indexOf("Safari")&&(F=!0),F}},86781:function(i,o,s){"use strict";s.r(o),s.d(o,{sankeyCenter:function(){return center},sankeyCircular:function(){return sankeyCircular},sankeyJustify:function(){return justify},sankeyLeft:function(){return left},sankeyRight:function(){return right}});var x=s(33064),_=s(15140),F=s(45879),N=s(2502),j=s.n(N);function targetDepth(i){return i.target.depth}function left(i){return i.depth}function right(i,o){return o-1-i.height}function justify(i,o){return i.sourceLinks.length?i.depth:o-1}function center(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,x.VV)(i.sourceLinks,targetDepth)-1:0}function constant(i){return function(){return i}}var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function ascendingSourceBreadth(i,o){return ascendingBreadth(i.source,o.source)||i.index-o.index}function ascendingTargetBreadth(i,o){return ascendingBreadth(i.target,o.target)||i.index-o.index}function ascendingBreadth(i,o){return i.partOfCycle===o.partOfCycle?i.y0-o.y0:"top"===i.circularLinkType||"bottom"===o.circularLinkType?-1:1}function value(i){return i.value}function nodeCenter(i){return(i.y0+i.y1)/2}function linkSourceCenter(i){return nodeCenter(i.source)}function linkTargetCenter(i){return nodeCenter(i.target)}function defaultId(i){return i.index}function defaultNodes(i){return i.nodes}function defaultLinks(i){return i.links}function find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function sankeyCircular(){var i,o,s=0,F=0,N=1,Z=1,X=24,J=defaultId,$=justify,ee=defaultNodes,et=defaultLinks,er=32,en=2,ei=null;function sankeyCircular(){var eo={nodes:ee.apply(null,arguments),links:et.apply(null,arguments)};(function(i){i.nodes.forEach(function(i,o){i.index=o,i.sourceLinks=[],i.targetLinks=[]});var o=(0,_.UI)(i.nodes,J);i.links.forEach(function(i,s){i.index=s;var x=i.source,_=i.target;(void 0===x?"undefined":G(x))!=="object"&&(x=i.source=find(o,x)),(void 0===_?"undefined":G(_))!=="object"&&(_=i.target=find(o,_)),x.sourceLinks.push(i),_.targetLinks.push(i)})})(eo),function(i,o,s){var x=0;if(null===s){for(var _=[],F=0;F<i.links.length;F++){var N=i.links[F],G=N.source.index,Z=N.target.index;_[G]||(_[G]=[]),_[Z]||(_[Z]=[]),-1===_[G].indexOf(Z)&&_[G].push(Z)}var X=j()(_);X.sort(function(i,o){return i.length-o.length});var J={};for(F=0;F<X.length;F++){var $=X[F].slice(-2);J[$[0]]||(J[$[0]]={}),J[$[0]][$[1]]=!0}i.links.forEach(function(i){var o=i.target.index,s=i.source.index;o===s||J[s]&&J[s][o]?(i.circular=!0,i.circularLinkID=x,x+=1):i.circular=!1})}else i.links.forEach(function(i){i.source[s]<i.target[s]?i.circular=!1:(i.circular=!0,i.circularLinkID=x,x+=1)})}(eo,0,ei),function(i){i.nodes.forEach(function(i){i.partOfCycle=!1,i.value=Math.max((0,x.Sm)(i.sourceLinks,value),(0,x.Sm)(i.targetLinks,value)),i.sourceLinks.forEach(function(o){o.circular&&(i.partOfCycle=!0,i.circularLinkType=o.circularLinkType)}),i.targetLinks.forEach(function(o){o.circular&&(i.partOfCycle=!0,i.circularLinkType=o.circularLinkType)})})}(eo),function(i){var o,s,x;for(o=i.nodes,s=[],x=0;o.length;++x,o=s,s=[])o.forEach(function(i){i.depth=x,i.sourceLinks.forEach(function(i){0>s.indexOf(i.target)&&!i.circular&&s.push(i.target)})});for(o=i.nodes,s=[],x=0;o.length;++x,o=s,s=[])o.forEach(function(i){i.height=x,i.targetLinks.forEach(function(i){0>s.indexOf(i.source)&&!i.circular&&s.push(i.source)})});i.nodes.forEach(function(i){i.column=Math.floor($.call(null,i,x))})}(eo),selectCircularLinkTypes(eo,J),function(j,G,J){var $=(0,_.b1)().key(function(i){return i.column}).sortKeys(x.j2).entries(j.nodes).map(function(i){return i.values});(function(_){if(o){var G,J,ee,et,er,en,ei,eo,es,el,ec,eu,ef=1/0;$.forEach(function(i){var s=Z*o/(i.length+1);ef=s<ef?s:ef}),i=ef}var eh=(0,x.VV)($,function(o){return(Z-F-(o.length-1)*i)/(0,x.Sm)(o,value)});eh*=.3,j.links.forEach(function(i){i.width=i.value*eh});var ed=(G=0,J=0,ee=0,et=0,er=(0,x.Fp)(j.nodes,function(i){return i.column}),j.links.forEach(function(i){i.circular&&("top"==i.circularLinkType?G+=i.width:J+=i.width,0==i.target.column&&(et+=i.width),i.source.column==er&&(ee+=i.width))}),{top:G=G>0?G+25+10:G,bottom:J=J>0?J+25+10:J,left:et=et>0?et+25+10:et,right:ee=ee>0?ee+25+10:ee}),ep=(en=(0,x.Fp)(j.nodes,function(i){return i.column}),ei=N-s,eo=Z-F,es=ei+ed.right+ed.left,el=eo+ed.top+ed.bottom,ec=ei/es,eu=eo/el,s=s*ec+ed.left,N=0==ed.right?N:N*ec,F=F*eu+ed.top,Z*=eu,j.nodes.forEach(function(i){i.x0=s+i.column*((N-s-X)/en),i.x1=i.x0+X}),eu);eh*=ep,j.links.forEach(function(i){i.width=i.value*eh}),$.forEach(function(i){var o=i.length;i.forEach(function(i,s){i.depth==$.length-1&&1==o?i.y0=Z/2-i.value*eh:0==i.depth&&1==o?i.y0=Z/2-i.value*eh:i.partOfCycle?0==numberOfNonSelfLinkingCycles(i,_)?i.y0=Z/2+s:"top"==i.circularLinkType?i.y0=F+s:i.y0=Z-i.value*eh-s:0==ed.top||0==ed.bottom?i.y0=(Z-F)/o*s:i.y0=(Z-F)/2-o/2+s,i.y1=i.y0+i.value*eh})})})(J),resolveCollisions();for(var ee=1,et=G;et>0;--et)(function(i,o){var s=$.length;$.forEach(function(_){var F=_.length,N=_[0].depth;_.forEach(function(_){var j;if(_.sourceLinks.length||_.targetLinks.length){if(_.partOfCycle&&numberOfNonSelfLinkingCycles(_,o)>0);else if(0==N&&1==F)j=_.y1-_.y0,_.y0=Z/2-j/2,_.y1=Z/2+j/2;else if(N==s-1&&1==F)j=_.y1-_.y0,_.y0=Z/2-j/2,_.y1=Z/2+j/2;else{var G=(0,x.J6)(_.sourceLinks,linkTargetCenter),X=(0,x.J6)(_.targetLinks,linkSourceCenter),J=((G&&X?(G+X)/2:G||X)-nodeCenter(_))*i;_.y0+=J,_.y1+=J}}})})})(ee*=.99,J),resolveCollisions();function resolveCollisions(){$.forEach(function(o){var s,x,_,N=F,j=o.length;for(o.sort(ascendingBreadth),_=0;_<j;++_)(x=N-(s=o[_]).y0)>0&&(s.y0+=x,s.y1+=x),N=s.y1+i;if((x=N-i-Z)>0)for(N=s.y0-=x,s.y1-=x,_=j-2;_>=0;--_)(x=(s=o[_]).y1+i-N)>0&&(s.y0-=x,s.y1-=x),N=s.y0})}}(eo,er,J),computeLinkBreadths(eo);for(var es=0;es<4;es++)sortSourceLinks(eo,Z,J),sortTargetLinks(eo,Z,J),function(i,o,s,x){i.links.forEach(function(_){if(!_.circular&&_.target.column-_.source.column>1){var F=_.source.column+1,N=_.target.column-1,j=1,G=N-F+1;for(j=1;F<=N;F++,j++)i.nodes.forEach(function(N){if(N.column==F){var Z,X=j/(G+1),J=Math.pow(1-X,3),$=3*X*Math.pow(1-X,2),ee=3*Math.pow(X,2)*(1-X),et=Math.pow(X,3),er=J*_.y0+$*_.y0+ee*_.y1+et*_.y1,en=er-_.width/2,ei=er+_.width/2;en>N.y0&&en<N.y1?(Z=N.y1-en+10,Z="bottom"==N.circularLinkType?Z:-Z,N=adjustNodeHeight(N,Z,o,s),i.nodes.forEach(function(i){if(x(i)!=x(N)&&i.column==N.column){var _;((_=N).y0>i.y0&&_.y0<i.y1||_.y1>i.y0&&_.y1<i.y1?0:_.y0<i.y0&&_.y1>i.y1?0:1)||adjustNodeHeight(i,Z,o,s)}})):ei>N.y0&&ei<N.y1?(Z=ei-N.y0+10,N=adjustNodeHeight(N,Z,o,s),i.nodes.forEach(function(i){x(i)!=x(N)&&i.column==N.column&&i.y0<N.y1&&i.y1>N.y1&&adjustNodeHeight(i,Z,o,s)})):en<N.y0&&ei>N.y1&&(Z=ei-N.y0+10,N=adjustNodeHeight(N,Z,o,s),i.nodes.forEach(function(i){x(i)!=x(N)&&i.column==N.column&&i.y0<N.y1&&i.y1>N.y1&&adjustNodeHeight(i,Z,o,s)}))}})}})}(eo,F,Z,J),sortSourceLinks(eo,Z,J),sortTargetLinks(eo,Z,J);return function(i,o,s){var _=i.nodes,F=i.links,N=!1,j=!1;if(F.forEach(function(i){"top"==i.circularLinkType?N=!0:"bottom"==i.circularLinkType&&(j=!0)}),!1==N||!1==j){var G=(0,x.VV)(_,function(i){return i.y0}),Z=(s-o)/((0,x.Fp)(_,function(i){return i.y1})-G);_.forEach(function(i){var o=(i.y1-i.y0)*Z;i.y0=(i.y0-G)*Z,i.y1=i.y0+o}),F.forEach(function(i){i.y0=(i.y0-G)*Z,i.y1=(i.y1-G)*Z,i.width=i.width*Z})}}(eo,F,Z),addCircularPathData(eo,en,Z,J),eo}function computeLinkBreadths(i){i.nodes.forEach(function(i){i.sourceLinks.sort(ascendingTargetBreadth),i.targetLinks.sort(ascendingSourceBreadth)}),i.nodes.forEach(function(i){var o=i.y0,s=o,x=i.y1,_=x;i.sourceLinks.forEach(function(i){i.circular?(i.y0=x-i.width/2,x-=i.width):(i.y0=o+i.width/2,o+=i.width)}),i.targetLinks.forEach(function(i){i.circular?(i.y1=_-i.width/2,_-=i.width):(i.y1=s+i.width/2,s+=i.width)})})}return sankeyCircular.nodeId=function(i){return arguments.length?(J="function"==typeof i?i:constant(i),sankeyCircular):J},sankeyCircular.nodeAlign=function(i){return arguments.length?($="function"==typeof i?i:constant(i),sankeyCircular):$},sankeyCircular.nodeWidth=function(i){return arguments.length?(X=+i,sankeyCircular):X},sankeyCircular.nodePadding=function(o){return arguments.length?(i=+o,sankeyCircular):i},sankeyCircular.nodes=function(i){return arguments.length?(ee="function"==typeof i?i:constant(i),sankeyCircular):ee},sankeyCircular.links=function(i){return arguments.length?(et="function"==typeof i?i:constant(i),sankeyCircular):et},sankeyCircular.size=function(i){return arguments.length?(s=F=0,N=+i[0],Z=+i[1],sankeyCircular):[N-s,Z-F]},sankeyCircular.extent=function(i){return arguments.length?(s=+i[0][0],N=+i[1][0],F=+i[0][1],Z=+i[1][1],sankeyCircular):[[s,F],[N,Z]]},sankeyCircular.iterations=function(i){return arguments.length?(er=+i,sankeyCircular):er},sankeyCircular.circularLinkGap=function(i){return arguments.length?(en=+i,sankeyCircular):en},sankeyCircular.nodePaddingRatio=function(i){return arguments.length?(o=+i,sankeyCircular):o},sankeyCircular.sortNodes=function(i){return arguments.length?(ei=i,sankeyCircular):ei},sankeyCircular.update=function(i){return selectCircularLinkTypes(i,J),computeLinkBreadths(i),i.links.forEach(function(i){i.circular&&(i.circularLinkType=i.y0+i.y1<Z?"top":"bottom",i.source.circularLinkType=i.circularLinkType,i.target.circularLinkType=i.circularLinkType)}),sortSourceLinks(i,Z,J,!1),sortTargetLinks(i,Z,J),addCircularPathData(i,en,Z,J),i},sankeyCircular}function selectCircularLinkTypes(i,o){var s=0,x=0;i.links.forEach(function(_){_.circular&&(_.source.circularLinkType||_.target.circularLinkType?_.circularLinkType=_.source.circularLinkType?_.source.circularLinkType:_.target.circularLinkType:_.circularLinkType=s<x?"top":"bottom","top"==_.circularLinkType?s+=1:x+=1,i.nodes.forEach(function(i){(o(i)==o(_.source)||o(i)==o(_.target))&&(i.circularLinkType=_.circularLinkType)}))}),i.links.forEach(function(i){i.circular&&(i.source.circularLinkType==i.target.circularLinkType&&(i.circularLinkType=i.source.circularLinkType),selfLinking(i,o)&&(i.circularLinkType=i.source.circularLinkType))})}function linkAngle(i){var o=Math.abs(i.y1-i.y0);return Math.atan(Math.abs(i.target.x0-i.source.x1)/o)}function numberOfNonSelfLinkingCycles(i,o){var s=0;i.sourceLinks.forEach(function(i){s=i.circular&&!selfLinking(i,o)?s+1:s});var x=0;return i.targetLinks.forEach(function(i){x=i.circular&&!selfLinking(i,o)?x+1:x}),s+x}function onlyCircularLink(i){var o=i.source.sourceLinks,s=0;o.forEach(function(i){s=i.circular?s+1:s});var x=i.target.targetLinks,_=0;return x.forEach(function(i){_=i.circular?_+1:_}),!(s>1)&&!(_>1)}function calcVerticalBuffer(i,o,s){return i.sort(sortLinkColumnAscending),i.forEach(function(x,_){var F=0;if(selfLinking(x,s)&&onlyCircularLink(x))x.circularPathData.verticalBuffer=F+x.width/2;else{for(var N,j,G=0;G<_;G++)if(N=i[_],j=i[G],!(N.source.column<j.target.column)&&!(N.target.column>j.source.column)){var Z=i[G].circularPathData.verticalBuffer+i[G].width/2+o;F=Z>F?Z:F}x.circularPathData.verticalBuffer=F+x.width/2}}),i}function addCircularPathData(i,o,s,_){var N=(0,x.VV)(i.links,function(i){return i.source.y0});i.links.forEach(function(i){i.circular&&(i.circularPathData={})}),calcVerticalBuffer(i.links.filter(function(i){return"top"==i.circularLinkType}),o,_),calcVerticalBuffer(i.links.filter(function(i){return"bottom"==i.circularLinkType}),o,_),i.links.forEach(function(x){if(x.circular){if(x.circularPathData.arcRadius=x.width+10,x.circularPathData.leftNodeBuffer=5,x.circularPathData.rightNodeBuffer=5,x.circularPathData.sourceWidth=x.source.x1-x.source.x0,x.circularPathData.sourceX=x.source.x0+x.circularPathData.sourceWidth,x.circularPathData.targetX=x.target.x0,x.circularPathData.sourceY=x.y0,x.circularPathData.targetY=x.y1,selfLinking(x,_)&&onlyCircularLink(x))x.circularPathData.leftSmallArcRadius=10+x.width/2,x.circularPathData.leftLargeArcRadius=10+x.width/2,x.circularPathData.rightSmallArcRadius=10+x.width/2,x.circularPathData.rightLargeArcRadius=10+x.width/2,"bottom"==x.circularLinkType?(x.circularPathData.verticalFullExtent=x.source.y1+25+x.circularPathData.verticalBuffer,x.circularPathData.verticalLeftInnerExtent=x.circularPathData.verticalFullExtent-x.circularPathData.leftLargeArcRadius,x.circularPathData.verticalRightInnerExtent=x.circularPathData.verticalFullExtent-x.circularPathData.rightLargeArcRadius):(x.circularPathData.verticalFullExtent=x.source.y0-25-x.circularPathData.verticalBuffer,x.circularPathData.verticalLeftInnerExtent=x.circularPathData.verticalFullExtent+x.circularPathData.leftLargeArcRadius,x.circularPathData.verticalRightInnerExtent=x.circularPathData.verticalFullExtent+x.circularPathData.rightLargeArcRadius);else{var j=x.source.column,G=x.circularLinkType,Z=i.links.filter(function(i){return i.source.column==j&&i.circularLinkType==G});"bottom"==x.circularLinkType?Z.sort(sortLinkSourceYDescending):Z.sort(sortLinkSourceYAscending);var X=0;Z.forEach(function(i,s){i.circularLinkID==x.circularLinkID&&(x.circularPathData.leftSmallArcRadius=10+x.width/2+X,x.circularPathData.leftLargeArcRadius=10+x.width/2+s*o+X),X+=i.width}),j=x.target.column,Z=i.links.filter(function(i){return i.target.column==j&&i.circularLinkType==G}),"bottom"==x.circularLinkType?Z.sort(sortLinkTargetYDescending):Z.sort(sortLinkTargetYAscending),X=0,Z.forEach(function(i,s){i.circularLinkID==x.circularLinkID&&(x.circularPathData.rightSmallArcRadius=10+x.width/2+X,x.circularPathData.rightLargeArcRadius=10+x.width/2+s*o+X),X+=i.width}),"bottom"==x.circularLinkType?(x.circularPathData.verticalFullExtent=Math.max(s,x.source.y1,x.target.y1)+25+x.circularPathData.verticalBuffer,x.circularPathData.verticalLeftInnerExtent=x.circularPathData.verticalFullExtent-x.circularPathData.leftLargeArcRadius,x.circularPathData.verticalRightInnerExtent=x.circularPathData.verticalFullExtent-x.circularPathData.rightLargeArcRadius):(x.circularPathData.verticalFullExtent=N-25-x.circularPathData.verticalBuffer,x.circularPathData.verticalLeftInnerExtent=x.circularPathData.verticalFullExtent+x.circularPathData.leftLargeArcRadius,x.circularPathData.verticalRightInnerExtent=x.circularPathData.verticalFullExtent+x.circularPathData.rightLargeArcRadius)}x.circularPathData.leftInnerExtent=x.circularPathData.sourceX+x.circularPathData.leftNodeBuffer,x.circularPathData.rightInnerExtent=x.circularPathData.targetX-x.circularPathData.rightNodeBuffer,x.circularPathData.leftFullExtent=x.circularPathData.sourceX+x.circularPathData.leftLargeArcRadius+x.circularPathData.leftNodeBuffer,x.circularPathData.rightFullExtent=x.circularPathData.targetX-x.circularPathData.rightLargeArcRadius-x.circularPathData.rightNodeBuffer}if(x.circular)x.path="top"==x.circularLinkType?"M"+x.circularPathData.sourceX+" "+x.circularPathData.sourceY+" L"+x.circularPathData.leftInnerExtent+" "+x.circularPathData.sourceY+" A"+x.circularPathData.leftLargeArcRadius+" "+x.circularPathData.leftSmallArcRadius+" 0 0 0 "+x.circularPathData.leftFullExtent+" "+(x.circularPathData.sourceY-x.circularPathData.leftSmallArcRadius)+" L"+x.circularPathData.leftFullExtent+" "+x.circularPathData.verticalLeftInnerExtent+" A"+x.circularPathData.leftLargeArcRadius+" "+x.circularPathData.leftLargeArcRadius+" 0 0 0 "+x.circularPathData.leftInnerExtent+" "+x.circularPathData.verticalFullExtent+" L"+x.circularPathData.rightInnerExtent+" "+x.circularPathData.verticalFullExtent+" A"+x.circularPathData.rightLargeArcRadius+" "+x.circularPathData.rightLargeArcRadius+" 0 0 0 "+x.circularPathData.rightFullExtent+" "+x.circularPathData.verticalRightInnerExtent+" L"+x.circularPathData.rightFullExtent+" "+(x.circularPathData.targetY-x.circularPathData.rightSmallArcRadius)+" A"+x.circularPathData.rightLargeArcRadius+" "+x.circularPathData.rightSmallArcRadius+" 0 0 0 "+x.circularPathData.rightInnerExtent+" "+x.circularPathData.targetY+" L"+x.circularPathData.targetX+" "+x.circularPathData.targetY:"M"+x.circularPathData.sourceX+" "+x.circularPathData.sourceY+" L"+x.circularPathData.leftInnerExtent+" "+x.circularPathData.sourceY+" A"+x.circularPathData.leftLargeArcRadius+" "+x.circularPathData.leftSmallArcRadius+" 0 0 1 "+x.circularPathData.leftFullExtent+" "+(x.circularPathData.sourceY+x.circularPathData.leftSmallArcRadius)+" L"+x.circularPathData.leftFullExtent+" "+x.circularPathData.verticalLeftInnerExtent+" A"+x.circularPathData.leftLargeArcRadius+" "+x.circularPathData.leftLargeArcRadius+" 0 0 1 "+x.circularPathData.leftInnerExtent+" "+x.circularPathData.verticalFullExtent+" L"+x.circularPathData.rightInnerExtent+" "+x.circularPathData.verticalFullExtent+" A"+x.circularPathData.rightLargeArcRadius+" "+x.circularPathData.rightLargeArcRadius+" 0 0 1 "+x.circularPathData.rightFullExtent+" "+x.circularPathData.verticalRightInnerExtent+" L"+x.circularPathData.rightFullExtent+" "+(x.circularPathData.targetY+x.circularPathData.rightSmallArcRadius)+" A"+x.circularPathData.rightLargeArcRadius+" "+x.circularPathData.rightSmallArcRadius+" 0 0 1 "+x.circularPathData.rightInnerExtent+" "+x.circularPathData.targetY+" L"+x.circularPathData.targetX+" "+x.circularPathData.targetY;else{var J=(0,F.h5)().source(function(i){return[i.source.x0+(i.source.x1-i.source.x0),i.y0]}).target(function(i){return[i.target.x0,i.y1]});x.path=J(x)}})}function sortLinkColumnAscending(i,o){return linkColumnDistance(i)==linkColumnDistance(o)?"bottom"==i.circularLinkType?sortLinkSourceYDescending(i,o):sortLinkSourceYAscending(i,o):linkColumnDistance(o)-linkColumnDistance(i)}function sortLinkSourceYAscending(i,o){return i.y0-o.y0}function sortLinkSourceYDescending(i,o){return o.y0-i.y0}function sortLinkTargetYAscending(i,o){return i.y1-o.y1}function sortLinkTargetYDescending(i,o){return o.y1-i.y1}function linkColumnDistance(i){return i.target.column-i.source.column}function linkXLength(i){return i.target.x0-i.source.x1}function linkPerpendicularYToLinkSource(i,o){var s=linkAngle(i),x=linkXLength(o)/Math.tan(s);return"up"==incline(i)?i.y1+x:i.y1-x}function linkPerpendicularYToLinkTarget(i,o){var s=linkAngle(i),x=linkXLength(o)/Math.tan(s);return"up"==incline(i)?i.y1-x:i.y1+x}function adjustNodeHeight(i,o,s,x){return i.y0+o>=s&&i.y1+o<=x&&(i.y0=i.y0+o,i.y1=i.y1+o,i.targetLinks.forEach(function(i){i.y1=i.y1+o}),i.sourceLinks.forEach(function(i){i.y0=i.y0+o})),i}function sortSourceLinks(i,o,s,x){i.nodes.forEach(function(_){x&&_.y+(_.y1-_.y0)>o&&(_.y=_.y-(_.y+(_.y1-_.y0)-o));var F=i.links.filter(function(i){return s(i.source)==s(_)}),N=F.length;N>1&&F.sort(function(i,o){if(!i.circular&&!o.circular){if(i.target.column==o.target.column||incline(i)!=incline(o))return i.y1-o.y1;if(i.target.column>o.target.column){var s=linkPerpendicularYToLinkTarget(o,i);return i.y1-s}if(o.target.column>i.target.column)return linkPerpendicularYToLinkTarget(i,o)-o.y1}return i.circular&&!o.circular?"top"==i.circularLinkType?-1:1:o.circular&&!i.circular?"top"==o.circularLinkType?1:-1:i.circular&&o.circular?i.circularLinkType===o.circularLinkType&&"top"==i.circularLinkType?i.target.column===o.target.column?i.target.y1-o.target.y1:o.target.column-i.target.column:i.circularLinkType!==o.circularLinkType||"bottom"!=i.circularLinkType?"top"==i.circularLinkType?-1:1:i.target.column===o.target.column?o.target.y1-i.target.y1:i.target.column-o.target.column:void 0});var j=_.y0;F.forEach(function(i){i.y0=j+i.width/2,j+=i.width}),F.forEach(function(i,o){if("bottom"==i.circularLinkType){for(var s=o+1,x=0;s<N;s++)x+=F[s].width;i.y0=_.y1-x-i.width/2}})})}function sortTargetLinks(i,o,s){i.nodes.forEach(function(o){var x=i.links.filter(function(i){return s(i.target)==s(o)}),_=x.length;_>1&&x.sort(function(i,o){if(!i.circular&&!o.circular){if(i.source.column==o.source.column||incline(i)!=incline(o))return i.y0-o.y0;if(o.source.column<i.source.column){var s=linkPerpendicularYToLinkSource(o,i);return i.y0-s}if(i.source.column<o.source.column)return linkPerpendicularYToLinkSource(i,o)-o.y0}return i.circular&&!o.circular?"top"==i.circularLinkType?-1:1:o.circular&&!i.circular?"top"==o.circularLinkType?1:-1:i.circular&&o.circular?i.circularLinkType===o.circularLinkType&&"top"==i.circularLinkType?i.source.column===o.source.column?i.source.y1-o.source.y1:i.source.column-o.source.column:i.circularLinkType!==o.circularLinkType||"bottom"!=i.circularLinkType?"top"==i.circularLinkType?-1:1:i.source.column===o.source.column?i.source.y1-o.source.y1:o.source.column-i.source.column:void 0});var F=o.y0;x.forEach(function(i){i.y1=F+i.width/2,F+=i.width}),x.forEach(function(i,s){if("bottom"==i.circularLinkType){for(var F=s+1,N=0;F<_;F++)N+=x[F].width;i.y1=o.y1-N-i.width/2}})})}function incline(i){return i.y0-i.y1>0?"up":"down"}function selfLinking(i,o){return o(i.source)==o(i.target)}},30838:function(i,o,s){"use strict";s.r(o),s.d(o,{sankey:function(){return sankey},sankeyCenter:function(){return center},sankeyJustify:function(){return justify},sankeyLeft:function(){return left},sankeyLinkHorizontal:function(){return sankeyLinkHorizontal},sankeyRight:function(){return right}});var x=s(33064),_=s(15140);function targetDepth(i){return i.target.depth}function left(i){return i.depth}function right(i,o){return o-1-i.height}function justify(i,o){return i.sourceLinks.length?i.depth:o-1}function center(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,x.VV)(i.sourceLinks,targetDepth)-1:0}function constant(i){return function(){return i}}function ascendingSourceBreadth(i,o){return ascendingBreadth(i.source,o.source)||i.index-o.index}function ascendingTargetBreadth(i,o){return ascendingBreadth(i.target,o.target)||i.index-o.index}function ascendingBreadth(i,o){return i.y0-o.y0}function value(i){return i.value}function nodeCenter(i){return(i.y0+i.y1)/2}function weightedSource(i){return nodeCenter(i.source)*i.value}function weightedTarget(i){return nodeCenter(i.target)*i.value}function defaultId(i){return i.index}function defaultNodes(i){return i.nodes}function defaultLinks(i){return i.links}function find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function sankey(){var i=0,o=0,s=1,F=1,N=24,j=8,G=defaultId,Z=justify,X=defaultNodes,J=defaultLinks,$=32,ee=2/3;function sankey(){var et={nodes:X.apply(null,arguments),links:J.apply(null,arguments)};return function(i){i.nodes.forEach(function(i,o){i.index=o,i.sourceLinks=[],i.targetLinks=[]});var o=(0,_.UI)(i.nodes,G);i.links.forEach(function(i,s){i.index=s;var x=i.source,_=i.target;"object"!=typeof x&&(x=i.source=find(o,x)),"object"!=typeof _&&(_=i.target=find(o,_)),x.sourceLinks.push(i),_.targetLinks.push(i)})}(et),function(i){i.nodes.forEach(function(i){i.value=Math.max((0,x.Sm)(i.sourceLinks,value),(0,x.Sm)(i.targetLinks,value))})}(et),function(o){for(x=o.nodes,_=[],F=0;x.length;++F,x=_,_=[])x.forEach(function(i){i.depth=F,i.sourceLinks.forEach(function(i){0>_.indexOf(i.target)&&_.push(i.target)})});for(x=o.nodes,_=[],F=0;x.length;++F,x=_,_=[])x.forEach(function(i){i.height=F,i.targetLinks.forEach(function(i){0>_.indexOf(i.source)&&_.push(i.source)})});var x,_,F,j=(s-i-N)/(F-1);o.nodes.forEach(function(o){o.x1=(o.x0=i+Math.max(0,Math.min(F-1,Math.floor(Z.call(null,o,F))))*j)+N})}(et),function(i){var s,N,G,Z=(0,_.b1)().key(function(i){return i.x0}).sortKeys(x.j2).entries(i.nodes).map(function(i){return i.values});s=(0,x.Fp)(Z,function(i){return i.length}),j>(N=ee*(F-o)/(s-1))&&(j=N),G=(0,x.VV)(Z,function(i){return(F-o-(i.length-1)*j)/(0,x.Sm)(i,value)}),Z.forEach(function(i){i.forEach(function(i,o){i.y1=(i.y0=o)+i.value*G})}),i.links.forEach(function(i){i.width=i.value*G}),resolveCollisions();for(var X=1,J=$;J>0;--J)(function(i){Z.slice().reverse().forEach(function(o){o.forEach(function(o){if(o.sourceLinks.length){var s=((0,x.Sm)(o.sourceLinks,weightedTarget)/(0,x.Sm)(o.sourceLinks,value)-nodeCenter(o))*i;o.y0+=s,o.y1+=s}})})})(X*=.99),resolveCollisions(),function(i){Z.forEach(function(o){o.forEach(function(o){if(o.targetLinks.length){var s=((0,x.Sm)(o.targetLinks,weightedSource)/(0,x.Sm)(o.targetLinks,value)-nodeCenter(o))*i;o.y0+=s,o.y1+=s}})})}(X),resolveCollisions();function resolveCollisions(){Z.forEach(function(i){var s,x,_,N=o,G=i.length;for(i.sort(ascendingBreadth),_=0;_<G;++_)(x=N-(s=i[_]).y0)>0&&(s.y0+=x,s.y1+=x),N=s.y1+j;if((x=N-j-F)>0)for(N=s.y0-=x,s.y1-=x,_=G-2;_>=0;--_)(x=(s=i[_]).y1+j-N)>0&&(s.y0-=x,s.y1-=x),N=s.y0})}}(et,$),computeLinkBreadths(et),et}function computeLinkBreadths(i){i.nodes.forEach(function(i){i.sourceLinks.sort(ascendingTargetBreadth),i.targetLinks.sort(ascendingSourceBreadth)}),i.nodes.forEach(function(i){var o=i.y0,s=o;i.sourceLinks.forEach(function(i){i.y0=o+i.width/2,o+=i.width}),i.targetLinks.forEach(function(i){i.y1=s+i.width/2,s+=i.width})})}return sankey.update=function(i){return computeLinkBreadths(i),i},sankey.nodeId=function(i){return arguments.length?(G="function"==typeof i?i:constant(i),sankey):G},sankey.nodeAlign=function(i){return arguments.length?(Z="function"==typeof i?i:constant(i),sankey):Z},sankey.nodeWidth=function(i){return arguments.length?(N=+i,sankey):N},sankey.nodePadding=function(i){return arguments.length?(j=+i,sankey):j},sankey.nodes=function(i){return arguments.length?(X="function"==typeof i?i:constant(i),sankey):X},sankey.links=function(i){return arguments.length?(J="function"==typeof i?i:constant(i),sankey):J},sankey.size=function(x){return arguments.length?(i=o=0,s=+x[0],F=+x[1],sankey):[s-i,F-o]},sankey.extent=function(x){return arguments.length?(i=+x[0][0],s=+x[1][0],o=+x[0][1],F=+x[1][1],sankey):[[i,o],[s,F]]},sankey.iterations=function(i){return arguments.length?($=+i,sankey):$},sankey}var F=s(45879);function horizontalSource(i){return[i.source.x1,i.y0]}function horizontalTarget(i){return[i.target.x0,i.y1]}function sankeyLinkHorizontal(){return(0,F.h5)().source(horizontalSource).target(horizontalTarget)}},39898:function(i,o,s){var x,_;(function(){var F={version:"3.8.0"},N=[].slice,d3_array=function(i){return N.call(i)},j=self.document;function d3_documentElement(i){return i&&(i.ownerDocument||i.document||i).documentElement}function d3_window(i){return i&&(i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView)}if(j)try{d3_array(j.documentElement.childNodes)[0].nodeType}catch(i){d3_array=function(i){for(var o=i.length,s=Array(o);o--;)s[o]=i[o];return s}}if(Date.now||(Date.now=function(){return+new Date}),j)try{j.createElement("DIV").style.setProperty("opacity",0,"")}catch(i){var G=this.Element.prototype,Z=G.setAttribute,X=G.setAttributeNS,J=this.CSSStyleDeclaration.prototype,$=J.setProperty;G.setAttribute=function(i,o){Z.call(this,i,o+"")},G.setAttributeNS=function(i,o,s){X.call(this,i,o,s+"")},J.setProperty=function(i,o,s){$.call(this,i,o+"",s)}}function d3_ascending(i,o){return i<o?-1:i>o?1:i>=o?0:NaN}function d3_number(i){return null===i?NaN:+i}function d3_numeric(i){return!isNaN(i)}function d3_bisector(i){return{left:function(o,s,x,_){for(arguments.length<3&&(x=0),arguments.length<4&&(_=o.length);x<_;){var F=x+_>>>1;0>i(o[F],s)?x=F+1:_=F}return x},right:function(o,s,x,_){for(arguments.length<3&&(x=0),arguments.length<4&&(_=o.length);x<_;){var F=x+_>>>1;i(o[F],s)>0?_=F:x=F+1}return x}}}F.ascending=d3_ascending,F.descending=function(i,o){return o<i?-1:o>i?1:o>=i?0:NaN},F.min=function(i,o){var s,x,_=-1,F=i.length;if(1==arguments.length){for(;++_<F;)if(null!=(x=i[_])&&x>=x){s=x;break}for(;++_<F;)null!=(x=i[_])&&s>x&&(s=x)}else{for(;++_<F;)if(null!=(x=o.call(i,i[_],_))&&x>=x){s=x;break}for(;++_<F;)null!=(x=o.call(i,i[_],_))&&s>x&&(s=x)}return s},F.max=function(i,o){var s,x,_=-1,F=i.length;if(1==arguments.length){for(;++_<F;)if(null!=(x=i[_])&&x>=x){s=x;break}for(;++_<F;)null!=(x=i[_])&&x>s&&(s=x)}else{for(;++_<F;)if(null!=(x=o.call(i,i[_],_))&&x>=x){s=x;break}for(;++_<F;)null!=(x=o.call(i,i[_],_))&&x>s&&(s=x)}return s},F.extent=function(i,o){var s,x,_,F=-1,N=i.length;if(1==arguments.length){for(;++F<N;)if(null!=(x=i[F])&&x>=x){s=_=x;break}for(;++F<N;)null!=(x=i[F])&&(s>x&&(s=x),_<x&&(_=x))}else{for(;++F<N;)if(null!=(x=o.call(i,i[F],F))&&x>=x){s=_=x;break}for(;++F<N;)null!=(x=o.call(i,i[F],F))&&(s>x&&(s=x),_<x&&(_=x))}return[s,_]},F.sum=function(i,o){var s,x=0,_=i.length,F=-1;if(1==arguments.length)for(;++F<_;)d3_numeric(s=+i[F])&&(x+=s);else for(;++F<_;)d3_numeric(s=+o.call(i,i[F],F))&&(x+=s);return x},F.mean=function(i,o){var s,x=0,_=i.length,F=-1,N=_;if(1==arguments.length)for(;++F<_;)d3_numeric(s=d3_number(i[F]))?x+=s:--N;else for(;++F<_;)d3_numeric(s=d3_number(o.call(i,i[F],F)))?x+=s:--N;if(N)return x/N},F.quantile=function(i,o){var s=(i.length-1)*o+1,x=Math.floor(s),_=+i[x-1],F=s-x;return F?_+F*(i[x]-_):_},F.median=function(i,o){var s,x=[],_=i.length,N=-1;if(1==arguments.length)for(;++N<_;)d3_numeric(s=d3_number(i[N]))&&x.push(s);else for(;++N<_;)d3_numeric(s=d3_number(o.call(i,i[N],N)))&&x.push(s);if(x.length)return F.quantile(x.sort(d3_ascending),.5)},F.variance=function(i,o){var s,x,_=i.length,F=0,N=0,j=-1,G=0;if(1==arguments.length)for(;++j<_;)d3_numeric(s=d3_number(i[j]))&&(x=s-F,F+=x/++G,N+=x*(s-F));else for(;++j<_;)d3_numeric(s=d3_number(o.call(i,i[j],j)))&&(x=s-F,F+=x/++G,N+=x*(s-F));if(G>1)return N/(G-1)},F.deviation=function(){var i=F.variance.apply(this,arguments);return i?Math.sqrt(i):i};var ee=d3_bisector(d3_ascending);function d3_transposeLength(i){return i.length}F.bisectLeft=ee.left,F.bisect=F.bisectRight=ee.right,F.bisector=function(i){return d3_bisector(1===i.length?function(o,s){return d3_ascending(i(o),s)}:i)},F.shuffle=function(i,o,s){(F=arguments.length)<3&&(s=i.length,F<2&&(o=0));for(var x,_,F=s-o;F;)_=Math.random()*F--|0,x=i[F+o],i[F+o]=i[_+o],i[_+o]=x;return i},F.permute=function(i,o){for(var s=o.length,x=Array(s);s--;)x[s]=i[o[s]];return x},F.pairs=function(i){for(var o=0,s=i.length-1,x=i[0],_=Array(s<0?0:s);o<s;)_[o]=[x,x=i[++o]];return _},F.transpose=function(i){if(!(_=i.length))return[];for(var o=-1,s=F.min(i,d3_transposeLength),x=Array(s);++o<s;)for(var _,N=-1,j=x[o]=Array(_);++N<_;)j[N]=i[N][o];return x},F.zip=function(){return F.transpose(arguments)},F.keys=function(i){var o=[];for(var s in i)o.push(s);return o},F.values=function(i){var o=[];for(var s in i)o.push(i[s]);return o},F.entries=function(i){var o=[];for(var s in i)o.push({key:s,value:i[s]});return o},F.merge=function(i){for(var o,s,x,_=i.length,F=-1,N=0;++F<_;)N+=i[F].length;for(s=Array(N);--_>=0;)for(o=(x=i[_]).length;--o>=0;)s[--N]=x[o];return s};var et=Math.abs;function d3_class(i,o){for(var s in o)Object.defineProperty(i.prototype,s,{value:o[s],enumerable:!1})}function d3_Map(){this._=Object.create(null)}function d3_map_escape(i){return"__proto__"==(i+="")||"\x00"===i[0]?"\x00"+i:i}function d3_map_unescape(i){return"\x00"===(i+="")[0]?i.slice(1):i}function d3_map_has(i){return d3_map_escape(i) in this._}function d3_map_remove(i){return(i=d3_map_escape(i))in this._&&delete this._[i]}function d3_map_keys(){var i=[];for(var o in this._)i.push(d3_map_unescape(o));return i}function d3_map_size(){var i=0;for(var o in this._)++i;return i}function d3_map_empty(){for(var i in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(i){return i}function d3_vendorSymbol(i,o){if(o in i)return o;o=o.charAt(0).toUpperCase()+o.slice(1);for(var s=0,x=er.length;s<x;++s){var _=er[s]+o;if(_ in i)return _}}F.range=function(i,o,s){if(arguments.length<3&&(s=1,arguments.length<2&&(o=i,i=0)),(o-i)/s==1/0)throw Error("infinite range");var x,_=[],F=function(i){for(var o=1;i*o%1;)o*=10;return o}(et(s)),N=-1;if(i*=F,o*=F,(s*=F)<0)for(;(x=i+s*++N)>o;)_.push(x/F);else for(;(x=i+s*++N)<o;)_.push(x/F);return _},F.map=function(i,o){var s=new d3_Map;if(i instanceof d3_Map)i.forEach(function(i,o){s.set(i,o)});else if(Array.isArray(i)){var x,_=-1,F=i.length;if(1==arguments.length)for(;++_<F;)s.set(_,i[_]);else for(;++_<F;)s.set(o.call(i,x=i[_],_),x)}else for(var N in i)s.set(N,i[N]);return s},d3_class(d3_Map,{has:d3_map_has,get:function(i){return this._[d3_map_escape(i)]},set:function(i,o){return this._[d3_map_escape(i)]=o},remove:d3_map_remove,keys:d3_map_keys,values:function(){var i=[];for(var o in this._)i.push(this._[o]);return i},entries:function(){var i=[];for(var o in this._)i.push({key:d3_map_unescape(o),value:this._[o]});return i},size:d3_map_size,empty:d3_map_empty,forEach:function(i){for(var o in this._)i.call(this,d3_map_unescape(o),this._[o])}}),F.nest=function(){var i,o,s={},x=[],_=[];function map(_,F,N){if(N>=x.length)return o?o.call(s,F):i?F.sort(i):F;for(var j,G,Z,X,J=-1,$=F.length,ee=x[N++],et=new d3_Map;++J<$;)(X=et.get(j=ee(G=F[J])))?X.push(G):et.set(j,[G]);return _?(G=_(),Z=function(i,o){G.set(i,map(_,o,N))}):(G={},Z=function(i,o){G[i]=map(_,o,N)}),et.forEach(Z),G}return s.map=function(i,o){return map(o,i,0)},s.entries=function(i){return function entries(i,o){if(o>=x.length)return i;var s=[],F=_[o++];return i.forEach(function(i,x){s.push({key:i,values:entries(x,o)})}),F?s.sort(function(i,o){return F(i.key,o.key)}):s}(map(F.map,i,0),0)},s.key=function(i){return x.push(i),s},s.sortKeys=function(i){return _[x.length-1]=i,s},s.sortValues=function(o){return i=o,s},s.rollup=function(i){return o=i,s},s},F.set=function(i){var o=new d3_Set;if(i)for(var s=0,x=i.length;s<x;++s)o.add(i[s]);return o},d3_class(d3_Set,{has:d3_map_has,add:function(i){return this._[d3_map_escape(i+="")]=!0,i},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(i){for(var o in this._)i.call(this,d3_map_unescape(o))}}),F.behavior={},F.rebind=function(i,o){for(var s,x=1,_=arguments.length;++x<_;)i[s=arguments[x]]=function(i,o,s){return function(){var x=s.apply(o,arguments);return x===o?i:x}}(i,o,o[s]);return i};var er=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(i){var o=[],s=new d3_Map;function event(){for(var s,x=o,_=-1,F=x.length;++_<F;)(s=x[_].on)&&s.apply(this,arguments);return i}return event.on=function(x,_){var F,N=s.get(x);return arguments.length<2?N&&N.on:(N&&(N.on=null,o=o.slice(0,F=o.indexOf(N)).concat(o.slice(F+1)),s.remove(x)),_&&o.push(s.set(x,{on:_})),i)},event}function d3_eventPreventDefault(){F.event.preventDefault()}function d3_eventSource(){for(var i,o=F.event;i=o.sourceEvent;)o=i;return o}function d3_eventDispatch(i){for(var o=new d3_dispatch,s=0,x=arguments.length;++s<x;)o[arguments[s]]=d3_dispatch_event(o);return o.of=function(s,x){return function(_){try{var N=_.sourceEvent=F.event;_.target=i,F.event=_,o[_.type].apply(s,x)}finally{F.event=N}}},o}F.dispatch=function(){for(var i=new d3_dispatch,o=-1,s=arguments.length;++o<s;)i[arguments[o]]=d3_dispatch_event(i);return i},d3_dispatch.prototype.on=function(i,o){var s=i.indexOf("."),x="";if(s>=0&&(x=i.slice(s+1),i=i.slice(0,s)),i)return arguments.length<2?this[i].on(x):this[i].on(x,o);if(2==arguments.length){if(null==o)for(i in this)this.hasOwnProperty(i)&&this[i].on(x,null);return this}},F.event=null,F.requote=function(i){return i.replace(en,"\\$&")};var en=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ei={}.__proto__?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)i[s]=o[s]};function d3_selection(i){return ei(i,eo),i}var d3_select=function(i,o){return o.querySelector(i)},d3_selectAll=function(i,o){return o.querySelectorAll(i)},d3_selectMatches=function(i,o){var s=i.matches||i[d3_vendorSymbol(i,"matchesSelector")];return(d3_selectMatches=function(i,o){return s.call(i,o)})(i,o)};"function"==typeof Sizzle&&(d3_select=function(i,o){return Sizzle(i,o)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),F.selection=function(){return F.select(j.documentElement)};var eo=F.selection.prototype=[];function d3_selection_selector(i){return"function"==typeof i?i:function(){return d3_select(i,this)}}function d3_selection_selectorAll(i){return"function"==typeof i?i:function(){return d3_selectAll(i,this)}}eo.select=function(i){var o,s,x,_,F=[];i=d3_selection_selector(i);for(var N=-1,j=this.length;++N<j;){F.push(o=[]),o.parentNode=(x=this[N]).parentNode;for(var G=-1,Z=x.length;++G<Z;)(_=x[G])?(o.push(s=i.call(_,_.__data__,G,N)),s&&"__data__"in _&&(s.__data__=_.__data__)):o.push(null)}return d3_selection(F)},eo.selectAll=function(i){var o,s,x=[];i=d3_selection_selectorAll(i);for(var _=-1,F=this.length;++_<F;)for(var N=this[_],j=-1,G=N.length;++j<G;)(s=N[j])&&(x.push(o=d3_array(i.call(s,s.__data__,j,_))),o.parentNode=s);return d3_selection(x)};var es="http://www.w3.org/1999/xhtml",el={svg:"http://www.w3.org/2000/svg",xhtml:es,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function d3_selection_attr(i,o){return i=F.ns.qualify(i),null==o?i.local?function(){this.removeAttributeNS(i.space,i.local)}:function(){this.removeAttribute(i)}:"function"==typeof o?i.local?function(){var s=o.apply(this,arguments);null==s?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,s)}:function(){var s=o.apply(this,arguments);null==s?this.removeAttribute(i):this.setAttribute(i,s)}:i.local?function(){this.setAttributeNS(i.space,i.local,o)}:function(){this.setAttribute(i,o)}}function d3_collapse(i){return i.trim().replace(/\s+/g," ")}function d3_selection_classedRe(i){return RegExp("(?:^|\\s+)"+F.requote(i)+"(?:\\s+|$)","g")}function d3_selection_classes(i){return(i+"").trim().split(/^|\s+/)}function d3_selection_classed(i,o){var s=(i=d3_selection_classes(i).map(d3_selection_classedName)).length;return"function"==typeof o?function(){for(var x=-1,_=o.apply(this,arguments);++x<s;)i[x](this,_)}:function(){for(var x=-1;++x<s;)i[x](this,o)}}function d3_selection_classedName(i){var o=d3_selection_classedRe(i);return function(s,x){if(_=s.classList)return x?_.add(i):_.remove(i);var _=s.getAttribute("class")||"";x?(o.lastIndex=0,o.test(_)||s.setAttribute("class",d3_collapse(_+" "+i))):s.setAttribute("class",d3_collapse(_.replace(o," ")))}}function d3_selection_style(i,o,s){return null==o?function(){this.style.removeProperty(i)}:"function"==typeof o?function(){var x=o.apply(this,arguments);null==x?this.style.removeProperty(i):this.style.setProperty(i,x,s)}:function(){this.style.setProperty(i,o,s)}}function d3_selection_property(i,o){return null==o?function(){delete this[i]}:"function"==typeof o?function(){var s=o.apply(this,arguments);null==s?delete this[i]:this[i]=s}:function(){this[i]=o}}function d3_selection_creator(i){return"function"==typeof i?i:(i=F.ns.qualify(i)).local?function(){return this.ownerDocument.createElementNS(i.space,i.local)}:function(){var o=this.ownerDocument,s=this.namespaceURI;return s===es&&o.documentElement.namespaceURI===es?o.createElement(i):o.createElementNS(s,i)}}function d3_selectionRemove(){var i=this.parentNode;i&&i.removeChild(this)}function d3_selection_dataNode(i){return{__data__:i}}function d3_selection_filter(i){return function(){return d3_selectMatches(this,i)}}function d3_selection_sortComparator(i){return arguments.length||(i=d3_ascending),function(o,s){return o&&s?i(o.__data__,s.__data__):!o-!s}}function d3_selection_each(i,o){for(var s=0,x=i.length;s<x;s++)for(var _,F=i[s],N=0,j=F.length;N<j;N++)(_=F[N])&&o(_,N,s);return i}function d3_selection_enter(i){return ei(i,ec),i}F.ns={prefix:el,qualify:function(i){var o=i.indexOf(":"),s=i;return o>=0&&"xmlns"!==(s=i.slice(0,o))&&(i=i.slice(o+1)),el.hasOwnProperty(s)?{space:el[s],local:i}:i}},eo.attr=function(i,o){if(arguments.length<2){if("string"==typeof i){var s=this.node();return(i=F.ns.qualify(i)).local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}for(o in i)this.each(d3_selection_attr(o,i[o]));return this}return this.each(d3_selection_attr(i,o))},eo.classed=function(i,o){if(arguments.length<2){if("string"==typeof i){var s=this.node(),x=(i=d3_selection_classes(i)).length,_=-1;if(o=s.classList){for(;++_<x;)if(!o.contains(i[_]))return!1}else for(o=s.getAttribute("class");++_<x;)if(!d3_selection_classedRe(i[_]).test(o))return!1;return!0}for(o in i)this.each(d3_selection_classed(o,i[o]));return this}return this.each(d3_selection_classed(i,o))},eo.style=function(i,o,s){var x=arguments.length;if(x<3){if("string"!=typeof i){for(s in x<2&&(o=""),i)this.each(d3_selection_style(s,i[s],o));return this}if(x<2){var _=this.node();return d3_window(_).getComputedStyle(_,null).getPropertyValue(i)}s=""}return this.each(d3_selection_style(i,o,s))},eo.property=function(i,o){if(arguments.length<2){if("string"==typeof i)return this.node()[i];for(o in i)this.each(d3_selection_property(o,i[o]));return this}return this.each(d3_selection_property(i,o))},eo.text=function(i){return arguments.length?this.each("function"==typeof i?function(){var o=i.apply(this,arguments);this.textContent=null==o?"":o}:null==i?function(){this.textContent=""}:function(){this.textContent=i}):this.node().textContent},eo.html=function(i){return arguments.length?this.each("function"==typeof i?function(){var o=i.apply(this,arguments);this.innerHTML=null==o?"":o}:null==i?function(){this.innerHTML=""}:function(){this.innerHTML=i}):this.node().innerHTML},eo.append=function(i){return i=d3_selection_creator(i),this.select(function(){return this.appendChild(i.apply(this,arguments))})},eo.insert=function(i,o){return i=d3_selection_creator(i),o=d3_selection_selector(o),this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})},eo.remove=function(){return this.each(d3_selectionRemove)},eo.data=function(i,o){var s,x,_=-1,F=this.length;if(!arguments.length){for(i=Array(F=(s=this[0]).length);++_<F;)(x=s[_])&&(i[_]=x.__data__);return i}function bind(i,s){var x,_,F,Z=i.length,X=s.length,J=Math.min(Z,X),$=Array(X),ee=Array(X),et=Array(Z);if(o){var er,en=new d3_Map,ei=Array(Z);for(x=-1;++x<Z;)(_=i[x])&&(en.has(er=o.call(_,_.__data__,x))?et[x]=_:en.set(er,_),ei[x]=er);for(x=-1;++x<X;)(_=en.get(er=o.call(s,F=s[x],x)))?!0!==_&&($[x]=_,_.__data__=F):ee[x]=d3_selection_dataNode(F),en.set(er,!0);for(x=-1;++x<Z;)x in ei&&!0!==en.get(ei[x])&&(et[x]=i[x])}else{for(x=-1;++x<J;)_=i[x],F=s[x],_?(_.__data__=F,$[x]=_):ee[x]=d3_selection_dataNode(F);for(;x<X;++x)ee[x]=d3_selection_dataNode(s[x]);for(;x<Z;++x)et[x]=i[x]}ee.update=$,ee.parentNode=$.parentNode=et.parentNode=i.parentNode,N.push(ee),j.push($),G.push(et)}var N=d3_selection_enter([]),j=d3_selection([]),G=d3_selection([]);if("function"==typeof i)for(;++_<F;)bind(s=this[_],i.call(s,s.parentNode.__data__,_));else for(;++_<F;)bind(s=this[_],i);return j.enter=function(){return N},j.exit=function(){return G},j},eo.datum=function(i){return arguments.length?this.property("__data__",i):this.property("__data__")},eo.filter=function(i){var o,s,x,_=[];"function"!=typeof i&&(i=d3_selection_filter(i));for(var F=0,N=this.length;F<N;F++){_.push(o=[]),o.parentNode=(s=this[F]).parentNode;for(var j=0,G=s.length;j<G;j++)(x=s[j])&&i.call(x,x.__data__,j,F)&&o.push(x)}return d3_selection(_)},eo.order=function(){for(var i=-1,o=this.length;++i<o;)for(var s,x=this[i],_=x.length-1,F=x[_];--_>=0;)(s=x[_])&&(F&&F!==s.nextSibling&&F.parentNode.insertBefore(s,F),F=s);return this},eo.sort=function(i){i=d3_selection_sortComparator.apply(this,arguments);for(var o=-1,s=this.length;++o<s;)this[o].sort(i);return this.order()},eo.each=function(i){return d3_selection_each(this,function(o,s,x){i.call(o,o.__data__,s,x)})},eo.call=function(i){var o=d3_array(arguments);return i.apply(o[0]=this,o),this},eo.empty=function(){return!this.node()},eo.node=function(){for(var i=0,o=this.length;i<o;i++)for(var s=this[i],x=0,_=s.length;x<_;x++){var F=s[x];if(F)return F}return null},eo.size=function(){var i=0;return d3_selection_each(this,function(){++i}),i};var ec=[];function d3_selection_on(i,o,s){var x="__on"+i,_=i.indexOf("."),N=d3_selection_onListener;_>0&&(i=i.slice(0,_));var j=eu.get(i);function onRemove(){var o=this[x];o&&(this.removeEventListener(i,o,o.$),delete this[x])}return j&&(i=j,N=d3_selection_onFilter),_?o?function(){var _=N(o,d3_array(arguments));onRemove.call(this),this.addEventListener(i,this[x]=_,_.$=s),_._=o}:onRemove:o?d3_noop:function(){var o,s=RegExp("^__on([^.]+)"+F.requote(i)+"$");for(var x in this)if(o=x.match(s)){var _=this[x];this.removeEventListener(o[1],_,_.$),delete this[x]}}}F.selection.enter=d3_selection_enter,F.selection.enter.prototype=ec,ec.append=eo.append,ec.empty=eo.empty,ec.node=eo.node,ec.call=eo.call,ec.size=eo.size,ec.select=function(i){for(var o,s,x,_,F,N=[],j=-1,G=this.length;++j<G;){x=(_=this[j]).update,N.push(o=[]),o.parentNode=_.parentNode;for(var Z=-1,X=_.length;++Z<X;)(F=_[Z])?(o.push(x[Z]=s=i.call(_.parentNode,F.__data__,Z,j)),s.__data__=F.__data__):o.push(null)}return d3_selection(N)},ec.insert=function(i,o){var s,x,_;return arguments.length<2&&(s=this,o=function(i,o,F){var N,j=s[F].update,G=j.length;for(F!=_&&(_=F,x=0),o>=x&&(x=o+1);!(N=j[x])&&++x<G;);return N}),eo.insert.call(this,i,o)},F.select=function(i){var o;return"string"==typeof i?(o=[d3_select(i,j)]).parentNode=j.documentElement:(o=[i]).parentNode=d3_documentElement(i),d3_selection([o])},F.selectAll=function(i){var o;return"string"==typeof i?(o=d3_array(d3_selectAll(i,j))).parentNode=j.documentElement:(o=d3_array(i)).parentNode=null,d3_selection([o])},eo.on=function(i,o,s){var x=arguments.length;if(x<3){if("string"!=typeof i){for(s in x<2&&(o=!1),i)this.each(d3_selection_on(s,i[s],o));return this}if(x<2)return(x=this.node()["__on"+i])&&x._;s=!1}return this.each(d3_selection_on(i,o,s))};var eu=F.map({mouseenter:"mouseover",mouseleave:"mouseout"});function d3_selection_onListener(i,o){return function(s){var x=F.event;F.event=s,o[0]=this.__data__;try{i.apply(this,o)}finally{F.event=x}}}function d3_selection_onFilter(i,o){var s=d3_selection_onListener(i,o);return function(i){var o=i.relatedTarget;o&&(o===this||8&o.compareDocumentPosition(this))||s.call(this,i)}}j&&eu.forEach(function(i){"on"+i in j&&eu.remove(i)});var ef,eh=0;function d3_event_dragSuppress(i){var o=".dragsuppress-"+ ++eh,s="click"+o,x=F.select(d3_window(i)).on("touchmove"+o,d3_eventPreventDefault).on("dragstart"+o,d3_eventPreventDefault).on("selectstart"+o,d3_eventPreventDefault);if(null==ef&&(ef=!("onselectstart"in i)&&d3_vendorSymbol(i.style,"userSelect")),ef){var _=d3_documentElement(i).style,N=_[ef];_[ef]="none"}return function(i){if(x.on(o,null),ef&&(_[ef]=N),i){var off=function(){x.on(s,null)};x.on(s,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0)}}}F.mouse=function(i){return d3_mousePoint(i,d3_eventSource())};var ed=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(i,o){o.changedTouches&&(o=o.changedTouches[0]);var s=i.ownerSVGElement||i;if(s.createSVGPoint){var x=s.createSVGPoint();if(ed<0){var _=d3_window(i);if(_.scrollX||_.scrollY){var N=(s=F.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();ed=!(N.f||N.e),s.remove()}}return ed?(x.x=o.pageX,x.y=o.pageY):(x.x=o.clientX,x.y=o.clientY),[(x=x.matrixTransform(i.getScreenCTM().inverse())).x,x.y]}var j=i.getBoundingClientRect();return[o.clientX-j.left-i.clientLeft,o.clientY-j.top-i.clientTop]}function d3_behavior_dragTouchId(){return F.event.changedTouches[0].identifier}F.touch=function(i,o,s){if(arguments.length<3&&(s=o,o=d3_eventSource().changedTouches),o){for(var x,_=0,F=o.length;_<F;++_)if((x=o[_]).identifier===s)return d3_mousePoint(i,x)}},F.behavior.drag=function(){var i=d3_eventDispatch(drag,"drag","dragstart","dragend"),o=null,s=dragstart(d3_noop,F.mouse,d3_window,"mousemove","mouseup"),x=dragstart(d3_behavior_dragTouchId,F.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",s).on("touchstart.drag",x)}function dragstart(s,x,_,N,j){return function(){var G,Z=F.event.target.correspondingElement||F.event.target,X=this.parentNode,J=i.of(this,arguments),$=0,ee=s(),et=".drag"+(null==ee?"":"-"+ee),er=F.select(_(Z)).on(N+et,function(){var i,o,s=x(X,ee);s&&(i=s[0]-ei[0],o=s[1]-ei[1],$|=i|o,ei=s,J({type:"drag",x:s[0]+G[0],y:s[1]+G[1],dx:i,dy:o}))}).on(j+et,function(){x(X,ee)&&(er.on(N+et,null).on(j+et,null),en($),J({type:"dragend"}))}),en=d3_event_dragSuppress(Z),ei=x(X,ee);o?(G=o.apply(this,arguments),G=[G.x-ei[0],G.y-ei[1]]):G=[0,0],J({type:"dragstart"})}}return drag.origin=function(i){return arguments.length?(o=i,drag):o},F.rebind(drag,i,"on")},F.touches=function(i,o){return arguments.length<2&&(o=d3_eventSource().touches),o?d3_array(o).map(function(o){var s=d3_mousePoint(i,o);return s.identifier=o.identifier,s}):[]};var ep=1e-6*1e-6,eg=Math.PI,em=2*eg,ey=em-1e-6,ev=eg/2,ex=eg/180,e_=180/eg;function d3_asin(i){return i>1?ev:i<-1?-ev:Math.asin(i)}function d3_cosh(i){return((i=Math.exp(i))+1/i)/2}var ew=Math.SQRT2;F.interpolateZoom=function(i,o){var s,x,_=i[0],F=i[1],N=i[2],j=o[0],G=o[1],Z=o[2],X=j-_,J=G-F,$=X*X+J*J;if($<ep)x=Math.log(Z/N)/ew,s=function(i){return[_+i*X,F+i*J,N*Math.exp(ew*i*x)]};else{var ee=Math.sqrt($),et=(Z*Z-N*N+4*$)/(2*N*2*ee),er=(Z*Z-N*N-4*$)/(2*Z*2*ee),en=Math.log(Math.sqrt(et*et+1)-et);x=(Math.log(Math.sqrt(er*er+1)-er)-en)/ew,s=function(i){var o,s,j=i*x,G=d3_cosh(en),Z=N/(2*ee)*(G*(((o=Math.exp(2*(o=ew*j+en)))-1)/(o+1))-((s=Math.exp(s=en))-1/s)/2);return[_+Z*X,F+Z*J,N*G/d3_cosh(ew*j+en)]}}return s.duration=1e3*x,s},F.behavior.zoom=function(){var i,o,s,x,_,N,G,Z,X,J={x:0,y:0,k:1},$=[960,500],ee=eA,et=250,er=0,en="mousedown.zoom",ei="mousemove.zoom",eo="mouseup.zoom",es="touchstart.zoom",el=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");function zoom(i){i.on(en,mousedowned).on(ek+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(es,touchstarted)}function location(i){return[(i[0]-J.x)/J.k,(i[1]-J.y)/J.k]}function scaleTo(i){J.k=Math.max(ee[0],Math.min(ee[1],i))}function translateTo(i,o){var s;o=[(s=o)[0]*J.k+J.x,s[1]*J.k+J.y],J.x+=i[0]-o[0],J.y+=i[1]-o[1]}function zoomTo(i,s,x,_){i.__chart__={x:J.x,y:J.y,k:J.k},scaleTo(Math.pow(2,_)),translateTo(o=s,x),i=F.select(i),et>0&&(i=i.transition().duration(et)),i.call(zoom.event)}function rescale(){G&&G.domain(N.range().map(function(i){return(i-J.x)/J.k}).map(N.invert)),X&&X.domain(Z.range().map(function(i){return(i-J.y)/J.k}).map(Z.invert))}function zoomstarted(i){er++||i({type:"zoomstart"})}function zoomed(i){rescale(),i({type:"zoom",scale:J.k,translate:[J.x,J.y]})}function zoomended(i){--er||(i({type:"zoomend"}),o=null)}function mousedowned(){var i=this,o=el.of(i,arguments),s=0,x=F.select(d3_window(i)).on(ei,function(){s=1,translateTo(F.mouse(i),_),zoomed(o)}).on(eo,function(){x.on(ei,null).on(eo,null),N(s),zoomended(o)}),_=location(F.mouse(i)),N=d3_event_dragSuppress(i);tl.call(i),zoomstarted(o)}function touchstarted(){var i,o=this,s=el.of(o,arguments),x={},N=0,j=".zoom-"+F.event.changedTouches[0].identifier,G="touchmove"+j,Z="touchend"+j,X=[],$=F.select(o),ee=d3_event_dragSuppress(o);function relocate(){var s=F.touches(o);return i=J.k,s.forEach(function(i){i.identifier in x&&(x[i.identifier]=location(i))}),s}function started(){var i=F.event.target;F.select(i).on(G,moved).on(Z,ended),X.push(i);for(var s=F.event.changedTouches,j=0,$=s.length;j<$;++j)x[s[j].identifier]=null;var ee=relocate(),et=Date.now();if(1===ee.length){if(et-_<500){var er=ee[0];zoomTo(o,er,x[er.identifier],Math.floor(Math.log(J.k)/Math.LN2)+1),d3_eventPreventDefault()}_=et}else if(ee.length>1){var er=ee[0],en=ee[1],ei=er[0]-en[0],eo=er[1]-en[1];N=ei*ei+eo*eo}}function moved(){var j,G,Z,X,J=F.touches(o);tl.call(o);for(var $=0,ee=J.length;$<ee;++$,X=null)if(X=x[(Z=J[$]).identifier]){if(G)break;j=Z,G=X}if(X){var et=(et=Z[0]-j[0])*et+(et=Z[1]-j[1])*et,er=N&&Math.sqrt(et/N);j=[(j[0]+Z[0])/2,(j[1]+Z[1])/2],G=[(G[0]+X[0])/2,(G[1]+X[1])/2],scaleTo(er*i)}_=null,translateTo(j,G),zoomed(s)}function ended(){if(F.event.touches.length){for(var i=F.event.changedTouches,o=0,_=i.length;o<_;++o)delete x[i[o].identifier];for(var N in x)return void relocate()}F.selectAll(X).on(j,null),$.on(en,mousedowned).on(es,touchstarted),ee(),zoomended(s)}started(),zoomstarted(s),$.on(en,null).on(es,started)}function mousewheeled(){var _=el.of(this,arguments);x?clearTimeout(x):(tl.call(this),i=location(o=s||F.mouse(this)),zoomstarted(_)),x=setTimeout(function(){x=null,zoomended(_)},50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*eT())*J.k),translateTo(o,i),zoomed(_)}function dblclicked(){var i=F.mouse(this),o=Math.log(J.k)/Math.LN2;zoomTo(this,i,location(i),F.event.shiftKey?Math.ceil(o)-1:Math.floor(o)+1)}return ek||(ek="onwheel"in j?(eT=function(){return-F.event.deltaY*(F.event.deltaMode?120:1)},"wheel"):"onmousewheel"in j?(eT=function(){return F.event.wheelDelta},"mousewheel"):(eT=function(){return-F.event.detail},"MozMousePixelScroll")),zoom.event=function(i){i.each(function(){var i=el.of(this,arguments),s=J;tc?F.select(this).transition().each("start.zoom",function(){J=this.__chart__||{x:0,y:0,k:1},zoomstarted(i)}).tween("zoom:zoom",function(){var x=$[0],_=$[1],N=o?o[0]:x/2,j=o?o[1]:_/2,G=F.interpolateZoom([(N-J.x)/J.k,(j-J.y)/J.k,x/J.k],[(N-s.x)/s.k,(j-s.y)/s.k,x/s.k]);return function(o){var s=G(o),_=x/s[2];this.__chart__=J={x:N-s[0]*_,y:j-s[1]*_,k:_},zoomed(i)}}).each("interrupt.zoom",function(){zoomended(i)}).each("end.zoom",function(){zoomended(i)}):(this.__chart__=J,zoomstarted(i),zoomed(i),zoomended(i))})},zoom.translate=function(i){return arguments.length?(J={x:+i[0],y:+i[1],k:J.k},rescale(),zoom):[J.x,J.y]},zoom.scale=function(i){return arguments.length?(J={x:J.x,y:J.y,k:null},scaleTo(+i),rescale(),zoom):J.k},zoom.scaleExtent=function(i){return arguments.length?(ee=null==i?eA:[+i[0],+i[1]],zoom):ee},zoom.center=function(i){return arguments.length?(s=i&&[+i[0],+i[1]],zoom):s},zoom.size=function(i){return arguments.length?($=i&&[+i[0],+i[1]],zoom):$},zoom.duration=function(i){return arguments.length?(et=+i,zoom):et},zoom.x=function(i){return arguments.length?(G=i,N=i.copy(),J={x:0,y:0,k:1},zoom):G},zoom.y=function(i){return arguments.length?(X=i,Z=i.copy(),J={x:0,y:0,k:1},zoom):X},F.rebind(zoom,el,"on")};var eT,ek,eA=[0,1/0];function d3_color(){}function d3_hsl(i,o,s){return this instanceof d3_hsl?void(this.h=+i,this.s=+o,this.l=+s):arguments.length<2?i instanceof d3_hsl?new d3_hsl(i.h,i.s,i.l):d3_rgb_parse(""+i,d3_rgb_hsl,d3_hsl):new d3_hsl(i,o,s)}F.color=d3_color,d3_color.prototype.toString=function(){return this.rgb()+""},F.hsl=d3_hsl;var eS=d3_hsl.prototype=new d3_color;function d3_hsl_rgb(i,o,s){var x,_;function vv(i){var o;return Math.round(255*(((o=i)>360?o-=360:o<0&&(o+=360),o<60)?x+(_-x)*o/60:o<180?_:o<240?x+(_-x)*(240-o)/60:x))}return i=isNaN(i)?0:(i%=360)<0?i+360:i,o=isNaN(o)?0:o<0?0:o>1?1:o,_=(s=s<0?0:s>1?1:s)<=.5?s*(1+o):s+o-s*o,x=2*s-_,new d3_rgb(vv(i+120),vv(i),vv(i-120))}function d3_hcl(i,o,s){return this instanceof d3_hcl?void(this.h=+i,this.c=+o,this.l=+s):arguments.length<2?i instanceof d3_hcl?new d3_hcl(i.h,i.c,i.l):i instanceof d3_lab?d3_lab_hcl(i.l,i.a,i.b):d3_lab_hcl((i=d3_rgb_lab((i=F.rgb(i)).r,i.g,i.b)).l,i.a,i.b):new d3_hcl(i,o,s)}eS.brighter=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_hsl(this.h,this.s,this.l/i)},eS.darker=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_hsl(this.h,this.s,i*this.l)},eS.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},F.hcl=d3_hcl;var eM=d3_hcl.prototype=new d3_color;function d3_hcl_lab(i,o,s){return isNaN(i)&&(i=0),isNaN(o)&&(o=0),new d3_lab(s,Math.cos(i*=ex)*o,Math.sin(i)*o)}function d3_lab(i,o,s){return this instanceof d3_lab?void(this.l=+i,this.a=+o,this.b=+s):arguments.length<2?i instanceof d3_lab?new d3_lab(i.l,i.a,i.b):i instanceof d3_hcl?d3_hcl_lab(i.h,i.c,i.l):d3_rgb_lab((i=d3_rgb(i)).r,i.g,i.b):new d3_lab(i,o,s)}eM.brighter=function(i){return new d3_hcl(this.h,this.c,Math.min(100,this.l+eC*(arguments.length?i:1)))},eM.darker=function(i){return new d3_hcl(this.h,this.c,Math.max(0,this.l-eC*(arguments.length?i:1)))},eM.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},F.lab=d3_lab;var eC=18,eE=d3_lab.prototype=new d3_color;function d3_lab_rgb(i,o,s){var x=(i+16)/116,_=x+o/500,F=x-s/200;return _=.95047*d3_lab_xyz(_),x=1*d3_lab_xyz(x),F=1.08883*d3_lab_xyz(F),new d3_rgb(d3_xyz_rgb(3.2404542*_-1.5371385*x-.4985314*F),d3_xyz_rgb(-.969266*_+1.8760108*x+.041556*F),d3_xyz_rgb(.0556434*_-.2040259*x+1.0572252*F))}function d3_lab_hcl(i,o,s){return i>0?new d3_hcl(Math.atan2(s,o)*e_,Math.sqrt(o*o+s*s),i):new d3_hcl(NaN,NaN,i)}function d3_lab_xyz(i){return i>.206893034?i*i*i:(i-4/29)/7.787037}function d3_xyz_lab(i){return i>.008856?Math.pow(i,1/3):7.787037*i+4/29}function d3_xyz_rgb(i){return Math.round(255*(i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055))}function d3_rgb(i,o,s){return this instanceof d3_rgb?void(this.r=~~i,this.g=~~o,this.b=~~s):arguments.length<2?i instanceof d3_rgb?new d3_rgb(i.r,i.g,i.b):d3_rgb_parse(""+i,d3_rgb,d3_hsl_rgb):new d3_rgb(i,o,s)}function d3_rgbNumber(i){return new d3_rgb(i>>16,i>>8&255,255&i)}function d3_rgbString(i){return d3_rgbNumber(i)+""}eE.brighter=function(i){return new d3_lab(Math.min(100,this.l+eC*(arguments.length?i:1)),this.a,this.b)},eE.darker=function(i){return new d3_lab(Math.max(0,this.l-eC*(arguments.length?i:1)),this.a,this.b)},eE.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},F.rgb=d3_rgb;var eL=d3_rgb.prototype=new d3_color;function d3_rgb_hex(i){return i<16?"0"+Math.max(0,i).toString(16):Math.min(255,i).toString(16)}function d3_rgb_parse(i,o,s){var x,_,F,N=0,j=0,G=0;if(x=/([a-z]+)\((.*)\)/.exec(i=i.toLowerCase()))switch(_=x[2].split(","),x[1]){case"hsl":return s(parseFloat(_[0]),parseFloat(_[1])/100,parseFloat(_[2])/100);case"rgb":return o(d3_rgb_parseNumber(_[0]),d3_rgb_parseNumber(_[1]),d3_rgb_parseNumber(_[2]))}return(F=eP.get(i))?o(F.r,F.g,F.b):(null==i||"#"!==i.charAt(0)||isNaN(F=parseInt(i.slice(1),16))||(4===i.length?(N=(N=(3840&F)>>4)>>4|N,j=(j=240&F)>>4|j,G=(G=15&F)<<4|G):7!==i.length||(N=(16711680&F)>>16,j=(65280&F)>>8,G=255&F)),o(N,j,G))}function d3_rgb_hsl(i,o,s){var x,_,F=Math.min(i/=255,o/=255,s/=255),N=Math.max(i,o,s),j=N-F,G=(N+F)/2;return j?(_=G<.5?j/(N+F):j/(2-N-F),x=(i==N?(o-s)/j+(o<s?6:0):o==N?(s-i)/j+2:(i-o)/j+4)*60):(x=NaN,_=G>0&&G<1?0:x),new d3_hsl(x,_,G)}function d3_rgb_lab(i,o,s){var x=d3_xyz_lab((.4124564*(i=d3_rgb_xyz(i))+.3575761*(o=d3_rgb_xyz(o))+.1804375*(s=d3_rgb_xyz(s)))/.95047),_=d3_xyz_lab((.2126729*i+.7151522*o+.072175*s)/1);return d3_lab(116*_-16,500*(x-_),200*(_-d3_xyz_lab((.0193339*i+.119192*o+.9503041*s)/1.08883)))}function d3_rgb_xyz(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function d3_rgb_parseNumber(i){var o=parseFloat(i);return"%"===i.charAt(i.length-1)?Math.round(2.55*o):o}eL.brighter=function(i){i=Math.pow(.7,arguments.length?i:1);var o=this.r,s=this.g,x=this.b;return o||s||x?(o&&o<30&&(o=30),s&&s<30&&(s=30),x&&x<30&&(x=30),new d3_rgb(Math.min(255,o/i),Math.min(255,s/i),Math.min(255,x/i))):new d3_rgb(30,30,30)},eL.darker=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_rgb(i*this.r,i*this.g,i*this.b)},eL.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},eL.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var eP=F.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function d3_functor(i){return"function"==typeof i?i:function(){return i}}function d3_xhrType(i){return function(o,s,x){return 2==arguments.length&&"function"==typeof s&&(x=s,s=null),d3_xhr(o,s,i,x)}}function d3_xhr(i,o,s,x){var _={},N=F.dispatch("beforesend","progress","load","error"),j={},G=new XMLHttpRequest,Z=null;function respond(){var i,o,x,F=G.status;if(!F&&((o=(i=G).responseType)&&"text"!==o?i.response:i.responseText)||F>=200&&F<300||304===F){try{x=s.call(_,G)}catch(i){N.error.call(_,i);return}N.load.call(_,x)}else N.error.call(_,G)}return self.XDomainRequest&&!("withCredentials"in G)&&/^(http(s)?:)?\/\//.test(i)&&(G=new XDomainRequest),"onload"in G?G.onload=G.onerror=respond:G.onreadystatechange=function(){G.readyState>3&&respond()},G.onprogress=function(i){var o=F.event;F.event=i;try{N.progress.call(_,G)}finally{F.event=o}},_.header=function(i,o){return(i=(i+"").toLowerCase(),arguments.length<2)?j[i]:(null==o?delete j[i]:j[i]=o+"",_)},_.mimeType=function(i){return arguments.length?(o=null==i?null:i+"",_):o},_.responseType=function(i){return arguments.length?(Z=i,_):Z},_.response=function(i){return s=i,_},["get","post"].forEach(function(i){_[i]=function(){return _.send.apply(_,[i].concat(d3_array(arguments)))}}),_.send=function(s,x,F){if(2==arguments.length&&"function"==typeof x&&(F=x,x=null),G.open(s,i,!0),null==o||"accept"in j||(j.accept=o+",*/*"),G.setRequestHeader)for(var X in j)G.setRequestHeader(X,j[X]);return null!=o&&G.overrideMimeType&&G.overrideMimeType(o),null!=Z&&(G.responseType=Z),null!=F&&_.on("error",F).on("load",function(i){F(null,i)}),N.beforesend.call(_,G),G.send(null==x?null:x),_},_.abort=function(){return G.abort(),_},F.rebind(_,N,"on"),null==x?_:_.get(1===x.length?function(i,o){x(null==i?o:null)}:x)}eP.forEach(function(i,o){eP.set(i,d3_rgbNumber(o))}),F.functor=d3_functor,F.xhr=d3_xhrType(d3_identity),F.dsv=function(i,o){var s=RegExp('["'+i+"\n]"),x=i.charCodeAt(0);function dsv(i,s,x){arguments.length<3&&(x=s,s=null);var _=d3_xhr(i,o,null==s?response:typedResponse(s),x);return _.row=function(i){return arguments.length?_.response(null==(s=i)?response:typedResponse(i)):s},_}function response(i){return dsv.parse(i.responseText)}function typedResponse(i){return function(o){return dsv.parse(o.responseText,i)}}function formatRow(o){return o.map(formatValue).join(i)}function formatValue(i){return s.test(i)?'"'+i.replace(/\"/g,'""')+'"':i}return dsv.parse=function(i,o){var s;return dsv.parseRows(i,function(i,x){if(s)return s(i,x-1);var a=function(o){for(var s={},x=i.length,_=0;_<x;++_)s[i[_]]=o[_];return s};s=o?function(i,s){return o(a(i),s)}:a})},dsv.parseRows=function(i,o){var s,_,F={},N={},j=[],G=i.length,Z=0,X=0;function token(){if(Z>=G)return N;if(_)return _=!1,F;var o=Z;if(34===i.charCodeAt(o)){for(var s=o;s++<G;)if(34===i.charCodeAt(s)){if(34!==i.charCodeAt(s+1))break;++s}Z=s+2;var j=i.charCodeAt(s+1);return 13===j?(_=!0,10===i.charCodeAt(s+2)&&++Z):10===j&&(_=!0),i.slice(o+1,s).replace(/""/g,'"')}for(;Z<G;){var j=i.charCodeAt(Z++),X=1;if(10===j)_=!0;else if(13===j)_=!0,10===i.charCodeAt(Z)&&(++Z,++X);else if(j!==x)continue;return i.slice(o,Z-X)}return i.slice(o)}for(;(s=token())!==N;){for(var J=[];s!==F&&s!==N;)J.push(s),s=token();o&&null==(J=o(J,X++))||j.push(J)}return j},dsv.format=function(o){if(Array.isArray(o[0]))return dsv.formatRows(o);var s=new d3_Set,x=[];return o.forEach(function(i){for(var o in i)s.has(o)||x.push(s.add(o))}),[x.map(formatValue).join(i)].concat(o.map(function(o){return x.map(function(i){return formatValue(o[i])}).join(i)})).join("\n")},dsv.formatRows=function(i){return i.map(formatRow).join("\n")},dsv},F.csv=F.dsv(",","text/csv"),F.tsv=F.dsv("	","text/tab-separated-values");var eI,eO,eD,eR,eB=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(i){setTimeout(i,17)};function d3_timer(i,o,s){var x=arguments.length;x<2&&(o=0),x<3&&(s=Date.now());var _={c:i,t:s+o,n:null};return eO?eO.n=_:eI=_,eO=_,eD||(eR=clearTimeout(eR),eD=1,eB(d3_timer_step)),_}function d3_timer_step(){var i=d3_timer_mark(),o=d3_timer_sweep()-i;o>24?(isFinite(o)&&(clearTimeout(eR),eR=setTimeout(d3_timer_step,o)),eD=0):(eD=1,eB(d3_timer_step))}function d3_timer_mark(){for(var i=Date.now(),o=eI;o;)i>=o.t&&o.c(i-o.t)&&(o.c=null),o=o.n;return i}function d3_timer_sweep(){for(var i,o=eI,s=1/0;o;)o.c?(o.t<s&&(s=o.t),o=(i=o).n):o=i?i.n=o.n:eI=o.n;return eO=i,s}function d3_geom_pointX(i){return i[0]}function d3_geom_pointY(i){return i[1]}function d3_geom_hullUpper(i){for(var o,s,x,_=i.length,F=[0,1],N=2,j=2;j<_;j++){for(;N>1&&0>=(o=i[F[N-2]],s=i[F[N-1]],x=i[j],(s[0]-o[0])*(x[1]-o[1])-(s[1]-o[1])*(x[0]-o[0]));)--N;F[N++]=j}return F.slice(0,N)}function d3_geom_hullOrder(i,o){return i[0]-o[0]||i[1]-o[1]}F.timer=function(){d3_timer.apply(this,arguments)},F.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},F.round=function(i,o){return o?Math.round(i*(o=Math.pow(10,o)))/o:Math.round(i)},F.geom={},F.geom.hull=function(i){var o=d3_geom_pointX,s=d3_geom_pointY;if(arguments.length)return hull(i);function hull(i){if(i.length<3)return[];var x,_=d3_functor(o),F=d3_functor(s),N=i.length,j=[],G=[];for(x=0;x<N;x++)j.push([+_.call(this,i[x],x),+F.call(this,i[x],x),x]);for(j.sort(d3_geom_hullOrder),x=0;x<N;x++)G.push([j[x][0],-j[x][1]]);var Z=d3_geom_hullUpper(j),X=d3_geom_hullUpper(G),J=X[0]===Z[0],$=X[X.length-1]===Z[Z.length-1],ee=[];for(x=Z.length-1;x>=0;--x)ee.push(i[j[Z[x]][2]]);for(x=+J;x<X.length-$;++x)ee.push(i[j[X[x]][2]]);return ee}return hull.x=function(i){return arguments.length?(o=i,hull):o},hull.y=function(i){return arguments.length?(s=i,hull):s},hull},F.geom.polygon=function(i){return ei(i,ez),i};var ez=F.geom.polygon.prototype=[];function d3_geom_polygonInside(i,o,s){return(s[0]-o[0])*(i[1]-o[1])<(s[1]-o[1])*(i[0]-o[0])}function d3_geom_polygonIntersect(i,o,s,x){var _=i[0],F=s[0],N=o[0]-_,j=x[0]-F,G=i[1],Z=s[1],X=o[1]-G,J=x[1]-Z,$=(j*(G-Z)-J*(_-F))/(J*N-j*X);return[_+$*N,G+$*X]}function d3_geom_polygonClosed(i){var o=i[0],s=i[i.length-1];return!(o[0]-s[0]||o[1]-s[1])}ez.area=function(){for(var i,o=-1,s=this.length,x=this[s-1],_=0;++o<s;)i=x,x=this[o],_+=i[1]*x[0]-i[0]*x[1];return .5*_},ez.centroid=function(i){var o,s,x=-1,_=this.length,F=0,N=0,j=this[_-1];for(arguments.length||(i=-1/(6*this.area()));++x<_;)o=j,j=this[x],s=o[0]*j[1]-j[0]*o[1],F+=(o[0]+j[0])*s,N+=(o[1]+j[1])*s;return[F*i,N*i]},ez.clip=function(i){for(var o,s,x,_,F,N,j=d3_geom_polygonClosed(i),G=-1,Z=this.length-d3_geom_polygonClosed(this),X=this[Z-1];++G<Z;){for(o=i.slice(),i.length=0,_=this[G],F=o[(x=o.length-j)-1],s=-1;++s<x;)d3_geom_polygonInside(N=o[s],X,_)?(d3_geom_polygonInside(F,X,_)||i.push(d3_geom_polygonIntersect(F,N,X,_)),i.push(N)):d3_geom_polygonInside(F,X,_)&&i.push(d3_geom_polygonIntersect(F,N,X,_)),F=N;j&&i.push(i[0]),X=_}return i};var eF,eN,ej,eU,eV,eH=[],eG=[];function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(i){var o=eH.pop()||new d3_geom_voronoiBeach;return o.site=i,o}function d3_geom_voronoiDetachBeach(i){d3_geom_voronoiDetachCircle(i),ej.remove(i),eH.push(i),d3_geom_voronoiRedBlackNode(i)}function d3_geom_voronoiLeftBreakPoint(i,o){var s=i.site,x=s.x,_=s.y,F=_-o;if(!F)return x;var N=i.P;if(!N)return-1/0;var j=(s=N.site).x,G=s.y,Z=G-o;if(!Z)return j;var X=j-x,J=1/F-1/Z,$=X/Z;return J?(-$+Math.sqrt($*$-2*J*(X*X/(-2*Z)-G+Z/2+_-F/2)))/J+x:(x+j)/2}function d3_geom_voronoiCell(i){this.site=i,this.edges=[]}function d3_geom_voronoiHalfEdgeOrder(i,o){return o.angle-i.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(i){var o=i.P,s=i.N;if(o&&s){var x=o.site,_=i.site,F=s.site;if(x!==F){var N=_.x,j=_.y,G=x.x-N,Z=x.y-j,X=F.x-N,J=F.y-j,$=2*(G*J-Z*X);if(!($>=-ep)){var ee=G*G+Z*Z,et=X*X+J*J,er=(J*ee-Z*et)/$,en=(G*et-X*ee)/$,J=en+j,ei=eG.pop()||new d3_geom_voronoiCircle;ei.arc=i,ei.site=_,ei.x=er+N,ei.y=J+Math.sqrt(er*er+en*en),ei.cy=J,i.circle=ei;for(var eo=null,es=eV._;es;)if(ei.y<es.y||ei.y===es.y&&ei.x<=es.x){if(es.L)es=es.L;else{eo=es.P;break}}else if(es.R)es=es.R;else{eo=es;break}eV.insert(eo,ei),eo||(eU=ei)}}}}function d3_geom_voronoiDetachCircle(i){var o=i.circle;o&&(o.P||(eU=o.N),eV.remove(o),eG.push(o),d3_geom_voronoiRedBlackNode(o),i.circle=null)}function d3_geom_voronoiEdge(i,o){this.l=i,this.r=o,this.a=this.b=null}function d3_geom_voronoiCreateEdge(i,o,s,x){var _=new d3_geom_voronoiEdge(i,o);return eF.push(_),s&&d3_geom_voronoiSetEdgeEnd(_,i,o,s),x&&d3_geom_voronoiSetEdgeEnd(_,o,i,x),eN[i.i].edges.push(new d3_geom_voronoiHalfEdge(_,i,o)),eN[o.i].edges.push(new d3_geom_voronoiHalfEdge(_,o,i)),_}function d3_geom_voronoiSetEdgeEnd(i,o,s,x){i.a||i.b?i.l===s?i.b=x:i.a=x:(i.a=x,i.l=o,i.r=s)}function d3_geom_voronoiHalfEdge(i,o,s){var x=i.a,_=i.b;this.edge=i,this.site=o,this.angle=s?Math.atan2(s.y-o.y,s.x-o.x):i.l===o?Math.atan2(_.x-x.x,x.y-_.y):Math.atan2(x.x-_.x,_.y-x.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(i){i.U=i.C=i.L=i.R=i.P=i.N=null}function d3_geom_voronoiRedBlackRotateLeft(i,o){var s=o.R,x=o.U;x?x.L===o?x.L=s:x.R=s:i._=s,s.U=x,o.U=s,o.R=s.L,o.R&&(o.R.U=o),s.L=o}function d3_geom_voronoiRedBlackRotateRight(i,o){var s=o.L,x=o.U;x?x.L===o?x.L=s:x.R=s:i._=s,s.U=x,o.U=s,o.L=s.R,o.L&&(o.L.U=o),s.R=o}function d3_geom_voronoiRedBlackFirst(i){for(;i.L;)i=i.L;return i}function d3_geom_voronoi(i,o){var s,x,_,F=i.sort(d3_geom_voronoiVertexOrder).pop();for(eF=[],eN=Array(i.length),ej=new d3_geom_voronoiRedBlackTree,eV=new d3_geom_voronoiRedBlackTree;;)if(_=eU,F&&(!_||F.y<_.y||F.y===_.y&&F.x<_.x))(F.x!==s||F.y!==x)&&(eN[F.i]=new d3_geom_voronoiCell(F),function(i){for(var o,s,x,_,F=i.x,N=i.y,j=ej._;j;)if((x=d3_geom_voronoiLeftBreakPoint(j,N)-F)>1e-6)j=j.L;else if((_=F-function(i,o){var s=i.N;if(s)return d3_geom_voronoiLeftBreakPoint(s,o);var x=i.site;return x.y===o?x.x:1/0}(j,N))>1e-6){if(!j.R){o=j;break}j=j.R}else{x>-.000001?(o=j.P,s=j):_>-.000001?(o=j,s=j.N):o=s=j;break}var G=d3_geom_voronoiCreateBeach(i);if(ej.insert(o,G),o||s){if(o===s){d3_geom_voronoiDetachCircle(o),s=d3_geom_voronoiCreateBeach(o.site),ej.insert(G,s),G.edge=s.edge=d3_geom_voronoiCreateEdge(o.site,G.site),d3_geom_voronoiAttachCircle(o),d3_geom_voronoiAttachCircle(s);return}if(!s){G.edge=d3_geom_voronoiCreateEdge(o.site,G.site);return}d3_geom_voronoiDetachCircle(o),d3_geom_voronoiDetachCircle(s);var Z=o.site,X=Z.x,J=Z.y,$=i.x-X,ee=i.y-J,et=s.site,er=et.x-X,en=et.y-J,ei=2*($*en-ee*er),eo=$*$+ee*ee,es=er*er+en*en,el={x:(en*eo-ee*es)/ei+X,y:($*es-er*eo)/ei+J};d3_geom_voronoiSetEdgeEnd(s.edge,Z,et,el),G.edge=d3_geom_voronoiCreateEdge(Z,i,null,el),s.edge=d3_geom_voronoiCreateEdge(i,et,null,el),d3_geom_voronoiAttachCircle(o),d3_geom_voronoiAttachCircle(s)}}(F),s=F.x,x=F.y),F=i.pop();else if(_)!function(i){var o=i.circle,s=o.x,x=o.cy,_={x:s,y:x},F=i.P,N=i.N,j=[i];d3_geom_voronoiDetachBeach(i);for(var G=F;G.circle&&1e-6>et(s-G.circle.x)&&1e-6>et(x-G.circle.cy);)F=G.P,j.unshift(G),d3_geom_voronoiDetachBeach(G),G=F;j.unshift(G),d3_geom_voronoiDetachCircle(G);for(var Z=N;Z.circle&&1e-6>et(s-Z.circle.x)&&1e-6>et(x-Z.circle.cy);)N=Z.N,j.push(Z),d3_geom_voronoiDetachBeach(Z),Z=N;j.push(Z),d3_geom_voronoiDetachCircle(Z);var X,J=j.length;for(X=1;X<J;++X)Z=j[X],G=j[X-1],d3_geom_voronoiSetEdgeEnd(Z.edge,G.site,Z.site,_);G=j[0],(Z=j[J-1]).edge=d3_geom_voronoiCreateEdge(G.site,Z.site,null,_),d3_geom_voronoiAttachCircle(G),d3_geom_voronoiAttachCircle(Z)}(_.arc);else break;o&&(function(i){for(var o,s,x,_,F,N=eF,j=(o=i[0][0],s=i[0][1],x=i[1][0],_=i[1][1],function(i){var F,N=i.a,j=i.b,G=N.x,Z=N.y,X=j.x,J=j.y,$=0,ee=1,et=X-G,er=J-Z;if(F=o-G,et||!(F>0)){if(F/=et,et<0){if(F<$)return;F<ee&&(ee=F)}else if(et>0){if(F>ee)return;F>$&&($=F)}if(F=x-G,et||!(F<0)){if(F/=et,et<0){if(F>ee)return;F>$&&($=F)}else if(et>0){if(F<$)return;F<ee&&(ee=F)}if(F=s-Z,er||!(F>0)){if(F/=er,er<0){if(F<$)return;F<ee&&(ee=F)}else if(er>0){if(F>ee)return;F>$&&($=F)}if(F=_-Z,er||!(F<0)){if(F/=er,er<0){if(F>ee)return;F>$&&($=F)}else if(er>0){if(F<$)return;F<ee&&(ee=F)}return $>0&&(i.a={x:G+$*et,y:Z+$*er}),ee<1&&(i.b={x:G+ee*et,y:Z+ee*er}),i}}}}}),G=N.length;G--;)(!function(i,o){var s=i.b;if(s)return!0;var x,_,F=i.a,N=o[0][0],j=o[1][0],G=o[0][1],Z=o[1][1],X=i.l,J=i.r,$=X.x,ee=X.y,et=J.x,er=J.y,en=($+et)/2;if(er===ee){if(en<N||en>=j)return;if($>et){if(F){if(F.y>=Z)return}else F={x:en,y:G};s={x:en,y:Z}}else{if(F){if(F.y<G)return}else F={x:en,y:Z};s={x:en,y:G}}}else if(x=($-et)/(er-ee),_=(ee+er)/2-x*en,x<-1||x>1){if($>et){if(F){if(F.y>=Z)return}else F={x:(G-_)/x,y:G};s={x:(Z-_)/x,y:Z}}else{if(F){if(F.y<G)return}else F={x:(Z-_)/x,y:Z};s={x:(G-_)/x,y:G}}}else if(ee<er){if(F){if(F.x>=j)return}else F={x:N,y:x*N+_};s={x:j,y:x*j+_}}else{if(F){if(F.x<N)return}else F={x:j,y:x*j+_};s={x:N,y:x*N+_}}return i.a=F,i.b=s,!0}(F=N[G],i)||!j(F)||1e-6>et(F.a.x-F.b.x)&&1e-6>et(F.a.y-F.b.y))&&(F.a=F.b=null,N.splice(G,1))}(o),function(i){for(var o,s,x,_,F,N,j,G,Z,X,J=i[0][0],$=i[1][0],ee=i[0][1],er=i[1][1],en=eN,ei=en.length;ei--;)if((F=en[ei])&&F.prepare())for(G=(j=F.edges).length,N=0;N<G;)x=(X=j[N].end()).x,_=X.y,o=(Z=j[++N%G].start()).x,s=Z.y,(et(x-o)>1e-6||et(_-s)>1e-6)&&(j.splice(N,0,new d3_geom_voronoiHalfEdge(function(i,o,s){var x=new d3_geom_voronoiEdge(i,null);return x.a=o,x.b=s,eF.push(x),x}(F.site,X,1e-6>et(x-J)&&er-_>1e-6?{x:J,y:1e-6>et(o-J)?s:er}:1e-6>et(_-er)&&$-x>1e-6?{x:1e-6>et(s-er)?o:$,y:er}:1e-6>et(x-$)&&_-ee>1e-6?{x:$,y:1e-6>et(o-$)?s:ee}:1e-6>et(_-ee)&&x-J>1e-6?{x:1e-6>et(s-ee)?o:J,y:ee}:null),F.site,null)),++G)}(o));var N={cells:eN,edges:eF};return ej=eV=eF=eN=null,N}function d3_geom_voronoiVertexOrder(i,o){return o.y-i.y||o.x-i.x}d3_geom_voronoiCell.prototype.prepare=function(){for(var i,o=this.edges,s=o.length;s--;)(i=o[s].edge).b&&i.a||o.splice(s,1);return o.sort(d3_geom_voronoiHalfEdgeOrder),o.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(i,o){var s,x,_;if(i){if(o.P=i,o.N=i.N,i.N&&(i.N.P=o),i.N=o,i.R){for(i=i.R;i.L;)i=i.L;i.L=o}else i.R=o;s=i}else this._?(i=d3_geom_voronoiRedBlackFirst(this._),o.P=null,o.N=i,i.P=i.L=o,s=i):(o.P=o.N=null,this._=o,s=null);for(o.L=o.R=null,o.U=s,o.C=!0,i=o;s&&s.C;)x=s.U,s===x.L?(_=x.R)&&_.C?(s.C=_.C=!1,x.C=!0,i=x):(i===s.R&&(d3_geom_voronoiRedBlackRotateLeft(this,s),s=(i=s).U),s.C=!1,x.C=!0,d3_geom_voronoiRedBlackRotateRight(this,x)):(_=x.L)&&_.C?(s.C=_.C=!1,x.C=!0,i=x):(i===s.L&&(d3_geom_voronoiRedBlackRotateRight(this,s),s=(i=s).U),s.C=!1,x.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,x)),s=i.U;this._.C=!1},remove:function(i){i.N&&(i.N.P=i.P),i.P&&(i.P.N=i.N),i.N=i.P=null;var o,s,x,_=i.U,F=i.L,N=i.R;if(s=F?N?d3_geom_voronoiRedBlackFirst(N):F:N,_?_.L===i?_.L=s:_.R=s:this._=s,F&&N?(x=s.C,s.C=i.C,s.L=F,F.U=s,s!==N?(_=s.U,s.U=i.U,i=s.R,_.L=i,s.R=N,N.U=s):(s.U=_,_=s,i=s.R)):(x=i.C,i=s),i&&(i.U=_),!x){if(i&&i.C){i.C=!1;return}do{if(i===this._)break;if(i===_.L){if((o=_.R).C&&(o.C=!1,_.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,_),o=_.R),o.L&&o.L.C||o.R&&o.R.C){o.R&&o.R.C||(o.L.C=!1,o.C=!0,d3_geom_voronoiRedBlackRotateRight(this,o),o=_.R),o.C=_.C,_.C=o.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,_),i=this._;break}}else if((o=_.L).C&&(o.C=!1,_.C=!0,d3_geom_voronoiRedBlackRotateRight(this,_),o=_.L),o.L&&o.L.C||o.R&&o.R.C){o.L&&o.L.C||(o.R.C=!1,o.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,o),o=_.L),o.C=_.C,_.C=o.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,_),i=this._;break}o.C=!0,i=_,_=_.U}while(!i.C);i&&(i.C=!1)}}},F.geom.voronoi=function(i){var o=d3_geom_pointX,s=d3_geom_pointY,x=o,_=s,F=eW;if(i)return voronoi(i);function voronoi(i){var o=Array(i.length),s=F[0][0],x=F[0][1],_=F[1][0],N=F[1][1];return d3_geom_voronoi(sites(i),F).cells.forEach(function(F,j){var G=F.edges,Z=F.site;(o[j]=G.length?G.map(function(i){var o=i.start();return[o.x,o.y]}):Z.x>=s&&Z.x<=_&&Z.y>=x&&Z.y<=N?[[s,N],[_,N],[_,x],[s,x]]:[]).point=i[j]}),o}function sites(i){return i.map(function(i,o){return{x:1e-6*Math.round(x(i,o)/1e-6),y:1e-6*Math.round(_(i,o)/1e-6),i:o}})}return voronoi.links=function(i){return d3_geom_voronoi(sites(i)).edges.filter(function(i){return i.l&&i.r}).map(function(o){return{source:i[o.l.i],target:i[o.r.i]}})},voronoi.triangles=function(i){var o=[];return d3_geom_voronoi(sites(i)).cells.forEach(function(s,x){for(var _,F,N=s.site,j=s.edges.sort(d3_geom_voronoiHalfEdgeOrder),G=-1,Z=j.length,X=j[Z-1].edge,J=X.l===N?X.r:X.l;++G<Z;)F=J,J=(X=j[G].edge).l===N?X.r:X.l,x<F.i&&x<J.i&&0>(_=J,(N.x-_.x)*(F.y-N.y)-(N.x-F.x)*(_.y-N.y))&&o.push([i[x],i[F.i],i[J.i]])}),o},voronoi.x=function(i){return arguments.length?(x=d3_functor(o=i),voronoi):o},voronoi.y=function(i){return arguments.length?(_=d3_functor(s=i),voronoi):s},voronoi.clipExtent=function(i){return arguments.length?(F=null==i?eW:i,voronoi):F===eW?null:F},voronoi.size=function(i){return arguments.length?voronoi.clipExtent(i&&[[0,0],i]):F===eW?null:F&&F[1]},voronoi};var eW=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_quadtreeCompatX(i){return i.x}function d3_geom_quadtreeCompatY(i){return i.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_interpolateRgb(i,o){i=F.rgb(i),o=F.rgb(o);var s=i.r,x=i.g,_=i.b,N=o.r-s,j=o.g-x,G=o.b-_;return function(i){return"#"+d3_rgb_hex(Math.round(s+N*i))+d3_rgb_hex(Math.round(x+j*i))+d3_rgb_hex(Math.round(_+G*i))}}function d3_interpolateObject(i,o){var s,x={},_={};for(s in i)s in o?x[s]=d3_interpolate(i[s],o[s]):_[s]=i[s];for(s in o)s in i||(_[s]=o[s]);return function(i){for(s in x)_[s]=x[s](i);return _}}function d3_interpolateNumber(i,o){return i=+i,o=+o,function(s){return i*(1-s)+o*s}}function d3_interpolateString(i,o){var s,x,_,F=eZ.lastIndex=eY.lastIndex=0,N=-1,j=[],G=[];for(i+="",o+="";(s=eZ.exec(i))&&(x=eY.exec(o));)(_=x.index)>F&&(_=o.slice(F,_),j[N]?j[N]+=_:j[++N]=_),(s=s[0])===(x=x[0])?j[N]?j[N]+=x:j[++N]=x:(j[++N]=null,G.push({i:N,x:d3_interpolateNumber(s,x)})),F=eY.lastIndex;return F<o.length&&(_=o.slice(F),j[N]?j[N]+=_:j[++N]=_),j.length<2?G[0]?(o=G[0].x,function(i){return o(i)+""}):function(){return o}:(o=G.length,function(i){for(var s,x=0;x<o;++x)j[(s=G[x]).i]=s.x(i);return j.join("")})}F.geom.delaunay=function(i){return F.geom.voronoi().triangles(i)},F.geom.quadtree=function(i,o,s,x,_){var F,N=d3_geom_pointX,j=d3_geom_pointY;if(F=arguments.length)return N=d3_geom_quadtreeCompatX,j=d3_geom_quadtreeCompatY,3===F&&(_=s,x=o,s=o=0),quadtree(i);function quadtree(i){var G,Z,X,J,$,ee,er,en,ei,eo=d3_functor(N),es=d3_functor(j);if(null!=o)ee=o,er=s,en=x,ei=_;else if(en=ei=-(ee=er=1/0),Z=[],X=[],$=i.length,F)for(J=0;J<$;++J)(G=i[J]).x<ee&&(ee=G.x),G.y<er&&(er=G.y),G.x>en&&(en=G.x),G.y>ei&&(ei=G.y),Z.push(G.x),X.push(G.y);else for(J=0;J<$;++J){var el=+eo(G=i[J],J),ec=+es(G,J);el<ee&&(ee=el),ec<er&&(er=ec),el>en&&(en=el),ec>ei&&(ei=ec),Z.push(el),X.push(ec)}var eu=en-ee,ef=ei-er;function insert(i,o,s,x,_,F,N,j){if(!(isNaN(s)||isNaN(x))){if(i.leaf){var G=i.x,Z=i.y;if(null!=G){if(et(G-s)+et(Z-x)<.01)insertChild(i,o,s,x,_,F,N,j);else{var X=i.point;i.x=i.y=i.point=null,insertChild(i,X,G,Z,_,F,N,j),insertChild(i,o,s,x,_,F,N,j)}}else i.x=s,i.y=x,i.point=o}else insertChild(i,o,s,x,_,F,N,j)}}function insertChild(i,o,s,x,_,F,N,j){var G=(_+N)*.5,Z=(F+j)*.5,X=s>=G,J=x>=Z,$=J<<1|X;i.leaf=!1,i=i.nodes[$]||(i.nodes[$]=d3_geom_quadtreeNode()),X?_=G:N=G,J?F=Z:j=Z,insert(i,o,s,x,_,F,N,j)}eu>ef?ei=er+eu:en=ee+ef;var eh=d3_geom_quadtreeNode();if(eh.add=function(i){insert(eh,i,+eo(i,++J),+es(i,J),ee,er,en,ei)},eh.visit=function(i){(function d3_geom_quadtreeVisit(i,o,s,x,_,F){if(!i(o,s,x,_,F)){var N=(s+_)*.5,j=(x+F)*.5,G=o.nodes;G[0]&&d3_geom_quadtreeVisit(i,G[0],s,x,N,j),G[1]&&d3_geom_quadtreeVisit(i,G[1],N,x,_,j),G[2]&&d3_geom_quadtreeVisit(i,G[2],s,j,N,F),G[3]&&d3_geom_quadtreeVisit(i,G[3],N,j,_,F)}})(i,eh,ee,er,en,ei)},eh.find=function(i){var o,s,x,_,F,N,j,G;return o=i[0],s=i[1],G=1/0,function find(i,Z,X,J,$){if(!(Z>F)&&!(X>N)&&!(J<x)&&!($<_)){if(ee=i.point){var ee,et=o-i.x,er=s-i.y,en=et*et+er*er;if(en<G){var ei=Math.sqrt(G=en);x=o-ei,_=s-ei,F=o+ei,N=s+ei,j=ee}}for(var eo=i.nodes,es=(Z+J)*.5,el=(X+$)*.5,ec=o>=es,eu=s>=el,ef=eu<<1|ec,eh=ef+4;ef<eh;++ef)if(i=eo[3&ef])switch(3&ef){case 0:find(i,Z,X,es,el);break;case 1:find(i,es,X,J,el);break;case 2:find(i,Z,el,es,$);break;case 3:find(i,es,el,J,$)}}}(eh,x=ee,_=er,F=en,N=ei),j},J=-1,null==o){for(;++J<$;)insert(eh,i[J],Z[J],X[J],ee,er,en,ei);--J}else i.forEach(eh.add);return Z=X=i=G=null,eh}return quadtree.x=function(i){return arguments.length?(N=i,quadtree):N},quadtree.y=function(i){return arguments.length?(j=i,quadtree):j},quadtree.extent=function(i){return arguments.length?(null==i?o=s=x=_=null:(o=+i[0][0],s=+i[0][1],x=+i[1][0],_=+i[1][1]),quadtree):null==o?null:[[o,s],[x,_]]},quadtree.size=function(i){return arguments.length?(null==i?o=s=x=_=null:(o=s=0,x=+i[0],_=+i[1]),quadtree):null==o?null:[x-o,_-s]},quadtree},F.interpolateRgb=d3_interpolateRgb,F.interpolateObject=d3_interpolateObject,F.interpolateNumber=d3_interpolateNumber,F.interpolateString=d3_interpolateString;var eZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eY=RegExp(eZ.source,"g");function d3_interpolate(i,o){for(var s,x=F.interpolators.length;--x>=0&&!(s=F.interpolators[x](i,o)););return s}function d3_interpolateArray(i,o){var s,x=[],_=[],F=i.length,N=o.length,j=Math.min(i.length,o.length);for(s=0;s<j;++s)x.push(d3_interpolate(i[s],o[s]));for(;s<F;++s)_[s]=i[s];for(;s<N;++s)_[s]=o[s];return function(i){for(s=0;s<j;++s)_[s]=x[s](i);return _}}F.interpolate=d3_interpolate,F.interpolators=[function(i,o){var s=typeof o;return("string"===s?eP.has(o.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(o)?d3_interpolateRgb:d3_interpolateString:o instanceof d3_color?d3_interpolateRgb:Array.isArray(o)?d3_interpolateArray:"object"===s&&isNaN(o)?d3_interpolateObject:d3_interpolateNumber)(i,o)}],F.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},eX=F.map({linear:d3_ease_default,poly:function(i){return function(o){return Math.pow(o,i)}},quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:function(i,o){var s;return arguments.length<2&&(o=.45),arguments.length?s=o/em*Math.asin(1/i):(i=1,s=o/4),function(x){return 1+i*Math.pow(2,-10*x)*Math.sin((x-s)*em/o)}},back:function(i){return i||(i=1.70158),function(o){return o*o*((i+1)*o-i)}},bounce:function(){return d3_ease_bounce}}),eK=F.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(i){return d3_ease_reflect(d3_ease_reverse(i))}});function d3_ease_reverse(i){return function(o){return 1-i(1-o)}}function d3_ease_reflect(i){return function(o){return .5*(o<.5?i(2*o):2-i(2-2*o))}}function d3_ease_quad(i){return i*i}function d3_ease_cubic(i){return i*i*i}function d3_ease_cubicInOut(i){if(i<=0)return 0;if(i>=1)return 1;var o=i*i,s=o*i;return 4*(i<.5?s:3*(i-o)+s-.75)}function d3_ease_sin(i){return 1-Math.cos(i*ev)}function d3_ease_exp(i){return Math.pow(2,10*(i-1))}function d3_ease_circle(i){return 1-Math.sqrt(1-i*i)}function d3_ease_bounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375}function d3_interpolateRound(i,o){return o-=i,function(s){return Math.round(i+o*s)}}function d3_transform(i){var o,s=[i.a,i.b],x=[i.c,i.d],_=d3_transformNormalize(s),F=d3_transformDot(s,x),N=d3_transformNormalize((o=-F,x[0]+=o*s[0],x[1]+=o*s[1],x))||0;s[0]*x[1]<x[0]*s[1]&&(s[0]*=-1,s[1]*=-1,_*=-1,F*=-1),this.rotate=(_?Math.atan2(s[1],s[0]):Math.atan2(-x[0],x[1]))*e_,this.translate=[i.e,i.f],this.scale=[_,N],this.skew=N?Math.atan2(F,N)*e_:0}function d3_transformDot(i,o){return i[0]*o[0]+i[1]*o[1]}function d3_transformNormalize(i){var o=Math.sqrt(d3_transformDot(i,i));return o&&(i[0]/=o,i[1]/=o),o}F.ease=function(i){var o,s=i.indexOf("-"),x=s>=0?i.slice(0,s):i,_=s>=0?i.slice(s+1):"in";return x=eX.get(x)||d3_ease_default,o=(_=eK.get(_)||d3_identity)(x.apply(null,N.call(arguments,1))),function(i){return i<=0?0:i>=1?1:o(i)}},F.interpolateHcl=function(i,o){i=F.hcl(i),o=F.hcl(o);var s=i.h,x=i.c,_=i.l,N=o.h-s,j=o.c-x,G=o.l-_;return isNaN(j)&&(j=0,x=isNaN(x)?o.c:x),isNaN(N)?(N=0,s=isNaN(s)?o.h:s):N>180?N-=360:N<-180&&(N+=360),function(i){return d3_hcl_lab(s+N*i,x+j*i,_+G*i)+""}},F.interpolateHsl=function(i,o){i=F.hsl(i),o=F.hsl(o);var s=i.h,x=i.s,_=i.l,N=o.h-s,j=o.s-x,G=o.l-_;return isNaN(j)&&(j=0,x=isNaN(x)?o.s:x),isNaN(N)?(N=0,s=isNaN(s)?o.h:s):N>180?N-=360:N<-180&&(N+=360),function(i){return d3_hsl_rgb(s+N*i,x+j*i,_+G*i)+""}},F.interpolateLab=function(i,o){i=F.lab(i),o=F.lab(o);var s=i.l,x=i.a,_=i.b,N=o.l-s,j=o.a-x,G=o.b-_;return function(i){return d3_lab_rgb(s+N*i,x+j*i,_+G*i)+""}},F.interpolateRound=d3_interpolateRound,F.transform=function(i){var o=j.createElementNS(F.ns.prefix.svg,"g");return(F.transform=function(i){if(null!=i){o.setAttribute("transform",i);var s=o.transform.baseVal.consolidate()}return new d3_transform(s?s.matrix:eJ)})(i)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var eJ={a:1,b:0,c:0,d:1,e:0,f:0};function d3_interpolateTransformPop(i){return i.length?i.pop()+",":""}function d3_interpolateTransform(i,o){var s,x,_,N,j=[],G=[];return i=F.transform(i),o=F.transform(o),function(i,o,s,x){if(i[0]!==o[0]||i[1]!==o[1]){var _=s.push("translate(",null,",",null,")");x.push({i:_-4,x:d3_interpolateNumber(i[0],o[0])},{i:_-2,x:d3_interpolateNumber(i[1],o[1])})}else(o[0]||o[1])&&s.push("translate("+o+")")}(i.translate,o.translate,j,G),(s=i.rotate)!==(x=o.rotate)?(s-x>180?x+=360:x-s>180&&(s+=360),G.push({i:j.push(d3_interpolateTransformPop(j)+"rotate(",null,")")-2,x:d3_interpolateNumber(s,x)})):x&&j.push(d3_interpolateTransformPop(j)+"rotate("+x+")"),(_=i.skew)!==(N=o.skew)?G.push({i:j.push(d3_interpolateTransformPop(j)+"skewX(",null,")")-2,x:d3_interpolateNumber(_,N)}):N&&j.push(d3_interpolateTransformPop(j)+"skewX("+N+")"),function(i,o,s,x){if(i[0]!==o[0]||i[1]!==o[1]){var _=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");x.push({i:_-4,x:d3_interpolateNumber(i[0],o[0])},{i:_-2,x:d3_interpolateNumber(i[1],o[1])})}else(1!==o[0]||1!==o[1])&&s.push(d3_interpolateTransformPop(s)+"scale("+o+")")}(i.scale,o.scale,j,G),i=o=null,function(i){for(var o,s=-1,x=G.length;++s<x;)j[(o=G[s]).i]=o.x(i);return j.join("")}}function d3_uninterpolateNumber(i,o){return o=(o-=i=+i)||1/o,function(s){return(s-i)/o}}function d3_uninterpolateClamp(i,o){return o=(o-=i=+i)||1/o,function(s){return Math.max(0,Math.min(1,(s-i)/o))}}function d3_layout_bundleAncestors(i){for(var o=[],s=i.parent;null!=s;)o.push(i),i=s,s=s.parent;return o.push(i),o}function d3_layout_forceDragstart(i){i.fixed|=2}function d3_layout_forceDragend(i){i.fixed&=-7}function d3_layout_forceMouseover(i){i.fixed|=4,i.px=i.x,i.py=i.y}function d3_layout_forceMouseout(i){i.fixed&=-5}F.interpolateTransform=d3_interpolateTransform,F.layout={},F.layout.bundle=function(){return function(i){for(var o=[],s=-1,x=i.length;++s<x;)o.push(function(i){for(var o=i.source,s=i.target,x=function(i,o){if(i===o)return i;for(var s=d3_layout_bundleAncestors(i),x=d3_layout_bundleAncestors(o),_=s.pop(),F=x.pop(),N=null;_===F;)N=_,_=s.pop(),F=x.pop();return N}(o,s),_=[o];o!==x;)_.push(o=o.parent);for(var F=_.length;s!==x;)_.splice(F,0,s),s=s.parent;return _}(i[s]));return o}},F.layout.chord=function(){var i,o,s,x,_,N,j,G={},Z=0;function relayout(){var G,X,J,$,ee,et={},er=[],en=F.range(x),ei=[];for(i=[],o=[],G=0,$=-1;++$<x;){for(X=0,ee=-1;++ee<x;)X+=s[$][ee];er.push(X),ei.push(F.range(x)),G+=X}for(_&&en.sort(function(i,o){return _(er[i],er[o])}),N&&ei.forEach(function(i,o){i.sort(function(i,x){return N(s[o][i],s[o][x])})}),G=(em-Z*x)/G,X=0,$=-1;++$<x;){for(J=X,ee=-1;++ee<x;){var eo=en[$],es=ei[eo][ee],el=s[eo][es],ec=X,eu=X+=el*G;et[eo+"-"+es]={index:eo,subindex:es,startAngle:ec,endAngle:eu,value:el}}o[eo]={index:eo,startAngle:J,endAngle:X,value:er[eo]},X+=Z}for($=-1;++$<x;)for(ee=$-1;++ee<x;){var ef=et[$+"-"+ee],eh=et[ee+"-"+$];(ef.value||eh.value)&&i.push(ef.value<eh.value?{source:eh,target:ef}:{source:ef,target:eh})}j&&resort()}function resort(){i.sort(function(i,o){return j((i.source.value+i.target.value)/2,(o.source.value+o.target.value)/2)})}return G.matrix=function(_){return arguments.length?(x=(s=_)&&s.length,i=o=null,G):s},G.padding=function(s){return arguments.length?(Z=s,i=o=null,G):Z},G.sortGroups=function(s){return arguments.length?(_=s,i=o=null,G):_},G.sortSubgroups=function(o){return arguments.length?(N=o,i=null,G):N},G.sortChords=function(o){return arguments.length?(j=o,i&&resort(),G):j},G.chords=function(){return i||relayout(),i},G.groups=function(){return o||relayout(),o},G},F.layout.force=function(){var i,o,s,x,_,N,j={},G=F.dispatch("start","tick","end"),Z=[1,1],X=.9,J=e$,$=eQ,ee=-30,et=e0,er=.1,en=.64,ei=[],eo=[];function dragmove(i){i.px=F.event.x,i.py=F.event.y,j.resume()}return j.tick=function(){if((s*=.99)<.005)return i=null,G.end({type:"end",alpha:s=0}),!0;var o,j,J,$,es,el,ec,eu,ef,eh=ei.length,ed=eo.length;for(j=0;j<ed;++j)$=(J=eo[j]).source,(el=(eu=(es=J.target).x-$.x)*eu+(ef=es.y-$.y)*ef)&&(eu*=el=s*_[j]*((el=Math.sqrt(el))-x[j])/el,ef*=el,es.x-=eu*(ec=$.weight+es.weight?$.weight/($.weight+es.weight):.5),es.y-=ef*ec,$.x+=eu*(ec=1-ec),$.y+=ef*ec);if((ec=s*er)&&(eu=Z[0]/2,ef=Z[1]/2,j=-1,ec))for(;++j<eh;)J=ei[j],J.x+=(eu-J.x)*ec,J.y+=(ef-J.y)*ec;if(ee)for(function d3_layout_forceAccumulate(i,o,s){var x=0,_=0;if(i.charge=0,!i.leaf)for(var F,N=i.nodes,j=N.length,G=-1;++G<j;)null!=(F=N[G])&&(d3_layout_forceAccumulate(F,o,s),i.charge+=F.charge,x+=F.charge*F.cx,_+=F.charge*F.cy);if(i.point){i.leaf||(i.point.x+=Math.random()-.5,i.point.y+=Math.random()-.5);var Z=o*s[i.point.index];i.charge+=i.pointCharge=Z,x+=Z*i.point.x,_+=Z*i.point.y}i.cx=x/i.charge,i.cy=_/i.charge}(o=F.geom.quadtree(ei),s,N),j=-1;++j<eh;)(J=ei[j]).fixed||o.visit(function(i){return function(o,s,x,_){if(o.point!==i){var F=o.cx-i.x,N=o.cy-i.y,j=_-s,G=F*F+N*N;if(j*j/en<G){if(G<et){var Z=o.charge/G;i.px-=F*Z,i.py-=N*Z}return!0}if(o.point&&G&&G<et){var Z=o.pointCharge/G;i.px-=F*Z,i.py-=N*Z}}return!o.charge}}(J));for(j=-1;++j<eh;)(J=ei[j]).fixed?(J.x=J.px,J.y=J.py):(J.x-=(J.px-(J.px=J.x))*X,J.y-=(J.py-(J.py=J.y))*X);G.tick({type:"tick",alpha:s})},j.nodes=function(i){return arguments.length?(ei=i,j):ei},j.links=function(i){return arguments.length?(eo=i,j):eo},j.size=function(i){return arguments.length?(Z=i,j):Z},j.linkDistance=function(i){return arguments.length?(J="function"==typeof i?i:+i,j):J},j.distance=j.linkDistance,j.linkStrength=function(i){return arguments.length?($="function"==typeof i?i:+i,j):$},j.friction=function(i){return arguments.length?(X=+i,j):X},j.charge=function(i){return arguments.length?(ee="function"==typeof i?i:+i,j):ee},j.chargeDistance=function(i){return arguments.length?(et=i*i,j):Math.sqrt(et)},j.gravity=function(i){return arguments.length?(er=+i,j):er},j.theta=function(i){return arguments.length?(en=i*i,j):Math.sqrt(en)},j.alpha=function(o){return arguments.length?(o=+o,s?o>0?s=o:(i.c=null,i.t=NaN,i=null,G.end({type:"end",alpha:s=0})):o>0&&(G.start({type:"start",alpha:s=o}),i=d3_timer(j.tick)),j):s},j.start=function(){var i,o,s,F=ei.length,G=eo.length,X=Z[0],et=Z[1];for(i=0;i<F;++i)(s=ei[i]).index=i,s.weight=0;for(i=0;i<G;++i)"number"==typeof(s=eo[i]).source&&(s.source=ei[s.source]),"number"==typeof s.target&&(s.target=ei[s.target]),++s.source.weight,++s.target.weight;for(i=0;i<F;++i)isNaN((s=ei[i]).x)&&(s.x=position("x",X)),isNaN(s.y)&&(s.y=position("y",et)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);if(x=[],"function"==typeof J)for(i=0;i<G;++i)x[i]=+J.call(this,eo[i],i);else for(i=0;i<G;++i)x[i]=J;if(_=[],"function"==typeof $)for(i=0;i<G;++i)_[i]=+$.call(this,eo[i],i);else for(i=0;i<G;++i)_[i]=$;if(N=[],"function"==typeof ee)for(i=0;i<F;++i)N[i]=+ee.call(this,ei[i],i);else for(i=0;i<F;++i)N[i]=ee;function position(s,x){if(!o){for(Z=0,o=Array(F);Z<F;++Z)o[Z]=[];for(Z=0;Z<G;++Z){var _=eo[Z];o[_.source.index].push(_.target),o[_.target.index].push(_.source)}}for(var N,j=o[i],Z=-1,X=j.length;++Z<X;)if(!isNaN(N=j[Z][s]))return N;return Math.random()*x}return j.resume()},j.resume=function(){return j.alpha(.1)},j.stop=function(){return j.alpha(0)},j.drag=function(){if(o||(o=F.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),!arguments.length)return o;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(o)},F.rebind(j,G,"on")};var e$=20,eQ=1,e0=1/0;function d3_layout_hierarchyRebind(i,o){return F.rebind(i,o,"sort","children","value"),i.nodes=i,i.links=d3_layout_hierarchyLinks,i}function d3_layout_hierarchyVisitBefore(i,o){for(var s,x,_=[i];null!=(i=_.pop());)if(o(i),(x=i.children)&&(s=x.length))for(;--s>=0;)_.push(x[s])}function d3_layout_hierarchyVisitAfter(i,o){for(var s=[i],x=[];null!=(i=s.pop());)if(x.push(i),(F=i.children)&&(_=F.length))for(var _,F,N=-1;++N<_;)s.push(F[N]);for(;null!=(i=x.pop());)o(i)}function d3_layout_hierarchyChildren(i){return i.children}function d3_layout_hierarchyValue(i){return i.value}function d3_layout_hierarchySort(i,o){return o.value-i.value}function d3_layout_hierarchyLinks(i){return F.merge(i.map(function(i){return(i.children||[]).map(function(o){return{source:i,target:o}})}))}F.layout.hierarchy=function(){var i=d3_layout_hierarchySort,o=d3_layout_hierarchyChildren,s=d3_layout_hierarchyValue;function hierarchy(x){var _,F,N,j,G=[x],Z=[];for(x.depth=0;null!=(j=G.pop());)if(Z.push(j),(F=o.call(hierarchy,j,j.depth))&&(_=F.length)){for(;--_>=0;)G.push(N=F[_]),N.parent=j,N.depth=j.depth+1;s&&(j.value=0),j.children=F}else s&&(j.value=+s.call(hierarchy,j,j.depth)||0),delete j.children;return d3_layout_hierarchyVisitAfter(x,function(o){var x,_;i&&(x=o.children)&&x.sort(i),s&&(_=o.parent)&&(_.value+=o.value)}),Z}return hierarchy.sort=function(o){return arguments.length?(i=o,hierarchy):i},hierarchy.children=function(i){return arguments.length?(o=i,hierarchy):o},hierarchy.value=function(i){return arguments.length?(s=i,hierarchy):s},hierarchy.revalue=function(i){return s&&(d3_layout_hierarchyVisitBefore(i,function(i){i.children&&(i.value=0)}),d3_layout_hierarchyVisitAfter(i,function(i){var o;i.children||(i.value=+s.call(hierarchy,i,i.depth)||0),(o=i.parent)&&(o.value+=i.value)})),i},hierarchy},F.layout.partition=function(){var i=F.layout.hierarchy(),o=[1,1];function partition(s,x){var _=i.call(this,s,x);return function position(i,o,s,x){var _=i.children;if(i.x=o,i.y=i.depth*x,i.dx=s,i.dy=x,_&&(F=_.length)){var F,N,j,G=-1;for(s=i.value?s/i.value:0;++G<F;)position(N=_[G],o,j=N.value*s,x),o+=j}}(_[0],0,o[0],o[1]/function depth(i){var o=i.children,s=0;if(o&&(x=o.length))for(var x,_=-1;++_<x;)s=Math.max(s,depth(o[_]));return 1+s}(_[0])),_}return partition.size=function(i){return arguments.length?(o=i,partition):o},d3_layout_hierarchyRebind(partition,i)},F.layout.pie=function(){var i=Number,o=e1,s=0,x=em,_=0;function pie(N){var j,G=N.length,Z=N.map(function(o,s){return+i.call(pie,o,s)}),X=+("function"==typeof s?s.apply(this,arguments):s),J=("function"==typeof x?x.apply(this,arguments):x)-X,$=Math.min(Math.abs(J)/G,+("function"==typeof _?_.apply(this,arguments):_)),ee=$*(J<0?-1:1),et=F.sum(Z),er=et?(J-G*ee)/et:0,en=F.range(G),ei=[];return null!=o&&en.sort(o===e1?function(i,o){return Z[o]-Z[i]}:function(i,s){return o(N[i],N[s])}),en.forEach(function(i){ei[i]={data:N[i],value:j=Z[i],startAngle:X,endAngle:X+=j*er+ee,padAngle:$}}),ei}return pie.value=function(o){return arguments.length?(i=o,pie):i},pie.sort=function(i){return arguments.length?(o=i,pie):o},pie.startAngle=function(i){return arguments.length?(s=i,pie):s},pie.endAngle=function(i){return arguments.length?(x=i,pie):x},pie.padAngle=function(i){return arguments.length?(_=i,pie):_},pie};var e1={};function d3_layout_stackX(i){return i.x}function d3_layout_stackY(i){return i.y}function d3_layout_stackOut(i,o,s){i.y0=o,i.y=s}F.layout.stack=function(){var i=d3_identity,o=d3_layout_stackOrderDefault,s=d3_layout_stackOffsetZero,x=d3_layout_stackOut,_=d3_layout_stackX,N=d3_layout_stackY;function stack(j,G){if(!($=j.length))return j;var Z=j.map(function(o,s){return i.call(stack,o,s)}),X=Z.map(function(i){return i.map(function(i,o){return[_.call(stack,i,o),N.call(stack,i,o)]})}),J=o.call(stack,X,G);Z=F.permute(Z,J),X=F.permute(X,J);var $,ee,et,er,en=s.call(stack,X,G),ei=Z[0].length;for(et=0;et<ei;++et)for(x.call(stack,Z[0][et],er=en[et],X[0][et][1]),ee=1;ee<$;++ee)x.call(stack,Z[ee][et],er+=X[ee-1][et][1],X[ee][et][1]);return j}return stack.values=function(o){return arguments.length?(i=o,stack):i},stack.order=function(i){return arguments.length?(o="function"==typeof i?i:e2.get(i)||d3_layout_stackOrderDefault,stack):o},stack.offset=function(i){return arguments.length?(s="function"==typeof i?i:e3.get(i)||d3_layout_stackOffsetZero,stack):s},stack.x=function(i){return arguments.length?(_=i,stack):_},stack.y=function(i){return arguments.length?(N=i,stack):N},stack.out=function(i){return arguments.length?(x=i,stack):x},stack};var e2=F.map({"inside-out":function(i){var o,s,x=i.length,_=i.map(d3_layout_stackMaxIndex),N=i.map(d3_layout_stackReduceSum),j=F.range(x).sort(function(i,o){return _[i]-_[o]}),G=0,Z=0,X=[],J=[];for(o=0;o<x;++o)s=j[o],G<Z?(G+=N[s],X.push(s)):(Z+=N[s],J.push(s));return J.reverse().concat(X)},reverse:function(i){return F.range(i.length).reverse()},default:d3_layout_stackOrderDefault}),e3=F.map({silhouette:function(i){var o,s,x,_=i.length,F=i[0].length,N=[],j=0,G=[];for(s=0;s<F;++s){for(o=0,x=0;o<_;o++)x+=i[o][s][1];x>j&&(j=x),N.push(x)}for(s=0;s<F;++s)G[s]=(j-N[s])/2;return G},wiggle:function(i){var o,s,x,_,F,N,j,G,Z,X=i.length,J=i[0],$=J.length,ee=[];for(s=1,ee[0]=G=Z=0;s<$;++s){for(o=0,_=0;o<X;++o)_+=i[o][s][1];for(o=0,F=0,j=J[s][0]-J[s-1][0];o<X;++o){for(x=0,N=(i[o][s][1]-i[o][s-1][1])/(2*j);x<o;++x)N+=(i[x][s][1]-i[x][s-1][1])/j;F+=N*i[o][s][1]}ee[s]=G-=_?F/_*j:0,G<Z&&(Z=G)}for(s=0;s<$;++s)ee[s]-=Z;return ee},expand:function(i){var o,s,x,_=i.length,F=i[0].length,N=1/_,j=[];for(s=0;s<F;++s){for(o=0,x=0;o<_;o++)x+=i[o][s][1];if(x)for(o=0;o<_;o++)i[o][s][1]/=x;else for(o=0;o<_;o++)i[o][s][1]=N}for(s=0;s<F;++s)j[s]=0;return j},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(i){return F.range(i.length)}function d3_layout_stackOffsetZero(i){for(var o=-1,s=i[0].length,x=[];++o<s;)x[o]=0;return x}function d3_layout_stackMaxIndex(i){for(var o,s=1,x=0,_=i[0][1],F=i.length;s<F;++s)(o=i[s][1])>_&&(x=s,_=o);return x}function d3_layout_stackReduceSum(i){return i.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(i,o){return i+o[1]}function d3_layout_histogramBinSturges(i,o){return d3_layout_histogramBinFixed(i,Math.ceil(Math.log(o.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(i,o){for(var s=-1,x=+i[0],_=(i[1]-x)/o,F=[];++s<=o;)F[s]=_*s+x;return F}function d3_layout_histogramRange(i){return[F.min(i),F.max(i)]}function d3_layout_packSort(i,o){return i.value-o.value}function d3_layout_packInsert(i,o){var s=i._pack_next;i._pack_next=o,o._pack_prev=i,o._pack_next=s,s._pack_prev=o}function d3_layout_packSplice(i,o){i._pack_next=o,o._pack_prev=i}function d3_layout_packIntersects(i,o){var s=o.x-i.x,x=o.y-i.y,_=i.r+o.r;return .999*_*_>s*s+x*x}function d3_layout_packSiblings(i){if((o=i.children)&&(G=o.length)){var o,s,x,_,F,N,j,G,Z=1/0,X=-1/0,J=1/0,$=-1/0;if(o.forEach(d3_layout_packLink),(s=o[0]).x=-s.r,s.y=0,bound(s),G>1&&((x=o[1]).x=x.r,x.y=0,bound(x),G>2))for(d3_layout_packPlace(s,x,_=o[2]),bound(_),d3_layout_packInsert(s,_),s._pack_prev=_,d3_layout_packInsert(_,x),x=s._pack_next,F=3;F<G;F++){d3_layout_packPlace(s,x,_=o[F]);var ee=0,et=1,er=1;for(N=x._pack_next;N!==x;N=N._pack_next,et++)if(d3_layout_packIntersects(N,_)){ee=1;break}if(1==ee)for(j=s._pack_prev;j!==N._pack_prev&&!d3_layout_packIntersects(j,_);j=j._pack_prev,er++);ee?(et<er||et==er&&x.r<s.r?d3_layout_packSplice(s,x=N):d3_layout_packSplice(s=j,x),F--):(d3_layout_packInsert(s,_),x=_,bound(_))}var en=(Z+X)/2,ei=(J+$)/2,eo=0;for(F=0;F<G;F++)_=o[F],_.x-=en,_.y-=ei,eo=Math.max(eo,_.r+Math.sqrt(_.x*_.x+_.y*_.y));i.r=eo,o.forEach(d3_layout_packUnlink)}function bound(i){Z=Math.min(i.x-i.r,Z),X=Math.max(i.x+i.r,X),J=Math.min(i.y-i.r,J),$=Math.max(i.y+i.r,$)}}function d3_layout_packLink(i){i._pack_next=i._pack_prev=i}function d3_layout_packUnlink(i){delete i._pack_next,delete i._pack_prev}function d3_layout_packPlace(i,o,s){var x=i.r+s.r,_=o.x-i.x,F=o.y-i.y;if(x&&(_||F)){var N=o.r+s.r,j=_*_+F*F;N*=N,x*=x;var G=.5+(x-N)/(2*j),Z=Math.sqrt(Math.max(0,2*N*(x+j)-(x-=j)*x-N*N))/(2*j);s.x=i.x+G*_+Z*F,s.y=i.y+G*F-Z*_}else s.x=i.x+x,s.y=i.y}function d3_layout_treeSeparation(i,o){return i.parent==o.parent?1:2}function d3_layout_treeLeft(i){var o=i.children;return o.length?o[0]:i.t}function d3_layout_treeRight(i){var o,s=i.children;return(o=s.length)?s[o-1]:i.t}function d3_layout_treemapPadNull(i){return{x:i.x,y:i.y,dx:i.dx,dy:i.dy}}function d3_layout_treemapPad(i,o){var s=i.x+o[3],x=i.y+o[0],_=i.dx-o[1]-o[3],F=i.dy-o[0]-o[2];return _<0&&(s+=_/2,_=0),F<0&&(x+=F/2,F=0),{x:s,y:x,dx:_,dy:F}}function d3_scaleExtent(i){var o=i[0],s=i[i.length-1];return o<s?[o,s]:[s,o]}function d3_scaleRange(i){return i.rangeExtent?i.rangeExtent():d3_scaleExtent(i.range())}function d3_scale_bilinear(i,o,s,x){var _=s(i[0],i[1]),F=x(o[0],o[1]);return function(i){return F(_(i))}}function d3_scale_nice(i,o){var s,x=0,_=i.length-1,F=i[x],N=i[_];return N<F&&(s=x,x=_,_=s,s=F,F=N,N=s),i[x]=o.floor(F),i[_]=o.ceil(N),i}function d3_scale_niceStep(i){return i?{floor:function(o){return Math.floor(o/i)*i},ceil:function(o){return Math.ceil(o/i)*i}}:e5}F.layout.histogram=function(){var i=!0,o=Number,s=d3_layout_histogramRange,x=d3_layout_histogramBinSturges;function histogram(_,N){for(var j,G,Z=[],X=_.map(o,this),J=s.call(this,X,N),$=x.call(this,J,X,N),N=-1,ee=X.length,et=$.length-1,er=i?1:1/ee;++N<et;)(j=Z[N]=[]).dx=$[N+1]-(j.x=$[N]),j.y=0;if(et>0)for(N=-1;++N<ee;)(G=X[N])>=J[0]&&G<=J[1]&&(j=Z[F.bisect($,G,1,et)-1],j.y+=er,j.push(_[N]));return Z}return histogram.value=function(i){return arguments.length?(o=i,histogram):o},histogram.range=function(i){return arguments.length?(s=d3_functor(i),histogram):s},histogram.bins=function(i){return arguments.length?(x="number"==typeof i?function(o){return d3_layout_histogramBinFixed(o,i)}:d3_functor(i),histogram):x},histogram.frequency=function(o){return arguments.length?(i=!!o,histogram):i},histogram},F.layout.pack=function(){var i,o=F.layout.hierarchy().sort(d3_layout_packSort),s=0,x=[1,1];function pack(_,F){var N=o.call(this,_,F),j=N[0],G=x[0],Z=x[1],X=null==i?Math.sqrt:"function"==typeof i?i:function(){return i};if(j.x=j.y=0,d3_layout_hierarchyVisitAfter(j,function(i){i.r=+X(i.value)}),d3_layout_hierarchyVisitAfter(j,d3_layout_packSiblings),s){var J=s*(i?1:Math.max(2*j.r/G,2*j.r/Z))/2;d3_layout_hierarchyVisitAfter(j,function(i){i.r+=J}),d3_layout_hierarchyVisitAfter(j,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(j,function(i){i.r-=J})}return function d3_layout_packTransform(i,o,s,x){var _=i.children;if(i.x=o+=x*i.x,i.y=s+=x*i.y,i.r*=x,_)for(var F=-1,N=_.length;++F<N;)d3_layout_packTransform(_[F],o,s,x)}(j,G/2,Z/2,i?1:1/Math.max(2*j.r/G,2*j.r/Z)),N}return pack.size=function(i){return arguments.length?(x=i,pack):x},pack.radius=function(o){return arguments.length?(i=null==o||"function"==typeof o?o:+o,pack):i},pack.padding=function(i){return arguments.length?(s=+i,pack):s},d3_layout_hierarchyRebind(pack,o)},F.layout.tree=function(){var i=F.layout.hierarchy().sort(null).value(null),o=d3_layout_treeSeparation,s=[1,1],x=null;function tree(_,F){var N=i.call(this,_,F),j=N[0],G=function(i){for(var o,s={A:null,children:[i]},x=[s];null!=(o=x.pop());)for(var _,F=o.children,N=0,j=F.length;N<j;++N)x.push((F[N]=_={_:F[N],parent:o,children:(_=F[N].children)&&_.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:N}).a=_);return s.children[0]}(j);if(d3_layout_hierarchyVisitAfter(G,firstWalk),G.parent.m=-G.z,d3_layout_hierarchyVisitBefore(G,secondWalk),x)d3_layout_hierarchyVisitBefore(j,sizeNode);else{var Z=j,X=j,J=j;d3_layout_hierarchyVisitBefore(j,function(i){i.x<Z.x&&(Z=i),i.x>X.x&&(X=i),i.depth>J.depth&&(J=i)});var $=o(Z,X)/2-Z.x,ee=s[0]/(X.x+o(X,Z)/2+$),et=s[1]/(J.depth||1);d3_layout_hierarchyVisitBefore(j,function(i){i.x=(i.x+$)*ee,i.y=i.depth*et})}return N}function firstWalk(i){var s=i.children,x=i.parent.children,_=i.i?x[i.i-1]:null;if(s.length){(function(i){for(var o,s=0,x=0,_=i.children,F=_.length;--F>=0;)o=_[F],o.z+=s,o.m+=s,s+=o.s+(x+=o.c)})(i);var F=(s[0].z+s[s.length-1].z)/2;_?(i.z=_.z+o(i._,_._),i.m=i.z-F):i.z=F}else _&&(i.z=_.z+o(i._,_._));i.parent.A=function(i,s,x){if(s){for(var _,F,N,j=i,G=i,Z=s,X=j.parent.children[0],J=j.m,$=G.m,ee=Z.m,et=X.m;Z=d3_layout_treeRight(Z),j=d3_layout_treeLeft(j),Z&&j;)X=d3_layout_treeLeft(X),(G=d3_layout_treeRight(G)).a=i,(N=Z.z+ee-j.z-J+o(Z._,j._))>0&&(function(i,o,s){var x=s/(o.i-i.i);o.c-=x,o.s+=s,i.c+=x,o.z+=s,o.m+=s}((_=Z,F=x,_.a.parent===i.parent?_.a:F),i,N),J+=N,$+=N),ee+=Z.m,J+=j.m,et+=X.m,$+=G.m;Z&&!d3_layout_treeRight(G)&&(G.t=Z,G.m+=ee-$),j&&!d3_layout_treeLeft(X)&&(X.t=j,X.m+=J-et,x=i)}return x}(i,_,i.parent.A||x[0])}function secondWalk(i){i._.x=i.z+i.parent.m,i.m+=i.parent.m}function sizeNode(i){i.x*=s[0],i.y=i.depth*s[1]}return tree.separation=function(i){return arguments.length?(o=i,tree):o},tree.size=function(i){return arguments.length?(x=null==(s=i)?sizeNode:null,tree):x?null:s},tree.nodeSize=function(i){return arguments.length?(x=null==(s=i)?null:sizeNode,tree):x?s:null},d3_layout_hierarchyRebind(tree,i)},F.layout.cluster=function(){var i=F.layout.hierarchy().sort(null).value(null),o=d3_layout_treeSeparation,s=[1,1],x=!1;function cluster(_,N){var j,G=i.call(this,_,N),Z=G[0],X=0;d3_layout_hierarchyVisitAfter(Z,function(i){var s=i.children;s&&s.length?(i.x=s.reduce(function(i,o){return i+o.x},0)/s.length,i.y=1+F.max(s,function(i){return i.y})):(i.x=j?X+=o(i,j):0,i.y=0,j=i)});var J=function d3_layout_clusterLeft(i){var o=i.children;return o&&o.length?d3_layout_clusterLeft(o[0]):i}(Z),$=function d3_layout_clusterRight(i){var o,s=i.children;return s&&(o=s.length)?d3_layout_clusterRight(s[o-1]):i}(Z),ee=J.x-o(J,$)/2,et=$.x+o($,J)/2;return d3_layout_hierarchyVisitAfter(Z,x?function(i){i.x=(i.x-Z.x)*s[0],i.y=(Z.y-i.y)*s[1]}:function(i){i.x=(i.x-ee)/(et-ee)*s[0],i.y=(1-(Z.y?i.y/Z.y:1))*s[1]}),G}return cluster.separation=function(i){return arguments.length?(o=i,cluster):o},cluster.size=function(i){return arguments.length?(x=null==(s=i),cluster):x?null:s},cluster.nodeSize=function(i){return arguments.length?(x=null!=(s=i),cluster):x?s:null},d3_layout_hierarchyRebind(cluster,i)},F.layout.treemap=function(){var i,o=F.layout.hierarchy(),s=Math.round,x=[1,1],_=null,N=d3_layout_treemapPadNull,j=!1,G="squarify",Z=.5*(1+Math.sqrt(5));function scale(i,o){for(var s,x,_=-1,F=i.length;++_<F;)x=(s=i[_]).value*(o<0?0:o),s.area=isNaN(x)||x<=0?0:x}function position(i,o,x,_){var F,N=-1,j=i.length,G=x.x,Z=x.y,X=o?s(i.area/o):0;if(o==x.dx){for((_||X>x.dy)&&(X=x.dy);++N<j;)(F=i[N]).x=G,F.y=Z,F.dy=X,G+=F.dx=Math.min(x.x+x.dx-G,X?s(F.area/X):0);F.z=!0,F.dx+=x.x+x.dx-G,x.y+=X,x.dy-=X}else{for((_||X>x.dx)&&(X=x.dx);++N<j;)(F=i[N]).x=G,F.y=Z,F.dx=X,Z+=F.dy=Math.min(x.y+x.dy-Z,X?s(F.area/X):0);F.z=!1,F.dy+=x.y+x.dy-Z,x.x+=X,x.dx-=X}}function treemap(s){var _=i||o(s),F=_[0];return F.x=F.y=0,F.value?(F.dx=x[0],F.dy=x[1]):F.dx=F.dy=0,i&&o.revalue(F),scale([F],F.dx*F.dy/F.value),(i?function stickify(i){var o=i.children;if(o&&o.length){var s,x=N(i),_=o.slice(),F=[];for(scale(_,x.dx*x.dy/i.value),F.area=0;s=_.pop();)F.push(s),F.area+=s.area,null!=s.z&&(position(F,s.z?x.dx:x.dy,x,!_.length),F.length=F.area=0);o.forEach(stickify)}}:function squarify(i){var o=i.children;if(o&&o.length){var s,x,_,F=N(i),j=[],X=o.slice(),J=1/0,$="slice"===G?F.dx:"dice"===G?F.dy:"slice-dice"===G?1&i.depth?F.dy:F.dx:Math.min(F.dx,F.dy);for(scale(X,F.dx*F.dy/i.value),j.area=0;(_=X.length)>0;)j.push(s=X[_-1]),j.area+=s.area,"squarify"!==G||(x=function(i,o){for(var s,x=i.area,_=0,F=1/0,N=-1,j=i.length;++N<j;)(s=i[N].area)&&(s<F&&(F=s),s>_&&(_=s));return x*=x,o*=o,x?Math.max(o*_*Z/x,x/(o*F*Z)):1/0}(j,$))<=J?(X.pop(),J=x):(j.area-=j.pop().area,position(j,$,F,!1),$=Math.min(F.dx,F.dy),j.length=j.area=0,J=1/0);j.length&&(position(j,$,F,!0),j.length=j.area=0),o.forEach(squarify)}})(F),j&&(i=_),_}return treemap.size=function(i){return arguments.length?(x=i,treemap):x},treemap.padding=function(i){var o;return arguments.length?(N=null==(_=i)?d3_layout_treemapPadNull:"function"==(o=typeof i)?function(o){var s=i.call(treemap,o,o.depth);return null==s?d3_layout_treemapPadNull(o):d3_layout_treemapPad(o,"number"==typeof s?[s,s,s,s]:s)}:("number"===o&&(i=[i,i,i,i]),function(o){return d3_layout_treemapPad(o,i)}),treemap):_},treemap.round=function(i){return arguments.length?(s=i?Math.round:Number,treemap):s!=Number},treemap.sticky=function(o){return arguments.length?(j=o,i=null,treemap):j},treemap.ratio=function(i){return arguments.length?(Z=i,treemap):Z},treemap.mode=function(i){return arguments.length?(G=i+"",treemap):G},d3_layout_hierarchyRebind(treemap,o)},F.random={normal:function(i,o){var s=arguments.length;return s<2&&(o=1),s<1&&(i=0),function(){var s,x,_;do _=(s=2*Math.random()-1)*s+(x=2*Math.random()-1)*x;while(!_||_>1);return i+o*s*Math.sqrt(-2*Math.log(_)/_)}},logNormal:function(){var i=F.random.normal.apply(F,arguments);return function(){return Math.exp(i())}},bates:function(i){var o=F.random.irwinHall(i);return function(){return o()/i}},irwinHall:function(i){return function(){for(var o=0,s=0;s<i;s++)o+=Math.random();return o}}},F.scale={};var e5={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(i,o,s,x){var _=[],N=[],j=0,G=Math.min(i.length,o.length)-1;for(i[G]<i[0]&&(i=i.slice().reverse(),o=o.slice().reverse());++j<=G;)_.push(s(i[j-1],i[j])),N.push(x(o[j-1],o[j]));return function(o){var s=F.bisect(i,o,1,G)-1;return N[s](_[s](o))}}function d3_scale_linearRebind(i,o){return F.rebind(i,o,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(i,o){return d3_scale_nice(i,d3_scale_niceStep(d3_scale_linearTickRange(i,o)[2])),d3_scale_nice(i,d3_scale_niceStep(d3_scale_linearTickRange(i,o)[2])),i}function d3_scale_linearTickRange(i,o){null==o&&(o=10);var s=d3_scaleExtent(i),x=s[1]-s[0],_=Math.pow(10,Math.floor(Math.log(x/o)/Math.LN10)),F=o/x*_;return F<=.15?_*=10:F<=.35?_*=5:F<=.75&&(_*=2),s[0]=Math.ceil(s[0]/_)*_,s[1]=Math.floor(s[1]/_)*_+.5*_,s[2]=_,s}function d3_scale_linearTicks(i,o){return F.range.apply(F,d3_scale_linearTickRange(i,o))}F.scale.linear=function(){return function d3_scale_linear(i,o,s,x){var _,F;function rescale(){var N=Math.min(i.length,o.length)>2?d3_scale_polylinear:d3_scale_bilinear,j=x?d3_uninterpolateClamp:d3_uninterpolateNumber;return _=N(i,o,j,s),F=N(o,i,j,d3_interpolate),scale}function scale(i){return _(i)}return scale.invert=function(i){return F(i)},scale.domain=function(o){return arguments.length?(i=o.map(Number),rescale()):i},scale.range=function(i){return arguments.length?(o=i,rescale()):o},scale.rangeRound=function(i){return scale.range(i).interpolate(d3_interpolateRound)},scale.clamp=function(i){return arguments.length?(x=i,rescale()):x},scale.interpolate=function(i){return arguments.length?(s=i,rescale()):s},scale.ticks=function(o){return d3_scale_linearTicks(i,o)},scale.tickFormat=function(o,s){return d3_scale_linearTickFormat(i,o,s)},scale.nice=function(o){return d3_scale_linearNice(i,o),rescale()},scale.copy=function(){return d3_scale_linear(i,o,s,x)},rescale()}([0,1],[0,1],d3_interpolate,!1)},F.scale.log=function(){return function d3_scale_log(i,o,s,x){function log(i){return(s?Math.log(i<0?0:i):-Math.log(i>0?0:-i))/Math.log(o)}function pow(i){return s?Math.pow(o,i):-Math.pow(o,-i)}function scale(o){return i(log(o))}return scale.invert=function(o){return pow(i.invert(o))},scale.domain=function(o){return arguments.length?(s=o[0]>=0,i.domain((x=o.map(Number)).map(log)),scale):x},scale.base=function(s){return arguments.length?(o=+s,i.domain(x.map(log)),scale):o},scale.nice=function(){var o=d3_scale_nice(x.map(log),s?Math:e4);return i.domain(o),x=o.map(pow),scale},scale.ticks=function(){var i=d3_scaleExtent(x),_=[],F=i[0],N=i[1],j=Math.floor(log(F)),G=Math.ceil(log(N)),Z=o%1?2:o;if(isFinite(G-j)){if(s){for(;j<G;j++)for(var X=1;X<Z;X++)_.push(pow(j)*X);_.push(pow(j))}else for(_.push(pow(j));j++<G;)for(var X=Z-1;X>0;X--)_.push(pow(j)*X);for(j=0;_[j]<F;j++);for(G=_.length;_[G-1]>N;G--);_=_.slice(j,G)}return _},scale.copy=function(){return d3_scale_log(i.copy(),o,s,x)},d3_scale_linearRebind(scale,i)}(F.scale.linear().domain([0,1]),10,!0,[1,10])};var e4={floor:function(i){return-Math.ceil(-i)},ceil:function(i){return-Math.floor(-i)}};function d3_scale_powPow(i){return function(o){return o<0?-Math.pow(-o,i):Math.pow(o,i)}}F.scale.pow=function(){return function d3_scale_pow(i,o,s){var x=d3_scale_powPow(o),_=d3_scale_powPow(1/o);function scale(o){return i(x(o))}return scale.invert=function(o){return _(i.invert(o))},scale.domain=function(o){return arguments.length?(i.domain((s=o.map(Number)).map(x)),scale):s},scale.ticks=function(i){return d3_scale_linearTicks(s,i)},scale.tickFormat=function(i,o){return d3_scale_linearTickFormat(s,i,o)},scale.nice=function(i){return scale.domain(d3_scale_linearNice(s,i))},scale.exponent=function(F){return arguments.length?(x=d3_scale_powPow(o=F),_=d3_scale_powPow(1/o),i.domain(s.map(x)),scale):o},scale.copy=function(){return d3_scale_pow(i.copy(),o,s)},d3_scale_linearRebind(scale,i)}(F.scale.linear(),1,[0,1])},F.scale.sqrt=function(){return F.scale.pow().exponent(.5)},F.scale.ordinal=function(){return function d3_scale_ordinal(i,o){var s,x,_;function scale(_){return x[((s.get(_)||("range"===o.t?s.set(_,i.push(_)):NaN))-1)%x.length]}function steps(o,s){return F.range(i.length).map(function(i){return o+s*i})}return scale.domain=function(x){if(!arguments.length)return i;i=[],s=new d3_Map;for(var _,F=-1,N=x.length;++F<N;)s.has(_=x[F])||s.set(_,i.push(_));return scale[o.t].apply(scale,o.a)},scale.range=function(i){return arguments.length?(x=i,_=0,o={t:"range",a:arguments},scale):x},scale.rangePoints=function(s,F){arguments.length<2&&(F=0);var N=s[0],j=s[1],G=i.length<2?(N=(N+j)/2,0):(j-N)/(i.length-1+F);return x=steps(N+G*F/2,G),_=0,o={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(s,F){arguments.length<2&&(F=0);var N=s[0],j=s[1],G=i.length<2?(N=j=Math.round((N+j)/2),0):(j-N)/(i.length-1+F)|0;return x=steps(N+Math.round(G*F/2+(j-N-(i.length-1+F)*G)/2),G),_=0,o={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(s,F,N){arguments.length<2&&(F=0),arguments.length<3&&(N=F);var j=s[1]<s[0],G=s[j-0],Z=(s[1-j]-G)/(i.length-F+2*N);return x=steps(G+Z*N,Z),j&&x.reverse(),_=Z*(1-F),o={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(s,F,N){arguments.length<2&&(F=0),arguments.length<3&&(N=F);var j=s[1]<s[0],G=s[j-0],Z=s[1-j],X=Math.floor((Z-G)/(i.length-F+2*N));return x=steps(G+Math.round((Z-G-(i.length-F)*X)/2),X),j&&x.reverse(),_=Math.round(X*(1-F)),o={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return _},scale.rangeExtent=function(){return d3_scaleExtent(o.a[0])},scale.copy=function(){return d3_scale_ordinal(i,o)},scale.domain(i)}([],{t:"range",a:[[]]})},F.scale.category10=function(){return F.scale.ordinal().range(e6)},F.scale.category20=function(){return F.scale.ordinal().range(e8)},F.scale.category20b=function(){return F.scale.ordinal().range(e7)},F.scale.category20c=function(){return F.scale.ordinal().range(e9)};var e6=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),e8=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),e7=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),e9=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);function d3_zero(){return 0}F.scale.quantile=function(){return function d3_scale_quantile(i,o){var s;function rescale(){var x=0,_=o.length;for(s=[];++x<_;)s[x-1]=F.quantile(i,x/_);return scale}function scale(i){if(!isNaN(i=+i))return o[F.bisect(s,i)]}return scale.domain=function(o){return arguments.length?(i=o.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):i},scale.range=function(i){return arguments.length?(o=i,rescale()):o},scale.quantiles=function(){return s},scale.invertExtent=function(x){return(x=o.indexOf(x))<0?[NaN,NaN]:[x>0?s[x-1]:i[0],x<s.length?s[x]:i[i.length-1]]},scale.copy=function(){return d3_scale_quantile(i,o)},rescale()}([],[])},F.scale.quantize=function(){return function d3_scale_quantize(i,o,s){var x,_;function scale(o){return s[Math.max(0,Math.min(_,Math.floor(x*(o-i))))]}function rescale(){return x=s.length/(o-i),_=s.length-1,scale}return scale.domain=function(s){return arguments.length?(i=+s[0],o=+s[s.length-1],rescale()):[i,o]},scale.range=function(i){return arguments.length?(s=i,rescale()):s},scale.invertExtent=function(o){return[o=(o=s.indexOf(o))<0?NaN:o/x+i,o+1/x]},scale.copy=function(){return d3_scale_quantize(i,o,s)},rescale()}(0,1,[0,1])},F.scale.threshold=function(){return function d3_scale_threshold(i,o){function scale(s){if(s<=s)return o[F.bisect(i,s)]}return scale.domain=function(o){return arguments.length?(i=o,scale):i},scale.range=function(i){return arguments.length?(o=i,scale):o},scale.invertExtent=function(s){return[i[(s=o.indexOf(s))-1],i[s]]},scale.copy=function(){return d3_scale_threshold(i,o)},scale}([.5],[0,1])},F.scale.identity=function(){return function d3_scale_identity(i){function identity(i){return+i}return identity.invert=identity,identity.domain=identity.range=function(o){return arguments.length?(i=o.map(identity),identity):i},identity.ticks=function(o){return d3_scale_linearTicks(i,o)},identity.tickFormat=function(o,s){return d3_scale_linearTickFormat(i,o,s)},identity.copy=function(){return d3_scale_identity(i)},identity}([0,1])},F.svg={},F.svg.arc=function(){var i=d3_svg_arcInnerRadius,o=d3_svg_arcOuterRadius,s=d3_zero,x=te,_=d3_svg_arcStartAngle,F=d3_svg_arcEndAngle,N=d3_svg_arcPadAngle;function arc(){var j=Math.max(0,+i.apply(this,arguments)),G=Math.max(0,+o.apply(this,arguments)),Z=_.apply(this,arguments)-ev,X=F.apply(this,arguments)-ev,J=Math.abs(X-Z),$=Z>X?0:1;if(G<j&&(ee=G,G=j,j=ee),J>=ey)return circleSegment(G,$)+(j?circleSegment(j,1-$):"")+"Z";var ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed=0,ep=0,em=[];if((en=(+N.apply(this,arguments)||0)/2)&&(er=x===te?Math.sqrt(j*j+G*G):+x.apply(this,arguments),$||(ep*=-1),G&&(ep=d3_asin(er/G*Math.sin(en))),j&&(ed=d3_asin(er/j*Math.sin(en)))),G){ei=G*Math.cos(Z+ep),eo=G*Math.sin(Z+ep),es=G*Math.cos(X-ep),el=G*Math.sin(X-ep);var ex=Math.abs(X-Z-2*ep)<=eg?0:1;if(ep&&d3_svg_arcSweep(ei,eo,es,el)===$^ex){var e_=(Z+X)/2;ei=G*Math.cos(e_),eo=G*Math.sin(e_),es=el=null}}else ei=eo=0;if(j){ec=j*Math.cos(X-ed),eu=j*Math.sin(X-ed),ef=j*Math.cos(Z+ed),eh=j*Math.sin(Z+ed);var ew=Math.abs(Z-X+2*ed)<=eg?0:1;if(ed&&d3_svg_arcSweep(ec,eu,ef,eh)===1-$^ew){var eT=(Z+X)/2;ec=j*Math.cos(eT),eu=j*Math.sin(eT),ef=eh=null}}else ec=eu=0;if(J>1e-6&&(ee=Math.min(Math.abs(G-j)/2,+s.apply(this,arguments)))>.001){et=j<G^$?0:1;var ek=ee,eA=ee;if(J<eg){var eS=null==ef?[ec,eu]:null==es?[ei,eo]:d3_geom_polygonIntersect([ei,eo],[ef,eh],[es,el],[ec,eu]),eM=ei-eS[0],eC=eo-eS[1],eE=es-eS[0],eL=el-eS[1],eP=1/Math.sin(Math.acos((eM*eE+eC*eL)/(Math.sqrt(eM*eM+eC*eC)*Math.sqrt(eE*eE+eL*eL)))/2),eI=Math.sqrt(eS[0]*eS[0]+eS[1]*eS[1]);eA=Math.min(ee,(j-eI)/(eP-1)),ek=Math.min(ee,(G-eI)/(eP+1))}if(null!=es){var eO=d3_svg_arcCornerTangents(null==ef?[ec,eu]:[ef,eh],[ei,eo],G,ek,$),eD=d3_svg_arcCornerTangents([es,el],[ec,eu],G,ek,$);ee===ek?em.push("M",eO[0],"A",ek,",",ek," 0 0,",et," ",eO[1],"A",G,",",G," 0 ",1-$^d3_svg_arcSweep(eO[1][0],eO[1][1],eD[1][0],eD[1][1]),",",$," ",eD[1],"A",ek,",",ek," 0 0,",et," ",eD[0]):em.push("M",eO[0],"A",ek,",",ek," 0 1,",et," ",eD[0])}else em.push("M",ei,",",eo);if(null!=ef){var eR=d3_svg_arcCornerTangents([ei,eo],[ef,eh],j,-eA,$),eB=d3_svg_arcCornerTangents([ec,eu],null==es?[ei,eo]:[es,el],j,-eA,$);ee===eA?em.push("L",eB[0],"A",eA,",",eA," 0 0,",et," ",eB[1],"A",j,",",j," 0 ",$^d3_svg_arcSweep(eB[1][0],eB[1][1],eR[1][0],eR[1][1]),",",1-$," ",eR[1],"A",eA,",",eA," 0 0,",et," ",eR[0]):em.push("L",eB[0],"A",eA,",",eA," 0 0,",et," ",eR[0])}else em.push("L",ec,",",eu)}else em.push("M",ei,",",eo),null!=es&&em.push("A",G,",",G," 0 ",ex,",",$," ",es,",",el),em.push("L",ec,",",eu),null!=ef&&em.push("A",j,",",j," 0 ",ew,",",1-$," ",ef,",",eh);return em.push("Z"),em.join("")}function circleSegment(i,o){return"M0,"+i+"A"+i+","+i+" 0 1,"+o+" 0,"+-i+"A"+i+","+i+" 0 1,"+o+" 0,"+i}return arc.innerRadius=function(o){return arguments.length?(i=d3_functor(o),arc):i},arc.outerRadius=function(i){return arguments.length?(o=d3_functor(i),arc):o},arc.cornerRadius=function(i){return arguments.length?(s=d3_functor(i),arc):s},arc.padRadius=function(i){return arguments.length?(x=i==te?te:d3_functor(i),arc):x},arc.startAngle=function(i){return arguments.length?(_=d3_functor(i),arc):_},arc.endAngle=function(i){return arguments.length?(F=d3_functor(i),arc):F},arc.padAngle=function(i){return arguments.length?(N=d3_functor(i),arc):N},arc.centroid=function(){var s=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2,x=(+_.apply(this,arguments)+ +F.apply(this,arguments))/2-ev;return[Math.cos(x)*s,Math.sin(x)*s]},arc};var te="auto";function d3_svg_arcInnerRadius(i){return i.innerRadius}function d3_svg_arcOuterRadius(i){return i.outerRadius}function d3_svg_arcStartAngle(i){return i.startAngle}function d3_svg_arcEndAngle(i){return i.endAngle}function d3_svg_arcPadAngle(i){return i&&i.padAngle}function d3_svg_arcSweep(i,o,s,x){return(i-s)*o-(o-x)*i>0?0:1}function d3_svg_arcCornerTangents(i,o,s,x,_){var F=i[0]-o[0],N=i[1]-o[1],j=(_?x:-x)/Math.sqrt(F*F+N*N),G=j*N,Z=-j*F,X=i[0]+G,J=i[1]+Z,$=o[0]+G,ee=o[1]+Z,et=(X+$)/2,er=(J+ee)/2,en=$-X,ei=ee-J,eo=en*en+ei*ei,es=s-x,el=X*ee-$*J,ec=(ei<0?-1:1)*Math.sqrt(Math.max(0,es*es*eo-el*el)),eu=(el*ei-en*ec)/eo,ef=(-el*en-ei*ec)/eo,eh=(el*ei+en*ec)/eo,ed=(-el*en+ei*ec)/eo,ep=eu-et,eg=ef-er,em=eh-et,ey=ed-er;return ep*ep+eg*eg>em*em+ey*ey&&(eu=eh,ef=ed),[[eu-G,ef-Z],[eu*s/es,ef*s/es]]}function d3_true(){return!0}function d3_svg_line(i){var o=d3_geom_pointX,s=d3_geom_pointY,x=d3_true,_=d3_svg_lineLinear,F=_.key,N=.7;function line(F){var j,G=[],Z=[],X=-1,J=F.length,$=d3_functor(o),ee=d3_functor(s);function segment(){G.push("M",_(i(Z),N))}for(;++X<J;)x.call(this,j=F[X],X)?Z.push([+$.call(this,j,X),+ee.call(this,j,X)]):Z.length&&(segment(),Z=[]);return Z.length&&segment(),G.length?G.join(""):null}return line.x=function(i){return arguments.length?(o=i,line):o},line.y=function(i){return arguments.length?(s=i,line):s},line.defined=function(i){return arguments.length?(x=i,line):x},line.interpolate=function(i){return arguments.length?(F="function"==typeof i?_=i:(_=tt.get(i)||d3_svg_lineLinear).key,line):F},line.tension=function(i){return arguments.length?(N=i,line):N},line}F.svg.line=function(){return d3_svg_line(d3_identity)};var tt=F.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:function(i){for(var o=0,s=i.length,x=i[0],_=[x[0],",",x[1]];++o<s;)_.push("H",(x[0]+(x=i[o])[0])/2,"V",x[1]);return s>1&&_.push("H",x[0]),_.join("")},"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":function(i){if(i.length<4)return d3_svg_lineLinear(i);for(var o,s=[],x=-1,_=i.length,F=[0],N=[0];++x<3;)o=i[x],F.push(o[0]),N.push(o[1]);for(s.push(d3_svg_lineDot4(ti,F)+","+d3_svg_lineDot4(ti,N)),--x;++x<_;)o=i[x],F.shift(),F.push(o[0]),N.shift(),N.push(o[1]),d3_svg_lineBasisBezier(s,F,N);return s.join("")},"basis-closed":function(i){for(var o,s,x=-1,_=i.length,F=_+4,N=[],j=[];++x<4;)s=i[x%_],N.push(s[0]),j.push(s[1]);for(o=[d3_svg_lineDot4(ti,N),",",d3_svg_lineDot4(ti,j)],--x;++x<F;)s=i[x%_],N.shift(),N.push(s[0]),j.shift(),j.push(s[1]),d3_svg_lineBasisBezier(o,N,j);return o.join("")},bundle:function(i,o){var s=i.length-1;if(s)for(var x,_,F=i[0][0],N=i[0][1],j=i[s][0]-F,G=i[s][1]-N,Z=-1;++Z<=s;)x=i[Z],_=Z/s,x[0]=o*x[0]+(1-o)*(F+_*j),x[1]=o*x[1]+(1-o)*(N+_*G);return d3_svg_lineBasis(i)},cardinal:function(i,o){return i.length<3?d3_svg_lineLinear(i):i[0]+d3_svg_lineHermite(i,d3_svg_lineCardinalTangents(i,o))},"cardinal-open":function(i,o){return i.length<4?d3_svg_lineLinear(i):i[1]+d3_svg_lineHermite(i.slice(1,-1),d3_svg_lineCardinalTangents(i,o))},"cardinal-closed":function(i,o){return i.length<3?d3_svg_lineLinearClosed(i):i[0]+d3_svg_lineHermite((i.push(i[0]),i),d3_svg_lineCardinalTangents([i[i.length-2]].concat(i,[i[1]]),o))},monotone:function(i){return i.length<3?d3_svg_lineLinear(i):i[0]+d3_svg_lineHermite(i,function(i){for(var o,s,x,_,F=[],N=function(i){for(var o=0,s=i.length-1,x=[],_=i[0],F=i[1],N=x[0]=d3_svg_lineSlope(_,F);++o<s;)x[o]=(N+(N=d3_svg_lineSlope(_=F,F=i[o+1])))/2;return x[o]=N,x}(i),j=-1,G=i.length-1;++j<G;)1e-6>et(o=d3_svg_lineSlope(i[j],i[j+1]))?N[j]=N[j+1]=0:(_=(s=N[j]/o)*s+(x=N[j+1]/o)*x)>9&&(_=3*o/Math.sqrt(_),N[j]=_*s,N[j+1]=_*x);for(j=-1;++j<=G;)F.push([(_=(i[Math.min(G,j+1)][0]-i[Math.max(0,j-1)][0])/(6*(1+N[j]*N[j])))||0,N[j]*_||0]);return F}(i))}});function d3_svg_lineLinear(i){return i.length>1?i.join("L"):i+"Z"}function d3_svg_lineLinearClosed(i){return i.join("L")+"Z"}function d3_svg_lineStepBefore(i){for(var o=0,s=i.length,x=i[0],_=[x[0],",",x[1]];++o<s;)_.push("V",(x=i[o])[1],"H",x[0]);return _.join("")}function d3_svg_lineStepAfter(i){for(var o=0,s=i.length,x=i[0],_=[x[0],",",x[1]];++o<s;)_.push("H",(x=i[o])[0],"V",x[1]);return _.join("")}function d3_svg_lineHermite(i,o){if(o.length<1||i.length!=o.length&&i.length!=o.length+2)return d3_svg_lineLinear(i);var s=i.length!=o.length,x="",_=i[0],F=i[1],N=o[0],j=N,G=1;if(s&&(x+="Q"+(F[0]-2*N[0]/3)+","+(F[1]-2*N[1]/3)+","+F[0]+","+F[1],_=i[1],G=2),o.length>1){j=o[1],F=i[G],G++,x+="C"+(_[0]+N[0])+","+(_[1]+N[1])+","+(F[0]-j[0])+","+(F[1]-j[1])+","+F[0]+","+F[1];for(var Z=2;Z<o.length;Z++,G++)F=i[G],j=o[Z],x+="S"+(F[0]-j[0])+","+(F[1]-j[1])+","+F[0]+","+F[1]}if(s){var X=i[G];x+="Q"+(F[0]+2*j[0]/3)+","+(F[1]+2*j[1]/3)+","+X[0]+","+X[1]}return x}function d3_svg_lineCardinalTangents(i,o){for(var s,x=[],_=(1-o)/2,F=i[0],N=i[1],j=1,G=i.length;++j<G;)s=F,F=N,x.push([_*((N=i[j])[0]-s[0]),_*(N[1]-s[1])]);return x}function d3_svg_lineBasis(i){if(i.length<3)return d3_svg_lineLinear(i);var o=1,s=i.length,x=i[0],_=x[0],F=x[1],N=[_,_,_,(x=i[1])[0]],j=[F,F,F,x[1]],G=[_,",",F,"L",d3_svg_lineDot4(ti,N),",",d3_svg_lineDot4(ti,j)];for(i.push(i[s-1]);++o<=s;)x=i[o],N.shift(),N.push(x[0]),j.shift(),j.push(x[1]),d3_svg_lineBasisBezier(G,N,j);return i.pop(),G.push("L",x),G.join("")}function d3_svg_lineDot4(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]}tt.forEach(function(i,o){o.key=i,o.closed=/-closed$/.test(i)});var tr=[0,2/3,1/3,0],tn=[0,1/3,2/3,0],ti=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(i,o,s){i.push("C",d3_svg_lineDot4(tr,o),",",d3_svg_lineDot4(tr,s),",",d3_svg_lineDot4(tn,o),",",d3_svg_lineDot4(tn,s),",",d3_svg_lineDot4(ti,o),",",d3_svg_lineDot4(ti,s))}function d3_svg_lineSlope(i,o){return(o[1]-i[1])/(o[0]-i[0])}function d3_svg_lineRadial(i){for(var o,s,x,_=-1,F=i.length;++_<F;)s=(o=i[_])[0],x=o[1]-ev,o[0]=s*Math.cos(x),o[1]=s*Math.sin(x);return i}function d3_svg_area(i){var o=d3_geom_pointX,s=d3_geom_pointX,x=0,_=d3_geom_pointY,F=d3_true,N=d3_svg_lineLinear,j=N.key,G=N,Z="L",X=.7;function area(j){var J,$,ee,et=[],er=[],en=[],ei=-1,eo=j.length,es=d3_functor(o),el=d3_functor(x),ec=o===s?function(){return $}:d3_functor(s),eu=x===_?function(){return ee}:d3_functor(_);function segment(){et.push("M",N(i(en),X),Z,G(i(er.reverse()),X),"Z")}for(;++ei<eo;)F.call(this,J=j[ei],ei)?(er.push([$=+es.call(this,J,ei),ee=+el.call(this,J,ei)]),en.push([+ec.call(this,J,ei),+eu.call(this,J,ei)])):er.length&&(segment(),er=[],en=[]);return er.length&&segment(),et.length?et.join(""):null}return area.x=function(i){return arguments.length?(o=s=i,area):s},area.x0=function(i){return arguments.length?(o=i,area):o},area.x1=function(i){return arguments.length?(s=i,area):s},area.y=function(i){return arguments.length?(x=_=i,area):_},area.y0=function(i){return arguments.length?(x=i,area):x},area.y1=function(i){return arguments.length?(_=i,area):_},area.defined=function(i){return arguments.length?(F=i,area):F},area.interpolate=function(i){return arguments.length?(j="function"==typeof i?N=i:(N=tt.get(i)||d3_svg_lineLinear).key,G=N.reverse||N,Z=N.closed?"M":"L",area):j},area.tension=function(i){return arguments.length?(X=i,area):X},area}function d3_source(i){return i.source}function d3_target(i){return i.target}function d3_svg_chordRadius(i){return i.radius}function d3_svg_diagonalProjection(i){return[i.x,i.y]}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(i){var o=Math.sqrt(i/eg);return"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z"}F.svg.line.radial=function(){var i=d3_svg_line(d3_svg_lineRadial);return i.radius=i.x,delete i.x,i.angle=i.y,delete i.y,i},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,F.svg.area=function(){return d3_svg_area(d3_identity)},F.svg.area.radial=function(){var i=d3_svg_area(d3_svg_lineRadial);return i.radius=i.x,delete i.x,i.innerRadius=i.x0,delete i.x0,i.outerRadius=i.x1,delete i.x1,i.angle=i.y,delete i.y,i.startAngle=i.y0,delete i.y0,i.endAngle=i.y1,delete i.y1,i},F.svg.chord=function(){var i=d3_source,o=d3_target,s=d3_svg_chordRadius,x=d3_svg_arcStartAngle,_=d3_svg_arcEndAngle;function chord(s,x){var _,F,N,j,G,Z,X,J,$,ee,et,er,en=subgroup(this,i,s,x),ei=subgroup(this,o,s,x);return"M"+en.p0+arc(en.r,en.p1,en.a1-en.a0)+(en.a0==ei.a0&&en.a1==ei.a1?(en.r,en.p1,en.r,"Q 0,0 "+en.p0):(en.r,en.p1,ei.r,"Q 0,0 "+ei.p0+arc(ei.r,ei.p1,ei.a1-ei.a0)+(ei.r,ei.p1,en.r,"Q 0,0 "+en.p0)))+"Z"}function subgroup(i,o,F,N){var j=o.call(i,F,N),G=s.call(i,j,N),Z=x.call(i,j,N)-ev,X=_.call(i,j,N)-ev;return{r:G,a0:Z,a1:X,p0:[G*Math.cos(Z),G*Math.sin(Z)],p1:[G*Math.cos(X),G*Math.sin(X)]}}function arc(i,o,s){return"A"+i+","+i+" 0 "+ +(s>eg)+",1 "+o}return chord.radius=function(i){return arguments.length?(s=d3_functor(i),chord):s},chord.source=function(o){return arguments.length?(i=d3_functor(o),chord):i},chord.target=function(i){return arguments.length?(o=d3_functor(i),chord):o},chord.startAngle=function(i){return arguments.length?(x=d3_functor(i),chord):x},chord.endAngle=function(i){return arguments.length?(_=d3_functor(i),chord):_},chord},F.svg.diagonal=function(){var i=d3_source,o=d3_target,s=d3_svg_diagonalProjection;function diagonal(x,_){var F=i.call(this,x,_),N=o.call(this,x,_),j=(F.y+N.y)/2,G=[F,{x:F.x,y:j},{x:N.x,y:j},N];return"M"+(G=G.map(s))[0]+"C"+G[1]+" "+G[2]+" "+G[3]}return diagonal.source=function(o){return arguments.length?(i=d3_functor(o),diagonal):i},diagonal.target=function(i){return arguments.length?(o=d3_functor(i),diagonal):o},diagonal.projection=function(i){return arguments.length?(s=i,diagonal):s},diagonal},F.svg.diagonal.radial=function(){var i=F.svg.diagonal(),o=d3_svg_diagonalProjection,s=i.projection;return i.projection=function(i){var x;return arguments.length?s((x=o=i,function(){var i=x.apply(this,arguments),o=i[0],s=i[1]-ev;return[o*Math.cos(s),o*Math.sin(s)]})):o},i},F.svg.symbol=function(){var i=d3_svg_symbolType,o=d3_svg_symbolSize;function symbol(s,x){return(ta.get(i.call(this,s,x))||d3_svg_symbolCircle)(o.call(this,s,x))}return symbol.type=function(o){return arguments.length?(i=d3_functor(o),symbol):i},symbol.size=function(i){return arguments.length?(o=d3_functor(i),symbol):o},symbol};var ta=F.map({circle:d3_svg_symbolCircle,cross:function(i){var o=Math.sqrt(i/5)/2;return"M"+-3*o+","+-o+"H"+-o+"V"+-3*o+"H"+o+"V"+-o+"H"+3*o+"V"+o+"H"+o+"V"+3*o+"H"+-o+"V"+o+"H"+-3*o+"Z"},diamond:function(i){var o=Math.sqrt(i/(2*ts)),s=o*ts;return"M0,"+-o+"L"+s+",0 0,"+o+" "+-s+",0Z"},square:function(i){var o=Math.sqrt(i)/2;return"M"+-o+","+-o+"L"+o+","+-o+" "+o+","+o+" "+-o+","+o+"Z"},"triangle-down":function(i){var o=Math.sqrt(i/to),s=o*to/2;return"M0,"+s+"L"+o+","+-s+" "+-o+","+-s+"Z"},"triangle-up":function(i){var o=Math.sqrt(i/to),s=o*to/2;return"M0,"+-s+"L"+o+","+s+" "+-o+","+s+"Z"}});F.svg.symbolTypes=ta.keys();var to=Math.sqrt(3),ts=Math.tan(30*ex);eo.transition=function(i){for(var o,s,x=tc||++th,_=d3_transitionNamespace(i),F=[],N=tu||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},j=-1,G=this.length;++j<G;){F.push(o=[]);for(var Z=this[j],X=-1,J=Z.length;++X<J;)(s=Z[X])&&d3_transitionNode(s,X,_,x,N),o.push(s)}return d3_transition(F,_,x)},eo.interrupt=function(i){return this.each(null==i?tl:d3_selection_interruptNS(d3_transitionNamespace(i)))};var tl=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(i){return function(){var o,s,x;(o=this[i])&&(x=o[s=o.active])&&(x.timer.c=null,x.timer.t=NaN,--o.count?delete o[s]:delete this[i],o.active+=.5,x.event&&x.event.interrupt.call(this,this.__data__,x.index))}}function d3_transition(i,o,s){return ei(i,tf),i.namespace=o,i.id=s,i}var tc,tu,tf=[],th=0;function d3_transition_tween(i,o,s,x){var _=i.id,F=i.namespace;return d3_selection_each(i,"function"==typeof s?function(i,N,j){i[F][_].tween.set(o,x(s.call(i,i.__data__,N,j)))}:(s=x(s),function(i){i[F][_].tween.set(o,s)}))}function d3_transition_text(i){return null==i&&(i=""),function(){this.textContent=i}}function d3_transitionNamespace(i){return null==i?"__transition__":"__transition_"+i+"__"}function d3_transitionNode(i,o,s,x,_){var F,N,j,G,Z,X=i[s]||(i[s]={active:0,count:0}),J=X[x];function start(s){var _=X.active,$=X[_];for(var ee in $&&($.timer.c=null,$.timer.t=NaN,--X.count,delete X[_],$.event&&$.event.interrupt.call(i,i.__data__,$.index)),X)if(+ee<x){var et=X[ee];et.timer.c=null,et.timer.t=NaN,--X.count,delete X[ee]}N.c=tick,d3_timer(function(){return N.c&&tick(s||1)&&(N.c=null,N.t=NaN),1},0,F),X.active=x,J.event&&J.event.start.call(i,i.__data__,o),Z=[],J.tween.forEach(function(s,x){(x=x.call(i,i.__data__,o))&&Z.push(x)}),G=J.ease,j=J.duration}function tick(_){for(var F=_/j,N=G(F),$=Z.length;$>0;)Z[--$].call(i,N);if(F>=1)return J.event&&J.event.end.call(i,i.__data__,o),--X.count?delete X[x]:delete i[s],1}!J&&(N=d3_timer(function(i){var o=J.delay;if(N.t=o+F,o<=i)return start(i-o);N.c=start},0,F=_.time),J=X[x]={tween:new d3_Map,time:F,timer:N,delay:_.delay,duration:_.duration,ease:_.ease,index:o},_=null,++X.count)}tf.call=eo.call,tf.empty=eo.empty,tf.node=eo.node,tf.size=eo.size,F.transition=function(i,o){return i&&i.transition?tc?i.transition(o):i:F.selection().transition(i)},F.transition.prototype=tf,tf.select=function(i){var o,s,x,_=this.id,F=this.namespace,N=[];i=d3_selection_selector(i);for(var j=-1,G=this.length;++j<G;){N.push(o=[]);for(var Z=this[j],X=-1,J=Z.length;++X<J;)(x=Z[X])&&(s=i.call(x,x.__data__,X,j))?("__data__"in x&&(s.__data__=x.__data__),d3_transitionNode(s,X,F,_,x[F][_]),o.push(s)):o.push(null)}return d3_transition(N,F,_)},tf.selectAll=function(i){var o,s,x,_,F,N=this.id,j=this.namespace,G=[];i=d3_selection_selectorAll(i);for(var Z=-1,X=this.length;++Z<X;)for(var J=this[Z],$=-1,ee=J.length;++$<ee;)if(x=J[$]){F=x[j][N],s=i.call(x,x.__data__,$,Z),G.push(o=[]);for(var et=-1,er=s.length;++et<er;)(_=s[et])&&d3_transitionNode(_,et,j,N,F),o.push(_)}return d3_transition(G,j,N)},tf.filter=function(i){var o,s,x,_=[];"function"!=typeof i&&(i=d3_selection_filter(i));for(var F=0,N=this.length;F<N;F++){_.push(o=[]);for(var s=this[F],j=0,G=s.length;j<G;j++)(x=s[j])&&i.call(x,x.__data__,j,F)&&o.push(x)}return d3_transition(_,this.namespace,this.id)},tf.tween=function(i,o){var s=this.id,x=this.namespace;return arguments.length<2?this.node()[x][s].tween.get(i):d3_selection_each(this,null==o?function(o){o[x][s].tween.remove(i)}:function(_){_[x][s].tween.set(i,o)})},tf.attr=function(i,o){if(arguments.length<2){for(o in i)this.attr(o,i[o]);return this}var s="transform"==i?d3_interpolateTransform:d3_interpolate,x=F.ns.qualify(i);function attrNull(){this.removeAttribute(x)}function attrNullNS(){this.removeAttributeNS(x.space,x.local)}return d3_transition_tween(this,"attr."+i,o,x.local?function(i){return null==i?attrNullNS:(i+="",function(){var o,_=this.getAttributeNS(x.space,x.local);return _!==i&&(o=s(_,i),function(i){this.setAttributeNS(x.space,x.local,o(i))})})}:function(i){return null==i?attrNull:(i+="",function(){var o,_=this.getAttribute(x);return _!==i&&(o=s(_,i),function(i){this.setAttribute(x,o(i))})})})},tf.attrTween=function(i,o){var s=F.ns.qualify(i);return this.tween("attr."+i,s.local?function(i,x){var _=o.call(this,i,x,this.getAttributeNS(s.space,s.local));return _&&function(i){this.setAttributeNS(s.space,s.local,_(i))}}:function(i,x){var _=o.call(this,i,x,this.getAttribute(s));return _&&function(i){this.setAttribute(s,_(i))}})},tf.style=function(i,o,s){var x=arguments.length;if(x<3){if("string"!=typeof i){for(s in x<2&&(o=""),i)this.style(s,i[s],o);return this}s=""}function styleNull(){this.style.removeProperty(i)}return d3_transition_tween(this,"style."+i,o,function(o){return null==o?styleNull:(o+="",function(){var x,_=d3_window(this).getComputedStyle(this,null).getPropertyValue(i);return _!==o&&(x=d3_interpolate(_,o),function(o){this.style.setProperty(i,x(o),s)})})})},tf.styleTween=function(i,o,s){return arguments.length<3&&(s=""),this.tween("style."+i,function(x,_){var F=o.call(this,x,_,d3_window(this).getComputedStyle(this,null).getPropertyValue(i));return F&&function(o){this.style.setProperty(i,F(o),s)}})},tf.text=function(i){return d3_transition_tween(this,"text",i,d3_transition_text)},tf.remove=function(){var i=this.namespace;return this.each("end.transition",function(){var o;this[i].count<2&&(o=this.parentNode)&&o.removeChild(this)})},tf.ease=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].ease:("function"!=typeof i&&(i=F.ease.apply(F,arguments)),d3_selection_each(this,function(x){x[s][o].ease=i}))},tf.delay=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].delay:d3_selection_each(this,"function"==typeof i?function(x,_,F){x[s][o].delay=+i.call(x,x.__data__,_,F)}:(i=+i,function(x){x[s][o].delay=i}))},tf.duration=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].duration:d3_selection_each(this,"function"==typeof i?function(x,_,F){x[s][o].duration=Math.max(1,i.call(x,x.__data__,_,F))}:(i=Math.max(1,i),function(x){x[s][o].duration=i}))},tf.each=function(i,o){var s=this.id,x=this.namespace;if(arguments.length<2){var _=tu,N=tc;try{tc=s,d3_selection_each(this,function(o,_,F){tu=o[x][s],i.call(o,o.__data__,_,F)})}finally{tu=_,tc=N}}else d3_selection_each(this,function(_){var N=_[x][s];(N.event||(N.event=F.dispatch("start","end","interrupt"))).on(i,o)});return this},tf.transition=function(){for(var i,o,s,x,_=this.id,F=++th,N=this.namespace,j=[],G=0,Z=this.length;G<Z;G++){j.push(i=[]);for(var o=this[G],X=0,J=o.length;X<J;X++)(s=o[X])&&(x=s[N][_],d3_transitionNode(s,X,N,F,{time:x.time,ease:x.ease,delay:x.delay+x.duration,duration:x.duration})),i.push(s)}return d3_transition(j,N,F)},F.svg.axis=function(){var i,o=F.scale.linear(),s=td,x=6,_=6,N=3,j=[10],G=null;function axis(Z){Z.each(function(){var Z,X=F.select(this),J=this.__chart__||o,$=this.__chart__=o.copy(),ee=null==G?$.ticks?$.ticks.apply($,j):$.domain():G,et=null==i?$.tickFormat?$.tickFormat.apply($,j):d3_identity:i,er=X.selectAll(".tick").data(ee,$),en=er.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),ei=F.transition(er.exit()).style("opacity",1e-6).remove(),eo=F.transition(er.order()).style("opacity",1),es=Math.max(x,0)+N,el=d3_scaleRange($),ec=X.selectAll(".domain").data([0]),eu=(ec.enter().append("path").attr("class","domain"),F.transition(ec));en.append("line"),en.append("text");var ef,eh,ed,ep,eg=en.select("line"),em=eo.select("line"),ey=er.select("text").text(et),ev=en.select("text"),ex=eo.select("text"),e_="top"===s||"left"===s?-1:1;if("bottom"===s||"top"===s?(Z=d3_svg_axisX,ef="x",ed="y",eh="x2",ep="y2",ey.attr("dy",e_<0?"0em":".71em").style("text-anchor","middle"),eu.attr("d","M"+el[0]+","+e_*_+"V0H"+el[1]+"V"+e_*_)):(Z=d3_svg_axisY,ef="y",ed="x",eh="y2",ep="x2",ey.attr("dy",".32em").style("text-anchor",e_<0?"end":"start"),eu.attr("d","M"+e_*_+","+el[0]+"H0V"+el[1]+"H"+e_*_)),eg.attr(ep,e_*x),ev.attr(ed,e_*es),em.attr(eh,0).attr(ep,e_*x),ex.attr(ef,0).attr(ed,e_*es),$.rangeBand){var ew=$,eT=ew.rangeBand()/2;J=$=function(i){return ew(i)+eT}}else J.rangeBand?J=$:ei.call(Z,$,J);en.call(Z,J,$),eo.call(Z,$,$)})}return axis.scale=function(i){return arguments.length?(o=i,axis):o},axis.orient=function(i){return arguments.length?(s=i in tp?i+"":td,axis):s},axis.ticks=function(){return arguments.length?(j=d3_array(arguments),axis):j},axis.tickValues=function(i){return arguments.length?(G=i,axis):G},axis.tickFormat=function(o){return arguments.length?(i=o,axis):i},axis.tickSize=function(i){var o=arguments.length;return o?(x=+i,_=+arguments[o-1],axis):x},axis.innerTickSize=function(i){return arguments.length?(x=+i,axis):x},axis.outerTickSize=function(i){return arguments.length?(_=+i,axis):_},axis.tickPadding=function(i){return arguments.length?(N=+i,axis):N},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var td="bottom",tp={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(i,o,s){i.attr("transform",function(i){var x=o(i);return"translate("+(isFinite(x)?x:s(i))+",0)"})}function d3_svg_axisY(i,o,s){i.attr("transform",function(i){var x=o(i);return"translate(0,"+(isFinite(x)?x:s(i))+")"})}F.svg.brush=function(){var i,o,s=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,_=null,N=[0,0],j=[0,0],G=!0,Z=!0,X=tm[0];function brush(i){i.each(function(){var i=F.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=i.selectAll(".resize").data(X,d3_identity);s.exit().remove(),s.enter().append("g").attr("class",function(i){return"resize "+i}).style("cursor",function(i){return tg[i]}).append("rect").attr("x",function(i){return/[ew]$/.test(i)?-3:null}).attr("y",function(i){return/^[ns]/.test(i)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",brush.empty()?"none":null);var N,j=F.transition(i),G=F.transition(o);x&&(N=d3_scaleRange(x),G.attr("x",N[0]).attr("width",N[1]-N[0]),redrawX(j)),_&&(N=d3_scaleRange(_),G.attr("y",N[0]).attr("height",N[1]-N[0]),redrawY(j)),redraw(j)})}function redraw(i){i.selectAll(".resize").attr("transform",function(i){return"translate("+N[+/e$/.test(i)]+","+j[+/^s/.test(i)]+")"})}function redrawX(i){i.select(".extent").attr("x",N[0]),i.selectAll(".extent,.n>rect,.s>rect").attr("width",N[1]-N[0])}function redrawY(i){i.select(".extent").attr("y",j[0]),i.selectAll(".extent,.e>rect,.w>rect").attr("height",j[1]-j[0])}function brushstart(){var X,J,$=this,ee=F.select(F.event.target),et=s.of($,arguments),er=F.select($),en=ee.datum(),ei=!/^(n|s)$/.test(en)&&x,eo=!/^(e|w)$/.test(en)&&_,es=ee.classed("extent"),el=d3_event_dragSuppress($),ec=F.mouse($),eu=F.select(d3_window($)).on("keydown.brush",function(){32==F.event.keyCode&&(es||(X=null,ec[0]-=N[1],ec[1]-=j[1],es=2),d3_eventPreventDefault())}).on("keyup.brush",function(){32==F.event.keyCode&&2==es&&(ec[0]+=N[1],ec[1]+=j[1],es=0,d3_eventPreventDefault())});if(F.event.changedTouches?eu.on("touchmove.brush",brushmove).on("touchend.brush",brushend):eu.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),er.interrupt().selectAll("*").interrupt(),es)ec[0]=N[0]-ec[0],ec[1]=j[0]-ec[1];else if(en){var ef=+/w$/.test(en),eh=+/^n/.test(en);J=[N[1-ef]-ec[0],j[1-eh]-ec[1]],ec[0]=N[ef],ec[1]=j[eh]}else F.event.altKey&&(X=ec.slice());function brushmove(){var i=F.mouse($),o=!1;J&&(i[0]+=J[0],i[1]+=J[1]),es||(F.event.altKey?(X||(X=[(N[0]+N[1])/2,(j[0]+j[1])/2]),ec[0]=N[+(i[0]<X[0])],ec[1]=j[+(i[1]<X[1])]):X=null),ei&&move1(i,x,0)&&(redrawX(er),o=!0),eo&&move1(i,_,1)&&(redrawY(er),o=!0),o&&(redraw(er),et({type:"brush",mode:es?"move":"resize"}))}function move1(s,x,_){var F,J,$=d3_scaleRange(x),ee=$[0],et=$[1],er=ec[_],en=_?j:N,ei=en[1]-en[0];if(es&&(ee-=er,et-=ei+er),F=(_?Z:G)?Math.max(ee,Math.min(et,s[_])):s[_],es?J=(F+=er)+ei:(X&&(er=Math.max(ee,Math.min(et,2*X[_]-F))),er<F?(J=F,F=er):J=er),en[0]!=F||en[1]!=J)return _?o=null:i=null,en[0]=F,en[1]=J,!0}function brushend(){brushmove(),er.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),F.select("body").style("cursor",null),eu.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),el(),et({type:"brushend"})}er.style("pointer-events","none").selectAll(".resize").style("display",null),F.select("body").style("cursor",ee.style("cursor")),et({type:"brushstart"}),brushmove()}return brush.event=function(x){x.each(function(){var x=s.of(this,arguments),_={x:N,y:j,i:i,j:o},G=this.__chart__||_;this.__chart__=_,tc?F.select(this).transition().each("start.brush",function(){i=G.i,o=G.j,N=G.x,j=G.y,x({type:"brushstart"})}).tween("brush:brush",function(){var s=d3_interpolateArray(N,_.x),F=d3_interpolateArray(j,_.y);return i=o=null,function(i){N=_.x=s(i),j=_.y=F(i),x({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=_.i,o=_.j,x({type:"brush",mode:"resize"}),x({type:"brushend"})}):(x({type:"brushstart"}),x({type:"brush",mode:"resize"}),x({type:"brushend"}))})},brush.x=function(i){return arguments.length?(X=tm[!(x=i)<<1|!_],brush):x},brush.y=function(i){return arguments.length?(X=tm[!x<<1|!(_=i)],brush):_},brush.clamp=function(i){return arguments.length?(x&&_?(G=!!i[0],Z=!!i[1]):x?G=!!i:_&&(Z=!!i),brush):x&&_?[G,Z]:x?G:_?Z:null},brush.extent=function(s){var F,G,Z,X,J;return arguments.length?(x&&(F=s[0],G=s[1],_&&(F=F[0],G=G[0]),i=[F,G],x.invert&&(F=x(F),G=x(G)),G<F&&(J=F,F=G,G=J),(F!=N[0]||G!=N[1])&&(N=[F,G])),_&&(Z=s[0],X=s[1],x&&(Z=Z[1],X=X[1]),o=[Z,X],_.invert&&(Z=_(Z),X=_(X)),X<Z&&(J=Z,Z=X,X=J),(Z!=j[0]||X!=j[1])&&(j=[Z,X])),brush):(x&&(i?(F=i[0],G=i[1]):(F=N[0],G=N[1],x.invert&&(F=x.invert(F),G=x.invert(G)),G<F&&(J=F,F=G,G=J))),_&&(o?(Z=o[0],X=o[1]):(Z=j[0],X=j[1],_.invert&&(Z=_.invert(Z),X=_.invert(X)),X<Z&&(J=Z,Z=X,X=J))),x&&_?[[F,Z],[G,X]]:x?[F,G]:_&&[Z,X])},brush.clear=function(){return brush.empty()||(N=[0,0],j=[0,0],i=o=null),brush},brush.empty=function(){return!!x&&N[0]==N[1]||!!_&&j[0]==j[1]},F.rebind(brush,s,"on")};var tg={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tm=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function d3_json(i){return JSON.parse(i.responseText)}function d3_html(i){var o=j.createRange();return o.selectNode(j.body),o.createContextualFragment(i.responseText)}F.text=d3_xhrType(function(i){return i.responseText}),F.json=function(i,o){return d3_xhr(i,"application/json",d3_json,o)},F.html=function(i,o){return d3_xhr(i,"text/html",d3_html,o)},F.xml=d3_xhrType(function(i){return i.responseXML}),void 0!==(_="function"==typeof(x=F)?x.call(o,s,o,i):x)&&(i.exports=_)}).apply(self)},88294:function(i,o,s){"use strict";i.exports=s(62849)},62849:function(i,o,s){"use strict";var x=s(91358),_=s(53435),F=s(18863),N=s(21527),j=s(71299),G=s(46775),Z=s(30120),X=s(64941),J=s(90660),$=s(27084);function normalize(i,o){for(var s=o[0],x=o[1],F=o[2],N=o[3],j=1/(F-s),G=1/(N-x),Z=Array(i.length),X=0,J=i.length/2;X<J;X++)Z[2*X]=_((i[2*X]-s)*j,0,1),Z[2*X+1]=_((i[2*X+1]-x)*G,0,1);return Z}i.exports=function(i,o){o||(o={}),i=Z(i,"float64");var s,_=G((o=j(o,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"})).maxDepth,255),ee=G(o.bounds,N(i,2));ee[0]===ee[2]&&ee[2]++,ee[1]===ee[3]&&ee[3]++;var et=normalize(i,ee),er=i.length>>>1;o.dtype||(o.dtype="array"),"string"==typeof o.dtype?s=new(J(o.dtype))(er):o.dtype&&Array.isArray(s=o.dtype)&&(s.length=er);for(var en=0;en<er;++en)s[en]=en;var ei=[],eo=[],es=[],el=[];(function sort(i,o,s,x,F,N){if(!x.length)return null;var j=ei[F]||(ei[F]=[]),G=es[F]||(es[F]=[]),Z=eo[F]||(eo[F]=[]),X=j.length;if(++F>_||N>1073741824){for(var J=0;J<x.length;J++)j.push(x[J]),G.push(N),Z.push(null,null,null,null);return X}if(j.push(x[0]),G.push(N),x.length<=1)return Z.push(null,null,null,null),X;for(var $=.5*s,ee=i+$,er=o+$,en=[],el=[],ec=[],eu=[],ef=1,eh=x.length;ef<eh;ef++){var ed=x[ef],ep=et[2*ed],eg=et[2*ed+1];ep<ee?eg<er?en.push(ed):el.push(ed):eg<er?ec.push(ed):eu.push(ed)}return N<<=2,Z.push(sort(i,o,$,en,F,N),sort(i,er,$,el,F,N+1),sort(ee,o,$,ec,F,N+2),sort(ee,er,$,eu,F,N+3)),X})(0,0,1,s,0,1);for(var ec=0,eu=0;eu<ei.length;eu++){var ef=ei[eu];if(s.set)s.set(ef,ec);else for(var eh=0,ed=ef.length;eh<ed;eh++)s[eh+ec]=ef[eh];var ep=ec+ei[eu].length;el[eu]=[ec,ep],ec=ep}return s.range=function(){for(var o,s,_=[],N=arguments.length;N--;)_[N]=arguments[N];if(X(_[_.length-1])){var Z=_.pop();_.length||null==Z.x&&null==Z.l&&null==Z.left||(_=[Z],o={}),o=j(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else o={};_.length||(_=ee);var J=F.apply(void 0,_),et=[Math.min(J.x,J.x+J.width),Math.min(J.y,J.y+J.height),Math.max(J.x,J.x+J.width),Math.max(J.y,J.y+J.height)],er=et[0],en=et[1],ec=et[2],eu=et[3],ef=normalize([er,en,ec,eu],ee),eh=ef[0],ed=ef[1],ep=ef[2],eg=ef[3],em=G(o.level,ei.length);if(null!=o.d&&("number"==typeof o.d?s=[o.d,o.d]:o.d.length&&(s=o.d),em=Math.min(Math.max(Math.ceil(-$(Math.abs(s[0])/(ee[2]-ee[0]))),Math.ceil(-$(Math.abs(s[1])/(ee[3]-ee[1])))),em)),em=Math.min(em,ei.length),o.lod)return function(i,o,s,_,F){for(var N=[],j=0;j<F;j++){var G=es[j],Z=el[j][0],X=group(i,o,j),J=group(s,_,j),$=x.ge(G,X),ee=x.gt(G,J,$,G.length-1);N[j]=[$+Z,ee+Z]}return N}(eh,ed,ep,eg,em);var ey=[];return function select(o,s,x,_,F,N){if(null!==F&&null!==N){var j=o+x,G=s+x;if(!(eh>j)&&!(ed>G)&&!(ep<o)&&!(eg<s)&&!(_>=em)&&F!==N){var Z=ei[_];void 0===N&&(N=Z.length);for(var X=F;X<N;X++){var J=Z[X],$=i[2*J],ee=i[2*J+1];$>=er&&$<=ec&&ee>=en&&ee<=eu&&ey.push(J)}var et=eo[_],es=et[4*F+0],el=et[4*F+1],ef=et[4*F+2],ev=et[4*F+3],ex=function(i,o){for(var s=null,x=0;null===s;)if(s=i[4*o+x],++x>i.length)return null;return s}(et,F+1),e_=.5*x,ew=_+1;select(o,s,e_,ew,es,el||ef||ev||ex),select(o,s+e_,e_,ew,el,ef||ev||ex),select(o+e_,s,e_,ew,ef,ev||ex),select(o+e_,s+e_,e_,ew,ev,ex)}}}(0,0,1,0,0,1),ey},s;function group(i,o,s){for(var x=1,_=.5,F=.5,N=.5,j=0;j<s;j++)x<<=2,x+=i<_?o<F?0:1:o<F?2:3,N*=.5,_+=i<_?-N:N,F+=o<F?-N:N;return x}}},30774:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(60302);function polygonArea(i){var o=0;if(i&&i.length>0){o+=Math.abs(ringArea(i[0]));for(var s=1;s<i.length;s++)o-=Math.abs(ringArea(i[s]))}return o}function ringArea(i){var o,s,x,_,F,N,j=0,G=i.length;if(G>2){for(N=0;N<G;N++)N===G-2?(x=G-2,_=G-1,F=0):N===G-1?(x=G-1,_=0,F=1):(x=N,_=N+1,F=N+2),o=i[x],s=i[_],j+=(rad(i[F][0])-rad(o[0]))*Math.sin(rad(s[1]));j=40680631590769*j/2}return j}function rad(i){return i*Math.PI/180}o.default=function(i){return x.geomReduce(i,function(i,o){return i+function(i){var o,s=0;switch(i.type){case"Polygon":return polygonArea(i.coordinates);case"MultiPolygon":for(o=0;o<i.coordinates.length;o++)s+=polygonArea(i.coordinates[o]);return s}return 0}(o)},0)}},23132:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var x={type:"Feature"};return(0===s.id||s.id)&&(x.id=s.id),s.bbox&&(x.bbox=s.bbox),x.properties=o||{},x.geometry=i,x}function point(i,o,s){if(void 0===s&&(s={}),!i)throw Error("coordinates is required");if(!Array.isArray(i))throw Error("coordinates must be an Array");if(i.length<2)throw Error("coordinates must be at least 2 numbers long");if(!isNumber(i[0])||!isNumber(i[1]))throw Error("coordinates must contain numbers");return feature({type:"Point",coordinates:i},o,s)}function polygon(i,o,s){void 0===s&&(s={});for(var x=0;x<i.length;x++){var _=i[x];if(_.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<_[_.length-1].length;F++)if(_[_.length-1][F]!==_[0][F])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function radiansToLength(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i*x}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i/x}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:1.0936*o.earthRadius},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1.0936133},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=function(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}},o.point=point,o.points=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)},o.polygon=polygon,o.polygons=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)},o.lineString=lineString,o.lineStrings=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)},o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=function(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)},o.round=function(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s},o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=function(i,o){return radiansToDegrees(lengthToRadians(i,o))},o.bearingToAzimuth=function(i){var o=i%360;return o<0&&(o+=360),o},o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=function(i){return i%360*Math.PI/180},o.convertLength=function(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)},o.convertArea=function(i,s,x){if(void 0===s&&(s="meters"),void 0===x&&(x="kilometers"),!(i>=0))throw Error("area must be a positive number");var _=o.areaFactors[s];if(!_)throw Error("invalid original units");var F=o.areaFactors[x];if(!F)throw Error("invalid final units");return i/_*F},o.isNumber=isNumber,o.isObject=function(i){return!!i&&i.constructor===Object},o.validateBBox=function(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})},o.validateId=function(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")}},60302:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(23132);function coordEach(i,o,s){if(null!==i)for(var x,_,F,N,j,G,Z,X,J=0,$=0,ee=i.type,et="FeatureCollection"===ee,er="Feature"===ee,en=et?i.features.length:1,ei=0;ei<en;ei++){j=(X=!!(Z=et?i.features[ei].geometry:er?i.geometry:i)&&"GeometryCollection"===Z.type)?Z.geometries.length:1;for(var eo=0;eo<j;eo++){var es=0,el=0;if(null!==(N=X?Z.geometries[eo]:Z)){G=N.coordinates;var ec=N.type;switch(J=s&&("Polygon"===ec||"MultiPolygon"===ec)?1:0,ec){case null:break;case"Point":if(!1===o(G,$,ei,es,el))return!1;$++,es++;break;case"LineString":case"MultiPoint":for(x=0;x<G.length;x++){if(!1===o(G[x],$,ei,es,el))return!1;$++,"MultiPoint"===ec&&es++}"LineString"===ec&&es++;break;case"Polygon":case"MultiLineString":for(x=0;x<G.length;x++){for(_=0;_<G[x].length-J;_++){if(!1===o(G[x][_],$,ei,es,el))return!1;$++}"MultiLineString"===ec&&es++,"Polygon"===ec&&el++}"Polygon"===ec&&es++;break;case"MultiPolygon":for(x=0;x<G.length;x++){for(_=0,el=0;_<G[x].length;_++){for(F=0;F<G[x][_].length-J;F++){if(!1===o(G[x][_][F],$,ei,es,el))return!1;$++}el++}es++}break;case"GeometryCollection":for(x=0;x<N.geometries.length;x++)if(!1===coordEach(N.geometries[x],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function geomEach(i,o){var s,x,_,F,N,j,G,Z,X,J,$=0,ee="FeatureCollection"===i.type,et="Feature"===i.type,er=ee?i.features.length:1;for(s=0;s<er;s++){for(_=0,j=ee?i.features[s].geometry:et?i.geometry:i,Z=ee?i.features[s].properties:et?i.properties:{},X=ee?i.features[s].bbox:et?i.bbox:void 0,J=ee?i.features[s].id:et?i.id:void 0,N=(G=!!j&&"GeometryCollection"===j.type)?j.geometries.length:1;_<N;_++){if(null===(F=G?j.geometries[_]:j)){if(!1===o(null,$,Z,X,J))return!1;continue}switch(F.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(F,$,Z,X,J))return!1;break;case"GeometryCollection":for(x=0;x<F.geometries.length;x++)if(!1===o(F.geometries[x],$,Z,X,J))return!1;break;default:throw Error("Unknown Geometry Type")}}$++}}function flattenEach(i,o){geomEach(i,function(i,s,_,F,N){var j,G=null===i?null:i.type;switch(G){case null:case"Point":case"LineString":case"Polygon":if(!1===o(x.feature(i,_,{bbox:F,id:N}),s,0))return!1;return}switch(G){case"MultiPoint":j="Point";break;case"MultiLineString":j="LineString";break;case"MultiPolygon":j="Polygon"}for(var Z=0;Z<i.coordinates.length;Z++){var X={type:j,coordinates:i.coordinates[Z]};if(!1===o(x.feature(X,_),s,Z))return!1}})}function segmentEach(i,o){flattenEach(i,function(i,s,_){var F,N=0;if(i.geometry){var j=i.geometry.type;if("Point"!==j&&"MultiPoint"!==j){var G=0,Z=0,X=0;if(!1===coordEach(i,function(j,J,$,ee,et){if(void 0===F||s>G||ee>Z||et>X){F=j,G=s,Z=ee,X=et,N=0;return}if(!1===o(x.lineString([F,j],i.properties),s,_,et,N))return!1;N++,F=j}))return!1}}})}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,_){if(null!==i.geometry){var F=i.geometry.type,N=i.geometry.coordinates;switch(F){case"LineString":if(!1===o(i,s,_,0,0))return!1;break;case"Polygon":for(var j=0;j<N.length;j++)if(!1===o(x.lineString(N[j],i.properties),s,_,j))return!1}}})}o.coordEach=coordEach,o.coordReduce=function(i,o,s,x){var _=s;return coordEach(i,function(i,x,F,N,j){_=0===x&&void 0===s?i:o(_,i,x,F,N,j)},x),_},o.propEach=propEach,o.propReduce=function(i,o,s){var x=s;return propEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.featureEach=featureEach,o.featureReduce=function(i,o,s){var x=s;return featureEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.coordAll=function(i){var o=[];return coordEach(i,function(i){o.push(i)}),o},o.geomEach=geomEach,o.geomReduce=function(i,o,s){var x=s;return geomEach(i,function(i,_,F,N,j){x=0===_&&void 0===s?i:o(x,i,_,F,N,j)}),x},o.flattenEach=flattenEach,o.flattenReduce=function(i,o,s){var x=s;return flattenEach(i,function(i,_,F){x=0===_&&0===F&&void 0===s?i:o(x,i,_,F)}),x},o.segmentEach=segmentEach,o.segmentReduce=function(i,o,s){var x=s,_=!1;return segmentEach(i,function(i,F,N,j,G){x=!1===_&&void 0===s?i:o(x,i,F,N,j,G),_=!0}),x},o.lineEach=lineEach,o.lineReduce=function(i,o,s){var x=s;return lineEach(i,function(i,_,F,N){x=0===_&&void 0===s?i:o(x,i,_,F,N)}),x},o.findSegment=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.segmentIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return j<0&&(j=Z.length+j-1),x.lineString([Z[j],Z[j+1]],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j-1),x.lineString([Z[N][j],Z[N][j+1]],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j-1),x.lineString([Z[F][j],Z[F][j+1]],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j-1),x.lineString([Z[F][N][j],Z[F][N][j+1]],G,o)}throw Error("geojson is invalid")},o.findPoint=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.coordIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":return x.point(Z,G,o);case"MultiPoint":return F<0&&(F=Z.length+F),x.point(Z[F],G,o);case"LineString":return j<0&&(j=Z.length+j),x.point(Z[j],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j),x.point(Z[N][j],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j),x.point(Z[F][j],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j),x.point(Z[F][N][j],G,o)}throw Error("geojson is invalid")}},85268:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(27138);function bbox(i){var o=[1/0,1/0,-1/0,-1/0];return x.coordEach(i,function(i){o[0]>i[0]&&(o[0]=i[0]),o[1]>i[1]&&(o[1]=i[1]),o[2]<i[0]&&(o[2]=i[0]),o[3]<i[1]&&(o[3]=i[1])}),o}bbox.default=bbox,o.default=bbox},94228:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var x={type:"Feature"};return(0===s.id||s.id)&&(x.id=s.id),s.bbox&&(x.bbox=s.bbox),x.properties=o||{},x.geometry=i,x}function point(i,o,s){if(void 0===s&&(s={}),!i)throw Error("coordinates is required");if(!Array.isArray(i))throw Error("coordinates must be an Array");if(i.length<2)throw Error("coordinates must be at least 2 numbers long");if(!isNumber(i[0])||!isNumber(i[1]))throw Error("coordinates must contain numbers");return feature({type:"Point",coordinates:i},o,s)}function polygon(i,o,s){void 0===s&&(s={});for(var x=0;x<i.length;x++){var _=i[x];if(_.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<_[_.length-1].length;F++)if(_[_.length-1][F]!==_[0][F])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function radiansToLength(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i*x}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i/x}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:1.0936*o.earthRadius},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1.0936133},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=function(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}},o.point=point,o.points=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)},o.polygon=polygon,o.polygons=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)},o.lineString=lineString,o.lineStrings=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)},o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=function(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)},o.round=function(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s},o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=function(i,o){return radiansToDegrees(lengthToRadians(i,o))},o.bearingToAzimuth=function(i){var o=i%360;return o<0&&(o+=360),o},o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=function(i){return i%360*Math.PI/180},o.convertLength=function(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)},o.convertArea=function(i,s,x){if(void 0===s&&(s="meters"),void 0===x&&(x="kilometers"),!(i>=0))throw Error("area must be a positive number");var _=o.areaFactors[s];if(!_)throw Error("invalid original units");var F=o.areaFactors[x];if(!F)throw Error("invalid final units");return i/_*F},o.isNumber=isNumber,o.isObject=function(i){return!!i&&i.constructor===Object},o.validateBBox=function(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})},o.validateId=function(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")}},27138:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(94228);function coordEach(i,o,s){if(null!==i)for(var x,_,F,N,j,G,Z,X,J=0,$=0,ee=i.type,et="FeatureCollection"===ee,er="Feature"===ee,en=et?i.features.length:1,ei=0;ei<en;ei++){j=(X=!!(Z=et?i.features[ei].geometry:er?i.geometry:i)&&"GeometryCollection"===Z.type)?Z.geometries.length:1;for(var eo=0;eo<j;eo++){var es=0,el=0;if(null!==(N=X?Z.geometries[eo]:Z)){G=N.coordinates;var ec=N.type;switch(J=s&&("Polygon"===ec||"MultiPolygon"===ec)?1:0,ec){case null:break;case"Point":if(!1===o(G,$,ei,es,el))return!1;$++,es++;break;case"LineString":case"MultiPoint":for(x=0;x<G.length;x++){if(!1===o(G[x],$,ei,es,el))return!1;$++,"MultiPoint"===ec&&es++}"LineString"===ec&&es++;break;case"Polygon":case"MultiLineString":for(x=0;x<G.length;x++){for(_=0;_<G[x].length-J;_++){if(!1===o(G[x][_],$,ei,es,el))return!1;$++}"MultiLineString"===ec&&es++,"Polygon"===ec&&el++}"Polygon"===ec&&es++;break;case"MultiPolygon":for(x=0;x<G.length;x++){for(_=0,el=0;_<G[x].length;_++){for(F=0;F<G[x][_].length-J;F++){if(!1===o(G[x][_][F],$,ei,es,el))return!1;$++}el++}es++}break;case"GeometryCollection":for(x=0;x<N.geometries.length;x++)if(!1===coordEach(N.geometries[x],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function geomEach(i,o){var s,x,_,F,N,j,G,Z,X,J,$=0,ee="FeatureCollection"===i.type,et="Feature"===i.type,er=ee?i.features.length:1;for(s=0;s<er;s++){for(_=0,j=ee?i.features[s].geometry:et?i.geometry:i,Z=ee?i.features[s].properties:et?i.properties:{},X=ee?i.features[s].bbox:et?i.bbox:void 0,J=ee?i.features[s].id:et?i.id:void 0,N=(G=!!j&&"GeometryCollection"===j.type)?j.geometries.length:1;_<N;_++){if(null===(F=G?j.geometries[_]:j)){if(!1===o(null,$,Z,X,J))return!1;continue}switch(F.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(F,$,Z,X,J))return!1;break;case"GeometryCollection":for(x=0;x<F.geometries.length;x++)if(!1===o(F.geometries[x],$,Z,X,J))return!1;break;default:throw Error("Unknown Geometry Type")}}$++}}function flattenEach(i,o){geomEach(i,function(i,s,_,F,N){var j,G=null===i?null:i.type;switch(G){case null:case"Point":case"LineString":case"Polygon":if(!1===o(x.feature(i,_,{bbox:F,id:N}),s,0))return!1;return}switch(G){case"MultiPoint":j="Point";break;case"MultiLineString":j="LineString";break;case"MultiPolygon":j="Polygon"}for(var Z=0;Z<i.coordinates.length;Z++){var X={type:j,coordinates:i.coordinates[Z]};if(!1===o(x.feature(X,_),s,Z))return!1}})}function segmentEach(i,o){flattenEach(i,function(i,s,_){var F,N=0;if(i.geometry){var j=i.geometry.type;if("Point"!==j&&"MultiPoint"!==j){var G=0,Z=0,X=0;if(!1===coordEach(i,function(j,J,$,ee,et){if(void 0===F||s>G||ee>Z||et>X){F=j,G=s,Z=ee,X=et,N=0;return}if(!1===o(x.lineString([F,j],i.properties),s,_,et,N))return!1;N++,F=j}))return!1}}})}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,_){if(null!==i.geometry){var F=i.geometry.type,N=i.geometry.coordinates;switch(F){case"LineString":if(!1===o(i,s,_,0,0))return!1;break;case"Polygon":for(var j=0;j<N.length;j++)if(!1===o(x.lineString(N[j],i.properties),s,_,j))return!1}}})}o.coordEach=coordEach,o.coordReduce=function(i,o,s,x){var _=s;return coordEach(i,function(i,x,F,N,j){_=0===x&&void 0===s?i:o(_,i,x,F,N,j)},x),_},o.propEach=propEach,o.propReduce=function(i,o,s){var x=s;return propEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.featureEach=featureEach,o.featureReduce=function(i,o,s){var x=s;return featureEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.coordAll=function(i){var o=[];return coordEach(i,function(i){o.push(i)}),o},o.geomEach=geomEach,o.geomReduce=function(i,o,s){var x=s;return geomEach(i,function(i,_,F,N,j){x=0===_&&void 0===s?i:o(x,i,_,F,N,j)}),x},o.flattenEach=flattenEach,o.flattenReduce=function(i,o,s){var x=s;return flattenEach(i,function(i,_,F){x=0===_&&0===F&&void 0===s?i:o(x,i,_,F)}),x},o.segmentEach=segmentEach,o.segmentReduce=function(i,o,s){var x=s,_=!1;return segmentEach(i,function(i,F,N,j,G){x=!1===_&&void 0===s?i:o(x,i,F,N,j,G),_=!0}),x},o.lineEach=lineEach,o.lineReduce=function(i,o,s){var x=s;return lineEach(i,function(i,_,F,N){x=0===_&&void 0===s?i:o(x,i,_,F,N)}),x},o.findSegment=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.segmentIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return j<0&&(j=Z.length+j-1),x.lineString([Z[j],Z[j+1]],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j-1),x.lineString([Z[N][j],Z[N][j+1]],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j-1),x.lineString([Z[F][j],Z[F][j+1]],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j-1),x.lineString([Z[F][N][j],Z[F][N][j+1]],G,o)}throw Error("geojson is invalid")},o.findPoint=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.coordIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":return x.point(Z,G,o);case"MultiPoint":return F<0&&(F=Z.length+F),x.point(Z[F],G,o);case"LineString":return j<0&&(j=Z.length+j),x.point(Z[j],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j),x.point(Z[N][j],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j),x.point(Z[F][j],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j),x.point(Z[F][N][j],G,o)}throw Error("geojson is invalid")}},29261:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(88553),_=s(64182);o.default=function(i,o){void 0===o&&(o={});var s=0,F=0,N=0;return x.coordEach(i,function(i){s+=i[0],F+=i[1],N++}),_.point([s/N,F/N],o.properties)}},64182:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var x={type:"Feature"};return(0===s.id||s.id)&&(x.id=s.id),s.bbox&&(x.bbox=s.bbox),x.properties=o||{},x.geometry=i,x}function point(i,o,s){return void 0===s&&(s={}),feature({type:"Point",coordinates:i},o,s)}function polygon(i,o,s){void 0===s&&(s={});for(var x=0;x<i.length;x++){var _=i[x];if(_.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<_[_.length-1].length;F++)if(_[_.length-1][F]!==_[0][F])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function radiansToLength(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i*x}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var x=o.factors[s];if(!x)throw Error(s+" units is invalid");return i/x}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)&&!/^\s*$/.test(i)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=function(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}},o.point=point,o.points=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)},o.polygon=polygon,o.polygons=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)},o.lineString=lineString,o.lineStrings=function(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)},o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=function(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)},o.round=function(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s},o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=function(i,o){return radiansToDegrees(lengthToRadians(i,o))},o.bearingToAzimuth=function(i){var o=i%360;return o<0&&(o+=360),o},o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=function(i){return i%360*Math.PI/180},o.convertLength=function(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)},o.convertArea=function(i,s,x){if(void 0===s&&(s="meters"),void 0===x&&(x="kilometers"),!(i>=0))throw Error("area must be a positive number");var _=o.areaFactors[s];if(!_)throw Error("invalid original units");var F=o.areaFactors[x];if(!F)throw Error("invalid final units");return i/_*F},o.isNumber=isNumber,o.isObject=function(i){return!!i&&i.constructor===Object},o.validateBBox=function(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})},o.validateId=function(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")},o.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw Error("method has been renamed to `convertLength`")}},88553:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var x=s(64182);function coordEach(i,o,s){if(null!==i)for(var x,_,F,N,j,G,Z,X,J=0,$=0,ee=i.type,et="FeatureCollection"===ee,er="Feature"===ee,en=et?i.features.length:1,ei=0;ei<en;ei++){j=(X=!!(Z=et?i.features[ei].geometry:er?i.geometry:i)&&"GeometryCollection"===Z.type)?Z.geometries.length:1;for(var eo=0;eo<j;eo++){var es=0,el=0;if(null!==(N=X?Z.geometries[eo]:Z)){G=N.coordinates;var ec=N.type;switch(J=s&&("Polygon"===ec||"MultiPolygon"===ec)?1:0,ec){case null:break;case"Point":if(!1===o(G,$,ei,es,el))return!1;$++,es++;break;case"LineString":case"MultiPoint":for(x=0;x<G.length;x++){if(!1===o(G[x],$,ei,es,el))return!1;$++,"MultiPoint"===ec&&es++}"LineString"===ec&&es++;break;case"Polygon":case"MultiLineString":for(x=0;x<G.length;x++){for(_=0;_<G[x].length-J;_++){if(!1===o(G[x][_],$,ei,es,el))return!1;$++}"MultiLineString"===ec&&es++,"Polygon"===ec&&el++}"Polygon"===ec&&es++;break;case"MultiPolygon":for(x=0;x<G.length;x++){for(_=0,el=0;_<G[x].length;_++){for(F=0;F<G[x][_].length-J;F++){if(!1===o(G[x][_][F],$,ei,es,el))return!1;$++}el++}es++}break;case"GeometryCollection":for(x=0;x<N.geometries.length;x++)if(!1===coordEach(N.geometries[x],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function geomEach(i,o){var s,x,_,F,N,j,G,Z,X,J,$=0,ee="FeatureCollection"===i.type,et="Feature"===i.type,er=ee?i.features.length:1;for(s=0;s<er;s++){for(_=0,j=ee?i.features[s].geometry:et?i.geometry:i,Z=ee?i.features[s].properties:et?i.properties:{},X=ee?i.features[s].bbox:et?i.bbox:void 0,J=ee?i.features[s].id:et?i.id:void 0,N=(G=!!j&&"GeometryCollection"===j.type)?j.geometries.length:1;_<N;_++){if(null===(F=G?j.geometries[_]:j)){if(!1===o(null,$,Z,X,J))return!1;continue}switch(F.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(F,$,Z,X,J))return!1;break;case"GeometryCollection":for(x=0;x<F.geometries.length;x++)if(!1===o(F.geometries[x],$,Z,X,J))return!1;break;default:throw Error("Unknown Geometry Type")}}$++}}function flattenEach(i,o){geomEach(i,function(i,s,_,F,N){var j,G=null===i?null:i.type;switch(G){case null:case"Point":case"LineString":case"Polygon":if(!1===o(x.feature(i,_,{bbox:F,id:N}),s,0))return!1;return}switch(G){case"MultiPoint":j="Point";break;case"MultiLineString":j="LineString";break;case"MultiPolygon":j="Polygon"}for(var Z=0;Z<i.coordinates.length;Z++){var X={type:j,coordinates:i.coordinates[Z]};if(!1===o(x.feature(X,_),s,Z))return!1}})}function segmentEach(i,o){flattenEach(i,function(i,s,_){var F,N=0;if(i.geometry){var j=i.geometry.type;if("Point"!==j&&"MultiPoint"!==j){var G=0,Z=0,X=0;if(!1===coordEach(i,function(j,J,$,ee,et){if(void 0===F||s>G||ee>Z||et>X){F=j,G=s,Z=ee,X=et,N=0;return}if(!1===o(x.lineString([F,j],i.properties),s,_,et,N))return!1;N++,F=j}))return!1}}})}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,_){if(null!==i.geometry){var F=i.geometry.type,N=i.geometry.coordinates;switch(F){case"LineString":if(!1===o(i,s,_,0,0))return!1;break;case"Polygon":for(var j=0;j<N.length;j++)if(!1===o(x.lineString(N[j],i.properties),s,_,j))return!1}}})}o.coordEach=coordEach,o.coordReduce=function(i,o,s,x){var _=s;return coordEach(i,function(i,x,F,N,j){_=0===x&&void 0===s?i:o(_,i,x,F,N,j)},x),_},o.propEach=propEach,o.propReduce=function(i,o,s){var x=s;return propEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.featureEach=featureEach,o.featureReduce=function(i,o,s){var x=s;return featureEach(i,function(i,_){x=0===_&&void 0===s?i:o(x,i,_)}),x},o.coordAll=function(i){var o=[];return coordEach(i,function(i){o.push(i)}),o},o.geomEach=geomEach,o.geomReduce=function(i,o,s){var x=s;return geomEach(i,function(i,_,F,N,j){x=0===_&&void 0===s?i:o(x,i,_,F,N,j)}),x},o.flattenEach=flattenEach,o.flattenReduce=function(i,o,s){var x=s;return flattenEach(i,function(i,_,F){x=0===_&&0===F&&void 0===s?i:o(x,i,_,F)}),x},o.segmentEach=segmentEach,o.segmentReduce=function(i,o,s){var x=s,_=!1;return segmentEach(i,function(i,F,N,j,G){x=!1===_&&void 0===s?i:o(x,i,F,N,j,G),_=!0}),x},o.lineEach=lineEach,o.lineReduce=function(i,o,s){var x=s;return lineEach(i,function(i,_,F,N){x=0===_&&void 0===s?i:o(x,i,_,F,N)}),x},o.findSegment=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.segmentIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return j<0&&(j=Z.length+j-1),x.lineString([Z[j],Z[j+1]],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j-1),x.lineString([Z[N][j],Z[N][j+1]],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j-1),x.lineString([Z[F][j],Z[F][j+1]],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j-1),x.lineString([Z[F][N][j],Z[F][N][j+1]],G,o)}throw Error("geojson is invalid")},o.findPoint=function(i,o){if(o=o||{},!x.isObject(o))throw Error("options is invalid");var s,_=o.featureIndex||0,F=o.multiFeatureIndex||0,N=o.geometryIndex||0,j=o.coordIndex||0,G=o.properties;switch(i.type){case"FeatureCollection":_<0&&(_=i.features.length+_),G=G||i.features[_].properties,s=i.features[_].geometry;break;case"Feature":G=G||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var Z=s.coordinates;switch(s.type){case"Point":return x.point(Z,G,o);case"MultiPoint":return F<0&&(F=Z.length+F),x.point(Z[F],G,o);case"LineString":return j<0&&(j=Z.length+j),x.point(Z[j],G,o);case"Polygon":return N<0&&(N=Z.length+N),j<0&&(j=Z[N].length+j),x.point(Z[N][j],G,o);case"MultiLineString":return F<0&&(F=Z.length+F),j<0&&(j=Z[F].length+j),x.point(Z[F][j],G,o);case"MultiPolygon":return F<0&&(F=Z.length+F),N<0&&(N=Z[F].length+N),j<0&&(j=Z[F][N].length-j),x.point(Z[F][N][j],G,o)}throw Error("geojson is invalid")}},65185:function(i){i.exports=function(i){var o=0,s=0,x=0,_=0;return i.map(function(i){var F=(i=i.slice())[0],N=F.toUpperCase();if(F!=N)switch(i[0]=N,F){case"a":i[6]+=x,i[7]+=_;break;case"v":i[1]+=_;break;case"h":i[1]+=x;break;default:for(var j=1;j<i.length;)i[j++]+=x,i[j++]+=_}switch(N){case"Z":x=o,_=s;break;case"H":x=i[1];break;case"V":_=i[1];break;case"M":x=o=i[1],_=s=i[2];break;default:x=i[i.length-2],_=i[i.length-1]}return i})}},21527:function(i){"use strict";i.exports=function(i,o){if(!i||null==i.length)throw Error("Argument should be an array");for(var s=Array(2*(o=null==o?1:Math.floor(o))),x=0;x<o;x++){for(var _=-1/0,F=1/0,N=x,j=i.length;N<j;N+=o)i[N]>_&&(_=i[N]),i[N]<F&&(F=i[N]);s[x]=F,s[o+x]=_}return s}},6851:function(i){"use strict";i.exports=function(i,o,s){if("function"==typeof Array.prototype.findIndex)return i.findIndex(o,s);if("function"!=typeof o)throw TypeError("predicate must be a function");var x=Object(i),_=x.length;if(0===_)return -1;for(var F=0;F<_;F++)if(o.call(s,x[F],F,x))return F;return -1}},54:function(i,o,s){"use strict";var x=s(21527);i.exports=function(i,o,s){if(!i||null==i.length)throw Error("Argument should be an array");null==o&&(o=1),null==s&&(s=x(i,o));for(var _=0;_<o;_++){var F=s[o+_],N=s[_],j=_,G=i.length;if(F===1/0&&N===-1/0)for(j=_;j<G;j+=o)i[j]=i[j]===F?1:i[j]===N?0:.5;else if(F===1/0)for(j=_;j<G;j+=o)i[j]=i[j]===F?1:0;else if(N===-1/0)for(j=_;j<G;j+=o)i[j]=i[j]===N?0:1;else{var Z=F-N;for(j=_;j<G;j+=o)isNaN(i[j])||(i[j]=0===Z?.5:(i[j]-N)/Z)}}return i}},57471:function(i){i.exports=function(i,o){var s="number"==typeof i,x="number"==typeof o;s&&!x?(o=i,i=0):s||x||(i=0,o=0);var _=(o|=0)-(i|=0);if(_<0)throw Error("array length must be positive");for(var F=Array(_),N=0,j=i;N<_;N++,j++)F[N]=j;return F}},32791:function(i,o,s){"use strict";var x,_,F=s(90386);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var N=s(79616).codes,j=N.ERR_AMBIGUOUS_ARGUMENT,G=N.ERR_INVALID_ARG_TYPE,Z=N.ERR_INVALID_ARG_VALUE,X=N.ERR_INVALID_RETURN_VALUE,J=N.ERR_MISSING_ARGS,$=s(73894),ee=s(43827).inspect,et=s(43827).types,er=et.isPromise,en=et.isRegExp,ei=Object.assign?Object.assign:s(73523).assign,eo=Object.is?Object.is:s(64003);function lazyLoadComparison(){var i=s(74061);x=i.isDeepEqual,_=i.isDeepStrictEqual}var es=!1,el=i.exports=ok,ec={};function innerFail(i){if(i.message instanceof Error)throw i.message;throw new $(i)}function innerOk(i,o,s,x){if(!s){var _=!1;if(0===o)_=!0,x="No value argument passed to `assert.ok()`";else if(x instanceof Error)throw x;var F=new $({actual:s,expected:!0,message:x,operator:"==",stackStartFn:i});throw F.generatedMessage=_,F}}function ok(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];innerOk.apply(void 0,[ok,o.length].concat(o))}el.fail=function fail(i,o,s,x,_){var N,j=arguments.length;if(0===j?N="Failed":1===j?(s=i,i=void 0):(!1===es&&(es=!0,(F.emitWarning?F.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===j&&(x="!=")),s instanceof Error)throw s;var G={actual:i,expected:o,operator:void 0===x?"fail":x,stackStartFn:_||fail};void 0!==s&&(G.message=s);var Z=new $(G);throw N&&(Z.message=N,Z.generatedMessage=!0),Z},el.AssertionError=$,el.ok=ok,el.equal=function equal(i,o,s){if(arguments.length<2)throw new J("actual","expected");i!=o&&innerFail({actual:i,expected:o,message:s,operator:"==",stackStartFn:equal})},el.notEqual=function notEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");i==o&&innerFail({actual:i,expected:o,message:s,operator:"!=",stackStartFn:notEqual})},el.deepEqual=function deepEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");void 0===x&&lazyLoadComparison(),x(i,o)||innerFail({actual:i,expected:o,message:s,operator:"deepEqual",stackStartFn:deepEqual})},el.notDeepEqual=function notDeepEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");void 0===x&&lazyLoadComparison(),x(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notDeepEqual",stackStartFn:notDeepEqual})},el.deepStrictEqual=function deepStrictEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");void 0===x&&lazyLoadComparison(),_(i,o)||innerFail({actual:i,expected:o,message:s,operator:"deepStrictEqual",stackStartFn:deepStrictEqual})},el.notDeepStrictEqual=function notDeepStrictEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");void 0===x&&lazyLoadComparison(),_(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notDeepStrictEqual",stackStartFn:notDeepStrictEqual})},el.strictEqual=function strictEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");eo(i,o)||innerFail({actual:i,expected:o,message:s,operator:"strictEqual",stackStartFn:strictEqual})},el.notStrictEqual=function notStrictEqual(i,o,s){if(arguments.length<2)throw new J("actual","expected");eo(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notStrictEqual",stackStartFn:notStrictEqual})};var Comparison=function Comparison(i,o,s){var x=this;(function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")})(this,Comparison),o.forEach(function(o){o in i&&(void 0!==s&&"string"==typeof s[o]&&en(i[o])&&i[o].test(s[o])?x[o]=s[o]:x[o]=i[o])})};function expectedException(i,o,s,F){if("function"!=typeof o){if(en(o))return o.test(i);if(2==arguments.length)throw new G("expected",["Function","RegExp"],o);if("object"!==_typeof(i)||null===i){var N=new $({actual:i,expected:o,message:s,operator:"deepStrictEqual",stackStartFn:F});throw N.operator=F.name,N}var j=Object.keys(o);if(o instanceof Error)j.push("name","message");else if(0===j.length)throw new Z("error",o,"may not be an empty object");return void 0===x&&lazyLoadComparison(),j.forEach(function(x){"string"==typeof i[x]&&en(o[x])&&o[x].test(i[x])||function(i,o,s,x,F,N){if(!(s in i)||!_(i[s],o[s])){if(!x){var j=new Comparison(i,F),G=new Comparison(o,F,i),Z=new $({actual:j,expected:G,operator:"deepStrictEqual",stackStartFn:N});throw Z.actual=i,Z.expected=o,Z.operator=N.name,Z}innerFail({actual:i,expected:o,message:x,operator:N.name,stackStartFn:N})}}(i,o,x,s,j,F)}),!0}return void 0!==o.prototype&&i instanceof o||!Error.isPrototypeOf(o)&&!0===o.call({},i)}function getActual(i){if("function"!=typeof i)throw new G("fn","Function",i);try{i()}catch(i){return i}return ec}function checkIsPromise(i){return er(i)||null!==i&&"object"===_typeof(i)&&"function"==typeof i.then&&"function"==typeof i.catch}function waitForActual(i){return Promise.resolve().then(function(){var o;if("function"==typeof i){if(!checkIsPromise(o=i()))throw new X("instance of Promise","promiseFn",o)}else if(checkIsPromise(i))o=i;else throw new G("promiseFn",["Function","Promise"],i);return Promise.resolve().then(function(){return o}).then(function(){return ec}).catch(function(i){return i})})}function expectsError(i,o,s,x){if("string"==typeof s){if(4==arguments.length)throw new G("error",["Object","Error","Function","RegExp"],s);if("object"===_typeof(o)&&null!==o){if(o.message===s)throw new j("error/message",'The error message "'.concat(o.message,'" is identical to the message.'))}else if(o===s)throw new j("error/message",'The error "'.concat(o,'" is identical to the message.'));x=s,s=void 0}else if(null!=s&&"object"!==_typeof(s)&&"function"!=typeof s)throw new G("error",["Object","Error","Function","RegExp"],s);if(o===ec){var _="";s&&s.name&&(_+=" (".concat(s.name,")")),_+=x?": ".concat(x):".";var F="rejects"===i.name?"rejection":"exception";innerFail({actual:void 0,expected:s,operator:i.name,message:"Missing expected ".concat(F).concat(_),stackStartFn:i})}if(s&&!expectedException(o,s,x,i))throw o}function expectsNoError(i,o,s,x){if(o!==ec){if("string"==typeof s&&(x=s,s=void 0),!s||expectedException(o,s)){var _=x?": ".concat(x):".",F="doesNotReject"===i.name?"rejection":"exception";innerFail({actual:o,expected:s,operator:i.name,message:"Got unwanted ".concat(F).concat(_,"\n")+'Actual message: "'.concat(o&&o.message,'"'),stackStartFn:i})}throw o}}el.throws=function throws(i){for(var o=arguments.length,s=Array(o>1?o-1:0),x=1;x<o;x++)s[x-1]=arguments[x];expectsError.apply(void 0,[throws,getActual(i)].concat(s))},el.rejects=function rejects(i){for(var o=arguments.length,s=Array(o>1?o-1:0),x=1;x<o;x++)s[x-1]=arguments[x];return waitForActual(i).then(function(i){return expectsError.apply(void 0,[rejects,i].concat(s))})},el.doesNotThrow=function doesNotThrow(i){for(var o=arguments.length,s=Array(o>1?o-1:0),x=1;x<o;x++)s[x-1]=arguments[x];expectsNoError.apply(void 0,[doesNotThrow,getActual(i)].concat(s))},el.doesNotReject=function doesNotReject(i){for(var o=arguments.length,s=Array(o>1?o-1:0),x=1;x<o;x++)s[x-1]=arguments[x];return waitForActual(i).then(function(i){return expectsNoError.apply(void 0,[doesNotReject,i].concat(s))})},el.ifError=function ifError(i){if(null!=i){var o="ifError got unwanted exception: ";"object"===_typeof(i)&&"string"==typeof i.message?0===i.message.length&&i.constructor?o+=i.constructor.name:o+=i.message:o+=ee(i);var s=new $({actual:i,expected:null,operator:"ifError",message:o,stackStartFn:ifError}),x=i.stack;if("string"==typeof x){var _=x.split("\n");_.shift();for(var F=s.stack.split("\n"),N=0;N<_.length;N++){var j=F.indexOf(_[N]);if(-1!==j){F=F.slice(0,j);break}}s.stack="".concat(F.join("\n"),"\n").concat(_.join("\n"))}throw s}},el.strict=ei(function strict(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];innerOk.apply(void 0,[strict,o.length].concat(o))},el,{equal:el.strictEqual,deepEqual:el.deepStrictEqual,notEqual:el.notStrictEqual,notDeepEqual:el.notDeepStrictEqual}),el.strict.strict=el.strict},73894:function(i,o,s){"use strict";var x=s(90386);function _defineProperties(i,o){for(var s=0;s<o.length;s++){var x=o[s];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(i,x.key,x)}}function _possibleConstructorReturn(i,o){return o&&("object"===_typeof(o)||"function"==typeof o)?o:_assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _wrapNativeSuper(i){var o="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(i){if(null===i||-1===Function.toString.call(i).indexOf("[native code]"))return i;if("function"!=typeof i)throw TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(i))return o.get(i);o.set(i,Wrapper)}function Wrapper(){return _construct(i,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(i.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,i)})(i)}function _construct(i,o,s){return(_construct=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}()?function(i,o,s){var x=[null];x.push.apply(x,o);var _=new(Function.bind.apply(i,x));return s&&_setPrototypeOf(_,s.prototype),_}:Reflect.construct).apply(null,arguments)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i})(i,o)}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var _=s(43827).inspect,F=s(79616).codes.ERR_INVALID_ARG_TYPE;function endsWith(i,o,s){return(void 0===s||s>i.length)&&(s=i.length),i.substring(s-o.length,s)===o}var N="",j="",G="",Z="",X={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function copyError(i){var o=Object.keys(i),s=Object.create(Object.getPrototypeOf(i));return o.forEach(function(o){s[o]=i[o]}),Object.defineProperty(s,"message",{value:i.message}),s}function inspectValue(i){return _(i,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var J=function(i){var o,s;function AssertionError(i){if(function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}(this,AssertionError),"object"!==_typeof(i)||null===i)throw new F("options","Object",i);var o,s=i.message,_=i.operator,J=i.stackStartFn,$=i.actual,ee=i.expected,et=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=s)o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,String(s)));else if(x.stderr&&x.stderr.isTTY&&(x.stderr&&x.stderr.getColorDepth&&1!==x.stderr.getColorDepth()?(N="\x1b[34m",j="\x1b[32m",Z="\x1b[39m",G="\x1b[31m"):(N="",j="",Z="",G="")),"object"===_typeof($)&&null!==$&&"object"===_typeof(ee)&&null!==ee&&"stack"in $&&$ instanceof Error&&"stack"in ee&&ee instanceof Error&&($=copyError($),ee=copyError(ee)),"deepStrictEqual"===_||"strictEqual"===_)o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,function(i,o,s){var _="",F="",J=0,$="",ee=!1,et=inspectValue(i),er=et.split("\n"),en=inspectValue(o).split("\n"),ei=0,eo="";if("strictEqual"===s&&"object"===_typeof(i)&&"object"===_typeof(o)&&null!==i&&null!==o&&(s="strictEqualObject"),1===er.length&&1===en.length&&er[0]!==en[0]){var es=er[0].length+en[0].length;if(es<=10){if(("object"!==_typeof(i)||null===i)&&("object"!==_typeof(o)||null===o)&&(0!==i||0!==o))return"".concat(X[s],"\n\n")+"".concat(er[0]," !== ").concat(en[0],"\n")}else if("strictEqualObject"!==s&&es<(x.stderr&&x.stderr.isTTY?x.stderr.columns:80)){for(;er[0][ei]===en[0][ei];)ei++;ei>2&&(eo="\n  ".concat(function(i,o){if(o=Math.floor(o),0==i.length||0==o)return"";var s=i.length*o;for(o=Math.floor(Math.log(o)/Math.log(2));o;)i+=i,o--;return i+i.substring(0,s-i.length)}(" ",ei),"^"),ei=0)}}for(var el=er[er.length-1],ec=en[en.length-1];el===ec&&(ei++<2?$="\n  ".concat(el).concat($):_=el,er.pop(),en.pop(),0!==er.length&&0!==en.length);)el=er[er.length-1],ec=en[en.length-1];var eu=Math.max(er.length,en.length);if(0===eu){var ef=et.split("\n");if(ef.length>30)for(ef[26]="".concat(N,"...").concat(Z);ef.length>27;)ef.pop();return"".concat(X.notIdentical,"\n\n").concat(ef.join("\n"),"\n")}ei>3&&($="\n".concat(N,"...").concat(Z).concat($),ee=!0),""!==_&&($="\n  ".concat(_).concat($),_="");var eh=0,ed=X[s]+"\n".concat(j,"+ actual").concat(Z," ").concat(G,"- expected").concat(Z),ep=" ".concat(N,"...").concat(Z," Lines skipped");for(ei=0;ei<eu;ei++){var eg=ei-J;if(er.length<ei+1)eg>1&&ei>2&&(eg>4?(F+="\n".concat(N,"...").concat(Z),ee=!0):eg>3&&(F+="\n  ".concat(en[ei-2]),eh++),F+="\n  ".concat(en[ei-1]),eh++),J=ei,_+="\n".concat(G,"-").concat(Z," ").concat(en[ei]),eh++;else if(en.length<ei+1)eg>1&&ei>2&&(eg>4?(F+="\n".concat(N,"...").concat(Z),ee=!0):eg>3&&(F+="\n  ".concat(er[ei-2]),eh++),F+="\n  ".concat(er[ei-1]),eh++),J=ei,F+="\n".concat(j,"+").concat(Z," ").concat(er[ei]),eh++;else{var em=en[ei],ey=er[ei],ev=ey!==em&&(!endsWith(ey,",")||ey.slice(0,-1)!==em);ev&&endsWith(em,",")&&em.slice(0,-1)===ey&&(ev=!1,ey+=","),ev?(eg>1&&ei>2&&(eg>4?(F+="\n".concat(N,"...").concat(Z),ee=!0):eg>3&&(F+="\n  ".concat(er[ei-2]),eh++),F+="\n  ".concat(er[ei-1]),eh++),J=ei,F+="\n".concat(j,"+").concat(Z," ").concat(ey),_+="\n".concat(G,"-").concat(Z," ").concat(em),eh+=2):(F+=_,_="",(1===eg||0===ei)&&(F+="\n  ".concat(ey),eh++))}if(eh>20&&ei<eu-2)return"".concat(ed).concat(ep,"\n").concat(F,"\n").concat(N,"...").concat(Z).concat(_,"\n")+"".concat(N,"...").concat(Z)}return"".concat(ed).concat(ee?ep:"","\n").concat(F).concat(_).concat($).concat(eo)}($,ee,_)));else if("notDeepStrictEqual"===_||"notStrictEqual"===_){var er=X[_],en=inspectValue($).split("\n");if("notStrictEqual"===_&&"object"===_typeof($)&&null!==$&&(er=X.notStrictEqualObject),en.length>30)for(en[26]="".concat(N,"...").concat(Z);en.length>27;)en.pop();o=1===en.length?_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(er," ").concat(en[0]))):_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(er,"\n\n").concat(en.join("\n"),"\n")))}else{var ei=inspectValue($),eo="",es=X[_];"notDeepEqual"===_||"notEqual"===_?(ei="".concat(X[_],"\n\n").concat(ei)).length>1024&&(ei="".concat(ei.slice(0,1021),"...")):(eo="".concat(inspectValue(ee)),ei.length>512&&(ei="".concat(ei.slice(0,509),"...")),eo.length>512&&(eo="".concat(eo.slice(0,509),"...")),"deepEqual"===_||"equal"===_?ei="".concat(es,"\n\n").concat(ei,"\n\nshould equal\n\n"):eo=" ".concat(_," ").concat(eo)),o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(ei).concat(eo)))}return Error.stackTraceLimit=et,o.generatedMessage=!s,Object.defineProperty(_assertThisInitialized(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=$,o.expected=ee,o.operator=_,Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(o),J),o.stack,o.name="AssertionError",_possibleConstructorReturn(o)}return function(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(AssertionError,i),o=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:_.custom,value:function(i,o){return _(this,function(i){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{},x=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(x=x.concat(Object.getOwnPropertySymbols(s).filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable}))),x.forEach(function(o){var x;x=s[o],o in i?Object.defineProperty(i,o,{value:x,enumerable:!0,configurable:!0,writable:!0}):i[o]=x})}return i}({},o,{customInspect:!1,depth:0}))}}],_defineProperties(AssertionError.prototype,o),s&&_defineProperties(AssertionError,s),AssertionError}(_wrapNativeSuper(Error));i.exports=J},79616:function(i,o,s){"use strict";function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i})(i,o)}var x,_,F={};function createErrorType(i,o,s){s||(s=Error);var x=function(s){function NodeError(s,x,_){var F,N;return function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}(this,NodeError),(F=(N=_getPrototypeOf(NodeError).call(this,"string"==typeof o?o:o(s,x,_)))&&("object"===_typeof(N)||"function"==typeof N)?N:function(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(this)).code=i,F}return function(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}(NodeError,s),NodeError}(s);F[i]=x}function oneOf(i,o){if(!Array.isArray(i))return"of ".concat(o," ").concat(String(i));var s=i.length;return(i=i.map(function(i){return String(i)}),s>2)?"one of ".concat(o," ").concat(i.slice(0,s-1).join(", "),", or ")+i[s-1]:2===s?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}createErrorType("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(i,o,_){if((void 0===x&&(x=s(32791)),x("string"==typeof i,"'name' must be a string"),"string"==typeof o&&(F="not ",o.substr(!N||N<0?0:+N,F.length)===F))?(X="must not be",o=o.replace(/^not /,"")):X="must be",j=" argument",(void 0===G||G>i.length)&&(G=i.length),i.substring(G-j.length,G)===j)J="The ".concat(i," ").concat(X," ").concat(oneOf(o,"type"));else{var F,N,j,G,Z,X,J,$=("number"!=typeof Z&&(Z=0),Z+1>i.length||-1===i.indexOf(".",Z))?"argument":"property";J='The "'.concat(i,'" ').concat($," ").concat(X," ").concat(oneOf(o,"type"))}return J+". Received type ".concat(_typeof(_))},TypeError),createErrorType("ERR_INVALID_ARG_VALUE",function(i,o){var x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===_&&(_=s(43827));var F=_.inspect(o);return F.length>128&&(F="".concat(F.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(x,". Received ").concat(F)},TypeError,RangeError),createErrorType("ERR_INVALID_RETURN_VALUE",function(i,o,s){var x;return x=s&&s.constructor&&s.constructor.name?"instance of ".concat(s.constructor.name):"type ".concat(_typeof(s)),"Expected ".concat(i,' to be returned from the "').concat(o,'"')+" function but got ".concat(x,".")},TypeError),createErrorType("ERR_MISSING_ARGS",function(){for(var i=arguments.length,o=Array(i),_=0;_<i;_++)o[_]=arguments[_];void 0===x&&(x=s(32791)),x(o.length>0,"At least one arg needs to be specified");var F="The ",N=o.length;switch(o=o.map(function(i){return'"'.concat(i,'"')}),N){case 1:F+="".concat(o[0]," argument");break;case 2:F+="".concat(o[0]," and ").concat(o[1]," arguments");break;default:F+=o.slice(0,N-1).join(", ")+", and ".concat(o[N-1]," arguments")}return"".concat(F," must be specified")},TypeError),i.exports.codes=F},74061:function(i,o,s){"use strict";function _slicedToArray(i,o){return function(i){if(Array.isArray(i))return i}(i)||function(i,o){var s=[],x=!0,_=!1,F=void 0;try{for(var N,j=i[Symbol.iterator]();!(x=(N=j.next()).done)&&(s.push(N.value),!o||s.length!==o);x=!0);}catch(i){_=!0,F=i}finally{try{x||null==j.return||j.return()}finally{if(_)throw F}}return s}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var x=void 0!==/a/g.flags,arrayFromSet=function(i){var o=[];return i.forEach(function(i){return o.push(i)}),o},arrayFromMap=function(i){var o=[];return i.forEach(function(i,s){return o.push([s,i])}),o},_=Object.is?Object.is:s(64003),F=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},N=Number.isNaN?Number.isNaN:s(15567);function uncurryThis(i){return i.call.bind(i)}var j=uncurryThis(Object.prototype.hasOwnProperty),G=uncurryThis(Object.prototype.propertyIsEnumerable),Z=uncurryThis(Object.prototype.toString),X=s(43827).types,J=X.isAnyArrayBuffer,$=X.isArrayBufferView,ee=X.isDate,et=X.isMap,er=X.isRegExp,en=X.isSet,ei=X.isNativeError,eo=X.isBoxedPrimitive,es=X.isNumberObject,el=X.isStringObject,ec=X.isBooleanObject,eu=X.isBigIntObject,ef=X.isSymbolObject,eh=X.isFloat32Array,ed=X.isFloat64Array;function isNonIndex(i){if(0===i.length||i.length>10)return!0;for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(s<48||s>57)return!0}return 10===i.length&&i>=4294967296}function getOwnNonIndexProperties(i){return Object.keys(i).filter(isNonIndex).concat(F(i).filter(Object.prototype.propertyIsEnumerable.bind(i)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function compare(i,o){if(i===o)return 0;for(var s=i.length,x=o.length,_=0,F=Math.min(s,x);_<F;++_)if(i[_]!==o[_]){s=i[_],x=o[_];break}return s<x?-1:x<s?1:0}var ep=void 0;function innerDeepEqual(i,o,s,F){if(i===o)return 0!==i||!s||_(i,o);if(s){if("object"!==_typeof(i))return"number"==typeof i&&N(i)&&N(o);if("object"!==_typeof(o)||null===i||null===o||Object.getPrototypeOf(i)!==Object.getPrototypeOf(o))return!1}else{if(null===i||"object"!==_typeof(i))return(null===o||"object"!==_typeof(o))&&i==o;if(null===o||"object"!==_typeof(o))return!1}var j=Z(i);if(j!==Z(o))return!1;if(Array.isArray(i)){if(i.length!==o.length)return!1;var G=getOwnNonIndexProperties(i,ep),X=getOwnNonIndexProperties(o,ep);return G.length===X.length&&keyCheck(i,o,s,F,1,G)}if("[object Object]"===j&&(!et(i)&&et(o)||!en(i)&&en(o)))return!1;if(ee(i)){if(!ee(o)||Date.prototype.getTime.call(i)!==Date.prototype.getTime.call(o))return!1}else if(er(i)){if(!er(o)||(x?i.source!==o.source||i.flags!==o.flags:RegExp.prototype.toString.call(i)!==RegExp.prototype.toString.call(o)))return!1}else if(ei(i)||i instanceof Error){if(i.message!==o.message||i.name!==o.name)return!1}else if($(i)){if(!s&&(eh(i)||ed(i))){if(!function(i,o){if(i.byteLength!==o.byteLength)return!1;for(var s=0;s<i.byteLength;s++)if(i[s]!==o[s])return!1;return!0}(i,o))return!1}else if(i.byteLength!==o.byteLength||0!==compare(new Uint8Array(i.buffer,i.byteOffset,i.byteLength),new Uint8Array(o.buffer,o.byteOffset,o.byteLength)))return!1;var eg=getOwnNonIndexProperties(i,ep),em=getOwnNonIndexProperties(o,ep);return eg.length===em.length&&keyCheck(i,o,s,F,0,eg)}else if(en(i))return!!en(o)&&i.size===o.size&&keyCheck(i,o,s,F,2);else if(et(i))return!!et(o)&&i.size===o.size&&keyCheck(i,o,s,F,3);else if(J(i)){if(i.byteLength!==o.byteLength||0!==compare(new Uint8Array(i),new Uint8Array(o)))return!1}else if(eo(i)&&(es(i)?!(es(o)&&_(Number.prototype.valueOf.call(i),Number.prototype.valueOf.call(o))):el(i)?!el(o)||String.prototype.valueOf.call(i)!==String.prototype.valueOf.call(o):ec(i)?!ec(o)||Boolean.prototype.valueOf.call(i)!==Boolean.prototype.valueOf.call(o):eu(i)?!eu(o)||BigInt.prototype.valueOf.call(i)!==BigInt.prototype.valueOf.call(o):!ef(o)||Symbol.prototype.valueOf.call(i)!==Symbol.prototype.valueOf.call(o)))return!1;return keyCheck(i,o,s,F,0)}function getEnumerables(i,o){return o.filter(function(o){return G(i,o)})}function keyCheck(i,o,s,x,_,N){if(5==arguments.length){N=Object.keys(i);var Z=Object.keys(o);if(N.length!==Z.length)return!1}for(var X=0;X<N.length;X++)if(!j(o,N[X]))return!1;if(s&&5==arguments.length){var J=F(i);if(0!==J.length){var $=0;for(X=0;X<J.length;X++){var ee=J[X];if(G(i,ee)){if(!G(o,ee))return!1;N.push(ee),$++}else if(G(o,ee))return!1}var et=F(o);if(J.length!==et.length&&getEnumerables(o,et).length!==$)return!1}else{var er=F(o);if(0!==er.length&&0!==getEnumerables(o,er).length)return!1}}if(0===N.length&&(0===_||1===_&&0===i.length||0===i.size))return!0;if(void 0===x)x={val1:new Map,val2:new Map,position:0};else{var en=x.val1.get(i);if(void 0!==en){var ei=x.val2.get(o);if(void 0!==ei)return en===ei}x.position++}x.val1.set(i,x.position),x.val2.set(o,x.position);var eo=function(i,o,s,x,_,F){var N=0;if(2===F){if(!function(i,o,s,x){for(var _=null,F=arrayFromSet(i),N=0;N<F.length;N++){var j=F[N];if("object"===_typeof(j)&&null!==j)null===_&&(_=new Set),_.add(j);else if(!o.has(j)){if(s||!function(i,o,s){var x=findLooseMatchingPrimitives(s);return null!=x?x:o.has(x)&&!i.has(x)}(i,o,j))return!1;null===_&&(_=new Set),_.add(j)}}if(null!==_){for(var G=arrayFromSet(o),Z=0;Z<G.length;Z++){var X=G[Z];if("object"===_typeof(X)&&null!==X){if(!setHasEqualElement(_,X,s,x))return!1}else if(!s&&!i.has(X)&&!setHasEqualElement(_,X,s,x))return!1}return 0===_.size}return!0}(i,o,s,_))return!1}else if(3===F){if(!function(i,o,s,x){for(var _=null,F=arrayFromMap(i),N=0;N<F.length;N++){var j=_slicedToArray(F[N],2),G=j[0],Z=j[1];if("object"===_typeof(G)&&null!==G)null===_&&(_=new Set),_.add(G);else{var X=o.get(G);if(void 0===X&&!o.has(G)||!innerDeepEqual(Z,X,s,x)){if(s||!function(i,o,s,x,_){var F=findLooseMatchingPrimitives(s);if(null!=F)return F;var N=o.get(F);return!!((void 0!==N||o.has(F))&&innerDeepEqual(x,N,!1,_))&&!i.has(F)&&innerDeepEqual(x,N,!1,_)}(i,o,G,Z,x))return!1;null===_&&(_=new Set),_.add(G)}}}if(null!==_){for(var J=arrayFromMap(o),$=0;$<J.length;$++){var ee=_slicedToArray(J[$],2),G=ee[0],et=ee[1];if("object"===_typeof(G)&&null!==G){if(!mapHasEqualEntry(_,i,G,et,s,x))return!1}else if(!s&&(!i.has(G)||!innerDeepEqual(i.get(G),et,!1,x))&&!mapHasEqualEntry(_,i,G,et,!1,x))return!1}return 0===_.size}return!0}(i,o,s,_))return!1}else if(1===F)for(;N<i.length;N++)if(j(i,N)){if(!j(o,N)||!innerDeepEqual(i[N],o[N],s,_))return!1}else{if(j(o,N))return!1;for(var G=Object.keys(i);N<G.length;N++){var Z=G[N];if(!j(o,Z)||!innerDeepEqual(i[Z],o[Z],s,_))return!1}if(G.length!==Object.keys(o).length)return!1;return!0}for(N=0;N<x.length;N++){var X=x[N];if(!innerDeepEqual(i[X],o[X],s,_))return!1}return!0}(i,o,s,N,x,_);return x.val1.delete(i),x.val2.delete(o),eo}function setHasEqualElement(i,o,s,x){for(var _=arrayFromSet(i),F=0;F<_.length;F++){var N=_[F];if(innerDeepEqual(o,N,s,x))return i.delete(N),!0}return!1}function findLooseMatchingPrimitives(i){switch(_typeof(i)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":i=+i;case"number":if(N(i))return!1}return!0}function mapHasEqualEntry(i,o,s,x,_,F){for(var N=arrayFromSet(i),j=0;j<N.length;j++){var G=N[j];if(innerDeepEqual(s,G,_,F)&&innerDeepEqual(x,o.get(G),_,F))return i.delete(G),!0}return!1}i.exports={isDeepEqual:function(i,o){return innerDeepEqual(i,o,!1)},isDeepStrictEqual:function(i,o){return innerDeepEqual(i,o,!0)}}},95341:function(i,o){"use strict";o.byteLength=function(i){var o=getLens(i),s=o[0],x=o[1];return(s+x)*3/4-x},o.toByteArray=function(i){var o,s,F=getLens(i),N=F[0],j=F[1],G=new _((N+j)*3/4-j),Z=0,X=j>0?N-4:N;for(s=0;s<X;s+=4)o=x[i.charCodeAt(s)]<<18|x[i.charCodeAt(s+1)]<<12|x[i.charCodeAt(s+2)]<<6|x[i.charCodeAt(s+3)],G[Z++]=o>>16&255,G[Z++]=o>>8&255,G[Z++]=255&o;return 2===j&&(o=x[i.charCodeAt(s)]<<2|x[i.charCodeAt(s+1)]>>4,G[Z++]=255&o),1===j&&(o=x[i.charCodeAt(s)]<<10|x[i.charCodeAt(s+1)]<<4|x[i.charCodeAt(s+2)]>>2,G[Z++]=o>>8&255,G[Z++]=255&o),G},o.fromByteArray=function(i){for(var o,x=i.length,_=x%3,F=[],N=0,j=x-_;N<j;N+=16383)F.push(function(i,o,x){for(var _,F=[],N=o;N<x;N+=3)F.push(s[(_=(i[N]<<16&16711680)+(i[N+1]<<8&65280)+(255&i[N+2]))>>18&63]+s[_>>12&63]+s[_>>6&63]+s[63&_]);return F.join("")}(i,N,N+16383>j?j:N+16383));return 1===_?F.push(s[(o=i[x-1])>>2]+s[o<<4&63]+"=="):2===_&&F.push(s[(o=(i[x-2]<<8)+i[x-1])>>10]+s[o>>4&63]+s[o<<2&63]+"="),F.join("")};for(var s=[],x=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,j=F.length;N<j;++N)s[N]=F[N],x[F.charCodeAt(N)]=N;function getLens(i){var o=i.length;if(o%4>0)throw Error("Invalid string. Length must be a multiple of 4");var s=i.indexOf("=");-1===s&&(s=o);var x=s===o?0:4-s%4;return[s,x]}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},91358:function(i){"use strict";function ge(i,o,s,x,_){for(var F=_+1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)>=0?(F=N,_=N-1):x=N+1}return F}function gt(i,o,s,x,_){for(var F=_+1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)>0?(F=N,_=N-1):x=N+1}return F}function lt(i,o,s,x,_){for(var F=x-1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)<0?(F=N,x=N+1):_=N-1}return F}function le(i,o,s,x,_){for(var F=x-1;x<=_;){var N=x+_>>>1,j=i[N];(void 0!==s?s(j,o):j-o)<=0?(F=N,x=N+1):_=N-1}return F}function eq(i,o,s,x,_){for(;x<=_;){var F=x+_>>>1,N=i[F],j=void 0!==s?s(N,o):N-o;if(0===j)return F;j<=0?x=F+1:_=F-1}return -1}function norm(i,o,s,x,_,F){return"function"==typeof s?F(i,o,s,void 0===x?0:0|x,void 0===_?i.length-1:0|_):F(i,o,void 0,void 0===s?0:0|s,void 0===x?i.length-1:0|x)}i.exports={ge:function(i,o,s,x,_){return norm(i,o,s,x,_,ge)},gt:function(i,o,s,x,_){return norm(i,o,s,x,_,gt)},lt:function(i,o,s,x,_){return norm(i,o,s,x,_,lt)},le:function(i,o,s,x,_){return norm(i,o,s,x,_,le)},eq:function(i,o,s,x,_){return norm(i,o,s,x,_,eq)}}},13547:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,x=o,_=7;for(s>>>=1;s;s>>>=1)x<<=1,x|=1&s,--_;i[o]=x<<_&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},44781:function(i,o,s){"use strict";var x=s(53435);function edt(i,o,s,x,_,F,N){for(var j=0;j<o;j++){for(var G=0;G<s;G++)x[G]=i[G*o+j];for(edt1d(x,_,F,N,s),G=0;G<s;G++)i[G*o+j]=_[G]}for(G=0;G<s;G++){for(j=0;j<o;j++)x[j]=i[G*o+j];for(edt1d(x,_,F,N,o),j=0;j<o;j++)i[G*o+j]=Math.sqrt(_[j])}}function edt1d(i,o,s,x,_){s[0]=0,x[0]=-1e20,x[1]=1e20;for(var F=1,N=0;F<_;F++){for(var j=(i[F]+F*F-(i[s[N]]+s[N]*s[N]))/(2*F-2*s[N]);j<=x[N];)N--,j=(i[F]+F*F-(i[s[N]]+s[N]*s[N]))/(2*F-2*s[N]);s[++N]=F,x[N]=j,x[N+1]=1e20}for(F=0,N=0;F<_;F++){for(;x[N+1]<F;)N++;o[F]=(F-s[N])*(F-s[N])+i[s[N]]}}i.exports=function(i,o){o||(o={});var s,_,F,N,j,G,Z,X,J,$,ee,et=null==o.cutoff?.25:o.cutoff,er=null==o.radius?8:o.radius,en=o.channel||0;if(ArrayBuffer.isView(i)||Array.isArray(i)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");s=o.width,_=o.height,N=i,G=o.stride?o.stride:Math.floor(i.length/s/_)}else window.HTMLCanvasElement&&i instanceof window.HTMLCanvasElement?(Z=(X=i).getContext("2d"),s=X.width,_=X.height,N=(J=Z.getImageData(0,0,s,_)).data,G=4):window.CanvasRenderingContext2D&&i instanceof window.CanvasRenderingContext2D?(X=i.canvas,Z=i,s=X.width,_=X.height,N=(J=Z.getImageData(0,0,s,_)).data,G=4):window.ImageData&&i instanceof window.ImageData&&(J=i,s=i.width,_=i.height,N=J.data,G=4);if(F=Math.max(s,_),window.Uint8ClampedArray&&N instanceof window.Uint8ClampedArray||window.Uint8Array&&N instanceof window.Uint8Array)for($=0,j=N,N=Array(s*_),ee=j.length;$<ee;$++)N[$]=j[$*G+en]/255;else if(1!==G)throw Error("Raw data can have only 1 value per pixel");var ei=Array(s*_),eo=Array(s*_),es=Array(F),el=Array(F),ec=Array(F+1),eu=Array(F);for($=0,ee=s*_;$<ee;$++){var ef=N[$];ei[$]=1===ef?0:0===ef?1e20:Math.pow(Math.max(0,.5-ef),2),eo[$]=1===ef?1e20:0===ef?0:Math.pow(Math.max(0,ef-.5),2)}edt(ei,s,_,es,el,eu,ec),edt(eo,s,_,es,el,eu,ec);var eh=window.Float32Array?new Float32Array(s*_):Array(s*_);for($=0,ee=s*_;$<ee;$++)eh[$]=x(1-((ei[$]-eo[$])/er+et),0,1);return eh}},6614:function(i,o,s){"use strict";var x=s(68318),_=s(68222),F=_(x("String.prototype.indexOf"));i.exports=function(i,o){var s=x(i,!!o);return"function"==typeof s&&F(i,".prototype.")>-1?_(s):s}},68222:function(i,o,s){"use strict";var x=s(77575),_=s(68318),F=_("%Function.prototype.apply%"),N=_("%Function.prototype.call%"),j=_("%Reflect.apply%",!0)||x.call(N,F),G=_("%Object.getOwnPropertyDescriptor%",!0),Z=_("%Object.defineProperty%",!0),X=_("%Math.max%");if(Z)try{Z({},"a",{value:1})}catch(i){Z=null}i.exports=function(i){var o=j(x,N,arguments);return G&&Z&&G(o,"length").configurable&&Z(o,"length",{value:1+X(0,i.length-(arguments.length-1))}),o};var applyBind=function(){return j(x,F,arguments)};Z?Z(i.exports,"apply",{value:applyBind}):i.exports.apply=applyBind},53435:function(i){i.exports=function(i,o,s){return o<s?i<o?o:i>s?s:i:i<s?s:i>o?o:i}},6475:function(i,o,s){"use strict";var x=s(53435);function toNumber(i,o){null==o&&(o=!0);var s=i[0],_=i[1],F=i[2],N=i[3];return null==N&&(N=o?1:255),o&&(s*=255,_*=255,F*=255,N*=255),s=255&x(s,0,255),16777216*s+((_=255&x(_,0,255))<<16)+((F=255&x(F,0,255))<<8)+(N=255&x(N,0,255))}i.exports=toNumber,i.exports.to=toNumber,i.exports.from=function(i,o){var s=(i=+i)>>>24,x=(16711680&i)>>>16,_=(65280&i)>>>8,F=255&i;return!1===o?[s,x,_,F]:[s/255,x/255,_/255,F/255]}},76857:function(i){"use strict";i.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(i,o,s){"use strict";var x=s(36652),_=s(53435),F=s(90660);i.exports=function(i,o){"float"!==o&&o||(o="array"),"uint"===o&&(o="uint8"),"uint_clamped"===o&&(o="uint8_clamped");var s,N=new(F(o))(4),j="uint8"!==o&&"uint8_clamped"!==o;return(i.length&&"string"!=typeof i||(i=x(i),i[0]/=255,i[1]/=255,i[2]/=255),(s=i)instanceof Uint8Array||s instanceof Uint8ClampedArray||Array.isArray(s)&&(s[0]>1||0===s[0])&&(s[1]>1||0===s[1])&&(s[2]>1||0===s[2])&&(!s[3]||s[3]>1))?(N[0]=i[0],N[1]=i[1],N[2]=i[2],N[3]=null!=i[3]?i[3]:255,j&&(N[0]/=255,N[1]/=255,N[2]/=255,N[3]/=255)):j?(N[0]=i[0],N[1]=i[1],N[2]=i[2],N[3]=null!=i[3]?i[3]:1):(N[0]=_(Math.floor(255*i[0]),0,255),N[1]=_(Math.floor(255*i[1]),0,255),N[2]=_(Math.floor(255*i[2]),0,255),N[3]=null==i[3]?255:_(Math.floor(255*i[3]),0,255)),N}},90736:function(i,o,s){"use strict";var x=s(76857),_=s(10973),F=s(46775);i.exports=function(i){var o,j,G=[],Z=1;if("string"==typeof i){if(x[i])G=x[i].slice(),j="rgb";else if("transparent"===i)Z=0,j="rgb",G=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var X=i.slice(1),J=X.length;Z=1,J<=4?(G=[parseInt(X[0]+X[0],16),parseInt(X[1]+X[1],16),parseInt(X[2]+X[2],16)],4===J&&(Z=parseInt(X[3]+X[3],16)/255)):(G=[parseInt(X[0]+X[1],16),parseInt(X[2]+X[3],16),parseInt(X[4]+X[5],16)],8===J&&(Z=parseInt(X[6]+X[7],16)/255)),G[0]||(G[0]=0),G[1]||(G[1]=0),G[2]||(G[2]=0),j="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var $=o[1],X=$.replace(/a$/,"");j=X;var J="cmyk"===X?4:"gray"===X?1:3;G=o[2].trim().split(/\s*,\s*/).map(function(i,o){if(/%$/.test(i)){if(o===J)return parseFloat(i)/100;if("rgb"===X)return 255*parseFloat(i)/100}else if("h"===X[o]){if(/deg$/.test(i));else if(void 0!==N[i])return N[i]}return parseFloat(i)}),$===X&&G.push(1),Z="rgb"===$?1:void 0===G[J]?1:G[J],G=G.slice(0,J)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(G=i.match(/([0-9]+)/g).map(function(i){return parseFloat(i)}),j=i.match(/([a-z])/ig).join("").toLowerCase())}else if(isNaN(i)){if(_(i)){var ee=F(i.r,i.red,i.R,null);null!==ee?(j="rgb",G=[ee,F(i.g,i.green,i.G),F(i.b,i.blue,i.B)]):(j="hsl",G=[F(i.h,i.hue,i.H),F(i.s,i.saturation,i.S),F(i.l,i.lightness,i.L,i.b,i.brightness)]),Z=F(i.a,i.alpha,i.opacity,1),null!=i.opacity&&(Z/=100)}else(Array.isArray(i)||s.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(G=[i[0],i[1],i[2]],j="rgb",Z=4===i.length?i[3]:1)}else j="rgb",G=[i>>>16,(65280&i)>>>8,255&i];return{space:j,values:G,alpha:Z}};var N={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(i,o,s){"use strict";var x=s(90736),_=s(80009),F=s(53435);i.exports=function(i){var o,s=x(i);return s.space?((o=[,,,])[0]=F(s.values[0],0,255),o[1]=F(s.values[1],0,255),o[2]=F(s.values[2],0,255),"h"===s.space[0]&&(o=_.rgb(o)),o.push(F(s.alpha,0,1)),o):[]}},80009:function(i,o,s){"use strict";var x=s(6866);i.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var o,s,x,_,F,N=i[0]/360,j=i[1]/100,G=i[2]/100;if(0===j)return[F=255*G,F,F];s=G<.5?G*(1+j):G+j-G*j,o=2*G-s,_=[0,0,0];for(var Z=0;Z<3;Z++)(x=N+-(1/3*(Z-1)))<0?x++:x>1&&x--,F=6*x<1?o+(s-o)*6*x:2*x<1?s:3*x<2?o+(s-o)*(2/3-x)*6:o,_[Z]=255*F;return _}},x.hsl=function(i){var o,s,x=i[0]/255,_=i[1]/255,F=i[2]/255,N=Math.min(x,_,F),j=Math.max(x,_,F),G=j-N;return j===N?o=0:x===j?o=(_-F)/G:_===j?o=2+(F-x)/G:F===j&&(o=4+(x-_)/G),(o=Math.min(60*o,360))<0&&(o+=360),s=(N+j)/2,[o,100*(j===N?0:s<=.5?G/(j+N):G/(2-j-N)),100*s]}},6866:function(i){"use strict";i.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(i){i.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(i,o,s){"use strict";i.exports={parse:s(41004),stringify:s(53313)}},63625:function(i,o,s){"use strict";var x=s(40402);i.exports={isSize:function(i){return/^[\d\.]/.test(i)||-1!==i.indexOf("/")||-1!==x.indexOf(i)}}},41004:function(i,o,s){"use strict";var x=s(90448),_=s(38732),F=s(41901),N=s(15659),j=s(96209),G=s(83794),Z=s(99011),X=s(63625).isSize;i.exports=parseFont;var J=parseFont.cache={};function parseFont(i){if("string"!=typeof i)throw Error("Font argument must be a string.");if(J[i])return J[i];if(""===i)throw Error("Cannot parse an empty string.");if(-1!==F.indexOf(i))return J[i]={system:i};for(var o,s={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},$=Z(i,/\s+/);o=$.shift();){if(-1!==_.indexOf(o))return["style","variant","weight","stretch"].forEach(function(i){s[i]=o}),J[i]=s;if(-1!==j.indexOf(o)){s.style=o;continue}if("normal"===o||"small-caps"===o){s.variant=o;continue}if(-1!==G.indexOf(o)){s.stretch=o;continue}if(-1!==N.indexOf(o)){s.weight=o;continue}if(X(o)){var ee=Z(o,"/");if(s.size=ee[0],null!=ee[1]?s.lineHeight=parseLineHeight(ee[1]):"/"===$[0]&&($.shift(),s.lineHeight=parseLineHeight($.shift())),!$.length)throw Error("Missing required font-family.");return s.family=Z($.join(" "),/\s*,\s*/).map(x),J[i]=s}throw Error("Unknown or unsupported font token: "+o)}throw Error("Missing required font-size.")}function parseLineHeight(i){var o=parseFloat(i);return o.toString()===i?o:i}},53313:function(i,o,s){"use strict";var x=s(71299),_=s(63625).isSize,F=a2o(s(38732)),N=a2o(s(41901)),j=a2o(s(15659)),G=a2o(s(96209)),Z=a2o(s(83794)),X={normal:1,"small-caps":1},J={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},$={size:"1rem",family:"serif"};function verify(i,o){if(i&&!o[i]&&!F[i])throw Error("Unknown keyword `"+i+"`");return i}function a2o(i){for(var o={},s=0;s<i.length;s++)o[i[s]]=1;return o}i.exports=function(i){if((i=x(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&verify(i.system,N),i.system;if(verify(i.style,G),verify(i.variant,X),verify(i.weight,j),verify(i.stretch,Z),null==i.size&&(i.size=$.size),"number"==typeof i.size&&(i.size+="px"),!_)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=$.family),Array.isArray(i.family)&&(i.family.length||(i.family=[$.family]),i.family=i.family.map(function(i){return J[i]?i:'"'+i+'"'}).join(", "));var o=[];return o.push(i.style),i.variant!==i.style&&o.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&o.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&o.push(i.stretch),o.push(i.size+(null==i.lineHeight||"normal"===i.lineHeight||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),o.push(i.family),o.filter(Boolean).join(" ")}},55174:function(i,o,s){"use strict";var x,_=s(24582),F=s(10424),N=s(82527),j=s(19012),G=s(21780),Z=s(16906),X=Function.prototype.bind,J=Object.defineProperty,$=Object.prototype.hasOwnProperty;x=function(i,o,s){var x,_=F(o)&&N(o.value);return x=j(o),delete x.writable,delete x.value,x.get=function(){return!s.overwriteDefinition&&$.call(this,i)?_:(o.value=X.call(_,s.resolveContext?s.resolveContext(this):this),J(this,i,o),this[i])},x},i.exports=function(i){var o=G(arguments[1]);return _(o.resolveContext)&&N(o.resolveContext),Z(i,function(i,s){return x(s,i,o)})}},62072:function(i,o,s){"use strict";var x=s(24582),_=s(84985),F=s(95879),N=s(21780),j=s(66741);(i.exports=function(i,o){var s,_,G,Z,X;return arguments.length<2||"string"!=typeof i?(Z=o,o=i,i=null):Z=arguments[2],x(i)?(s=j.call(i,"c"),_=j.call(i,"e"),G=j.call(i,"w")):(s=G=!0,_=!1),X={value:o,configurable:s,enumerable:_,writable:G},Z?F(N(Z),X):X}).gs=function(i,o,s){var G,Z,X,J;return"string"!=typeof i?(X=s,s=o,o=i,i=null):X=arguments[3],x(o)?_(o)?x(s)?_(s)||(X=s,s=void 0):s=void 0:(X=o,o=s=void 0):o=void 0,x(i)?(G=j.call(i,"c"),Z=j.call(i,"e")):(G=!0,Z=!1),J={get:o,set:s,configurable:G,enumerable:Z},X?F(N(X),J):J}},33064:function(i,o,s){"use strict";function src_ascending(i,o){return i<o?-1:i>o?1:i>=o?0:NaN}s.d(o,{j2:function(){return src_ascending},Fp:function(){return max},J6:function(){return mean},TS:function(){return merge},VV:function(){return min},w6:function(){return src_range},Sm:function(){return sum}});var x,_,F=(1===(_=src_ascending).length&&(x=_,_=function(i,o){return src_ascending(x(i),o)}),{left:function(i,o,s,x){for(null==s&&(s=0),null==x&&(x=i.length);s<x;){var F=s+x>>>1;0>_(i[F],o)?s=F+1:x=F}return s},right:function(i,o,s,x){for(null==s&&(s=0),null==x&&(x=i.length);s<x;){var F=s+x>>>1;_(i[F],o)>0?x=F:s=F+1}return s}});F.right,F.left;var N=Array.prototype;function max(i,o){var s,x,_=i.length,F=-1;if(null==o){for(;++F<_;)if(null!=(s=i[F])&&s>=s)for(x=s;++F<_;)null!=(s=i[F])&&s>x&&(x=s)}else for(;++F<_;)if(null!=(s=o(i[F],F,i))&&s>=s)for(x=s;++F<_;)null!=(s=o(i[F],F,i))&&s>x&&(x=s);return x}function src_number(i){return null===i?NaN:+i}function mean(i,o){var s,x=i.length,_=x,F=-1,N=0;if(null==o)for(;++F<x;)isNaN(s=src_number(i[F]))?--_:N+=s;else for(;++F<x;)isNaN(s=src_number(o(i[F],F,i)))?--_:N+=s;if(_)return N/_}function merge(i){for(var o,s,x,_=i.length,F=-1,N=0;++F<_;)N+=i[F].length;for(s=Array(N);--_>=0;)for(o=(x=i[_]).length;--o>=0;)s[--N]=x[o];return s}function min(i,o){var s,x,_=i.length,F=-1;if(null==o){for(;++F<_;)if(null!=(s=i[F])&&s>=s)for(x=s;++F<_;)null!=(s=i[F])&&x>s&&(x=s)}else for(;++F<_;)if(null!=(s=o(i[F],F,i))&&s>=s)for(x=s;++F<_;)null!=(s=o(i[F],F,i))&&x>s&&(x=s);return x}function src_range(i,o,s){i=+i,o=+o,s=(_=arguments.length)<2?(o=i,i=0,1):_<3?1:+s;for(var x=-1,_=0|Math.max(0,Math.ceil((o-i)/s)),F=Array(_);++x<_;)F[x]=i+x*s;return F}function sum(i,o){var s,x=i.length,_=-1,F=0;if(null==o)for(;++_<x;)(s=+i[_])&&(F+=s);else for(;++_<x;)(s=+o(i[_],_,i))&&(F+=s);return F}N.slice,N.map},15140:function(i,o,s){"use strict";function Map(){}function map(i,o){var s=new Map;if(i instanceof Map)i.each(function(i,o){s.set(o,i)});else if(Array.isArray(i)){var x,_=-1,F=i.length;if(null==o)for(;++_<F;)s.set(_,i[_]);else for(;++_<F;)s.set(o(x=i[_],_,i),x)}else if(i)for(var N in i)s.set(N,i[N]);return s}s.d(o,{UI:function(){return x},b1:function(){return nest}}),Map.prototype=map.prototype={constructor:Map,has:function(i){return"$"+i in this},get:function(i){return this["$"+i]},set:function(i,o){return this["$"+i]=o,this},remove:function(i){var o="$"+i;return o in this&&delete this[o]},clear:function(){for(var i in this)"$"===i[0]&&delete this[i]},keys:function(){var i=[];for(var o in this)"$"===o[0]&&i.push(o.slice(1));return i},values:function(){var i=[];for(var o in this)"$"===o[0]&&i.push(this[o]);return i},entries:function(){var i=[];for(var o in this)"$"===o[0]&&i.push({key:o.slice(1),value:this[o]});return i},size:function(){var i=0;for(var o in this)"$"===o[0]&&++i;return i},empty:function(){for(var i in this)if("$"===i[0])return!1;return!0},each:function(i){for(var o in this)"$"===o[0]&&i(this[o],o.slice(1),this)}};var x=map;function nest(){var i,o,s,_=[],F=[];function apply(s,F,N,j){if(F>=_.length)return null!=i&&s.sort(i),null!=o?o(s):s;for(var G,Z,X,J=-1,$=s.length,ee=_[F++],et=x(),er=N();++J<$;)(X=et.get(G=ee(Z=s[J])+""))?X.push(Z):et.set(G,[Z]);return et.each(function(i,o){j(er,o,apply(i,F,N,j))}),er}return s={object:function(i){return apply(i,0,createObject,setObject)},map:function(i){return apply(i,0,createMap,setMap)},entries:function(i){return function entries(i,s){if(++s>_.length)return i;var x,N=F[s-1];return null!=o&&s>=_.length?x=i.entries():(x=[],i.each(function(i,o){x.push({key:o,values:entries(i,s)})})),null!=N?x.sort(function(i,o){return N(i.key,o.key)}):x}(apply(i,0,createMap,setMap),0)},key:function(i){return _.push(i),s},sortKeys:function(i){return F[_.length-1]=i,s},sortValues:function(o){return i=o,s},rollup:function(i){return o=i,s}}}function createObject(){return{}}function setObject(i,o,s){i[o]=s}function createMap(){return x()}function setMap(i,o,s){i.set(o,s)}function Set(){}var _=x.prototype;Set.prototype=(function(i,o){var s=new Set;if(i instanceof Set)i.each(function(i){s.add(i)});else if(i){var x=-1,_=i.length;if(null==o)for(;++x<_;)s.add(i[x]);else for(;++x<_;)s.add(o(i[x],x,i))}return s}).prototype={constructor:Set,has:_.has,add:function(i){return this["$"+(i+="")]=i,this},remove:_.remove,clear:_.clear,values:_.keys,size:_.size,empty:_.empty,each:_.each}},49887:function(i,o,s){"use strict";function center(i,o){var s;function force(){var x,_,F=s.length,N=0,j=0;for(x=0;x<F;++x)N+=(_=s[x]).x,j+=_.y;for(N=N/F-i,j=j/F-o,x=0;x<F;++x)_=s[x],_.x-=N,_.y-=j}return null==i&&(i=0),null==o&&(o=0),force.initialize=function(i){s=i},force.x=function(o){return arguments.length?(i=+o,force):i},force.y=function(i){return arguments.length?(o=+i,force):o},force}function constant(i){return function(){return i}}function jiggle(){return(Math.random()-.5)*1e-6}function add_add(i,o,s,x){if(isNaN(o)||isNaN(s))return i;var _,F,N,j,G,Z,X,J,$,ee=i._root,et={data:x},er=i._x0,en=i._y0,ei=i._x1,eo=i._y1;if(!ee)return i._root=et,i;for(;ee.length;)if((Z=o>=(F=(er+ei)/2))?er=F:ei=F,(X=s>=(N=(en+eo)/2))?en=N:eo=N,_=ee,!(ee=ee[J=X<<1|Z]))return _[J]=et,i;if(j=+i._x.call(null,ee.data),G=+i._y.call(null,ee.data),o===j&&s===G)return et.next=ee,_?_[J]=et:i._root=et,i;do _=_?_[J]=[,,,,]:i._root=[,,,,],(Z=o>=(F=(er+ei)/2))?er=F:ei=F,(X=s>=(N=(en+eo)/2))?en=N:eo=N;while((J=X<<1|Z)==($=(G>=N)<<1|j>=F));return _[$]=ee,_[J]=et,i}function quad(i,o,s,x,_){this.node=i,this.x0=o,this.y0=s,this.x1=x,this.y1=_}function defaultX(i){return i[0]}function defaultY(i){return i[1]}function quadtree(i,o,s){var x=new Quadtree(null==o?defaultX:o,null==s?defaultY:s,NaN,NaN,NaN,NaN);return null==i?x:x.addAll(i)}function Quadtree(i,o,s,x,_,F){this._x=i,this._y=o,this._x0=s,this._y0=x,this._x1=_,this._y1=F,this._root=void 0}function leaf_copy(i){for(var o={data:i.data},s=o;i=i.next;)s=s.next={data:i.data};return o}s.r(o),s.d(o,{forceCenter:function(){return center},forceCollide:function(){return collide},forceLink:function(){return src_link},forceManyBody:function(){return manyBody},forceRadial:function(){return radial},forceSimulation:function(){return simulation},forceX:function(){return src_x},forceY:function(){return src_y}});var x=quadtree.prototype=Quadtree.prototype;function collide_x(i){return i.x+i.vx}function collide_y(i){return i.y+i.vy}function collide(i){var o,s,x=1,_=1;function force(){for(var i,F,N,j,G,Z,X,J=o.length,$=0;$<_;++$)for(i=0,F=quadtree(o,collide_x,collide_y).visitAfter(prepare);i<J;++i)X=(Z=s[(N=o[i]).index])*Z,j=N.x+N.vx,G=N.y+N.vy,F.visit(apply);function apply(i,o,s,_,F){var J=i.data,$=i.r,ee=Z+$;if(J){if(J.index>N.index){var et=j-J.x-J.vx,er=G-J.y-J.vy,en=et*et+er*er;en<ee*ee&&(0===et&&(en+=(et=jiggle())*et),0===er&&(en+=(er=jiggle())*er),en=(ee-(en=Math.sqrt(en)))/en*x,N.vx+=(et*=en)*(ee=($*=$)/(X+$)),N.vy+=(er*=en)*ee,J.vx-=et*(ee=1-ee),J.vy-=er*ee)}return}return o>j+ee||_<j-ee||s>G+ee||F<G-ee}}function prepare(i){if(i.data)return i.r=s[i.data.index];for(var o=i.r=0;o<4;++o)i[o]&&i[o].r>i.r&&(i.r=i[o].r)}function initialize(){if(o){var x,_,F=o.length;for(x=0,s=Array(F);x<F;++x)s[(_=o[x]).index]=+i(_,x,o)}}return"function"!=typeof i&&(i=constant(null==i?1:+i)),force.initialize=function(i){o=i,initialize()},force.iterations=function(i){return arguments.length?(_=+i,force):_},force.strength=function(i){return arguments.length?(x=+i,force):x},force.radius=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}x.copy=function(){var i,o,s=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),x=this._root;if(!x)return s;if(!x.length)return s._root=leaf_copy(x),s;for(i=[{source:x,target:s._root=[,,,,]}];x=i.pop();)for(var _=0;_<4;++_)(o=x.source[_])&&(o.length?i.push({source:o,target:x.target[_]=[,,,,]}):x.target[_]=leaf_copy(o));return s},x.add=function(i){var o=+this._x.call(null,i),s=+this._y.call(null,i);return add_add(this.cover(o,s),o,s,i)},x.addAll=function(i){var o,s,x,_,F=i.length,N=Array(F),j=Array(F),G=1/0,Z=1/0,X=-1/0,J=-1/0;for(s=0;s<F;++s)!(isNaN(x=+this._x.call(null,o=i[s]))||isNaN(_=+this._y.call(null,o)))&&(N[s]=x,j[s]=_,x<G&&(G=x),x>X&&(X=x),_<Z&&(Z=_),_>J&&(J=_));if(G>X||Z>J)return this;for(this.cover(G,Z).cover(X,J),s=0;s<F;++s)add_add(this,N[s],j[s],i[s]);return this},x.cover=function(i,o){if(isNaN(i=+i)||isNaN(o=+o))return this;var s=this._x0,x=this._y0,_=this._x1,F=this._y1;if(isNaN(s))_=(s=Math.floor(i))+1,F=(x=Math.floor(o))+1;else{for(var N,j,G=_-s,Z=this._root;s>i||i>=_||x>o||o>=F;)switch(j=(o<x)<<1|i<s,(N=[,,,,])[j]=Z,Z=N,G*=2,j){case 0:_=s+G,F=x+G;break;case 1:s=_-G,F=x+G;break;case 2:_=s+G,x=F-G;break;case 3:s=_-G,x=F-G}this._root&&this._root.length&&(this._root=Z)}return this._x0=s,this._y0=x,this._x1=_,this._y1=F,this},x.data=function(){var i=[];return this.visit(function(o){if(!o.length)do i.push(o.data);while(o=o.next)}),i},x.extent=function(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},x.find=function(i,o,s){var x,_,F,N,j,G,Z,X=this._x0,J=this._y0,$=this._x1,ee=this._y1,et=[],er=this._root;for(er&&et.push(new quad(er,X,J,$,ee)),null==s?s=1/0:(X=i-s,J=o-s,$=i+s,ee=o+s,s*=s);G=et.pop();)if((er=G.node)&&!((_=G.x0)>$)&&!((F=G.y0)>ee)&&!((N=G.x1)<X)&&!((j=G.y1)<J)){if(er.length){var en=(_+N)/2,ei=(F+j)/2;et.push(new quad(er[3],en,ei,N,j),new quad(er[2],_,ei,en,j),new quad(er[1],en,F,N,ei),new quad(er[0],_,F,en,ei)),(Z=(o>=ei)<<1|i>=en)&&(G=et[et.length-1],et[et.length-1]=et[et.length-1-Z],et[et.length-1-Z]=G)}else{var eo=i-+this._x.call(null,er.data),es=o-+this._y.call(null,er.data),el=eo*eo+es*es;if(el<s){var ec=Math.sqrt(s=el);X=i-ec,J=o-ec,$=i+ec,ee=o+ec,x=er.data}}}return x},x.remove=function(i){if(isNaN(F=+this._x.call(null,i))||isNaN(N=+this._y.call(null,i)))return this;var o,s,x,_,F,N,j,G,Z,X,J,$,ee=this._root,et=this._x0,er=this._y0,en=this._x1,ei=this._y1;if(!ee)return this;if(ee.length)for(;;){if((Z=F>=(j=(et+en)/2))?et=j:en=j,(X=N>=(G=(er+ei)/2))?er=G:ei=G,o=ee,!(ee=ee[J=X<<1|Z]))return this;if(!ee.length)break;(o[J+1&3]||o[J+2&3]||o[J+3&3])&&(s=o,$=J)}for(;ee.data!==i;)if(x=ee,!(ee=ee.next))return this;return((_=ee.next)&&delete ee.next,x)?_?x.next=_:delete x.next:o?(_?o[J]=_:delete o[J],(ee=o[0]||o[1]||o[2]||o[3])&&ee===(o[3]||o[2]||o[1]||o[0])&&!ee.length&&(s?s[$]=ee:this._root=ee)):this._root=_,this},x.removeAll=function(i){for(var o=0,s=i.length;o<s;++o)this.remove(i[o]);return this},x.root=function(){return this._root},x.size=function(){var i=0;return this.visit(function(o){if(!o.length)do++i;while(o=o.next)}),i},x.visit=function(i){var o,s,x,_,F,N,j=[],G=this._root;for(G&&j.push(new quad(G,this._x0,this._y0,this._x1,this._y1));o=j.pop();)if(!i(G=o.node,x=o.x0,_=o.y0,F=o.x1,N=o.y1)&&G.length){var Z=(x+F)/2,X=(_+N)/2;(s=G[3])&&j.push(new quad(s,Z,X,F,N)),(s=G[2])&&j.push(new quad(s,x,X,Z,N)),(s=G[1])&&j.push(new quad(s,Z,_,F,X)),(s=G[0])&&j.push(new quad(s,x,_,Z,X))}return this},x.visitAfter=function(i){var o,s=[],x=[];for(this._root&&s.push(new quad(this._root,this._x0,this._y0,this._x1,this._y1));o=s.pop();){var _=o.node;if(_.length){var F,N=o.x0,j=o.y0,G=o.x1,Z=o.y1,X=(N+G)/2,J=(j+Z)/2;(F=_[0])&&s.push(new quad(F,N,j,X,J)),(F=_[1])&&s.push(new quad(F,X,j,G,J)),(F=_[2])&&s.push(new quad(F,N,J,X,Z)),(F=_[3])&&s.push(new quad(F,X,J,G,Z))}x.push(o)}for(;o=x.pop();)i(o.node,o.x0,o.y0,o.x1,o.y1);return this},x.x=function(i){return arguments.length?(this._x=i,this):this._x},x.y=function(i){return arguments.length?(this._y=i,this):this._y};var _=s(15140);function index(i){return i.index}function link_find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function src_link(i){var o,s,x,F,N,j=index,strength=function(i){return 1/Math.min(F[i.source.index],F[i.target.index])},G=constant(30),Z=1;function force(x){for(var _=0,F=i.length;_<Z;++_)for(var j,G,X,J,$,ee,et,er=0;er<F;++er)G=(j=i[er]).source,ee=((ee=Math.sqrt((J=(X=j.target).x+X.vx-G.x-G.vx||jiggle())*J+($=X.y+X.vy-G.y-G.vy||jiggle())*$))-s[er])/ee*x*o[er],J*=ee,$*=ee,X.vx-=J*(et=N[er]),X.vy-=$*et,G.vx+=J*(et=1-et),G.vy+=$*et}function initialize(){if(x){var G,Z,X=x.length,J=i.length,$=(0,_.UI)(x,j);for(G=0,F=Array(X);G<J;++G)(Z=i[G]).index=G,"object"!=typeof Z.source&&(Z.source=link_find($,Z.source)),"object"!=typeof Z.target&&(Z.target=link_find($,Z.target)),F[Z.source.index]=(F[Z.source.index]||0)+1,F[Z.target.index]=(F[Z.target.index]||0)+1;for(G=0,N=Array(J);G<J;++G)Z=i[G],N[G]=F[Z.source.index]/(F[Z.source.index]+F[Z.target.index]);o=Array(J),initializeStrength(),s=Array(J),initializeDistance()}}function initializeStrength(){if(x)for(var s=0,_=i.length;s<_;++s)o[s]=+strength(i[s],s,i)}function initializeDistance(){if(x)for(var o=0,_=i.length;o<_;++o)s[o]=+G(i[o],o,i)}return null==i&&(i=[]),force.initialize=function(i){x=i,initialize()},force.links=function(o){return arguments.length?(i=o,initialize(),force):i},force.id=function(i){return arguments.length?(j=i,force):j},force.iterations=function(i){return arguments.length?(Z=+i,force):Z},force.strength=function(i){return arguments.length?(strength="function"==typeof i?i:constant(+i),initializeStrength(),force):strength},force.distance=function(i){return arguments.length?(G="function"==typeof i?i:constant(+i),initializeDistance(),force):G},force}var F={value:function(){}};function dispatch(){for(var i,o=0,s=arguments.length,x={};o<s;++o){if(!(i=arguments[o]+"")||i in x||/[\s.]/.test(i))throw Error("illegal type: "+i);x[i]=[]}return new Dispatch(x)}function Dispatch(i){this._=i}function set(i,o,s){for(var x=0,_=i.length;x<_;++x)if(i[x].name===o){i[x]=F,i=i.slice(0,x).concat(i.slice(x+1));break}return null!=s&&i.push({name:o,value:s}),i}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(i,o){var s,x=this._,_=(i+"").trim().split(/^|\s+/).map(function(i){var o="",s=i.indexOf(".");if(s>=0&&(o=i.slice(s+1),i=i.slice(0,s)),i&&!x.hasOwnProperty(i))throw Error("unknown type: "+i);return{type:i,name:o}}),F=-1,N=_.length;if(arguments.length<2){for(;++F<N;)if((s=(i=_[F]).type)&&(s=function(i,o){for(var s,x=0,_=i.length;x<_;++x)if((s=i[x]).name===o)return s.value}(x[s],i.name)))return s;return}if(null!=o&&"function"!=typeof o)throw Error("invalid callback: "+o);for(;++F<N;)if(s=(i=_[F]).type)x[s]=set(x[s],i.name,o);else if(null==o)for(s in x)x[s]=set(x[s],i.name,null);return this},copy:function(){var i={},o=this._;for(var s in o)i[s]=o[s].slice();return new Dispatch(i)},call:function(i,o){if((s=arguments.length-2)>0)for(var s,x,_=Array(s),F=0;F<s;++F)_[F]=arguments[F+2];if(!this._.hasOwnProperty(i))throw Error("unknown type: "+i);for(x=this._[i],F=0,s=x.length;F<s;++F)x[F].value.apply(o,_)},apply:function(i,o,s){if(!this._.hasOwnProperty(i))throw Error("unknown type: "+i);for(var x=this._[i],_=0,F=x.length;_<F;++_)x[_].value.apply(o,s)}};var N,j,G=0,Z=0,X=0,J=0,$=0,ee=0,et="object"==typeof performance&&performance.now?performance:Date,er="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function now(){return $||(er(clearNow),$=et.now()+ee)}function clearNow(){$=0}function Timer(){this._call=this._time=this._next=null}function timer(i,o,s){var x=new Timer;return x.restart(i,o,s),x}function wake(){$=(J=et.now())+ee,G=Z=0;try{!function(){now(),++G;for(var i,o=N;o;)(i=$-o._time)>=0&&o._call.call(null,i),o=o._next;--G}()}finally{G=0,function(){for(var i,o,s=N,x=1/0;s;)s._call?(x>s._time&&(x=s._time),i=s,s=s._next):(o=s._next,s._next=null,s=i?i._next=o:N=o);j=i,sleep(x)}(),$=0}}function poke(){var i=et.now(),o=i-J;o>1e3&&(ee-=o,J=i)}function sleep(i){!G&&(Z&&(Z=clearTimeout(Z)),i-$>24?(i<1/0&&(Z=setTimeout(wake,i-et.now()-ee)),X&&(X=clearInterval(X))):(X||(J=et.now(),X=setInterval(poke,1e3)),G=1,er(wake)))}function simulation_x(i){return i.x}function simulation_y(i){return i.y}Timer.prototype=timer.prototype={constructor:Timer,restart:function(i,o,s){if("function"!=typeof i)throw TypeError("callback is not a function");s=(null==s?now():+s)+(null==o?0:+o),this._next||j===this||(j?j._next=this:N=this,j=this),this._call=i,this._time=s,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var en=Math.PI*(3-Math.sqrt(5));function simulation(i){var o,s=1,x=.001,F=1-Math.pow(.001,1/300),N=0,j=.6,G=(0,_.UI)(),Z=timer(step),X=dispatch("tick","end");function step(){tick(),X.call("tick",o),s<x&&(Z.stop(),X.call("end",o))}function tick(x){var _,Z,X=i.length;void 0===x&&(x=1);for(var J=0;J<x;++J)for(s+=(N-s)*F,G.each(function(i){i(s)}),_=0;_<X;++_)null==(Z=i[_]).fx?Z.x+=Z.vx*=j:(Z.x=Z.fx,Z.vx=0),null==Z.fy?Z.y+=Z.vy*=j:(Z.y=Z.fy,Z.vy=0);return o}function initializeNodes(){for(var o,s=0,x=i.length;s<x;++s){if((o=i[s]).index=s,null!=o.fx&&(o.x=o.fx),null!=o.fy&&(o.y=o.fy),isNaN(o.x)||isNaN(o.y)){var _=10*Math.sqrt(s),F=s*en;o.x=_*Math.cos(F),o.y=_*Math.sin(F)}(isNaN(o.vx)||isNaN(o.vy))&&(o.vx=o.vy=0)}}function initializeForce(o){return o.initialize&&o.initialize(i),o}return null==i&&(i=[]),initializeNodes(),o={tick:tick,restart:function(){return Z.restart(step),o},stop:function(){return Z.stop(),o},nodes:function(s){return arguments.length?(i=s,initializeNodes(),G.each(initializeForce),o):i},alpha:function(i){return arguments.length?(s=+i,o):s},alphaMin:function(i){return arguments.length?(x=+i,o):x},alphaDecay:function(i){return arguments.length?(F=+i,o):+F},alphaTarget:function(i){return arguments.length?(N=+i,o):N},velocityDecay:function(i){return arguments.length?(j=1-i,o):1-j},force:function(i,s){return arguments.length>1?(null==s?G.remove(i):G.set(i,initializeForce(s)),o):G.get(i)},find:function(o,s,x){var _,F,N,j,G,Z=0,X=i.length;for(null==x?x=1/0:x*=x,Z=0;Z<X;++Z)(N=(_=o-(j=i[Z]).x)*_+(F=s-j.y)*F)<x&&(G=j,x=N);return G},on:function(i,s){return arguments.length>1?(X.on(i,s),o):X.on(i)}}}function manyBody(){var i,o,s,x,_=constant(-30),F=1,N=1/0,j=.81;function force(x){var _,F=i.length,N=quadtree(i,simulation_x,simulation_y).visitAfter(accumulate);for(s=x,_=0;_<F;++_)o=i[_],N.visit(apply)}function initialize(){if(i){var o,s,F=i.length;for(o=0,x=Array(F);o<F;++o)x[(s=i[o]).index]=+_(s,o,i)}}function accumulate(i){var o,s,_,F,N,j=0,G=0;if(i.length){for(_=F=N=0;N<4;++N)(o=i[N])&&(s=Math.abs(o.value))&&(j+=o.value,G+=s,_+=s*o.x,F+=s*o.y);i.x=_/G,i.y=F/G}else{(o=i).x=o.data.x,o.y=o.data.y;do j+=x[o.data.index];while(o=o.next)}i.value=j}function apply(i,_,G,Z){if(!i.value)return!0;var X=i.x-o.x,J=i.y-o.y,$=Z-_,ee=X*X+J*J;if($*$/j<ee)return ee<N&&(0===X&&(ee+=(X=jiggle())*X),0===J&&(ee+=(J=jiggle())*J),ee<F&&(ee=Math.sqrt(F*ee)),o.vx+=X*i.value*s/ee,o.vy+=J*i.value*s/ee),!0;if(!i.length&&!(ee>=N)){(i.data!==o||i.next)&&(0===X&&(ee+=(X=jiggle())*X),0===J&&(ee+=(J=jiggle())*J),ee<F&&(ee=Math.sqrt(F*ee)));do i.data!==o&&($=x[i.data.index]*s/ee,o.vx+=X*$,o.vy+=J*$);while(i=i.next)}}return force.initialize=function(o){i=o,initialize()},force.strength=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),initialize(),force):_},force.distanceMin=function(i){return arguments.length?(F=i*i,force):Math.sqrt(F)},force.distanceMax=function(i){return arguments.length?(N=i*i,force):Math.sqrt(N)},force.theta=function(i){return arguments.length?(j=i*i,force):Math.sqrt(j)},force}function radial(i,o,s){var x,_,F,N=constant(.1);function force(i){for(var N=0,j=x.length;N<j;++N){var G=x[N],Z=G.x-o||1e-6,X=G.y-s||1e-6,J=Math.sqrt(Z*Z+X*X),$=(F[N]-J)*_[N]*i/J;G.vx+=Z*$,G.vy+=X*$}}function initialize(){if(x){var o,s=x.length;for(o=0,_=Array(s),F=Array(s);o<s;++o)F[o]=+i(x[o],o,x),_[o]=isNaN(F[o])?0:+N(x[o],o,x)}}return"function"!=typeof i&&(i=constant(+i)),null==o&&(o=0),null==s&&(s=0),force.initialize=function(i){x=i,initialize()},force.strength=function(i){return arguments.length?(N="function"==typeof i?i:constant(+i),initialize(),force):N},force.radius=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force.x=function(i){return arguments.length?(o=+i,force):o},force.y=function(i){return arguments.length?(s=+i,force):s},force}function src_x(i){var o,s,x,_=constant(.1);function force(i){for(var _,F=0,N=o.length;F<N;++F)_=o[F],_.vx+=(x[F]-_.x)*s[F]*i}function initialize(){if(o){var F,N=o.length;for(F=0,s=Array(N),x=Array(N);F<N;++F)s[F]=isNaN(x[F]=+i(o[F],F,o))?0:+_(o[F],F,o)}}return"function"!=typeof i&&(i=constant(null==i?0:+i)),force.initialize=function(i){o=i,initialize()},force.strength=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),initialize(),force):_},force.x=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}function src_y(i){var o,s,x,_=constant(.1);function force(i){for(var _,F=0,N=o.length;F<N;++F)_=o[F],_.vy+=(x[F]-_.y)*s[F]*i}function initialize(){if(o){var F,N=o.length;for(F=0,s=Array(N),x=Array(N);F<N;++F)s[F]=isNaN(x[F]=+i(o[F],F,o))?0:+_(o[F],F,o)}}return"function"!=typeof i&&(i=constant(null==i?0:+i)),force.initialize=function(i){o=i,initialize()},force.strength=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),initialize(),force):_},force.y=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}},60721:function(i,o,s){"use strict";function formatDecimalParts(i,o){if((s=(i=o?i.toExponential(o-1):i.toExponential()).indexOf("e"))<0)return null;var s,x=i.slice(0,s);return[x.length>1?x[0]+x.slice(2):x,+i.slice(s+1)]}s.d(o,{WU:function(){return F},FF:function(){return locale}});var x,_,F,N=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(i){var o;if(!(o=N.exec(i)))throw Error("invalid format: "+i);return new FormatSpecifier({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}function FormatSpecifier(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}function formatRounded(i,o){var s=formatDecimalParts(i,o);if(!s)return i+"";var x=s[0],_=s[1];return _<0?"0."+Array(-_).join("0")+x:x.length>_+1?x.slice(0,_+1)+"."+x.slice(_+1):x+Array(_-x.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var j={"%":function(i,o){return(100*i).toFixed(o)},b:function(i){return Math.round(i).toString(2)},c:function(i){return i+""},d:function(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)},e:function(i,o){return i.toExponential(o)},f:function(i,o){return i.toFixed(o)},g:function(i,o){return i.toPrecision(o)},o:function(i){return Math.round(i).toString(8)},p:function(i,o){return formatRounded(100*i,o)},r:formatRounded,s:function(i,o){var s=formatDecimalParts(i,o);if(!s)return i+"";var _=s[0],F=s[1],N=F-(x=3*Math.max(-8,Math.min(8,Math.floor(F/3))))+1,j=_.length;return N===j?_:N>j?_+Array(N-j+1).join("0"):N>0?_.slice(0,N)+"."+_.slice(N):"0."+Array(1-N).join("0")+formatDecimalParts(i,Math.max(0,o+N-1))[0]},X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}};function identity(i){return i}var G=Array.prototype.map,Z=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function locale(i){var o,s,_,F=void 0===i.grouping||void 0===i.thousands?identity:(o=G.call(i.grouping,Number),s=i.thousands+"",function(i,x){for(var _=i.length,F=[],N=0,j=o[0],G=0;_>0&&j>0&&(G+j+1>x&&(j=Math.max(1,x-G)),F.push(i.substring(_-=j,_+j)),!((G+=j+1)>x));)j=o[N=(N+1)%o.length];return F.reverse().join(s)}),N=void 0===i.currency?"":i.currency[0]+"",X=void 0===i.currency?"":i.currency[1]+"",J=void 0===i.decimal?".":i.decimal+"",$=void 0===i.numerals?identity:(_=G.call(i.numerals,String),function(i){return i.replace(/[0-9]/g,function(i){return _[+i]})}),ee=void 0===i.percent?"%":i.percent+"",et=void 0===i.minus?"-":i.minus+"",er=void 0===i.nan?"NaN":i.nan+"";function newFormat(i){var o=(i=formatSpecifier(i)).fill,s=i.align,_=i.sign,G=i.symbol,en=i.zero,ei=i.width,eo=i.comma,es=i.precision,el=i.trim,ec=i.type;"n"===ec?(eo=!0,ec="g"):j[ec]||(void 0===es&&(es=12),el=!0,ec="g"),(en||"0"===o&&"="===s)&&(en=!0,o="0",s="=");var eu="$"===G?N:"#"===G&&/[boxX]/.test(ec)?"0"+ec.toLowerCase():"",ef="$"===G?X:/[%p]/.test(ec)?ee:"",eh=j[ec],ed=/[defgprs%]/.test(ec);function format(i){var N,j,G,X=eu,ee=ef;if("c"===ec)ee=eh(i)+ee,i="";else{var ep=(i=+i)<0||1/i<0;if(i=isNaN(i)?er:eh(Math.abs(i),es),el&&(i=function(i){v:for(var o,s=i.length,x=1,_=-1;x<s;++x)switch(i[x]){case".":_=o=x;break;case"0":0===_&&(_=x),o=x;break;default:if(!+i[x])break v;_>0&&(_=0)}return _>0?i.slice(0,_)+i.slice(o+1):i}(i)),ep&&0==+i&&"+"!==_&&(ep=!1),X=(ep?"("===_?_:et:"-"===_||"("===_?"":_)+X,ee=("s"===ec?Z[8+x/3]:"")+ee+(ep&&"("===_?")":""),ed){for(N=-1,j=i.length;++N<j;)if(48>(G=i.charCodeAt(N))||G>57){ee=(46===G?J+i.slice(N+1):i.slice(N))+ee,i=i.slice(0,N);break}}}eo&&!en&&(i=F(i,1/0));var eg=X.length+i.length+ee.length,em=eg<ei?Array(ei-eg+1).join(o):"";switch(eo&&en&&(i=F(em+i,em.length?ei-ee.length:1/0),em=""),s){case"<":i=X+i+ee+em;break;case"=":i=X+em+i+ee;break;case"^":i=em.slice(0,eg=em.length>>1)+X+i+ee+em.slice(eg);break;default:i=em+X+i+ee}return $(i)}return es=void 0===es?6:/[gprs]/.test(ec)?Math.max(1,Math.min(21,es)):Math.max(0,Math.min(20,es)),format.toString=function(){return i+""},format}return{format:newFormat,formatPrefix:function(i,o){var s,x=newFormat(((i=formatSpecifier(i)).type="f",i)),_=3*Math.max(-8,Math.min(8,Math.floor(((s=formatDecimalParts(Math.abs(s=o)))?s[1]:NaN)/3))),F=Math.pow(10,-_),N=Z[8+_/3];return function(i){return x(F*i)+N}}}}F=(_=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,_.formatPrefix},65704:function(i,o,s){"use strict";s.r(o),s.d(o,{geoAiry:function(){return airy},geoAiryRaw:function(){return airyRaw},geoAitoff:function(){return aitoff},geoAitoffRaw:function(){return aitoffRaw},geoArmadillo:function(){return armadillo},geoArmadilloRaw:function(){return armadilloRaw},geoAugust:function(){return august},geoAugustRaw:function(){return augustRaw},geoBaker:function(){return baker},geoBakerRaw:function(){return bakerRaw},geoBerghaus:function(){return berghaus},geoBerghausRaw:function(){return berghausRaw},geoBertin1953:function(){return bertin},geoBertin1953Raw:function(){return bertin1953Raw},geoBoggs:function(){return boggs},geoBoggsRaw:function(){return boggsRaw},geoBonne:function(){return bonne},geoBonneRaw:function(){return bonneRaw},geoBottomley:function(){return bottomley},geoBottomleyRaw:function(){return bottomleyRaw},geoBromley:function(){return bromley},geoBromleyRaw:function(){return e_},geoChamberlin:function(){return chamberlin},geoChamberlinAfrica:function(){return chamberlinAfrica},geoChamberlinRaw:function(){return chamberlinRaw},geoCollignon:function(){return collignon},geoCollignonRaw:function(){return collignonRaw},geoCraig:function(){return craig},geoCraigRaw:function(){return craigRaw},geoCraster:function(){return craster},geoCrasterRaw:function(){return crasterRaw},geoCylindricalEqualArea:function(){return cylindricalEqualArea},geoCylindricalEqualAreaRaw:function(){return cylindricalEqualAreaRaw},geoCylindricalStereographic:function(){return cylindricalStereographic},geoCylindricalStereographicRaw:function(){return cylindricalStereographicRaw},geoEckert1:function(){return eckert1},geoEckert1Raw:function(){return eckert1Raw},geoEckert2:function(){return eckert2},geoEckert2Raw:function(){return eckert2Raw},geoEckert3:function(){return eckert3},geoEckert3Raw:function(){return eckert3Raw},geoEckert4:function(){return eckert4},geoEckert4Raw:function(){return eckert4Raw},geoEckert5:function(){return eckert5},geoEckert5Raw:function(){return eckert5Raw},geoEckert6:function(){return eckert6},geoEckert6Raw:function(){return eckert6Raw},geoEisenlohr:function(){return eisenlohr},geoEisenlohrRaw:function(){return eisenlohrRaw},geoFahey:function(){return fahey},geoFaheyRaw:function(){return faheyRaw},geoFoucaut:function(){return foucaut},geoFoucautRaw:function(){return foucautRaw},geoFoucautSinusoidal:function(){return foucautSinusoidal},geoFoucautSinusoidalRaw:function(){return foucautSinusoidalRaw},geoGilbert:function(){return gilbert},geoGingery:function(){return gingery},geoGingeryRaw:function(){return gingeryRaw},geoGinzburg4:function(){return ginzburg4},geoGinzburg4Raw:function(){return eE},geoGinzburg5:function(){return ginzburg5},geoGinzburg5Raw:function(){return eL},geoGinzburg6:function(){return ginzburg6},geoGinzburg6Raw:function(){return eP},geoGinzburg8:function(){return ginzburg8},geoGinzburg8Raw:function(){return ginzburg8Raw},geoGinzburg9:function(){return ginzburg9},geoGinzburg9Raw:function(){return eI},geoGringorten:function(){return gringorten},geoGringortenQuincuncial:function(){return quincuncial_gringorten},geoGringortenRaw:function(){return gringortenRaw},geoGuyou:function(){return guyou},geoGuyouRaw:function(){return guyouRaw},geoHammer:function(){return hammer},geoHammerRaw:function(){return hammerRaw},geoHammerRetroazimuthal:function(){return hammerRetroazimuthal},geoHammerRetroazimuthalRaw:function(){return hammerRetroazimuthalRaw},geoHealpix:function(){return healpix},geoHealpixRaw:function(){return healpixRaw},geoHill:function(){return hill},geoHillRaw:function(){return hillRaw},geoHomolosine:function(){return homolosine},geoHomolosineRaw:function(){return homolosineRaw},geoHufnagel:function(){return hufnagel},geoHufnagelRaw:function(){return hufnagelRaw},geoHyperelliptical:function(){return hyperelliptical},geoHyperellipticalRaw:function(){return hyperellipticalRaw},geoInterrupt:function(){return interrupted},geoInterruptedBoggs:function(){return interrupted_boggs},geoInterruptedHomolosine:function(){return interrupted_homolosine},geoInterruptedMollweide:function(){return interrupted_mollweide},geoInterruptedMollweideHemispheres:function(){return mollweideHemispheres},geoInterruptedQuarticAuthalic:function(){return quarticAuthalic},geoInterruptedSinuMollweide:function(){return interrupted_sinuMollweide},geoInterruptedSinusoidal:function(){return interrupted_sinusoidal},geoKavrayskiy7:function(){return kavrayskiy7},geoKavrayskiy7Raw:function(){return kavrayskiy7Raw},geoLagrange:function(){return lagrange},geoLagrangeRaw:function(){return lagrangeRaw},geoLarrivee:function(){return larrivee},geoLarriveeRaw:function(){return larriveeRaw},geoLaskowski:function(){return laskowski},geoLaskowskiRaw:function(){return laskowskiRaw},geoLittrow:function(){return littrow},geoLittrowRaw:function(){return littrowRaw},geoLoximuthal:function(){return loximuthal},geoLoximuthalRaw:function(){return loximuthalRaw},geoMiller:function(){return miller},geoMillerRaw:function(){return millerRaw},geoModifiedStereographic:function(){return modifiedStereographic},geoModifiedStereographicAlaska:function(){return modifiedStereographicAlaska},geoModifiedStereographicGs48:function(){return modifiedStereographicGs48},geoModifiedStereographicGs50:function(){return modifiedStereographicGs50},geoModifiedStereographicLee:function(){return modifiedStereographicLee},geoModifiedStereographicMiller:function(){return modifiedStereographicMiller},geoModifiedStereographicRaw:function(){return modifiedStereographicRaw},geoMollweide:function(){return mollweide},geoMollweideRaw:function(){return ex},geoMtFlatPolarParabolic:function(){return mtFlatPolarParabolic},geoMtFlatPolarParabolicRaw:function(){return mtFlatPolarParabolicRaw},geoMtFlatPolarQuartic:function(){return mtFlatPolarQuartic},geoMtFlatPolarQuarticRaw:function(){return mtFlatPolarQuarticRaw},geoMtFlatPolarSinusoidal:function(){return mtFlatPolarSinusoidal},geoMtFlatPolarSinusoidalRaw:function(){return mtFlatPolarSinusoidalRaw},geoNaturalEarth:function(){return eQ.Z},geoNaturalEarth2:function(){return naturalEarth2},geoNaturalEarth2Raw:function(){return naturalEarth2Raw},geoNaturalEarthRaw:function(){return eQ.K},geoNellHammer:function(){return nellHammer},geoNellHammerRaw:function(){return nellHammerRaw},geoNicolosi:function(){return nicolosi},geoNicolosiRaw:function(){return nicolosiRaw},geoPatterson:function(){return patterson},geoPattersonRaw:function(){return pattersonRaw},geoPeirceQuincuncial:function(){return peirce},geoPierceQuincuncial:function(){return peirce},geoPolyconic:function(){return polyconic},geoPolyconicRaw:function(){return polyconicRaw},geoPolyhedral:function(){return polyhedral},geoPolyhedralButterfly:function(){return butterfly},geoPolyhedralCollignon:function(){return polyhedral_collignon},geoPolyhedralWaterman:function(){return waterman},geoProject:function(){return project},geoQuantize:function(){return quantize},geoQuincuncial:function(){return quincuncial},geoRectangularPolyconic:function(){return rectangularPolyconic},geoRectangularPolyconicRaw:function(){return rectangularPolyconicRaw},geoRobinson:function(){return robinson},geoRobinsonRaw:function(){return robinsonRaw},geoSatellite:function(){return satellite},geoSatelliteRaw:function(){return satelliteRaw},geoSinuMollweide:function(){return sinuMollweide},geoSinuMollweideRaw:function(){return sinuMollweideRaw},geoSinusoidal:function(){return sinusoidal},geoSinusoidalRaw:function(){return sinusoidalRaw},geoStitch:function(){return stitch},geoTimes:function(){return times},geoTimesRaw:function(){return timesRaw},geoTwoPointAzimuthal:function(){return twoPointAzimuthal},geoTwoPointAzimuthalRaw:function(){return twoPointAzimuthalRaw},geoTwoPointAzimuthalUsa:function(){return twoPointAzimuthalUsa},geoTwoPointEquidistant:function(){return twoPointEquidistant},geoTwoPointEquidistantRaw:function(){return twoPointEquidistantRaw},geoTwoPointEquidistantUsa:function(){return twoPointEquidistantUsa},geoVanDerGrinten:function(){return vanDerGrinten},geoVanDerGrinten2:function(){return vanDerGrinten2},geoVanDerGrinten2Raw:function(){return vanDerGrinten2Raw},geoVanDerGrinten3:function(){return vanDerGrinten3},geoVanDerGrinten3Raw:function(){return vanDerGrinten3Raw},geoVanDerGrinten4:function(){return vanDerGrinten4},geoVanDerGrinten4Raw:function(){return vanDerGrinten4Raw},geoVanDerGrintenRaw:function(){return vanDerGrintenRaw},geoWagner:function(){return wagner},geoWagner4:function(){return wagner4},geoWagner4Raw:function(){return ta},geoWagner6:function(){return wagner6},geoWagner6Raw:function(){return wagner6Raw},geoWagner7:function(){return wagner7},geoWagnerRaw:function(){return wagnerRaw},geoWiechel:function(){return wiechel},geoWiechelRaw:function(){return wiechelRaw},geoWinkel3:function(){return winkel3},geoWinkel3Raw:function(){return winkel3Raw}});var x=s(15002),_=Math.abs,F=Math.atan,N=Math.atan2,j=Math.cos,G=Math.exp,Z=Math.floor,X=Math.log,J=Math.max,$=Math.min,ee=Math.pow,et=Math.round,er=Math.sign||function(i){return i>0?1:i<0?-1:0},en=Math.sin,ei=Math.tan,eo=Math.PI,es=eo/2,el=eo/4,ec=Math.SQRT1_2,eu=sqrt(2),ef=sqrt(eo),eh=2*eo,ed=180/eo,ep=eo/180;function asin(i){return i>1?es:i<-1?-es:Math.asin(i)}function acos(i){return i>1?0:i<-1?eo:Math.acos(i)}function sqrt(i){return i>0?Math.sqrt(i):0}function sinh(i){return(G(i)-G(-i))/2}function cosh(i){return(G(i)+G(-i))/2}function airyRaw(i){var o=ei(i/2),s=2*X(j(i/2))/(o*o);function forward(i,o){var x=j(i),_=j(o),F=en(o),N=_*x,G=-((1-N?X((1+N)/2)/(1-N):-.5)+s/(1+N));return[G*_*en(i),G*F]}return forward.invert=function(o,x){var F,G=sqrt(o*o+x*x),Z=-i/2,J=50;if(!G)return[0,0];do{var $=Z/2,ee=j($),et=en($),er=et/ee,ei=-X(_(ee));Z-=F=(2/er*ei-s*er-G)/(-ei/(et*et)+1-s/(2*ee*ee))*(ee<0?.7:1)}while(_(F)>1e-6&&--J>0);var eo=en(Z);return[N(o*eo,G*j(Z)),asin(x*eo/G)]},forward}function airy(){var i=es,o=(0,x.r)(airyRaw),s=o(i);return s.radius=function(s){return arguments.length?o(i=s*ep):i*ed},s.scale(179.976).clipAngle(147)}function aitoffRaw(i,o){var s,x=j(o),_=(s=acos(x*j(i/=2)))?s/Math.sin(s):1;return[2*x*en(i)*_,en(o)*_]}function aitoff(){return(0,x.Z)(aitoffRaw).scale(152.63)}function armadilloRaw(i){var o=en(i),s=j(i),x=i>=0?1:-1,F=ei(x*i),G=(1+o-s)/2;function forward(i,_){var Z=j(_),X=j(i/=2);return[(1+Z)*en(i),(x*_>-N(X,F)-.001?0:-(10*x))+G+en(_)*s-(1+Z)*o*X]}return forward.invert=function(i,Z){var X=0,J=0,$=50;do{var ee=j(X),et=en(X),er=j(J),ei=en(J),eo=1+er,es=eo*et-i,el=G+ei*s-eo*o*ee-Z,ec=eo*ee/2,eu=-et*ei,ef=o*eo*et/2,eh=s*er+o*ee*ei,ed=eu*ef-eh*ec,ep=(el*eu-es*eh)/ed/2,eg=(es*ef-el*ec)/ed;_(eg)>2&&(eg/=2),X-=ep,J-=eg}while((_(ep)>1e-6||_(eg)>1e-6)&&--$>0);return x*J>-N(j(X),F)-.001?[2*X,J]:null},forward}function armadillo(){var i=20*ep,o=i>=0?1:-1,s=ei(o*i),_=(0,x.r)(armadilloRaw),F=_(i),G=F.stream;return F.parallel=function(x){return arguments.length?(s=ei((o=(i=x*ep)>=0?1:-1)*i),_(i)):i*ed},F.stream=function(x){var _=F.rotate(),Z=G(x),X=(F.rotate([0,0]),G(x)),J=F.precision();return F.rotate(_),Z.sphere=function(){X.polygonStart(),X.lineStart();for(var x=-180*o;o*x<180;x+=90*o)X.point(x,90*o);if(i)for(;o*(x-=3*o*J)>=-180;)X.point(x,-(o*N(j(x*ep/2),s))*ed);X.lineEnd(),X.polygonEnd()},Z},F.scale(218.695).center([0,28.0974])}function augustRaw(i,o){var s=ei(o/2),x=sqrt(1-s*s),_=1+x*j(i/=2),F=en(i)*x/_,N=s/_,G=F*F,Z=N*N;return[4/3*F*(3+G-3*Z),4/3*N*(3+3*G-Z)]}function august(){return(0,x.Z)(augustRaw).scale(66.1603)}aitoffRaw.invert=function(i,o){if(!(i*i+4*o*o>eo*eo+1e-6)){var s=i,x=o,F=25;do{var N,G=en(s),Z=en(s/2),X=j(s/2),J=en(x),$=j(x),ee=en(2*x),et=J*J,er=$*$,ei=Z*Z,es=1-er*X*X,el=es?acos($*X)*sqrt(N=1/es):N=0,ec=2*el*$*Z-i,eu=el*J-o,ef=N*(er*ei+el*$*X*et),eh=N*(.5*G*ee-2*el*J*Z),ed=.25*N*(ee*Z-el*J*er*G),ep=N*(et*X+el*ei*$),eg=eh*ed-ep*ef;if(!eg)break;var em=(eu*eh-ec*ep)/eg,ey=(ec*ed-eu*ef)/eg;s-=em,x-=ey}while((_(em)>1e-6||_(ey)>1e-6)&&--F>0);return[s,x]}},augustRaw.invert=function(i,o){if(o*=3/8,!(i*=3/8)&&_(o)>1)return null;var s,x,F=1+i*i+o*o,G=sqrt((F-sqrt(F*F-4*o*o))/2),Z=asin(G)/3,J=G?X((s=_(o/G))+sqrt(s*s-1))/3:X((x=_(i))+sqrt(x*x+1))/3,$=j(Z),ee=cosh(J),et=ee*ee-$*$;return[2*er(i)*N(sinh(J)*$,.25-et),2*er(o)*N(ee*en(Z),.25+et)]};var eg=sqrt(8),em=X(1+eu);function bakerRaw(i,o){var s=_(o);return s<el?[i,X(ei(el+o/2))]:[i*j(s)*(2*eu-1/en(s)),er(o)*(2*eu*(s-el)-X(ei(s/2)))]}function baker(){return(0,x.Z)(bakerRaw).scale(112.314)}bakerRaw.invert=function(i,o){if((x=_(o))<em)return[i,2*F(G(o))-es];var s,x,N=el,Z=25;do{var J=j(N/2),$=ei(N/2);N-=s=(eg*(N-el)-X($)-x)/(eg-J*J/(2*$))}while(_(s)>1e-12&&--Z>0);return[i/(j(N)*(eg-1/en(N))),er(o)*N]};var ey=s(17889);function berghausRaw(i){var o=2*eo/i;function forward(i,s){var x=(0,ey.N)(i,s);if(_(i)>es){var F=N(x[1],x[0]),G=sqrt(x[0]*x[0]+x[1]*x[1]),Z=o*et((F-es)/o)+es,X=N(en(F-=Z),2-j(F));F=Z+asin(eo/G*en(X))-X,x[0]=G*j(F),x[1]=G*en(F)}return x}return forward.invert=function(i,s){var x=sqrt(i*i+s*s);if(x>es){var _=N(s,i),G=o*et((_-es)/o)+es,Z=_>G?-1:1,X=x*j(G-_),J=1/ei(Z*acos((X-eo)/sqrt(eo*(eo-2*X)+x*x)));i=x*j(_=G+2*F((J+Z*sqrt(J*J-3))/3)),s=x*en(_)}return ey.N.invert(i,s)},forward}function berghaus(){var i=5,o=(0,x.r)(berghausRaw),s=o(i),_=s.stream,F=-j(.01*ep),G=en(.01*ep);return s.lobes=function(s){return arguments.length?o(i=+s):i},s.stream=function(o){var x=s.rotate(),Z=_(o),X=(s.rotate([0,0]),_(o));return s.rotate(x),Z.sphere=function(){X.polygonStart(),X.lineStart();for(var o=0,s=360/i,x=2*eo/i,_=90-180/i,Z=es;o<i;++o,_-=s,Z-=x)X.point(N(G*j(Z),F)*ed,asin(G*en(Z))*ed),_<-90?(X.point(-90,-180-_-.01),X.point(-90,-180-_+.01)):(X.point(90,_+.01),X.point(90,_-.01));X.lineEnd(),X.polygonEnd()},Z},s.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ev=s(12956);function hammerRaw(i,o){if(arguments.length<2&&(o=i),1===o)return ev.l;if(o===1/0)return hammerQuarticAuthalicRaw;function forward(s,x){var _=(0,ev.l)(s/o,x);return _[0]*=i,_}return forward.invert=function(s,x){var _=ev.l.invert(s/i,x);return _[0]*=o,_},forward}function hammerQuarticAuthalicRaw(i,o){return[i*j(o)/j(o/=2),2*en(o)]}function hammer(){var i=2,o=(0,x.r)(hammerRaw),s=o(i);return s.coefficient=function(s){return arguments.length?o(i=+s):i},s.scale(169.529)}function solve(i,o,s){var x,F,N,j=100;s=void 0===s?0:+s,o=+o;do(F=i(s))===(N=i(s+1e-6))&&(N=F+1e-6),s-=x=-.000001*(F-o)/(F-N);while(j-- >0&&_(x)>1e-6);return j<0?NaN:s}function solve2d(i,o,s){return void 0===o&&(o=40),void 0===s&&(s=1e-12),function(x,F,N,j){var G,Z,X;N=void 0===N?0:+N,j=void 0===j?0:+j;for(var J=0;J<o;J++){var $=i(N,j),ee=$[0]-x,et=$[1]-F;if(_(ee)<s&&_(et)<s)break;var er=ee*ee+et*et;if(er>G){N-=Z/=2,j-=X/=2;continue}G=er;var en=(N>0?-1:1)*s,ei=(j>0?-1:1)*s,eo=i(N+en,j),es=i(N,j+ei),el=(eo[0]-$[0])/en,ec=(eo[1]-$[1])/en,eu=(es[0]-$[0])/ei,ef=(es[1]-$[1])/ei,eh=ef*el-ec*eu,ed=(.5>_(eh)?.5:1)/eh;if(Z=(et*eu-ee*ef)*ed,X=(ee*ec-et*el)*ed,N+=Z,j+=X,_(Z)<s&&_(X)<s)break}return[N,j]}}function bertin1953Raw(){var i=hammerRaw(1.68,2);function forward(o,s){if(o+s<-1.4){var x=(o-s+1.6)*(o+s+1.4)/8;o+=x,s-=.8*x*en(s+eo/2)}var _=i(o,s),F=(1-j(o*s))/12;return _[1]<0&&(_[0]*=1+F),_[1]>0&&(_[1]*=1+F/1.5*_[0]*_[0]),_}return forward.invert=solve2d(forward),forward}function bertin(){return(0,x.Z)(bertin1953Raw()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function mollweideBromleyTheta(i,o){var s,x=i*en(o),F=30;do o-=s=(o+en(o)-x)/(1+j(o));while(_(s)>1e-6&&--F>0);return o/2}function mollweideBromleyRaw(i,o,s){function forward(x,_){return[i*x*j(_=mollweideBromleyTheta(s,_)),o*en(_)]}return forward.invert=function(x,_){return[x/(i*j(_=asin(_/o))),asin((2*_+en(2*_))/s)]},forward}hammerQuarticAuthalicRaw.invert=function(i,o){var s=2*asin(o/2);return[i*j(s/2)/j(s),s]};var ex=mollweideBromleyRaw(eu/es,eu,eo);function mollweide(){return(0,x.Z)(ex).scale(169.529)}function boggsRaw(i,o){var s=mollweideBromleyTheta(eo,o);return[2.00276*i/(1/j(o)+1.11072/j(s)),(o+eu*en(s))/2.00276]}function boggs(){return(0,x.Z)(boggsRaw).scale(160.857)}function parallel1(i){var o=0,s=(0,x.r)(i),_=s(o);return _.parallel=function(i){return arguments.length?s(o=i*ep):o*ed},_}function sinusoidalRaw(i,o){return[i*j(o),o]}function sinusoidal(){return(0,x.Z)(sinusoidalRaw).scale(152.63)}function bonneRaw(i){if(!i)return sinusoidalRaw;var o=1/ei(i);function forward(s,x){var _=o+i-x,F=_?s*j(x)/_:_;return[_*en(F),o-_*j(F)]}return forward.invert=function(s,x){var _=sqrt(s*s+(x=o-x)*x),F=o+i-_;return[_/j(F)*N(s,x),F]},forward}function bonne(){return parallel1(bonneRaw).scale(123.082).center([0,26.1441]).parallel(45)}function bottomleyRaw(i){function forward(o,s){var x=es-s,_=x?o*i*en(x)/x:x;return[x*en(_)/i,es-x*j(_)]}return forward.invert=function(o,s){var x=o*i,_=es-s,F=sqrt(x*x+_*_),j=N(x,_);return[(F?F/en(F):1)*j/i,es-F]},forward}function bottomley(){var i=.5,o=(0,x.r)(bottomleyRaw),s=o(i);return s.fraction=function(s){return arguments.length?o(i=+s):i},s.scale(158.837)}boggsRaw.invert=function(i,o){var s,x,F=2.00276*o,N=o<0?-el:el,G=25;do x=F-eu*en(N),N-=s=(en(2*N)+2*N-eo*en(x))/(2*j(2*N)+2+eo*j(x)*eu*j(N));while(_(s)>1e-6&&--G>0);return[i*(1/j(x=F-eu*en(N))+1.11072/j(N))/2.00276,x]},sinusoidalRaw.invert=function(i,o){return[i/j(o),o]};var e_=mollweideBromleyRaw(1,4/eo,eo);function bromley(){return(0,x.Z)(e_).scale(152.63)}var ew=s(66624),eT=s(49386);function distance(i,o,s,x,F,G){var Z,X=j(G);if(_(i)>1||_(G)>1)Z=acos(s*F+o*x*X);else{var J=en(i/2),$=en(G/2);Z=2*asin(sqrt(J*J+o*x*$*$))}return _(Z)>1e-6?[Z,N(x*en(G),o*F-s*x*X)]:[0,0]}function angle(i,o,s){return acos((i*i+o*o-s*s)/(2*i*o))}function chamberlinRaw(i,o,s){for(var x,_=[[i[0],i[1],en(i[1]),j(i[1])],[o[0],o[1],en(o[1]),j(o[1])],[s[0],s[1],en(s[1]),j(s[1])]],F=_[2],N=0;N<3;++N,F=x)x=_[N],F.v=distance(x[1]-F[1],F[3],F[2],x[3],x[2],x[0]-F[0]),F.point=[0,0];var G=angle(_[0].v[0],_[2].v[0],_[1].v[0]),X=angle(_[0].v[0],_[1].v[0],_[2].v[0]),J=eo-G;_[2].point[1]=0,_[0].point[0]=-(_[1].point[0]=_[0].v[0]/2);var $=[_[2].point[0]=_[0].point[0]+_[2].v[0]*j(G),2*(_[0].point[1]=_[1].point[1]=_[2].v[0]*en(G))];return function(i,o){var s,x=en(o),F=j(o),N=[,,,];for(s=0;s<3;++s){var G,ee=_[s];if(N[s]=distance(o-ee[1],ee[3],ee[2],F,x,i-ee[0]),!N[s][0])return ee.point;N[s][1]=(G=N[s][1]-ee.v[1])-2*eo*Z((G+eo)/(2*eo))}var et=$.slice();for(s=0;s<3;++s){var er=2==s?0:s+1,ei=angle(_[s].v[0],N[s][0],N[er][0]);N[s][1]<0&&(ei=-ei),s?1==s?(ei=X-ei,et[0]-=N[s][0]*j(ei),et[1]-=N[s][0]*en(ei)):(ei=J-ei,et[0]+=N[s][0]*j(ei),et[1]+=N[s][0]*en(ei)):(et[0]+=N[s][0]*j(ei),et[1]-=N[s][0]*en(ei))}return et[0]/=3,et[1]/=3,et}}function pointRadians(i){return i[0]*=ep,i[1]*=ep,i}function chamberlinAfrica(){return chamberlin([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function chamberlin(i,o,s){var _=(0,ew.Z)({type:"MultiPoint",coordinates:[i,o,s]}),F=[-_[0],-_[1]],N=(0,eT.Z)(F),j=chamberlinRaw(pointRadians(N(i)),pointRadians(N(o)),pointRadians(N(s)));j.invert=solve2d(j);var G=(0,x.Z)(j).rotate(F),Z=G.center;return delete G.rotate,G.center=function(i){return arguments.length?Z(N(i)):N.invert(Z())},G.clipAngle(90)}function collignonRaw(i,o){var s=sqrt(1-en(o));return[2/ef*i*s,ef*(1-s)]}function collignon(){return(0,x.Z)(collignonRaw).scale(95.6464).center([0,30])}function craigRaw(i){var o=ei(i);function forward(i,s){return[i,(i?i/en(i):1)*(en(s)*j(i)-o*j(s))]}return forward.invert=o?function(i,s){i&&(s*=en(i)/i);var x=j(i);return[i,2*N(sqrt(x*x+o*o-s*s)-x,o-s)]}:function(i,o){return[i,asin(i?o*ei(i)/i:o)]},forward}function craig(){return parallel1(craigRaw).scale(249.828).clipAngle(90)}collignonRaw.invert=function(i,o){var s=(s=o/ef-1)*s;return[s>0?i*sqrt(eo/s)/2:0,asin(1-s)]};var ek=sqrt(3);function crasterRaw(i,o){return[ek*i*(2*j(2*o/3)-1)/ef,ek*ef*en(o/3)]}function craster(){return(0,x.Z)(crasterRaw).scale(156.19)}function cylindricalEqualAreaRaw(i){var o=j(i);function forward(i,s){return[i*o,en(s)/o]}return forward.invert=function(i,s){return[i/o,asin(s*o)]},forward}function cylindricalEqualArea(){return parallel1(cylindricalEqualAreaRaw).parallel(38.58).scale(195.044)}function cylindricalStereographicRaw(i){var o=j(i);function forward(i,s){return[i*o,(1+o)*ei(s/2)]}return forward.invert=function(i,s){return[i/o,2*F(s/(1+o))]},forward}function cylindricalStereographic(){return parallel1(cylindricalStereographicRaw).scale(124.75)}function eckert1Raw(i,o){var s=sqrt(8/(3*eo));return[s*i*(1-_(o)/eo),s*o]}function eckert1(){return(0,x.Z)(eckert1Raw).scale(165.664)}function eckert2Raw(i,o){var s=sqrt(4-3*en(_(o)));return[2/sqrt(6*eo)*i*s,er(o)*sqrt(2*eo/3)*(2-s)]}function eckert2(){return(0,x.Z)(eckert2Raw).scale(165.664)}function eckert3Raw(i,o){var s=sqrt(eo*(4+eo));return[2/s*i*(1+sqrt(1-4*o*o/(eo*eo))),4/s*o]}function eckert3(){return(0,x.Z)(eckert3Raw).scale(180.739)}function eckert4Raw(i,o){var s=(2+es)*en(o);o/=2;for(var x=0,F=1/0;x<10&&_(F)>1e-6;x++){var N=j(o);o-=F=(o+en(o)*(N+2)-s)/(2*N*(1+N))}return[2/sqrt(eo*(4+eo))*i*(1+j(o)),2*sqrt(eo/(4+eo))*en(o)]}function eckert4(){return(0,x.Z)(eckert4Raw).scale(180.739)}function eckert5Raw(i,o){return[i*(1+j(o))/sqrt(2+eo),2*o/sqrt(2+eo)]}function eckert5(){return(0,x.Z)(eckert5Raw).scale(173.044)}function eckert6Raw(i,o){for(var s=(1+es)*en(o),x=0,F=1/0;x<10&&_(F)>1e-6;x++)o-=F=(o+en(o)-s)/(1+j(o));return s=sqrt(2+eo),[i*(1+j(o))/s,2*o/s]}function eckert6(){return(0,x.Z)(eckert6Raw).scale(173.044)}crasterRaw.invert=function(i,o){var s=3*asin(o/(ek*ef));return[ef*i/(ek*(2*j(2*s/3)-1)),s]},eckert1Raw.invert=function(i,o){var s=sqrt(8/(3*eo)),x=o/s;return[i/(s*(1-_(x)/eo)),x]},eckert2Raw.invert=function(i,o){var s=2-_(o)/sqrt(2*eo/3);return[i*sqrt(6*eo)/(2*s),er(o)*asin((4-s*s)/3)]},eckert3Raw.invert=function(i,o){var s=sqrt(eo*(4+eo))/2;return[i*s/(1+sqrt(1-o*o*(4+eo)/(4*eo))),o*s/2]},eckert4Raw.invert=function(i,o){var s=o*sqrt((4+eo)/eo)/2,x=asin(s),_=j(x);return[i/(2/sqrt(eo*(4+eo))*(1+_)),asin((x+s*(_+2))/(2+es))]},eckert5Raw.invert=function(i,o){var s=sqrt(2+eo),x=o*s/2;return[s*i/(1+j(x)),x]},eckert6Raw.invert=function(i,o){var s=1+es,x=sqrt(s/2);return[2*i*x/(1+j(o*=x)),asin((o+en(o))/s)]};var eA=3+2*eu;function eisenlohrRaw(i,o){var s=en(i/=2),x=j(i),_=sqrt(j(o)),N=j(o/=2),G=en(o)/(N+eu*x*_),Z=sqrt(2/(1+G*G)),J=sqrt((eu*N+(x+s)*_)/(eu*N+(x-s)*_));return[eA*(Z*(J-1/J)-2*X(J)),eA*(Z*G*(J+1/J)-2*F(G))]}function eisenlohr(){return(0,x.Z)(eisenlohrRaw).scale(62.5271)}eisenlohrRaw.invert=function(i,o){if(!(s=augustRaw.invert(i/1.2,1.065*o)))return null;var s,x=s[0],N=s[1],G=20;i/=eA,o/=eA;do{var Z=x/2,ee=N/2,et=en(Z),er=j(Z),ei=en(ee),eo=j(ee),el=j(N),ef=sqrt(el),eh=ei/(eo+eu*er*ef),ed=eh*eh,ep=sqrt(2/(1+ed)),eg=(eu*eo+(er+et)*ef)/(eu*eo+(er-et)*ef),em=sqrt(eg),ey=em-1/em,ev=em+1/em,ex=ep*ey-2*X(em)-i,e_=ep*eh*ev-2*F(eh)-o,ew=ei&&ec*ef*et*ed/ei,eT=(eu*er*eo+ef)/(2*(eo+eu*er*ef)*(eo+eu*er*ef)*ef),ek=-.5*eh*ep*ep*ep,eS=ek*ew,eM=ek*eT,eC=(eC=2*eo+eu*ef*(er-et))*eC*em,eE=(eu*er*eo*ef+el)/eC,eL=-(eu*et*ei)/(ef*eC),eP=ey*eS-2*eE/em+ep*(eE+eE/eg),eI=ey*eM-2*eL/em+ep*(eL+eL/eg),eO=eh*ev*eS-2*ew/(1+ed)+ep*ev*ew+ep*eh*(eE-eE/eg),eD=eh*ev*eM-2*eT/(1+ed)+ep*ev*eT+ep*eh*(eL-eL/eg),eR=eI*eO-eD*eP;if(!eR)break;var eB=(e_*eI-ex*eD)/eR,ez=(ex*eO-e_*eP)/eR;x-=eB,N=J(-es,$(es,N-ez))}while((_(eB)>1e-6||_(ez)>1e-6)&&--G>0);return 1e-6>_(_(N)-es)?[0,N]:G&&[x,N]};var eS=j(35*ep);function faheyRaw(i,o){var s=ei(o/2);return[i*eS*sqrt(1-s*s),(1+eS)*s]}function fahey(){return(0,x.Z)(faheyRaw).scale(137.152)}function foucautRaw(i,o){var s=o/2,x=j(s);return[2*i/ef*j(o)*x*x,ef*ei(s)]}function foucaut(){return(0,x.Z)(foucautRaw).scale(135.264)}function foucautSinusoidalRaw(i){var o=1-i,s=raw(eo,0)[0]-raw(-eo,0)[0],x=sqrt(2*(raw(0,es)[1]-raw(0,-es)[1])/s);function raw(s,x){var _=j(x),F=en(x);return[_/(o+i*_)*s,o*x+i*F]}function forward(i,o){var s=raw(i,o);return[s[0]*x,s[1]/x]}function forwardMeridian(i){return forward(0,i)[1]}return forward.invert=function(s,_){var F=solve(forwardMeridian,_);return[s/x*(i+o/j(F)),F]},forward}function foucautSinusoidal(){var i=.5,o=(0,x.r)(foucautSinusoidalRaw),s=o(i);return s.alpha=function(s){return arguments.length?o(i=+s):i},s.scale(168.725)}faheyRaw.invert=function(i,o){var s=o/(1+eS);return[i&&i/(eS*sqrt(1-s*s)),2*F(s)]},foucautRaw.invert=function(i,o){var s=F(o/ef),x=j(s),_=2*s;return[i*ef/2/(j(_)*x*x),_]};var eM=s(57962),eC=s(97492);function gilbertForward(i){return[i[0]/2,asin(ei(i[1]/2*ep))*ed]}function gilbertInvert(i){return[2*i[0],2*F(en(i[1]*ep))*ed]}function gilbert(i){null==i&&(i=eM.Z);var o=i(),s=(0,eC.Z)().scale(ed).precision(0).clipAngle(null).translate([0,0]);function gilbert(i){return o(gilbertForward(i))}function property(i){gilbert[i]=function(){return arguments.length?(o[i].apply(o,arguments),gilbert):o[i]()}}return o.invert&&(gilbert.invert=function(i){return gilbertInvert(o.invert(i))}),gilbert.stream=function(i){var x=o.stream(i),_=s.stream({point:function(i,o){x.point(i/2,asin(ei(-o/2*ep))*ed)},lineStart:function(){x.lineStart()},lineEnd:function(){x.lineEnd()},polygonStart:function(){x.polygonStart()},polygonEnd:function(){x.polygonEnd()}});return _.sphere=x.sphere,_},gilbert.rotate=function(i){return arguments.length?(s.rotate(i),gilbert):s.rotate()},gilbert.center=function(i){return arguments.length?(o.center(gilbertForward(i)),gilbert):gilbertInvert(o.center())},property("angle"),property("clipAngle"),property("clipExtent"),property("fitExtent"),property("fitHeight"),property("fitSize"),property("fitWidth"),property("scale"),property("translate"),property("precision"),gilbert.scale(249.5)}function gingeryRaw(i,o){var s=2*eo/o,x=i*i;function forward(o,F){var G=(0,ey.N)(o,F),Z=G[0],X=G[1],J=Z*Z+X*X;if(J>x){var $=sqrt(J),ee=N(X,Z),er=s*et(ee/s),ei=ee-er,el=i*j(ei),ec=(i*en(ei)-ei*en(el))/(es-el),eu=gingeryLength(ei,ec),ef=(eo-i)/gingeryIntegrate(eu,el,eo);Z=$;var eh,ed=50;do Z-=eh=(i+gingeryIntegrate(eu,el,Z)*ef-$)/(eu(Z)*ef);while(_(eh)>1e-6&&--ed>0);X=ei*en(Z),Z<es&&(X-=ec*(Z-es));var ep=en(er),eg=j(er);G[0]=Z*eg-X*ep,G[1]=Z*ep+X*eg}return G}return forward.invert=function(o,F){var G=o*o+F*F;if(G>x){var Z=sqrt(G),X=N(F,o),J=s*et(X/s),$=X-J;o=Z*j($),F=Z*en($);for(var ee=o-es,er=en(o),ei=F/er,el=o<es?1/0:0,ec=10;;){var eu=i*en(ei),ef=i*j(ei),eh=en(ef),ed=es-ef,ep=(eu-ei*eh)/ed,eg=gingeryLength(ei,ep);if(1e-12>_(el)||!--ec)break;ei-=el=(ei*er-ep*ee-F)/(er-2*ee*(ed*(ef+ei*eu*j(ef)-eh)-eu*(eu-ei*eh))/(ed*ed))}o=(Z=i+gingeryIntegrate(eg,ef,o)*(eo-i)/gingeryIntegrate(eg,ef,eo))*j(X=J+ei),F=Z*en(X)}return ey.N.invert(o,F)},forward}function gingeryLength(i,o){return function(s){var x=i*j(s);return s<es&&(x-=o),sqrt(1+x*x)}}function gingeryIntegrate(i,o,s){for(var x=(s-o)/50,_=i(o)+i(s),F=1,N=o;F<50;++F)_+=2*i(N+=x);return .5*_*x}function gingery(){var i=6,o=30*ep,s=j(o),_=en(o),F=(0,x.r)(gingeryRaw),G=F(o,i),Z=G.stream,X=-j(.01*ep),J=en(.01*ep);return G.radius=function(x){return arguments.length?(s=j(o=x*ep),_=en(o),F(o,i)):o*ed},G.lobes=function(s){return arguments.length?F(o,i=+s):i},G.stream=function(o){var x=G.rotate(),F=Z(o),$=(G.rotate([0,0]),Z(o));return G.rotate(x),F.sphere=function(){$.polygonStart(),$.lineStart();for(var o=0,x=2*eo/i,F=0;o<i;++o,F-=x)$.point(N(J*j(F),X)*ed,asin(J*en(F))*ed),$.point(N(_*j(F-x/2),s)*ed,asin(_*en(F-x/2))*ed);$.lineEnd(),$.polygonEnd()},F},G.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ginzburgPolyconic(i,o,s,x,F,N,G,Z){function forward(_,X){if(!X)return[i*_/eo,0];var J=X*X,$=i+J*(o+J*(s+J*x)),ee=X*(F-1+J*(N-Z+J*G)),et=($*$+ee*ee)/(2*ee),er=_*asin($/et)/eo;return[et*en(er),X*(1+J*Z)+et*(1-j(er))]}return arguments.length<8&&(Z=0),forward.invert=function(X,J){var $,ee,et=eo*X/i,er=J,ei=50;do{var es=er*er,el=i+es*(o+es*(s+es*x)),ec=er*(F-1+es*(N-Z+es*G)),eu=el*el+ec*ec,ef=2*ec,eh=eu/ef,ed=eh*eh,ep=asin(el/eh)/eo,eg=et*ep,em=el*el,ey=(2*o+es*(4*s+6*es*x))*er,ev=F+es*(3*N+5*es*G),ex=(2*(el*ey+ec*(ev-1))*ef-eu*(2*(ev-1)))/(ef*ef),e_=j(eg),ew=en(eg),eT=eh*e_,ek=eh*ew,eA=et/eo*(1/sqrt(1-em/ed))*(ey*eh-el*ex)/ed,eS=ek-X,eM=er*(1+es*Z)+eh-eT-J,eC=ex*ew+eT*eA,eE=eT*ep,eL=1+ex-(ex*e_-ek*eA),eP=ek*ep,eI=eC*eP-eL*eE;if(!eI)break;et-=$=(eM*eC-eS*eL)/eI,er-=ee=(eS*eP-eM*eE)/eI}while((_($)>1e-6||_(ee)>1e-6)&&--ei>0);return[et,er]},forward}var eE=ginzburgPolyconic(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ginzburg4(){return(0,x.Z)(eE).scale(149.995)}var eL=ginzburgPolyconic(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function ginzburg5(){return(0,x.Z)(eL).scale(153.93)}var eP=ginzburgPolyconic(5/6*eo,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ginzburg6(){return(0,x.Z)(eP).scale(130.945)}function ginzburg8Raw(i,o){var s=i*i,x=o*o;return[i*(1-.162388*x)*(.87-952426e-9*s*s),o*(1+x/12)]}function ginzburg8(){return(0,x.Z)(ginzburg8Raw).scale(131.747)}ginzburg8Raw.invert=function(i,o){var s,x=i,F=o,N=50;do{var j=F*F;F-=s=(F*(1+j/12)-o)/(1+j/4)}while(_(s)>1e-6&&--N>0);N=50,i/=1-.162388*j;do{var G=(G=x*x)*G;x-=s=(x*(.87-952426e-9*G)-i)/(.87-.00476213*G)}while(_(s)>1e-6&&--N>0);return[x,F]};var eI=ginzburgPolyconic(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ginzburg9(){return(0,x.Z)(eI).scale(131.087)}function square(i){var o=i(es,0)[0]-i(-es,0)[0];function projectSquare(s,x){var _=s>0?-.5:.5,F=i(s+_*eo,x);return F[0]-=_*o,F}return i.invert&&(projectSquare.invert=function(s,x){var _=s>0?-.5:.5,F=i.invert(s+_*o,x),N=F[0]-_*eo;return N<-eo?N+=2*eo:N>eo&&(N-=2*eo),F[0]=N,F}),projectSquare}function gringortenRaw(i,o){var s=er(i),x=er(o),F=j(o),G=j(i)*F,Z=en(i)*F,X=en(x*o);i=_(N(Z,X)),o=asin(G),_(i-es)>1e-6&&(i%=es);var J=function(i,o){if(o===es)return[0,0];var s,x,F=en(o),N=F*F,G=N*N,Z=1+G,X=1+3*G,J=1-G,$=asin(1/sqrt(Z)),ee=J+N*Z*$,et=(1-F)/ee,er=sqrt(et),ei=et*Z,el=sqrt(ei),ec=er*J;if(0===i)return[0,-(ec+N*el)];var eu,ef=j(o),eh=1/ef,ed=2*F*ef,ep=(-ee*ef-(1-F)*((-3*N+$*X)*ed))/(ee*ee),eg=N*Z*ep+et*X*ed,em=-eh*ed,ey=-eh*eg,ev=-2*eh*(J*(.5*ep/er)-2*N*er*ed),ex=4*i/eo;if(i>.222*eo||o<eo/4&&i>.175*eo){if(s=(ec+N*sqrt(ei*(1+G)-ec*ec))/(1+G),i>eo/4)return[s,s];var e_=s,ew=.5*s;s=.5*(ew+e_),x=50;do{var eT=sqrt(ei-s*s),ek=s*(ev+em*eT)+ey*asin(s/el)-ex;if(!ek)break;ek<0?ew=s:e_=s,s=.5*(ew+e_)}while(_(e_-ew)>1e-6&&--x>0)}else{s=1e-6,x=25;do{var eA=s*s,eS=sqrt(ei-eA),eM=ev+em*eS,eC=s*eM+ey*asin(s/el)-ex,eE=eM+(ey-em*eA)/eS;s-=eu=eS?eC/eE:0}while(_(eu)>1e-6&&--x>0)}return[s,-ec-N*sqrt(ei-s*s)]}(i>eo/4?es-i:i,o);return i>eo/4&&(X=J[0],J[0]=-J[1],J[1]=-X),J[0]*=s,J[1]*=-x,J}function gringorten(){return(0,x.Z)(square(gringortenRaw)).scale(239.75)}function ellipticJ(i,o){if(o<1e-6)return X=en(i),N=j(i),x=o*(i-X*N)/4,[X-x*N,N+x*X,1-o*X*X/2,i-x];if(o>=.999999){var s;return x=(1-o)/4,N=cosh(i),X=((s=G(2*(s=i)))-1)/(s+1),Z=1/N,[X+x*((J=N*sinh(i))-i)/(N*N),Z-x*X*Z*(J-i),Z+x*X*Z*(J+i),2*F(G(i))-es+x*(J-i)/N]}var x,N,Z,X,J,$=[1,0,0,0,0,0,0,0,0],ee=[sqrt(o),0,0,0,0,0,0,0,0],et=0;for(N=sqrt(1-o),J=1;_(ee[et]/$[et])>1e-6&&et<8;)x=$[et++],ee[et]=(x-N)/2,$[et]=(x+N)/2,N=sqrt(x*N),J*=2;Z=J*$[et]*i;do Z=(asin(X=ee[et]*en(N=Z)/$[et])+Z)/2;while(--et);return[en(Z),X=j(Z),X/j(Z-N),Z]}function ellipticF(i,o){if(!o)return i;if(1===o)return X(ei(i/2+el));for(var s=1,x=sqrt(1-o),N=sqrt(o),j=0;_(N)>1e-6;j++){if(i%eo){var G=F(x*ei(i)/s);G<0&&(G+=eo),i+=G+~~(i/eo)*eo}else i+=i;N=(s+x)/2,x=sqrt(s*x),N=((s=N)-x)/2}return i/(ee(2,j)*s)}function guyouRaw(i,o){var s,x,Z,J,$,ee=(eu-1)/(eu+1),et=sqrt(1-ee*ee),el=ellipticF(es,et*et),ec=G(-1*X(ei(eo/4+_(o)/2)))/sqrt(ee),ef=(s=ec*j(-1*i),x=ec*en(-1*i),Z=s*s,J=x+1,[.5*((s>=0?es:-es)-N($=1-Z-x*x,2*s)),-.25*X($*$+4*Z)+.5*X(J*J+Z)]),eh=function(i,o,s){var x=_(i),N=sinh(_(o));if(x){var j=1/en(x),G=1/(ei(x)*ei(x)),Z=-(G+s*(N*N*j*j)-1+s),X=(-Z+sqrt(Z*Z-4*((s-1)*G)))/2;return[ellipticF(F(1/sqrt(X)),s)*er(i),ellipticF(F(sqrt((X/G-1)/s)),1-s)*er(o)]}return[0,ellipticF(F(N),1-s)*er(o)]}(ef[0],ef[1],et*et);return[-eh[1],(o>=0?1:-1)*(.5*el-eh[0])]}function guyou(){return(0,x.Z)(square(guyouRaw)).scale(151.496)}gringortenRaw.invert=function(i,o){_(i)>1&&(i=2*er(i)-i),_(o)>1&&(o=2*er(o)-o);var s=er(i),x=er(o),F=-s*i,G=-x*o,Z=G/F<1,X=function(i,o){for(var s=0,x=1,F=.5,N=50;;){var G=F*F,Z=sqrt(F),X=asin(1/sqrt(1+G)),J=1-G+F*(1+G)*X,$=(1-Z)/J,ee=sqrt($),et=$*(1+G),er=ee*(1-G),en=sqrt(et-i*i),ei=o+er+F*en;if(1e-12>_(x-s)||0==--N||0===ei)break;ei>0?s=F:x=F,F=.5*(s+x)}if(!N)return null;var es=asin(Z),el=j(es),ec=1/el,eu=2*Z*el,ef=(-J*el-(1-Z)*((-3*F+X*(1+3*G))*eu))/(J*J),eh=(1-G)*(.5*ef/ee)-2*F*ee*eu,ed=-ec*(F*(1+G)*ef+$*(1+3*G)*eu);return[eo/4*(i*(-2*ec*eh+-ec*eu*en)+ed*asin(i/sqrt(et))),es]}(Z?G:F,Z?F:G),J=X[0],$=X[1],ee=j($);return Z&&(J=-es-J),[s*(N(en(J)*ee,-en($))+eo),x*asin(j(J)*ee)]},guyouRaw.invert=function(i,o){var s,x,_,j,Z,J,$,ee,et,er=(eu-1)/(eu+1),en=sqrt(1-er*er),ei=(s=.5*ellipticF(es,en*en)-o,x=-i,_=en*en,s?(j=ellipticJ(s,_),x)?(J=(Z=ellipticJ(x,1-_))[1]*Z[1]+_*j[0]*j[0]*Z[0]*Z[0],[[j[0]*Z[2]/J,j[1]*j[2]*Z[0]*Z[1]/J],[j[1]*Z[1]/J,-j[0]*j[2]*Z[0]*Z[2]/J],[j[2]*Z[1]*Z[2]/J,-_*j[0]*j[1]*Z[0]/J]]):[[j[0],0],[j[1],0],[j[2],0]]:[[0,(Z=ellipticJ(x,1-_))[0]/Z[1]],[1/Z[1],0],[Z[2]/Z[1],0]]),eo=($=ei[0],et=(ee=ei[1])[0]*ee[0]+ee[1]*ee[1],[($[0]*ee[0]+$[1]*ee[1])/et,($[1]*ee[0]-$[0]*ee[1])/et]);return[-(N(eo[1],eo[0])/1),2*F(G(-.5*X(er*eo[0]*eo[0]+er*eo[1]*eo[1])))-es]};var eO=s(7613);function hammerRetroazimuthalRaw(i){var o=en(i),s=j(i),x=hammerRetroazimuthalRotation(i);function forward(i,F){var N=x(i,F);i=N[0];var G=en(F=N[1]),Z=j(F),X=j(i),J=acos(o*G+s*Z*X),$=en(J),ee=_($)>1e-6?J/$:1;return[ee*s*en(i),(_(i)>es?ee:-ee)*(o*Z-s*G*X)]}return x.invert=hammerRetroazimuthalRotation(-i),forward.invert=function(i,s){var _=sqrt(i*i+s*s),F=-en(_),G=j(_),Z=_*G,X=-s*F,J=_*o,$=sqrt(Z*Z+X*X-J*J),ee=N(Z*J+X*$,X*J-Z*$),et=(_>es?-1:1)*N(i*F,_*j(ee)*G+s*en(ee)*F);return x.invert(et,ee)},forward}function hammerRetroazimuthalRotation(i){var o=en(i),s=j(i);return function(i,x){var _=j(x),F=j(i)*_,G=en(i)*_,Z=en(x);return[N(G,F*s-Z*o),asin(Z*s+F*o)]}}function hammerRetroazimuthal(){var i=0,o=(0,x.r)(hammerRetroazimuthalRaw),s=o(i),_=s.rotate,F=s.stream,N=(0,eO.Z)();return s.parallel=function(x){if(!arguments.length)return i*ed;var _=s.rotate();return o(i=x*ep).rotate(_)},s.rotate=function(o){return arguments.length?(_.call(s,[o[0],o[1]-i*ed]),N.center([-o[0],-o[1]]),s):(o=_.call(s),o[1]+=i*ed,o)},s.stream=function(i){return(i=F(i)).sphere=function(){i.polygonStart();var o,s=N.radius(89.99)().coordinates[0],x=s.length-1,_=-1;for(i.lineStart();++_<x;)i.point((o=s[_])[0],o[1]);for(i.lineEnd(),x=(s=N.radius(90.01)().coordinates[0]).length-1,i.lineStart();--_>=0;)i.point((o=s[_])[0],o[1]);i.lineEnd(),i.polygonEnd()},i},s.scale(79.4187).parallel(45).clipAngle(179.999)}var eD=s(33064),eR=s(72736),eB=asin(1-.3333333333333333)*ed,ez=cylindricalEqualAreaRaw(0);function healpixRaw(i){var o=eB*ep,s=collignonRaw(eo,o)[0]-collignonRaw(-eo,o)[0],x=ez(0,o)[1],F=collignonRaw(0,o)[1],N=ef-F,j=eh/i,G=4/eh,X=x+N*N*4/eh;function forward(ee,et){var er,en=_(et);if(en>o){var ei=$(i-1,J(0,Z((ee+eo)/j)));ee+=eo*(i-1)/i-ei*j,(er=collignonRaw(ee,en))[0]=er[0]*eh/s-eh*(i-1)/(2*i)+ei*eh/i,er[1]=x+(er[1]-F)*4*N/eh,et<0&&(er[1]=-er[1])}else er=ez(ee,et);return er[0]*=G,er[1]/=X,er}return forward.invert=function(o,ee){o/=G;var et=_(ee*=X);if(et>x){var er=$(i-1,J(0,Z((o+eo)/j)));o=(o+eo*(i-1)/i-er*j)*s/eh;var en=collignonRaw.invert(o,.25*(et-x)*eh/N+F);return en[0]-=eo*(i-1)/i-er*j,ee<0&&(en[1]=-en[1]),en}return ez.invert(o,ee)},forward}function sphereTop(i,o){return[i,1&o?89.999999:eB]}function sphereBottom(i,o){return[i,1&o?-89.999999:-eB]}function sphereNudge(i){return[.999999*i[0],i[1]]}function healpix(){var i=4,o=(0,x.r)(healpixRaw),s=o(i),_=s.stream;return s.lobes=function(s){return arguments.length?o(i=+s):i},s.stream=function(o){var x=s.rotate(),F=_(o),N=(s.rotate([0,0]),_(o));return s.rotate(x),F.sphere=function(){var o,s;(0,eR.Z)((o=180/i,s=[].concat((0,eD.w6)(-180,180+o/2,o).map(sphereTop),(0,eD.w6)(180,-180-o/2,-o).map(sphereBottom)),{type:"Polygon",coordinates:[180===o?s.map(sphereNudge):s]}),N)},F},s.scale(239.75)}function hillRaw(i){var o,s=1+i,x=asin(en(1/s)),F=2*sqrt(eo/(o=eo+4*x*s)),G=.5*F*(s+sqrt(i*(2+i))),Z=i*i,X=s*s;function forward(J,$){var ee,et,er=1-en($);if(er&&er<2){var ei,el=es-$,ec=25;do{var eu=en(el),ef=j(el),eh=x+N(eu,s-ef),ed=1+X-2*s*ef;el-=ei=(el-Z*x-s*eu+ed*eh-.5*er*o)/(2*s*eu*eh)}while(_(ei)>1e-12&&--ec>0);ee=F*sqrt(ed),et=J*eh/eo}else ee=F*(i+er),et=J*x/eo;return[ee*en(et),G-ee*j(et)]}return forward.invert=function(i,_){var j=i*i+(_-=G)*_,J=(1+X-j/(F*F))/(2*s),$=acos(J),ee=en($),et=x+N(ee,s-J);return[asin(i/sqrt(j))*eo/et,asin(1-2*($-Z*x-s*ee+(1+X-2*s*J)*et)/o)]},forward}function hill(){var i=1,o=(0,x.r)(hillRaw),s=o(i);return s.ratio=function(s){return arguments.length?o(i=+s):i},s.scale(167.774).center([0,18.67])}function sinuMollweideRaw(i,o){return o>-.7109889596207567?(i=ex(i,o),i[1]+=.0528035274542,i):sinusoidalRaw(i,o)}function sinuMollweide(){return(0,x.Z)(sinuMollweideRaw).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function homolosineRaw(i,o){return _(o)>.7109889596207567?(i=ex(i,o),i[1]-=o>0?.0528035274542:-.0528035274542,i):sinusoidalRaw(i,o)}function homolosine(){return(0,x.Z)(homolosineRaw).scale(152.63)}function hufnagelRaw(i,o,s,x){var _=sqrt(4*eo/(2*s+(1+i-o/2)*en(2*s)+(i+o)/2*en(4*s)+o/2*en(6*s))),F=sqrt(x*en(s)*sqrt((1+i*j(2*s)+o*j(4*s))/(1+i+o))),N=s*mapping(1);function radius(s){return sqrt(1+i*j(2*s)+o*j(4*s))}function mapping(x){var _=x*s;return(2*_+(1+i-o/2)*en(2*_)+(i+o)/2*en(4*_)+o/2*en(6*_))/s}function inversemapping(i){return radius(i)*en(i)}var forward=function(i,o){var x=s*solve(mapping,N*en(o)/s,o/eo);isNaN(x)&&(x=s*er(o));var G=_*radius(x);return[G*F*i/eo*j(x),G/F*en(x)]};return forward.invert=function(i,o){var x=solve(inversemapping,o*F/_);return[i*eo/(j(x)*_*F*radius(x)),asin(s*mapping(x/s)/N)]},0===s&&(_=sqrt(x/eo),(forward=function(i,o){return[i*_,en(o)/_]}).invert=function(i,o){return[i/_,asin(o*_)]}),forward}function hufnagel(){var i=1,o=0,s=45*ep,_=2,F=(0,x.r)(hufnagelRaw),N=F(i,o,s,_);return N.a=function(x){return arguments.length?F(i=+x,o,s,_):i},N.b=function(x){return arguments.length?F(i,o=+x,s,_):o},N.psiMax=function(x){return arguments.length?F(i,o,s=+x*ep,_):s*ed},N.ratio=function(x){return arguments.length?F(i,o,s,_=+x):_},N.scale(180.739)}function hyperellipticalRaw(i,o,s){function elliptic(s){return i+(1-i)*ee(1-ee(s,o),1/o)}function z(i){var o,s,x,_,F;return void 0===o&&(o=20),F=((s=elliptic(0))+4*(x=elliptic(.5*(0+i)))+(_=elliptic(i)))*(i-0)/6,function adsimp(i,o,s,x,_,F,N,j,G,Z,X){var J,$,ee,et,er,en,ei,eo,es,el;if(X.nanEncountered)return NaN;if(J=s-o,$=i(o+.25*J),ee=i(s-.25*J),isNaN($)||isNaN(ee)){X.nanEncountered=!0;return}return(el=((en=(et=J*(x+4*$+_)/12)+(er=J*(_+4*ee+F)/12))-N)/15,Z>G)?(X.maxDepthCount++,en+el):Math.abs(el)<j?en+el:(ei=o+.5*J,isNaN(eo=adsimp(i,o,ei,x,$,_,et,.5*j,G,Z+1,X))||isNaN(es=adsimp(i,ei,s,_,ee,F,er,.5*j,G,Z+1,X)))?(X.nanEncountered=!0,NaN):eo+es}(elliptic,0,i,s,x,_,F,1e-4,o,1,{maxDepthCount:0,nanEncountered:!1})}for(var x=1/z(1),F=(1+1e-8)*x,N=[],j=0;j<=1e3;j++)N.push(z(j/1e3)*F);function Y(i){var o=0,s=1e3,x=500;do N[x]>i?s=x:o=x,x=o+s>>1;while(x>o);var _=N[x+1]-N[x];return _&&(_=(i-N[x+1])/_),(x+1+_)/1e3}var G=2*Y(1)/eo*x/s,forward=function(i,o){var s=Y(_(en(o))),x=elliptic(s)*i;return s/=G,[x,o>=0?s:-s]};return forward.invert=function(i,o){var s;return 1>_(o*=G)&&(s=er(o)*asin(z(_(o))*x)),[i/elliptic(_(o)),s]},forward}function hyperelliptical(){var i=0,o=2.5,s=1.183136,_=(0,x.r)(hyperellipticalRaw),F=_(i,o,s);return F.alpha=function(x){return arguments.length?_(i=+x,o,s):i},F.k=function(x){return arguments.length?_(i,o=+x,s):o},F.gamma=function(x){return arguments.length?_(i,o,s=+x):s},F.scale(152.63)}function interpolateLine(i,o){for(var s,x,_,F=-1,N=i.length,j=i[0],G=[];++F<N;){x=((s=i[F])[0]-j[0])/o,_=(s[1]-j[1])/o;for(var Z=0;Z<o;++Z)G.push([j[0]+Z*x,j[1]+Z*_]);j=s}return G.push(s),G}function interrupted(i,o,s){function forward(s,x){for(var _=x<0?-1:1,F=o[+(x<0)],N=0,j=F.length-1;N<j&&s>F[N][2][0];++N);var G=i(s-F[N][1][0],x);return G[0]+=i(F[N][1][0],_*x>_*F[N][0][1]?F[N][0][1]:x)[0],G}s?forward.invert=s(forward):i.invert&&(forward.invert=function(s,x){for(var F=N[+(x<0)],j=o[+(x<0)],G=0,Z=F.length;G<Z;++G){var X=F[G];if(X[0][0]<=s&&s<X[1][0]&&X[0][1]<=x&&x<X[1][1]){var J,$,ee=i.invert(s-i(j[G][1][0],0)[0],x);return ee[0]+=j[G][1][0],(J=forward(ee[0],ee[1]),$=[s,x],1e-6>_(J[0]-$[0])&&1e-6>_(J[1]-$[1]))?ee:null}}});var F,N,j=(0,x.Z)(forward),G=j.stream;return j.stream=function(i){var o=j.rotate(),s=G(i),x=(j.rotate([0,0]),G(i));return j.rotate(o),s.sphere=function(){(0,eR.Z)(F,x)},s},j.lobes=function(s){return arguments.length?(F=function(i){var o,s,x,_,F,N,j,G=[],Z=i[0].length;for(j=0;j<Z;++j)s=(o=i[0][j])[0][0],x=o[0][1],_=o[1][1],F=o[2][0],N=o[2][1],G.push(interpolateLine([[s+1e-6,x+1e-6],[s+1e-6,_-1e-6],[F-1e-6,_-1e-6],[F-1e-6,N+1e-6]],30));for(j=i[1].length-1;j>=0;--j)s=(o=i[1][j])[0][0],x=o[0][1],_=o[1][1],F=o[2][0],N=o[2][1],G.push(interpolateLine([[F-1e-6,N-1e-6],[F-1e-6,_+1e-6],[s+1e-6,_+1e-6],[s+1e-6,x-1e-6]],30));return{type:"Polygon",coordinates:[(0,eD.TS)(G)]}}(s),N=(o=s.map(function(i){return i.map(function(i){return[[i[0][0]*ep,i[0][1]*ep],[i[1][0]*ep,i[1][1]*ep],[i[2][0]*ep,i[2][1]*ep]]})})).map(function(o){return o.map(function(o){var s,x=i(o[0][0],o[0][1])[0],_=i(o[2][0],o[2][1])[0],F=i(o[1][0],o[0][1])[1],N=i(o[1][0],o[1][1])[1];return F>N&&(s=F,F=N,N=s),[[x,F],[_,N]]})}),j):o.map(function(i){return i.map(function(i){return[[i[0][0]*ed,i[0][1]*ed],[i[1][0]*ed,i[1][1]*ed],[i[2][0]*ed,i[2][1]*ed]]})})},null!=o&&j.lobes(o),j}sinuMollweideRaw.invert=function(i,o){return o>-.7109889596207567?ex.invert(i,o-.0528035274542):sinusoidalRaw.invert(i,o)},homolosineRaw.invert=function(i,o){return _(o)>.7109889596207567?ex.invert(i,o+(o>0?.0528035274542:-.0528035274542)):sinusoidalRaw.invert(i,o)};var eF=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_boggs(){return interrupted(boggsRaw,eF).scale(160.857)}var eN=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_homolosine(){return interrupted(homolosineRaw,eN).scale(152.63)}var ej=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_mollweide(){return interrupted(ex,ej).scale(169.529)}var eU=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function mollweideHemispheres(){return interrupted(ex,eU).scale(169.529).rotate([20,0])}var eV=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function interrupted_sinuMollweide(){return interrupted(sinuMollweideRaw,eV,solve2d).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var eH=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function interrupted_sinusoidal(){return interrupted(sinusoidalRaw,eH).scale(152.63).rotate([-20,0])}function kavrayskiy7Raw(i,o){return[3/eh*i*sqrt(eo*eo/3-o*o),o]}function kavrayskiy7(){return(0,x.Z)(kavrayskiy7Raw).scale(158.837)}function lagrangeRaw(i){function forward(o,s){if(1e-6>_(_(s)-es))return[0,s<0?-2:2];var x=en(s),F=ee((1+x)/(1-x),i/2),N=.5*(F+1/F)+j(o*=i);return[2*en(o)/N,(F-1/F)/N]}return forward.invert=function(o,s){var x=_(s);if(1e-6>_(x-2))return o?null:[0,er(s)*es];if(x>2)return null;o/=2,s/=2;var F=o*o,j=s*s,G=2*s/(1+F+j);return G=ee((1+G)/(1-G),1/i),[N(2*o,1-F-j)/i,asin((G-1)/(G+1))]},forward}function lagrange(){var i=.5,o=(0,x.r)(lagrangeRaw),s=o(i);return s.spacing=function(s){return arguments.length?o(i=+s):i},s.scale(124.75)}kavrayskiy7Raw.invert=function(i,o){return[eh/3*i/sqrt(eo*eo/3-o*o),o]};var eG=eo/eu;function larriveeRaw(i,o){return[i*(1+sqrt(j(o)))/2,o/(j(o/2)*j(i/6))]}function larrivee(){return(0,x.Z)(larriveeRaw).scale(97.2672)}function laskowskiRaw(i,o){var s=i*i,x=o*o;return[i*(.975534+x*(-.119161+-.0143059*s+-.0547009*x)),o*(1.00384+s*(.0802894+-.02855*x+199025e-9*s)+x*(.0998909+-.0491032*x))]}function laskowski(){return(0,x.Z)(laskowskiRaw).scale(139.98)}function littrowRaw(i,o){return[en(i)/j(o),ei(o)*j(i)]}function littrow(){return(0,x.Z)(littrowRaw).scale(144.049).clipAngle(89.999)}function loximuthalRaw(i){var o=j(i),s=ei(el+i/2);function forward(x,F){var N=F-i,j=1e-6>_(N)?x*o:1e-6>_(j=el+F/2)||1e-6>_(_(j)-es)?0:x*N/X(ei(j)/s);return[j,N]}return forward.invert=function(x,F){var N,j=F+i;return[1e-6>_(F)?x/o:1e-6>_(N=el+j/2)||1e-6>_(_(N)-es)?0:x*X(ei(N)/s)/F,j]},forward}function loximuthal(){return parallel1(loximuthalRaw).parallel(40).scale(158.837)}function millerRaw(i,o){return[i,1.25*X(ei(el+.4*o))]}function miller(){return(0,x.Z)(millerRaw).scale(108.318)}function modifiedStereographicRaw(i){var o=i.length-1;function forward(s,x){for(var _,F=j(x),N=2/(1+F*j(s)),G=N*F*en(s),Z=N*en(x),X=o,J=i[X],$=J[0],ee=J[1];--X>=0;)$=(J=i[X])[0]+G*(_=$)-Z*ee,ee=J[1]+G*ee+Z*_;return[$=G*(_=$)-Z*ee,ee=G*ee+Z*_]}return forward.invert=function(s,x){var G=20,Z=s,X=x;do{for(var J,$=o,ee=i[$],et=ee[0],er=ee[1],ei=0,eo=0;--$>=0;)ee=i[$],ei=et+Z*(J=ei)-X*eo,eo=er+Z*eo+X*J,et=ee[0]+Z*(J=et)-X*er,er=ee[1]+Z*er+X*J;ei=et+Z*(J=ei)-X*eo,eo=er+Z*eo+X*J,et=Z*(J=et)-X*er-s,er=Z*er+X*J-x;var es,el,ec=ei*ei+eo*eo;Z-=es=(et*ei+er*eo)/ec,X-=el=(er*ei-et*eo)/ec}while(_(es)+_(el)>1e-6*1e-6&&--G>0);if(G){var eu=sqrt(Z*Z+X*X),ef=2*F(.5*eu),eh=en(ef);return[N(Z*eh,eu*j(ef)),eu?asin(X*eh/eu):0]}},forward}larriveeRaw.invert=function(i,o){var s=_(i),x=_(o),F=1e-6,N=es;x<eG?N*=x/eG:F+=6*acos(eG/x);for(var G=0;G<25;G++){var Z=en(N),X=sqrt(j(N)),J=en(N/2),$=j(N/2),ee=en(F/6),et=j(F/6),er=.5*F*(1+X)-s,ei=N/($*et)-x,eo=X?-.25*F*Z/X:0,el=.5*(1+X),ec=(1+.5*N*J/$)/($*et),eu=N/$*(ee/6)/(et*et),ef=eo*eu-ec*el,eh=(er*eu-ei*el)/ef,ed=(ei*eo-er*ec)/ef;if(N-=eh,F-=ed,1e-6>_(eh)&&1e-6>_(ed))break}return[i<0?-F:F,o<0?-N:N]},laskowskiRaw.invert=function(i,o){var s=er(i)*eo,x=o/2,F=50;do{var N=s*s,j=x*x,G=s*x,Z=s*(.975534+j*(-.119161+-.0143059*N+-.0547009*j))-i,X=x*(1.00384+N*(.0802894+-.02855*j+199025e-9*N)+j*(.0998909+-.0491032*j))-o,J=.975534-j*(.119161+3*N*.0143059+.0547009*j),$=-G*(.238322+.2188036*j+.0286118*N),ee=G*(.1605788+7961e-7*N+-.0571*j),et=1.00384+N*(.0802894+199025e-9*N)+j*(3*(.0998909-.02855*N)-.245516*j),en=$*ee-et*J,ei=(X*$-Z*et)/en,es=(Z*ee-X*J)/en;s-=ei,x-=es}while((_(ei)>1e-6||_(es)>1e-6)&&--F>0);return F&&[s,x]},littrowRaw.invert=function(i,o){var s=i*i,x=o*o+1,_=s+x,F=i?ec*sqrt((_-sqrt(_*_-4*s))/s):1/sqrt(x);return[asin(i*F),er(o)*acos(F)]},millerRaw.invert=function(i,o){return[i,2.5*F(G(.8*o))-.625*eo]};var eW=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],eZ=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],eY=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],eX=[[.9245,0],[0,0],[.01943,0]],eK=[[.721316,0],[0,0],[-.00881625,-.00617325]];function modifiedStereographicAlaska(){return modifiedStereographic(eW,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function modifiedStereographicGs48(){return modifiedStereographic(eZ,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function modifiedStereographicGs50(){return modifiedStereographic(eY,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function modifiedStereographicMiller(){return modifiedStereographic(eX,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function modifiedStereographicLee(){return modifiedStereographic(eK,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function modifiedStereographic(i,o){var s=(0,x.Z)(modifiedStereographicRaw(i)).rotate(o).clipAngle(90),_=(0,eT.Z)(o),F=s.center;return delete s.rotate,s.center=function(i){return arguments.length?F(_(i)):_.invert(F())},s}var eJ=sqrt(6),e$=sqrt(7);function mtFlatPolarParabolicRaw(i,o){var s=asin(7*en(o)/(3*eJ));return[eJ*i*(2*j(2*s/3)-1)/e$,9*en(s/3)/e$]}function mtFlatPolarParabolic(){return(0,x.Z)(mtFlatPolarParabolicRaw).scale(164.859)}function mtFlatPolarQuarticRaw(i,o){for(var s,x=(1+ec)*en(o),F=o,N=0;N<25&&(F-=s=(en(F/2)+en(F)-x)/(.5*j(F/2)+j(F)),!(1e-6>_(s)));N++);return[i*(1+2*j(F)/j(F/2))/(3*eu),2*sqrt(3)*en(F/2)/sqrt(2+eu)]}function mtFlatPolarQuartic(){return(0,x.Z)(mtFlatPolarQuarticRaw).scale(188.209)}function mtFlatPolarSinusoidalRaw(i,o){for(var s,x=sqrt(6/(4+eo)),F=(1+eo/4)*en(o),N=o/2,G=0;G<25&&(N-=s=(N/2+en(N)-F)/(.5+j(N)),!(1e-6>_(s)));G++);return[x*(.5+j(N))*i/1.5,x*N]}function mtFlatPolarSinusoidal(){return(0,x.Z)(mtFlatPolarSinusoidalRaw).scale(166.518)}mtFlatPolarParabolicRaw.invert=function(i,o){var s=3*asin(o*e$/9);return[i*e$/(eJ*(2*j(2*s/3)-1)),asin(3*en(s)*eJ/7)]},mtFlatPolarQuarticRaw.invert=function(i,o){var s=o*sqrt(2+eu)/(2*sqrt(3)),x=2*asin(s);return[3*eu*i/(1+2*j(x)/j(x/2)),asin((s+en(x))/(1+ec))]},mtFlatPolarSinusoidalRaw.invert=function(i,o){var s=sqrt(6/(4+eo)),x=o/s;return 1e-6>_(_(x)-es)&&(x=x<0?-es:es),[1.5*i/(s*(.5+j(x))),asin((x/2+en(x))/(1+eo/4))]};var eQ=s(26867);function naturalEarth2Raw(i,o){var s=o*o,x=s*s,_=s*x;return[i*(.84719-.13063*s+_*_*(-.04515+.05494*s-.02326*x+.00331*_)),o*(1.01183+x*x*(-.02625+.01926*s-.00396*x))]}function naturalEarth2(){return(0,x.Z)(naturalEarth2Raw).scale(175.295)}function nellHammerRaw(i,o){return[i*(1+j(o))/2,2*(o-ei(o/2))]}function nellHammer(){return(0,x.Z)(nellHammerRaw).scale(152.63)}naturalEarth2Raw.invert=function(i,o){var s,x,F,N,j=o,G=25;do F=(x=j*j)*x,j-=s=(j*(1.01183+F*F*(-.02625+.01926*x-.00396*F))-o)/(1.01183+F*F*(-.23625+.21186*x+-.05148*F));while(_(s)>1e-12&&--G>0);return F=(x=j*j)*x,N=x*F,[i/(.84719-.13063*x+N*N*(-.04515+.05494*x-.02326*F+.00331*N)),j]},nellHammerRaw.invert=function(i,o){for(var s=o/2,x=0,F=1/0;x<10&&_(F)>1e-6;++x){var N=j(o/2);o-=F=(o-ei(o/2)-s)/(1-.5/(N*N))}return[2*i/(1+j(o)),o]};var e0=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function quarticAuthalic(){return interrupted(hammerRaw(1/0),e0).rotate([20,0]).scale(152.63)}function nicolosiRaw(i,o){var s=en(o),x=j(o),F=er(i);if(0===i||_(o)===es)return[0,o];if(0===o)return[i,0];if(_(i)===es)return[i*x,es*s];var N=eo/(2*i)-2*i/eo,G=2*o/eo,Z=(1-G*G)/(s-G),X=N*N,J=Z*Z,$=1+X/J,ee=1+J/X,et=(N*s/Z-N/2)/$,ei=(J*s/X+Z/2)/ee,el=ei*ei-(J*s*s/X+Z*s-1)/ee;return[es*(et+sqrt(et*et+x*x/$)*F),es*(ei+sqrt(el<0?0:el)*er(-o*N)*F)]}function nicolosi(){return(0,x.Z)(nicolosiRaw).scale(127.267)}function pattersonRaw(i,o){var s=o*o;return[i,o*(1.0148+s*s*(.23185+s*(-.14499+.02406*s)))]}function patterson(){return(0,x.Z)(pattersonRaw).scale(139.319)}function polyconicRaw(i,o){if(1e-6>_(o))return[i,0];var s=ei(o),x=i*en(o);return[en(x)/s,o+(1-j(x))/s]}function polyconic(){return(0,x.Z)(polyconicRaw).scale(103.74)}nicolosiRaw.invert=function(i,o){var s=(i/=es)*i,x=s+(o/=es)*o,_=eo*eo;return[i?(x-1+sqrt((1-x)*(1-x)+4*s))/(2*i)*es:0,solve(function(i){return x*(eo*en(i)-2*i)*eo+4*i*i*(o-en(i))+2*eo*i-_*o},0)]},pattersonRaw.invert=function(i,o){o>1.790857183?o=1.790857183:o<-1.790857183&&(o=-1.790857183);var s,x=o;do{var F=x*x;x-=s=(x*(1.0148+F*F*(.23185+F*(-.14499+.02406*F)))-o)/(1.0148+F*F*(1.1592500000000001+F*(-1.01493+.21654*F)))}while(_(s)>1e-6);return[i,x]},polyconicRaw.invert=function(i,o){if(1e-6>_(o))return[i,0];var s,x=i*i+o*o,F=.5*o,N=10;do{var G=ei(F),Z=1/j(F),X=x-2*o*F+F*F;F-=s=(G*X+2*(F-o))/(2+X*Z*Z+2*(F-o)*G)}while(_(s)>1e-6&&--N>0);return G=ei(F),[(_(o)<_(F+1/G)?asin(i*G):er(o)*er(i)*(acos(_(i*G))+es))/en(F),F]};var e1=s(77338),e2=s(83074);function multiply(i,o){return[i[0]*o[0]+i[1]*o[3],i[0]*o[1]+i[1]*o[4],i[0]*o[2]+i[1]*o[5]+i[2],i[3]*o[0]+i[4]*o[3],i[3]*o[1]+i[4]*o[4],i[3]*o[2]+i[4]*o[5]+i[5]]}function subtract(i,o){return[i[0]-o[0],i[1]-o[1]]}function matrix_length(i){return sqrt(i[0]*i[0]+i[1]*i[1])}function polyhedral(i,o,s){function forward(i,s){var x,_=o(i,s),F=_.project([i*ed,s*ed]);return(x=_.transform)?[x[0]*F[0]+x[1]*F[1]+x[2],-(x[3]*F[0]+x[4]*F[1]+x[5])]:(F[1]=-F[1],F)}(function recurse(i,o){if(i.edges=function(i){for(var o=i.length,s=[],x=i[o-1],_=0;_<o;++_)s.push([x,x=i[_]]);return s}(i.face),o.face){var s,x,_,F,G,Z,X,J,$=i.shared=function(i,o){for(var s,x,_=i.length,F=null,N=0;N<_;++N){s=i[N];for(var j=o.length;--j>=0;)if(x=o[j],s[0]===x[0]&&s[1]===x[1]){if(F)return[F,s];F=s}}}(i.face,o.face),ee=(_=$.map(o.project),F=$.map(i.project),s=G=subtract(_[1],_[0]),x=Z=subtract(F[1],F[0]),X=N(s[0]*x[1]-s[1]*x[0],s[0]*x[0]+s[1]*x[1]),J=matrix_length(G)/matrix_length(Z),multiply([1,0,_[0][0],0,1,_[0][1]],multiply([J,0,0,0,J,0],multiply([j(X),en(X),0,-en(X),j(X),0],[1,0,-F[0][0],0,1,-F[0][1]]))));i.transform=o.transform?multiply(o.transform,ee):ee;for(var et=o.edges,er=0,ei=et.length;er<ei;++er)polyhedral_pointEqual($[0],et[er][1])&&polyhedral_pointEqual($[1],et[er][0])&&(et[er]=i),polyhedral_pointEqual($[0],et[er][0])&&polyhedral_pointEqual($[1],et[er][1])&&(et[er]=i);for(er=0,ei=(et=i.edges).length;er<ei;++er)polyhedral_pointEqual($[0],et[er][0])&&polyhedral_pointEqual($[1],et[er][1])&&(et[er]=o),polyhedral_pointEqual($[0],et[er][1])&&polyhedral_pointEqual($[1],et[er][0])&&(et[er]=o)}else i.transform=o.transform;return i.children&&i.children.forEach(function(o){recurse(o,i)}),i})(i,{transform:null}),function hasInverse(i){return i.project.invert||i.children&&i.children.some(hasInverse)}(i)&&(forward.invert=function(s,x){var _=function faceInvert(i,s){var x=i.project.invert,_=i.transform,F=s;if(_&&(F=[(_=[(G=1/((j=_)[0]*j[4]-j[1]*j[3]))*j[4],-G*j[1],G*(j[1]*j[5]-j[2]*j[4]),-G*j[3],G*j[0],G*(j[2]*j[3]-j[0]*j[5])])[0]*F[0]+_[1]*F[1]+_[2],_[3]*F[0]+_[4]*F[1]+_[5]]),x&&i===o((N=Z=x(F))[0]*ep,N[1]*ep))return Z;for(var N,j,G,Z,X=i.children,J=0,$=X&&X.length;J<$;++J)if(Z=faceInvert(X[J],s))return Z}(i,[s,-x]);return _&&(_[0]*=ep,_[1]*=ep,_)});var F=(0,x.Z)(forward),G=F.stream;return F.stream=function(o){var s=F.rotate(),x=G(o),N=(F.rotate([0,0]),G(o));return F.rotate(s),x.sphere=function(){N.polygonStart(),N.lineStart(),function outline(i,o,s){var x,F,N=o.edges,j=N.length,G={type:"MultiPoint",coordinates:o.face},Z=o.face.filter(function(i){return 90!==_(i[1])}),X=(0,e1.Z)({type:"MultiPoint",coordinates:Z}),J=!1,$=-1,ee=X[1][0]-X[0][0],et=180===ee||360===ee?[(X[0][0]+X[1][0])/2,(X[0][1]+X[1][1])/2]:(0,ew.Z)(G);if(s)for(;++$<j&&N[$]!==s;);++$;for(var er=0;er<j;++er)Array.isArray(F=N[(er+$)%j])?(J||(i.point((x=(0,e2.Z)(F[0],et)(1e-6))[0],x[1]),J=!0),i.point((x=(0,e2.Z)(F[1],et)(1e-6))[0],x[1])):(J=!1,F!==s&&outline(i,F,o))}(N,i),N.lineEnd(),N.polygonEnd()},x},F.angle(null==s?-30:s*ed)}function polyhedral_pointEqual(i,o){return i&&o&&i[0]===o[0]&&i[1]===o[1]}var e3=s(98936),e5=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],e4=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(i){return i.map(function(i){return e5[i]})});function butterfly(i){i=i||function(i){var o=(0,ew.Z)({type:"MultiPoint",coordinates:i});return(0,e3.Z)().scale(1).translate([0,0]).rotate([-o[0],-o[1]])};var o=e4.map(function(o){return{face:o,project:i(o)}});return[-1,0,0,1,0,1,4,5].forEach(function(i,s){var x=o[i];x&&(x.children||(x.children=[])).push(o[s])}),polyhedral(o[0],function(i,s){return o[i<-eo/2?s<0?6:4:i<0?s<0?2:0:i<eo/2?s<0?3:1:s<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var e6=2/sqrt(3);function collignonK(i,o){var s=collignonRaw(i,o);return[s[0]*e6,s[1]]}function polyhedral_collignon(i){i=i||function(i){var o=(0,ew.Z)({type:"MultiPoint",coordinates:i});return(0,x.Z)(collignonK).translate([0,0]).scale(1).rotate(o[1]>0?[-o[0],0]:[180-o[0],180])};var o=e4.map(function(o){return{face:o,project:i(o)}});return[-1,0,0,1,0,1,4,5].forEach(function(i,s){var x=o[i];x&&(x.children||(x.children=[])).push(o[s])}),polyhedral(o[0],function(i,s){return o[i<-eo/2?s<0?6:4:i<0?s<0?2:0:i<eo/2?s<0?3:1:s<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function waterman(i){i=i||function(i){var o=6===i.length?(0,ew.Z)({type:"MultiPoint",coordinates:i}):i[0];return(0,e3.Z)().scale(1).translate([0,0]).rotate([-o[0],-o[1]])};var o=e4.map(function(i){for(var o,s=i.map(cartesian),x=s.length,_=s[x-1],F=[],N=0;N<x;++N)o=s[N],F.push(spherical([.9486832980505138*_[0]+.31622776601683794*o[0],.9486832980505138*_[1]+.31622776601683794*o[1],.9486832980505138*_[2]+.31622776601683794*o[2]]),spherical([.9486832980505138*o[0]+.31622776601683794*_[0],.9486832980505138*o[1]+.31622776601683794*_[1],.9486832980505138*o[2]+.31622776601683794*_[2]])),_=o;return F}),s=[],x=[-1,0,0,1,0,1,4,5];o.forEach(function(i,_){for(var F,N,j=e4[_],G=j.length,Z=s[_]=[],X=0;X<G;++X)o.push([j[X],i[(2*X+2)%(2*G)],i[(2*X+1)%(2*G)]]),x.push(_),Z.push((F=cartesian(i[(2*X+2)%(2*G)]),N=cartesian(i[(2*X+1)%(2*G)]),[F[1]*N[2]-F[2]*N[1],F[2]*N[0]-F[0]*N[2],F[0]*N[1]-F[1]*N[0]]))});var _=o.map(function(o){return{project:i(o),face:o}});return x.forEach(function(i,o){var s=_[i];s&&(s.children||(s.children=[])).push(_[o])}),polyhedral(_[0],function(i,o){var x=j(o),F=[x*j(i),x*en(i),en(o)],N=i<-eo/2?o<0?6:4:i<0?o<0?2:0:i<eo/2?o<0?3:1:o<0?7:5,G=s[N];return _[0>dot(G[0],F)?8+3*N:0>dot(G[1],F)?8+3*N+1:0>dot(G[2],F)?8+3*N+2:N]}).angle(-30).scale(110.625).center([0,45])}function dot(i,o){for(var s=0,x=i.length,_=0;s<x;++s)_+=i[s]*o[s];return _}function spherical(i){return[N(i[1],i[0])*ed,asin(J(-1,$(1,i[2])))*ed]}function cartesian(i){var o=i[0]*ep,s=i[1]*ep,x=j(s);return[x*j(o),x*en(o),en(s)]}function noop(){}function project(i,o){var s,x=o.stream;if(!x)throw Error("invalid projection");switch(i&&i.type){case"Feature":s=projectFeature;break;case"FeatureCollection":s=projectFeatureCollection;break;default:s=projectGeometry}return s(i,x)}function projectFeatureCollection(i,o){return{type:"FeatureCollection",features:i.features.map(function(i){return projectFeature(i,o)})}}function projectFeature(i,o){return{type:"Feature",id:i.id,properties:i.properties,geometry:projectGeometry(i.geometry,o)}}function projectGeometry(i,o){var s;if(!i)return null;if("GeometryCollection"===i.type)return{type:"GeometryCollection",geometries:i.geometries.map(function(i){return projectGeometry(i,o)})};switch(i.type){case"Point":case"MultiPoint":s=e9;break;case"LineString":case"MultiLineString":s=te;break;case"Polygon":case"MultiPolygon":case"Sphere":s=tt;break;default:return null}return(0,eR.Z)(i,o(s)),s.result()}collignonK.invert=function(i,o){return collignonRaw.invert(i/e6,o)};var e8=[],e7=[],e9={point:function(i,o){e8.push([i,o])},result:function(){var i=e8.length?e8.length<2?{type:"Point",coordinates:e8[0]}:{type:"MultiPoint",coordinates:e8}:null;return e8=[],i}},te={lineStart:noop,point:function(i,o){e8.push([i,o])},lineEnd:function(){e8.length&&(e7.push(e8),e8=[])},result:function(){var i=e7.length?e7.length<2?{type:"LineString",coordinates:e7[0]}:{type:"MultiLineString",coordinates:e7}:null;return e7=[],i}},tt={polygonStart:noop,lineStart:noop,point:function(i,o){e8.push([i,o])},lineEnd:function(){var i=e8.length;if(i){do e8.push(e8[0].slice());while(++i<4);e7.push(e8),e8=[]}},polygonEnd:noop,result:function(){if(!e7.length)return null;var i=[],o=[];return e7.forEach(function(s){(function(i){if((o=i.length)<4)return!1;for(var o,s=0,x=i[o-1][1]*i[0][0]-i[o-1][0]*i[0][1];++s<o;)x+=i[s-1][1]*i[s][0]-i[s-1][0]*i[s][1];return x<=0})(s)?i.push([s]):o.push(s)}),o.forEach(function(o){var s=o[0];i.some(function(i){if(function(i,o){for(var s=o[0],x=o[1],_=!1,F=0,N=i.length,j=N-1;F<N;j=F++){var G=i[F],Z=G[0],X=G[1],J=i[j],$=J[0],ee=J[1];X>x^ee>x&&s<($-Z)*(x-X)/(ee-X)+Z&&(_=!_)}return _}(i[0],s))return i.push(o),!0})||i.push([o])}),e7=[],i.length?i.length>1?{type:"MultiPolygon",coordinates:i}:{type:"Polygon",coordinates:i[0]}:null}};function quincuncial(i){var o=i(es,0)[0]-i(-es,0)[0];function projectQuincuncial(s,x){var F=_(s)<es,N=i(F?s:s>0?s-eo:s+eo,x),j=(N[0]-N[1])*ec,G=(N[0]+N[1])*ec;if(F)return[j,G];var Z=o*ec,X=j>0^G>0?-1:1;return[X*j-er(G)*Z,X*G-er(j)*Z]}return i.invert&&(projectQuincuncial.invert=function(s,x){var F=(s+x)*ec,N=(x-s)*ec,j=_(F)<.5*o&&_(N)<.5*o;if(!j){var G=o*ec,Z=F>0^N>0?-1:1,X=-Z*s+(N>0?1:-1)*G,J=-Z*x+(F>0?1:-1)*G;F=(-X-J)*ec,N=(X-J)*ec}var $=i.invert(F,N);return j||($[0]+=F>0?eo:-eo),$}),(0,x.Z)(projectQuincuncial).rotate([-90,-90,45]).clipAngle(179.999)}function quincuncial_gringorten(){return quincuncial(gringortenRaw).scale(176.423)}function peirce(){return quincuncial(guyouRaw).scale(111.48)}function quantize(i,o){if(!(0<=(o=+o)&&o<=20))throw Error("invalid digits");function quantizePoint(i){var s=i.length,x=2,_=Array(s);for(_[0]=+i[0].toFixed(o),_[1]=+i[1].toFixed(o);x<s;)_[x]=i[x],++x;return _}function quantizePointsNoDuplicates(i){for(var o=quantizePoint(i[0]),s=[o],x=1;x<i.length;x++){var _=quantizePoint(i[x]);(_.length>2||_[0]!=o[0]||_[1]!=o[1])&&(s.push(_),o=_)}return 1===s.length&&i.length>1&&s.push(quantizePoint(i[i.length-1])),s}function quantizePolygon(i){return i.map(quantizePointsNoDuplicates)}function quantizeGeometry(i){var o;if(null==i)return i;switch(i.type){case"GeometryCollection":o={type:"GeometryCollection",geometries:i.geometries.map(quantizeGeometry)};break;case"Point":o={type:"Point",coordinates:quantizePoint(i.coordinates)};break;case"MultiPoint":o={type:i.type,coordinates:i.coordinates.map(quantizePoint)};break;case"LineString":o={type:i.type,coordinates:quantizePointsNoDuplicates(i.coordinates)};break;case"MultiLineString":case"Polygon":o={type:i.type,coordinates:quantizePolygon(i.coordinates)};break;case"MultiPolygon":o={type:"MultiPolygon",coordinates:i.coordinates.map(quantizePolygon)};break;default:return i}return null!=i.bbox&&(o.bbox=i.bbox),o}function quantizeFeature(i){var o={type:"Feature",properties:i.properties,geometry:quantizeGeometry(i.geometry)};return null!=i.id&&(o.id=i.id),null!=i.bbox&&(o.bbox=i.bbox),o}if(null!=i)switch(i.type){case"Feature":return quantizeFeature(i);case"FeatureCollection":var s={type:"FeatureCollection",features:i.features.map(quantizeFeature)};return null!=i.bbox&&(s.bbox=i.bbox),s;default:return quantizeGeometry(i)}return i}function rectangularPolyconicRaw(i){var o=en(i);function forward(s,x){var _=o?ei(s*o/2)/o:s/2;if(!x)return[2*_,-i];var N=2*F(_*en(x)),G=1/ei(x);return[en(N)*G,x+(1-j(N))*G-i]}return forward.invert=function(s,x){if(1e-6>_(x+=i))return[o?2*F(o*s/2)/o:s,0];var N,G=s*s+x*x,Z=0,X=10;do{var J=ei(Z),$=1/j(Z),ee=G-2*x*Z+Z*Z;Z-=N=(J*ee+2*(Z-x))/(2+ee*$*$+2*(Z-x)*J)}while(_(N)>1e-6&&--X>0);var et=s*(J=ei(Z)),er=ei(_(x)<_(Z+1/J)?.5*asin(et):.5*acos(et)+eo/4)/en(Z);return[o?2*F(o*er)/o:2*er,Z]},forward}function rectangularPolyconic(){return parallel1(rectangularPolyconicRaw).scale(131.215)}var tr=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function robinsonRaw(i,o){var s,x=$(18,36*_(o)/eo),F=Z(x),N=x-F,j=(s=tr[F])[0],G=s[1],X=(s=tr[++F])[0],J=s[1],ee=(s=tr[$(19,++F)])[0],et=s[1];return[i*(X+N*(ee-j)/2+N*N*(ee-2*X+j)/2),(o>0?es:-es)*(J+N*(et-G)/2+N*N*(et-2*J+G)/2)]}function robinson(){return(0,x.Z)(robinsonRaw).scale(152.63)}function satelliteRaw(i,o){var s=function(i){function forward(o,s){var x=j(s),_=(i-1)/(i-x*j(o));return[_*x*en(o),_*en(s)]}return forward.invert=function(o,s){var x=o*o+s*s,_=sqrt(x),F=(i-sqrt(1-x*(i+1)/(i-1)))/((i-1)/_+_/(i-1));return[N(o*F,_*sqrt(1-F*F)),_?asin(s*F/_):0]},forward}(i);if(!o)return s;var x=j(o),_=en(o);function forward(o,F){var N=s(o,F),j=N[1],G=j*_/(i-1)+x;return[N[0]*x/G,j/G]}return forward.invert=function(o,F){var N=(i-1)/(i-1-F*_);return s.invert(N*o,N*F*x)},forward}function satellite(){var i=2,o=0,s=(0,x.r)(satelliteRaw),_=s(i,o);return _.distance=function(x){return arguments.length?s(i=+x,o):i},_.tilt=function(x){return arguments.length?s(i,o=x*ep):o*ed},_.scale(432.147).clipAngle(acos(1/i)*ed-1e-6)}function nonempty(i){return i.length>0}function normalizePoint(i){return -90===i||90===i?[0,i]:[-180,Math.floor(1e4*i)/1e4]}function clampPoint(i){var o=i[0],s=i[1],x=!1;return o<=-179.9999?(o=-180,x=!0):o>=179.9999&&(o=180,x=!0),s<=-89.9999?(s=-90,x=!0):s>=89.9999&&(s=90,x=!0),x?[o,s]:i}function clampPoints(i){return i.map(clampPoint)}function extractFragments(i,o,s){for(var x=0,_=i.length;x<_;++x){var F=i[x].slice();s.push({index:-1,polygon:o,ring:F});for(var N=0,j=F.length;N<j;++N){var G=F[N],Z=G[0],X=G[1];if(Z<=-179.9999||Z>=179.9999||X<=-89.9999||X>=89.9999){F[N]=clampPoint(G);for(var J=N+1;J<j;++J){var $=F[J],ee=$[0],et=$[1];if(ee>-179.9999&&ee<179.9999&&et>-89.9999&&et<89.9999)break}if(J===N+1)continue;if(N){var er={index:-1,polygon:o,ring:F.slice(0,N+1)};er.ring[er.ring.length-1]=normalizePoint(X),s[s.length-1]=er}else s.pop();if(J>=j)break;s.push({index:-1,polygon:o,ring:F=F.slice(J-1)}),F[0]=normalizePoint(F[0][1]),N=-1,j=F.length}}}}function stitchFragments(i){var o,s,x,_,F,N,j=i.length,G={},Z={};for(o=0;o<j;++o){if(x=(s=i[o]).ring[0],F=s.ring[s.ring.length-1],x[0]===F[0]&&x[1]===F[1]){s.polygon.push(s.ring),i[o]=null;continue}s.index=o,G[x]=Z[F]=s}for(o=0;o<j;++o)if(s=i[o]){if(x=s.ring[0],F=s.ring[s.ring.length-1],_=Z[x],N=G[F],delete G[x],delete Z[F],x[0]===F[0]&&x[1]===F[1]){s.polygon.push(s.ring);continue}_?(delete Z[x],delete G[_.ring[0]],_.ring.pop(),i[_.index]=null,s={index:-1,polygon:_.polygon,ring:_.ring.concat(s.ring)},_===N?s.polygon.push(s.ring):(s.index=j++,i.push(G[s.ring[0]]=Z[s.ring[s.ring.length-1]]=s))):N?(delete G[F],delete Z[N.ring[N.ring.length-1]],s.ring.pop(),s={index:j++,polygon:N.polygon,ring:s.ring.concat(N.ring)},i[N.index]=null,i.push(G[s.ring[0]]=Z[s.ring[s.ring.length-1]]=s)):(s.ring.push(s.ring[0]),s.polygon.push(s.ring))}}function stitchFeature(i){var o={type:"Feature",geometry:stitchGeometry(i.geometry)};return null!=i.id&&(o.id=i.id),null!=i.bbox&&(o.bbox=i.bbox),null!=i.properties&&(o.properties=i.properties),o}function stitchGeometry(i){if(null==i)return i;switch(i.type){case"GeometryCollection":o={type:"GeometryCollection",geometries:i.geometries.map(stitchGeometry)};break;case"Point":o={type:"Point",coordinates:clampPoint(i.coordinates)};break;case"MultiPoint":case"LineString":o={type:i.type,coordinates:clampPoints(i.coordinates)};break;case"MultiLineString":o={type:"MultiLineString",coordinates:i.coordinates.map(clampPoints)};break;case"Polygon":var o,s,x,_,F=[];extractFragments(i.coordinates,F,s=[]),stitchFragments(s),o={type:"Polygon",coordinates:F};break;case"MultiPolygon":s=[],x=-1;for(var N=Array(_=i.coordinates.length);++x<_;)extractFragments(i.coordinates[x],N[x]=[],s);stitchFragments(s),o={type:"MultiPolygon",coordinates:N.filter(nonempty)};break;default:return i}return null!=i.bbox&&(o.bbox=i.bbox),o}function stitch(i){if(null==i)return i;switch(i.type){case"Feature":return stitchFeature(i);case"FeatureCollection":var o={type:"FeatureCollection",features:i.features.map(stitchFeature)};return null!=i.bbox&&(o.bbox=i.bbox),o;default:return stitchGeometry(i)}}function timesRaw(i,o){var s=ei(o/2),x=en(el*s);return[i*(.74482-.34588*x*x),1.70711*s]}function times(){return(0,x.Z)(timesRaw).scale(146.153)}function twoPoint(i,o,s){var _=(0,e2.Z)(o,s),F=_(.5),N=(0,eT.Z)([-F[0],-F[1]])(o),j=_.distance/2,G=-asin(en(N[1]*ep)/en(j)),Z=[-F[0],-F[1],-(N[0]>0?eo-G:G)*ed],X=(0,x.Z)(i(j)).rotate(Z),J=(0,eT.Z)(Z),$=X.center;return delete X.rotate,X.center=function(i){return arguments.length?$(J(i)):J.invert($())},X.clipAngle(90)}function twoPointAzimuthalRaw(i){var o=j(i);function forward(i,s){var x=(0,e3.M)(i,s);return x[0]*=o,x}return forward.invert=function(i,s){return e3.M.invert(i/o,s)},forward}function twoPointAzimuthalUsa(){return twoPointAzimuthal([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function twoPointAzimuthal(i,o){return twoPoint(twoPointAzimuthalRaw,i,o)}function twoPointEquidistantRaw(i){if(!(i*=2))return ey.N;var o=-i/2,s=-o,x=i*i,_=ei(s),F=.5/en(s);function forward(_,F){var N=acos(j(F)*j(_-o)),G=acos(j(F)*j(_-s)),Z=F<0?-1:1;return N*=N,G*=G,[(N-G)/(2*i),Z*sqrt(4*x*G-(x-N+G)*(x-N+G))/(2*i)]}return forward.invert=function(i,x){var G,Z,X=x*x,J=j(sqrt(X+(G=i+o)*G)),$=j(sqrt(X+(G=i+s)*G));return[N(Z=J-$,G=(J+$)*_),(x<0?-1:1)*acos(sqrt(G*G+Z*Z)*F)]},forward}function twoPointEquidistantUsa(){return twoPointEquidistant([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function twoPointEquidistant(i,o){return twoPoint(twoPointEquidistantRaw,i,o)}function vanDerGrintenRaw(i,o){if(1e-6>_(o))return[i,0];var s=_(o/es),x=asin(s);if(1e-6>_(i)||1e-6>_(_(o)-es))return[0,er(o)*eo*ei(x/2)];var F=j(x),N=_(eo/i-i/eo)/2,G=N*N,Z=F/(s+F-1),X=Z*(2/s-1),J=X*X,$=J+G,ee=Z-J,et=G+Z;return[er(i)*eo*(N*ee+sqrt(G*ee*ee-$*(Z*Z-J)))/$,er(o)*eo*(X*et-N*sqrt((G+1)*$-et*et))/$]}function vanDerGrinten(){return(0,x.Z)(vanDerGrintenRaw).scale(79.4183)}function vanDerGrinten2Raw(i,o){if(1e-6>_(o))return[i,0];var s=_(o/es),x=asin(s);if(1e-6>_(i)||1e-6>_(_(o)-es))return[0,er(o)*eo*ei(x/2)];var F=j(x),N=_(eo/i-i/eo)/2,G=N*N,Z=F*(sqrt(1+G)-N*F)/(1+G*s*s);return[er(i)*eo*Z,er(o)*eo*sqrt(1-Z*(2*N+Z))]}function vanDerGrinten2(){return(0,x.Z)(vanDerGrinten2Raw).scale(79.4183)}function vanDerGrinten3Raw(i,o){if(1e-6>_(o))return[i,0];var s=o/es,x=asin(s);if(1e-6>_(i)||1e-6>_(_(o)-es))return[0,eo*ei(x/2)];var F=(eo/i-i/eo)/2,N=s/(1+j(x));return[eo*(er(i)*sqrt(F*F+1-N*N)-F),eo*N]}function vanDerGrinten3(){return(0,x.Z)(vanDerGrinten3Raw).scale(79.4183)}function vanDerGrinten4Raw(i,o){if(!o)return[i,0];var s=_(o);if(!i||s===es)return[0,o];var x=s/es,F=x*x,N=(8*x-F*(F+2)-5)/(2*F*(x-1)),j=N*N,G=x*N,Z=F+j+2*G,X=x+3*N,J=i/es,$=J+1/J,ee=er(_(i)-es)*sqrt($*$-4),et=ee*ee,en=(ee*(Z+j-1)+2*sqrt(Z*(F+j*et-1)+(1-F)*(F*(X*X+4*j)+12*G*j+4*j*j)))/(4*Z+et);return[er(i)*es*en,er(o)*es*sqrt(1+ee*_(en)-en*en)]}function vanDerGrinten4(){return(0,x.Z)(vanDerGrinten4Raw).scale(127.16)}function wagnerRaw(i,o,s,x){var _=eo/3;i=J(i,1e-6),o=J(o,1e-6),i=$(i,es),o=$(o,eo-1e-6),s=$(s=J(s,0),99.999999);var F=(x=J(x,1e-6))/100,G=acos((s/100+1)*j(_))/_,Z=en(i)/en(G*es),X=o/eo,ee=sqrt(F*en(i/2)/en(o/2));return function(i,o,s,x,_){function forward(F,N){var G=s*en(x*N),Z=sqrt(1-G*G),X=sqrt(2/(1+Z*j(F*=_)));return[i*Z*X*en(F),o*G*X]}return forward.invert=function(F,j){var G=F/i,Z=j/o,X=sqrt(G*G+Z*Z),J=2*asin(X/2);return[N(F*ei(J),i*X)/_,X&&asin(j*en(J)/(o*s*X))/x]},forward}(ee/sqrt(X*Z*G),1/(ee*sqrt(X*Z*G)),Z,G,X)}function wagner(){var i=65*ep,o=60*ep,s=20,_=200,F=(0,x.r)(wagnerRaw),N=F(i,o,s,_);return N.poleline=function(x){return arguments.length?F(i=+x*ep,o,s,_):i*ed},N.parallels=function(x){return arguments.length?F(i,o=+x*ep,s,_):o*ed},N.inflation=function(x){return arguments.length?F(i,o,s=+x,_):s},N.ratio=function(x){return arguments.length?F(i,o,s,_=+x):_},N.scale(163.775)}function wagner7(){return wagner().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}tr.forEach(function(i){i[1]*=1.0144}),robinsonRaw.invert=function(i,o){var s=o/es,x=90*s,F=$(18,_(x/5)),N=J(0,Z(F));do{var j=tr[N][1],G=tr[N+1][1],X=tr[$(19,N+2)][1],ee=X-j,et=X-2*G+j,er=2*(_(s)-G)/ee,en=et/ee,ei=er*(1-en*er*(1-2*en*er));if(ei>=0||1===N){x=(o>=0?5:-5)*(ei+F);var eo,el=50;do N=Z(F=$(18,_(x)/5)),ei=F-N,j=tr[N][1],x-=(eo=(o>=0?es:-es)*((G=tr[N+1][1])+ei*((X=tr[$(19,N+2)][1])-j)/2+ei*ei*(X-2*G+j)/2)-o)*ed;while(_(eo)>1e-12&&--el>0);break}}while(--N>=0);var ec=tr[N][0],eu=tr[N+1][0],ef=tr[$(19,N+2)][0];return[i/(eu+ei*(ef-ec)/2+ei*ei*(ef-2*eu+ec)/2),x*ep]},timesRaw.invert=function(i,o){var s=o/1.70711,x=en(el*s);return[i/(.74482-.34588*x*x),2*F(s)]},vanDerGrintenRaw.invert=function(i,o){if(1e-6>_(o))return[i,0];if(1e-6>_(i))return[0,es*en(2*F(o/eo))];var s=(i/=eo)*i,x=(o/=eo)*o,N=s+x,G=N*N,Z=-_(o)*(1+N),X=Z-2*x+s,J=-2*Z+1+2*x+G,$=x/J+(2*X*X*X/(J*J*J)-9*Z*X/(J*J))/27,ee=(Z-X*X/(3*J))/J,et=2*sqrt(-ee/3),ei=acos(3*$/(ee*et))/3;return[eo*(N-1+sqrt(1+2*(s-x)+G))/(2*i),er(o)*eo*(-et*j(ei+eo/3)-X/(3*J))]},vanDerGrinten2Raw.invert=function(i,o){if(!i)return[0,es*en(2*F(o/eo))];var s=_(i/eo),x=(1-s*s-(o/=eo)*o)/(2*s),j=sqrt(x*x+1);return[er(i)*eo*(j-x),er(o)*es*en(2*N(sqrt((1-2*x*s)*(x+j)-s),sqrt(j+x+s)))]},vanDerGrinten3Raw.invert=function(i,o){if(!o)return[i,0];var s=o/eo,x=(eo*eo*(1-s*s)-i*i)/(2*eo*i);return[i?eo*(er(i)*sqrt(x*x+1)-x):0,es*en(2*F(s))]},vanDerGrinten4Raw.invert=function(i,o){if(!i||!o)return[i,o];o/=eo;var s,x=er(i)*i/es,F=(x*x-1+4*o*o)/_(x),N=F*F,j=2*o,G=50;do{var Z=j*j,X=(8*j-Z*(Z+2)-5)/(2*Z*(j-1)),J=(3*j-Z*j-10)/(2*Z*j),$=X*X,ee=j*X,et=j+X,en=et*et,ei=j+3*X,el=en*(Z+$*N-1)+(1-Z)*(Z*(ei*ei+4*$)+$*(12*ee+4*$)),ec=-2*et*(4*ee*$+(1-4*Z+3*Z*Z)*(1+J)+$*(-6+14*Z-N+(-8+8*Z-2*N)*J)+ee*(-8+12*Z+(-10+10*Z-N)*J)),eu=sqrt(el);j-=s=(F*(en+$-1)+2*eu-x*(4*en+N))/(F*(2*X*J+2*et*(1+J))+ec/eu-8*et*(F*(-1+$+en)+2*eu)*(1+J)/(N+4*en))}while(s>1e-6&&--G>0);return[er(i)*(sqrt(F*F+4)+F)*eo/4,es*j]};var tn=4*eo+3*sqrt(3),ti=2*sqrt(2*eo*sqrt(3)/tn),ta=mollweideBromleyRaw(ti*sqrt(3)/eo,ti,tn/6);function wagner4(){return(0,x.Z)(ta).scale(176.84)}function wagner6Raw(i,o){return[i*sqrt(1-3*o*o/(eo*eo)),o]}function wagner6(){return(0,x.Z)(wagner6Raw).scale(152.63)}function wiechelRaw(i,o){var s=j(o),x=j(i)*s,_=1-x,F=j(i=N(en(i)*s,-en(o))),G=en(i);return[G*(s=sqrt(1-x*x))-F*_,-F*s-G*_]}function wiechel(){return(0,x.Z)(wiechelRaw).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function winkel3Raw(i,o){var s=aitoffRaw(i,o);return[(s[0]+i/es)/2,(s[1]+o)/2]}function winkel3(){return(0,x.Z)(winkel3Raw).scale(158.837)}wagner6Raw.invert=function(i,o){return[i/sqrt(1-3*o*o/(eo*eo)),o]},wiechelRaw.invert=function(i,o){var s=-((i*i+o*o)/2),x=sqrt(-s*(2+s)),_=o*s+i*x,F=i*s-o*x,j=sqrt(F*F+_*_);return[N(x*_,j*(1+s)),j?-asin(x*F/j):0]},winkel3Raw.invert=function(i,o){var s=i,x=o,F=25;do{var N,G=j(x),Z=en(x),X=en(2*x),J=Z*Z,$=G*G,ee=en(s),et=j(s/2),er=en(s/2),ei=er*er,eo=1-$*et*et,el=eo?acos(G*et)*sqrt(N=1/eo):N=0,ec=.5*(2*el*G*er+s/es)-i,eu=.5*(el*Z+x)-o,ef=.5*N*($*ei+el*G*et*J)+.5/es,eh=N*(ee*X/4-el*Z*er),ed=.125*N*(X*er-el*Z*$*ee),ep=.5*N*(J*et+el*ei*G)+.5,eg=eh*ed-ep*ef,em=(eu*eh-ec*ep)/eg,ey=(ec*ed-eu*ef)/eg;s-=em,x-=ey}while((_(em)>1e-6||_(ey)>1e-6)&&--F>0);return[s,x]}},33940:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(){return new Adder}function Adder(){this.reset()}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}}),Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(i){add(x,i,this.t),add(this,x.s,this.s),this.s?this.t+=x.t:this.s=x.t},valueOf:function(){return this.s}};var x=new Adder;function add(i,o,s){var x=i.s=o+s,_=x-o;i.t=o-(x-_)+(s-_)}},97860:function(i,o,s){"use strict";s.d(o,{L9:function(){return $},ZP:function(){return __WEBPACK_DEFAULT_EXPORT__},gL:function(){return et}});var x,_,F,N,j,G=s(33940),Z=s(39695),X=s(73182),J=s(72736),$=(0,G.Z)(),ee=(0,G.Z)(),et={point:X.Z,lineStart:X.Z,lineEnd:X.Z,polygonStart:function(){$.reset(),et.lineStart=areaRingStart,et.lineEnd=areaRingEnd},polygonEnd:function(){var i=+$;ee.add(i<0?Z.BZ+i:i),this.lineStart=this.lineEnd=this.point=X.Z},sphere:function(){ee.add(Z.BZ)}};function areaRingStart(){et.point=areaPointFirst}function areaRingEnd(){areaPoint(x,_)}function areaPointFirst(i,o){et.point=areaPoint,x=i,_=o,i*=Z.uR,o*=Z.uR,F=i,N=(0,Z.mC)(o=o/2+Z.pu),j=(0,Z.O$)(o)}function areaPoint(i,o){i*=Z.uR,o*=Z.uR,o=o/2+Z.pu;var s=i-F,x=s>=0?1:-1,_=x*s,G=(0,Z.mC)(o),X=(0,Z.O$)(o),J=j*X,ee=N*G+J*(0,Z.mC)(_),et=J*x*(0,Z.O$)(_);$.add((0,Z.fv)(et,ee)),F=i,N=G,j=X}function __WEBPACK_DEFAULT_EXPORT__(i){return ee.reset(),(0,J.Z)(i,et),2*ee}},77338:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x,_,F,N,j,G,Z,X,J,$,ee=s(33940),et=s(97860),er=s(7620),en=s(39695),ei=s(72736),eo=(0,ee.Z)(),es={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){es.point=boundsRingPoint,es.lineStart=boundsRingStart,es.lineEnd=boundsRingEnd,eo.reset(),et.gL.polygonStart()},polygonEnd:function(){et.gL.polygonEnd(),es.point=boundsPoint,es.lineStart=boundsLineStart,es.lineEnd=boundsLineEnd,et.L9<0?(x=-(F=180),_=-(N=90)):eo>en.Ho?N=90:eo<-en.Ho&&(_=-90),$[0]=x,$[1]=F},sphere:function(){x=-(F=180),_=-(N=90)}};function boundsPoint(i,o){J.push($=[x=i,F=i]),o<_&&(_=o),o>N&&(N=o)}function linePoint(i,o){var s=(0,er.Og)([i*en.uR,o*en.uR]);if(X){var G=(0,er.T5)(X,s),Z=[G[1],-G[0],0],ee=(0,er.T5)(Z,G);(0,er.iJ)(ee),ee=(0,er.Y1)(ee);var et,ei=i-j,eo=ei>0?1:-1,es=ee[0]*en.RW*eo,el=(0,en.Wn)(ei)>180;el^(eo*j<es&&es<eo*i)?(et=ee[1]*en.RW)>N&&(N=et):el^(eo*j<(es=(es+360)%360-180)&&es<eo*i)?(et=-ee[1]*en.RW)<_&&(_=et):(o<_&&(_=o),o>N&&(N=o)),el?i<j?angle(x,i)>angle(x,F)&&(F=i):angle(i,F)>angle(x,F)&&(x=i):F>=x?(i<x&&(x=i),i>F&&(F=i)):i>j?angle(x,i)>angle(x,F)&&(F=i):angle(i,F)>angle(x,F)&&(x=i)}else J.push($=[x=i,F=i]);o<_&&(_=o),o>N&&(N=o),X=s,j=i}function boundsLineStart(){es.point=linePoint}function boundsLineEnd(){$[0]=x,$[1]=F,es.point=boundsPoint,X=null}function boundsRingPoint(i,o){if(X){var s=i-j;eo.add((0,en.Wn)(s)>180?s+(s>0?360:-360):s)}else G=i,Z=o;et.gL.point(i,o),linePoint(i,o)}function boundsRingStart(){et.gL.lineStart()}function boundsRingEnd(){boundsRingPoint(G,Z),et.gL.lineEnd(),(0,en.Wn)(eo)>en.Ho&&(x=-(F=180)),$[0]=x,$[1]=F,X=null}function angle(i,o){return(o-=i)<0?o+360:o}function rangeCompare(i,o){return i[0]-o[0]}function rangeContains(i,o){return i[0]<=i[1]?i[0]<=o&&o<=i[1]:o<i[0]||i[1]<o}function __WEBPACK_DEFAULT_EXPORT__(i){var o,s,j,G,Z,X,ee;if(N=F=-(x=_=1/0),J=[],(0,ei.Z)(i,es),s=J.length){for(J.sort(rangeCompare),o=1,Z=[j=J[0]];o<s;++o)rangeContains(j,(G=J[o])[0])||rangeContains(j,G[1])?(angle(j[0],G[1])>angle(j[0],j[1])&&(j[1]=G[1]),angle(G[0],j[1])>angle(j[0],j[1])&&(j[0]=G[0])):Z.push(j=G);for(X=-1/0,s=Z.length-1,o=0,j=Z[s];o<=s;j=G,++o)G=Z[o],(ee=angle(j[1],G[0]))>X&&(X=ee,x=G[0],F=j[1])}return J=$=null,x===1/0||_===1/0?[[NaN,NaN],[NaN,NaN]]:[[x,_],[F,N]]}},7620:function(i,o,s){"use strict";s.d(o,{Og:function(){return cartesian},T:function(){return cartesianScale},T5:function(){return cartesianCross},Y1:function(){return spherical},iJ:function(){return cartesianNormalizeInPlace},j9:function(){return cartesianDot},s0:function(){return cartesianAddInPlace}});var x=s(39695);function spherical(i){return[(0,x.fv)(i[1],i[0]),(0,x.ZR)(i[2])]}function cartesian(i){var o=i[0],s=i[1],_=(0,x.mC)(s);return[_*(0,x.mC)(o),_*(0,x.O$)(o),(0,x.O$)(s)]}function cartesianDot(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}function cartesianCross(i,o){return[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]}function cartesianAddInPlace(i,o){i[0]+=o[0],i[1]+=o[1],i[2]+=o[2]}function cartesianScale(i,o){return[i[0]*o,i[1]*o,i[2]*o]}function cartesianNormalizeInPlace(i){var o=(0,x._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=o,i[1]/=o,i[2]/=o}},66624:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es=s(39695),el=s(73182),ec=s(72736),eu={sphere:el.Z,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){eu.lineStart=centroidRingStart,eu.lineEnd=centroidRingEnd},polygonEnd:function(){eu.lineStart=centroidLineStart,eu.lineEnd=centroidLineEnd}};function centroidPoint(i,o){i*=es.uR,o*=es.uR;var s=(0,es.mC)(o);centroidPointCartesian(s*(0,es.mC)(i),s*(0,es.O$)(i),(0,es.O$)(o))}function centroidPointCartesian(i,o,s){++x,F+=(i-F)/x,N+=(o-N)/x,j+=(s-j)/x}function centroidLineStart(){eu.point=centroidLinePointFirst}function centroidLinePointFirst(i,o){i*=es.uR,o*=es.uR;var s=(0,es.mC)(o);en=s*(0,es.mC)(i),ei=s*(0,es.O$)(i),eo=(0,es.O$)(o),eu.point=centroidLinePoint,centroidPointCartesian(en,ei,eo)}function centroidLinePoint(i,o){i*=es.uR,o*=es.uR;var s=(0,es.mC)(o),x=s*(0,es.mC)(i),F=s*(0,es.O$)(i),N=(0,es.O$)(o),j=(0,es.fv)((0,es._b)((j=ei*N-eo*F)*j+(j=eo*x-en*N)*j+(j=en*F-ei*x)*j),en*x+ei*F+eo*N);_+=j,G+=j*(en+(en=x)),Z+=j*(ei+(ei=F)),X+=j*(eo+(eo=N)),centroidPointCartesian(en,ei,eo)}function centroidLineEnd(){eu.point=centroidPoint}function centroidRingStart(){eu.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(et,er),eu.point=centroidPoint}function centroidRingPointFirst(i,o){et=i,er=o,i*=es.uR,o*=es.uR,eu.point=centroidRingPoint;var s=(0,es.mC)(o);en=s*(0,es.mC)(i),ei=s*(0,es.O$)(i),eo=(0,es.O$)(o),centroidPointCartesian(en,ei,eo)}function centroidRingPoint(i,o){i*=es.uR,o*=es.uR;var s=(0,es.mC)(o),x=s*(0,es.mC)(i),F=s*(0,es.O$)(i),N=(0,es.O$)(o),j=ei*N-eo*F,et=eo*x-en*N,er=en*F-ei*x,el=(0,es._b)(j*j+et*et+er*er),ec=(0,es.ZR)(el),eu=el&&-ec/el;J+=eu*j,$+=eu*et,ee+=eu*er,_+=ec,G+=ec*(en+(en=x)),Z+=ec*(ei+(ei=F)),X+=ec*(eo+(eo=N)),centroidPointCartesian(en,ei,eo)}function __WEBPACK_DEFAULT_EXPORT__(i){x=_=F=N=j=G=Z=X=J=$=ee=0,(0,ec.Z)(i,eu);var o=J,s=$,et=ee,er=o*o+s*s+et*et;return er<es.aW&&(o=G,s=Z,et=X,_<es.Ho&&(o=F,s=N,et=j),(er=o*o+s*s+et*et)<es.aW)?[NaN,NaN]:[(0,es.fv)(s,o)*es.RW,(0,es.ZR)(et/(0,es._b)(er))*es.RW]}},7613:function(i,o,s){"use strict";s.d(o,{m:function(){return circleStream},Z:function(){return circle}});var x=s(7620);function constant(i){return function(){return i}}var _=s(39695),F=s(49386);function circleStream(i,o,s,F,N,j){if(s){var G=(0,_.mC)(o),Z=(0,_.O$)(o),X=F*s;null==N?(N=o+F*_.BZ,j=o-X/2):(N=circleRadius(G,N),j=circleRadius(G,j),(F>0?N<j:N>j)&&(N+=F*_.BZ));for(var J,$=N;F>0?$>j:$<j;$-=X)J=(0,x.Y1)([G,-Z*(0,_.mC)($),-Z*(0,_.O$)($)]),i.point(J[0],J[1])}}function circleRadius(i,o){o=(0,x.Og)(o),o[0]-=i,(0,x.iJ)(o);var s=(0,_.Kh)(-o[1]);return((0>-o[2]?-s:s)+_.BZ-_.Ho)%_.BZ}function circle(){var i,o,s=constant([0,0]),x=constant(90),N=constant(6),j={point:function(s,x){i.push(s=o(s,x)),s[0]*=_.RW,s[1]*=_.RW}};function circle(){var G=s.apply(this,arguments),Z=x.apply(this,arguments)*_.uR,X=N.apply(this,arguments)*_.uR;return i=[],o=(0,F.I)(-G[0]*_.uR,-G[1]*_.uR,0).invert,circleStream(j,Z,X,1),G={type:"Polygon",coordinates:[i]},i=o=null,G}return circle.center=function(i){return arguments.length?(s="function"==typeof i?i:constant([+i[0],+i[1]]),circle):s},circle.radius=function(i){return arguments.length?(x="function"==typeof i?i:constant(+i),circle):x},circle.precision=function(i){return arguments.length?(N="function"==typeof i?i:constant(+i),circle):N},circle}},87070:function(i,o,s){"use strict";var x=s(97023),_=s(39695);o.Z=(0,x.Z)(function(){return!0},function(i){var o,s=NaN,x=NaN,F=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(N,j){var G,Z,X,J,$,ee,et=N>0?_.pi:-_.pi,er=(0,_.Wn)(N-s);(0,_.Wn)(er-_.pi)<_.Ho?(i.point(s,x=(x+j)/2>0?_.ou:-_.ou),i.point(F,x),i.lineEnd(),i.lineStart(),i.point(et,x),i.point(N,x),o=0):F!==et&&er>=_.pi&&((0,_.Wn)(s-F)<_.Ho&&(s-=F*_.Ho),(0,_.Wn)(N-et)<_.Ho&&(N-=et*_.Ho),G=s,Z=x,X=N,ee=(0,_.O$)(G-X),x=(0,_.Wn)(ee)>_.Ho?(0,_.z4)(((0,_.O$)(Z)*($=(0,_.mC)(j))*(0,_.O$)(X)-(0,_.O$)(j)*(J=(0,_.mC)(Z))*(0,_.O$)(G))/(J*$*ee)):(Z+j)/2,i.point(F,x),i.lineEnd(),i.lineStart(),i.point(et,x),o=0),i.point(s=N,x=j),F=et},lineEnd:function(){i.lineEnd(),s=x=NaN},clean:function(){return 2-o}}},function(i,o,s,x){var F;if(null==i)F=s*_.ou,x.point(-_.pi,F),x.point(0,F),x.point(_.pi,F),x.point(_.pi,0),x.point(_.pi,-F),x.point(0,-F),x.point(-_.pi,-F),x.point(-_.pi,0),x.point(-_.pi,F);else if((0,_.Wn)(i[0]-o[0])>_.Ho){var N=i[0]<o[0]?_.pi:-_.pi;F=s*N/2,x.point(-N,F),x.point(0,F),x.point(N,F)}else x.point(o[0],o[1])},[-_.pi,-_.ou])},85272:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(73182);function __WEBPACK_DEFAULT_EXPORT__(){var i,o=[];return{point:function(o,s,x){i.push([o,s,x])},lineStart:function(){o.push(i=[])},lineEnd:x.Z,rejoin:function(){o.length>1&&o.push(o.pop().concat(o.shift()))},result:function(){var s=o;return o=[],i=null,s}}}},1457:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(7620),_=s(7613),F=s(39695),N=s(67108),j=s(97023);function __WEBPACK_DEFAULT_EXPORT__(i){var o=(0,F.mC)(i),s=6*F.uR,G=o>0,Z=(0,F.Wn)(o)>F.Ho;function visible(i,s){return(0,F.mC)(i)*(0,F.mC)(s)>o}function intersect(i,s,_){var N=(0,x.Og)(i),j=(0,x.Og)(s),G=[1,0,0],Z=(0,x.T5)(N,j),X=(0,x.j9)(Z,Z),J=Z[0],$=X-J*J;if(!$)return!_&&i;var ee=o*X/$,et=-o*J/$,er=(0,x.T5)(G,Z),en=(0,x.T)(G,ee),ei=(0,x.T)(Z,et);(0,x.s0)(en,ei);var eo=(0,x.j9)(en,er),es=(0,x.j9)(er,er),el=eo*eo-es*((0,x.j9)(en,en)-1);if(!(el<0)){var ec=(0,F._b)(el),eu=(0,x.T)(er,(-eo-ec)/es);if((0,x.s0)(eu,en),eu=(0,x.Y1)(eu),!_)return eu;var ef,eh=i[0],ed=s[0],ep=i[1],eg=s[1];ed<eh&&(ef=eh,eh=ed,ed=ef);var em=ed-eh,ey=(0,F.Wn)(em-F.pi)<F.Ho,ev=ey||em<F.Ho;if(!ey&&eg<ep&&(ef=ep,ep=eg,eg=ef),ev?ey?ep+eg>0^eu[1]<((0,F.Wn)(eu[0]-eh)<F.Ho?ep:eg):ep<=eu[1]&&eu[1]<=eg:em>F.pi^(eh<=eu[0]&&eu[0]<=ed)){var ex=(0,x.T)(er,(-eo+ec)/es);return(0,x.s0)(ex,en),[eu,(0,x.Y1)(ex)]}}}function code(o,s){var x=G?i:F.pi-i,_=0;return o<-x?_|=1:o>x&&(_|=2),s<-x?_|=4:s>x&&(_|=8),_}return(0,j.Z)(visible,function(i){var o,s,x,_,j;return{lineStart:function(){_=x=!1,j=1},point:function(X,J){var $,ee,et=[X,J],er=visible(X,J),en=G?er?0:code(X,J):er?code(X+(X<0?F.pi:-F.pi),J):0;!o&&(_=x=er)&&i.lineStart(),er!==x&&(!(ee=intersect(o,et))||(0,N.Z)(o,ee)||(0,N.Z)(et,ee))&&(et[2]=1),er!==x?(j=0,er?(i.lineStart(),ee=intersect(et,o),i.point(ee[0],ee[1])):(ee=intersect(o,et),i.point(ee[0],ee[1],2),i.lineEnd()),o=ee):Z&&o&&G^er&&!(en&s)&&($=intersect(et,o,!0))&&(j=0,G?(i.lineStart(),i.point($[0][0],$[0][1]),i.point($[1][0],$[1][1]),i.lineEnd()):(i.point($[1][0],$[1][1]),i.lineEnd(),i.lineStart(),i.point($[0][0],$[0][1],3))),!er||o&&(0,N.Z)(o,et)||i.point(et[0],et[1]),o=et,x=er,s=en},lineEnd:function(){x&&i.lineEnd(),o=null},clean:function(){return j|(_&&x)<<1}}},function(o,x,F,N){(0,_.m)(N,i,s,F,o,x)},G?[0,-i]:[-F.pi,i-F.pi])}},97023:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(85272),_=s(46225),F=s(39695),N=s(23071),j=s(33064);function __WEBPACK_DEFAULT_EXPORT__(i,o,s,F){return function(G){var Z,X,J,$=o(G),ee=(0,x.Z)(),et=o(ee),er=!1,en={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){en.point=pointRing,en.lineStart=ringStart,en.lineEnd=ringEnd,X=[],Z=[]},polygonEnd:function(){en.point=point,en.lineStart=lineStart,en.lineEnd=lineEnd,X=(0,j.TS)(X);var i=(0,N.Z)(Z,F);X.length?(er||(G.polygonStart(),er=!0),(0,_.Z)(X,compareIntersection,i,s,G)):i&&(er||(G.polygonStart(),er=!0),G.lineStart(),s(null,null,1,G),G.lineEnd()),er&&(G.polygonEnd(),er=!1),X=Z=null},sphere:function(){G.polygonStart(),G.lineStart(),s(null,null,1,G),G.lineEnd(),G.polygonEnd()}};function point(o,s){i(o,s)&&G.point(o,s)}function pointLine(i,o){$.point(i,o)}function lineStart(){en.point=pointLine,$.lineStart()}function lineEnd(){en.point=point,$.lineEnd()}function pointRing(i,o){J.push([i,o]),et.point(i,o)}function ringStart(){et.lineStart(),J=[]}function ringEnd(){pointRing(J[0][0],J[0][1]),et.lineEnd();var i,o,s,x,_=et.clean(),F=ee.result(),N=F.length;if(J.pop(),Z.push(J),J=null,N){if(1&_){if((o=(s=F[0]).length-1)>0){for(er||(G.polygonStart(),er=!0),G.lineStart(),i=0;i<o;++i)G.point((x=s[i])[0],x[1]);G.lineEnd()}return}N>1&&2&_&&F.push(F.pop().concat(F.shift())),X.push(F.filter(validSegment))}}return en}}function validSegment(i){return i.length>1}function compareIntersection(i,o){return((i=i.x)[0]<0?i[1]-F.ou-F.Ho:F.ou-i[1])-((o=o.x)[0]<0?o[1]-F.ou-F.Ho:F.ou-o[1])}},87605:function(i,o,s){"use strict";s.d(o,{Z:function(){return clipRectangle}});var x=s(39695),_=s(85272),F=s(46225),N=s(33064);function clipRectangle(i,o,s,j){function visible(x,_){return i<=x&&x<=s&&o<=_&&_<=j}function interpolate(x,_,F,N){var G=0,Z=0;if(null==x||(G=corner(x,F))!==(Z=corner(_,F))||0>comparePoint(x,_)^F>0)do N.point(0===G||3===G?i:s,G>1?j:o);while((G=(G+F+4)%4)!==Z);else N.point(_[0],_[1])}function corner(_,F){return(0,x.Wn)(_[0]-i)<x.Ho?F>0?0:3:(0,x.Wn)(_[0]-s)<x.Ho?F>0?2:1:(0,x.Wn)(_[1]-o)<x.Ho?F>0?1:0:F>0?3:2}function compareIntersection(i,o){return comparePoint(i.x,o.x)}function comparePoint(i,o){var s=corner(i,1),x=corner(o,1);return s!==x?s-x:0===s?o[1]-i[1]:1===s?i[0]-o[0]:2===s?i[1]-o[1]:o[0]-i[0]}return function(x){var G,Z,X,J,$,ee,et,er,en,ei,eo,es=x,el=(0,_.Z)(),ec={point:point,lineStart:function(){ec.point=linePoint,Z&&Z.push(X=[]),ei=!0,en=!1,et=er=NaN},lineEnd:function(){G&&(linePoint(J,$),ee&&en&&el.rejoin(),G.push(el.result())),ec.point=point,en&&es.lineEnd()},polygonStart:function(){es=el,G=[],Z=[],eo=!0},polygonEnd:function(){var o=function(){for(var o=0,s=0,x=Z.length;s<x;++s)for(var _,F,N=Z[s],G=1,X=N.length,J=N[0],$=J[0],ee=J[1];G<X;++G)_=$,F=ee,$=(J=N[G])[0],ee=J[1],F<=j?ee>j&&($-_)*(j-F)>(ee-F)*(i-_)&&++o:ee<=j&&($-_)*(j-F)<(ee-F)*(i-_)&&--o;return o}(),s=eo&&o,_=(G=(0,N.TS)(G)).length;(s||_)&&(x.polygonStart(),s&&(x.lineStart(),interpolate(null,null,1,x),x.lineEnd()),_&&(0,F.Z)(G,compareIntersection,o,interpolate,x),x.polygonEnd()),es=x,G=Z=X=null}};function point(i,o){visible(i,o)&&es.point(i,o)}function linePoint(x,_){var F=visible(x,_);if(Z&&X.push([x,_]),ei)J=x,$=_,ee=F,ei=!1,F&&(es.lineStart(),es.point(x,_));else if(F&&en)es.point(x,_);else{var N=[et=Math.max(-1e9,Math.min(1e9,et)),er=Math.max(-1e9,Math.min(1e9,er))],G=[x=Math.max(-1e9,Math.min(1e9,x)),_=Math.max(-1e9,Math.min(1e9,_))];(function(i,o,s,x,_,F){var N,j=i[0],G=i[1],Z=o[0],X=o[1],J=0,$=1,ee=Z-j,et=X-G;if(N=s-j,ee||!(N>0)){if(N/=ee,ee<0){if(N<J)return;N<$&&($=N)}else if(ee>0){if(N>$)return;N>J&&(J=N)}if(N=_-j,ee||!(N<0)){if(N/=ee,ee<0){if(N>$)return;N>J&&(J=N)}else if(ee>0){if(N<J)return;N<$&&($=N)}if(N=x-G,et||!(N>0)){if(N/=et,et<0){if(N<J)return;N<$&&($=N)}else if(et>0){if(N>$)return;N>J&&(J=N)}if(N=F-G,et||!(N<0)){if(N/=et,et<0){if(N>$)return;N>J&&(J=N)}else if(et>0){if(N<J)return;N<$&&($=N)}return J>0&&(i[0]=j+J*ee,i[1]=G+J*et),$<1&&(o[0]=j+$*ee,o[1]=G+$*et),!0}}}}})(N,G,i,o,s,j)?(en||(es.lineStart(),es.point(N[0],N[1])),es.point(G[0],G[1]),F||es.lineEnd(),eo=!1):F&&(es.lineStart(),es.point(x,_),eo=!1)}et=x,er=_,en=F}return ec}}},46225:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(67108),_=s(39695);function Intersection(i,o,s,x){this.x=i,this.z=o,this.o=s,this.e=x,this.v=!1,this.n=this.p=null}function __WEBPACK_DEFAULT_EXPORT__(i,o,s,F,N){var j,G,Z=[],X=[];if(i.forEach(function(i){if(!((o=i.length-1)<=0)){var o,s,F=i[0],G=i[o];if((0,x.Z)(F,G)){if(!F[2]&&!G[2]){for(N.lineStart(),j=0;j<o;++j)N.point((F=i[j])[0],F[1]);N.lineEnd();return}G[0]+=2*_.Ho}Z.push(s=new Intersection(F,i,null,!0)),X.push(s.o=new Intersection(F,null,s,!1)),Z.push(s=new Intersection(G,i,null,!1)),X.push(s.o=new Intersection(G,null,s,!0))}}),Z.length){for(X.sort(o),link(Z),link(X),j=0,G=X.length;j<G;++j)X[j].e=s=!s;for(var J,$,ee=Z[0];;){for(var et=ee,er=!0;et.v;)if((et=et.n)===ee)return;J=et.z,N.lineStart();do{if(et.v=et.o.v=!0,et.e){if(er)for(j=0,G=J.length;j<G;++j)N.point(($=J[j])[0],$[1]);else F(et.x,et.n.x,1,N);et=et.n}else{if(er)for(j=(J=et.p.z).length-1;j>=0;--j)N.point(($=J[j])[0],$[1]);else F(et.x,et.p.x,-1,N);et=et.p}J=(et=et.o).z,er=!er}while(!et.v);N.lineEnd()}}}function link(i){if(o=i.length){for(var o,s,x=0,_=i[0];++x<o;)_.n=s=i[x],s.p=_,_=s;_.n=s=i[0],s.p=_}}},96059:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i,o){function compose(s,x){return o((s=i(s,x))[0],s[1])}return i.invert&&o.invert&&(compose.invert=function(s,x){return(s=o.invert(s,x))&&i.invert(s[0],s[1])}),compose}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},8593:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i){return i}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},27362:function(i,o,s){"use strict";s.r(o),s.d(o,{geoAlbers:function(){return albers},geoAlbersUsa:function(){return albersUsa},geoArea:function(){return x.ZP},geoAzimuthalEqualArea:function(){return eY.Z},geoAzimuthalEqualAreaRaw:function(){return eY.l},geoAzimuthalEquidistant:function(){return eX.Z},geoAzimuthalEquidistantRaw:function(){return eX.N},geoBounds:function(){return _.Z},geoCentroid:function(){return F.Z},geoCircle:function(){return N.Z},geoClipAntimeridian:function(){return j.Z},geoClipCircle:function(){return G.Z},geoClipExtent:function(){return extent},geoClipRectangle:function(){return Z.Z},geoConicConformal:function(){return conicConformal},geoConicConformalRaw:function(){return conicConformalRaw},geoConicEqualArea:function(){return conicEqualArea},geoConicEqualAreaRaw:function(){return conicEqualAreaRaw},geoConicEquidistant:function(){return conicEquidistant},geoConicEquidistantRaw:function(){return conicEquidistantRaw},geoContains:function(){return contains},geoDistance:function(){return distance},geoEqualEarth:function(){return equalEarth},geoEqualEarthRaw:function(){return equalEarthRaw},geoEquirectangular:function(){return eJ.Z},geoEquirectangularRaw:function(){return eJ.k},geoGnomonic:function(){return eQ.Z},geoGnomonicRaw:function(){return eQ.M},geoGraticule:function(){return graticule},geoGraticule10:function(){return graticule10},geoIdentity:function(){return projection_identity},geoInterpolate:function(){return ey.Z},geoLength:function(){return src_length},geoMercator:function(){return mercator},geoMercatorRaw:function(){return mercatorRaw},geoNaturalEarth1:function(){return e1.Z},geoNaturalEarth1Raw:function(){return e1.K},geoOrthographic:function(){return e2.Z},geoOrthographicRaw:function(){return e2.I},geoPath:function(){return path},geoProjection:function(){return eW.Z},geoProjectionMutator:function(){return eW.r},geoRotation:function(){return eK.Z},geoStereographic:function(){return stereographic},geoStereographicRaw:function(){return stereographicRaw},geoStream:function(){return ei.Z},geoTransform:function(){return e0.Z},geoTransverseMercator:function(){return transverseMercator},geoTransverseMercatorRaw:function(){return transverseMercatorRaw}});var x=s(97860),_=s(77338),F=s(66624),N=s(7613),j=s(87070),G=s(1457),Z=s(87605);function extent(){var i,o,s,x=0,_=0,F=960,N=500;return s={stream:function(s){return i&&o===s?i:i=(0,Z.Z)(x,_,F,N)(o=s)},extent:function(j){return arguments.length?(x=+j[0][0],_=+j[0][1],F=+j[1][0],N=+j[1][1],i=o=null,s):[[x,_],[F,N]]}}}var X,J,$,ee=s(23071),et=s(33940),er=s(39695),en=s(73182),ei=s(72736),eo=(0,et.Z)(),es={sphere:en.Z,point:en.Z,lineStart:function(){es.point=lengthPointFirst,es.lineEnd=lengthLineEnd},lineEnd:en.Z,polygonStart:en.Z,polygonEnd:en.Z};function lengthLineEnd(){es.point=es.lineEnd=en.Z}function lengthPointFirst(i,o){i*=er.uR,o*=er.uR,X=i,J=(0,er.O$)(o),$=(0,er.mC)(o),es.point=lengthPoint}function lengthPoint(i,o){i*=er.uR,o*=er.uR;var s=(0,er.O$)(o),x=(0,er.mC)(o),_=(0,er.Wn)(i-X),F=(0,er.mC)(_),N=x*(0,er.O$)(_),j=$*s-J*x*F,G=J*s+$*x*F;eo.add((0,er.fv)((0,er._b)(N*N+j*j),G)),X=i,J=s,$=x}function src_length(i){return eo.reset(),(0,ei.Z)(i,es),+eo}var el=[null,null],ec={type:"LineString",coordinates:el};function distance(i,o){return el[0]=i,el[1]=o,src_length(ec)}var eu={Feature:function(i,o){return containsGeometry(i.geometry,o)},FeatureCollection:function(i,o){for(var s=i.features,x=-1,_=s.length;++x<_;)if(containsGeometry(s[x].geometry,o))return!0;return!1}},ef={Sphere:function(){return!0},Point:function(i,o){return 0===distance(i.coordinates,o)},MultiPoint:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)if(0===distance(s[x],o))return!0;return!1},LineString:function(i,o){return containsLine(i.coordinates,o)},MultiLineString:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)if(containsLine(s[x],o))return!0;return!1},Polygon:function(i,o){return containsPolygon(i.coordinates,o)},MultiPolygon:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)if(containsPolygon(s[x],o))return!0;return!1},GeometryCollection:function(i,o){for(var s=i.geometries,x=-1,_=s.length;++x<_;)if(containsGeometry(s[x],o))return!0;return!1}};function containsGeometry(i,o){return!!(i&&ef.hasOwnProperty(i.type))&&ef[i.type](i,o)}function containsLine(i,o){for(var s,x,_,F=0,N=i.length;F<N;F++){if(0===(x=distance(i[F],o))||F>0&&(_=distance(i[F],i[F-1]))>0&&s<=_&&x<=_&&(s+x-_)*(1-Math.pow((s-x)/_,2))<er.aW*_)return!0;s=x}return!1}function containsPolygon(i,o){return!!(0,ee.Z)(i.map(ringRadians),pointRadians(o))}function ringRadians(i){return(i=i.map(pointRadians)).pop(),i}function pointRadians(i){return[i[0]*er.uR,i[1]*er.uR]}function contains(i,o){return(i&&eu.hasOwnProperty(i.type)?eu[i.type]:containsGeometry)(i,o)}var eh=s(33064);function graticuleX(i,o,s){var x=(0,eh.w6)(i,o-er.Ho,s).concat(o);return function(i){return x.map(function(o){return[i,o]})}}function graticuleY(i,o,s){var x=(0,eh.w6)(i,o-er.Ho,s).concat(o);return function(i){return x.map(function(o){return[o,i]})}}function graticule(){var i,o,s,x,_,F,N,j,G,Z,X,J,$=10,ee=10,et=90,en=360,ei=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return(0,eh.w6)((0,er.mD)(x/et)*et,s,et).map(X).concat((0,eh.w6)((0,er.mD)(j/en)*en,N,en).map(J)).concat((0,eh.w6)((0,er.mD)(o/$)*$,i,$).filter(function(i){return(0,er.Wn)(i%et)>er.Ho}).map(G)).concat((0,eh.w6)((0,er.mD)(F/ee)*ee,_,ee).filter(function(i){return(0,er.Wn)(i%en)>er.Ho}).map(Z))}return graticule.lines=function(){return lines().map(function(i){return{type:"LineString",coordinates:i}})},graticule.outline=function(){return{type:"Polygon",coordinates:[X(x).concat(J(N).slice(1),X(s).reverse().slice(1),J(j).reverse().slice(1))]}},graticule.extent=function(i){return arguments.length?graticule.extentMajor(i).extentMinor(i):graticule.extentMinor()},graticule.extentMajor=function(i){return arguments.length?(x=+i[0][0],s=+i[1][0],j=+i[0][1],N=+i[1][1],x>s&&(i=x,x=s,s=i),j>N&&(i=j,j=N,N=i),graticule.precision(ei)):[[x,j],[s,N]]},graticule.extentMinor=function(s){return arguments.length?(o=+s[0][0],i=+s[1][0],F=+s[0][1],_=+s[1][1],o>i&&(s=o,o=i,i=s),F>_&&(s=F,F=_,_=s),graticule.precision(ei)):[[o,F],[i,_]]},graticule.step=function(i){return arguments.length?graticule.stepMajor(i).stepMinor(i):graticule.stepMinor()},graticule.stepMajor=function(i){return arguments.length?(et=+i[0],en=+i[1],graticule):[et,en]},graticule.stepMinor=function(i){return arguments.length?($=+i[0],ee=+i[1],graticule):[$,ee]},graticule.precision=function($){return arguments.length?(ei=+$,G=graticuleX(F,_,90),Z=graticuleY(o,i,ei),X=graticuleX(j,N,90),J=graticuleY(x,s,ei),graticule):ei},graticule.extentMajor([[-180,-90+er.Ho],[180,90-er.Ho]]).extentMinor([[-180,-80-er.Ho],[180,80+er.Ho]])}function graticule10(){return graticule()()}var ed,ep,eg,em,ey=s(83074),ev=s(8593),ex=(0,et.Z)(),e_=(0,et.Z)(),ew={point:en.Z,lineStart:en.Z,lineEnd:en.Z,polygonStart:function(){ew.lineStart=areaRingStart,ew.lineEnd=areaRingEnd},polygonEnd:function(){ew.lineStart=ew.lineEnd=ew.point=en.Z,ex.add((0,er.Wn)(e_)),e_.reset()},result:function(){return ex.reset(),ex/2}};function areaRingStart(){ew.point=areaPointFirst}function areaPointFirst(i,o){ew.point=areaPoint,ed=eg=i,ep=em=o}function areaPoint(i,o){e_.add(em*i-eg*o),eg=i,em=o}function areaRingEnd(){areaPoint(ed,ep)}var eT,ek,eA,eS,eM=s(3559),eC=0,eE=0,eL=0,eP=0,eI=0,eO=0,eD=0,eR=0,eB=0,ez={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){ez.lineStart=centroidRingStart,ez.lineEnd=centroidRingEnd},polygonEnd:function(){ez.point=centroidPoint,ez.lineStart=centroidLineStart,ez.lineEnd=centroidLineEnd},result:function(){var i=eB?[eD/eB,eR/eB]:eO?[eP/eO,eI/eO]:eL?[eC/eL,eE/eL]:[NaN,NaN];return eC=eE=eL=eP=eI=eO=eD=eR=eB=0,i}};function centroidPoint(i,o){eC+=i,eE+=o,++eL}function centroidLineStart(){ez.point=centroidPointFirstLine}function centroidPointFirstLine(i,o){ez.point=centroidPointLine,centroidPoint(eA=i,eS=o)}function centroidPointLine(i,o){var s=i-eA,x=o-eS,_=(0,er._b)(s*s+x*x);eP+=_*(eA+i)/2,eI+=_*(eS+o)/2,eO+=_,centroidPoint(eA=i,eS=o)}function centroidLineEnd(){ez.point=centroidPoint}function centroidRingStart(){ez.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(eT,ek)}function centroidPointFirstRing(i,o){ez.point=centroidPointRing,centroidPoint(eT=eA=i,ek=eS=o)}function centroidPointRing(i,o){var s=i-eA,x=o-eS,_=(0,er._b)(s*s+x*x);eP+=_*(eA+i)/2,eI+=_*(eS+o)/2,eO+=_,eD+=(_=eS*i-eA*o)*(eA+i),eR+=_*(eS+o),eB+=3*_,centroidPoint(eA=i,eS=o)}function PathContext(i){this._context=i}PathContext.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,o){switch(this._point){case 0:this._context.moveTo(i,o),this._point=1;break;case 1:this._context.lineTo(i,o);break;default:this._context.moveTo(i+this._radius,o),this._context.arc(i,o,this._radius,0,er.BZ)}},result:en.Z};var eF,eN,ej,eU,eV,eH=(0,et.Z)(),eG={point:en.Z,lineStart:function(){eG.point=measure_lengthPointFirst},lineEnd:function(){eF&&measure_lengthPoint(eN,ej),eG.point=en.Z},polygonStart:function(){eF=!0},polygonEnd:function(){eF=null},result:function(){return eH.reset(),+eH}};function measure_lengthPointFirst(i,o){eG.point=measure_lengthPoint,eN=eU=i,ej=eV=o}function measure_lengthPoint(i,o){eU-=i,eV-=o,eH.add((0,er._b)(eU*eU+eV*eV)),eU=i,eV=o}function PathString(){this._string=[]}function string_circle(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}function path(i,o){var s,x,_=4.5;function path(i){return i&&("function"==typeof _&&x.pointRadius(+_.apply(this,arguments)),(0,ei.Z)(i,s(x))),x.result()}return path.area=function(i){return(0,ei.Z)(i,s(ew)),ew.result()},path.measure=function(i){return(0,ei.Z)(i,s(eG)),eG.result()},path.bounds=function(i){return(0,ei.Z)(i,s(eM.Z)),eM.Z.result()},path.centroid=function(i){return(0,ei.Z)(i,s(ez)),ez.result()},path.projection=function(o){return arguments.length?(s=null==o?(i=null,ev.Z):(i=o).stream,path):i},path.context=function(i){return arguments.length?(x=null==i?(o=null,new PathString):new PathContext(o=i),"function"!=typeof _&&x.pointRadius(_),path):o},path.pointRadius=function(i){return arguments.length?(_="function"==typeof i?i:(x.pointRadius(+i),+i),path):_},path.projection(i).context(o)}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(i,o){switch(this._point){case 0:this._string.push("M",i,",",o),this._point=1;break;case 1:this._string.push("L",i,",",o);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",i,",",o,this._circle)}},result:function(){if(!this._string.length)return null;var i=this._string.join("");return this._string=[],i}};var eW=s(15002);function conicProjection(i){var o=0,s=er.pi/3,x=(0,eW.r)(i),_=x(o,s);return _.parallels=function(i){return arguments.length?x(o=i[0]*er.uR,s=i[1]*er.uR):[o*er.RW,s*er.RW]},_}function conicEqualAreaRaw(i,o){var s=(0,er.O$)(i),x=(s+(0,er.O$)(o))/2;if((0,er.Wn)(x)<er.Ho)return function(i){var o=(0,er.mC)(i);function forward(i,s){return[i*o,(0,er.O$)(s)/o]}return forward.invert=function(i,s){return[i/o,(0,er.ZR)(s*o)]},forward}(i);var _=1+s*(2*x-s),F=(0,er._b)(_)/x;function project(i,o){var s=(0,er._b)(_-2*x*(0,er.O$)(o))/x;return[s*(0,er.O$)(i*=x),F-s*(0,er.mC)(i)]}return project.invert=function(i,o){var s=F-o,N=(0,er.fv)(i,(0,er.Wn)(s))*(0,er.Xx)(s);return s*x<0&&(N-=er.pi*(0,er.Xx)(i)*(0,er.Xx)(s)),[N/x,(0,er.ZR)((_-(i*i+s*s)*x*x)/(2*x))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var eZ=s(47589);function albersUsa(){var i,o,s,x,_,F,N=albers(),j=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),G=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Z={point:function(i,o){F=[i,o]}};function albersUsa(i){var o=i[0],N=i[1];return F=null,s.point(o,N),F||(x.point(o,N),F)||(_.point(o,N),F)}function reset(){return i=o=null,albersUsa}return albersUsa.invert=function(i){var o=N.scale(),s=N.translate(),x=(i[0]-s[0])/o,_=(i[1]-s[1])/o;return(_>=.12&&_<.234&&x>=-.425&&x<-.214?j:_>=.166&&_<.234&&x>=-.214&&x<-.115?G:N).invert(i)},albersUsa.stream=function(s){var x,_;return i&&o===s?i:(_=(x=[N.stream(o=s),j.stream(s),G.stream(s)]).length,i={point:function(i,o){for(var s=-1;++s<_;)x[s].point(i,o)},sphere:function(){for(var i=-1;++i<_;)x[i].sphere()},lineStart:function(){for(var i=-1;++i<_;)x[i].lineStart()},lineEnd:function(){for(var i=-1;++i<_;)x[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<_;)x[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<_;)x[i].polygonEnd()}})},albersUsa.precision=function(i){return arguments.length?(N.precision(i),j.precision(i),G.precision(i),reset()):N.precision()},albersUsa.scale=function(i){return arguments.length?(N.scale(i),j.scale(.35*i),G.scale(i),albersUsa.translate(N.translate())):N.scale()},albersUsa.translate=function(i){if(!arguments.length)return N.translate();var o=N.scale(),F=+i[0],X=+i[1];return s=N.translate(i).clipExtent([[F-.455*o,X-.238*o],[F+.455*o,X+.238*o]]).stream(Z),x=j.translate([F-.307*o,X+.201*o]).clipExtent([[F-.425*o+er.Ho,X+.12*o+er.Ho],[F-.214*o-er.Ho,X+.234*o-er.Ho]]).stream(Z),_=G.translate([F-.205*o,X+.212*o]).clipExtent([[F-.214*o+er.Ho,X+.166*o+er.Ho],[F-.115*o-er.Ho,X+.234*o-er.Ho]]).stream(Z),reset()},albersUsa.fitExtent=function(i,o){return(0,eZ.qg)(albersUsa,i,o)},albersUsa.fitSize=function(i,o){return(0,eZ.mF)(albersUsa,i,o)},albersUsa.fitWidth=function(i,o){return(0,eZ.V6)(albersUsa,i,o)},albersUsa.fitHeight=function(i,o){return(0,eZ.rf)(albersUsa,i,o)},albersUsa.scale(1070)}var eY=s(12956),eX=s(17889),eK=s(49386);function mercatorRaw(i,o){return[i,(0,er.cM)((0,er.OR)((er.ou+o)/2))]}function mercator(){return mercatorProjection(mercatorRaw).scale(961/er.BZ)}function mercatorProjection(i){var o,s,x,_=(0,eW.Z)(i),F=_.center,N=_.scale,j=_.translate,G=_.clipExtent,Z=null;function reclip(){var F=er.pi*N(),j=_((0,eK.Z)(_.rotate()).invert([0,0]));return G(null==Z?[[j[0]-F,j[1]-F],[j[0]+F,j[1]+F]]:i===mercatorRaw?[[Math.max(j[0]-F,Z),o],[Math.min(j[0]+F,s),x]]:[[Z,Math.max(j[1]-F,o)],[s,Math.min(j[1]+F,x)]])}return _.scale=function(i){return arguments.length?(N(i),reclip()):N()},_.translate=function(i){return arguments.length?(j(i),reclip()):j()},_.center=function(i){return arguments.length?(F(i),reclip()):F()},_.clipExtent=function(i){return arguments.length?(null==i?Z=o=s=x=null:(Z=+i[0][0],o=+i[0][1],s=+i[1][0],x=+i[1][1]),reclip()):null==Z?null:[[Z,o],[s,x]]},reclip()}function tany(i){return(0,er.OR)((er.ou+i)/2)}function conicConformalRaw(i,o){var s=(0,er.mC)(i),x=i===o?(0,er.O$)(i):(0,er.cM)(s/(0,er.mC)(o))/(0,er.cM)(tany(o)/tany(i)),_=s*(0,er.sQ)(tany(i),x)/x;if(!x)return mercatorRaw;function project(i,o){_>0?o<-er.ou+er.Ho&&(o=-er.ou+er.Ho):o>er.ou-er.Ho&&(o=er.ou-er.Ho);var s=_/(0,er.sQ)(tany(o),x);return[s*(0,er.O$)(x*i),_-s*(0,er.mC)(x*i)]}return project.invert=function(i,o){var s=_-o,F=(0,er.Xx)(x)*(0,er._b)(i*i+s*s),N=(0,er.fv)(i,(0,er.Wn)(s))*(0,er.Xx)(s);return s*x<0&&(N-=er.pi*(0,er.Xx)(i)*(0,er.Xx)(s)),[N/x,2*(0,er.z4)((0,er.sQ)(_/F,1/x))-er.ou]},project}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}mercatorRaw.invert=function(i,o){return[i,2*(0,er.z4)((0,er.Qq)(o))-er.ou]};var eJ=s(97492);function conicEquidistantRaw(i,o){var s=(0,er.mC)(i),x=i===o?(0,er.O$)(i):(s-(0,er.mC)(o))/(o-i),_=s/x+i;if((0,er.Wn)(x)<er.Ho)return eJ.k;function project(i,o){var s=_-o,F=x*i;return[s*(0,er.O$)(F),_-s*(0,er.mC)(F)]}return project.invert=function(i,o){var s=_-o,F=(0,er.fv)(i,(0,er.Wn)(s))*(0,er.Xx)(s);return s*x<0&&(F-=er.pi*(0,er.Xx)(i)*(0,er.Xx)(s)),[F/x,_-(0,er.Xx)(x)*(0,er._b)(i*i+s*s)]},project}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var e$=(0,er._b)(3)/2;function equalEarthRaw(i,o){var s=(0,er.ZR)(e$*(0,er.O$)(o)),x=s*s,_=x*x*x;return[i*(0,er.mC)(s)/(e$*(1.340264+-.24331799999999998*x+_*(.0062510000000000005+.034164*x))),s*(1.340264+-.081106*x+_*(893e-6+.003796*x))]}function equalEarth(){return(0,eW.Z)(equalEarthRaw).scale(177.158)}equalEarthRaw.invert=function(i,o){for(var s,x,_=o,F=_*_,N=F*F*F,j=0;j<12&&(x=_*(1.340264+-.081106*F+N*(893e-6+.003796*F))-o,_-=s=x/(1.340264+-.24331799999999998*F+N*(.0062510000000000005+.034164*F)),N=(F=_*_)*F*F,!((0,er.Wn)(s)<er.aW));++j);return[e$*i*(1.340264+-.24331799999999998*F+N*(.0062510000000000005+.034164*F))/(0,er.mC)(_),(0,er.ZR)((0,er.O$)(_)/e$)]};var eQ=s(98936),e0=s(64684);function projection_identity(){var i,o,s,x,_,F,N,j=1,G=0,X=0,J=1,$=1,ee=0,et=null,en=1,ei=1,eo=(0,e0.l)({point:function(i,o){var s=projection([i,o]);this.stream.point(s[0],s[1])}}),es=ev.Z;function reset(){return en=j*J,ei=j*$,F=N=null,projection}function projection(s){var x=s[0]*en,_=s[1]*ei;if(ee){var F=_*i-x*o;x=x*i+_*o,_=F}return[x+G,_+X]}return projection.invert=function(s){var x=s[0]-G,_=s[1]-X;if(ee){var F=_*i+x*o;x=x*i-_*o,_=F}return[x/en,_/ei]},projection.stream=function(i){return F&&N===i?F:F=eo(es(N=i))},projection.postclip=function(i){return arguments.length?(es=i,et=s=x=_=null,reset()):es},projection.clipExtent=function(i){return arguments.length?(es=null==i?(et=s=x=_=null,ev.Z):(0,Z.Z)(et=+i[0][0],s=+i[0][1],x=+i[1][0],_=+i[1][1]),reset()):null==et?null:[[et,s],[x,_]]},projection.scale=function(i){return arguments.length?(j=+i,reset()):j},projection.translate=function(i){return arguments.length?(G=+i[0],X=+i[1],reset()):[G,X]},projection.angle=function(s){return arguments.length?(ee=s%360*er.uR,o=(0,er.O$)(ee),i=(0,er.mC)(ee),reset()):ee*er.RW},projection.reflectX=function(i){return arguments.length?(J=i?-1:1,reset()):J<0},projection.reflectY=function(i){return arguments.length?($=i?-1:1,reset()):$<0},projection.fitExtent=function(i,o){return(0,eZ.qg)(projection,i,o)},projection.fitSize=function(i,o){return(0,eZ.mF)(projection,i,o)},projection.fitWidth=function(i,o){return(0,eZ.V6)(projection,i,o)},projection.fitHeight=function(i,o){return(0,eZ.rf)(projection,i,o)},projection}var e1=s(26867),e2=s(57962),e3=s(25382);function stereographicRaw(i,o){var s=(0,er.mC)(o),x=1+(0,er.mC)(i)*s;return[s*(0,er.O$)(i)/x,(0,er.O$)(o)/x]}function stereographic(){return(0,eW.Z)(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(i,o){return[(0,er.cM)((0,er.OR)((er.ou+o)/2)),-i]}function transverseMercator(){var i=mercatorProjection(transverseMercatorRaw),o=i.center,s=i.rotate;return i.center=function(i){return arguments.length?o([-i[1],i[0]]):[(i=o())[1],-i[0]]},i.rotate=function(i){return arguments.length?s([i[0],i[1],i.length>2?i[2]+90:90]):[(i=s())[0],i[1],i[2]-90]},s([0,0,90]).scale(159.155)}stereographicRaw.invert=(0,e3.O)(function(i){return 2*(0,er.z4)(i)}),transverseMercatorRaw.invert=function(i,o){return[-o,2*(0,er.z4)((0,er.Qq)(i))-er.ou]}},83074:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(39695);function __WEBPACK_DEFAULT_EXPORT__(i,o){var s=i[0]*x.uR,_=i[1]*x.uR,F=o[0]*x.uR,N=o[1]*x.uR,j=(0,x.mC)(_),G=(0,x.O$)(_),Z=(0,x.mC)(N),X=(0,x.O$)(N),J=j*(0,x.mC)(s),$=j*(0,x.O$)(s),ee=Z*(0,x.mC)(F),et=Z*(0,x.O$)(F),er=2*(0,x.ZR)((0,x._b)((0,x.Jy)(N-_)+j*Z*(0,x.Jy)(F-s))),en=(0,x.O$)(er),ei=er?function(i){var o=(0,x.O$)(i*=er)/en,s=(0,x.O$)(er-i)/en,_=s*J+o*ee,F=s*$+o*et;return[(0,x.fv)(F,_)*x.RW,(0,x.fv)(s*G+o*X,(0,x._b)(_*_+F*F))*x.RW]}:function(){return[s*x.RW,_*x.RW]};return ei.distance=er,ei}},39695:function(i,o,s){"use strict";s.d(o,{BZ:function(){return G},Ho:function(){return x},Jy:function(){return haversin},Kh:function(){return acos},O$:function(){return es},OR:function(){return eu},Qq:function(){return en},RW:function(){return Z},Wn:function(){return J},Xx:function(){return el},ZR:function(){return asin},_b:function(){return ec},aW:function(){return _},cM:function(){return ei},fv:function(){return ee},mC:function(){return et},mD:function(){return er},ou:function(){return N},pi:function(){return F},pu:function(){return j},sQ:function(){return eo},uR:function(){return X},z4:function(){return $}});var x=1e-6,_=1e-12,F=Math.PI,N=F/2,j=F/4,G=2*F,Z=180/F,X=F/180,J=Math.abs,$=Math.atan,ee=Math.atan2,et=Math.cos,er=Math.ceil,en=Math.exp,ei=Math.log,eo=Math.pow,es=Math.sin,el=Math.sign||function(i){return i>0?1:i<0?-1:0},ec=Math.sqrt,eu=Math.tan;function acos(i){return i>1?0:i<-1?F:Math.acos(i)}function asin(i){return i>1?N:i<-1?-N:Math.asin(i)}function haversin(i){return(i=es(i/2))*i}},73182:function(i,o,s){"use strict";function noop(){}s.d(o,{Z:function(){return noop}})},3559:function(i,o,s){"use strict";var x=s(73182),_=1/0,F=1/0,N=-1/0,j=N,G={point:function(i,o){i<_&&(_=i),i>N&&(N=i),o<F&&(F=o),o>j&&(j=o)},lineStart:x.Z,lineEnd:x.Z,polygonStart:x.Z,polygonEnd:x.Z,result:function(){var i=[[_,F],[N,j]];return N=j=-(F=_=1/0),i}};o.Z=G},67108:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(39695);function __WEBPACK_DEFAULT_EXPORT__(i,o){return(0,x.Wn)(i[0]-o[0])<x.Ho&&(0,x.Wn)(i[1]-o[1])<x.Ho}},23071:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(33940),_=s(7620),F=s(39695),N=(0,x.Z)();function longitude(i){return(0,F.Wn)(i[0])<=F.pi?i[0]:(0,F.Xx)(i[0])*(((0,F.Wn)(i[0])+F.pi)%F.BZ-F.pi)}function __WEBPACK_DEFAULT_EXPORT__(i,o){var s=longitude(o),x=o[1],j=(0,F.O$)(x),G=[(0,F.O$)(s),-(0,F.mC)(s),0],Z=0,X=0;N.reset(),1===j?x=F.ou+F.Ho:-1===j&&(x=-F.ou-F.Ho);for(var J=0,$=i.length;J<$;++J)if(et=(ee=i[J]).length)for(var ee,et,er=ee[et-1],en=longitude(er),ei=er[1]/2+F.pu,eo=(0,F.O$)(ei),es=(0,F.mC)(ei),el=0;el<et;++el,en=eu,eo=eh,es=ed,er=ec){var ec=ee[el],eu=longitude(ec),ef=ec[1]/2+F.pu,eh=(0,F.O$)(ef),ed=(0,F.mC)(ef),ep=eu-en,eg=ep>=0?1:-1,em=eg*ep,ey=em>F.pi,ev=eo*eh;if(N.add((0,F.fv)(ev*eg*(0,F.O$)(em),es*ed+ev*(0,F.mC)(em))),Z+=ey?ep+eg*F.BZ:ep,ey^en>=s^eu>=s){var ex=(0,_.T5)((0,_.Og)(er),(0,_.Og)(ec));(0,_.iJ)(ex);var e_=(0,_.T5)(G,ex);(0,_.iJ)(e_);var ew=(ey^ep>=0?-1:1)*(0,F.ZR)(e_[2]);(x>ew||x===ew&&(ex[0]||ex[1]))&&(X+=ey^ep>=0?1:-1)}}return(Z<-F.Ho||Z<F.Ho&&N<-F.Ho)^1&X}},25382:function(i,o,s){"use strict";s.d(o,{O:function(){return azimuthalInvert},W:function(){return azimuthalRaw}});var x=s(39695);function azimuthalRaw(i){return function(o,s){var _=(0,x.mC)(o),F=(0,x.mC)(s),N=i(_*F);return[N*F*(0,x.O$)(o),N*(0,x.O$)(s)]}}function azimuthalInvert(i){return function(o,s){var _=(0,x._b)(o*o+s*s),F=i(_),N=(0,x.O$)(F),j=(0,x.mC)(F);return[(0,x.fv)(o*N,_*j),(0,x.ZR)(_&&s*N/_)]}}},12956:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},l:function(){return N}});var x=s(39695),_=s(25382),F=s(15002),N=(0,_.W)(function(i){return(0,x._b)(2/(1+i))});function __WEBPACK_DEFAULT_EXPORT__(){return(0,F.Z)(N).scale(124.75).clipAngle(179.999)}N.invert=(0,_.O)(function(i){return 2*(0,x.ZR)(i/2)})},17889:function(i,o,s){"use strict";s.d(o,{N:function(){return N},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(39695),_=s(25382),F=s(15002),N=(0,_.W)(function(i){return(i=(0,x.Kh)(i))&&i/(0,x.O$)(i)});function __WEBPACK_DEFAULT_EXPORT__(){return(0,F.Z)(N).scale(79.4188).clipAngle(179.999)}N.invert=(0,_.O)(function(i){return i})},97492:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},k:function(){return equirectangularRaw}});var x=s(15002);function equirectangularRaw(i,o){return[i,o]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,x.Z)(equirectangularRaw).scale(152.63)}equirectangularRaw.invert=equirectangularRaw},47589:function(i,o,s){"use strict";s.d(o,{V6:function(){return fitWidth},mF:function(){return fitSize},qg:function(){return fitExtent},rf:function(){return fitHeight}});var x=s(72736),_=s(3559);function fit(i,o,s){var F=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),null!=F&&i.clipExtent(null),(0,x.Z)(s,i.stream(_.Z)),o(_.Z.result()),null!=F&&i.clipExtent(F),i}function fitExtent(i,o,s){return fit(i,function(s){var x=o[1][0]-o[0][0],_=o[1][1]-o[0][1],F=Math.min(x/(s[1][0]-s[0][0]),_/(s[1][1]-s[0][1])),N=+o[0][0]+(x-F*(s[1][0]+s[0][0]))/2,j=+o[0][1]+(_-F*(s[1][1]+s[0][1]))/2;i.scale(150*F).translate([N,j])},s)}function fitSize(i,o,s){return fitExtent(i,[[0,0],o],s)}function fitWidth(i,o,s){return fit(i,function(s){var x=+o,_=x/(s[1][0]-s[0][0]),F=(x-_*(s[1][0]+s[0][0]))/2,N=-_*s[0][1];i.scale(150*_).translate([F,N])},s)}function fitHeight(i,o,s){return fit(i,function(s){var x=+o,_=x/(s[1][1]-s[0][1]),F=-_*s[0][0],N=(x-_*(s[1][1]+s[0][1]))/2;i.scale(150*_).translate([F,N])},s)}},98936:function(i,o,s){"use strict";s.d(o,{M:function(){return gnomonicRaw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(39695),_=s(25382),F=s(15002);function gnomonicRaw(i,o){var s=(0,x.mC)(o),_=(0,x.mC)(i)*s;return[s*(0,x.O$)(i)/_,(0,x.O$)(o)/_]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,F.Z)(gnomonicRaw).scale(144.049).clipAngle(60)}gnomonicRaw.invert=(0,_.O)(x.z4)},15002:function(i,o,s){"use strict";s.d(o,{Z:function(){return projection},r:function(){return projectionMutator}});var x=s(87070),_=s(1457),F=s(87605),N=s(96059),j=s(8593),G=s(39695),Z=s(49386),X=s(64684),J=s(47589),$=s(7620),ee=(0,G.mC)(30*G.uR);function resample(i,o){return+o?function(i,o){function resampleLineTo(s,x,_,F,N,j,Z,X,J,$,et,er,en,ei){var eo=Z-s,es=X-x,el=eo*eo+es*es;if(el>4*o&&en--){var ec=F+$,eu=N+et,ef=j+er,eh=(0,G._b)(ec*ec+eu*eu+ef*ef),ed=(0,G.ZR)(ef/=eh),ep=(0,G.Wn)((0,G.Wn)(ef)-1)<G.Ho||(0,G.Wn)(_-J)<G.Ho?(_+J)/2:(0,G.fv)(eu,ec),eg=i(ep,ed),em=eg[0],ey=eg[1],ev=em-s,ex=ey-x,e_=es*ev-eo*ex;(e_*e_/el>o||(0,G.Wn)((eo*ev+es*ex)/el-.5)>.3||F*$+N*et+j*er<ee)&&(resampleLineTo(s,x,_,F,N,j,em,ey,ep,ec/=eh,eu/=eh,ef,en,ei),ei.point(em,ey),resampleLineTo(em,ey,ep,ec,eu,ef,Z,X,J,$,et,er,en,ei))}}return function(o){var s,x,_,F,N,j,G,Z,X,J,ee,et,er={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){o.polygonStart(),er.lineStart=ringStart},polygonEnd:function(){o.polygonEnd(),er.lineStart=lineStart}};function point(s,x){s=i(s,x),o.point(s[0],s[1])}function lineStart(){Z=NaN,er.point=linePoint,o.lineStart()}function linePoint(s,x){var _=(0,$.Og)([s,x]),F=i(s,x);resampleLineTo(Z,X,G,J,ee,et,Z=F[0],X=F[1],G=s,J=_[0],ee=_[1],et=_[2],16,o),o.point(Z,X)}function lineEnd(){er.point=point,o.lineEnd()}function ringStart(){lineStart(),er.point=ringPoint,er.lineEnd=ringEnd}function ringPoint(i,o){linePoint(s=i,o),x=Z,_=X,F=J,N=ee,j=et,er.point=linePoint}function ringEnd(){resampleLineTo(Z,X,G,J,ee,et,x,_,s,F,N,j,16,o),er.lineEnd=lineEnd,lineEnd()}return er}}(i,o):(0,X.l)({point:function(o,s){o=i(o,s),this.stream.point(o[0],o[1])}})}var et=(0,X.l)({point:function(i,o){this.stream.point(i*G.uR,o*G.uR)}});function scaleTranslateRotate(i,o,s,x,_,F){var N=(0,G.mC)(F),j=(0,G.O$)(F),Z=N*i,X=j*i,J=N/i,$=j/i,ee=(j*s-N*o)/i,et=(j*o+N*s)/i;function transform(i,F){return[Z*(i*=x)-X*(F*=_)+o,s-X*i-Z*F]}return transform.invert=function(i,o){return[x*(J*i-$*o+ee),_*(et-$*i-J*o)]},transform}function projection(i){return projectionMutator(function(){return i})()}function projectionMutator(i){var o,s,$,ee,er,en,ei,eo,es,el,ec=150,eu=480,ef=250,eh=0,ed=0,ep=0,eg=0,em=0,ey=0,ev=1,ex=1,e_=null,ew=x.Z,eT=null,ek=j.Z,eA=.5;function projection(i){return eo(i[0]*G.uR,i[1]*G.uR)}function invert(i){return(i=eo.invert(i[0],i[1]))&&[i[0]*G.RW,i[1]*G.RW]}function recenter(){var i=scaleTranslateRotate(ec,0,0,ev,ex,ey).apply(null,o(eh,ed)),x=(ey?scaleTranslateRotate:function(i,o,s,x,_){function transform(F,N){return[o+i*(F*=x),s-i*(N*=_)]}return transform.invert=function(F,N){return[(F-o)/i*x,(s-N)/i*_]},transform})(ec,eu-i[0],ef-i[1],ev,ex,ey);return s=(0,Z.I)(ep,eg,em),ei=(0,N.Z)(o,x),eo=(0,N.Z)(s,ei),en=resample(ei,eA),reset()}function reset(){return es=el=null,projection}return projection.stream=function(i){var o;return es&&el===i?es:es=et((o=s,(0,X.l)({point:function(i,s){var x=o(i,s);return this.stream.point(x[0],x[1])}}))(ew(en(ek(el=i)))))},projection.preclip=function(i){return arguments.length?(ew=i,e_=void 0,reset()):ew},projection.postclip=function(i){return arguments.length?(ek=i,eT=$=ee=er=null,reset()):ek},projection.clipAngle=function(i){return arguments.length?(ew=+i?(0,_.Z)(e_=i*G.uR):(e_=null,x.Z),reset()):e_*G.RW},projection.clipExtent=function(i){return arguments.length?(ek=null==i?(eT=$=ee=er=null,j.Z):(0,F.Z)(eT=+i[0][0],$=+i[0][1],ee=+i[1][0],er=+i[1][1]),reset()):null==eT?null:[[eT,$],[ee,er]]},projection.scale=function(i){return arguments.length?(ec=+i,recenter()):ec},projection.translate=function(i){return arguments.length?(eu=+i[0],ef=+i[1],recenter()):[eu,ef]},projection.center=function(i){return arguments.length?(eh=i[0]%360*G.uR,ed=i[1]%360*G.uR,recenter()):[eh*G.RW,ed*G.RW]},projection.rotate=function(i){return arguments.length?(ep=i[0]%360*G.uR,eg=i[1]%360*G.uR,em=i.length>2?i[2]%360*G.uR:0,recenter()):[ep*G.RW,eg*G.RW,em*G.RW]},projection.angle=function(i){return arguments.length?(ey=i%360*G.uR,recenter()):ey*G.RW},projection.reflectX=function(i){return arguments.length?(ev=i?-1:1,recenter()):ev<0},projection.reflectY=function(i){return arguments.length?(ex=i?-1:1,recenter()):ex<0},projection.precision=function(i){return arguments.length?(en=resample(ei,eA=i*i),reset()):(0,G._b)(eA)},projection.fitExtent=function(i,o){return(0,J.qg)(projection,i,o)},projection.fitSize=function(i,o){return(0,J.mF)(projection,i,o)},projection.fitWidth=function(i,o){return(0,J.V6)(projection,i,o)},projection.fitHeight=function(i,o){return(0,J.rf)(projection,i,o)},function(){return o=i.apply(this,arguments),projection.invert=o.invert&&invert,recenter()}}},26867:function(i,o,s){"use strict";s.d(o,{K:function(){return naturalEarth1Raw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(15002),_=s(39695);function naturalEarth1Raw(i,o){var s=o*o,x=s*s;return[i*(.8707-.131979*s+x*(-.013791+x*(.003971*s-.001529*x))),o*(1.007226+s*(.015085+x*(-.044475+.028874*s-.005916*x)))]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,x.Z)(naturalEarth1Raw).scale(175.295)}naturalEarth1Raw.invert=function(i,o){var s,x=o,F=25;do{var N=x*x,j=N*N;x-=s=(x*(1.007226+N*(.015085+j*(-.044475+.028874*N-.005916*j)))-o)/(1.007226+N*(.045255+j*(-.311325+.259866*N-.005916*11*j)))}while((0,_.Wn)(s)>_.Ho&&--F>0);return[i/(.8707+(N=x*x)*(-.131979+N*(-.013791+N*N*N*(.003971-.001529*N)))),x]}},57962:function(i,o,s){"use strict";s.d(o,{I:function(){return orthographicRaw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(39695),_=s(25382),F=s(15002);function orthographicRaw(i,o){return[(0,x.mC)(o)*(0,x.O$)(i),(0,x.O$)(o)]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,F.Z)(orthographicRaw).scale(249.5).clipAngle(90+x.Ho)}orthographicRaw.invert=(0,_.O)(x.ZR)},49386:function(i,o,s){"use strict";s.d(o,{I:function(){return rotateRadians},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x=s(96059),_=s(39695);function rotationIdentity(i,o){return[(0,_.Wn)(i)>_.pi?i+Math.round(-i/_.BZ)*_.BZ:i,o]}function rotateRadians(i,o,s){return(i%=_.BZ)?o||s?(0,x.Z)(rotationLambda(i),rotationPhiGamma(o,s)):rotationLambda(i):o||s?rotationPhiGamma(o,s):rotationIdentity}function forwardRotationLambda(i){return function(o,s){return[(o+=i)>_.pi?o-_.BZ:o<-_.pi?o+_.BZ:o,s]}}function rotationLambda(i){var o=forwardRotationLambda(i);return o.invert=forwardRotationLambda(-i),o}function rotationPhiGamma(i,o){var s=(0,_.mC)(i),x=(0,_.O$)(i),F=(0,_.mC)(o),N=(0,_.O$)(o);function rotation(i,o){var j=(0,_.mC)(o),G=(0,_.mC)(i)*j,Z=(0,_.O$)(i)*j,X=(0,_.O$)(o),J=X*s+G*x;return[(0,_.fv)(Z*F-J*N,G*s-X*x),(0,_.ZR)(J*F+Z*N)]}return rotation.invert=function(i,o){var j=(0,_.mC)(o),G=(0,_.mC)(i)*j,Z=(0,_.O$)(i)*j,X=(0,_.O$)(o),J=X*F-Z*N;return[(0,_.fv)(Z*F+X*N,G*s+J*x),(0,_.ZR)(J*s-G*x)]},rotation}function __WEBPACK_DEFAULT_EXPORT__(i){function forward(o){return o=i(o[0]*_.uR,o[1]*_.uR),o[0]*=_.RW,o[1]*=_.RW,o}return i=rotateRadians(i[0]*_.uR,i[1]*_.uR,i.length>2?i[2]*_.uR:0),forward.invert=function(o){return o=i.invert(o[0]*_.uR,o[1]*_.uR),o[0]*=_.RW,o[1]*=_.RW,o},forward}rotationIdentity.invert=rotationIdentity},72736:function(i,o,s){"use strict";function streamGeometry(i,o){i&&_.hasOwnProperty(i.type)&&_[i.type](i,o)}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var x={Feature:function(i,o){streamGeometry(i.geometry,o)},FeatureCollection:function(i,o){for(var s=i.features,x=-1,_=s.length;++x<_;)streamGeometry(s[x].geometry,o)}},_={Sphere:function(i,o){o.sphere()},Point:function(i,o){i=i.coordinates,o.point(i[0],i[1],i[2])},MultiPoint:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)i=s[x],o.point(i[0],i[1],i[2])},LineString:function(i,o){streamLine(i.coordinates,o,0)},MultiLineString:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)streamLine(s[x],o,0)},Polygon:function(i,o){streamPolygon(i.coordinates,o)},MultiPolygon:function(i,o){for(var s=i.coordinates,x=-1,_=s.length;++x<_;)streamPolygon(s[x],o)},GeometryCollection:function(i,o){for(var s=i.geometries,x=-1,_=s.length;++x<_;)streamGeometry(s[x],o)}};function streamLine(i,o,s){var x,_=-1,F=i.length-s;for(o.lineStart();++_<F;)x=i[_],o.point(x[0],x[1],x[2]);o.lineEnd()}function streamPolygon(i,o){var s=-1,x=i.length;for(o.polygonStart();++s<x;)streamLine(i[s],o,1);o.polygonEnd()}function __WEBPACK_DEFAULT_EXPORT__(i,o){i&&x.hasOwnProperty(i.type)?x[i.type](i,o):streamGeometry(i,o)}},64684:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i){return{stream:transformer(i)}}function transformer(i){return function(o){var s=new TransformStream;for(var x in i)s[x]=i[x];return s.stream=o,s}}function TransformStream(){}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},l:function(){return transformer}}),TransformStream.prototype={constructor:TransformStream,point:function(i,o){this.stream.point(i,o)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(i,o,s){"use strict";function defaultSeparation(i,o){return i.parent===o.parent?1:2}function meanXReduce(i,o){return i+o.x}function maxYReduce(i,o){return Math.max(i,o.y)}function cluster(){var i=defaultSeparation,o=1,s=1,x=!1;function cluster(_){var F,N=0;_.eachAfter(function(o){var s=o.children;s?(o.x=s.reduce(meanXReduce,0)/s.length,o.y=1+s.reduce(maxYReduce,0)):(o.x=F?N+=i(o,F):0,o.y=0,F=o)});var j=function(i){for(var o;o=i.children;)i=o[0];return i}(_),G=function(i){for(var o;o=i.children;)i=o[o.length-1];return i}(_),Z=j.x-i(j,G)/2,X=G.x+i(G,j)/2;return _.eachAfter(x?function(i){i.x=(i.x-_.x)*o,i.y=(_.y-i.y)*s}:function(i){i.x=(i.x-Z)/(X-Z)*o,i.y=(1-(_.y?i.y/_.y:1))*s})}return cluster.separation=function(o){return arguments.length?(i=o,cluster):i},cluster.size=function(i){return arguments.length?(x=!1,o=+i[0],s=+i[1],cluster):x?null:[o,s]},cluster.nodeSize=function(i){return arguments.length?(x=!0,o=+i[0],s=+i[1],cluster):x?[o,s]:null},cluster}function count(i){var o=0,s=i.children,x=s&&s.length;if(x)for(;--x>=0;)o+=s[x].value;else o=1;i.value=o}function hierarchy(i,o){var s,x,_,F,N,j=new Node(i),G=+i.value&&(j.value=i.value),Z=[j];for(null==o&&(o=defaultChildren);s=Z.pop();)if(G&&(s.value=+s.data.value),(_=o(s.data))&&(N=_.length))for(s.children=Array(N),F=N-1;F>=0;--F)Z.push(x=s.children[F]=new Node(_[F])),x.parent=s,x.depth=s.depth+1;return j.eachBefore(computeHeight)}function defaultChildren(i){return i.children}function copyData(i){i.data=i.data.data}function computeHeight(i){var o=0;do i.height=o;while((i=i.parent)&&i.height<++o)}function Node(i){this.data=i,this.depth=this.height=0,this.parent=null}s.r(o),s.d(o,{cluster:function(){return cluster},hierarchy:function(){return hierarchy},pack:function(){return pack},packEnclose:function(){return enclose},packSiblings:function(){return siblings},partition:function(){return partition},stratify:function(){return stratify},tree:function(){return tree},treemap:function(){return treemap},treemapBinary:function(){return binary},treemapDice:function(){return dice},treemapResquarify:function(){return G},treemapSlice:function(){return treemap_slice},treemapSliceDice:function(){return sliceDice},treemapSquarify:function(){return j}}),Node.prototype=hierarchy.prototype={constructor:Node,count:function(){return this.eachAfter(count)},each:function(i){var o,s,x,_,F=this,N=[F];do for(o=N.reverse(),N=[];F=o.pop();)if(i(F),s=F.children)for(x=0,_=s.length;x<_;++x)N.push(s[x]);while(N.length);return this},eachAfter:function(i){for(var o,s,x,_=this,F=[_],N=[];_=F.pop();)if(N.push(_),o=_.children)for(s=0,x=o.length;s<x;++s)F.push(o[s]);for(;_=N.pop();)i(_);return this},eachBefore:function(i){for(var o,s,x=this,_=[x];x=_.pop();)if(i(x),o=x.children)for(s=o.length-1;s>=0;--s)_.push(o[s]);return this},sum:function(i){return this.eachAfter(function(o){for(var s=+i(o.data)||0,x=o.children,_=x&&x.length;--_>=0;)s+=x[_].value;o.value=s})},sort:function(i){return this.eachBefore(function(o){o.children&&o.children.sort(i)})},path:function(i){for(var o=this,s=function(i,o){if(i===o)return i;var s=i.ancestors(),x=o.ancestors(),_=null;for(i=s.pop(),o=x.pop();i===o;)_=i,i=s.pop(),o=x.pop();return _}(o,i),x=[o];o!==s;)x.push(o=o.parent);for(var _=x.length;i!==s;)x.splice(_,0,i),i=i.parent;return x},ancestors:function(){for(var i=this,o=[i];i=i.parent;)o.push(i);return o},descendants:function(){var i=[];return this.each(function(o){i.push(o)}),i},leaves:function(){var i=[];return this.eachBefore(function(o){o.children||i.push(o)}),i},links:function(){var i=this,o=[];return i.each(function(s){s!==i&&o.push({source:s.parent,target:s})}),o},copy:function(){return hierarchy(this).eachBefore(copyData)}};var x=Array.prototype.slice;function enclose(i){for(var o,s,_=0,F=(i=function(i){for(var o,s,x=i.length;x;)s=Math.random()*x--|0,o=i[x],i[x]=i[s],i[s]=o;return i}(x.call(i))).length,N=[];_<F;)o=i[_],s&&enclosesWeak(s,o)?++_:(s=function(i){switch(i.length){case 1:var o;return{x:(o=i[0]).x,y:o.y,r:o.r};case 2:return encloseBasis2(i[0],i[1]);case 3:return encloseBasis3(i[0],i[1],i[2])}}(N=function(i,o){var s,x;if(enclosesWeakAll(o,i))return[o];for(s=0;s<i.length;++s)if(enclosesNot(o,i[s])&&enclosesWeakAll(encloseBasis2(i[s],o),i))return[i[s],o];for(s=0;s<i.length-1;++s)for(x=s+1;x<i.length;++x)if(enclosesNot(encloseBasis2(i[s],i[x]),o)&&enclosesNot(encloseBasis2(i[s],o),i[x])&&enclosesNot(encloseBasis2(i[x],o),i[s])&&enclosesWeakAll(encloseBasis3(i[s],i[x],o),i))return[i[s],i[x],o];throw Error()}(N,o)),_=0);return s}function enclosesNot(i,o){var s=i.r-o.r,x=o.x-i.x,_=o.y-i.y;return s<0||s*s<x*x+_*_}function enclosesWeak(i,o){var s=i.r-o.r+1e-6,x=o.x-i.x,_=o.y-i.y;return s>0&&s*s>x*x+_*_}function enclosesWeakAll(i,o){for(var s=0;s<o.length;++s)if(!enclosesWeak(i,o[s]))return!1;return!0}function encloseBasis2(i,o){var s=i.x,x=i.y,_=i.r,F=o.x,N=o.y,j=o.r,G=F-s,Z=N-x,X=j-_,J=Math.sqrt(G*G+Z*Z);return{x:(s+F+G/J*X)/2,y:(x+N+Z/J*X)/2,r:(J+_+j)/2}}function encloseBasis3(i,o,s){var x=i.x,_=i.y,F=i.r,N=o.x,j=o.y,G=o.r,Z=s.x,X=s.y,J=s.r,$=x-N,ee=x-Z,et=_-j,er=_-X,en=G-F,ei=J-F,eo=x*x+_*_-F*F,es=eo-N*N-j*j+G*G,el=eo-Z*Z-X*X+J*J,ec=ee*et-$*er,eu=(et*el-er*es)/(2*ec)-x,ef=(er*en-et*ei)/ec,eh=(ee*es-$*el)/(2*ec)-_,ed=($*ei-ee*en)/ec,ep=ef*ef+ed*ed-1,eg=2*(F+eu*ef+eh*ed),em=eu*eu+eh*eh-F*F,ey=-(ep?(eg+Math.sqrt(eg*eg-4*ep*em))/(2*ep):em/eg);return{x:x+eu+ef*ey,y:_+eh+ed*ey,r:ey}}function place(i,o,s){var x,_,F,N,j=i.x-o.x,G=i.y-o.y,Z=j*j+G*G;Z?(_=o.r+s.r,_*=_,N=i.r+s.r,_>(N*=N)?(x=(Z+N-_)/(2*Z),F=Math.sqrt(Math.max(0,N/Z-x*x)),s.x=i.x-x*j-F*G,s.y=i.y-x*G+F*j):(x=(Z+_-N)/(2*Z),F=Math.sqrt(Math.max(0,_/Z-x*x)),s.x=o.x+x*j-F*G,s.y=o.y+x*G+F*j)):(s.x=o.x+s.r,s.y=o.y)}function intersects(i,o){var s=i.r+o.r-1e-6,x=o.x-i.x,_=o.y-i.y;return s>0&&s*s>x*x+_*_}function score(i){var o=i._,s=i.next._,x=o.r+s.r,_=(o.x*s.r+s.x*o.r)/x,F=(o.y*s.r+s.y*o.r)/x;return _*_+F*F}function siblings_Node(i){this._=i,this.next=null,this.previous=null}function packEnclose(i){var o,s,x,_,F,N,j,G,Z,X,J;if(!(_=i.length))return 0;if((o=i[0]).x=0,o.y=0,!(_>1))return o.r;if(s=i[1],o.x=-s.r,s.x=o.r,s.y=0,!(_>2))return o.r+s.r;place(s,o,x=i[2]),o=new siblings_Node(o),s=new siblings_Node(s),x=new siblings_Node(x),o.next=x.previous=s,s.next=o.previous=x,x.next=s.previous=o;x:for(j=3;j<_;++j){place(o._,s._,x=i[j]),x=new siblings_Node(x),G=s.next,Z=o.previous,X=s._.r,J=o._.r;do if(X<=J){if(intersects(G._,x._)){s=G,o.next=s,s.previous=o,--j;continue x}X+=G._.r,G=G.next}else{if(intersects(Z._,x._)){(o=Z).next=s,s.previous=o,--j;continue x}J+=Z._.r,Z=Z.previous}while(G!==Z.next);for(x.previous=o,x.next=s,o.next=s.previous=s=x,F=score(o);(x=x.next)!==s;)(N=score(x))<F&&(o=x,F=N);s=o.next}for(o=[s._],x=s;(x=x.next)!==s;)o.push(x._);for(j=0,x=enclose(o);j<_;++j)o=i[j],o.x-=x.x,o.y-=x.y;return x.r}function siblings(i){return packEnclose(i),i}function required(i){if("function"!=typeof i)throw Error();return i}function constantZero(){return 0}function constant(i){return function(){return i}}function defaultRadius(i){return Math.sqrt(i.value)}function pack(){var i=null,o=1,s=1,x=constantZero;function pack(_){return _.x=o/2,_.y=s/2,i?_.eachBefore(radiusLeaf(i)).eachAfter(packChildren(x,.5)).eachBefore(translateChild(1)):_.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(x,_.r/Math.min(o,s))).eachBefore(translateChild(Math.min(o,s)/(2*_.r))),_}return pack.radius=function(o){return arguments.length?(i=null==o?null:required(o),pack):i},pack.size=function(i){return arguments.length?(o=+i[0],s=+i[1],pack):[o,s]},pack.padding=function(i){return arguments.length?(x="function"==typeof i?i:constant(+i),pack):x},pack}function radiusLeaf(i){return function(o){o.children||(o.r=Math.max(0,+i(o)||0))}}function packChildren(i,o){return function(s){if(x=s.children){var x,_,F,N=x.length,j=i(s)*o||0;if(j)for(_=0;_<N;++_)x[_].r+=j;if(F=packEnclose(x),j)for(_=0;_<N;++_)x[_].r-=j;s.r=F+j}}}function translateChild(i){return function(o){var s=o.parent;o.r*=i,s&&(o.x=s.x+i*o.x,o.y=s.y+i*o.y)}}function treemap_round(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function dice(i,o,s,x,_){for(var F,N=i.children,j=-1,G=N.length,Z=i.value&&(x-o)/i.value;++j<G;)(F=N[j]).y0=s,F.y1=_,F.x0=o,F.x1=o+=F.value*Z}function partition(){var i=1,o=1,s=0,x=!1;function partition(_){var F,N=_.height+1;return _.x0=_.y0=s,_.x1=i,_.y1=o/N,_.eachBefore((F=o,function(i){i.children&&dice(i,i.x0,F*(i.depth+1)/N,i.x1,F*(i.depth+2)/N);var o=i.x0,x=i.y0,_=i.x1-s,j=i.y1-s;_<o&&(o=_=(o+_)/2),j<x&&(x=j=(x+j)/2),i.x0=o,i.y0=x,i.x1=_,i.y1=j})),x&&_.eachBefore(treemap_round),_}return partition.round=function(i){return arguments.length?(x=!!i,partition):x},partition.size=function(s){return arguments.length?(i=+s[0],o=+s[1],partition):[i,o]},partition.padding=function(i){return arguments.length?(s=+i,partition):s},partition}var _={depth:-1},F={};function defaultId(i){return i.id}function defaultParentId(i){return i.parentId}function stratify(){var i=defaultId,o=defaultParentId;function stratify(s){var x,N,j,G,Z,X,J,$=s.length,ee=Array($),et={};for(N=0;N<$;++N)x=s[N],Z=ee[N]=new Node(x),null!=(X=i(x,N,s))&&(X+="")&&(et[J="$"+(Z.id=X)]=J in et?F:Z);for(N=0;N<$;++N)if(Z=ee[N],null!=(X=o(s[N],N,s))&&(X+="")){if(!(G=et["$"+X]))throw Error("missing: "+X);if(G===F)throw Error("ambiguous: "+X);G.children?G.children.push(Z):G.children=[Z],Z.parent=G}else{if(j)throw Error("multiple roots");j=Z}if(!j)throw Error("no root");if(j.parent=_,j.eachBefore(function(i){i.depth=i.parent.depth+1,--$}).eachBefore(computeHeight),j.parent=null,$>0)throw Error("cycle");return j}return stratify.id=function(o){return arguments.length?(i=required(o),stratify):i},stratify.parentId=function(i){return arguments.length?(o=required(i),stratify):o},stratify}function tree_defaultSeparation(i,o){return i.parent===o.parent?1:2}function nextLeft(i){var o=i.children;return o?o[0]:i.t}function nextRight(i){var o=i.children;return o?o[o.length-1]:i.t}function TreeNode(i,o){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=o}function tree(){var i=tree_defaultSeparation,o=1,s=1,x=null;function tree(_){var F=function(i){for(var o,s,x,_,F,N=new TreeNode(i,0),j=[N];o=j.pop();)if(x=o._.children)for(o.children=Array(F=x.length),_=F-1;_>=0;--_)j.push(s=o.children[_]=new TreeNode(x[_],_)),s.parent=o;return(N.parent=new TreeNode(null,0)).children=[N],N}(_);if(F.eachAfter(firstWalk),F.parent.m=-F.z,F.eachBefore(secondWalk),x)_.eachBefore(sizeNode);else{var N=_,j=_,G=_;_.eachBefore(function(i){i.x<N.x&&(N=i),i.x>j.x&&(j=i),i.depth>G.depth&&(G=i)});var Z=N===j?1:i(N,j)/2,X=Z-N.x,J=o/(j.x+Z+X),$=s/(G.depth||1);_.eachBefore(function(i){i.x=(i.x+X)*J,i.y=i.depth*$})}return _}function firstWalk(o){var s=o.children,x=o.parent.children,_=o.i?x[o.i-1]:null;if(s){!function(i){for(var o,s=0,x=0,_=i.children,F=_.length;--F>=0;)o=_[F],o.z+=s,o.m+=s,s+=o.s+(x+=o.c)}(o);var F=(s[0].z+s[s.length-1].z)/2;_?(o.z=_.z+i(o._,_._),o.m=o.z-F):o.z=F}else _&&(o.z=_.z+i(o._,_._));o.parent.A=function(o,s,x){if(s){for(var _,F,N,j=o,G=o,Z=s,X=j.parent.children[0],J=j.m,$=G.m,ee=Z.m,et=X.m;Z=nextRight(Z),j=nextLeft(j),Z&&j;)X=nextLeft(X),(G=nextRight(G)).a=o,(N=Z.z+ee-j.z-J+i(Z._,j._))>0&&(function(i,o,s){var x=s/(o.i-i.i);o.c-=x,o.s+=s,i.c+=x,o.z+=s,o.m+=s}((_=Z,F=x,_.a.parent===o.parent?_.a:F),o,N),J+=N,$+=N),ee+=Z.m,J+=j.m,et+=X.m,$+=G.m;Z&&!nextRight(G)&&(G.t=Z,G.m+=ee-$),j&&!nextLeft(X)&&(X.t=j,X.m+=J-et,x=o)}return x}(o,_,o.parent.A||x[0])}function secondWalk(i){i._.x=i.z+i.parent.m,i.m+=i.parent.m}function sizeNode(i){i.x*=o,i.y=i.depth*s}return tree.separation=function(o){return arguments.length?(i=o,tree):i},tree.size=function(i){return arguments.length?(x=!1,o=+i[0],s=+i[1],tree):x?null:[o,s]},tree.nodeSize=function(i){return arguments.length?(x=!0,o=+i[0],s=+i[1],tree):x?[o,s]:null},tree}function treemap_slice(i,o,s,x,_){for(var F,N=i.children,j=-1,G=N.length,Z=i.value&&(_-s)/i.value;++j<G;)(F=N[j]).x0=o,F.x1=x,F.y0=s,F.y1=s+=F.value*Z}TreeNode.prototype=Object.create(Node.prototype);var N=(1+Math.sqrt(5))/2;function squarifyRatio(i,o,s,x,_,F){for(var N,j,G,Z,X,J,$,ee,et,er,en,ei=[],eo=o.children,es=0,el=0,ec=eo.length,eu=o.value;es<ec;){G=_-s,Z=F-x;do X=eo[el++].value;while(!X&&el<ec);for(J=$=X,et=Math.max($/(en=X*X*(er=Math.max(Z/G,G/Z)/(eu*i))),en/J);el<ec;++el){if(X+=j=eo[el].value,j<J&&(J=j),j>$&&($=j),(ee=Math.max($/(en=X*X*er),en/J))>et){X-=j;break}et=ee}ei.push(N={value:X,dice:G<Z,children:eo.slice(es,el)}),N.dice?dice(N,s,x,_,eu?x+=Z*X/eu:F):treemap_slice(N,s,x,eu?s+=G*X/eu:_,F),eu-=X,es=el}return ei}var j=function custom(i){function squarify(o,s,x,_,F){squarifyRatio(i,o,s,x,_,F)}return squarify.ratio=function(i){return custom((i=+i)>1?i:1)},squarify}(N);function treemap(){var i=j,o=!1,s=1,x=1,_=[0],F=constantZero,N=constantZero,G=constantZero,Z=constantZero,X=constantZero;function treemap(i){return i.x0=i.y0=0,i.x1=s,i.y1=x,i.eachBefore(positionNode),_=[0],o&&i.eachBefore(treemap_round),i}function positionNode(o){var s=_[o.depth],x=o.x0+s,j=o.y0+s,J=o.x1-s,$=o.y1-s;J<x&&(x=J=(x+J)/2),$<j&&(j=$=(j+$)/2),o.x0=x,o.y0=j,o.x1=J,o.y1=$,o.children&&(s=_[o.depth+1]=F(o)/2,x+=X(o)-s,j+=N(o)-s,J-=G(o)-s,$-=Z(o)-s,J<x&&(x=J=(x+J)/2),$<j&&(j=$=(j+$)/2),i(o,x,j,J,$))}return treemap.round=function(i){return arguments.length?(o=!!i,treemap):o},treemap.size=function(i){return arguments.length?(s=+i[0],x=+i[1],treemap):[s,x]},treemap.tile=function(o){return arguments.length?(i=required(o),treemap):i},treemap.padding=function(i){return arguments.length?treemap.paddingInner(i).paddingOuter(i):treemap.paddingInner()},treemap.paddingInner=function(i){return arguments.length?(F="function"==typeof i?i:constant(+i),treemap):F},treemap.paddingOuter=function(i){return arguments.length?treemap.paddingTop(i).paddingRight(i).paddingBottom(i).paddingLeft(i):treemap.paddingTop()},treemap.paddingTop=function(i){return arguments.length?(N="function"==typeof i?i:constant(+i),treemap):N},treemap.paddingRight=function(i){return arguments.length?(G="function"==typeof i?i:constant(+i),treemap):G},treemap.paddingBottom=function(i){return arguments.length?(Z="function"==typeof i?i:constant(+i),treemap):Z},treemap.paddingLeft=function(i){return arguments.length?(X="function"==typeof i?i:constant(+i),treemap):X},treemap}function binary(i,o,s,x,_){var F,N,j=i.children,G=j.length,Z=Array(G+1);for(Z[0]=N=F=0;F<G;++F)Z[F+1]=N+=j[F].value;(function partition(i,o,s,x,_,F,N){if(i>=o-1){var G=j[i];G.x0=x,G.y0=_,G.x1=F,G.y1=N;return}for(var X=Z[i],J=s/2+X,$=i+1,ee=o-1;$<ee;){var et=$+ee>>>1;Z[et]<J?$=et+1:ee=et}J-Z[$-1]<Z[$]-J&&i+1<$&&--$;var er=Z[$]-X,en=s-er;if(F-x>N-_){var ei=(x*en+F*er)/s;partition(i,$,er,x,_,ei,N),partition($,o,en,ei,_,F,N)}else{var eo=(_*en+N*er)/s;partition(i,$,er,x,_,F,eo),partition($,o,en,x,eo,F,N)}})(0,G,i.value,o,s,x,_)}function sliceDice(i,o,s,x,_){(1&i.depth?treemap_slice:dice)(i,o,s,x,_)}var G=function custom(i){function resquarify(o,s,x,_,F){if((N=o._squarify)&&N.ratio===i)for(var N,j,G,Z,X,J=-1,$=N.length,ee=o.value;++J<$;){for(G=(j=N[J]).children,Z=j.value=0,X=G.length;Z<X;++Z)j.value+=G[Z].value;j.dice?dice(j,s,x,_,x+=(F-x)*j.value/ee):treemap_slice(j,s,x,s+=(_-s)*j.value/ee,F),ee-=j.value}else o._squarify=N=squarifyRatio(i,o,s,x,_,F),N.ratio=i}return resquarify.ratio=function(i){return custom((i=+i)>1?i:1)},resquarify}(N)},45879:function(i,o,s){"use strict";s.d(o,{h5:function(){return linkHorizontal}});var x=Math.PI,_=2*x,F=_-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(i,o){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,o){this._+="L"+(this._x1=+i)+","+(this._y1=+o)},quadraticCurveTo:function(i,o,s,x){this._+="Q"+ +i+","+ +o+","+(this._x1=+s)+","+(this._y1=+x)},bezierCurveTo:function(i,o,s,x,_,F){this._+="C"+ +i+","+ +o+","+ +s+","+ +x+","+(this._x1=+_)+","+(this._y1=+F)},arcTo:function(i,o,s,_,F){i=+i,o=+o,s=+s,_=+_,F=+F;var N=this._x1,j=this._y1,G=s-i,Z=_-o,X=N-i,J=j-o,$=X*X+J*J;if(F<0)throw Error("negative radius: "+F);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=o);else if($>1e-6){if(Math.abs(J*G-Z*X)>1e-6&&F){var ee=s-N,et=_-j,er=G*G+Z*Z,en=Math.sqrt(er),ei=Math.sqrt($),eo=F*Math.tan((x-Math.acos((er+$-(ee*ee+et*et))/(2*en*ei)))/2),es=eo/ei,el=eo/en;Math.abs(es-1)>1e-6&&(this._+="L"+(i+es*X)+","+(o+es*J)),this._+="A"+F+","+F+",0,0,"+ +(J*ee>X*et)+","+(this._x1=i+el*G)+","+(this._y1=o+el*Z)}else this._+="L"+(this._x1=i)+","+(this._y1=o)}},arc:function(i,o,s,N,j,G){i=+i,o=+o,s=+s,G=!!G;var Z=s*Math.cos(N),X=s*Math.sin(N),J=i+Z,$=o+X,ee=1^G,et=G?N-j:j-N;if(s<0)throw Error("negative radius: "+s);null===this._x1?this._+="M"+J+","+$:(Math.abs(this._x1-J)>1e-6||Math.abs(this._y1-$)>1e-6)&&(this._+="L"+J+","+$),s&&(et<0&&(et=et%_+_),et>F?this._+="A"+s+","+s+",0,1,"+ee+","+(i-Z)+","+(o-X)+"A"+s+","+s+",0,1,"+ee+","+(this._x1=J)+","+(this._y1=$):et>1e-6&&(this._+="A"+s+","+s+",0,"+ +(et>=x)+","+ee+","+(this._x1=i+s*Math.cos(j))+","+(this._y1=o+s*Math.sin(j))))},rect:function(i,o,s,x){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+o)+"h"+ +s+"v"+ +x+"h"+-s+"Z"},toString:function(){return this._}};var N=Array.prototype.slice;function constant(i){return function(){return i}}function point_x(i){return i[0]}function point_y(i){return i[1]}function linkSource(i){return i.source}function linkTarget(i){return i.target}function curveHorizontal(i,o,s,x,_){i.moveTo(o,s),i.bezierCurveTo(o=(o+x)/2,s,o,_,x,_)}function linkHorizontal(){return function(i){var o=linkSource,s=linkTarget,x=point_x,_=point_y,F=null;function link(){var j,G=N.call(arguments),Z=o.apply(this,G),X=s.apply(this,G);if(F||(F=j=path()),i(F,+x.apply(this,(G[0]=Z,G)),+_.apply(this,G),+x.apply(this,(G[0]=X,G)),+_.apply(this,G)),j)return F=null,j+""||null}return link.source=function(i){return arguments.length?(o=i,link):o},link.target=function(i){return arguments.length?(s=i,link):s},link.x=function(i){return arguments.length?(x="function"==typeof i?i:constant(+i),link):x},link.y=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),link):_},link.context=function(i){return arguments.length?(F=null==i?null:i,link):F},link}(curveHorizontal)}},84096:function(i,o,s){"use strict";s.d(o,{i$:function(){return _},Dq:function(){return formatLocale},g0:function(){return F}});var x,_,F,N=s(58176),j=s(48480),G=s(59879),Z=s(82301),X=s(34823),J=s(79791);function localDate(i){if(0<=i.y&&i.y<100){var o=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return o.setFullYear(i.y),o}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function utcDate(i){if(0<=i.y&&i.y<100){var o=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return o.setUTCFullYear(i.y),o}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function newDate(i,o,s){return{y:i,m:o,d:s,H:0,M:0,S:0,L:0}}function formatLocale(i){var o=i.dateTime,s=i.date,x=i.time,_=i.periods,F=i.days,X=i.shortDays,J=i.months,ee=i.shortMonths,et=formatRe(_),er=formatLookup(_),en=formatRe(F),ei=formatLookup(F),eo=formatRe(X),es=formatLookup(X),el=formatRe(J),ec=formatLookup(J),eu=formatRe(ee),ef=formatLookup(ee),eh={a:function(i){return X[i.getDay()]},A:function(i){return F[i.getDay()]},b:function(i){return ee[i.getMonth()]},B:function(i){return J[i.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(i){return _[+(i.getHours()>=12)]},q:function(i){return 1+~~(i.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},ed={a:function(i){return X[i.getUTCDay()]},A:function(i){return F[i.getUTCDay()]},b:function(i){return ee[i.getUTCMonth()]},B:function(i){return J[i.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(i){return _[+(i.getUTCHours()>=12)]},q:function(i){return 1+~~(i.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},ep={a:function(i,o,s){var x=eo.exec(o.slice(s));return x?(i.w=es[x[0].toLowerCase()],s+x[0].length):-1},A:function(i,o,s){var x=en.exec(o.slice(s));return x?(i.w=ei[x[0].toLowerCase()],s+x[0].length):-1},b:function(i,o,s){var x=eu.exec(o.slice(s));return x?(i.m=ef[x[0].toLowerCase()],s+x[0].length):-1},B:function(i,o,s){var x=el.exec(o.slice(s));return x?(i.m=ec[x[0].toLowerCase()],s+x[0].length):-1},c:function(i,s,x){return parseSpecifier(i,o,s,x)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(i,o,s){var x=et.exec(o.slice(s));return x?(i.p=er[x[0].toLowerCase()],s+x[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(i,o,x){return parseSpecifier(i,s,o,x)},X:function(i,o,s){return parseSpecifier(i,x,o,s)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(i,o){return function(s){var x,_,F,N=[],j=-1,G=0,Z=i.length;for(s instanceof Date||(s=new Date(+s));++j<Z;)37===i.charCodeAt(j)&&(N.push(i.slice(G,j)),null!=(_=$[x=i.charAt(++j)])?x=i.charAt(++j):_="e"===x?" ":"0",(F=o[x])&&(x=F(s,_)),N.push(x),G=j+1);return N.push(i.slice(G,j)),N.join("")}}function newParse(i,o){return function(s){var x,_,F=newDate(1900,void 0,1);if(parseSpecifier(F,i,s+="",0)!=s.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(1e3*F.s+("L"in F?F.L:0));if(!o||"Z"in F||(F.Z=0),"p"in F&&(F.H=F.H%12+12*F.p),void 0===F.m&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(x=(_=(x=utcDate(newDate(F.y,0,1))).getUTCDay())>4||0===_?N.l6.ceil(x):(0,N.l6)(x),x=j.Z.offset(x,(F.V-1)*7),F.y=x.getUTCFullYear(),F.m=x.getUTCMonth(),F.d=x.getUTCDate()+(F.w+6)%7):(x=(_=(x=localDate(newDate(F.y,0,1))).getDay())>4||0===_?G.wA.ceil(x):(0,G.wA)(x),x=Z.Z.offset(x,(F.V-1)*7),F.y=x.getFullYear(),F.m=x.getMonth(),F.d=x.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),_="Z"in F?utcDate(newDate(F.y,0,1)).getUTCDay():localDate(newDate(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+7*F.W-(_+5)%7:F.w+7*F.U-(_+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,utcDate(F)):localDate(F)}}function parseSpecifier(i,o,s,x){for(var _,F,N=0,j=o.length,G=s.length;N<j;){if(x>=G)return -1;if(37===(_=o.charCodeAt(N++))){if(!(F=ep[(_=o.charAt(N++))in $?o.charAt(N++):_])||(x=F(i,s,x))<0)return -1}else if(_!=s.charCodeAt(x++))return -1}return x}return eh.x=newFormat(s,eh),eh.X=newFormat(x,eh),eh.c=newFormat(o,eh),ed.x=newFormat(s,ed),ed.X=newFormat(x,ed),ed.c=newFormat(o,ed),{format:function(i){var o=newFormat(i+="",eh);return o.toString=function(){return i},o},parse:function(i){var o=newParse(i+="",!1);return o.toString=function(){return i},o},utcFormat:function(i){var o=newFormat(i+="",ed);return o.toString=function(){return i},o},utcParse:function(i){var o=newParse(i+="",!0);return o.toString=function(){return i},o}}}var $={"-":"",_:" ",0:"0"},ee=/^\s*\d+/,et=/^%/,er=/[\\^$*+?|[\]().{}]/g;function pad(i,o,s){var x=i<0?"-":"",_=(x?-i:i)+"",F=_.length;return x+(F<s?Array(s-F+1).join(o)+_:_)}function requote(i){return i.replace(er,"\\$&")}function formatRe(i){return RegExp("^(?:"+i.map(requote).join("|")+")","i")}function formatLookup(i){for(var o={},s=-1,x=i.length;++s<x;)o[i[s].toLowerCase()]=s;return o}function parseWeekdayNumberSunday(i,o,s){var x=ee.exec(o.slice(s,s+1));return x?(i.w=+x[0],s+x[0].length):-1}function parseWeekdayNumberMonday(i,o,s){var x=ee.exec(o.slice(s,s+1));return x?(i.u=+x[0],s+x[0].length):-1}function parseWeekNumberSunday(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.U=+x[0],s+x[0].length):-1}function parseWeekNumberISO(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.V=+x[0],s+x[0].length):-1}function parseWeekNumberMonday(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.W=+x[0],s+x[0].length):-1}function parseFullYear(i,o,s){var x=ee.exec(o.slice(s,s+4));return x?(i.y=+x[0],s+x[0].length):-1}function parseYear(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.y=+x[0]+(+x[0]>68?1900:2e3),s+x[0].length):-1}function parseZone(i,o,s){var x=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(s,s+6));return x?(i.Z=x[1]?0:-(x[2]+(x[3]||"00")),s+x[0].length):-1}function parseQuarter(i,o,s){var x=ee.exec(o.slice(s,s+1));return x?(i.q=3*x[0]-3,s+x[0].length):-1}function parseMonthNumber(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.m=x[0]-1,s+x[0].length):-1}function parseDayOfMonth(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.d=+x[0],s+x[0].length):-1}function parseDayOfYear(i,o,s){var x=ee.exec(o.slice(s,s+3));return x?(i.m=0,i.d=+x[0],s+x[0].length):-1}function parseHour24(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.H=+x[0],s+x[0].length):-1}function parseMinutes(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.M=+x[0],s+x[0].length):-1}function parseSeconds(i,o,s){var x=ee.exec(o.slice(s,s+2));return x?(i.S=+x[0],s+x[0].length):-1}function parseMilliseconds(i,o,s){var x=ee.exec(o.slice(s,s+3));return x?(i.L=+x[0],s+x[0].length):-1}function parseMicroseconds(i,o,s){var x=ee.exec(o.slice(s,s+6));return x?(i.L=Math.floor(x[0]/1e3),s+x[0].length):-1}function parseLiteralPercent(i,o,s){var x=et.exec(o.slice(s,s+1));return x?s+x[0].length:-1}function parseUnixTimestamp(i,o,s){var x=ee.exec(o.slice(s));return x?(i.Q=+x[0],s+x[0].length):-1}function parseUnixTimestampSeconds(i,o,s){var x=ee.exec(o.slice(s));return x?(i.s=+x[0],s+x[0].length):-1}function formatDayOfMonth(i,o){return pad(i.getDate(),o,2)}function formatHour24(i,o){return pad(i.getHours(),o,2)}function formatHour12(i,o){return pad(i.getHours()%12||12,o,2)}function formatDayOfYear(i,o){return pad(1+Z.Z.count((0,X.Z)(i),i),o,3)}function formatMilliseconds(i,o){return pad(i.getMilliseconds(),o,3)}function formatMicroseconds(i,o){return formatMilliseconds(i,o)+"000"}function formatMonthNumber(i,o){return pad(i.getMonth()+1,o,2)}function formatMinutes(i,o){return pad(i.getMinutes(),o,2)}function formatSeconds(i,o){return pad(i.getSeconds(),o,2)}function formatWeekdayNumberMonday(i){var o=i.getDay();return 0===o?7:o}function formatWeekNumberSunday(i,o){return pad(G.OM.count((0,X.Z)(i)-1,i),o,2)}function formatWeekNumberISO(i,o){var s=i.getDay();return i=s>=4||0===s?(0,G.bL)(i):G.bL.ceil(i),pad(G.bL.count((0,X.Z)(i),i)+(4===(0,X.Z)(i).getDay()),o,2)}function formatWeekdayNumberSunday(i){return i.getDay()}function formatWeekNumberMonday(i,o){return pad(G.wA.count((0,X.Z)(i)-1,i),o,2)}function formatYear(i,o){return pad(i.getFullYear()%100,o,2)}function formatFullYear(i,o){return pad(i.getFullYear()%1e4,o,4)}function formatZone(i){var o=i.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+pad(o/60|0,"0",2)+pad(o%60,"0",2)}function formatUTCDayOfMonth(i,o){return pad(i.getUTCDate(),o,2)}function formatUTCHour24(i,o){return pad(i.getUTCHours(),o,2)}function formatUTCHour12(i,o){return pad(i.getUTCHours()%12||12,o,2)}function formatUTCDayOfYear(i,o){return pad(1+j.Z.count((0,J.Z)(i),i),o,3)}function formatUTCMilliseconds(i,o){return pad(i.getUTCMilliseconds(),o,3)}function formatUTCMicroseconds(i,o){return formatUTCMilliseconds(i,o)+"000"}function formatUTCMonthNumber(i,o){return pad(i.getUTCMonth()+1,o,2)}function formatUTCMinutes(i,o){return pad(i.getUTCMinutes(),o,2)}function formatUTCSeconds(i,o){return pad(i.getUTCSeconds(),o,2)}function formatUTCWeekdayNumberMonday(i){var o=i.getUTCDay();return 0===o?7:o}function formatUTCWeekNumberSunday(i,o){return pad(N.Ox.count((0,J.Z)(i)-1,i),o,2)}function formatUTCWeekNumberISO(i,o){var s=i.getUTCDay();return i=s>=4||0===s?(0,N.hB)(i):N.hB.ceil(i),pad(N.hB.count((0,J.Z)(i),i)+(4===(0,J.Z)(i).getUTCDay()),o,2)}function formatUTCWeekdayNumberSunday(i){return i.getUTCDay()}function formatUTCWeekNumberMonday(i,o){return pad(N.l6.count((0,J.Z)(i)-1,i),o,2)}function formatUTCYear(i,o){return pad(i.getUTCFullYear()%100,o,2)}function formatUTCFullYear(i,o){return pad(i.getUTCFullYear()%1e4,o,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(i){return+i}function formatUnixTimestampSeconds(i){return Math.floor(+i/1e3)}_=(x=formatLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,x.parse,F=x.utcFormat,x.utcParse},82301:function(i,o,s){"use strict";s.d(o,{a:function(){return N}});var x=s(30052),_=s(54263),F=(0,x.Z)(function(i){i.setHours(0,0,0,0)},function(i,o){i.setDate(i.getDate()+o)},function(i,o){return(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*_.yB)/_.UD},function(i){return i.getDate()-1});o.Z=F;var N=F.range},54263:function(i,o,s){"use strict";s.d(o,{UD:function(){return N},Y2:function(){return F},Ym:function(){return x},iM:function(){return j},yB:function(){return _}});var x=1e3,_=6e4,F=36e5,N=864e5,j=6048e5},81041:function(i,o,s){"use strict";s.r(o),s.d(o,{timeDay:function(){return ei.Z},timeDays:function(){return ei.a},timeFriday:function(){return eo.mC},timeFridays:function(){return eo.b$},timeHour:function(){return er},timeHours:function(){return en},timeInterval:function(){return x.Z},timeMillisecond:function(){return F},timeMilliseconds:function(){return N},timeMinute:function(){return $},timeMinutes:function(){return ee},timeMonday:function(){return eo.wA},timeMondays:function(){return eo.bJ},timeMonth:function(){return el},timeMonths:function(){return ec},timeSaturday:function(){return eo.EY},timeSaturdays:function(){return eo.Ff},timeSecond:function(){return Z},timeSeconds:function(){return X},timeSunday:function(){return eo.OM},timeSundays:function(){return eo.vm},timeThursday:function(){return eo.bL},timeThursdays:function(){return eo.$t},timeTuesday:function(){return eo.sy},timeTuesdays:function(){return eo.aU},timeWednesday:function(){return eo.zg},timeWednesdays:function(){return eo.Ld},timeWeek:function(){return eo.OM},timeWeeks:function(){return eo.vm},timeYear:function(){return eu.Z},timeYears:function(){return eu.g},utcDay:function(){return ey.Z},utcDays:function(){return ey.y},utcFriday:function(){return ev.QQ},utcFridays:function(){return ev.fz},utcHour:function(){return eg},utcHours:function(){return em},utcMillisecond:function(){return F},utcMilliseconds:function(){return N},utcMinute:function(){return eh},utcMinutes:function(){return ed},utcMonday:function(){return ev.l6},utcMondays:function(){return ev.$3},utcMonth:function(){return e_},utcMonths:function(){return ew},utcSaturday:function(){return ev.g4},utcSaturdays:function(){return ev.Q_},utcSecond:function(){return Z},utcSeconds:function(){return X},utcSunday:function(){return ev.Ox},utcSundays:function(){return ev.SU},utcThursday:function(){return ev.hB},utcThursdays:function(){return ev.xj},utcTuesday:function(){return ev.J1},utcTuesdays:function(){return ev.DK},utcWednesday:function(){return ev.b3},utcWednesdays:function(){return ev.uy},utcWeek:function(){return ev.Ox},utcWeeks:function(){return ev.SU},utcYear:function(){return eT.Z},utcYears:function(){return eT.D}});var x=s(30052),_=(0,x.Z)(function(){},function(i,o){i.setTime(+i+o)},function(i,o){return o-i});_.every=function(i){return isFinite(i=Math.floor(i))&&i>0?i>1?(0,x.Z)(function(o){o.setTime(Math.floor(o/i)*i)},function(o,s){o.setTime(+o+s*i)},function(o,s){return(s-o)/i}):_:null};var F=_,N=_.range,j=s(54263),G=(0,x.Z)(function(i){i.setTime(i-i.getMilliseconds())},function(i,o){i.setTime(+i+o*j.Ym)},function(i,o){return(o-i)/j.Ym},function(i){return i.getUTCSeconds()}),Z=G,X=G.range,J=(0,x.Z)(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*j.Ym)},function(i,o){i.setTime(+i+o*j.yB)},function(i,o){return(o-i)/j.yB},function(i){return i.getMinutes()}),$=J,ee=J.range,et=(0,x.Z)(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*j.Ym-i.getMinutes()*j.yB)},function(i,o){i.setTime(+i+o*j.Y2)},function(i,o){return(o-i)/j.Y2},function(i){return i.getHours()}),er=et,en=et.range,ei=s(82301),eo=s(59879),es=(0,x.Z)(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,o){i.setMonth(i.getMonth()+o)},function(i,o){return o.getMonth()-i.getMonth()+(o.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()}),el=es,ec=es.range,eu=s(34823),ef=(0,x.Z)(function(i){i.setUTCSeconds(0,0)},function(i,o){i.setTime(+i+o*j.yB)},function(i,o){return(o-i)/j.yB},function(i){return i.getUTCMinutes()}),eh=ef,ed=ef.range,ep=(0,x.Z)(function(i){i.setUTCMinutes(0,0,0)},function(i,o){i.setTime(+i+o*j.Y2)},function(i,o){return(o-i)/j.Y2},function(i){return i.getUTCHours()}),eg=ep,em=ep.range,ey=s(48480),ev=s(58176),ex=(0,x.Z)(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCMonth(i.getUTCMonth()+o)},function(i,o){return o.getUTCMonth()-i.getUTCMonth()+(o.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()}),e_=ex,ew=ex.range,eT=s(79791)},30052:function(i,o,s){"use strict";s.d(o,{Z:function(){return function newInterval(i,o,s,F){function interval(o){return i(o=0==arguments.length?new Date:new Date(+o)),o}return interval.floor=function(o){return i(o=new Date(+o)),o},interval.ceil=function(s){return i(s=new Date(s-1)),o(s,1),i(s),s},interval.round=function(i){var o=interval(i),s=interval.ceil(i);return i-o<s-i?o:s},interval.offset=function(i,s){return o(i=new Date(+i),null==s?1:Math.floor(s)),i},interval.range=function(s,x,_){var F,N=[];if(s=interval.ceil(s),_=null==_?1:Math.floor(_),!(s<x)||!(_>0))return N;do N.push(F=new Date(+s)),o(s,_),i(s);while(F<s&&s<x);return N},interval.filter=function(s){return newInterval(function(o){if(o>=o)for(;i(o),!s(o);)o.setTime(o-1)},function(i,x){if(i>=i){if(x<0)for(;++x<=0;)for(;o(i,-1),!s(i););else for(;--x>=0;)for(;o(i,1),!s(i););}})},s&&(interval.count=function(o,F){return x.setTime(+o),_.setTime(+F),i(x),i(_),Math.floor(s(x,_))},interval.every=function(i){return isFinite(i=Math.floor(i))&&i>0?i>1?interval.filter(F?function(o){return F(o)%i==0}:function(o){return interval.count(0,o)%i==0}):interval:null}),interval}}});var x=new Date,_=new Date},48480:function(i,o,s){"use strict";s.d(o,{y:function(){return N}});var x=s(30052),_=s(54263),F=(0,x.Z)(function(i){i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCDate(i.getUTCDate()+o)},function(i,o){return(o-i)/_.UD},function(i){return i.getUTCDate()-1});o.Z=F;var N=F.range},58176:function(i,o,s){"use strict";s.d(o,{$3:function(){return ee},DK:function(){return et},J1:function(){return j},Ox:function(){return F},QQ:function(){return X},Q_:function(){return eo},SU:function(){return $},b3:function(){return G},fz:function(){return ei},g4:function(){return J},hB:function(){return Z},l6:function(){return N},uy:function(){return er},xj:function(){return en}});var x=s(30052),_=s(54263);function utcWeekday(i){return(0,x.Z)(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-i)%7),o.setUTCHours(0,0,0,0)},function(i,o){i.setUTCDate(i.getUTCDate()+7*o)},function(i,o){return(o-i)/_.iM})}var F=utcWeekday(0),N=utcWeekday(1),j=utcWeekday(2),G=utcWeekday(3),Z=utcWeekday(4),X=utcWeekday(5),J=utcWeekday(6),$=F.range,ee=N.range,et=j.range,er=G.range,en=Z.range,ei=X.range,eo=J.range},79791:function(i,o,s){"use strict";s.d(o,{D:function(){return F}});var x=s(30052),_=(0,x.Z)(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCFullYear(i.getUTCFullYear()+o)},function(i,o){return o.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});_.every=function(i){return isFinite(i=Math.floor(i))&&i>0?(0,x.Z)(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/i)*i),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,s){o.setUTCFullYear(o.getUTCFullYear()+s*i)}):null},o.Z=_;var F=_.range},59879:function(i,o,s){"use strict";s.d(o,{$t:function(){return en},EY:function(){return J},Ff:function(){return eo},Ld:function(){return er},OM:function(){return F},aU:function(){return et},b$:function(){return ei},bJ:function(){return ee},bL:function(){return Z},mC:function(){return X},sy:function(){return j},vm:function(){return $},wA:function(){return N},zg:function(){return G}});var x=s(30052),_=s(54263);function weekday(i){return(0,x.Z)(function(o){o.setDate(o.getDate()-(o.getDay()+7-i)%7),o.setHours(0,0,0,0)},function(i,o){i.setDate(i.getDate()+7*o)},function(i,o){return(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*_.yB)/_.iM})}var F=weekday(0),N=weekday(1),j=weekday(2),G=weekday(3),Z=weekday(4),X=weekday(5),J=weekday(6),$=F.range,ee=N.range,et=j.range,er=G.range,en=Z.range,ei=X.range,eo=J.range},34823:function(i,o,s){"use strict";s.d(o,{g:function(){return F}});var x=s(30052),_=(0,x.Z)(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,o){i.setFullYear(i.getFullYear()+o)},function(i,o){return o.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});_.every=function(i){return isFinite(i=Math.floor(i))&&i>0?(0,x.Z)(function(o){o.setFullYear(Math.floor(o.getFullYear()/i)*i),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,s){o.setFullYear(o.getFullYear()+s*i)}):null},o.Z=_;var F=_.range},17045:function(i,o,s){"use strict";var x=s(8709),_="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),F=Object.prototype.toString,N=Array.prototype.concat,j=Object.defineProperty,G=s(55622)(),Z=j&&G,defineProperty=function(i,o,s,x){if(o in i){if(!0===x){if(i[o]===s)return}else if(!("function"==typeof x&&"[object Function]"===F.call(x))||!x())return}Z?j(i,o,{configurable:!0,enumerable:!1,value:s,writable:!0}):i[o]=s},defineProperties=function(i,o){var s=arguments.length>2?arguments[2]:{},F=x(o);_&&(F=N.call(F,Object.getOwnPropertySymbols(o)));for(var j=0;j<F.length;j+=1)defineProperty(i,F[j],o[F[j]],s[F[j]])};defineProperties.supportsDescriptors=!!Z,i.exports=defineProperties},46775:function(i){i.exports=function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}},53545:function(i){"use strict";i.exports=kerning;var o=(kerning.canvas=document.createElement("canvas")).getContext("2d"),s=createPairs([32,126]);function kerning(i,x){Array.isArray(i)&&(i=i.join(", "));var _,F={},N=16,j=.05;x&&(2===x.length&&"number"==typeof x[0]?_=createPairs(x):Array.isArray(x)?_=x:(x.o?_=createPairs(x.o):x.pairs&&(_=x.pairs),x.fontSize&&(N=x.fontSize),null!=x.threshold&&(j=x.threshold))),_||(_=s),o.font=N+"px "+i;for(var G=0;G<_.length;G++){var Z=_[G],X=o.measureText(Z[0]).width+o.measureText(Z[1]).width,J=o.measureText(Z).width;if(Math.abs(X-J)>N*j){var $=(J-X)/N;F[Z]=1e3*$}}return F}function createPairs(i){for(var o=[],s=i[0];s<=i[1];s++)for(var x=String.fromCharCode(s),_=i[0];_<i[1];_++){var F=x+String.fromCharCode(_);o.push(F)}return o}kerning.createPairs=createPairs,kerning.ascii=s},31457:function(i,o,s){var x=s(65185),_=s(18625),F={M:"moveTo",C:"bezierCurveTo"};i.exports=function(i,o){i.beginPath(),_(x(o)).forEach(function(o){var s=o[0],x=o.slice(1);i[F[s]].apply(i,x)}),i.closePath()}},90660:function(i){i.exports=function(i){switch(i){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(i){"use strict";i.exports=function(i,o){switch(void 0===o&&(o=0),typeof i){case"number":if(i>0)return function(i,o){var s,x;for(x=0,s=Array(i);x<i;++x)s[x]=o;return s}(0|i,o);break;case"object":if("number"==typeof i.length)return function dupe_array(i,o,s){var x=0|i[s];if(x<=0)return[];var _,F=Array(x);if(s===i.length-1)for(_=0;_<x;++_)F[_]=o;else for(_=0;_<x;++_)F[_]=dupe_array(i,o,s+1);return F}(i,o,0)}return[]}},11474:function(i){"use strict";function earcut(i,o,s){s=s||2;var x,_,F,N,j,G,Z,X=o&&o.length,J=X?o[0]*s:i.length,$=linkedList(i,0,J,s,!0),ee=[];if(!$||$.next===$.prev)return ee;if(X&&($=function(i,o,s,x){var _,F,N,j,G,Z=[];for(_=0,F=o.length;_<F;_++)N=o[_]*x,j=_<F-1?o[_+1]*x:i.length,(G=linkedList(i,N,j,x,!1))===G.next&&(G.steiner=!0),Z.push(function(i){var o=i,s=i;do(o.x<s.x||o.x===s.x&&o.y<s.y)&&(s=o),o=o.next;while(o!==i);return s}(G));for(Z.sort(compareX),_=0;_<Z.length;_++)(function(i,o){if(o=function(i,o){var s,x,_,F=o,N=i.x,j=i.y,G=-1/0;do{if(j<=F.y&&j>=F.next.y&&F.next.y!==F.y){var Z=F.x+(j-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Z<=N&&Z>G){if(G=Z,Z===N){if(j===F.y)return F;if(j===F.next.y)return F.next}_=F.x<F.next.x?F:F.next}}F=F.next}while(F!==o);if(!_)return null;if(N===G)return _;var X,J=_,$=_.x,ee=_.y,et=1/0;F=_;do N>=F.x&&F.x>=$&&N!==F.x&&pointInTriangle(j<ee?N:G,j,$,ee,j<ee?G:N,j,F.x,F.y)&&(X=Math.abs(j-F.y)/(N-F.x),locallyInside(F,i)&&(X<et||X===et&&(F.x>_.x||F.x===_.x&&(s=_,x=F,0>area(s.prev,s,x.prev)&&0>area(x.next,s,s.next))))&&(_=F,et=X)),F=F.next;while(F!==J);return _}(i,o)){var s=splitPolygon(o,i);filterPoints(o,o.next),filterPoints(s,s.next)}})(Z[_],s),s=filterPoints(s,s.next);return s}(i,o,$,s)),i.length>80*s){x=F=i[0],_=N=i[1];for(var et=s;et<J;et+=s)j=i[et],G=i[et+1],j<x&&(x=j),G<_&&(_=G),j>F&&(F=j),G>N&&(N=G);Z=0!==(Z=Math.max(F-x,N-_))?1/Z:0}return function earcutLinked(i,o,s,x,_,F,N){if(i){!N&&F&&function(i,o,s,x){var _=i;do null===_.z&&(_.z=zOrder(_.x,_.y,o,s,x)),_.prevZ=_.prev,_.nextZ=_.next,_=_.next;while(_!==i);_.prevZ.nextZ=null,_.prevZ=null,function(i){var o,s,x,_,F,N,j,G,Z=1;do{for(s=i,i=null,F=null,N=0;s;){for(N++,x=s,j=0,o=0;o<Z&&(j++,x=x.nextZ);o++);for(G=Z;j>0||G>0&&x;)0!==j&&(0===G||!x||s.z<=x.z)?(_=s,s=s.nextZ,j--):(_=x,x=x.nextZ,G--),F?F.nextZ=_:i=_,_.prevZ=F,F=_;s=x}F.nextZ=null,Z*=2}while(N>1)}(_)}(i,x,_,F);for(var j,G,Z=i;i.prev!==i.next;){if(j=i.prev,G=i.next,F?function(i,o,s,x){var _=i.prev,F=i.next;if(area(_,i,F)>=0)return!1;for(var N=_.x<i.x?_.x<F.x?_.x:F.x:i.x<F.x?i.x:F.x,j=_.y<i.y?_.y<F.y?_.y:F.y:i.y<F.y?i.y:F.y,G=_.x>i.x?_.x>F.x?_.x:F.x:i.x>F.x?i.x:F.x,Z=_.y>i.y?_.y>F.y?_.y:F.y:i.y>F.y?i.y:F.y,X=zOrder(N,j,o,s,x),J=zOrder(G,Z,o,s,x),$=i.prevZ,ee=i.nextZ;$&&$.z>=X&&ee&&ee.z<=J;){if($!==i.prev&&$!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,$.x,$.y)&&area($.prev,$,$.next)>=0||($=$.prevZ,ee!==i.prev&&ee!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;$&&$.z>=X;){if($!==i.prev&&$!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,$.x,$.y)&&area($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;ee&&ee.z<=J;){if(ee!==i.prev&&ee!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}(i,x,_,F):function(i){var o=i.prev,s=i.next;if(area(o,i,s)>=0)return!1;for(var x=i.next.next;x!==i.prev;){if(pointInTriangle(o.x,o.y,i.x,i.y,s.x,s.y,x.x,x.y)&&area(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}(i)){o.push(j.i/s),o.push(i.i/s),o.push(G.i/s),removeNode(i),i=G.next,Z=G.next;continue}if((i=G)===Z){N?1===N?earcutLinked(i=function(i,o,s){var x=i;do{var _=x.prev,F=x.next.next;!equals(_,F)&&intersects(_,x,x.next,F)&&locallyInside(_,F)&&locallyInside(F,_)&&(o.push(_.i/s),o.push(x.i/s),o.push(F.i/s),removeNode(x),removeNode(x.next),x=i=F),x=x.next}while(x!==i);return filterPoints(x)}(filterPoints(i),o,s),o,s,x,_,F,2):2===N&&function(i,o,s,x,_,F){var N=i;do{for(var j,G,Z=N.next.next;Z!==N.prev;){if(N.i!==Z.i&&(j=N,G=Z,j.next.i!==G.i&&j.prev.i!==G.i&&!function(i,o){var s=i;do{if(s.i!==i.i&&s.next.i!==i.i&&s.i!==o.i&&s.next.i!==o.i&&intersects(s,s.next,i,o))return!0;s=s.next}while(s!==i);return!1}(j,G)&&(locallyInside(j,G)&&locallyInside(G,j)&&function(i,o){var s=i,x=!1,_=(i.x+o.x)/2,F=(i.y+o.y)/2;do s.y>F!=s.next.y>F&&s.next.y!==s.y&&_<(s.next.x-s.x)*(F-s.y)/(s.next.y-s.y)+s.x&&(x=!x),s=s.next;while(s!==i);return x}(j,G)&&(area(j.prev,j,G.prev)||area(j,G.prev,G))||equals(j,G)&&area(j.prev,j,j.next)>0&&area(G.prev,G,G.next)>0))){var X=splitPolygon(N,Z);N=filterPoints(N,N.next),X=filterPoints(X,X.next),earcutLinked(N,o,s,x,_,F),earcutLinked(X,o,s,x,_,F);return}Z=Z.next}N=N.next}while(N!==i)}(i,o,s,x,_,F):earcutLinked(filterPoints(i),o,s,x,_,F,1);break}}}}($,ee,s,x,_,Z),ee}function linkedList(i,o,s,x,_){var F,N;if(_===signedArea(i,o,s,x)>0)for(F=o;F<s;F+=x)N=insertNode(F,i[F],i[F+1],N);else for(F=s-x;F>=o;F-=x)N=insertNode(F,i[F],i[F+1],N);return N&&equals(N,N.next)&&(removeNode(N),N=N.next),N}function filterPoints(i,o){if(!i)return i;o||(o=i);var s,x=i;do if(s=!1,!x.steiner&&(equals(x,x.next)||0===area(x.prev,x,x.next))){if(removeNode(x),(x=o=x.prev)===x.next)break;s=!0}else x=x.next;while(s||x!==o);return o}function compareX(i,o){return i.x-o.x}function zOrder(i,o,s,x,_){return(i=((i=((i=((i=((i=32767*(i-s)*_)|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=((o=32767*(o-x)*_)|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1}function pointInTriangle(i,o,s,x,_,F,N,j){return(_-N)*(o-j)-(i-N)*(F-j)>=0&&(i-N)*(x-j)-(s-N)*(o-j)>=0&&(s-N)*(F-j)-(_-N)*(x-j)>=0}function area(i,o,s){return(o.y-i.y)*(s.x-o.x)-(o.x-i.x)*(s.y-o.y)}function equals(i,o){return i.x===o.x&&i.y===o.y}function intersects(i,o,s,x){var _=sign(area(i,o,s)),F=sign(area(i,o,x)),N=sign(area(s,x,i)),j=sign(area(s,x,o));return!!(_!==F&&N!==j||0===_&&onSegment(i,s,o)||0===F&&onSegment(i,x,o)||0===N&&onSegment(s,i,x)||0===j&&onSegment(s,o,x))}function onSegment(i,o,s){return o.x<=Math.max(i.x,s.x)&&o.x>=Math.min(i.x,s.x)&&o.y<=Math.max(i.y,s.y)&&o.y>=Math.min(i.y,s.y)}function sign(i){return i>0?1:i<0?-1:0}function locallyInside(i,o){return 0>area(i.prev,i,i.next)?area(i,o,i.next)>=0&&area(i,i.prev,o)>=0:0>area(i,o,i.prev)||0>area(i,i.next,o)}function splitPolygon(i,o){var s=new Node(i.i,i.x,i.y),x=new Node(o.i,o.x,o.y),_=i.next,F=o.prev;return i.next=o,o.prev=i,s.next=_,_.prev=s,x.next=s,s.prev=x,F.next=x,x.prev=F,x}function insertNode(i,o,s,x){var _=new Node(i,o,s);return x?(_.next=x.next,_.prev=x,x.next.prev=_,x.next=_):(_.prev=_,_.next=_),_}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,o,s){this.i=i,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,o,s,x){for(var _=0,F=o,N=s-x;F<s;F+=x)_+=(i[N]-i[F])*(i[F+1]+i[N+1]),N=F;return _}i.exports=earcut,i.exports.default=earcut,earcut.deviation=function(i,o,s,x){var _=o&&o.length,F=_?o[0]*s:i.length,N=Math.abs(signedArea(i,0,F,s));if(_)for(var j=0,G=o.length;j<G;j++){var Z=o[j]*s,X=j<G-1?o[j+1]*s:i.length;N-=Math.abs(signedArea(i,Z,X,s))}var J=0;for(j=0;j<x.length;j+=3){var $=x[j]*s,ee=x[j+1]*s,et=x[j+2]*s;J+=Math.abs((i[$]-i[et])*(i[ee+1]-i[$+1])-(i[$]-i[ee])*(i[et+1]-i[$+1]))}return 0===N&&0===J?0:Math.abs((J-N)/N)},earcut.flatten=function(i){for(var o=i[0][0].length,s={vertices:[],holes:[],dimensions:o},x=0,_=0;_<i.length;_++){for(var F=0;F<i[_].length;F++)for(var N=0;N<o;N++)s.vertices.push(i[_][F][N]);_>0&&(x+=i[_-1].length,s.holes.push(x))}return s}},2502:function(i,o,s){var x=s(68664);i.exports=function(i,o){var s,_=[],F=[],N=[],j={},G=[];s=0;for(var Z=i.length;s<Z;){var X=function(o){!function(o){for(var s=0;s<i.length;s++)s<o&&(i[s]=[]),i[s]=i[s].filter(function(i){return i>=o})}(o);for(var s,_=x(i).components.filter(function(i){return i.length>1}),F=1/0,N=0;N<_.length;N++)for(var j=0;j<_[N].length;j++)_[N][j]<F&&(F=_[N][j],s=N);var G=_[s];return!!G&&{leastVertex:F,adjList:i.map(function(i,o){return -1===G.indexOf(o)?[]:i.filter(function(i){return -1!==G.indexOf(i)})})}}(s);if(s=X.leastVertex,G=X.adjList){for(var J=0;J<G.length;J++)for(var $=0;$<G[J].length;$++){var ee=G[J][$];N[+ee]=!1,j[ee]={}}(function circuit(i){var x,Z,X=!1;for(F.push(i),N[i]=!0,x=0;x<G[i].length;x++)(Z=G[i][x])===s?(function(i,s){var x=[].concat(s).concat(i);o?o(circuit):_.push(x)}(s,F),X=!0):N[Z]||(X=circuit(Z));if(X)!function unblock(i){N[i]=!1,j.hasOwnProperty(i)&&Object.keys(j[i]).forEach(function(o){delete j[i][o],N[o]&&unblock(o)})}(i);else for(x=0;x<G[i].length;x++){var J=j[Z=G[i][x]];J||(J={},j[Z]=J),J[Z]=!0}return F.pop(),X})(s),s+=1}else s=Z}if(!o)return _}},16134:function(i,o,s){"use strict";var x=s(36672);i.exports=function(){return x(this).length=0,this}},4892:function(i,o,s){"use strict";i.exports=s(64404)()?Array.from:s(49441)},64404:function(i){"use strict";i.exports=function(){var i,o,s=Array.from;return"function"==typeof s&&!!((o=s(i=["raz","dwa"]))&&o!==i&&"dwa"===o[1])}},49441:function(i,o,s){"use strict";var x=s(8260).iterator,_=s(73051),F=s(33717),N=s(35976),j=s(78513),G=s(36672),Z=s(95296),X=s(87963),J=Array.isArray,$=Function.prototype.call,ee={configurable:!0,enumerable:!0,writable:!0,value:null},et=Object.defineProperty;i.exports=function(i){var o,s,er,en,ei,eo,es,el,ec,eu,ef=arguments[1],eh=arguments[2];if(i=Object(G(i)),Z(ef)&&j(ef),this&&this!==Array&&F(this))o=this;else{if(!ef){if(_(i))return 1!==(ei=i.length)?Array.apply(null,i):((en=[,])[0]=i[0],en);if(J(i)){for(s=0,en=Array(ei=i.length);s<ei;++s)en[s]=i[s];return en}}en=[]}if(!J(i)){if(void 0!==(ec=i[x])){for(es=j(ec).call(i),o&&(en=new o),el=es.next(),s=0;!el.done;)eu=ef?$.call(ef,eh,el.value,s):el.value,o?(ee.value=eu,et(en,s,ee)):en[s]=eu,el=es.next(),++s;ei=s}else if(X(i)){for(ei=i.length,o&&(en=new o),s=0,er=0;s<ei;++s)eu=i[s],s+1<ei&&(eo=eu.charCodeAt(0))>=55296&&eo<=56319&&(eu+=i[++s]),eu=ef?$.call(ef,eh,eu,er):eu,o?(ee.value=eu,et(en,er,ee)):en[er]=eu,++er;ei=er}}if(void 0===ei)for(ei=N(i.length),o&&(en=new o(ei)),s=0;s<ei;++s)eu=ef?$.call(ef,eh,i[s],s):i[s],o?(ee.value=eu,et(en,s,ee)):en[s]=eu;return o&&(ee.value=null,en.length=ei),en}},73051:function(i){"use strict";var o=Object.prototype.toString,s=o.call(function(){return arguments}());i.exports=function(i){return o.call(i)===s}},33717:function(i){"use strict";var o=Object.prototype.toString,s=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);i.exports=function(i){return"function"==typeof i&&s(o.call(i))}},52345:function(i){"use strict";i.exports=function(){}},9953:function(i,o,s){"use strict";i.exports=s(90436)()?Math.sign:s(6069)},90436:function(i){"use strict";i.exports=function(){var i=Math.sign;return"function"==typeof i&&1===i(10)&&-1===i(-20)}},6069:function(i){"use strict";i.exports=function(i){return isNaN(i=Number(i))||0===i?i:i>0?1:-1}},56247:function(i,o,s){"use strict";var x=s(9953),_=Math.abs,F=Math.floor;i.exports=function(i){return isNaN(i)?0:0!==(i=Number(i))&&isFinite(i)?x(i)*F(_(i)):i}},35976:function(i,o,s){"use strict";var x=s(56247),_=Math.max;i.exports=function(i){return _(0,x(i))}},67260:function(i,o,s){"use strict";var x=s(78513),_=s(36672),F=Function.prototype.bind,N=Function.prototype.call,j=Object.keys,G=Object.prototype.propertyIsEnumerable;i.exports=function(i,o){return function(s,Z){var X,J=arguments[2],$=arguments[3];return s=Object(_(s)),x(Z),X=j(s),$&&X.sort("function"==typeof $?F.call($,s):void 0),"function"!=typeof i&&(i=X[i]),N.call(i,X,function(i,x){return G.call(s,i)?N.call(Z,J,s[i],i,s,x):o})}}},95879:function(i,o,s){"use strict";i.exports=s(73583)()?Object.assign:s(34205)},73583:function(i){"use strict";i.exports=function(){var i,o=Object.assign;return"function"==typeof o&&(o(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")}},34205:function(i,o,s){"use strict";var x=s(68700),_=s(36672),F=Math.max;i.exports=function(i,o){var s,N,j,G=F(arguments.length,2);for(N=1,i=Object(_(i)),j=function(x){try{i[x]=o[x]}catch(i){s||(s=i)}};N<G;++N)o=arguments[N],x(o).forEach(j);if(void 0!==s)throw s;return i}},19012:function(i,o,s){"use strict";var x=s(4892),_=s(95879),F=s(36672);i.exports=function(i){var o=Object(F(i)),s=arguments[1],N=Object(arguments[2]);if(o!==i&&!s)return o;var j={};return s?x(s,function(o){(N.ensure||o in i)&&(j[o]=i[o])}):_(j,i),j}},52818:function(i,o,s){"use strict";var x,_,F,N,j=Object.create;s(33247)()||(N=s(51882)),i.exports=N&&1===N.level?(x={},_={},F={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if("__proto__"===i){_[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}_[i]=F}),Object.defineProperties(x,_),Object.defineProperty(N,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:x}),function(i,o){return j(null===i?x:i,o)}):j},96437:function(i,o,s){"use strict";i.exports=s(67260)("forEach")},99611:function(i,o,s){"use strict";var x=s(95296),_={function:!0,object:!0};i.exports=function(i){return x(i)&&_[typeof i]||!1}},95296:function(i,o,s){"use strict";var x=s(52345)();i.exports=function(i){return i!==x&&null!==i}},68700:function(i,o,s){"use strict";i.exports=s(13895)()?Object.keys:s(25217)},13895:function(i){"use strict";i.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}},25217:function(i,o,s){"use strict";var x=s(95296),_=Object.keys;i.exports=function(i){return _(x(i)?Object(i):i)}},16906:function(i,o,s){"use strict";var x=s(78513),_=s(96437),F=Function.prototype.call;i.exports=function(i,o){var s={},N=arguments[2];return x(o),_(i,function(i,x,_,j){s[x]=F.call(o,N,i,x,_,j)}),s}},21780:function(i,o,s){"use strict";var x=s(95296),_=Array.prototype.forEach,F=Object.create,process=function(i,o){var s;for(s in i)o[s]=i[s]};i.exports=function(i){var o=F(null);return _.call(arguments,function(i){x(i)&&process(Object(i),o)}),o}},1496:function(i,o,s){"use strict";i.exports=s(33247)()?Object.setPrototypeOf:s(51882)},33247:function(i){"use strict";var o=Object.create,s=Object.getPrototypeOf,x={};i.exports=function(){var i=Object.setPrototypeOf,_=arguments[0]||o;return"function"==typeof i&&s(i(_(null),x))===x}},51882:function(i,o,s){"use strict";var x,_,F,N,j=s(99611),G=s(36672),Z=Object.prototype.isPrototypeOf,X=Object.defineProperty,J={configurable:!0,enumerable:!1,writable:!0,value:void 0};N=function(i,o){if(G(i),null===o||j(o))return i;throw TypeError("Prototype must be null or an object")},i.exports=(x=function(){var i,o=Object.create(null),s={},x=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(x){try{(i=x.set).call(o,s)}catch(i){}if(Object.getPrototypeOf(o)===s)return{set:i,level:2}}return(o.__proto__=s,Object.getPrototypeOf(o)===s)?{level:2}:((o={}).__proto__=s,Object.getPrototypeOf(o)===s&&{level:1})}())?(2===x.level?x.set?(F=x.set,_=function(i,o){return F.call(N(i,o),o),i}):_=function(i,o){return N(i,o).__proto__=o,i}:_=function self(i,o){var s;return N(i,o),(s=Z.call(self.nullPolyfill,i))&&delete self.nullPolyfill.__proto__,null===o&&(o=self.nullPolyfill),i.__proto__=o,s&&X(self.nullPolyfill,"__proto__",J),i},Object.defineProperty(_,"level",{configurable:!1,enumerable:!1,writable:!1,value:x.level})):null,s(52818)},78513:function(i){"use strict";i.exports=function(i){if("function"!=typeof i)throw TypeError(i+" is not a function");return i}},98976:function(i,o,s){"use strict";var x=s(99611);i.exports=function(i){if(!x(i))throw TypeError(i+" is not an Object");return i}},36672:function(i,o,s){"use strict";var x=s(95296);i.exports=function(i){if(!x(i))throw TypeError("Cannot use null or undefined");return i}},66741:function(i,o,s){"use strict";i.exports=s(17557)()?String.prototype.contains:s(60381)},17557:function(i){"use strict";var o="razdwatrzy";i.exports=function(){return"function"==typeof o.contains&&!0===o.contains("dwa")&&!1===o.contains("foo")}},60381:function(i){"use strict";var o=String.prototype.indexOf;i.exports=function(i){return o.call(this,i,arguments[1])>-1}},87963:function(i){"use strict";var o=Object.prototype.toString,s=o.call("");i.exports=function(i){return"string"==typeof i||i&&"object"==typeof i&&(i instanceof String||o.call(i)===s)||!1}},43043:function(i){"use strict";var o=Object.create(null),s=Math.random;i.exports=function(){var i;do i=s().toString(36).slice(2);while(o[i]);return i}},32411:function(i,o,s){"use strict";var x,_=s(1496),F=s(66741),N=s(62072),j=s(8260),G=s(95426),Z=Object.defineProperty;x=i.exports=function(i,o){if(!(this instanceof x))throw TypeError("Constructor requires 'new'");G.call(this,i),Z(this,"__kind__",N("",o=o?F.call(o,"key+value")?"key+value":F.call(o,"key")?"key":"value":"value"))},_&&_(x,G),delete x.prototype.constructor,x.prototype=Object.create(G.prototype,{_resolve:N(function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i})}),Z(x.prototype,j.toStringTag,N("c","Array Iterator"))},27515:function(i,o,s){"use strict";var x=s(73051),_=s(78513),F=s(87963),N=s(66661),j=Array.isArray,G=Function.prototype.call,Z=Array.prototype.some;i.exports=function(i,o){var s,X,J,$,ee,et,er,en,ei=arguments[2];if(j(i)||x(i)?s="array":F(i)?s="string":i=N(i),_(o),J=function(){$=!0},"array"===s){Z.call(i,function(i){return G.call(o,ei,i,J),$});return}if("string"===s){for(ee=0,et=i.length;ee<et&&(er=i[ee],ee+1<et&&(en=er.charCodeAt(0))>=55296&&en<=56319&&(er+=i[++ee]),G.call(o,ei,er,J),!$);++ee);return}for(X=i.next();!X.done;){if(G.call(o,ei,X.value,J),$)return;X=i.next()}}},66661:function(i,o,s){"use strict";var x=s(73051),_=s(87963),F=s(32411),N=s(259),j=s(58095),G=s(8260).iterator;i.exports=function(i){return"function"==typeof j(i)[G]?i[G]():x(i)?new F(i):_(i)?new N(i):new F(i)}},95426:function(i,o,s){"use strict";var x,_=s(16134),F=s(95879),N=s(78513),j=s(36672),G=s(62072),Z=s(55174),X=s(8260),J=Object.defineProperty,$=Object.defineProperties;i.exports=x=function(i,o){if(!(this instanceof x))throw TypeError("Constructor requires 'new'");$(this,{__list__:G("w",j(i)),__context__:G("w",o),__nextIndex__:G("w",0)}),o&&(N(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete x.prototype.constructor,$(x.prototype,F({_next:G(function(){var i;if(this.__list__){if(this.__redo__&&void 0!==(i=this.__redo__.shift()))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:G(function(){return this._createResult(this._next())}),_createResult:G(function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:G(function(i){return this.__list__[i]}),_unBind:G(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:G(function(){return"[object "+(this[X.toStringTag]||"Object")+"]"})},Z({_onAdd:G(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){J(this,"__redo__",G("c",[i]));return}this.__redo__.forEach(function(o,s){o>=i&&(this.__redo__[s]=++o)},this),this.__redo__.push(i)}}),_onDelete:G(function(i){var o;!(i>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__&&(-1!==(o=this.__redo__.indexOf(i))&&this.__redo__.splice(o,1),this.__redo__.forEach(function(o,s){o>i&&(this.__redo__[s]=--o)},this)))}),_onClear:G(function(){this.__redo__&&_.call(this.__redo__),this.__nextIndex__=0})}))),J(x.prototype,X.iterator,G(function(){return this}))},35940:function(i,o,s){"use strict";var x=s(73051),_=s(95296),F=s(87963),N=s(8260).iterator,j=Array.isArray;i.exports=function(i){return!!_(i)&&(!!(j(i)||F(i)||x(i))||"function"==typeof i[N])}},259:function(i,o,s){"use strict";var x,_=s(1496),F=s(62072),N=s(8260),j=s(95426),G=Object.defineProperty;x=i.exports=function(i){if(!(this instanceof x))throw TypeError("Constructor requires 'new'");i=String(i),j.call(this,i),G(this,"__length__",F("",i.length))},_&&_(x,j),delete x.prototype.constructor,x.prototype=Object.create(j.prototype,{_next:F(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:F(function(i){var o,s=this.__list__[i];return this.__nextIndex__===this.__length__?s:(o=s.charCodeAt(0))>=55296&&o<=56319?s+this.__list__[this.__nextIndex__++]:s})}),G(x.prototype,N.toStringTag,F("c","String Iterator"))},58095:function(i,o,s){"use strict";var x=s(35940);i.exports=function(i){if(!x(i))throw TypeError(i+" is not iterable");return i}},73523:function(i){"use strict";function assign(i,o){if(null==i)throw TypeError("Cannot convert first argument to object");for(var s=Object(i),x=1;x<arguments.length;x++){var _=arguments[x];if(null!=_)for(var F=Object.keys(Object(_)),N=0,j=F.length;N<j;N++){var G=F[N],Z=Object.getOwnPropertyDescriptor(_,G);void 0!==Z&&Z.enumerable&&(s[G]=_[G])}}return s}i.exports={assign:assign,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign})}}},8260:function(i,o,s){"use strict";i.exports=s(69711)()?s(94908).Symbol:s(18415)},69711:function(i,o,s){"use strict";var x=s(94908),_={object:!0,symbol:!0};i.exports=function(){var i,o=x.Symbol;if("function"!=typeof o)return!1;i=o("test symbol");try{String(i)}catch(i){return!1}return!!_[typeof o.iterator]&&!!_[typeof o.toPrimitive]&&!!_[typeof o.toStringTag]}},82276:function(i){"use strict";i.exports=function(i){return!!i&&("symbol"==typeof i||!!i.constructor&&"Symbol"===i.constructor.name&&"Symbol"===i[i.constructor.toStringTag])}},29366:function(i,o,s){"use strict";var x=s(62072),_=Object.defineProperty,F=Object.prototype,N=(0,Object.create)(null);i.exports=function(i){for(var o,s,j=0;N[i+(j||"")];)++j;return N[i+=j||""]=!0,_(F,o="@@"+i,x.gs(null,function(i){s||(s=!0,_(this,o,x(i)),s=!1)})),o}},92842:function(i,o,s){"use strict";var x=s(62072),_=s(94908).Symbol;i.exports=function(i){return Object.defineProperties(i,{hasInstance:x("",_&&_.hasInstance||i("hasInstance")),isConcatSpreadable:x("",_&&_.isConcatSpreadable||i("isConcatSpreadable")),iterator:x("",_&&_.iterator||i("iterator")),match:x("",_&&_.match||i("match")),replace:x("",_&&_.replace||i("replace")),search:x("",_&&_.search||i("search")),species:x("",_&&_.species||i("species")),split:x("",_&&_.split||i("split")),toPrimitive:x("",_&&_.toPrimitive||i("toPrimitive")),toStringTag:x("",_&&_.toStringTag||i("toStringTag")),unscopables:x("",_&&_.unscopables||i("unscopables"))})}},13304:function(i,o,s){"use strict";var x=s(62072),_=s(53308),F=Object.create(null);i.exports=function(i){return Object.defineProperties(i,{for:x(function(o){return F[o]?F[o]:F[o]=i(String(o))}),keyFor:x(function(i){var o;for(o in _(i),F)if(F[o]===i)return o})})}},18415:function(i,o,s){"use strict";var x,_,F,N=s(62072),j=s(53308),G=s(94908).Symbol,Z=s(29366),X=s(92842),J=s(13304),$=Object.create,ee=Object.defineProperties,et=Object.defineProperty;if("function"==typeof G)try{String(G()),F=!0}catch(i){}else G=null;_=function(i){if(this instanceof _)throw TypeError("Symbol is not a constructor");return x(i)},i.exports=x=function Symbol(i){if(this instanceof Symbol)throw TypeError("Symbol is not a constructor");return F?G(i):ee($(_.prototype),{__description__:N("",i=void 0===i?"":String(i)),__name__:N("",Z(i))})},X(x),J(x),ee(_.prototype,{constructor:N(x),toString:N("",function(){return this.__name__})}),ee(x.prototype,{toString:N(function(){return"Symbol ("+j(this).__description__+")"}),valueOf:N(function(){return j(this)})}),et(x.prototype,x.toPrimitive,N("",function(){var i=j(this);return"symbol"==typeof i?i:i.toString()})),et(x.prototype,x.toStringTag,N("c","Symbol")),et(_.prototype,x.toStringTag,N("c",x.prototype[x.toStringTag])),et(_.prototype,x.toPrimitive,N("c",x.prototype[x.toPrimitive]))},53308:function(i,o,s){"use strict";var x=s(82276);i.exports=function(i){if(!x(i))throw TypeError(i+" is not a symbol");return i}},83522:function(i,o,s){"use strict";i.exports=s(96402)()?WeakMap:s(329)},96402:function(i){"use strict";i.exports=function(){var i,o;if("function"!=typeof WeakMap)return!1;try{i=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch(i){return!1}return"[object WeakMap]"===String(i)&&"function"==typeof i.set&&i.set({},1)===i&&"function"==typeof i.delete&&"function"==typeof i.has&&"one"===i.get(o)}},96416:function(i){"use strict";i.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(i,o,s){"use strict";var x,_=s(95296),F=s(1496),N=s(98976),j=s(36672),G=s(43043),Z=s(62072),X=s(66661),J=s(27515),$=s(8260).toStringTag,ee=s(96416),et=Array.isArray,er=Object.defineProperty,en=Object.prototype.hasOwnProperty,ei=Object.getPrototypeOf;i.exports=x=function(){var i,o=arguments[0];if(!(this instanceof x))throw TypeError("Constructor requires 'new'");return i=ee&&F&&WeakMap!==x?F(new WeakMap,ei(this)):this,_(o)&&!et(o)&&(o=X(o)),er(i,"__weakMapData__",Z("c","$weakMap$"+G())),o&&J(o,function(o){j(o),i.set(o[0],o[1])}),i},ee&&(F&&F(x,WeakMap),x.prototype=Object.create(WeakMap.prototype,{constructor:Z(x)})),Object.defineProperties(x.prototype,{delete:Z(function(i){return!!en.call(N(i),this.__weakMapData__)&&(delete i[this.__weakMapData__],!0)}),get:Z(function(i){if(en.call(N(i),this.__weakMapData__))return i[this.__weakMapData__]}),has:Z(function(i){return en.call(N(i),this.__weakMapData__)}),set:Z(function(i,o){return er(N(i),this.__weakMapData__,Z("c",o)),this}),toString:Z(function(){return"[object WeakMap]"})}),er(x.prototype,$,Z("c","WeakMap"))},15398:function(i){"use strict";var o,s="object"==typeof Reflect?Reflect:null,x=s&&"function"==typeof s.apply?s.apply:function(i,o,s){return Function.prototype.apply.call(i,o,s)};o=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)};var _=Number.isNaN||function(i){return i!=i};function EventEmitter(){EventEmitter.init.call(this)}i.exports=EventEmitter,i.exports.once=function(i,o){return new Promise(function(s,x){function errorListener(s){i.removeListener(o,resolver),x(s)}function resolver(){"function"==typeof i.removeListener&&i.removeListener("error",errorListener),s([].slice.call(arguments))}eventTargetAgnosticAddListener(i,o,resolver,{once:!0}),"error"!==o&&"function"==typeof i.on&&eventTargetAgnosticAddListener(i,"error",errorListener,{once:!0})})},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var F=10;function checkListener(i){if("function"!=typeof i)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}function _getMaxListeners(i){return void 0===i._maxListeners?EventEmitter.defaultMaxListeners:i._maxListeners}function _addListener(i,o,s,x){if(checkListener(s),void 0===(F=i._events)?(F=i._events=Object.create(null),i._eventsCount=0):(void 0!==F.newListener&&(i.emit("newListener",o,s.listener?s.listener:s),F=i._events),N=F[o]),void 0===N)N=F[o]=s,++i._eventsCount;else if("function"==typeof N?N=F[o]=x?[s,N]:[N,s]:x?N.unshift(s):N.push(s),(_=_getMaxListeners(i))>0&&N.length>_&&!N.warned){N.warned=!0;var _,F,N,j=Error("Possible EventEmitter memory leak detected. "+N.length+" "+String(o)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=i,j.type=o,j.count=N.length,console&&console.warn&&console.warn(j)}return i}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(i,o,s){var x={fired:!1,wrapFn:void 0,target:i,type:o,listener:s},_=onceWrapper.bind(x);return _.listener=s,x.wrapFn=_,_}function _listeners(i,o,s){var x=i._events;if(void 0===x)return[];var _=x[o];return void 0===_?[]:"function"==typeof _?s?[_.listener||_]:[_]:s?function(i){for(var o=Array(i.length),s=0;s<o.length;++s)o[s]=i[s].listener||i[s];return o}(_):arrayClone(_,_.length)}function listenerCount(i){var o=this._events;if(void 0!==o){var s=o[i];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function arrayClone(i,o){for(var s=Array(o),x=0;x<o;++x)s[x]=i[x];return s}function eventTargetAgnosticAddListener(i,o,s,x){if("function"==typeof i.on)x.once?i.once(o,s):i.on(o,s);else if("function"==typeof i.addEventListener)i.addEventListener(o,function wrapListener(_){x.once&&i.removeEventListener(o,wrapListener),s(_)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return F},set:function(i){if("number"!=typeof i||i<0||_(i))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");F=i}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(i){if("number"!=typeof i||i<0||_(i))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(i){for(var o=[],s=1;s<arguments.length;s++)o.push(arguments[s]);var _="error"===i,F=this._events;if(void 0!==F)_=_&&void 0===F.error;else if(!_)return!1;if(_){if(o.length>0&&(N=o[0]),N instanceof Error)throw N;var N,j=Error("Unhandled error."+(N?" ("+N.message+")":""));throw j.context=N,j}var G=F[i];if(void 0===G)return!1;if("function"==typeof G)x(G,this,o);else for(var Z=G.length,X=arrayClone(G,Z),s=0;s<Z;++s)x(X[s],this,o);return!0},EventEmitter.prototype.addListener=function(i,o){return _addListener(this,i,o,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(i,o){return _addListener(this,i,o,!0)},EventEmitter.prototype.once=function(i,o){return checkListener(o),this.on(i,_onceWrap(this,i,o)),this},EventEmitter.prototype.prependOnceListener=function(i,o){return checkListener(o),this.prependListener(i,_onceWrap(this,i,o)),this},EventEmitter.prototype.removeListener=function(i,o){var s,x,_,F,N;if(checkListener(o),void 0===(x=this._events)||void 0===(s=x[i]))return this;if(s===o||s.listener===o)0==--this._eventsCount?this._events=Object.create(null):(delete x[i],x.removeListener&&this.emit("removeListener",i,s.listener||o));else if("function"!=typeof s){for(_=-1,F=s.length-1;F>=0;F--)if(s[F]===o||s[F].listener===o){N=s[F].listener,_=F;break}if(_<0)return this;0===_?s.shift():function(i,o){for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}(s,_),1===s.length&&(x[i]=s[0]),void 0!==x.removeListener&&this.emit("removeListener",i,N||o)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(i){var o,s,x;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[i]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[i]),this;if(0==arguments.length){var _,F=Object.keys(s);for(x=0;x<F.length;++x)"removeListener"!==(_=F[x])&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(o=s[i]))this.removeListener(i,o);else if(void 0!==o)for(x=o.length-1;x>=0;x--)this.removeListener(i,o[x]);return this},EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)},EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)},EventEmitter.listenerCount=function(i,o){return"function"==typeof i.listenerCount?i.listenerCount(o):listenerCount.call(i,o)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},60774:function(i){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};i.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(i){return naiveFallback()}try{if(!__global__)return naiveFallback();return __global__}finally{delete Object.prototype.__global__}}()},94908:function(i,o,s){"use strict";i.exports=s(51152)()?globalThis:s(60774)},51152:function(i){"use strict";i.exports=function(){return!!("object"==typeof globalThis&&globalThis)&&globalThis.Array===Array}},92770:function(i,o,s){"use strict";var x=s(18546);i.exports=function(i){var o=typeof i;if("string"===o){var s=i;if(0==(i=+i)&&x(s))return!1}else if("number"!==o)return!1;return i-i<1}},30120:function(i,o,s){var x=s(90660);i.exports=function(i,o,s){if(!i)throw TypeError("must specify data as first parameter");if(s=0|+(s||0),Array.isArray(i)&&i[0]&&"number"==typeof i[0][0]){var _,F,N,j,G=i[0].length,Z=i.length*G;o&&"string"!=typeof o||(o=new(x(o||"float32"))(Z+s));var X=o.length-s;if(Z!==X)throw Error("source length "+Z+" ("+G+"x"+i.length+") does not match destination length "+X);for(_=0,N=s;_<i.length;_++)for(F=0;F<G;F++)o[N++]=null===i[_][F]?NaN:i[_][F]}else if(o&&"string"!=typeof o)o.set(i,s);else{var J=x(o||"float32");if(Array.isArray(i)||"array"===o)for(_=0,o=new J(i.length+s),N=s,j=o.length;N<j;N++,_++)o[N]=null===i[_]?NaN:i[_];else 0===s?o=new J(i):(o=new J(i.length+s)).set(i,s)}return o}},68016:function(i,o,s){"use strict";var x=s(53313),_=[32,126];i.exports=function(i){var o=(i=i||{}).shape?i.shape:i.canvas?[i.canvas.width,i.canvas.height]:[512,512],s=i.canvas||document.createElement("canvas"),F=i.font,N="number"==typeof i.step?[i.step,i.step]:i.step||[32,32],j=i.chars||_;if(F&&"string"!=typeof F&&(F=x(F)),Array.isArray(j)){if(2===j.length&&"number"==typeof j[0]&&"number"==typeof j[1]){for(var G=[],Z=j[0],X=0;Z<=j[1];Z++)G[X++]=String.fromCharCode(Z);j=G}}else j=String(j).split("");o=o.slice(),s.width=o[0],s.height=o[1];var J=s.getContext("2d");J.fillStyle="#000",J.fillRect(0,0,s.width,s.height),J.font=F,J.textAlign="center",J.textBaseline="middle",J.fillStyle="#fff";for(var $=N[0]/2,ee=N[1]/2,Z=0;Z<j.length;Z++)J.fillText(j[Z],$,ee),($+=N[0])>o[0]-N[0]/2&&($=N[0]/2,ee+=N[1]);return s}},32879:function(i){"use strict";function measure(i,o){o||(o={}),("string"==typeof i||Array.isArray(i))&&(o.family=i);var s=Array.isArray(o.family)?o.family.join(", "):o.family;if(!s)throw Error("`family` must be defined");var x=o.size||o.fontSize||o.em||48,_=o.weight||o.fontWeight||"",i=[o.style||o.fontStyle||"",_,x].join(" ")+"px "+s,F=o.origin||"top";if(measure.cache[s]&&x<=measure.cache[s].em)return applyOrigin(measure.cache[s],F);var N=o.canvas||measure.canvas,j=N.getContext("2d"),G={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},Z=Math.ceil(1.5*x);N.height=Z,N.width=.5*Z,j.font=i;var X={top:0};j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillStyle="black",j.fillText("H",0,0);var J=firstTop(j.getImageData(0,0,Z,Z));j.clearRect(0,0,Z,Z),j.textBaseline="bottom",j.fillText("H",0,Z);var $=firstTop(j.getImageData(0,0,Z,Z));X.lineHeight=X.bottom=Z-$+J,j.clearRect(0,0,Z,Z),j.textBaseline="alphabetic",j.fillText("H",0,Z);var ee=firstTop(j.getImageData(0,0,Z,Z)),et=Z-ee-1+J;X.baseline=X.alphabetic=et,j.clearRect(0,0,Z,Z),j.textBaseline="middle",j.fillText("H",0,.5*Z);var er=firstTop(j.getImageData(0,0,Z,Z));X.median=X.middle=Z-er-1+J-.5*Z,j.clearRect(0,0,Z,Z),j.textBaseline="hanging",j.fillText("H",0,.5*Z);var en=firstTop(j.getImageData(0,0,Z,Z));X.hanging=Z-en-1+J-.5*Z,j.clearRect(0,0,Z,Z),j.textBaseline="ideographic",j.fillText("H",0,Z);var ei=firstTop(j.getImageData(0,0,Z,Z));if(X.ideographic=Z-ei-1+J,G.upper&&(j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.upper,0,0),X.upper=firstTop(j.getImageData(0,0,Z,Z)),X.capHeight=X.baseline-X.upper),G.lower&&(j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.lower,0,0),X.lower=firstTop(j.getImageData(0,0,Z,Z)),X.xHeight=X.baseline-X.lower),G.tittle&&(j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.tittle,0,0),X.tittle=firstTop(j.getImageData(0,0,Z,Z))),G.ascent&&(j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.ascent,0,0),X.ascent=firstTop(j.getImageData(0,0,Z,Z))),G.descent&&(j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.descent,0,0),X.descent=firstBottom(j.getImageData(0,0,Z,Z))),G.overshoot){j.clearRect(0,0,Z,Z),j.textBaseline="top",j.fillText(G.overshoot,0,0);var eo=firstBottom(j.getImageData(0,0,Z,Z));X.overshoot=eo-et}for(var es in X)X[es]/=x;return X.em=x,measure.cache[s]=X,applyOrigin(X,F)}function applyOrigin(i,o){var s={};for(var x in"string"==typeof o&&(o=i[o]),i)"em"!==x&&(s[x]=i[x]-o);return s}function firstTop(i){for(var o=i.height,s=i.data,x=3;x<s.length;x+=4)if(0!==s[x])return Math.floor((x-3)*.25/o)}function firstBottom(i){for(var o=i.height,s=i.data,x=s.length-1;x>0;x-=4)if(0!==s[x])return Math.floor((x-3)*.25/o)}i.exports=measure,measure.canvas=document.createElement("canvas"),measure.cache={}},31353:function(i,o,s){"use strict";var x=s(85395),_=Object.prototype.toString,F=Object.prototype.hasOwnProperty,forEachArray=function(i,o,s){for(var x=0,_=i.length;x<_;x++)F.call(i,x)&&(null==s?o(i[x],x,i):o.call(s,i[x],x,i))},forEachString=function(i,o,s){for(var x=0,_=i.length;x<_;x++)null==s?o(i.charAt(x),x,i):o.call(s,i.charAt(x),x,i)},forEachObject=function(i,o,s){for(var x in i)F.call(i,x)&&(null==s?o(i[x],x,i):o.call(s,i[x],x,i))};i.exports=function(i,o,s){var F;if(!x(o))throw TypeError("iterator must be a function");arguments.length>=3&&(F=s),"[object Array]"===_.call(i)?forEachArray(i,o,F):"string"==typeof i?forEachString(i,o,F):forEachObject(i,o,F)}},73047:function(i){"use strict";var o=Array.prototype.slice,s=Object.prototype.toString;i.exports=function(i){var x,_=this;if("function"!=typeof _||"[object Function]"!==s.call(_))throw TypeError("Function.prototype.bind called on incompatible "+_);for(var F=o.call(arguments,1),N=Math.max(0,_.length-F.length),j=[],G=0;G<N;G++)j.push("$"+G);if(x=Function("binder","return function ("+j.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(!(this instanceof x))return _.apply(i,F.concat(o.call(arguments)));var s=_.apply(this,F.concat(o.call(arguments)));return Object(s)===s?s:this}),_.prototype){var Empty=function(){};Empty.prototype=_.prototype,x.prototype=new Empty,Empty.prototype=null}return x}},77575:function(i,o,s){"use strict";var x=s(73047);i.exports=Function.prototype.bind||x},86249:function(i){i.exports=function(i,o){if("string"!=typeof i)throw TypeError("must specify type string");if(o=o||{},"undefined"==typeof document&&!o.canvas)return null;var s,x=o.canvas||document.createElement("canvas");"number"==typeof o.width&&(x.width=o.width),"number"==typeof o.height&&(x.height=o.height);var _=o;try{var F=[i];0===i.indexOf("webgl")&&F.push("experimental-"+i);for(var N=0;N<F.length;N++)if(s=x.getContext(F[N],_))return s}catch(i){s=null}return s||null}},68318:function(i,o,s){"use strict";var x,_=SyntaxError,F=Function,N=TypeError,getEvalledConstructor=function(i){try{return F('"use strict"; return ('+i+").constructor;")()}catch(i){}},j=Object.getOwnPropertyDescriptor;if(j)try{j({},"")}catch(i){j=null}var throwTypeError=function(){throw new N},G=j?function(){try{return arguments.callee,throwTypeError}catch(i){try{return j(arguments,"callee").get}catch(i){return throwTypeError}}}():throwTypeError,Z=s(57877)(),X=Object.getPrototypeOf||function(i){return i.__proto__},J={},$="undefined"==typeof Uint8Array?x:X(Uint8Array),ee={"%AggregateError%":"undefined"==typeof AggregateError?x:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?x:ArrayBuffer,"%ArrayIteratorPrototype%":Z?X([][Symbol.iterator]()):x,"%AsyncFromSyncIteratorPrototype%":x,"%AsyncFunction%":J,"%AsyncGenerator%":J,"%AsyncGeneratorFunction%":J,"%AsyncIteratorPrototype%":J,"%Atomics%":"undefined"==typeof Atomics?x:Atomics,"%BigInt%":"undefined"==typeof BigInt?x:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?x:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?x:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?x:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?x:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?x:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?x:FinalizationRegistry,"%Function%":F,"%GeneratorFunction%":J,"%Int8Array%":"undefined"==typeof Int8Array?x:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?x:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?x:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Z?X(X([][Symbol.iterator]())):x,"%JSON%":"object"==typeof JSON?JSON:x,"%Map%":"undefined"==typeof Map?x:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Z?X(new Map()[Symbol.iterator]()):x,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?x:Promise,"%Proxy%":"undefined"==typeof Proxy?x:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?x:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?x:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Z?X(new Set()[Symbol.iterator]()):x,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?x:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Z?X(""[Symbol.iterator]()):x,"%Symbol%":Z?Symbol:x,"%SyntaxError%":_,"%ThrowTypeError%":G,"%TypedArray%":$,"%TypeError%":N,"%Uint8Array%":"undefined"==typeof Uint8Array?x:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?x:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?x:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?x:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?x:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?x:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?x:WeakSet};try{null.error}catch(i){var et=X(X(i));ee["%Error.prototype%"]=et}var doEval=function doEval(i){var o;if("%AsyncFunction%"===i)o=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===i)o=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===i)o=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===i){var s=doEval("%AsyncGeneratorFunction%");s&&(o=s.prototype)}else if("%AsyncIteratorPrototype%"===i){var x=doEval("%AsyncGenerator%");x&&(o=X(x.prototype))}return ee[i]=o,o},er={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},en=s(77575),ei=s(35065),eo=en.call(Function.call,Array.prototype.concat),es=en.call(Function.apply,Array.prototype.splice),el=en.call(Function.call,String.prototype.replace),ec=en.call(Function.call,String.prototype.slice),eu=en.call(Function.call,RegExp.prototype.exec),ef=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,eh=/\\(\\)?/g,stringToPath=function(i){var o=ec(i,0,1),s=ec(i,-1);if("%"===o&&"%"!==s)throw new _("invalid intrinsic syntax, expected closing `%`");if("%"===s&&"%"!==o)throw new _("invalid intrinsic syntax, expected opening `%`");var x=[];return el(i,ef,function(i,o,s,_){x[x.length]=s?el(_,eh,"$1"):o||i}),x},getBaseIntrinsic=function(i,o){var s,x=i;if(ei(er,x)&&(x="%"+(s=er[x])[0]+"%"),ei(ee,x)){var F=ee[x];if(F===J&&(F=doEval(x)),void 0===F&&!o)throw new N("intrinsic "+i+" exists, but is not available. Please file an issue!");return{alias:s,name:x,value:F}}throw new _("intrinsic "+i+" does not exist!")};i.exports=function(i,o){if("string"!=typeof i||0===i.length)throw new N("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof o)throw new N('"allowMissing" argument must be a boolean');if(null===eu(/^%?[^%]*%?$/,i))throw new _("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=stringToPath(i),x=s.length>0?s[0]:"",F=getBaseIntrinsic("%"+x+"%",o),G=F.name,Z=F.value,X=!1,J=F.alias;J&&(x=J[0],es(s,eo([0,1],J)));for(var $=1,et=!0;$<s.length;$+=1){var er=s[$],en=ec(er,0,1),el=ec(er,-1);if(('"'===en||"'"===en||"`"===en||'"'===el||"'"===el||"`"===el)&&en!==el)throw new _("property names with quotes must have matching quotes");if("constructor"!==er&&et||(X=!0),x+="."+er,ei(ee,G="%"+x+"%"))Z=ee[G];else if(null!=Z){if(!(er in Z)){if(!o)throw new N("base intrinsic for "+i+" exists, but the property is not available.");return}if(j&&$+1>=s.length){var ef=j(Z,er);Z=(et=!!ef)&&"get"in ef&&!("originalValue"in ef.get)?ef.get:Z[er]}else et=ei(Z,er),Z=Z[er];et&&!X&&(ee[G]=Z)}}return Z}},85400:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=o[4],j=o[5],G=o[6],Z=o[7],X=o[8],J=o[9],$=o[10],ee=o[11],et=o[12],er=o[13],en=o[14],ei=o[15];return i[0]=j*($*ei-ee*en)-J*(G*ei-Z*en)+er*(G*ee-Z*$),i[1]=-(x*($*ei-ee*en)-J*(_*ei-F*en)+er*(_*ee-F*$)),i[2]=x*(G*ei-Z*en)-j*(_*ei-F*en)+er*(_*Z-F*G),i[3]=-(x*(G*ee-Z*$)-j*(_*ee-F*$)+J*(_*Z-F*G)),i[4]=-(N*($*ei-ee*en)-X*(G*ei-Z*en)+et*(G*ee-Z*$)),i[5]=s*($*ei-ee*en)-X*(_*ei-F*en)+et*(_*ee-F*$),i[6]=-(s*(G*ei-Z*en)-N*(_*ei-F*en)+et*(_*Z-F*G)),i[7]=s*(G*ee-Z*$)-N*(_*ee-F*$)+X*(_*Z-F*G),i[8]=N*(J*ei-ee*er)-X*(j*ei-Z*er)+et*(j*ee-Z*J),i[9]=-(s*(J*ei-ee*er)-X*(x*ei-F*er)+et*(x*ee-F*J)),i[10]=s*(j*ei-Z*er)-N*(x*ei-F*er)+et*(x*Z-F*j),i[11]=-(s*(j*ee-Z*J)-N*(x*ee-F*J)+X*(x*Z-F*j)),i[12]=-(N*(J*en-$*er)-X*(j*en-G*er)+et*(j*$-G*J)),i[13]=s*(J*en-$*er)-X*(x*en-_*er)+et*(x*$-_*J),i[14]=-(s*(j*en-G*er)-N*(x*en-_*er)+et*(x*G-_*j)),i[15]=s*(j*$-G*J)-N*(x*$-_*J)+X*(x*G-_*j),i}},42331:function(i){i.exports=function(i){var o=new Float32Array(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o}},31042:function(i){i.exports=function(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},11902:function(i){i.exports=function(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},89887:function(i){i.exports=function(i){var o=i[0],s=i[1],x=i[2],_=i[3],F=i[4],N=i[5],j=i[6],G=i[7],Z=i[8],X=i[9],J=i[10],$=i[11],ee=i[12],et=i[13],er=i[14],en=i[15];return(o*N-s*F)*(J*en-$*er)-(o*j-x*F)*(X*en-$*et)+(o*G-_*F)*(X*er-J*et)+(s*j-x*N)*(Z*en-$*ee)-(s*G-_*N)*(Z*er-J*ee)+(x*G-_*j)*(Z*et-X*ee)}},27812:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=s+s,j=x+x,G=_+_,Z=s*N,X=x*N,J=x*j,$=_*N,ee=_*j,et=_*G,er=F*N,en=F*j,ei=F*G;return i[0]=1-J-et,i[1]=X+ei,i[2]=$-en,i[3]=0,i[4]=X-ei,i[5]=1-Z-et,i[6]=ee+er,i[7]=0,i[8]=$+en,i[9]=ee-er,i[10]=1-Z-J,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},34045:function(i){i.exports=function(i,o,s){var x,_,F,N=s[0],j=s[1],G=s[2],Z=Math.sqrt(N*N+j*j+G*G);return 1e-6>Math.abs(Z)?null:(N*=Z=1/Z,j*=Z,G*=Z,x=Math.sin(o),F=1-(_=Math.cos(o)),i[0]=N*N*F+_,i[1]=j*N*F+G*x,i[2]=G*N*F-j*x,i[3]=0,i[4]=N*j*F-G*x,i[5]=j*j*F+_,i[6]=G*j*F+N*x,i[7]=0,i[8]=N*G*F+j*x,i[9]=j*G*F-N*x,i[10]=G*G*F+_,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}},45973:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=x+x,G=_+_,Z=F+F,X=x*j,J=x*G,$=x*Z,ee=_*G,et=_*Z,er=F*Z,en=N*j,ei=N*G,eo=N*Z;return i[0]=1-(ee+er),i[1]=J+eo,i[2]=$-ei,i[3]=0,i[4]=J-eo,i[5]=1-(X+er),i[6]=et+en,i[7]=0,i[8]=$+ei,i[9]=et-en,i[10]=1-(X+ee),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}},81472:function(i){i.exports=function(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=o[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},14669:function(i){i.exports=function(i,o){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=o[0],i[13]=o[1],i[14]=o[2],i[15]=1,i}},75262:function(i){i.exports=function(i,o){var s=Math.sin(o),x=Math.cos(o);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=x,i[6]=s,i[7]=0,i[8]=0,i[9]=-s,i[10]=x,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},331:function(i){i.exports=function(i,o){var s=Math.sin(o),x=Math.cos(o);return i[0]=x,i[1]=0,i[2]=-s,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=s,i[9]=0,i[10]=x,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},11049:function(i){i.exports=function(i,o){var s=Math.sin(o),x=Math.cos(o);return i[0]=x,i[1]=s,i[2]=0,i[3]=0,i[4]=-s,i[5]=x,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},75195:function(i){i.exports=function(i,o,s,x,_,F,N){var j=1/(s-o),G=1/(_-x),Z=1/(F-N);return i[0]=2*F*j,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*F*G,i[6]=0,i[7]=0,i[8]=(s+o)*j,i[9]=(_+x)*G,i[10]=(N+F)*Z,i[11]=-1,i[12]=0,i[13]=0,i[14]=N*F*2*Z,i[15]=0,i}},71551:function(i){i.exports=function(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},79576:function(i,o,s){i.exports={create:s(11902),clone:s(42331),copy:s(31042),identity:s(71551),transpose:s(88654),invert:s(95874),adjoint:s(85400),determinant:s(89887),multiply:s(91362),translate:s(31283),scale:s(10789),rotate:s(65074),rotateX:s(35545),rotateY:s(94918),rotateZ:s(15692),fromRotation:s(34045),fromRotationTranslation:s(45973),fromScaling:s(81472),fromTranslation:s(14669),fromXRotation:s(75262),fromYRotation:s(331),fromZRotation:s(11049),fromQuat:s(27812),frustum:s(75195),perspective:s(7864),perspectiveFromFieldOfView:s(35279),ortho:s(60378),lookAt:s(65551),str:s(6726)}},95874:function(i){i.exports=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=o[4],j=o[5],G=o[6],Z=o[7],X=o[8],J=o[9],$=o[10],ee=o[11],et=o[12],er=o[13],en=o[14],ei=o[15],eo=s*j-x*N,es=s*G-_*N,el=s*Z-F*N,ec=x*G-_*j,eu=x*Z-F*j,ef=_*Z-F*G,eh=X*er-J*et,ed=X*en-$*et,ep=X*ei-ee*et,eg=J*en-$*er,em=J*ei-ee*er,ey=$*ei-ee*en,ev=eo*ey-es*em+el*eg+ec*ep-eu*ed+ef*eh;return ev?(ev=1/ev,i[0]=(j*ey-G*em+Z*eg)*ev,i[1]=(_*em-x*ey-F*eg)*ev,i[2]=(er*ef-en*eu+ei*ec)*ev,i[3]=($*eu-J*ef-ee*ec)*ev,i[4]=(G*ep-N*ey-Z*ed)*ev,i[5]=(s*ey-_*ep+F*ed)*ev,i[6]=(en*el-et*ef-ei*es)*ev,i[7]=(X*ef-$*el+ee*es)*ev,i[8]=(N*em-j*ep+Z*eh)*ev,i[9]=(x*ep-s*em-F*eh)*ev,i[10]=(et*eu-er*el+ei*eo)*ev,i[11]=(J*el-X*eu-ee*eo)*ev,i[12]=(j*ed-N*eg-G*eh)*ev,i[13]=(s*eg-x*ed+_*eh)*ev,i[14]=(er*es-et*ec-en*eo)*ev,i[15]=(X*ec-J*es+$*eo)*ev,i):null}},65551:function(i,o,s){var x=s(71551);i.exports=function(i,o,s,_){var F,N,j,G,Z,X,J,$,ee,et,er=o[0],en=o[1],ei=o[2],eo=_[0],es=_[1],el=_[2],ec=s[0],eu=s[1],ef=s[2];return 1e-6>Math.abs(er-ec)&&1e-6>Math.abs(en-eu)&&1e-6>Math.abs(ei-ef)?x(i):(et=1/Math.sqrt((J=er-ec)*J+($=en-eu)*$+(ee=ei-ef)*ee),J*=et,$*=et,ee*=et,(et=Math.sqrt((F=es*ee-el*$)*F+(N=el*J-eo*ee)*N+(j=eo*$-es*J)*j))?(F*=et=1/et,N*=et,j*=et):(F=0,N=0,j=0),(et=Math.sqrt((G=$*j-ee*N)*G+(Z=ee*F-J*j)*Z+(X=J*N-$*F)*X))?(G*=et=1/et,Z*=et,X*=et):(G=0,Z=0,X=0),i[0]=F,i[1]=G,i[2]=J,i[3]=0,i[4]=N,i[5]=Z,i[6]=$,i[7]=0,i[8]=j,i[9]=X,i[10]=ee,i[11]=0,i[12]=-(F*er+N*en+j*ei),i[13]=-(G*er+Z*en+X*ei),i[14]=-(J*er+$*en+ee*ei),i[15]=1,i)}},91362:function(i){i.exports=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],er=o[12],en=o[13],ei=o[14],eo=o[15],es=s[0],el=s[1],ec=s[2],eu=s[3];return i[0]=es*x+el*j+ec*J+eu*er,i[1]=es*_+el*G+ec*$+eu*en,i[2]=es*F+el*Z+ec*ee+eu*ei,i[3]=es*N+el*X+ec*et+eu*eo,es=s[4],el=s[5],ec=s[6],eu=s[7],i[4]=es*x+el*j+ec*J+eu*er,i[5]=es*_+el*G+ec*$+eu*en,i[6]=es*F+el*Z+ec*ee+eu*ei,i[7]=es*N+el*X+ec*et+eu*eo,es=s[8],el=s[9],ec=s[10],eu=s[11],i[8]=es*x+el*j+ec*J+eu*er,i[9]=es*_+el*G+ec*$+eu*en,i[10]=es*F+el*Z+ec*ee+eu*ei,i[11]=es*N+el*X+ec*et+eu*eo,es=s[12],el=s[13],ec=s[14],eu=s[15],i[12]=es*x+el*j+ec*J+eu*er,i[13]=es*_+el*G+ec*$+eu*en,i[14]=es*F+el*Z+ec*ee+eu*ei,i[15]=es*N+el*X+ec*et+eu*eo,i}},60378:function(i){i.exports=function(i,o,s,x,_,F,N){var j=1/(o-s),G=1/(x-_),Z=1/(F-N);return i[0]=-2*j,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*G,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*Z,i[11]=0,i[12]=(o+s)*j,i[13]=(_+x)*G,i[14]=(N+F)*Z,i[15]=1,i}},7864:function(i){i.exports=function(i,o,s,x,_){var F=1/Math.tan(o/2),N=1/(x-_);return i[0]=F/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=F,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(_+x)*N,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*_*x*N,i[15]=0,i}},35279:function(i){i.exports=function(i,o,s,x){var _=Math.tan(o.upDegrees*Math.PI/180),F=Math.tan(o.downDegrees*Math.PI/180),N=Math.tan(o.leftDegrees*Math.PI/180),j=Math.tan(o.rightDegrees*Math.PI/180),G=2/(N+j),Z=2/(_+F);return i[0]=G,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=Z,i[6]=0,i[7]=0,i[8]=-((N-j)*G*.5),i[9]=(_-F)*Z*.5,i[10]=x/(s-x),i[11]=-1,i[12]=0,i[13]=0,i[14]=x*s/(s-x),i[15]=0,i}},65074:function(i){i.exports=function(i,o,s,x){var _,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em=x[0],ey=x[1],ev=x[2],ex=Math.sqrt(em*em+ey*ey+ev*ev);return 1e-6>Math.abs(ex)?null:(em*=ex=1/ex,ey*=ex,ev*=ex,_=Math.sin(s),N=1-(F=Math.cos(s)),j=o[0],G=o[1],Z=o[2],X=o[3],J=o[4],$=o[5],ee=o[6],et=o[7],er=o[8],en=o[9],ei=o[10],eo=o[11],es=em*em*N+F,el=ey*em*N+ev*_,ec=ev*em*N-ey*_,eu=em*ey*N-ev*_,ef=ey*ey*N+F,eh=ev*ey*N+em*_,ed=em*ev*N+ey*_,ep=ey*ev*N-em*_,eg=ev*ev*N+F,i[0]=j*es+J*el+er*ec,i[1]=G*es+$*el+en*ec,i[2]=Z*es+ee*el+ei*ec,i[3]=X*es+et*el+eo*ec,i[4]=j*eu+J*ef+er*eh,i[5]=G*eu+$*ef+en*eh,i[6]=Z*eu+ee*ef+ei*eh,i[7]=X*eu+et*ef+eo*eh,i[8]=j*ed+J*ep+er*eg,i[9]=G*ed+$*ep+en*eg,i[10]=Z*ed+ee*ep+ei*eg,i[11]=X*ed+et*ep+eo*eg,o!==i&&(i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i)}},35545:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[4],N=o[5],j=o[6],G=o[7],Z=o[8],X=o[9],J=o[10],$=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=F*_+Z*x,i[5]=N*_+X*x,i[6]=j*_+J*x,i[7]=G*_+$*x,i[8]=Z*_-F*x,i[9]=X*_-N*x,i[10]=J*_-j*x,i[11]=$*_-G*x,i}},94918:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[0],N=o[1],j=o[2],G=o[3],Z=o[8],X=o[9],J=o[10],$=o[11];return o!==i&&(i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=F*_-Z*x,i[1]=N*_-X*x,i[2]=j*_-J*x,i[3]=G*_-$*x,i[8]=F*x+Z*_,i[9]=N*x+X*_,i[10]=j*x+J*_,i[11]=G*x+$*_,i}},15692:function(i){i.exports=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[0],N=o[1],j=o[2],G=o[3],Z=o[4],X=o[5],J=o[6],$=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=F*_+Z*x,i[1]=N*_+X*x,i[2]=j*_+J*x,i[3]=G*_+$*x,i[4]=Z*_-F*x,i[5]=X*_-N*x,i[6]=J*_-j*x,i[7]=$*_-G*x,i}},10789:function(i){i.exports=function(i,o,s){var x=s[0],_=s[1],F=s[2];return i[0]=o[0]*x,i[1]=o[1]*x,i[2]=o[2]*x,i[3]=o[3]*x,i[4]=o[4]*_,i[5]=o[5]*_,i[6]=o[6]*_,i[7]=o[7]*_,i[8]=o[8]*F,i[9]=o[9]*F,i[10]=o[10]*F,i[11]=o[11]*F,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},6726:function(i){i.exports=function(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"}},31283:function(i){i.exports=function(i,o,s){var x,_,F,N,j,G,Z,X,J,$,ee,et,er=s[0],en=s[1],ei=s[2];return o===i?(i[12]=o[0]*er+o[4]*en+o[8]*ei+o[12],i[13]=o[1]*er+o[5]*en+o[9]*ei+o[13],i[14]=o[2]*er+o[6]*en+o[10]*ei+o[14],i[15]=o[3]*er+o[7]*en+o[11]*ei+o[15]):(x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],i[0]=x,i[1]=_,i[2]=F,i[3]=N,i[4]=j,i[5]=G,i[6]=Z,i[7]=X,i[8]=J,i[9]=$,i[10]=ee,i[11]=et,i[12]=x*er+j*en+J*ei+o[12],i[13]=_*er+G*en+$*ei+o[13],i[14]=F*er+Z*en+ee*ei+o[14],i[15]=N*er+X*en+et*ei+o[15]),i}},88654:function(i){i.exports=function(i,o){if(i===o){var s=o[1],x=o[2],_=o[3],F=o[6],N=o[7],j=o[11];i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=s,i[6]=o[9],i[7]=o[13],i[8]=x,i[9]=F,i[11]=o[14],i[12]=_,i[13]=N,i[14]=j}else i[0]=o[0],i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=o[1],i[5]=o[5],i[6]=o[9],i[7]=o[13],i[8]=o[2],i[9]=o[6],i[10]=o[10],i[11]=o[14],i[12]=o[3],i[13]=o[7],i[14]=o[11],i[15]=o[15];return i}},42505:function(i,o,s){"use strict";var x=s(72791),_=s(71299),F=s(98580),N=s(12018),j=s(83522),G=s(25075),Z=s(68016),X=s(58404),J=s(18863),$=s(10973),ee=s(25677),et=s(75686),er=s(53545),en=s(56131),ei=s(32879),eo=s(30120),es=s(13547).nextPow2,el=new j,ec=!1;if(document.body){var eu=document.body.appendChild(document.createElement("div"));eu.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(eu).fontStretch&&(ec=!0),document.body.removeChild(eu)}var GlText=function(i){var o;"function"==typeof(o=i)&&o._gl&&o.prop&&o.texture&&o.buffer?(i={regl:i},this.gl=i.regl._gl):this.gl=N(i),this.shader=el.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=i.regl||F({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),el.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update($(i)?i:{})};GlText.prototype.createShader=function(){var i=this.regl,o=i({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:i.prop("count"),offset:i.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:i.this("sizeBuffer")},width:{offset:0,stride:8,buffer:i.this("sizeBuffer")},char:i.this("charBuffer"),position:i.this("position")},uniforms:{atlasSize:function(i,o){return[o.atlas.width,o.atlas.height]},atlasDim:function(i,o){return[o.atlas.cols,o.atlas.rows]},atlas:function(i,o){return o.atlas.texture},charStep:function(i,o){return o.atlas.step},em:function(i,o){return o.atlas.em},color:i.prop("color"),opacity:i.prop("opacity"),viewport:i.this("viewportArray"),scale:i.this("scale"),align:i.prop("align"),baseline:i.prop("baseline"),translate:i.this("translate"),positionOffset:i.prop("positionOffset")},primitive:"points",viewport:i.this("viewport"),vert:"\n			precision highp float;\n			attribute float width, charOffset, char;\n			attribute vec2 position;\n			uniform float fontSize, charStep, em, align, baseline;\n			uniform vec4 viewport;\n			uniform vec4 color;\n			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n			varying vec4 fontColor;\n			void main () {\n				vec2 offset = floor(em * (vec2(align + charOffset, baseline)\n					+ vec2(positionOffset.x, -positionOffset.y)))\n					/ (viewport.zw * scale.xy);\n\n				vec2 position = (position + translate) * scale;\n				position += offset * scale;\n\n				charCoord = position * viewport.zw + viewport.xy;\n\n				gl_Position = vec4(position * 2. - 1., 0, 1);\n\n				gl_PointSize = charStep;\n\n				charId.x = mod(char, atlasDim.x);\n				charId.y = floor(char / atlasDim.x);\n\n				charWidth = width * em;\n\n				fontColor = color / 255.;\n			}",frag:"\n			precision highp float;\n			uniform float fontSize, charStep, opacity;\n			uniform vec2 atlasSize;\n			uniform vec4 viewport;\n			uniform sampler2D atlas;\n			varying vec4 fontColor;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n\n			float lightness(vec4 color) {\n				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n			}\n\n			void main () {\n				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n				float halfCharStep = floor(charStep * .5 + .5);\n\n				// invert y and shift by 1px (FF expecially needs that)\n				uv.y = charStep - uv.y;\n\n				// ignore points outside of character bounding box\n				float halfCharWidth = ceil(charWidth * .5);\n				if (floor(uv.x) > halfCharStep + halfCharWidth ||\n					floor(uv.x) < halfCharStep - halfCharWidth) return;\n\n				uv += charId * charStep;\n				uv = uv / atlasSize;\n\n				vec4 color = fontColor;\n				vec4 mask = texture2D(atlas, uv);\n\n				float maskY = lightness(mask);\n				// float colorY = lightness(color);\n				color.a *= maskY;\n				color.a *= opacity;\n\n				// color.a += .1;\n\n				// antialiasing, see yiq color space y-channel formula\n				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n				gl_FragColor = color;\n			}"});return{regl:i,draw:o,atlas:{}}},GlText.prototype.update=function(i){var o,s,F=this;if("string"==typeof i)i={text:i};else if(!i)return;null!=(i=_(i,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(i.opacity)?this.opacity=i.opacity.map(function(i){return parseFloat(i)}):this.opacity=parseFloat(i.opacity)),null!=i.viewport&&(this.viewport=J(i.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=i.kerning&&(this.kerning=i.kerning),null!=i.offset&&("number"==typeof i.offset&&(i.offset=[i.offset,0]),this.positionOffset=eo(i.offset)),i.direction&&(this.direction=i.direction),i.range&&(this.range=i.range,this.scale=[1/(i.range[2]-i.range[0]),1/(i.range[3]-i.range[1])],this.translate=[-i.range[0],-i.range[1]]),i.scale&&(this.scale=i.scale),i.translate&&(this.translate=i.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||i.font||(i.font=GlText.baseFontSize+"px sans-serif");var N=!1,j=!1;if(i.font&&(Array.isArray(i.font)?i.font:[i.font]).forEach(function(i,o){if("string"==typeof i)try{i=x.parse(i)}catch(o){i=x.parse(GlText.baseFontSize+"px "+i)}else i=x.parse(x.stringify(i));var s=x.stringify({size:GlText.baseFontSize,family:i.family,stretch:ec?i.stretch:void 0,variant:i.variant,weight:i.weight,style:i.style}),_=ee(i.size),G=Math.round(_[0]*et(_[1]));if(G!==F.fontSize[o]&&(j=!0,F.fontSize[o]=G),(!F.font[o]||s!=F.font[o].baseString)&&(N=!0,F.font[o]=GlText.fonts[s],!F.font[o])){var Z=i.family.join(", "),X=[i.style];i.style!=i.variant&&X.push(i.variant),i.variant!=i.weight&&X.push(i.weight),ec&&i.weight!=i.stretch&&X.push(i.stretch),F.font[o]={baseString:s,family:Z,weight:i.weight,stretch:i.stretch,style:i.style,variant:i.variant,width:{},kerning:{},metrics:ei(Z,{origin:"top",fontSize:GlText.baseFontSize,fontStyle:X.join(" ")})},GlText.fonts[s]=F.font[o]}}),(N||j)&&this.font.forEach(function(o,s){var _=x.stringify({size:F.fontSize[s],family:o.family,stretch:ec?o.stretch:void 0,variant:o.variant,weight:o.weight,style:o.style});if(F.fontAtlas[s]=F.shader.atlas[_],!F.fontAtlas[s]){var N=o.metrics;F.shader.atlas[_]=F.fontAtlas[s]={fontString:_,step:2*Math.ceil(F.fontSize[s]*N.bottom*.5),em:F.fontSize[s],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:F.regl.texture()}}null==i.text&&(i.text=F.text)}),"string"==typeof i.text&&i.position&&i.position.length>2){for(var $=Array(.5*i.position.length),el=0;el<$.length;el++)$[el]=i.text;i.text=$}if(null!=i.text||N){if(this.textOffsets=[0],Array.isArray(i.text)){this.count=i.text[0].length,this.counts=[this.count];for(var eu=1;eu<i.text.length;eu++)this.textOffsets[eu]=this.textOffsets[eu-1]+i.text[eu-1].length,this.count+=i.text[eu].length,this.counts.push(i.text[eu].length);this.text=i.text.join("")}else this.text=i.text,this.count=this.text.length,this.counts=[this.count];o=[],this.font.forEach(function(i,s){GlText.atlasContext.font=i.baseString;for(var x=F.fontAtlas[s],_=0;_<F.text.length;_++){var N=F.text.charAt(_);if(null==x.ids[N]&&(x.ids[N]=x.chars.length,x.chars.push(N),o.push(N)),null==i.width[N]&&(i.width[N]=GlText.atlasContext.measureText(N).width/GlText.baseFontSize,F.kerning)){var j=[];for(var G in i.width)j.push(G+N,N+G);en(i.kerning,er(i.family,{pairs:j}))}}})}if(i.position){if(i.position.length>2){for(var ef=!i.position[0].length,eh=X.mallocFloat(2*this.count),ed=0,ep=0;ed<this.counts.length;ed++){var eg=this.counts[ed];if(ef)for(var em=0;em<eg;em++)eh[ep++]=i.position[2*ed],eh[ep++]=i.position[2*ed+1];else for(var ey=0;ey<eg;ey++)eh[ep++]=i.position[ed][0],eh[ep++]=i.position[ed][1]}this.position.call?this.position({type:"float",data:eh}):this.position=this.regl.buffer({type:"float",data:eh}),X.freeFloat(eh)}else this.position.destroy&&this.position.destroy(),this.position={constant:i.position}}if(i.text||N){var ev=X.mallocUint8(this.count),ex=X.mallocFloat(2*this.count);this.textWidth=[];for(var e_=0,ew=0;e_<this.counts.length;e_++){for(var eT=this.counts[e_],ek=this.font[e_]||this.font[0],eA=this.fontAtlas[e_]||this.fontAtlas[0],eS=0;eS<eT;eS++){var eM=this.text.charAt(ew),eC=this.text.charAt(ew-1);if(ev[ew]=eA.ids[eM],ex[2*ew]=ek.width[eM],eS){var eE=ex[2*ew-2],eL=ex[2*ew],eP=ex[2*ew-1]+.5*eE+.5*eL;if(this.kerning){var eI=ek.kerning[eC+eM];eI&&(eP+=.001*eI)}ex[2*ew+1]=eP}else ex[2*ew+1]=.5*ex[2*ew];ew++}this.textWidth.push(ex.length?.5*ex[2*ew-2]+ex[2*ew-1]:0)}i.align||(i.align=this.align),this.charBuffer({data:ev,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ex,type:"float",usage:"stream"}),X.freeUint8(ev),X.freeFloat(ex),o.length&&this.font.forEach(function(i,o){var s=F.fontAtlas[o],x=s.step,_=Math.min(Math.floor(GlText.maxAtlasSize/x),s.chars.length),N=Math.ceil(s.chars.length/_),j=es(_*x),G=es(N*x);s.width=j,s.height=G,s.rows=N,s.cols=_,s.em&&s.texture({data:Z({canvas:GlText.atlasCanvas,font:s.fontString,chars:s.chars,shape:[j,G],step:[x,x]})})})}if(i.align&&(this.align=i.align,this.alignOffset=this.textWidth.map(function(i,o){var s=Array.isArray(F.align)?F.align.length>1?F.align[o]:F.align[0]:F.align;if("number"==typeof s)return s;switch(s){case"right":case"end":return-i;case"center":case"centre":case"middle":return-(.5*i)}return 0})),null==this.baseline&&null==i.baseline&&(i.baseline=0),null!=i.baseline&&(this.baseline=i.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(i,o){var s,x=(F.font[o]||F.font[0]).metrics;return s=0+.5*x.bottom,"number"==typeof i?s+=i-x.baseline:s+=-x[i],s*=-1})),null!=i.color){if(i.color||(i.color="transparent"),"string"!=typeof i.color&&isNaN(i.color)){if("number"==typeof i.color[0]&&i.color.length>this.counts.length){var eO=i.color.length;s=X.mallocUint8(eO);for(var eD=(i.color.subarray||i.color.slice).bind(i.color),eR=0;eR<eO;eR+=4)s.set(G(eD(eR,eR+4),"uint8"),eR)}else{var eB=i.color.length;s=X.mallocUint8(4*eB);for(var ez=0;ez<eB;ez++)s.set(G(i.color[ez]||0,"uint8"),4*ez)}this.color=s}else this.color=G(i.color,"uint8")}if(i.position||i.text||i.color||i.baseline||i.align||i.font||i.offset||i.opacity){if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var eF=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(eF);for(var eN=0;eN<this.batch.length;eN++)this.batch[eN]={count:this.counts.length>1?this.counts[eN]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[eN]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*eN,4*eN+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[eN]:this.opacity,baseline:null!=this.baselineOffset[eN]?this.baselineOffset[eN]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[eN]?this.alignOffset[eN]:this.alignOffset[0]:0,atlas:this.fontAtlas[eN]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*eN,2*eN+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},GlText.prototype.destroy=function(){},GlText.prototype.kerning=!0,GlText.prototype.position={constant:new Float32Array(2)},GlText.prototype.translate=null,GlText.prototype.scale=null,GlText.prototype.font=null,GlText.prototype.text="",GlText.prototype.positionOffset=[0,0],GlText.prototype.opacity=1,GlText.prototype.color=new Uint8Array([0,0,0,255]),GlText.prototype.alignOffset=[0,0],GlText.maxAtlasSize=1024,GlText.atlasCanvas=document.createElement("canvas"),GlText.atlasContext=GlText.atlasCanvas.getContext("2d",{alpha:!1}),GlText.baseFontSize=64,GlText.fonts={},i.exports=GlText},12018:function(i,o,s){"use strict";var x=s(71299);function resize(i){if(i.container){if(i.container==document.body)document.body.style.width||(i.canvas.width=i.width||i.pixelRatio*s.g.innerWidth),document.body.style.height||(i.canvas.height=i.height||i.pixelRatio*s.g.innerHeight);else{var o=i.container.getBoundingClientRect();i.canvas.width=i.width||o.right-o.left,i.canvas.height=i.height||o.bottom-o.top}}}function isCanvas(i){return"function"==typeof i.getContext&&"width"in i&&"height"in i}function createCanvas(){var i=document.createElement("canvas");return i.style.position="absolute",i.style.top=0,i.style.left=0,i}i.exports=function(i){if(i?"string"==typeof i&&(i={container:i}):i={},(i=isCanvas(i)?{container:i}:"string"==typeof(o=i).nodeName&&"function"==typeof o.appendChild&&"function"==typeof o.getBoundingClientRect?{container:i}:"function"==typeof(_=i).drawArrays||"function"==typeof _.drawElements?{gl:i}:x(i,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(i.pixelRatio=s.g.pixelRatio||1),i.gl)return i.gl;if(i.canvas&&(i.container=i.canvas.parentNode),i.container){if("string"==typeof i.container){var o,_,F=document.querySelector(i.container);if(!F)throw Error("Element "+i.container+" is not found");i.container=F}isCanvas(i.container)?(i.canvas=i.container,i.container=i.canvas.parentNode):i.canvas||(i.canvas=createCanvas(),i.container.appendChild(i.canvas),resize(i))}else if(!i.canvas){if("undefined"!=typeof document)i.container=document.body||document.documentElement,i.canvas=createCanvas(),i.container.appendChild(i.canvas),resize(i);else throw Error("Not DOM environment. Use headless-gl.")}return i.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{i.gl=i.canvas.getContext(o,i.attrs)}catch(i){}return i.gl}),i.gl}},56068:function(i){i.exports=function(i){"string"==typeof i&&(i=[i]);for(var o=[].slice.call(arguments,1),s=[],x=0;x<i.length-1;x++)s.push(i[x],o[x]||"");return s.push(i[x]),s.join("")}},40383:function(i,o,s){"use strict";var x=s(68318)("%Object.getOwnPropertyDescriptor%",!0);if(x)try{x([],"length")}catch(i){x=null}i.exports=x},57035:function(i,o,s){"use strict";var x,_=s(54404);x="function"==typeof s.g.matchMedia?!s.g.matchMedia("(hover: none)").matches:_,i.exports=x},38520:function(i,o,s){"use strict";var x=s(54404);i.exports=x&&function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(o){i=!1}return i}()},55622:function(i,o,s){"use strict";var x=s(68318)("%Object.defineProperty%",!0),hasPropertyDescriptors=function(){if(x)try{return x({},"a",{value:1}),!0}catch(i){}return!1};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors())return null;try{return 1!==x([],"length",{value:1}).length}catch(i){return!0}},i.exports=hasPropertyDescriptors},57877:function(i,o,s){"use strict";var x="undefined"!=typeof Symbol&&Symbol,_=s(35638);i.exports=function(){return"function"==typeof x&&"function"==typeof Symbol&&"symbol"==typeof x("foo")&&"symbol"==typeof Symbol("bar")&&_()}},35638:function(i){"use strict";i.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var i={},o=Symbol("test"),s=Object(o);if("string"==typeof o||"[object Symbol]"!==Object.prototype.toString.call(o)||"[object Symbol]"!==Object.prototype.toString.call(s))return!1;for(o in i[o]=42,i)return!1;if("function"==typeof Object.keys&&0!==Object.keys(i).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(i).length)return!1;var x=Object.getOwnPropertySymbols(i);if(1!==x.length||x[0]!==o||!Object.prototype.propertyIsEnumerable.call(i,o))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var _=Object.getOwnPropertyDescriptor(i,o);if(42!==_.value||!0!==_.enumerable)return!1}return!0}},84543:function(i,o,s){"use strict";var x=s(35638);i.exports=function(){return x()&&!!Symbol.toStringTag}},35065:function(i,o,s){"use strict";var x=s(77575);i.exports=x.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(i,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(i,o,s,x,_){var F,N,j=8*_-x-1,G=(1<<j)-1,Z=G>>1,X=-7,J=s?_-1:0,$=s?-1:1,ee=i[o+J];for(J+=$,F=ee&(1<<-X)-1,ee>>=-X,X+=j;X>0;F=256*F+i[o+J],J+=$,X-=8);for(N=F&(1<<-X)-1,F>>=-X,X+=x;X>0;N=256*N+i[o+J],J+=$,X-=8);if(0===F)F=1-Z;else{if(F===G)return N?NaN:(ee?-1:1)*(1/0);N+=Math.pow(2,x),F-=Z}return(ee?-1:1)*N*Math.pow(2,F-x)},o.write=function(i,o,s,x,_,F){var N,j,G,Z=8*F-_-1,X=(1<<Z)-1,J=X>>1,$=23===_?5960464477539062e-23:0,ee=x?0:F-1,et=x?1:-1,er=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(j=isNaN(o)?1:0,N=X):(N=Math.floor(Math.log(o)/Math.LN2),o*(G=Math.pow(2,-N))<1&&(N--,G*=2),N+J>=1?o+=$/G:o+=$*Math.pow(2,1-J),o*G>=2&&(N++,G/=2),N+J>=X?(j=0,N=X):N+J>=1?(j=(o*G-1)*Math.pow(2,_),N+=J):(j=o*Math.pow(2,J-1)*Math.pow(2,_),N=0));_>=8;i[s+ee]=255&j,ee+=et,j/=256,_-=8);for(N=N<<_|j,Z+=_;Z>0;i[s+ee]=255&N,ee+=et,N/=256,Z-=8);i[s+ee-et]|=128*er}},42018:function(i){"function"==typeof Object.create?i.exports=function(i,o){o&&(i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(i,o){if(o){i.super_=o;var TempCtor=function(){};TempCtor.prototype=o.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}}},47216:function(i,o,s){"use strict";var x=s(84543)(),_=s(6614)("Object.prototype.toString"),isStandardArguments=function(i){return(!x||!i||"object"!=typeof i||!(Symbol.toStringTag in i))&&"[object Arguments]"===_(i)},isLegacyArguments=function(i){return!!isStandardArguments(i)||null!==i&&"object"==typeof i&&"number"==typeof i.length&&i.length>=0&&"[object Array]"!==_(i)&&"[object Function]"===_(i.callee)},F=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,i.exports=F?isStandardArguments:isLegacyArguments},54404:function(i){i.exports=!0},85395:function(i){"use strict";var o,s,x=Function.prototype.toString,_="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof _&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw s}}),s={},_(function(){throw 42},null,o)}catch(i){i!==s&&(_=null)}else _=null;var F=/^\s*class\b/,isES6ClassFn=function(i){try{var o=x.call(i);return F.test(o)}catch(i){return!1}},tryFunctionObject=function(i){try{if(isES6ClassFn(i))return!1;return x.call(i),!0}catch(i){return!1}},N=Object.prototype.toString,j="function"==typeof Symbol&&!!Symbol.toStringTag,G=!(0 in[,]),isDDA=function(){return!1};if("object"==typeof document){var Z=document.all;N.call(Z)===N.call(document.all)&&(isDDA=function(i){if((G||!i)&&(void 0===i||"object"==typeof i))try{var o=N.call(i);return("[object HTMLAllCollection]"===o||"[object HTML document.all class]"===o||"[object HTMLCollection]"===o||"[object Object]"===o)&&null==i("")}catch(i){}return!1})}i.exports=_?function(i){if(isDDA(i))return!0;if(!i||"function"!=typeof i&&"object"!=typeof i)return!1;try{_(i,null,o)}catch(i){if(i!==s)return!1}return!isES6ClassFn(i)&&tryFunctionObject(i)}:function(i){if(isDDA(i))return!0;if(!i||"function"!=typeof i&&"object"!=typeof i)return!1;if(j)return tryFunctionObject(i);if(isES6ClassFn(i))return!1;var o=N.call(i);return!!("[object Function]"===o||"[object GeneratorFunction]"===o||/^\[object HTML/.test(o))&&tryFunctionObject(i)}},65481:function(i,o,s){"use strict";var x,_=Object.prototype.toString,F=Function.prototype.toString,N=/^\s*(?:function)?\*/,j=s(84543)(),G=Object.getPrototypeOf,getGeneratorFunc=function(){if(!j)return!1;try{return Function("return function*() {}")()}catch(i){}};i.exports=function(i){if("function"!=typeof i)return!1;if(N.test(F.call(i)))return!0;if(!j)return"[object GeneratorFunction]"===_.call(i);if(!G)return!1;if(void 0===x){var o=getGeneratorFunc();x=!!o&&G(o)}return G(i)===x}},62683:function(i){"use strict";i.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(i){"use strict";i.exports=function(i){return i!=i}},15567:function(i,o,s){"use strict";var x=s(68222),_=s(17045),F=s(64274),N=s(14922),j=s(22442),G=x(N(),Number);_(G,{getPolyfill:N,implementation:F,shim:j}),i.exports=G},14922:function(i,o,s){"use strict";var x=s(64274);i.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:x}},22442:function(i,o,s){"use strict";var x=s(17045),_=s(14922);i.exports=function(){var i=_();return x(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i}},64941:function(i){"use strict";i.exports=function(i){var o=typeof i;return null!==i&&("object"===o||"function"===o)}},10973:function(i){"use strict";var o=Object.prototype.toString;i.exports=function(i){var s;return"[object Object]"===o.call(i)&&(null===(s=Object.getPrototypeOf(i))||s===Object.getPrototypeOf({}))}},18546:function(i){"use strict";i.exports=function(i){for(var o,s=i.length,x=0;x<s;x++)if(((o=i.charCodeAt(x))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},89546:function(i){"use strict";i.exports=function(i){return"string"==typeof i&&(i=i.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(i)&&/[\dz]$/i.test(i))&&i.length>4)}},9187:function(i,o,s){"use strict";var x=s(31353),_=s(72077),F=s(6614),N=F("Object.prototype.toString"),j=s(84543)(),G=s(40383),Z="undefined"==typeof globalThis?s.g:globalThis,X=_(),J=F("Array.prototype.indexOf",!0)||function(i,o){for(var s=0;s<i.length;s+=1)if(i[s]===o)return s;return -1},$=F("String.prototype.slice"),ee={},et=Object.getPrototypeOf;j&&G&&et&&x(X,function(i){var o=new Z[i];if(Symbol.toStringTag in o){var s=et(o),x=G(s,Symbol.toStringTag);x||(x=G(et(s),Symbol.toStringTag)),ee[i]=x.get}});var tryTypedArrays=function(i){var o=!1;return x(ee,function(s,x){if(!o)try{o=s.call(i)===x}catch(i){}}),o};i.exports=function(i){return!!i&&"object"==typeof i&&(j&&Symbol.toStringTag in i?!!G&&tryTypedArrays(i):J(X,$(N(i),8,-1))>-1)}},44517:function(i){i.exports=function(){"use strict";var i,o,s;function define(x,_){if(i){if(o){var F="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",N={};i(N),(s=_(N)).workerUrl=window.URL.createObjectURL(new Blob([F],{type:"text/javascript"}))}else o=_}else i=_}return define(["exports"],function(i){function createCommonjsModule(i,o){return i(o={exports:{}},o.exports),o.exports}var o,s,x,_,F,N,j,G,Z,X,J,$,ee="1.10.1";function UnitBezier(i,o,s,x){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(x-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=x,this.p2x=s,this.p2y=x}function Point(i,o){this.x=i,this.y=o}function bezier(i,o,s,x){var _=new UnitBezier(i,o,s,x);return function(i){return _.solve(i)}}UnitBezier.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i},UnitBezier.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i},UnitBezier.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},UnitBezier.prototype.solveCurveX=function(i,o){for(void 0===o&&(o=1e-6),_=i,N=0;N<8;N++){if(Math.abs(F=this.sampleCurveX(_)-i)<o)return _;var s,x,_,F,N,j=this.sampleCurveDerivativeX(_);if(1e-6>Math.abs(j))break;_-=F/j}if(s=0,x=1,(_=i)<s)return s;if(_>x)return x;for(;s<x&&!(Math.abs((F=this.sampleCurveX(_))-i)<o);)i>F?s=_:x=_,_=(x-s)*.5+s;return _},UnitBezier.prototype.solve=function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))},Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,o){return this.clone()._rotateAround(i,o)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var o=i.x-this.x,s=i.y-this.y;return o*o+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,o){return Math.atan2(this.x*o-this.y*i,this.x*i+this.y*o)},_matMult:function(i){var o=i[0]*this.x+i[1]*this.y,s=i[2]*this.x+i[3]*this.y;return this.x=o,this.y=s,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var o=Math.cos(i),s=Math.sin(i),x=o*this.x-s*this.y,_=s*this.x+o*this.y;return this.x=x,this.y=_,this},_rotateAround:function(i,o){var s=Math.cos(i),x=Math.sin(i),_=o.x+s*(this.x-o.x)-x*(this.y-o.y),F=o.y+x*(this.x-o.x)+s*(this.y-o.y);return this.x=_,this.y=F,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(i){return i instanceof Point?i:Array.isArray(i)?new Point(i[0],i[1]):i};var et=bezier(.25,.1,.25,1);function clamp(i,o,s){return Math.min(s,Math.max(o,i))}function wrap(i,o,s){var x=s-o,_=((i-o)%x+x)%x+o;return _===o?s:_}function extend(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];for(var x=0;x<o.length;x+=1){var _=o[x];for(var F in _)i[F]=_[F]}return i}var er=1;function uniqueId(){return er++}function uuid(){return function b(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,b)}()}function validateUuid(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function bindAll(i,o){i.forEach(function(i){o[i]&&(o[i]=o[i].bind(o))})}function endsWith(i,o){return -1!==i.indexOf(o,i.length-o.length)}function mapObject(i,o,s){var x={};for(var _ in i)x[_]=o.call(s||this,i[_],_,i);return x}function filterObject(i,o,s){var x={};for(var _ in i)o.call(s||this,i[_],_,i)&&(x[_]=i[_]);return x}function clone(i){return Array.isArray(i)?i.map(clone):"object"==typeof i&&i?mapObject(i,clone):i}var en={};function warnOnce(i){en[i]||("undefined"!=typeof console&&console.warn(i),en[i]=!0)}function isCounterClockwise(i,o,s){return(s.y-i.y)*(o.x-i.x)>(o.y-i.y)*(s.x-i.x)}function isWorker(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function parseCacheControl(i){var o={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(i,s,x,_){var F=x||_;return o[s]=!F||F.toLowerCase(),""}),o["max-age"]){var s=parseInt(o["max-age"],10);isNaN(s)?delete o["max-age"]:o["max-age"]=s}return o}var ei=null;function isSafari(i){if(null==ei){var o=i.navigator?i.navigator.userAgent:null;ei=!!i.safari||!!(o&&(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return ei}function storageAvailable(i){try{var o=self[i];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch(i){return!1}}var eo=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),es=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,el=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ec={now:eo,frame:function(i){var o=es(i);return{cancel:function(){return el(o)}}},getImageData:function(i,o){void 0===o&&(o=0);var s=self.document.createElement("canvas"),x=s.getContext("2d");if(!x)throw Error("failed to create canvas 2d context");return s.width=i.width,s.height=i.height,x.drawImage(i,0,0,i.width,i.height),x.getImageData(-o,-o,i.width+2*o,i.height+2*o)},resolveURL:function(i){return _||(_=self.document.createElement("a")),_.href=i,_.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){if(!self.matchMedia)return!1;return null==F&&(F=self.matchMedia("(prefers-reduced-motion: reduce)")),F.matches}},eu={API_URL:"https://api.mapbox.com",get EVENTS_URL(){if(!this.API_URL)return null;if(0===this.API_URL.indexOf("https://api.mapbox.cn"))return"https://events.mapbox.cn/events/v2";if(0===this.API_URL.indexOf("https://api.mapbox.com"))return"https://events.mapbox.com/events/v2";return null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ef={supported:!1,testSupport:function(i){!eh&&j&&(ed?testWebpTextureUpload(i):N=i)}},eh=!1,ed=!1;function testWebpTextureUpload(i){var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,j),i.isContextLost())return;ef.supported=!0}catch(i){}i.deleteTexture(o),eh=!0}self.document&&((j=self.document.createElement("img")).onload=function(){N&&testWebpTextureUpload(N),N=null,ed=!0},j.onerror=function(){eh=!0,N=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var RequestManager=function(i,o){this._transformRequestFn=i,this._customAccessToken=o,this._createSkuToken()};function isMapboxURL(i){return 0===i.indexOf("mapbox:")}RequestManager.prototype._createSkuToken=function(){var i=function(){for(var i="",o=0;o<10;o++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt},RequestManager.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},RequestManager.prototype.transformRequest=function(i,o){return this._transformRequestFn&&this._transformRequestFn(i,o)||{url:i}},RequestManager.prototype.normalizeStyleURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeGlyphsURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeSourceURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeSpriteURL=function(i,o,s,x){var _=parseUrl(i);return isMapboxURL(i)?(_.path="/styles/v1"+_.path+"/sprite"+o+s,this._makeAPIURL(_,this._customAccessToken||x)):(_.path+=""+o+s,formatUrl(_))},RequestManager.prototype.normalizeTileURL=function(i,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!isMapboxURL(i))return i;var s=parseUrl(i),x=ec.devicePixelRatio>=2||512===o?"@2x":"",_=ef.supported?".webp":"$1";s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+x+_),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var F=this._customAccessToken||function(i){for(var o=0;o<i.length;o+=1){var s=i[o].match(/^access_token=(.*)$/);if(s)return s[1]}return null}(s.params)||eu.ACCESS_TOKEN;return eu.REQUIRE_ACCESS_TOKEN&&F&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,F)},RequestManager.prototype.canonicalizeTileURL=function(i,o){var s=parseUrl(i);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return i;var x="mapbox://tiles/";x+=s.path.replace("/v4/","");var _=s.params;return o&&(_=_.filter(function(i){return!i.match(/^access_token=/)})),_.length&&(x+="?"+_.join("&")),x},RequestManager.prototype.canonicalizeTileset=function(i,o){for(var s=!!o&&isMapboxURL(o),x=[],_=0,F=i.tiles||[];_<F.length;_+=1){var N=F[_];isMapboxHTTPURL(N)?x.push(this.canonicalizeTileURL(N,s)):x.push(N)}return x},RequestManager.prototype._makeAPIURL=function(i,o){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",x=parseUrl(eu.API_URL);if(i.protocol=x.protocol,i.authority=x.authority,"/"!==x.path&&(i.path=""+x.path+i.path),!eu.REQUIRE_ACCESS_TOKEN)return formatUrl(i);if(!(o=o||eu.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. "+s);if("s"===o[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return i.params=i.params.filter(function(i){return -1===i.indexOf("access_token")}),i.params.push("access_token="+o),formatUrl(i)};var ep=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function isMapboxHTTPURL(i){return ep.test(i)}var eg=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function parseUrl(i){var o=i.match(eg);if(!o)throw Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function formatUrl(i){var o=i.params.length?"?"+i.params.join("&"):"";return i.protocol+"://"+i.authority+i.path+o}var em="mapbox.eventData";function parseAccessToken(i){if(!i)return null;var o,s=i.split(".");if(!s||3!==s.length)return null;try{return JSON.parse((o=s[1],decodeURIComponent(self.atob(o).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(i){return null}}var TelemetryEvent=function(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};TelemetryEvent.prototype.getStorageKey=function(i){var o,s=parseAccessToken(eu.ACCESS_TOKEN),x="";return s&&s.u?(o=s.u,x=self.btoa(encodeURIComponent(o).replace(/%([0-9A-F]{2})/g,function(i,o){return String.fromCharCode(Number("0x"+o))}))):x=eu.ACCESS_TOKEN||"",i?em+"."+i+":"+x:em+":"+x},TelemetryEvent.prototype.fetchEventData=function(){var i=storageAvailable("localStorage"),o=this.getStorageKey(),s=this.getStorageKey("uuid");if(i)try{var x=self.localStorage.getItem(o);x&&(this.eventData=JSON.parse(x));var _=self.localStorage.getItem(s);_&&(this.anonId=_)}catch(i){warnOnce("Unable to read from LocalStorage")}},TelemetryEvent.prototype.saveEventData=function(){var i=storageAvailable("localStorage"),o=this.getStorageKey(),s=this.getStorageKey("uuid");if(i)try{self.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(o,JSON.stringify(this.eventData))}catch(i){warnOnce("Unable to write to LocalStorage")}},TelemetryEvent.prototype.processRequests=function(i){},TelemetryEvent.prototype.postEvent=function(i,o,s,x){var _=this;if(eu.EVENTS_URL){var F=parseUrl(eu.EVENTS_URL);F.params.push("access_token="+(x||eu.ACCESS_TOKEN||""));var N={event:this.type,created:new Date(i).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:ee,skuId:"01",userId:this.anonId},j=o?extend(N,o):N,G={url:formatUrl(F),headers:{"Content-Type":"text/plain"},body:JSON.stringify([j])};this.pendingRequest=postData(G,function(i){_.pendingRequest=null,s(i),_.saveEventData(),_.processRequests(x)})}},TelemetryEvent.prototype.queueRequest=function(i,o){this.queue.push(i),this.processRequests(o)};var ey=function(i){function MapLoadEvent(){i.call(this,"map.load"),this.success={},this.skuToken=""}return i&&(MapLoadEvent.__proto__=i),MapLoadEvent.prototype=Object.create(i&&i.prototype),MapLoadEvent.prototype.constructor=MapLoadEvent,MapLoadEvent.prototype.postMapLoadEvent=function(i,o,s,x){this.skuToken=s,(eu.EVENTS_URL&&x||eu.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(i){return isMapboxURL(i)||isMapboxHTTPURL(i)}))&&this.queueRequest({id:o,timestamp:Date.now()},x)},MapLoadEvent.prototype.processRequests=function(i){var o=this;if(!this.pendingRequest&&0!==this.queue.length){var s=this.queue.shift(),x=s.id,_=s.timestamp;x&&this.success[x]||(this.anonId||this.fetchEventData(),validateUuid(this.anonId)||(this.anonId=uuid()),this.postEvent(_,{skuToken:this.skuToken},function(i){!i&&x&&(o.success[x]=!0)},i))}},MapLoadEvent}(TelemetryEvent),ev=new(function(i){function TurnstileEvent(o){i.call(this,"appUserTurnstile"),this._customAccessToken=o}return i&&(TurnstileEvent.__proto__=i),TurnstileEvent.prototype=Object.create(i&&i.prototype),TurnstileEvent.prototype.constructor=TurnstileEvent,TurnstileEvent.prototype.postTurnstileEvent=function(i,o){eu.EVENTS_URL&&eu.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(i){return isMapboxURL(i)||isMapboxHTTPURL(i)})&&this.queueRequest(Date.now(),o)},TurnstileEvent.prototype.processRequests=function(i){var o=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var s=parseAccessToken(eu.ACCESS_TOKEN),x=s?s.u:eu.ACCESS_TOKEN,_=x!==this.eventData.tokenU;validateUuid(this.anonId)||(this.anonId=uuid(),_=!0);var F=this.queue.shift();if(this.eventData.lastSuccess){var N=new Date(this.eventData.lastSuccess),j=new Date(F),G=(F-this.eventData.lastSuccess)/864e5;_=_||G>=1||G<-1||N.getDate()!==j.getDate()}else _=!0;if(!_)return this.processRequests();this.postEvent(F,{"enabled.telemetry":!1},function(i){i||(o.eventData.lastSuccess=F,o.eventData.tokenU=x)},i)}},TurnstileEvent}(TelemetryEvent)),ex=ev.postTurnstileEvent.bind(ev),e_=new ey,ew=e_.postMapLoadEvent.bind(e_),eT="mapbox-tiles",ek=500,eA=50;function cacheOpen(){self.caches&&!G&&(G=self.caches.open(eT))}function stripQueryParameters(i){var o=i.indexOf("?");return o<0?i:i.slice(0,o)}var eS=1/0;function offscreenCanvasSupported(){return null==X&&(X=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),X}var eM={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(eM);var eC=function(i){function AJAXError(o,s,x){401===s&&isMapboxHTTPURL(x)&&(o+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),i.call(this,o),this.status=s,this.url=x,this.name=this.constructor.name,this.message=o}return i&&(AJAXError.__proto__=i),AJAXError.prototype=Object.create(i&&i.prototype),AJAXError.prototype.constructor=AJAXError,AJAXError.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},AJAXError}(Error),eE=isWorker()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},makeRequest=function(i,o){var s,x,_,F,N,j,X,J,$;if(s=i.url,!(/^file:/.test(s)||/^file:/.test(eE())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return x=new self.AbortController,_=new self.Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:eE(),signal:x.signal}),F=!1,N=!1,X=(j=_.url).indexOf("sku=")>0&&isMapboxHTTPURL(j),"json"===i.type&&_.headers.set("Accept","application/json"),J=function(s,x,F){if(!N){if(s&&"SecurityError"!==s.message&&warnOnce(s),x&&F)return $(x);var j=Date.now();self.fetch(_).then(function(s){if(!s.ok)return o(new eC(s.statusText,s.status,i.url));var x=X?s.clone():null;return $(s,x,j)}).catch(function(i){20!==i.code&&o(Error(i.message))})}},$=function(s,x,j){("arrayBuffer"===i.type?s.arrayBuffer():"json"===i.type?s.json():s.text()).then(function(i){N||(x&&j&&function(i,o,s){if(cacheOpen(),G){var x={status:o.status,statusText:o.statusText,headers:new self.Headers};o.headers.forEach(function(i,o){return x.headers.set(o,i)});var _=parseCacheControl(o.headers.get("Cache-Control")||"");!_["no-store"]&&(_["max-age"]&&x.headers.set("Expires",new Date(s+1e3*_["max-age"]).toUTCString()),new Date(x.headers.get("Expires")).getTime()-s<42e4||function(i,o){if(void 0===Z)try{new Response(new ReadableStream),Z=!0}catch(i){Z=!1}Z?o(i.body):i.blob().then(o)}(o,function(o){var s=new self.Response(o,x);cacheOpen(),G&&G.then(function(o){return o.put(stripQueryParameters(i.url),s)}).catch(function(i){return warnOnce(i.message)})}))}}(_,x,j),F=!0,o(null,i,s.headers.get("Cache-Control"),s.headers.get("Expires")))}).catch(function(i){N||o(Error(i.message))})},X?function(i,o){if(cacheOpen(),!G)return o(null);var s=stripQueryParameters(i.url);G.then(function(i){i.match(s).then(function(x){var _=function(i){if(!i)return!1;var o=new Date(i.headers.get("Expires")||0),s=parseCacheControl(i.headers.get("Cache-Control")||"");return o>Date.now()&&!s["no-cache"]}(x);i.delete(s),_&&i.put(s,x.clone()),o(null,x,_)}).catch(o)}).catch(o)}(_,J):J(null,null),{cancel:function(){N=!0,F||x.abort()}};if(isWorker()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,o,void 0,!0)}return function(i,o){var s=new self.XMLHttpRequest;for(var x in s.open(i.method||"GET",i.url,!0),"arrayBuffer"===i.type&&(s.responseType="arraybuffer"),i.headers)s.setRequestHeader(x,i.headers[x]);return"json"===i.type&&(s.responseType="text",s.setRequestHeader("Accept","application/json")),s.withCredentials="include"===i.credentials,s.onerror=function(){o(Error(s.statusText))},s.onload=function(){if((s.status>=200&&s.status<300||0===s.status)&&null!==s.response){var x=s.response;if("json"===i.type)try{x=JSON.parse(s.response)}catch(i){return o(i)}o(null,x,s.getResponseHeader("Cache-Control"),s.getResponseHeader("Expires"))}else o(new eC(s.statusText,s.status,i.url))},s.send(i.body),{cancel:function(){return s.abort()}}}(i,o)},getArrayBuffer=function(i,o){return makeRequest(extend(i,{type:"arrayBuffer"}),o)},postData=function(i,o){return makeRequest(extend(i,{method:"POST"}),o)};J=[],$=0;var getImage=function(i,o){if(ef.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),$>=eu.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:i,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return J.push(s),s}$++;var x=!1,advanceImageRequestQueue=function(){if(!x)for(x=!0,$--;J.length&&$<eu.MAX_PARALLEL_IMAGE_REQUESTS;){var i=J.shift(),o=i.requestParameters,s=i.callback;i.cancelled||(i.cancel=getImage(o,s).cancel)}},_=getArrayBuffer(i,function(i,s,x,_){if(advanceImageRequestQueue(),i)o(i);else if(s){if(offscreenCanvasSupported())!function(i,o){var s=new self.Blob([new Uint8Array(i)],{type:"image/png"});self.createImageBitmap(s).then(function(i){o(null,i)}).catch(function(i){o(Error("Could not load image because of "+i.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(s,o);else{var F,N,j;F=new self.Image,N=self.URL,F.onload=function(){o(null,F),N.revokeObjectURL(F.src)},F.onerror=function(){return o(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j=new self.Blob([new Uint8Array(s)],{type:"image/png"}),F.cacheControl=x,F.expires=_,F.src=s.byteLength?N.createObjectURL(j):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}});return{cancel:function(){_.cancel(),advanceImageRequestQueue()}}};function _addEventListener(i,o,s){s[i]&&-1!==s[i].indexOf(o)||(s[i]=s[i]||[],s[i].push(o))}function _removeEventListener(i,o,s){if(s&&s[i]){var x=s[i].indexOf(o);-1!==x&&s[i].splice(x,1)}}var Event=function(i,o){void 0===o&&(o={}),extend(this,o),this.type=i},eL=function(i){function ErrorEvent(o,s){void 0===s&&(s={}),i.call(this,"error",extend({error:o},s))}return i&&(ErrorEvent.__proto__=i),ErrorEvent.prototype=Object.create(i&&i.prototype),ErrorEvent.prototype.constructor=ErrorEvent,ErrorEvent}(Event),Evented=function(){};Evented.prototype.on=function(i,o){return this._listeners=this._listeners||{},_addEventListener(i,o,this._listeners),this},Evented.prototype.off=function(i,o){return _removeEventListener(i,o,this._listeners),_removeEventListener(i,o,this._oneTimeListeners),this},Evented.prototype.once=function(i,o){return this._oneTimeListeners=this._oneTimeListeners||{},_addEventListener(i,o,this._oneTimeListeners),this},Evented.prototype.fire=function(i,o){"string"==typeof i&&(i=new Event(i,o||{}));var s=i.type;if(this.listens(s)){i.target=this;for(var x=this._listeners&&this._listeners[s]?this._listeners[s].slice():[],_=0;_<x.length;_+=1)x[_].call(this,i);for(var F=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[],N=0;N<F.length;N+=1){var j=F[N];_removeEventListener(s,j,this._oneTimeListeners),j.call(this,i)}var G=this._eventedParent;G&&(extend(i,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),G.fire(i))}else i instanceof eL&&console.error(i.error);return this},Evented.prototype.listens=function(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)},Evented.prototype.setEventedParent=function(i,o){return this._eventedParent=i,this._eventedParentData=o,this};var eP={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ValidationError=function(i,o,s,x){this.message=(i?i+": ":"")+s,x&&(this.identifier=x),null!=o&&o.__line__&&(this.line=o.__line__)};function validateConstants(i){var o=i.key,s=i.value;return s?[new ValidationError(o,s,"constants have been deprecated as of v8")]:[]}function extend$1(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];for(var x=0;x<o.length;x+=1){var _=o[x];for(var F in _)i[F]=_[F]}return i}function unbundle(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function deepUnbundle(i){if(Array.isArray(i))return i.map(deepUnbundle);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){var o={};for(var s in i)o[s]=deepUnbundle(i[s]);return o}return unbundle(i)}var eI=function(i){function ParsingError(o,s){i.call(this,s),this.message=s,this.key=o}return i&&(ParsingError.__proto__=i),ParsingError.prototype=Object.create(i&&i.prototype),ParsingError.prototype.constructor=ParsingError,ParsingError}(Error),Scope=function(i,o){void 0===o&&(o=[]),this.parent=i,this.bindings={};for(var s=0,x=o;s<x.length;s+=1){var _=x[s],F=_[0],N=_[1];this.bindings[F]=N}};Scope.prototype.concat=function(i){return new Scope(this,i)},Scope.prototype.get=function(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw Error(i+" not found in scope.")},Scope.prototype.has=function(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)};var eO={kind:"null"},eD={kind:"number"},eR={kind:"string"},eB={kind:"boolean"},ez={kind:"color"},eF={kind:"object"},eN={kind:"value"},ej={kind:"collator"},eU={kind:"formatted"},eV={kind:"resolvedImage"};function array(i,o){return{kind:"array",itemType:i,N:o}}function toString(i){if("array"!==i.kind)return i.kind;var o=toString(i.itemType);return"number"==typeof i.N?"array<"+o+", "+i.N+">":"value"===i.itemType.kind?"array":"array<"+o+">"}var eH=[eO,eD,eR,eB,ez,eU,eF,array(eN),eV];function checkSubtype(i,o){if("error"===o.kind)return null;if("array"===i.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!checkSubtype(i.itemType,o.itemType))&&("number"!=typeof i.N||i.N===o.N))return null}else if(i.kind===o.kind)return null;else if("value"===i.kind){for(var s=0;s<eH.length;s+=1)if(!checkSubtype(eH[s],o))return null}return"Expected "+toString(i)+" but found "+toString(o)+" instead."}function isValidType(i,o){return o.some(function(o){return o.kind===i.kind})}function isValidNativeType(i,o){return o.some(function(o){return"null"===o?null===i:"array"===o?Array.isArray(i):"object"===o?i&&!Array.isArray(i)&&"object"==typeof i:o===typeof i})}var eG=createCommonjsModule(function(i,o){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(i){return(i=Math.round(i))<0?0:i>255?255:i}function clamp_css_float(i){return i<0?0:i>1?1:i}function parse_css_int(i){return"%"===i[i.length-1]?clamp_css_byte(parseFloat(i)/100*255):clamp_css_byte(parseInt(i))}function parse_css_float(i){return"%"===i[i.length-1]?clamp_css_float(parseFloat(i)/100):clamp_css_float(parseFloat(i))}function css_hue_to_rgb(i,o,s){return(s<0?s+=1:s>1&&(s-=1),6*s<1)?i+(o-i)*s*6:2*s<1?o:3*s<2?i+(o-i)*(2/3-s)*6:i}try{o.parseCSSColor=function(i){var o=i.replace(/ /g,"").toLowerCase();if(o in s)return s[o].slice();if("#"===o[0]){if(4===o.length){var x=parseInt(o.substr(1),16);return x>=0&&x<=4095?[(3840&x)>>4|(3840&x)>>8,240&x|(240&x)>>4,15&x|(15&x)<<4,1]:null}if(7===o.length){var x=parseInt(o.substr(1),16);return x>=0&&x<=16777215?[(16711680&x)>>16,(65280&x)>>8,255&x,1]:null}return null}var _=o.indexOf("("),F=o.indexOf(")");if(-1!==_&&F+1===o.length){var N=o.substr(0,_),j=o.substr(_+1,F-(_+1)).split(","),G=1;switch(N){case"rgba":if(4!==j.length)break;G=parse_css_float(j.pop());case"rgb":if(3!==j.length)break;return[parse_css_int(j[0]),parse_css_int(j[1]),parse_css_int(j[2]),G];case"hsla":if(4!==j.length)break;G=parse_css_float(j.pop());case"hsl":if(3!==j.length)break;var Z=(parseFloat(j[0])%360+360)%360/360,X=parse_css_float(j[1]),J=parse_css_float(j[2]),$=J<=.5?J*(X+1):J+X-J*X,ee=2*J-$;return[clamp_css_byte(255*css_hue_to_rgb(ee,$,Z+1/3)),clamp_css_byte(255*css_hue_to_rgb(ee,$,Z)),clamp_css_byte(255*css_hue_to_rgb(ee,$,Z-1/3)),G]}}return null}}catch(i){}}).parseCSSColor,Color=function(i,o,s,x){void 0===x&&(x=1),this.r=i,this.g=o,this.b=s,this.a=x};Color.parse=function(i){if(i){if(i instanceof Color)return i;if("string"==typeof i){var o=eG(i);if(o)return new Color(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Color.prototype.toString=function(){var i=this.toArray();return"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+i[3]+")"},Color.prototype.toArray=function(){var i=this.r,o=this.g,s=this.b,x=this.a;return 0===x?[0,0,0,0]:[255*i/x,255*o/x,255*s/x,x]},Color.black=new Color(0,0,0,1),Color.white=new Color(1,1,1,1),Color.transparent=new Color(0,0,0,0),Color.red=new Color(1,0,0,1);var Collator=function(i,o,s){i?this.sensitivity=o?"variant":"case":this.sensitivity=o?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Collator.prototype.compare=function(i,o){return this.collator.compare(i,o)},Collator.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var FormattedSection=function(i,o,s,x,_){this.text=i,this.image=o,this.scale=s,this.fontStack=x,this.textColor=_},Formatted=function(i){this.sections=i};Formatted.fromString=function(i){return new Formatted([new FormattedSection(i,null,null,null,null)])},Formatted.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(i){return 0!==i.text.length||i.image&&0!==i.image.name.length})},Formatted.factory=function(i){return i instanceof Formatted?i:Formatted.fromString(i)},Formatted.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(i){return i.text}).join("")},Formatted.prototype.serialize=function(){for(var i=["format"],o=0,s=this.sections;o<s.length;o+=1){var x=s[o];if(x.image){i.push(["image",x.image.name]);continue}i.push(x.text);var _={};x.fontStack&&(_["text-font"]=["literal",x.fontStack.split(",")]),x.scale&&(_["font-scale"]=x.scale),x.textColor&&(_["text-color"]=["rgba"].concat(x.textColor.toArray())),i.push(_)}return i};var ResolvedImage=function(i){this.name=i.name,this.available=i.available};function validateRGBA(i,o,s,x){return"number"==typeof i&&i>=0&&i<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===x||"number"==typeof x&&x>=0&&x<=1?null:"Invalid rgba value ["+[i,o,s,x].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof x?[i,o,s,x]:[i,o,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function isValue(i){if(null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)return!0;if(i instanceof Color)return!0;if(i instanceof Collator)return!0;if(i instanceof Formatted)return!0;else if(i instanceof ResolvedImage)return!0;else if(Array.isArray(i)){for(var o=0;o<i.length;o+=1)if(!isValue(i[o]))return!1;return!0}else{if("object"!=typeof i)return!1;for(var s in i)if(!isValue(i[s]))return!1;return!0}}function typeOf(i){if(null===i)return eO;if("string"==typeof i)return eR;if("boolean"==typeof i)return eB;if("number"==typeof i)return eD;if(i instanceof Color)return ez;if(i instanceof Collator)return ej;if(i instanceof Formatted)return eU;if(i instanceof ResolvedImage)return eV;if(!Array.isArray(i))return eF;for(var o,s=i.length,x=0;x<i.length;x+=1){var _=typeOf(i[x]);if(o){if(o===_)continue;o=eN;break}o=_}return array(o||eN,s)}function toString$1(i){var o=typeof i;return null===i?"":"string"===o||"number"===o||"boolean"===o?String(i):i instanceof Color||i instanceof Formatted||i instanceof ResolvedImage?i.toString():JSON.stringify(i)}ResolvedImage.prototype.toString=function(){return this.name},ResolvedImage.fromString=function(i){return i?new ResolvedImage({name:i,available:!1}):null},ResolvedImage.prototype.serialize=function(){return["image",this.name]};var Literal=function(i,o){this.type=i,this.value=o};Literal.parse=function(i,o){if(2!==i.length)return o.error("'literal' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(!isValue(i[1]))return o.error("invalid value");var s=i[1],x=typeOf(s),_=o.expectedType;return"array"===x.kind&&0===x.N&&_&&"array"===_.kind&&("number"!=typeof _.N||0===_.N)&&(x=_),new Literal(x,s)},Literal.prototype.evaluate=function(){return this.value},Literal.prototype.eachChild=function(){},Literal.prototype.outputDefined=function(){return!0},Literal.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Color?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value};var RuntimeError=function(i){this.name="ExpressionEvaluationError",this.message=i};RuntimeError.prototype.toJSON=function(){return this.message};var eW={string:eR,number:eD,boolean:eB,object:eF},Assertion=function(i,o){this.type=i,this.args=o};Assertion.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=1,x=i[0];if("array"===x){if(i.length>2){var _,F,N,j=i[1];if("string"!=typeof j||!(j in eW)||"object"===j)return o.error('The item type argument of "array" must be one of string, number, boolean',1);F=eW[j],s++}else F=eN;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);N=i[2],s++}_=array(F,N)}else _=eW[x];for(var G=[];s<i.length;s++){var Z=o.parse(i[s],s,eN);if(!Z)return null;G.push(Z)}return new Assertion(_,G)},Assertion.prototype.evaluate=function(i){for(var o=0;o<this.args.length;o++){var s=this.args[o].evaluate(i);if(!checkSubtype(this.type,typeOf(s)))return s;if(o===this.args.length-1)throw new RuntimeError("Expected value to be of type "+toString(this.type)+", but found "+toString(typeOf(s))+" instead.")}return null},Assertion.prototype.eachChild=function(i){this.args.forEach(i)},Assertion.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Assertion.prototype.serialize=function(){var i=this.type,o=[i.kind];if("array"===i.kind){var s=i.itemType;if("string"===s.kind||"number"===s.kind||"boolean"===s.kind){o.push(s.kind);var x=i.N;("number"==typeof x||this.args.length>1)&&o.push(x)}}return o.concat(this.args.map(function(i){return i.serialize()}))};var FormatExpression=function(i){this.type=eU,this.sections=i};FormatExpression.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=i[1];if(!Array.isArray(s)&&"object"==typeof s)return o.error("First argument must be an image or text section.");for(var x=[],_=!1,F=1;F<=i.length-1;++F){var N=i[F];if(_&&"object"==typeof N&&!Array.isArray(N)){_=!1;var j=null;if(N["font-scale"]&&!(j=o.parse(N["font-scale"],1,eD)))return null;var G=null;if(N["text-font"]&&!(G=o.parse(N["text-font"],1,array(eR))))return null;var Z=null;if(N["text-color"]&&!(Z=o.parse(N["text-color"],1,ez)))return null;var X=x[x.length-1];X.scale=j,X.font=G,X.textColor=Z}else{var J=o.parse(i[F],1,eN);if(!J)return null;var $=J.type.kind;if("string"!==$&&"value"!==$&&"null"!==$&&"resolvedImage"!==$)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,x.push({content:J,scale:null,font:null,textColor:null})}}return new FormatExpression(x)},FormatExpression.prototype.evaluate=function(i){return new Formatted(this.sections.map(function(o){var s=o.content.evaluate(i);return typeOf(s)===eV?new FormattedSection("",s,null,null,null):new FormattedSection(toString$1(s),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null)}))},FormatExpression.prototype.eachChild=function(i){for(var o=0,s=this.sections;o<s.length;o+=1){var x=s[o];i(x.content),x.scale&&i(x.scale),x.font&&i(x.font),x.textColor&&i(x.textColor)}},FormatExpression.prototype.outputDefined=function(){return!1},FormatExpression.prototype.serialize=function(){for(var i=["format"],o=0,s=this.sections;o<s.length;o+=1){var x=s[o];i.push(x.content.serialize());var _={};x.scale&&(_["font-scale"]=x.scale.serialize()),x.font&&(_["text-font"]=x.font.serialize()),x.textColor&&(_["text-color"]=x.textColor.serialize()),i.push(_)}return i};var ImageExpression=function(i){this.type=eV,this.input=i};ImageExpression.parse=function(i,o){if(2!==i.length)return o.error("Expected two arguments.");var s=o.parse(i[1],1,eR);return s?new ImageExpression(s):o.error("No image name provided.")},ImageExpression.prototype.evaluate=function(i){var o=this.input.evaluate(i),s=ResolvedImage.fromString(o);return s&&i.availableImages&&(s.available=i.availableImages.indexOf(o)>-1),s},ImageExpression.prototype.eachChild=function(i){i(this.input)},ImageExpression.prototype.outputDefined=function(){return!1},ImageExpression.prototype.serialize=function(){return["image",this.input.serialize()]};var eZ={"to-boolean":eB,"to-color":ez,"to-number":eD,"to-string":eR},Coercion=function(i,o){this.type=i,this.args=o};Coercion.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=i[0];if(("to-boolean"===s||"to-string"===s)&&2!==i.length)return o.error("Expected one argument.");for(var x=eZ[s],_=[],F=1;F<i.length;F++){var N=o.parse(i[F],F,eN);if(!N)return null;_.push(N)}return new Coercion(x,_)},Coercion.prototype.evaluate=function(i){if("boolean"===this.type.kind)return!!this.args[0].evaluate(i);if("color"===this.type.kind){for(var o,s,x=0,_=this.args;x<_.length;x+=1){if(o=_[x].evaluate(i),s=null,o instanceof Color)return o;if("string"==typeof o){var F=i.parseColor(o);if(F)return F}else if(Array.isArray(o)&&!(s=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":validateRGBA(o[0],o[1],o[2],o[3])))return new Color(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new RuntimeError(s||"Could not parse color from value '"+("string"==typeof o?o:String(JSON.stringify(o)))+"'")}if("number"===this.type.kind){for(var N=null,j=0,G=this.args;j<G.length;j+=1){if(null===(N=G[j].evaluate(i)))return 0;var Z=Number(N);if(!isNaN(Z))return Z}throw new RuntimeError("Could not convert "+JSON.stringify(N)+" to number.")}return"formatted"===this.type.kind?Formatted.fromString(toString$1(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?ResolvedImage.fromString(toString$1(this.args[0].evaluate(i))):toString$1(this.args[0].evaluate(i))},Coercion.prototype.eachChild=function(i){this.args.forEach(i)},Coercion.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Coercion.prototype.serialize=function(){if("formatted"===this.type.kind)return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ImageExpression(this.args[0]).serialize();var i=["to-"+this.type.kind];return this.eachChild(function(o){i.push(o.serialize())}),i};var eY=["Unknown","Point","LineString","Polygon"],EvaluationContext=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};EvaluationContext.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},EvaluationContext.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?eY[this.feature.type]:this.feature.type:null},EvaluationContext.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},EvaluationContext.prototype.canonicalID=function(){return this.canonical},EvaluationContext.prototype.properties=function(){return this.feature&&this.feature.properties||{}},EvaluationContext.prototype.parseColor=function(i){var o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=Color.parse(i)),o};var CompoundExpression=function(i,o,s,x){this.name=i,this.type=o,this._evaluate=s,this.args=x};CompoundExpression.prototype.evaluate=function(i){return this._evaluate(i,this.args)},CompoundExpression.prototype.eachChild=function(i){this.args.forEach(i)},CompoundExpression.prototype.outputDefined=function(){return!1},CompoundExpression.prototype.serialize=function(){return[this.name].concat(this.args.map(function(i){return i.serialize()}))},CompoundExpression.parse=function(i,o){var s,x=i[0],_=CompoundExpression.definitions[x];if(!_)return o.error('Unknown expression "'+x+'". If you wanted a literal array, use ["literal", [...]].',0);for(var F=Array.isArray(_)?_[0]:_.type,N=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,j=N.filter(function(o){var s=o[0];return!Array.isArray(s)||s.length===i.length-1}),G=null,Z=0;Z<j.length;Z+=1){var X=j[Z],J=X[0],$=X[1];G=new ParsingContext(o.registry,o.path,null,o.scope);for(var ee=[],et=!1,er=1;er<i.length;er++){var en=i[er],ei=Array.isArray(J)?J[er-1]:J.type,eo=G.parse(en,1+ee.length,ei);if(!eo){et=!0;break}ee.push(eo)}if(!et){if(Array.isArray(J)&&J.length!==ee.length){G.error("Expected "+J.length+" arguments, but found "+ee.length+" instead.");continue}for(var es=0;es<ee.length;es++){var el=Array.isArray(J)?J[es]:J.type,ec=ee[es];G.concat(es+1).checkSubtype(el,ec.type)}if(0===G.errors.length)return new CompoundExpression(x,F,$,ee)}}if(1===j.length)(s=o.errors).push.apply(s,G.errors);else{for(var eu=(j.length?j:N).map(function(i){var o;return Array.isArray(o=i[0])?"("+o.map(toString).join(", ")+")":"("+toString(o.type)+"...)"}).join(" | "),ef=[],eh=1;eh<i.length;eh++){var ed=o.parse(i[eh],1+ef.length);if(!ed)return null;ef.push(toString(ed.type))}o.error("Expected arguments of type "+eu+", but found ("+ef.join(", ")+") instead.")}return null},CompoundExpression.register=function(i,o){for(var s in CompoundExpression.definitions=o,o)i[s]=CompoundExpression};var CollatorExpression=function(i,o,s){this.type=ej,this.locale=s,this.caseSensitive=i,this.diacriticSensitive=o};function updateBBox(i,o){i[0]=Math.min(i[0],o[0]),i[1]=Math.min(i[1],o[1]),i[2]=Math.max(i[2],o[0]),i[3]=Math.max(i[3],o[1])}function boxWithinBox(i,o){return!(i[0]<=o[0])&&!(i[2]>=o[2])&&!(i[1]<=o[1])&&!(i[3]>=o[3])}function pointWithinPolygon(i,o){for(var s=!1,x=0,_=o.length;x<_;x++)for(var F,N,j=o[x],G=0,Z=j.length;G<Z-1;G++){if(function(i,o,s){var x=i[0]-o[0],_=i[1]-o[1],F=i[0]-s[0],N=i[1]-s[1];return x*N-F*_==0&&x*F<=0&&_*N<=0}(i,j[G],j[G+1]))return!1;F=j[G],N=j[G+1],F[1]>i[1]!=N[1]>i[1]&&i[0]<(N[0]-F[0])*(i[1]-F[1])/(N[1]-F[1])+F[0]&&(s=!s)}return s}function twoSided(i,o,s,x){var _=i[0]-s[0],F=i[1]-s[1],N=o[0]-s[0],j=o[1]-s[1],G=x[0]-s[0],Z=x[1]-s[1],X=_*Z-G*F,J=N*Z-G*j;return X>0&&J<0||X<0&&J>0}function lineStringWithinPolygon(i,o){for(var s=0;s<i.length;++s)if(!pointWithinPolygon(i[s],o))return!1;for(var x=0;x<i.length-1;++x)if(function(i,o,s){for(var x=0;x<s.length;x+=1)for(var _=s[x],F=0;F<_.length-1;++F)if(function(i,o,s,x){var _,F=[o[0]-i[0],o[1]-i[1]];return 0!=(_=[x[0]-s[0],x[1]-s[1]])[0]*F[1]-_[1]*F[0]&&!!(twoSided(i,o,s,x)&&twoSided(s,x,i,o))}(i,o,_[F],_[F+1]))return!0;return!1}(i[x],i[x+1],o))return!1;return!0}function getTilePolygon(i,o,s){for(var x=[],_=0;_<i.length;_++){for(var F=[],N=0;N<i[_].length;N++){var j=function(i,o){var s=(180+i[0])/360,x=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,_=Math.pow(2,o.z);return[Math.round(s*_*8192),Math.round(x*_*8192)]}(i[_][N],s);updateBBox(o,j),F.push(j)}x.push(F)}return x}function getTilePolygons(i,o,s){for(var x=[],_=0;_<i.length;_++){var F=getTilePolygon(i[_],o,s);x.push(F)}return x}function updatePoint(i,o,s,x){if(i[0]<s[0]||i[0]>s[2]){var _=.5*x,F=i[0]-s[0]>_?-x:s[0]-i[0]>_?x:0;0===F&&(F=i[0]-s[2]>_?-x:s[2]-i[0]>_?x:0),i[0]+=F}updateBBox(o,i)}function getTilePoints(i,o,s,x){for(var _=8192*Math.pow(2,x.z),F=[8192*x.x,8192*x.y],N=[],j=0;j<i.length;j+=1)for(var G=i[j],Z=0;Z<G.length;Z+=1){var X=G[Z],J=[X.x+F[0],X.y+F[1]];updatePoint(J,o,s,_),N.push(J)}return N}function getTileLines(i,o,s,x){for(var _=8192*Math.pow(2,x.z),F=[8192*x.x,8192*x.y],N=[],j=0;j<i.length;j+=1){for(var G=i[j],Z=[],X=0;X<G.length;X+=1){var J=G[X],$=[J.x+F[0],J.y+F[1]];updateBBox(o,$),Z.push($)}N.push(Z)}if(o[2]-o[0]<=_/2){o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var ee=0;ee<N.length;ee+=1)for(var et=N[ee],er=0;er<et.length;er+=1)updatePoint(et[er],o,s,_)}return N}CollatorExpression.parse=function(i,o){if(2!==i.length)return o.error("Expected one argument.");var s=i[1];if("object"!=typeof s||Array.isArray(s))return o.error("Collator options argument must be an object.");var x=o.parse(void 0!==s["case-sensitive"]&&s["case-sensitive"],1,eB);if(!x)return null;var _=o.parse(void 0!==s["diacritic-sensitive"]&&s["diacritic-sensitive"],1,eB);if(!_)return null;var F=null;return!s.locale||(F=o.parse(s.locale,1,eR))?new CollatorExpression(x,_,F):null},CollatorExpression.prototype.evaluate=function(i){return new Collator(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)},CollatorExpression.prototype.eachChild=function(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)},CollatorExpression.prototype.outputDefined=function(){return!1},CollatorExpression.prototype.serialize=function(){var i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]};var Within=function(i,o){this.type=eB,this.geojson=i,this.geometries=o};function isFeatureConstant(i){if(i instanceof CompoundExpression){if("get"===i.name&&1===i.args.length||"feature-state"===i.name)return!1;if("has"===i.name&&1===i.args.length)return!1;if("properties"===i.name||"geometry-type"===i.name||"id"===i.name)return!1;else if(/^filter-/.test(i.name))return!1}if(i instanceof Within)return!1;var o=!0;return i.eachChild(function(i){o&&!isFeatureConstant(i)&&(o=!1)}),o}function isStateConstant(i){if(i instanceof CompoundExpression&&"feature-state"===i.name)return!1;var o=!0;return i.eachChild(function(i){o&&!isStateConstant(i)&&(o=!1)}),o}function isGlobalPropertyConstant(i,o){if(i instanceof CompoundExpression&&o.indexOf(i.name)>=0)return!1;var s=!0;return i.eachChild(function(i){s&&!isGlobalPropertyConstant(i,o)&&(s=!1)}),s}Within.parse=function(i,o){if(2!==i.length)return o.error("'within' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(isValue(i[1])){var s=i[1];if("FeatureCollection"===s.type)for(var x=0;x<s.features.length;++x){var _=s.features[x].geometry.type;if("Polygon"===_||"MultiPolygon"===_)return new Within(s,s.features[x].geometry)}else if("Feature"===s.type){var F=s.geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new Within(s,s.geometry)}else if("Polygon"===s.type||"MultiPolygon"===s.type)return new Within(s,s)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Within.prototype.evaluate=function(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return function(i,o){var s=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],_=i.canonicalID();if("Polygon"===o.type){var F=getTilePolygon(o.coordinates,x,_),N=getTilePoints(i.geometry(),s,x,_);if(!boxWithinBox(s,x))return!1;for(var j=0;j<N.length;j+=1)if(!pointWithinPolygon(N[j],F))return!1}if("MultiPolygon"===o.type){var G=getTilePolygons(o.coordinates,x,_),Z=getTilePoints(i.geometry(),s,x,_);if(!boxWithinBox(s,x))return!1;for(var X=0;X<Z.length;X+=1)if(!function(i,o){for(var s=0;s<o.length;s++)if(pointWithinPolygon(i,o[s]))return!0;return!1}(Z[X],G))return!1}return!0}(i,this.geometries);if("LineString"===i.geometryType())return function(i,o){var s=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],_=i.canonicalID();if("Polygon"===o.type){var F=getTilePolygon(o.coordinates,x,_),N=getTileLines(i.geometry(),s,x,_);if(!boxWithinBox(s,x))return!1;for(var j=0;j<N.length;j+=1)if(!lineStringWithinPolygon(N[j],F))return!1}if("MultiPolygon"===o.type){var G=getTilePolygons(o.coordinates,x,_),Z=getTileLines(i.geometry(),s,x,_);if(!boxWithinBox(s,x))return!1;for(var X=0;X<Z.length;X+=1)if(!function(i,o){for(var s=0;s<o.length;s++)if(lineStringWithinPolygon(i,o[s]))return!0;return!1}(Z[X],G))return!1}return!0}(i,this.geometries)}return!1},Within.prototype.eachChild=function(){},Within.prototype.outputDefined=function(){return!0},Within.prototype.serialize=function(){return["within",this.geojson]};var Var=function(i,o){this.type=o.type,this.name=i,this.boundExpression=o};Var.parse=function(i,o){if(2!==i.length||"string"!=typeof i[1])return o.error("'var' expression requires exactly one string literal argument.");var s=i[1];return o.scope.has(s)?new Var(s,o.scope.get(s)):o.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Var.prototype.evaluate=function(i){return this.boundExpression.evaluate(i)},Var.prototype.eachChild=function(){},Var.prototype.outputDefined=function(){return!1},Var.prototype.serialize=function(){return["var",this.name]};var ParsingContext=function(i,o,s,x,_){void 0===o&&(o=[]),void 0===x&&(x=new Scope),void 0===_&&(_=[]),this.registry=i,this.path=o,this.key=o.map(function(i){return"["+i+"]"}).join(""),this.scope=x,this.errors=_,this.expectedType=s};function findStopLessThanOrEqualTo(i,o){for(var s,x,_=i.length-1,F=0,N=_,j=0;F<=N;)if(s=i[j=Math.floor((F+N)/2)],x=i[j+1],s<=o){if(j===_||o<x)return j;F=j+1}else if(s>o)N=j-1;else throw new RuntimeError("Input is not a number.");return 0}ParsingContext.prototype.parse=function(i,o,s,x,_){return(void 0===_&&(_={}),o)?this.concat(o,s,x)._parse(i,_):this._parse(i,_)},ParsingContext.prototype._parse=function(i,o){function annotate(i,o,s){return"assert"===s?new Assertion(o,[i]):"coerce"===s?new Coercion(o,[i]):i}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var s=i[0];if("string"!=typeof s)return this.error("Expression name must be a string, but found "+typeof s+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var x=this.registry[s];if(x){var _=x.parse(i,this);if(!_)return null;if(this.expectedType){var F=this.expectedType,N=_.type;if(("string"===F.kind||"number"===F.kind||"boolean"===F.kind||"object"===F.kind||"array"===F.kind)&&"value"===N.kind)_=annotate(_,F,o.typeAnnotation||"assert");else if(("color"===F.kind||"formatted"===F.kind||"resolvedImage"===F.kind)&&("value"===N.kind||"string"===N.kind))_=annotate(_,F,o.typeAnnotation||"coerce");else if(this.checkSubtype(F,N))return null}if(!(_ instanceof Literal)&&"resolvedImage"!==_.type.kind&&function isConstant(i){if(i instanceof Var)return isConstant(i.boundExpression);if(i instanceof CompoundExpression&&"error"===i.name||i instanceof CollatorExpression||i instanceof Within)return!1;var o=i instanceof Coercion||i instanceof Assertion,s=!0;return i.eachChild(function(i){s=o?s&&isConstant(i):s&&i instanceof Literal}),!!s&&isFeatureConstant(i)&&isGlobalPropertyConstant(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(_)){var j=new EvaluationContext;try{_=new Literal(_.type,_.evaluate(j))}catch(i){return this.error(i.message),null}}return _}return this.error('Unknown expression "'+s+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===i?this.error("'undefined' value invalid. Use null instead."):"object"==typeof i?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof i+" instead.")},ParsingContext.prototype.concat=function(i,o,s){var x="number"==typeof i?this.path.concat(i):this.path,_=s?this.scope.concat(s):this.scope;return new ParsingContext(this.registry,x,o||null,_,this.errors)},ParsingContext.prototype.error=function(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];var x=""+this.key+o.map(function(i){return"["+i+"]"}).join("");this.errors.push(new eI(x,i))},ParsingContext.prototype.checkSubtype=function(i,o){var s=checkSubtype(i,o);return s&&this.error(s),s};var Step=function(i,o,s){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(var x=0;x<s.length;x+=1){var _=s[x],F=_[0],N=_[1];this.labels.push(F),this.outputs.push(N)}};function number(i,o,s){return i*(1-s)+o*s}Step.parse=function(i,o){if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");var s=o.parse(i[1],1,eD);if(!s)return null;var x=[],_=null;o.expectedType&&"value"!==o.expectedType.kind&&(_=o.expectedType);for(var F=1;F<i.length;F+=2){var N=1===F?-1/0:i[F],j=i[F+1],G=F,Z=F+1;if("number"!=typeof N)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(x.length&&x[x.length-1][0]>=N)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);var X=o.parse(j,Z,_);if(!X)return null;_=_||X.type,x.push([N,X])}return new Step(_,s,x)},Step.prototype.evaluate=function(i){var o=this.labels,s=this.outputs;if(1===o.length)return s[0].evaluate(i);var x=this.input.evaluate(i);if(x<=o[0])return s[0].evaluate(i);var _=o.length;return x>=o[_-1]?s[_-1].evaluate(i):s[findStopLessThanOrEqualTo(o,x)].evaluate(i)},Step.prototype.eachChild=function(i){i(this.input);for(var o=0,s=this.outputs;o<s.length;o+=1)i(s[o])},Step.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Step.prototype.serialize=function(){for(var i=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i};var eX=Object.freeze({__proto__:null,number:number,color:function(i,o,s){return new Color(number(i.r,o.r,s),number(i.g,o.g,s),number(i.b,o.b,s),number(i.a,o.a,s))},array:function(i,o,s){return i.map(function(i,x){return number(i,o[x],s)})}}),eK=4/29,eJ=6/29,e$=3*(6/29)*(6/29),eQ=6/29*(6/29)*(6/29),e0=Math.PI/180,e1=180/Math.PI;function xyz2lab(i){return i>eQ?Math.pow(i,1/3):i/e$+eK}function lab2xyz(i){return i>eJ?i*i*i:e$*(i-eK)}function xyz2rgb(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function rgb2xyz(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function rgbToLab(i){var o=rgb2xyz(i.r),s=rgb2xyz(i.g),x=rgb2xyz(i.b),_=xyz2lab((.4124564*o+.3575761*s+.1804375*x)/.95047),F=xyz2lab((.2126729*o+.7151522*s+.072175*x)/1);return{l:116*F-16,a:500*(_-F),b:200*(F-xyz2lab((.0193339*o+.119192*s+.9503041*x)/1.08883)),alpha:i.a}}function labToRgb(i){var o=(i.l+16)/116,s=isNaN(i.a)?o:o+i.a/500,x=isNaN(i.b)?o:o-i.b/200;return o=1*lab2xyz(o),s=.95047*lab2xyz(s),x=1.08883*lab2xyz(x),new Color(xyz2rgb(3.2404542*s-1.5371385*o-.4985314*x),xyz2rgb(-.969266*s+1.8760108*o+.041556*x),xyz2rgb(.0556434*s-.2040259*o+1.0572252*x),i.alpha)}var e2={forward:rgbToLab,reverse:labToRgb,interpolate:function(i,o,s){return{l:number(i.l,o.l,s),a:number(i.a,o.a,s),b:number(i.b,o.b,s),alpha:number(i.alpha,o.alpha,s)}}},e3={forward:function(i){var o=rgbToLab(i),s=o.l,x=o.a,_=o.b,F=Math.atan2(_,x)*e1;return{h:F<0?F+360:F,c:Math.sqrt(x*x+_*_),l:s,alpha:i.a}},reverse:function(i){var o=i.h*e0,s=i.c;return labToRgb({l:i.l,a:Math.cos(o)*s,b:Math.sin(o)*s,alpha:i.alpha})},interpolate:function(i,o,s){var x,_;return{h:(x=i.h,_=o.h-x,x+s*(_>180||_<-180?_-360*Math.round(_/360):_)),c:number(i.c,o.c,s),l:number(i.l,o.l,s),alpha:number(i.alpha,o.alpha,s)}}},e5=Object.freeze({__proto__:null,lab:e2,hcl:e3}),Interpolate=function(i,o,s,x,_){this.type=i,this.operator=o,this.interpolation=s,this.input=x,this.labels=[],this.outputs=[];for(var F=0;F<_.length;F+=1){var N=_[F],j=N[0],G=N[1];this.labels.push(j),this.outputs.push(G)}};function exponentialInterpolation(i,o,s,x){var _=x-s,F=i-s;return 0===_?0:1===o?F/_:(Math.pow(o,F)-1)/(Math.pow(o,_)-1)}Interpolate.interpolationFactor=function(i,o,s,x){var _=0;if("exponential"===i.name)_=exponentialInterpolation(o,i.base,s,x);else if("linear"===i.name)_=exponentialInterpolation(o,1,s,x);else if("cubic-bezier"===i.name){var F=i.controlPoints;_=new UnitBezier(F[0],F[1],F[2],F[3]).solve(exponentialInterpolation(o,1,s,x))}return _},Interpolate.parse=function(i,o){var s=i[0],x=i[1],_=i[2],F=i.slice(3);if(!Array.isArray(x)||0===x.length)return o.error("Expected an interpolation type expression.",1);if("linear"===x[0])x={name:"linear"};else if("exponential"===x[0]){var N=x[1];if("number"!=typeof N)return o.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:N}}else{if("cubic-bezier"!==x[0])return o.error("Unknown interpolation type "+String(x[0]),1,0);var j=x.slice(1);if(4!==j.length||j.some(function(i){return"number"!=typeof i||i<0||i>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:j}}if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(_=o.parse(_,2,eD)))return null;var G=[],Z=null;"interpolate-hcl"===s||"interpolate-lab"===s?Z=ez:o.expectedType&&"value"!==o.expectedType.kind&&(Z=o.expectedType);for(var X=0;X<F.length;X+=2){var J=F[X],$=F[X+1],ee=X+3,et=X+4;if("number"!=typeof J)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(G.length&&G[G.length-1][0]>=J)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);var er=o.parse($,et,Z);if(!er)return null;Z=Z||er.type,G.push([J,er])}return"number"===Z.kind||"color"===Z.kind||"array"===Z.kind&&"number"===Z.itemType.kind&&"number"==typeof Z.N?new Interpolate(Z,s,x,_,G):o.error("Type "+toString(Z)+" is not interpolatable.")},Interpolate.prototype.evaluate=function(i){var o=this.labels,s=this.outputs;if(1===o.length)return s[0].evaluate(i);var x=this.input.evaluate(i);if(x<=o[0])return s[0].evaluate(i);var _=o.length;if(x>=o[_-1])return s[_-1].evaluate(i);var F=findStopLessThanOrEqualTo(o,x),N=o[F],j=o[F+1],G=Interpolate.interpolationFactor(this.interpolation,x,N,j),Z=s[F].evaluate(i),X=s[F+1].evaluate(i);return"interpolate"===this.operator?eX[this.type.kind.toLowerCase()](Z,X,G):"interpolate-hcl"===this.operator?e3.reverse(e3.interpolate(e3.forward(Z),e3.forward(X),G)):e2.reverse(e2.interpolate(e2.forward(Z),e2.forward(X),G))},Interpolate.prototype.eachChild=function(i){i(this.input);for(var o=0,s=this.outputs;o<s.length;o+=1)i(s[o])},Interpolate.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Interpolate.prototype.serialize=function(){i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i,o=[this.operator,i,this.input.serialize()],s=0;s<this.labels.length;s++)o.push(this.labels[s],this.outputs[s].serialize());return o};var Coalesce=function(i,o){this.type=i,this.args=o};Coalesce.parse=function(i,o){if(i.length<2)return o.error("Expectected at least one argument.");var s=null,x=o.expectedType;x&&"value"!==x.kind&&(s=x);for(var _=[],F=0,N=i.slice(1);F<N.length;F+=1){var j=N[F],G=o.parse(j,1+_.length,s,void 0,{typeAnnotation:"omit"});if(!G)return null;s=s||G.type,_.push(G)}return x&&_.some(function(i){return checkSubtype(x,i.type)})?new Coalesce(eN,_):new Coalesce(s,_)},Coalesce.prototype.evaluate=function(i){for(var o,s=null,x=0,_=0,F=this.args;_<F.length;_+=1){var N=F[_];if(x++,(s=N.evaluate(i))&&s instanceof ResolvedImage&&!s.available&&(o||(o=s.name),s=null,x===this.args.length&&(s=o)),null!==s)break}return s},Coalesce.prototype.eachChild=function(i){this.args.forEach(i)},Coalesce.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Coalesce.prototype.serialize=function(){var i=["coalesce"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Let=function(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o};Let.prototype.evaluate=function(i){return this.result.evaluate(i)},Let.prototype.eachChild=function(i){for(var o=0,s=this.bindings;o<s.length;o+=1)i(s[o][1]);i(this.result)},Let.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found "+(i.length-1)+" instead.");for(var s=[],x=1;x<i.length-1;x+=2){var _=i[x];if("string"!=typeof _)return o.error("Expected string, but found "+typeof _+" instead.",x);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);var F=o.parse(i[x+1],x+1);if(!F)return null;s.push([_,F])}var N=o.parse(i[i.length-1],i.length-1,o.expectedType,s);return N?new Let(s,N):null},Let.prototype.outputDefined=function(){return this.result.outputDefined()},Let.prototype.serialize=function(){for(var i=["let"],o=0,s=this.bindings;o<s.length;o+=1){var x=s[o],_=x[0],F=x[1];i.push(_,F.serialize())}return i.push(this.result.serialize()),i};var At=function(i,o,s){this.type=i,this.index=o,this.input=s};At.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eD),x=o.parse(i[2],2,array(o.expectedType||eN));if(!s||!x)return null;var _=x.type;return new At(_.itemType,s,x)},At.prototype.evaluate=function(i){var o=this.index.evaluate(i),s=this.input.evaluate(i);if(o<0)throw new RuntimeError("Array index out of bounds: "+o+" < 0.");if(o>=s.length)throw new RuntimeError("Array index out of bounds: "+o+" > "+(s.length-1)+".");if(o!==Math.floor(o))throw new RuntimeError("Array index must be an integer, but found "+o+" instead.");return s[o]},At.prototype.eachChild=function(i){i(this.index),i(this.input)},At.prototype.outputDefined=function(){return!1},At.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var In=function(i,o){this.type=eB,this.needle=i,this.haystack=o};In.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eN),x=o.parse(i[2],2,eN);return s&&x?isValidType(s.type,[eB,eR,eD,eO,eN])?new In(s,x):o.error("Expected first argument to be of type boolean, string, number or null, but found "+toString(s.type)+" instead"):null},In.prototype.evaluate=function(i){var o=this.needle.evaluate(i),s=this.haystack.evaluate(i);if(!s)return!1;if(!isValidNativeType(o,["boolean","string","number","null"]))throw new RuntimeError("Expected first argument to be of type boolean, string, number or null, but found "+toString(typeOf(o))+" instead.");if(!isValidNativeType(s,["string","array"]))throw new RuntimeError("Expected second argument to be of type array or string, but found "+toString(typeOf(s))+" instead.");return s.indexOf(o)>=0},In.prototype.eachChild=function(i){i(this.needle),i(this.haystack)},In.prototype.outputDefined=function(){return!0},In.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var IndexOf=function(i,o,s){this.type=eD,this.needle=i,this.haystack=o,this.fromIndex=s};IndexOf.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eN),x=o.parse(i[2],2,eN);if(!s||!x)return null;if(!isValidType(s.type,[eB,eR,eD,eO,eN]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+toString(s.type)+" instead");if(4!==i.length)return new IndexOf(s,x);var _=o.parse(i[3],3,eD);return _?new IndexOf(s,x,_):null},IndexOf.prototype.evaluate=function(i){var o=this.needle.evaluate(i),s=this.haystack.evaluate(i);if(!isValidNativeType(o,["boolean","string","number","null"]))throw new RuntimeError("Expected first argument to be of type boolean, string, number or null, but found "+toString(typeOf(o))+" instead.");if(!isValidNativeType(s,["string","array"]))throw new RuntimeError("Expected second argument to be of type array or string, but found "+toString(typeOf(s))+" instead.");if(this.fromIndex){var x=this.fromIndex.evaluate(i);return s.indexOf(o,x)}return s.indexOf(o)},IndexOf.prototype.eachChild=function(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)},IndexOf.prototype.outputDefined=function(){return!1},IndexOf.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Match=function(i,o,s,x,_,F){this.inputType=i,this.type=o,this.input=s,this.cases=x,this.outputs=_,this.otherwise=F};Match.parse=function(i,o){if(i.length<5)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if(i.length%2!=1)return o.error("Expected an even number of arguments.");o.expectedType&&"value"!==o.expectedType.kind&&(x=o.expectedType);for(var s,x,_={},F=[],N=2;N<i.length-1;N+=2){var j=i[N],G=i[N+1];Array.isArray(j)||(j=[j]);var Z=o.concat(N);if(0===j.length)return Z.error("Expected at least one branch label.");for(var X=0,J=j;X<J.length;X+=1){var $=J[X];if("number"!=typeof $&&"string"!=typeof $)return Z.error("Branch labels must be numbers or strings.");if("number"==typeof $&&Math.abs($)>Number.MAX_SAFE_INTEGER)return Z.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof $&&Math.floor($)!==$)return Z.error("Numeric branch labels must be integer values.");if(s){if(Z.checkSubtype(s,typeOf($)))return null}else s=typeOf($);if(void 0!==_[String($)])return Z.error("Branch labels must be unique.");_[String($)]=F.length}var ee=o.parse(G,N,x);if(!ee)return null;x=x||ee.type,F.push(ee)}var et=o.parse(i[1],1,eN);if(!et)return null;var er=o.parse(i[i.length-1],i.length-1,x);return!er||"value"!==et.type.kind&&o.concat(1).checkSubtype(s,et.type)?null:new Match(s,x,et,_,F,er)},Match.prototype.evaluate=function(i){var o=this.input.evaluate(i);return(typeOf(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)},Match.prototype.eachChild=function(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)},Match.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})&&this.otherwise.outputDefined()},Match.prototype.serialize=function(){for(var i=this,o=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),x=[],_={},F=0;F<s.length;F+=1){var N=s[F],j=_[this.cases[N]];void 0===j?(_[this.cases[N]]=x.length,x.push([this.cases[N],[N]])):x[j][1].push(N)}for(var coerceLabel=function(o){return"number"===i.inputType.kind?Number(o):o},G=0;G<x.length;G+=1){var Z=x[G],j=Z[0],X=Z[1];1===X.length?o.push(coerceLabel(X[0])):o.push(X.map(coerceLabel)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var Case=function(i,o,s){this.type=i,this.branches=o,this.otherwise=s};Case.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found only "+(i.length-1)+".");if(i.length%2!=0)return o.error("Expected an odd number of arguments.");o.expectedType&&"value"!==o.expectedType.kind&&(s=o.expectedType);for(var s,x=[],_=1;_<i.length-1;_+=2){var F=o.parse(i[_],_,eB);if(!F)return null;var N=o.parse(i[_+1],_+1,s);if(!N)return null;x.push([F,N]),s=s||N.type}var j=o.parse(i[i.length-1],i.length-1,s);return j?new Case(s,x,j):null},Case.prototype.evaluate=function(i){for(var o=0,s=this.branches;o<s.length;o+=1){var x=s[o],_=x[0],F=x[1];if(_.evaluate(i))return F.evaluate(i)}return this.otherwise.evaluate(i)},Case.prototype.eachChild=function(i){for(var o=0,s=this.branches;o<s.length;o+=1){var x=s[o],_=x[0],F=x[1];i(_),i(F)}i(this.otherwise)},Case.prototype.outputDefined=function(){return this.branches.every(function(i){return i[0],i[1].outputDefined()})&&this.otherwise.outputDefined()},Case.prototype.serialize=function(){var i=["case"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Slice=function(i,o,s,x){this.type=i,this.input=o,this.beginIndex=s,this.endIndex=x};function isComparableType(i,o){return"=="===i||"!="===i?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function eqCollate(i,o,s,x){return 0===x.compare(o,s)}function makeComparison(i,o,s){var x="=="!==i&&"!="!==i;return function(){function Comparison(i,o,s){this.type=eB,this.lhs=i,this.rhs=o,this.collator=s,this.hasUntypedArgument="value"===i.type.kind||"value"===o.type.kind}return Comparison.parse=function(i,o){if(3!==i.length&&4!==i.length)return o.error("Expected two or three arguments.");var s=i[0],_=o.parse(i[1],1,eN);if(!_)return null;if(!isComparableType(s,_.type))return o.concat(1).error('"'+s+"\" comparisons are not supported for type '"+toString(_.type)+"'.");var F=o.parse(i[2],2,eN);if(!F)return null;if(!isComparableType(s,F.type))return o.concat(2).error('"'+s+"\" comparisons are not supported for type '"+toString(F.type)+"'.");if(_.type.kind!==F.type.kind&&"value"!==_.type.kind&&"value"!==F.type.kind)return o.error("Cannot compare types '"+toString(_.type)+"' and '"+toString(F.type)+"'.");x&&("value"===_.type.kind&&"value"!==F.type.kind?_=new Assertion(F.type,[_]):"value"!==_.type.kind&&"value"===F.type.kind&&(F=new Assertion(_.type,[F])));var N=null;if(4===i.length){if("string"!==_.type.kind&&"string"!==F.type.kind&&"value"!==_.type.kind&&"value"!==F.type.kind)return o.error("Cannot use collator to compare non-string types.");if(!(N=o.parse(i[3],3,ej)))return null}return new Comparison(_,F,N)},Comparison.prototype.evaluate=function(_){var F=this.lhs.evaluate(_),N=this.rhs.evaluate(_);if(x&&this.hasUntypedArgument){var j=typeOf(F),G=typeOf(N);if(j.kind!==G.kind||!("string"===j.kind||"number"===j.kind))throw new RuntimeError('Expected arguments for "'+i+'" to be (string, string) or (number, number), but found ('+j.kind+", "+G.kind+") instead.")}if(this.collator&&!x&&this.hasUntypedArgument){var Z=typeOf(F),X=typeOf(N);if("string"!==Z.kind||"string"!==X.kind)return o(_,F,N)}return this.collator?s(_,F,N,this.collator.evaluate(_)):o(_,F,N)},Comparison.prototype.eachChild=function(i){i(this.lhs),i(this.rhs),this.collator&&i(this.collator)},Comparison.prototype.outputDefined=function(){return!0},Comparison.prototype.serialize=function(){var o=[i];return this.eachChild(function(i){o.push(i.serialize())}),o},Comparison}()}Slice.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eN),x=o.parse(i[2],2,eD);if(!s||!x)return null;if(!isValidType(s.type,[array(eN),eR,eN]))return o.error("Expected first argument to be of type array or string, but found "+toString(s.type)+" instead");if(4!==i.length)return new Slice(s.type,s,x);var _=o.parse(i[3],3,eD);return _?new Slice(s.type,s,x,_):null},Slice.prototype.evaluate=function(i){var o=this.input.evaluate(i),s=this.beginIndex.evaluate(i);if(!isValidNativeType(o,["string","array"]))throw new RuntimeError("Expected first argument to be of type array or string, but found "+toString(typeOf(o))+" instead.");if(this.endIndex){var x=this.endIndex.evaluate(i);return o.slice(s,x)}return o.slice(s)},Slice.prototype.eachChild=function(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)},Slice.prototype.outputDefined=function(){return!1},Slice.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var e4=makeComparison("==",function(i,o,s){return o===s},eqCollate),e6=makeComparison("!=",function(i,o,s){return o!==s},function(i,o,s,x){return!eqCollate(i,o,s,x)}),e8=makeComparison("<",function(i,o,s){return o<s},function(i,o,s,x){return 0>x.compare(o,s)}),e7=makeComparison(">",function(i,o,s){return o>s},function(i,o,s,x){return x.compare(o,s)>0}),e9=makeComparison("<=",function(i,o,s){return o<=s},function(i,o,s,x){return 0>=x.compare(o,s)}),te=makeComparison(">=",function(i,o,s){return o>=s},function(i,o,s,x){return x.compare(o,s)>=0}),NumberFormat=function(i,o,s,x,_){this.type=eR,this.number=i,this.locale=o,this.currency=s,this.minFractionDigits=x,this.maxFractionDigits=_};NumberFormat.parse=function(i,o){if(3!==i.length)return o.error("Expected two arguments.");var s=o.parse(i[1],1,eD);if(!s)return null;var x=i[2];if("object"!=typeof x||Array.isArray(x))return o.error("NumberFormat options argument must be an object.");var _=null;if(x.locale&&!(_=o.parse(x.locale,1,eR)))return null;var F=null;if(x.currency&&!(F=o.parse(x.currency,1,eR)))return null;var N=null;if(x["min-fraction-digits"]&&!(N=o.parse(x["min-fraction-digits"],1,eD)))return null;var j=null;return!x["max-fraction-digits"]||(j=o.parse(x["max-fraction-digits"],1,eD))?new NumberFormat(s,_,F,N,j):null},NumberFormat.prototype.evaluate=function(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))},NumberFormat.prototype.eachChild=function(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)},NumberFormat.prototype.outputDefined=function(){return!1},NumberFormat.prototype.serialize=function(){var i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]};var Length=function(i){this.type=eD,this.input=i};Length.parse=function(i,o){if(2!==i.length)return o.error("Expected 1 argument, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1);return s?"array"!==s.type.kind&&"string"!==s.type.kind&&"value"!==s.type.kind?o.error("Expected argument of type string or array, but found "+toString(s.type)+" instead."):new Length(s):null},Length.prototype.evaluate=function(i){var o=this.input.evaluate(i);if("string"==typeof o||Array.isArray(o))return o.length;throw new RuntimeError("Expected value to be of type string or array, but found "+toString(typeOf(o))+" instead.")},Length.prototype.eachChild=function(i){i(this.input)},Length.prototype.outputDefined=function(){return!1},Length.prototype.serialize=function(){var i=["length"];return this.eachChild(function(o){i.push(o.serialize())}),i};var tt={"==":e4,"!=":e6,">":e7,"<":e8,">=":te,"<=":e9,array:Assertion,at:At,boolean:Assertion,case:Case,coalesce:Coalesce,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In,"index-of":IndexOf,interpolate:Interpolate,"interpolate-hcl":Interpolate,"interpolate-lab":Interpolate,length:Length,let:Let,literal:Literal,match:Match,number:Assertion,"number-format":NumberFormat,object:Assertion,slice:Slice,step:Step,string:Assertion,"to-boolean":Coercion,"to-color":Coercion,"to-number":Coercion,"to-string":Coercion,var:Var,within:Within};function rgba(i,o){var s=o[0],x=o[1],_=o[2],F=o[3];s=s.evaluate(i),x=x.evaluate(i),_=_.evaluate(i);var N=F?F.evaluate(i):1,j=validateRGBA(s,x,_,N);if(j)throw new RuntimeError(j);return new Color(s/255*N,x/255*N,_/255*N,N)}function get(i,o){var s=o[i];return void 0===s?null:s}function varargs(i){return{type:i}}function success(i){return{result:"success",value:i}}function error(i){return{result:"error",value:i}}function supportsPropertyExpression(i){return"data-driven"===i["property-type"]||"cross-faded-data-driven"===i["property-type"]}function supportsZoomExpression(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(i){return!!i.expression&&i.expression.interpolated}function getType(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":null===i?"null":typeof i}function isFunction(i){return"object"==typeof i&&null!==i&&!Array.isArray(i)}function identityFunction(i){return i}function coalesce(i,o,s){return void 0!==i?i:void 0!==o?o:void 0!==s?s:void 0}function evaluateCategoricalFunction(i,o,s,x,_){return coalesce(typeof s===_?x[s]:void 0,i.default,o.default)}function evaluateIntervalFunction(i,o,s){if("number"!==getType(s))return coalesce(i.default,o.default);var x=i.stops.length;if(1===x||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[x-1][0])return i.stops[x-1][1];var _=findStopLessThanOrEqualTo(i.stops.map(function(i){return i[0]}),s);return i.stops[_][1]}function evaluateExponentialFunction(i,o,s){var x,_,F,N=void 0!==i.base?i.base:1;if("number"!==getType(s))return coalesce(i.default,o.default);var j=i.stops.length;if(1===j||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[j-1][0])return i.stops[j-1][1];var G=findStopLessThanOrEqualTo(i.stops.map(function(i){return i[0]}),s),Z=(x=i.stops[G][0],_=i.stops[G+1][0]-x,F=s-x,0===_?0:1===N?F/_:(Math.pow(N,F)-1)/(Math.pow(N,_)-1)),X=i.stops[G][1],J=i.stops[G+1][1],$=eX[o.type]||identityFunction;if(i.colorSpace&&"rgb"!==i.colorSpace){var ee=e5[i.colorSpace];$=function(i,o){return ee.reverse(ee.interpolate(ee.forward(i),ee.forward(o),Z))}}return"function"==typeof X.evaluate?{evaluate:function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];var s=X.evaluate.apply(void 0,i),x=J.evaluate.apply(void 0,i);if(void 0!==s&&void 0!==x)return $(s,x,Z)}}:$(X,J,Z)}function evaluateIdentityFunction(i,o,s){return"color"===o.type?s=Color.parse(s):"formatted"===o.type?s=Formatted.fromString(s.toString()):"resolvedImage"===o.type?s=ResolvedImage.fromString(s.toString()):getType(s)===o.type||"enum"===o.type&&o.values[s]||(s=void 0),coalesce(s,i.default,o.default)}CompoundExpression.register(tt,{error:[{kind:"error"},[eR],function(i,o){var s=o[0];throw new RuntimeError(s.evaluate(i))}],typeof:[eR,[eN],function(i,o){return toString(typeOf(o[0].evaluate(i)))}],"to-rgba":[array(eD,4),[ez],function(i,o){return o[0].evaluate(i).toArray()}],rgb:[ez,[eD,eD,eD],rgba],rgba:[ez,[eD,eD,eD,eD],rgba],has:{type:eB,overloads:[[[eR],function(i,o){return o[0].evaluate(i) in i.properties()}],[[eR,eF],function(i,o){var s=o[0],x=o[1];return s.evaluate(i) in x.evaluate(i)}]]},get:{type:eN,overloads:[[[eR],function(i,o){return get(o[0].evaluate(i),i.properties())}],[[eR,eF],function(i,o){var s=o[0],x=o[1];return get(s.evaluate(i),x.evaluate(i))}]]},"feature-state":[eN,[eR],function(i,o){return get(o[0].evaluate(i),i.featureState||{})}],properties:[eF,[],function(i){return i.properties()}],"geometry-type":[eR,[],function(i){return i.geometryType()}],id:[eN,[],function(i){return i.id()}],zoom:[eD,[],function(i){return i.globals.zoom}],"heatmap-density":[eD,[],function(i){return i.globals.heatmapDensity||0}],"line-progress":[eD,[],function(i){return i.globals.lineProgress||0}],accumulated:[eN,[],function(i){return void 0===i.globals.accumulated?null:i.globals.accumulated}],"+":[eD,varargs(eD),function(i,o){for(var s=0,x=0;x<o.length;x+=1)s+=o[x].evaluate(i);return s}],"*":[eD,varargs(eD),function(i,o){for(var s=1,x=0;x<o.length;x+=1)s*=o[x].evaluate(i);return s}],"-":{type:eD,overloads:[[[eD,eD],function(i,o){var s=o[0],x=o[1];return s.evaluate(i)-x.evaluate(i)}],[[eD],function(i,o){return-o[0].evaluate(i)}]]},"/":[eD,[eD,eD],function(i,o){var s=o[0],x=o[1];return s.evaluate(i)/x.evaluate(i)}],"%":[eD,[eD,eD],function(i,o){var s=o[0],x=o[1];return s.evaluate(i)%x.evaluate(i)}],ln2:[eD,[],function(){return Math.LN2}],pi:[eD,[],function(){return Math.PI}],e:[eD,[],function(){return Math.E}],"^":[eD,[eD,eD],function(i,o){var s=o[0],x=o[1];return Math.pow(s.evaluate(i),x.evaluate(i))}],sqrt:[eD,[eD],function(i,o){return Math.sqrt(o[0].evaluate(i))}],log10:[eD,[eD],function(i,o){return Math.log(o[0].evaluate(i))/Math.LN10}],ln:[eD,[eD],function(i,o){return Math.log(o[0].evaluate(i))}],log2:[eD,[eD],function(i,o){return Math.log(o[0].evaluate(i))/Math.LN2}],sin:[eD,[eD],function(i,o){return Math.sin(o[0].evaluate(i))}],cos:[eD,[eD],function(i,o){return Math.cos(o[0].evaluate(i))}],tan:[eD,[eD],function(i,o){return Math.tan(o[0].evaluate(i))}],asin:[eD,[eD],function(i,o){return Math.asin(o[0].evaluate(i))}],acos:[eD,[eD],function(i,o){return Math.acos(o[0].evaluate(i))}],atan:[eD,[eD],function(i,o){return Math.atan(o[0].evaluate(i))}],min:[eD,varargs(eD),function(i,o){return Math.min.apply(Math,o.map(function(o){return o.evaluate(i)}))}],max:[eD,varargs(eD),function(i,o){return Math.max.apply(Math,o.map(function(o){return o.evaluate(i)}))}],abs:[eD,[eD],function(i,o){return Math.abs(o[0].evaluate(i))}],round:[eD,[eD],function(i,o){var s=o[0].evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[eD,[eD],function(i,o){return Math.floor(o[0].evaluate(i))}],ceil:[eD,[eD],function(i,o){return Math.ceil(o[0].evaluate(i))}],"filter-==":[eB,[eR,eN],function(i,o){var s=o[0],x=o[1];return i.properties()[s.value]===x.value}],"filter-id-==":[eB,[eN],function(i,o){var s=o[0];return i.id()===s.value}],"filter-type-==":[eB,[eR],function(i,o){var s=o[0];return i.geometryType()===s.value}],"filter-<":[eB,[eR,eN],function(i,o){var s=o[0],x=o[1],_=i.properties()[s.value],F=x.value;return typeof _==typeof F&&_<F}],"filter-id-<":[eB,[eN],function(i,o){var s=o[0],x=i.id(),_=s.value;return typeof x==typeof _&&x<_}],"filter->":[eB,[eR,eN],function(i,o){var s=o[0],x=o[1],_=i.properties()[s.value],F=x.value;return typeof _==typeof F&&_>F}],"filter-id->":[eB,[eN],function(i,o){var s=o[0],x=i.id(),_=s.value;return typeof x==typeof _&&x>_}],"filter-<=":[eB,[eR,eN],function(i,o){var s=o[0],x=o[1],_=i.properties()[s.value],F=x.value;return typeof _==typeof F&&_<=F}],"filter-id-<=":[eB,[eN],function(i,o){var s=o[0],x=i.id(),_=s.value;return typeof x==typeof _&&x<=_}],"filter->=":[eB,[eR,eN],function(i,o){var s=o[0],x=o[1],_=i.properties()[s.value],F=x.value;return typeof _==typeof F&&_>=F}],"filter-id->=":[eB,[eN],function(i,o){var s=o[0],x=i.id(),_=s.value;return typeof x==typeof _&&x>=_}],"filter-has":[eB,[eN],function(i,o){return o[0].value in i.properties()}],"filter-has-id":[eB,[],function(i){return null!==i.id()&&void 0!==i.id()}],"filter-type-in":[eB,[array(eR)],function(i,o){return o[0].value.indexOf(i.geometryType())>=0}],"filter-id-in":[eB,[array(eN)],function(i,o){return o[0].value.indexOf(i.id())>=0}],"filter-in-small":[eB,[eR,array(eN)],function(i,o){var s=o[0];return o[1].value.indexOf(i.properties()[s.value])>=0}],"filter-in-large":[eB,[eR,array(eN)],function(i,o){var s=o[0],x=o[1];return function(i,o,s,x){for(;s<=x;){var _=s+x>>1;if(o[_]===i)return!0;o[_]>i?x=_-1:s=_+1}return!1}(i.properties()[s.value],x.value,0,x.value.length-1)}],all:{type:eB,overloads:[[[eB,eB],function(i,o){var s=o[0],x=o[1];return s.evaluate(i)&&x.evaluate(i)}],[varargs(eB),function(i,o){for(var s=0;s<o.length;s+=1)if(!o[s].evaluate(i))return!1;return!0}]]},any:{type:eB,overloads:[[[eB,eB],function(i,o){var s=o[0],x=o[1];return s.evaluate(i)||x.evaluate(i)}],[varargs(eB),function(i,o){for(var s=0;s<o.length;s+=1)if(o[s].evaluate(i))return!0;return!1}]]},"!":[eB,[eB],function(i,o){return!o[0].evaluate(i)}],"is-supported-script":[eB,[eR],function(i,o){var s=o[0],x=i.globals&&i.globals.isSupportedScript;return!x||x(s.evaluate(i))}],upcase:[eR,[eR],function(i,o){return o[0].evaluate(i).toUpperCase()}],downcase:[eR,[eR],function(i,o){return o[0].evaluate(i).toLowerCase()}],concat:[eR,varargs(eN),function(i,o){return o.map(function(o){return toString$1(o.evaluate(i))}).join("")}],"resolved-locale":[eR,[ej],function(i,o){return o[0].evaluate(i).resolvedLocale()}]});var StyleExpression=function(i,o){this.expression=i,this._warningHistory={},this._evaluator=new EvaluationContext,this._defaultValue=o?"color"===o.type&&isFunction(o.default)?new Color(0,0,0,0):"color"===o.type?Color.parse(o.default)||null:void 0===o.default?null:o.default:null,this._enumValues=o&&"enum"===o.type?o.values:null};function isExpression(i){return Array.isArray(i)&&i.length>0&&"string"==typeof i[0]&&i[0]in tt}function createExpression(i,o){var s,x=new ParsingContext(tt,[],o?(s={color:ez,string:eR,number:eD,enum:eR,boolean:eB,formatted:eU,resolvedImage:eV},"array"===o.type?array(s[o.value]||eN,o.length):s[o.type]):void 0),_=x.parse(i,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return _?success(new StyleExpression(_,o)):error(x.errors)}StyleExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,x,_,F){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=s,this._evaluator.canonical=x,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=F,this.expression.evaluate(this._evaluator)},StyleExpression.prototype.evaluate=function(i,o,s,x,_,F){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=s||null,this._evaluator.canonical=x,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=F||null;try{var N=this.expression.evaluate(this._evaluator);if(null==N||"number"==typeof N&&N!=N)return this._defaultValue;if(this._enumValues&&!(N in this._enumValues))throw new RuntimeError("Expected value to be one of "+Object.keys(this._enumValues).map(function(i){return JSON.stringify(i)}).join(", ")+", but found "+JSON.stringify(N)+" instead.");return N}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,"undefined"!=typeof console&&console.warn(i.message)),this._defaultValue}};var ZoomConstantExpression=function(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent="constant"!==i&&!isStateConstant(o.expression)};ZoomConstantExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,x,_,F){return this._styleExpression.evaluateWithoutErrorHandling(i,o,s,x,_,F)},ZoomConstantExpression.prototype.evaluate=function(i,o,s,x,_,F){return this._styleExpression.evaluate(i,o,s,x,_,F)};var ZoomDependentExpression=function(i,o,s,x){this.kind=i,this.zoomStops=s,this._styleExpression=o,this.isStateDependent="camera"!==i&&!isStateConstant(o.expression),this.interpolationType=x};function createPropertyExpression(i,o){if("error"===(i=createExpression(i,o)).result)return i;var s=i.value.expression,x=isFeatureConstant(s);if(!x&&!supportsPropertyExpression(o))return error([new eI("","data expressions not supported")]);var _=isGlobalPropertyConstant(s,["zoom"]);if(!_&&!supportsZoomExpression(o))return error([new eI("","zoom expressions not supported")]);var F=function findZoomCurve(i){var o=null;if(i instanceof Let)o=findZoomCurve(i.result);else if(i instanceof Coalesce)for(var s=0,x=i.args;s<x.length&&!(o=findZoomCurve(x[s]));s+=1);else(i instanceof Step||i instanceof Interpolate)&&i.input instanceof CompoundExpression&&"zoom"===i.input.name&&(o=i);return o instanceof eI||i.eachChild(function(i){var s=findZoomCurve(i);s instanceof eI?o=s:!o&&s?o=new eI("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&s&&o!==s&&(o=new eI("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}(s);if(!F&&!_)return error([new eI("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(F instanceof eI)return error([F]);if(F instanceof Interpolate&&!supportsInterpolation(o))return error([new eI("",'"interpolate" expressions cannot be used with this property')]);if(!F)return success(x?new ZoomConstantExpression("constant",i.value):new ZoomConstantExpression("source",i.value));var N=F instanceof Interpolate?F.interpolation:void 0;return success(x?new ZoomDependentExpression("camera",i.value,F.labels,N):new ZoomDependentExpression("composite",i.value,F.labels,N))}ZoomDependentExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,x,_,F){return this._styleExpression.evaluateWithoutErrorHandling(i,o,s,x,_,F)},ZoomDependentExpression.prototype.evaluate=function(i,o,s,x,_,F){return this._styleExpression.evaluate(i,o,s,x,_,F)},ZoomDependentExpression.prototype.interpolationFactor=function(i,o,s){return this.interpolationType?Interpolate.interpolationFactor(this.interpolationType,i,o,s):0};var StylePropertyFunction=function(i,o){this._parameters=i,this._specification=o,extend$1(this,function createFunction(i,o){var s,x,_,F="color"===o.type,N=i.stops&&"object"==typeof i.stops[0][0],j=N||void 0!==i.property,G=i.type||(supportsInterpolation(o)?"exponential":"interval");if(F&&((i=extend$1({},i)).stops&&(i.stops=i.stops.map(function(i){return[i[0],Color.parse(i[1])]})),i.default?i.default=Color.parse(i.default):i.default=Color.parse(o.default)),i.colorSpace&&"rgb"!==i.colorSpace&&!e5[i.colorSpace])throw Error("Unknown color space: "+i.colorSpace);if("exponential"===G)s=evaluateExponentialFunction;else if("interval"===G)s=evaluateIntervalFunction;else if("categorical"===G){s=evaluateCategoricalFunction,x=Object.create(null);for(var Z=0,X=i.stops;Z<X.length;Z+=1){var J=X[Z];x[J[0]]=J[1]}_=typeof i.stops[0][0]}else if("identity"===G)s=evaluateIdentityFunction;else throw Error('Unknown function type "'+G+'"');if(N){for(var $={},ee=[],et=0;et<i.stops.length;et++){var er=i.stops[et],en=er[0].zoom;void 0===$[en]&&($[en]={zoom:en,type:i.type,property:i.property,default:i.default,stops:[]},ee.push(en)),$[en].stops.push([er[0].value,er[1]])}for(var ei=[],eo=0;eo<ee.length;eo+=1){var es=ee[eo];ei.push([$[es].zoom,createFunction($[es],o)])}var el={name:"linear"};return{kind:"composite",interpolationType:el,interpolationFactor:Interpolate.interpolationFactor.bind(void 0,el),zoomStops:ei.map(function(i){return i[0]}),evaluate:function(s,x){var _=s.zoom;return evaluateExponentialFunction({stops:ei,base:i.base},o,_).evaluate(_,x)}}}if(!N&&j)return{kind:"source",evaluate:function(F,N){var j=N&&N.properties?N.properties[i.property]:void 0;return void 0===j?coalesce(i.default,o.default):s(i,o,j,x,_)}};var ec="exponential"===G?{name:"exponential",base:void 0!==i.base?i.base:1}:null;return{kind:"camera",interpolationType:ec,interpolationFactor:Interpolate.interpolationFactor.bind(void 0,ec),zoomStops:i.stops.map(function(i){return i[0]}),evaluate:function(F){var N=F.zoom;return s(i,o,N,x,_)}}}(this._parameters,this._specification))};function validateObject(i){var o=i.key,s=i.value,x=i.valueSpec||{},_=i.objectElementValidators||{},F=i.style,N=i.styleSpec,j=[],G=getType(s);if("object"!==G)return[new ValidationError(o,s,"object expected, "+G+" found")];for(var Z in s){var X=Z.split(".")[0],J=x[X]||x["*"],$=void 0;if(_[X])$=_[X];else if(x[X])$=validate;else if(_["*"])$=_["*"];else if(x["*"])$=validate;else{j.push(new ValidationError(o,s[Z],'unknown property "'+Z+'"'));continue}j=j.concat($({key:(o?o+".":o)+Z,value:s[Z],valueSpec:J,style:F,styleSpec:N,object:s,objectKey:Z},s))}for(var ee in x)!_[ee]&&x[ee].required&&void 0===x[ee].default&&void 0===s[ee]&&j.push(new ValidationError(o,s,'missing required property "'+ee+'"'));return j}function validateArray(i){var o=i.value,s=i.valueSpec,x=i.style,_=i.styleSpec,F=i.key,N=i.arrayElementValidator||validate;if("array"!==getType(o))return[new ValidationError(F,o,"array expected, "+getType(o)+" found")];if(s.length&&o.length!==s.length)return[new ValidationError(F,o,"array length "+s.length+" expected, length "+o.length+" found")];if(s["min-length"]&&o.length<s["min-length"])return[new ValidationError(F,o,"array length at least "+s["min-length"]+" expected, length "+o.length+" found")];var j={type:s.value,values:s.values};_.$version<7&&(j.function=s.function),"object"===getType(s.value)&&(j=s.value);for(var G=[],Z=0;Z<o.length;Z++)G=G.concat(N({array:o,arrayIndex:Z,value:o[Z],valueSpec:j,style:x,styleSpec:_,key:F+"["+Z+"]"}));return G}function validateNumber(i){var o=i.key,s=i.value,x=i.valueSpec,_=getType(s);return("number"===_&&s!=s&&(_="NaN"),"number"!==_)?[new ValidationError(o,s,"number expected, "+_+" found")]:"minimum"in x&&s<x.minimum?[new ValidationError(o,s,s+" is less than the minimum value "+x.minimum)]:"maximum"in x&&s>x.maximum?[new ValidationError(o,s,s+" is greater than the maximum value "+x.maximum)]:[]}function validateFunction(i){var o,s,x,_=i.valueSpec,F=unbundle(i.value.type),N={},j="categorical"!==F&&void 0===i.value.property,G="array"===getType(i.value.stops)&&"array"===getType(i.value.stops[0])&&"object"===getType(i.value.stops[0][0]),Z=validateObject({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(i){if("identity"===F)return[new ValidationError(i.key,i.value,'identity function may not have a "stops" property')];var o=[],s=i.value;return o=o.concat(validateArray({key:i.key,value:s,valueSpec:i.valueSpec,style:i.style,styleSpec:i.styleSpec,arrayElementValidator:validateFunctionStop})),"array"===getType(s)&&0===s.length&&o.push(new ValidationError(i.key,s,"array must have at least one stop")),o},default:function(i){return validate({key:i.key,value:i.value,valueSpec:_,style:i.style,styleSpec:i.styleSpec})}}});return"identity"===F&&j&&Z.push(new ValidationError(i.key,i.value,'missing required property "property"')),"identity"===F||i.value.stops||Z.push(new ValidationError(i.key,i.value,'missing required property "stops"')),"exponential"===F&&i.valueSpec.expression&&!supportsInterpolation(i.valueSpec)&&Z.push(new ValidationError(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(j||supportsPropertyExpression(i.valueSpec)?j&&!supportsZoomExpression(i.valueSpec)&&Z.push(new ValidationError(i.key,i.value,"zoom functions not supported")):Z.push(new ValidationError(i.key,i.value,"property functions not supported"))),("categorical"===F||G)&&void 0===i.value.property&&Z.push(new ValidationError(i.key,i.value,'"property" property is required')),Z;function validateFunctionStop(i){var o=[],F=i.value,j=i.key;if("array"!==getType(F))return[new ValidationError(j,F,"array expected, "+getType(F)+" found")];if(2!==F.length)return[new ValidationError(j,F,"array length 2 expected, length "+F.length+" found")];if(G){if("object"!==getType(F[0]))return[new ValidationError(j,F,"object expected, "+getType(F[0])+" found")];if(void 0===F[0].zoom)return[new ValidationError(j,F,"object stop key must have zoom")];if(void 0===F[0].value)return[new ValidationError(j,F,"object stop key must have value")];if(x&&x>unbundle(F[0].zoom))return[new ValidationError(j,F[0].zoom,"stop zoom values must appear in ascending order")];unbundle(F[0].zoom)!==x&&(x=unbundle(F[0].zoom),s=void 0,N={}),o=o.concat(validateObject({key:j+"[0]",value:F[0],valueSpec:{zoom:{}},style:i.style,styleSpec:i.styleSpec,objectElementValidators:{zoom:validateNumber,value:validateStopDomainValue}}))}else o=o.concat(validateStopDomainValue({key:j+"[0]",value:F[0],valueSpec:{},style:i.style,styleSpec:i.styleSpec},F));return isExpression(deepUnbundle(F[1]))?o.concat([new ValidationError(j+"[1]",F[1],"expressions are not allowed in function stops.")]):o.concat(validate({key:j+"[1]",value:F[1],valueSpec:_,style:i.style,styleSpec:i.styleSpec}))}function validateStopDomainValue(i,x){var j=getType(i.value),G=unbundle(i.value),Z=null!==i.value?i.value:x;if(o){if(j!==o)return[new ValidationError(i.key,Z,j+" stop domain type must match previous stop domain type "+o)]}else o=j;if("number"!==j&&"string"!==j&&"boolean"!==j)return[new ValidationError(i.key,Z,"stop domain value must be a number, string, or boolean")];if("number"!==j&&"categorical"!==F){var X="number expected, "+j+" found";return supportsPropertyExpression(_)&&void 0===F&&(X+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ValidationError(i.key,Z,X)]}return"categorical"!==F||"number"!==j||isFinite(G)&&Math.floor(G)===G?"categorical"!==F&&"number"===j&&void 0!==s&&G<s?[new ValidationError(i.key,Z,"stop domain values must appear in ascending order")]:(s=G,"categorical"===F&&G in N)?[new ValidationError(i.key,Z,"stop domain values must be unique")]:(N[G]=!0,[]):[new ValidationError(i.key,Z,"integer expected, found "+G)]}}function validateExpression(i){var o=("property"===i.expressionContext?createPropertyExpression:createExpression)(deepUnbundle(i.value),i.valueSpec);if("error"===o.result)return o.value.map(function(o){return new ValidationError(""+i.key+o.key,i.value,o.message)});var s=o.value.expression||o.value._styleExpression.expression;if("property"===i.expressionContext&&"text-font"===i.propertyKey&&!s.outputDefined())return[new ValidationError(i.key,i.value,'Invalid data expression for "'+i.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===i.expressionContext&&"layout"===i.propertyType&&!isStateConstant(s))return[new ValidationError(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===i.expressionContext&&!isStateConstant(s))return[new ValidationError(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&0===i.expressionContext.indexOf("cluster")){if(!isGlobalPropertyConstant(s,["zoom","feature-state"]))return[new ValidationError(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===i.expressionContext&&!isFeatureConstant(s))return[new ValidationError(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function validateEnum(i){var o=i.key,s=i.value,x=i.valueSpec,_=[];return Array.isArray(x.values)?-1===x.values.indexOf(unbundle(s))&&_.push(new ValidationError(o,s,"expected one of ["+x.values.join(", ")+"], "+JSON.stringify(s)+" found")):-1===Object.keys(x.values).indexOf(unbundle(s))&&_.push(new ValidationError(o,s,"expected one of ["+Object.keys(x.values).join(", ")+"], "+JSON.stringify(s)+" found")),_}function isExpressionFilter(i){if(!0===i||!1===i)return!0;if(!Array.isArray(i)||0===i.length)return!1;switch(i[0]){case"has":return i.length>=2&&"$id"!==i[1]&&"$type"!==i[1];case"in":return i.length>=3&&("string"!=typeof i[1]||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==i.length||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(var o=0,s=i.slice(1);o<s.length;o+=1){var x=s[o];if(!isExpressionFilter(x)&&"boolean"!=typeof x)return!1}return!0;default:return!0}}StylePropertyFunction.deserialize=function(i){return new StylePropertyFunction(i._parameters,i._specification)},StylePropertyFunction.serialize=function(i){return{_parameters:i._parameters,_specification:i._specification}};var tr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function createFilter(i){if(null==i)return{filter:function(){return!0},needGeometry:!1};isExpressionFilter(i)||(i=function convertFilter(i){if(!i)return!0;var o=i[0];return i.length<=1?"any"!==o:"=="===o?convertComparisonOp(i[1],i[2],"=="):"!="===o?convertNegation(convertComparisonOp(i[1],i[2],"==")):"<"===o||">"===o||"<="===o||">="===o?convertComparisonOp(i[1],i[2],o):"any"===o?["any"].concat(i.slice(1).map(convertFilter)):"all"===o?["all"].concat(i.slice(1).map(convertFilter)):"none"===o?["all"].concat(i.slice(1).map(convertFilter).map(convertNegation)):"in"===o?convertInOp(i[1],i.slice(2)):"!in"===o?convertNegation(convertInOp(i[1],i.slice(2))):"has"===o?convertHasOp(i[1]):"!has"===o?convertNegation(convertHasOp(i[1])):"within"!==o||i}(i));var o=createExpression(i,tr);if("error"!==o.result)return{filter:function(i,s,x){return o.value.evaluate(i,s,{},x)},needGeometry:function geometryNeeded(i){if(!Array.isArray(i))return!1;if("within"===i[0])return!0;for(var o=1;o<i.length;o++)if(geometryNeeded(i[o]))return!0;return!1}(i)};throw Error(o.value.map(function(i){return i.key+": "+i.message}).join(", "))}function compare(i,o){return i<o?-1:i>o?1:0}function convertComparisonOp(i,o,s){switch(i){case"$type":return["filter-type-"+s,o];case"$id":return["filter-id-"+s,o];default:return["filter-"+s,i,o]}}function convertInOp(i,o){if(0===o.length)return!1;switch(i){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:if(o.length>200&&!o.some(function(i){return typeof i!=typeof o[0]}))return["filter-in-large",i,["literal",o.sort(compare)]];return["filter-in-small",i,["literal",o]]}}function convertHasOp(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function convertNegation(i){return["!",i]}function validateFilter(i){return isExpressionFilter(deepUnbundle(i.value))?validateExpression(extend$1({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function validateNonExpressionFilter(i){var o,s=i.value,x=i.key;if("array"!==getType(s))return[new ValidationError(x,s,"array expected, "+getType(s)+" found")];var _=i.styleSpec,F=[];if(s.length<1)return[new ValidationError(x,s,"filter array must have at least 1 element")];switch(F=F.concat(validateEnum({key:x+"[0]",value:s[0],valueSpec:_.filter_operator,style:i.style,styleSpec:i.styleSpec})),unbundle(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===unbundle(s[1])&&F.push(new ValidationError(x,s,'"$type" cannot be use with operator "'+s[0]+'"'));case"==":case"!=":3!==s.length&&F.push(new ValidationError(x,s,'filter array for operator "'+s[0]+'" must have 3 elements'));case"in":case"!in":s.length>=2&&"string"!==(o=getType(s[1]))&&F.push(new ValidationError(x+"[1]",s[1],"string expected, "+o+" found"));for(var N=2;N<s.length;N++)o=getType(s[N]),"$type"===unbundle(s[1])?F=F.concat(validateEnum({key:x+"["+N+"]",value:s[N],valueSpec:_.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&F.push(new ValidationError(x+"["+N+"]",s[N],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var j=1;j<s.length;j++)F=F.concat(validateNonExpressionFilter({key:x+"["+j+"]",value:s[j],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":o=getType(s[1]),2!==s.length?F.push(new ValidationError(x,s,'filter array for "'+s[0]+'" operator must have 2 elements')):"string"!==o&&F.push(new ValidationError(x+"[1]",s[1],"string expected, "+o+" found"));break;case"within":o=getType(s[1]),2!==s.length?F.push(new ValidationError(x,s,'filter array for "'+s[0]+'" operator must have 2 elements')):"object"!==o&&F.push(new ValidationError(x+"[1]",s[1],"object expected, "+o+" found"))}return F}(i)}function validateProperty(i,o){var s,x=i.key,_=i.style,F=i.styleSpec,N=i.value,j=i.objectKey,G=F[o+"_"+i.layerType];if(!G)return[];var Z=j.match(/^(.*)-transition$/);if("paint"===o&&Z&&G[Z[1]]&&G[Z[1]].transition)return validate({key:x,value:N,valueSpec:F.transition,style:_,styleSpec:F});var X=i.valueSpec||G[j];if(!X)return[new ValidationError(x,N,'unknown property "'+j+'"')];if("string"===getType(N)&&supportsPropertyExpression(X)&&!X.tokens&&(s=/^{([^}]+)}$/.exec(N)))return[new ValidationError(x,N,'"'+j+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(s[1])+" }`.")];var J=[];return"symbol"===i.layerType&&("text-field"===j&&_&&!_.glyphs&&J.push(new ValidationError(x,N,'use of "text-field" requires a style "glyphs" property')),"text-font"===j&&isFunction(deepUnbundle(N))&&"identity"===unbundle(N.type)&&J.push(new ValidationError(x,N,'"text-font" does not support identity functions'))),J.concat(validate({key:i.key,value:N,valueSpec:X,style:_,styleSpec:F,expressionContext:"property",propertyType:o,propertyKey:j}))}function validatePaintProperty(i){return validateProperty(i,"paint")}function validateLayoutProperty(i){return validateProperty(i,"layout")}function validateLayer(i){var o,s=[],x=i.value,_=i.key,F=i.style,N=i.styleSpec;x.type||x.ref||s.push(new ValidationError(_,x,'either "type" or "ref" is required'));var j=unbundle(x.type),G=unbundle(x.ref);if(x.id)for(var Z=unbundle(x.id),X=0;X<i.arrayIndex;X++){var J=F.layers[X];unbundle(J.id)===Z&&s.push(new ValidationError(_,x.id,'duplicate layer id "'+x.id+'", previously used at line '+J.id.__line__))}if("ref"in x)["type","source","source-layer","filter","layout"].forEach(function(i){i in x&&s.push(new ValidationError(_,x[i],'"'+i+'" is prohibited for ref layers'))}),F.layers.forEach(function(i){unbundle(i.id)===G&&(o=i)}),o?o.ref?s.push(new ValidationError(_,x.ref,"ref cannot reference another ref layer")):j=unbundle(o.type):s.push(new ValidationError(_,x.ref,'ref layer "'+G+'" not found'));else if("background"!==j){if(x.source){var $=F.sources&&F.sources[x.source],ee=$&&unbundle($.type);$?"vector"===ee&&"raster"===j?s.push(new ValidationError(_,x.source,'layer "'+x.id+'" requires a raster source')):"raster"===ee&&"raster"!==j?s.push(new ValidationError(_,x.source,'layer "'+x.id+'" requires a vector source')):"vector"!==ee||x["source-layer"]?"raster-dem"===ee&&"hillshade"!==j?s.push(new ValidationError(_,x.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===j&&x.paint&&x.paint["line-gradient"]&&("geojson"!==ee||!$.lineMetrics)&&s.push(new ValidationError(_,x,'layer "'+x.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):s.push(new ValidationError(_,x,'layer "'+x.id+'" must specify a "source-layer"')):s.push(new ValidationError(_,x.source,'source "'+x.source+'" not found'))}else s.push(new ValidationError(_,x,'missing required property "source"'))}return s=s.concat(validateObject({key:_,value:x,valueSpec:N.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return validate({key:_+".type",value:x.type,valueSpec:N.layer.type,style:i.style,styleSpec:i.styleSpec,object:x,objectKey:"type"})},filter:validateFilter,layout:function(i){return validateObject({layer:x,key:i.key,value:i.value,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(i){return validateLayoutProperty(extend$1({layerType:j},i))}}})},paint:function(i){return validateObject({layer:x,key:i.key,value:i.value,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(i){return validatePaintProperty(extend$1({layerType:j},i))}}})}}}))}function validateString(i){var o=i.value,s=i.key,x=getType(o);return"string"!==x?[new ValidationError(s,o,"string expected, "+x+" found")]:[]}var tn={promoteId:function(i){var o=i.key,s=i.value;if("string"===getType(s))return validateString({key:o,value:s});var x=[];for(var _ in s)x.push.apply(x,validateString({key:o+"."+_,value:s[_]}));return x}};function validateSource(i){var o,s=i.value,x=i.key,_=i.styleSpec,F=i.style;if(!s.type)return[new ValidationError(x,s,'"type" is required')];var N=unbundle(s.type);switch(N){case"vector":case"raster":case"raster-dem":return validateObject({key:x,value:s,valueSpec:_["source_"+N.replace("-","_")],style:i.style,styleSpec:_,objectElementValidators:tn});case"geojson":if(o=validateObject({key:x,value:s,valueSpec:_.source_geojson,style:F,styleSpec:_,objectElementValidators:tn}),s.cluster)for(var j in s.clusterProperties){var G=s.clusterProperties[j],Z=G[0],X=G[1],J="string"==typeof Z?[Z,["accumulated"],["get",j]]:Z;o.push.apply(o,validateExpression({key:x+"."+j+".map",value:X,expressionContext:"cluster-map"})),o.push.apply(o,validateExpression({key:x+"."+j+".reduce",value:J,expressionContext:"cluster-reduce"}))}return o;case"video":return validateObject({key:x,value:s,valueSpec:_.source_video,style:F,styleSpec:_});case"image":return validateObject({key:x,value:s,valueSpec:_.source_image,style:F,styleSpec:_});case"canvas":return[new ValidationError(x,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return validateEnum({key:x+".type",value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:F,styleSpec:_})}}function validateLight(i){var o=i.value,s=i.styleSpec,x=s.light,_=i.style,F=[],N=getType(o);if(void 0===o)return F;if("object"!==N)return F.concat([new ValidationError("light",o,"object expected, "+N+" found")]);for(var j in o){var G=j.match(/^(.*)-transition$/);F=G&&x[G[1]]&&x[G[1]].transition?F.concat(validate({key:j,value:o[j],valueSpec:s.transition,style:_,styleSpec:s})):x[j]?F.concat(validate({key:j,value:o[j],valueSpec:x[j],style:_,styleSpec:s})):F.concat([new ValidationError(j,o[j],'unknown property "'+j+'"')])}return F}var ti={"*":function(){return[]},array:validateArray,boolean:function(i){var o=i.value,s=i.key,x=getType(o);return"boolean"!==x?[new ValidationError(s,o,"boolean expected, "+x+" found")]:[]},number:validateNumber,color:function(i){var o=i.key,s=i.value,x=getType(s);return"string"!==x?[new ValidationError(o,s,"color expected, "+x+" found")]:null===eG(s)?[new ValidationError(o,s,'color expected, "'+s+'" found')]:[]},constants:validateConstants,enum:validateEnum,filter:validateFilter,function:validateFunction,layer:validateLayer,object:validateObject,source:validateSource,light:validateLight,string:validateString,formatted:function(i){return 0===validateString(i).length?[]:validateExpression(i)},resolvedImage:function(i){return 0===validateString(i).length?[]:validateExpression(i)}};function validate(i){var o=i.value,s=i.valueSpec,x=i.styleSpec;return s.expression&&isFunction(unbundle(o))?validateFunction(i):s.expression&&isExpression(deepUnbundle(o))?validateExpression(i):s.type&&ti[s.type]?ti[s.type](i):validateObject(extend$1({},i,{valueSpec:s.type?x[s.type]:s}))}function validateGlyphsURL(i){var o=i.value,s=i.key,x=validateString(i);return x.length||(-1===o.indexOf("{fontstack}")&&x.push(new ValidationError(s,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&x.push(new ValidationError(s,o,'"glyphs" url must include a "{range}" token'))),x}function validateStyleMin(i,o){void 0===o&&(o=eP);var s=[];return s=s.concat(validate({key:"",value:i,valueSpec:o.$root,styleSpec:o,style:i,objectElementValidators:{glyphs:validateGlyphsURL,"*":function(){return[]}}})),i.constants&&(s=s.concat(validateConstants({key:"constants",value:i.constants,style:i,styleSpec:o}))),sortErrors(s)}function sortErrors(i){return[].concat(i).sort(function(i,o){return i.line-o.line})}function wrapCleanErrors(i){return function(){for(var o=[],s=arguments.length;s--;)o[s]=arguments[s];return sortErrors(i.apply(this,o))}}validateStyleMin.source=wrapCleanErrors(validateSource),validateStyleMin.light=wrapCleanErrors(validateLight),validateStyleMin.layer=wrapCleanErrors(validateLayer),validateStyleMin.filter=wrapCleanErrors(validateFilter),validateStyleMin.paintProperty=wrapCleanErrors(validatePaintProperty),validateStyleMin.layoutProperty=wrapCleanErrors(validateLayoutProperty);var ta=validateStyleMin.light,to=validateStyleMin.paintProperty,ts=validateStyleMin.layoutProperty;function emitValidationErrors(i,o){var s=!1;if(o&&o.length)for(var x=0;x<o.length;x+=1){var _=o[x];i.fire(new eL(Error(_.message))),s=!0}return s}function GridIndex(i,o,s){var x=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var _=new Int32Array(this.arrayBuffer);i=_[0],o=_[1],s=_[2],this.d=o+2*s;for(var F=0;F<this.d*this.d;F++){var N=_[3+F],j=_[3+F+1];x.push(N===j?null:_.subarray(N,j))}var G=_[3+x.length],Z=_[3+x.length+1];this.keys=_.subarray(G,Z),this.bboxes=_.subarray(Z),this.insert=this._insertReadonly}else{this.d=o+2*s;for(var X=0;X<this.d*this.d;X++)x.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=s,this.scale=o/i,this.uid=0;var J=s/o*i;this.min=-J,this.max=i+J}GridIndex.prototype.insert=function(i,o,s,x,_){this._forEachCell(o,s,x,_,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(s),this.bboxes.push(x),this.bboxes.push(_)},GridIndex.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},GridIndex.prototype._insertCell=function(i,o,s,x,_,F){this.cells[_].push(F)},GridIndex.prototype.query=function(i,o,s,x,_){var F=this.min,N=this.max;if(i<=F&&o<=F&&N<=s&&N<=x&&!_)return Array.prototype.slice.call(this.keys);var j=[];return this._forEachCell(i,o,s,x,this._queryCell,j,{},_),j},GridIndex.prototype._queryCell=function(i,o,s,x,_,F,N,j){var G=this.cells[_];if(null!==G)for(var Z=this.keys,X=this.bboxes,J=0;J<G.length;J++){var $=G[J];if(void 0===N[$]){var ee=4*$;(j?j(X[ee+0],X[ee+1],X[ee+2],X[ee+3]):i<=X[ee+2]&&o<=X[ee+3]&&s>=X[ee+0]&&x>=X[ee+1])?(N[$]=!0,F.push(Z[$])):N[$]=!1}}},GridIndex.prototype._forEachCell=function(i,o,s,x,_,F,N,j){for(var G=this._convertToCellCoord(i),Z=this._convertToCellCoord(o),X=this._convertToCellCoord(s),J=this._convertToCellCoord(x),$=G;$<=X;$++)for(var ee=Z;ee<=J;ee++){var et=this.d*ee+$;if((!j||j(this._convertFromCellCoord($),this._convertFromCellCoord(ee),this._convertFromCellCoord($+1),this._convertFromCellCoord(ee+1)))&&_.call(this,i,o,s,x,et,F,N,j))return}},GridIndex.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},GridIndex.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},GridIndex.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,o=3+this.cells.length+1+1,s=0,x=0;x<this.cells.length;x++)s+=this.cells[x].length;var _=new Int32Array(o+s+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var F=o,N=0;N<i.length;N++){var j=i[N];_[3+N]=F,_.set(j,F),F+=j.length}return _[3+i.length]=F,_.set(this.keys,F),F+=this.keys.length,_[3+i.length+1]=F,_.set(this.bboxes,F),F+=this.bboxes.length,_.buffer};var tl=self.ImageData,tc=self.ImageBitmap,tu={};function register(i,o,s){void 0===s&&(s={}),Object.defineProperty(o,"_classRegistryKey",{value:i,writeable:!1}),tu[i]={klass:o,omit:s.omit||[],shallow:s.shallow||[]}}for(var tf in register("Object",Object),GridIndex.serialize=function(i,o){var s=i.toArrayBuffer();return o&&o.push(s),{buffer:s}},GridIndex.deserialize=function(i){return new GridIndex(i.buffer)},register("Grid",GridIndex),register("Color",Color),register("Error",Error),register("ResolvedImage",ResolvedImage),register("StylePropertyFunction",StylePropertyFunction),register("StyleExpression",StyleExpression,{omit:["_evaluator"]}),register("ZoomDependentExpression",ZoomDependentExpression),register("ZoomConstantExpression",ZoomConstantExpression),register("CompoundExpression",CompoundExpression,{omit:["_evaluate"]}),tt)tt[tf]._classRegistryKey||register("Expression_"+tf,tt[tf]);function isArrayBuffer(i){return i&&"undefined"!=typeof ArrayBuffer&&(i instanceof ArrayBuffer||i.constructor&&"ArrayBuffer"===i.constructor.name)}function isImageBitmap(i){return tc&&i instanceof tc}function serialize(i,o){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(isArrayBuffer(i)||isImageBitmap(i))return o&&o.push(i),i;if(ArrayBuffer.isView(i))return o&&o.push(i.buffer),i;if(i instanceof tl)return o&&o.push(i.data.buffer),i;if(Array.isArray(i)){for(var s=[],x=0;x<i.length;x+=1){var _=i[x];s.push(serialize(_,o))}return s}if("object"==typeof i){var F=i.constructor,N=F._classRegistryKey;if(!N)throw Error("can't serialize object of unregistered class");var j=F.serialize?F.serialize(i,o):{};if(!F.serialize){for(var G in i)if(!(!i.hasOwnProperty(G)||tu[N].omit.indexOf(G)>=0)){var Z=i[G];j[G]=tu[N].shallow.indexOf(G)>=0?Z:serialize(Z,o)}i instanceof Error&&(j.message=i.message)}if(j.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==N&&(j.$name=N),j}throw Error("can't serialize object of type "+typeof i)}function deserialize(i){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||isArrayBuffer(i)||isImageBitmap(i)||ArrayBuffer.isView(i)||i instanceof tl)return i;if(Array.isArray(i))return i.map(deserialize);if("object"==typeof i){var o=i.$name||"Object",s=tu[o].klass;if(!s)throw Error("can't deserialize unregistered class "+o);if(s.deserialize)return s.deserialize(i);for(var x=Object.create(s.prototype),_=0,F=Object.keys(i);_<F.length;_+=1){var N=F[_];if("$name"!==N){var j=i[N];x[N]=tu[o].shallow.indexOf(N)>=0?j:deserialize(j)}}return x}throw Error("can't deserialize object of type "+typeof i)}var ZoomHistory=function(){this.first=!0};ZoomHistory.prototype.update=function(i,o){var s=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=o),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=s,!0))};var th={"Latin-1 Supplement":function(i){return i>=128&&i<=255},Arabic:function(i){return i>=1536&&i<=1791},"Arabic Supplement":function(i){return i>=1872&&i<=1919},"Arabic Extended-A":function(i){return i>=2208&&i<=2303},"Hangul Jamo":function(i){return i>=4352&&i<=4607},"Unified Canadian Aboriginal Syllabics":function(i){return i>=5120&&i<=5759},Khmer:function(i){return i>=6016&&i<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(i){return i>=6320&&i<=6399},"General Punctuation":function(i){return i>=8192&&i<=8303},"Letterlike Symbols":function(i){return i>=8448&&i<=8527},"Number Forms":function(i){return i>=8528&&i<=8591},"Miscellaneous Technical":function(i){return i>=8960&&i<=9215},"Control Pictures":function(i){return i>=9216&&i<=9279},"Optical Character Recognition":function(i){return i>=9280&&i<=9311},"Enclosed Alphanumerics":function(i){return i>=9312&&i<=9471},"Geometric Shapes":function(i){return i>=9632&&i<=9727},"Miscellaneous Symbols":function(i){return i>=9728&&i<=9983},"Miscellaneous Symbols and Arrows":function(i){return i>=11008&&i<=11263},"CJK Radicals Supplement":function(i){return i>=11904&&i<=12031},"Kangxi Radicals":function(i){return i>=12032&&i<=12255},"Ideographic Description Characters":function(i){return i>=12272&&i<=12287},"CJK Symbols and Punctuation":function(i){return i>=12288&&i<=12351},Hiragana:function(i){return i>=12352&&i<=12447},Katakana:function(i){return i>=12448&&i<=12543},Bopomofo:function(i){return i>=12544&&i<=12591},"Hangul Compatibility Jamo":function(i){return i>=12592&&i<=12687},Kanbun:function(i){return i>=12688&&i<=12703},"Bopomofo Extended":function(i){return i>=12704&&i<=12735},"CJK Strokes":function(i){return i>=12736&&i<=12783},"Katakana Phonetic Extensions":function(i){return i>=12784&&i<=12799},"Enclosed CJK Letters and Months":function(i){return i>=12800&&i<=13055},"CJK Compatibility":function(i){return i>=13056&&i<=13311},"CJK Unified Ideographs Extension A":function(i){return i>=13312&&i<=19903},"Yijing Hexagram Symbols":function(i){return i>=19904&&i<=19967},"CJK Unified Ideographs":function(i){return i>=19968&&i<=40959},"Yi Syllables":function(i){return i>=40960&&i<=42127},"Yi Radicals":function(i){return i>=42128&&i<=42191},"Hangul Jamo Extended-A":function(i){return i>=43360&&i<=43391},"Hangul Syllables":function(i){return i>=44032&&i<=55215},"Hangul Jamo Extended-B":function(i){return i>=55216&&i<=55295},"Private Use Area":function(i){return i>=57344&&i<=63743},"CJK Compatibility Ideographs":function(i){return i>=63744&&i<=64255},"Arabic Presentation Forms-A":function(i){return i>=64336&&i<=65023},"Vertical Forms":function(i){return i>=65040&&i<=65055},"CJK Compatibility Forms":function(i){return i>=65072&&i<=65103},"Small Form Variants":function(i){return i>=65104&&i<=65135},"Arabic Presentation Forms-B":function(i){return i>=65136&&i<=65279},"Halfwidth and Fullwidth Forms":function(i){return i>=65280&&i<=65519}};function allowsVerticalWritingMode(i){for(var o=0;o<i.length;o+=1)if(charHasUprightVerticalOrientation(i[o].charCodeAt(0)))return!0;return!1}function charHasUprightVerticalOrientation(i){return 746===i||747===i||!(i<4352)&&!!(th["Bopomofo Extended"](i)||th.Bopomofo(i)||th["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||th["CJK Compatibility Ideographs"](i)||th["CJK Compatibility"](i)||th["CJK Radicals Supplement"](i)||th["CJK Strokes"](i)||th["CJK Symbols and Punctuation"](i)&&!(i>=12296&&i<=12305)&&!(i>=12308&&i<=12319)&&12336!==i||th["CJK Unified Ideographs Extension A"](i)||th["CJK Unified Ideographs"](i)||th["Enclosed CJK Letters and Months"](i)||th["Hangul Compatibility Jamo"](i)||th["Hangul Jamo Extended-A"](i)||th["Hangul Jamo Extended-B"](i)||th["Hangul Jamo"](i)||th["Hangul Syllables"](i)||th.Hiragana(i)||th["Ideographic Description Characters"](i)||th.Kanbun(i)||th["Kangxi Radicals"](i)||th["Katakana Phonetic Extensions"](i)||th.Katakana(i)&&12540!==i||th["Halfwidth and Fullwidth Forms"](i)&&65288!==i&&65289!==i&&65293!==i&&!(i>=65306&&i<=65310)&&65339!==i&&65341!==i&&65343!==i&&!(i>=65371&&i<=65503)&&65507!==i&&!(i>=65512&&i<=65519)||th["Small Form Variants"](i)&&!(i>=65112&&i<=65118)&&!(i>=65123&&i<=65126)||th["Unified Canadian Aboriginal Syllabics"](i)||th["Unified Canadian Aboriginal Syllabics Extended"](i)||th["Vertical Forms"](i)||th["Yijing Hexagram Symbols"](i)||th["Yi Syllables"](i)||th["Yi Radicals"](i))}function charHasRotatedVerticalOrientation(i){return!(charHasUprightVerticalOrientation(i)||th["Latin-1 Supplement"](i)&&(167===i||169===i||174===i||177===i||188===i||189===i||190===i||215===i||247===i)||th["General Punctuation"](i)&&(8214===i||8224===i||8225===i||8240===i||8241===i||8251===i||8252===i||8258===i||8263===i||8264===i||8265===i||8273===i)||th["Letterlike Symbols"](i)||th["Number Forms"](i)||th["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||9003===i||i>=9085&&i<=9114||i>=9150&&i<=9165||9167===i||i>=9169&&i<=9179||i>=9186&&i<=9215)||th["Control Pictures"](i)&&9251!==i||th["Optical Character Recognition"](i)||th["Enclosed Alphanumerics"](i)||th["Geometric Shapes"](i)||th["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||th["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||th["CJK Symbols and Punctuation"](i)||th.Katakana(i)||th["Private Use Area"](i)||th["CJK Compatibility Forms"](i)||th["Small Form Variants"](i)||th["Halfwidth and Fullwidth Forms"](i)||8734===i||8756===i||8757===i||i>=9984&&i<=10087||i>=10102&&i<=10131||65532===i||65533===i)}function charInRTLScript(i){return i>=1424&&i<=2303||th["Arabic Presentation Forms-A"](i)||th["Arabic Presentation Forms-B"](i)}var td={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},tp=null,tg=td.unavailable,tm=null,triggerPluginCompletionEvent=function(i){i&&"string"==typeof i&&i.indexOf("NetworkError")>-1&&(tg=td.error),tp&&tp(i)};function sendPluginStateToWorker(){ty.fire(new Event("pluginStateChange",{pluginStatus:tg,pluginURL:tm}))}var ty=new Evented,getRTLTextPluginStatus=function(){return tg},downloadRTLTextPlugin=function(){if(tg!==td.deferred||!tm)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tg=td.loading,sendPluginStateToWorker(),tm&&getArrayBuffer({url:tm},function(i){i?triggerPluginCompletionEvent(i):(tg=td.loaded,sendPluginStateToWorker())})},tv={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tg===td.loaded||null!=tv.applyArabicShaping},isLoading:function(){return tg===td.loading},setState:function(i){tg=i.pluginStatus,tm=i.pluginURL},isParsed:function(){return null!=tv.applyArabicShaping&&null!=tv.processBidirectionalText&&null!=tv.processStyledBidirectionalText},getPluginURL:function(){return tm}},lazyLoadRTLTextPlugin=function(){tv.isLoading()||tv.isLoaded()||"deferred"!==getRTLTextPluginStatus()||downloadRTLTextPlugin()},EvaluationParameters=function(i,o){this.zoom=i,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ZoomHistory,this.transition={})};EvaluationParameters.prototype.isSupportedScript=function(i){return function(i,o){for(var s,x=0;x<i.length;x+=1)if(s=i[x].charCodeAt(0),!o&&charInRTLScript(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||th.Khmer(s))return!1;return!0}(i,tv.isLoaded())},EvaluationParameters.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},EvaluationParameters.prototype.getCrossfadeParameters=function(){var i=this.zoom,o=i-Math.floor(i),s=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*o}};var PropertyValue=function(i,o){this.property=i,this.value=o,this.expression=function(i,o){if(isFunction(i))return new StylePropertyFunction(i,o);if(isExpression(i)){var s=createPropertyExpression(i,o);if("error"===s.result)throw Error(s.value.map(function(i){return i.key+": "+i.message}).join(", "));return s.value}var x=i;return"string"==typeof i&&"color"===o.type&&(x=Color.parse(i)),{kind:"constant",evaluate:function(){return x}}}(void 0===o?i.specification.default:o,i.specification)};PropertyValue.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},PropertyValue.prototype.possiblyEvaluate=function(i,o,s){return this.property.possiblyEvaluate(this,i,o,s)};var TransitionablePropertyValue=function(i){this.property=i,this.value=new PropertyValue(i,void 0)};TransitionablePropertyValue.prototype.transitioned=function(i,o){return new TransitioningPropertyValue(this.property,this.value,o,extend({},i.transition,this.transition),i.now)},TransitionablePropertyValue.prototype.untransitioned=function(){return new TransitioningPropertyValue(this.property,this.value,null,{},0)};var Transitionable=function(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)};Transitionable.prototype.getValue=function(i){return clone(this._values[i].value.value)},Transitionable.prototype.setValue=function(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new TransitionablePropertyValue(this._values[i].property)),this._values[i].value=new PropertyValue(this._values[i].property,null===o?void 0:clone(o))},Transitionable.prototype.getTransition=function(i){return clone(this._values[i].transition)},Transitionable.prototype.setTransition=function(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new TransitionablePropertyValue(this._values[i].property)),this._values[i].transition=clone(o)||void 0},Transitionable.prototype.serialize=function(){for(var i={},o=0,s=Object.keys(this._values);o<s.length;o+=1){var x=s[o],_=this.getValue(x);void 0!==_&&(i[x]=_);var F=this.getTransition(x);void 0!==F&&(i[x+"-transition"]=F)}return i},Transitionable.prototype.transitioned=function(i,o){for(var s=new Transitioning(this._properties),x=0,_=Object.keys(this._values);x<_.length;x+=1){var F=_[x];s._values[F]=this._values[F].transitioned(i,o._values[F])}return s},Transitionable.prototype.untransitioned=function(){for(var i=new Transitioning(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var x=s[o];i._values[x]=this._values[x].untransitioned()}return i};var TransitioningPropertyValue=function(i,o,s,x,_){this.property=i,this.value=o,this.begin=_+x.delay||0,this.end=this.begin+x.duration||0,i.specification.transition&&(x.delay||x.duration)&&(this.prior=s)};TransitioningPropertyValue.prototype.possiblyEvaluate=function(i,o,s){var x=i.now||0,_=this.value.possiblyEvaluate(i,o,s),F=this.prior;if(!F)return _;if(x>this.end||this.value.isDataDriven())return this.prior=null,_;if(x<this.begin)return F.possiblyEvaluate(i,o,s);var N=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(F.possiblyEvaluate(i,o,s),_,function(i){if(i<=0)return 0;if(i>=1)return 1;var o=i*i,s=o*i;return 4*(i<.5?s:3*(i-o)+s-.75)}(N))};var Transitioning=function(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)};Transitioning.prototype.possiblyEvaluate=function(i,o,s){for(var x=new PossiblyEvaluated(this._properties),_=0,F=Object.keys(this._values);_<F.length;_+=1){var N=F[_];x._values[N]=this._values[N].possiblyEvaluate(i,o,s)}return x},Transitioning.prototype.hasTransition=function(){for(var i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];if(this._values[s].prior)return!0}return!1};var Layout=function(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)};Layout.prototype.getValue=function(i){return clone(this._values[i].value)},Layout.prototype.setValue=function(i,o){this._values[i]=new PropertyValue(this._values[i].property,null===o?void 0:clone(o))},Layout.prototype.serialize=function(){for(var i={},o=0,s=Object.keys(this._values);o<s.length;o+=1){var x=s[o],_=this.getValue(x);void 0!==_&&(i[x]=_)}return i},Layout.prototype.possiblyEvaluate=function(i,o,s){for(var x=new PossiblyEvaluated(this._properties),_=0,F=Object.keys(this._values);_<F.length;_+=1){var N=F[_];x._values[N]=this._values[N].possiblyEvaluate(i,o,s)}return x};var PossiblyEvaluatedPropertyValue=function(i,o,s){this.property=i,this.value=o,this.parameters=s};PossiblyEvaluatedPropertyValue.prototype.isConstant=function(){return"constant"===this.value.kind},PossiblyEvaluatedPropertyValue.prototype.constantOr=function(i){return"constant"===this.value.kind?this.value.value:i},PossiblyEvaluatedPropertyValue.prototype.evaluate=function(i,o,s,x){return this.property.evaluate(this.value,this.parameters,i,o,s,x)};var PossiblyEvaluated=function(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)};PossiblyEvaluated.prototype.get=function(i){return this._values[i]};var DataConstantProperty=function(i){this.specification=i};DataConstantProperty.prototype.possiblyEvaluate=function(i,o){return i.expression.evaluate(o)},DataConstantProperty.prototype.interpolate=function(i,o,s){var x=eX[this.specification.type];return x?x(i,o,s):i};var DataDrivenProperty=function(i,o){this.specification=i,this.overrides=o};DataDrivenProperty.prototype.possiblyEvaluate=function(i,o,s,x){return"constant"===i.expression.kind||"camera"===i.expression.kind?new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:i.expression.evaluate(o,null,{},s,x)},o):new PossiblyEvaluatedPropertyValue(this,i.expression,o)},DataDrivenProperty.prototype.interpolate=function(i,o,s){if("constant"!==i.value.kind||"constant"!==o.value.kind)return i;if(void 0===i.value.value||void 0===o.value.value)return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:void 0},i.parameters);var x=eX[this.specification.type];return x?new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:x(i.value.value,o.value.value,s)},i.parameters):i},DataDrivenProperty.prototype.evaluate=function(i,o,s,x,_,F){return"constant"===i.kind?i.value:i.evaluate(o,s,x,_,F)};var tx=function(i){function CrossFadedDataDrivenProperty(){i.apply(this,arguments)}return i&&(CrossFadedDataDrivenProperty.__proto__=i),CrossFadedDataDrivenProperty.prototype=Object.create(i&&i.prototype),CrossFadedDataDrivenProperty.prototype.constructor=CrossFadedDataDrivenProperty,CrossFadedDataDrivenProperty.prototype.possiblyEvaluate=function(i,o,s,x){if(void 0===i.value)return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:void 0},o);if("constant"===i.expression.kind){var _=i.expression.evaluate(o,null,{},s,x),F="resolvedImage"===i.property.specification.type&&"string"!=typeof _?_.name:_,N=this._calculate(F,F,F,o);return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:N},o)}if("camera"!==i.expression.kind)return new PossiblyEvaluatedPropertyValue(this,i.expression,o);var j=this._calculate(i.expression.evaluate({zoom:o.zoom-1}),i.expression.evaluate({zoom:o.zoom}),i.expression.evaluate({zoom:o.zoom+1}),o);return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:j},o)},CrossFadedDataDrivenProperty.prototype.evaluate=function(i,o,s,x,_,F){if("source"===i.kind){var N=i.evaluate(o,s,x,_,F);return this._calculate(N,N,N,o)}return"composite"===i.kind?this._calculate(i.evaluate({zoom:Math.floor(o.zoom)-1},s,x),i.evaluate({zoom:Math.floor(o.zoom)},s,x),i.evaluate({zoom:Math.floor(o.zoom)+1},s,x),o):i.value},CrossFadedDataDrivenProperty.prototype._calculate=function(i,o,s,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:s,to:o}},CrossFadedDataDrivenProperty.prototype.interpolate=function(i){return i},CrossFadedDataDrivenProperty}(DataDrivenProperty),CrossFadedProperty=function(i){this.specification=i};CrossFadedProperty.prototype.possiblyEvaluate=function(i,o,s,x){if(void 0!==i.value){if("constant"!==i.expression.kind)return this._calculate(i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom-1),o)),i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom),o)),i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom+1),o)),o);var _=i.expression.evaluate(o,null,{},s,x);return this._calculate(_,_,_,o)}},CrossFadedProperty.prototype._calculate=function(i,o,s,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:s,to:o}},CrossFadedProperty.prototype.interpolate=function(i){return i};var ColorRampProperty=function(i){this.specification=i};ColorRampProperty.prototype.possiblyEvaluate=function(i,o,s,x){return!!i.expression.evaluate(o,null,{},s,x)},ColorRampProperty.prototype.interpolate=function(){return!1};var Properties=function(i){for(var o in this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],i){var s=i[o];s.specification.overridable&&this.overridableProperties.push(o);var x=this.defaultPropertyValues[o]=new PropertyValue(s,void 0),_=this.defaultTransitionablePropertyValues[o]=new TransitionablePropertyValue(s);this.defaultTransitioningPropertyValues[o]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=x.possiblyEvaluate({})}};register("DataDrivenProperty",DataDrivenProperty),register("DataConstantProperty",DataConstantProperty),register("CrossFadedDataDrivenProperty",tx),register("CrossFadedProperty",CrossFadedProperty),register("ColorRampProperty",ColorRampProperty);var tb="-transition",t_=function(i){function StyleLayer(o,s){if(i.call(this),this.id=o.id,this.type=o.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),s.layout&&(this._unevaluatedLayout=new Layout(s.layout)),s.paint)){for(var x in this._transitionablePaint=new Transitionable(s.paint),o.paint)this.setPaintProperty(x,o.paint[x],{validate:!1});for(var _ in o.layout)this.setLayoutProperty(_,o.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new PossiblyEvaluated(s.paint)}}return i&&(StyleLayer.__proto__=i),StyleLayer.prototype=Object.create(i&&i.prototype),StyleLayer.prototype.constructor=StyleLayer,StyleLayer.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},StyleLayer.prototype.getLayoutProperty=function(i){return"visibility"===i?this.visibility:this._unevaluatedLayout.getValue(i)},StyleLayer.prototype.setLayoutProperty=function(i,o,s){if(void 0===s&&(s={}),null!=o){var x="layers."+this.id+".layout."+i;if(this._validate(ts,x,i,o,s))return}if("visibility"===i){this.visibility=o;return}this._unevaluatedLayout.setValue(i,o)},StyleLayer.prototype.getPaintProperty=function(i){return endsWith(i,tb)?this._transitionablePaint.getTransition(i.slice(0,-tb.length)):this._transitionablePaint.getValue(i)},StyleLayer.prototype.setPaintProperty=function(i,o,s){if(void 0===s&&(s={}),null!=o){var x="layers."+this.id+".paint."+i;if(this._validate(to,x,i,o,s))return!1}if(endsWith(i,tb))return this._transitionablePaint.setTransition(i.slice(0,-tb.length),o||void 0),!1;var _=this._transitionablePaint._values[i],F="cross-faded-data-driven"===_.property.specification["property-type"],N=_.value.isDataDriven(),j=_.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);var G=this._transitionablePaint._values[i].value;return G.isDataDriven()||N||F||this._handleOverridablePaintPropertyUpdate(i,j,G)},StyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){},StyleLayer.prototype._handleOverridablePaintPropertyUpdate=function(i,o,s){return!1},StyleLayer.prototype.isHidden=function(i){return!!this.minzoom&&i<this.minzoom||!!this.maxzoom&&i>=this.maxzoom||"none"===this.visibility},StyleLayer.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},StyleLayer.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},StyleLayer.prototype.recalculate=function(i,o){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)},StyleLayer.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),filterObject(i,function(i,o){return void 0!==i&&!("layout"===o&&!Object.keys(i).length)&&!("paint"===o&&!Object.keys(i).length)})},StyleLayer.prototype._validate=function(i,o,s,x,_){return void 0===_&&(_={}),(!_||!1!==_.validate)&&emitValidationErrors(this,i.call(validateStyleMin,{key:o,layerType:this.type,objectKey:s,value:x,styleSpec:eP,style:{glyphs:!0,sprite:!0}}))},StyleLayer.prototype.is3D=function(){return!1},StyleLayer.prototype.isTileClipped=function(){return!1},StyleLayer.prototype.hasOffscreenPass=function(){return!1},StyleLayer.prototype.resize=function(){},StyleLayer.prototype.isStateDependent=function(){for(var i in this.paint._values){var o=this.paint.get(i);if(o instanceof PossiblyEvaluatedPropertyValue&&supportsPropertyExpression(o.property.specification)&&("source"===o.value.kind||"composite"===o.value.kind)&&o.value.isStateDependent)return!0}return!1},StyleLayer}(Evented),tw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Struct=function(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},StructArray=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function createLayout(i,o){void 0===o&&(o=1);var s=0,x=0;return{members:i.map(function(i){var _=tw[i.type].BYTES_PER_ELEMENT,F=s=align(s,Math.max(o,_)),N=i.components||1;return x=Math.max(x,_),s+=_*N,{name:i.name,type:i.type,components:N,offset:F}}),size:align(s,Math.max(x,o)),alignment:o}}function align(i,o){return Math.ceil(i/o)*o}StructArray.serialize=function(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}},StructArray.deserialize=function(i){var o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o},StructArray.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},StructArray.prototype.clear=function(){this.length=0},StructArray.prototype.resize=function(i){this.reserve(i),this.length=i},StructArray.prototype.reserve=function(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}},StructArray.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")};var tT=function(i){function StructArrayLayout2i4(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4.__proto__=i),StructArrayLayout2i4.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4.prototype.constructor=StructArrayLayout2i4,StructArrayLayout2i4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2i4.prototype.emplace=function(i,o,s){var x=2*i;return this.int16[x+0]=o,this.int16[x+1]=s,i},StructArrayLayout2i4}(StructArray);tT.prototype.bytesPerElement=4,register("StructArrayLayout2i4",tT);var tk=function(i){function StructArrayLayout4i8(){i.apply(this,arguments)}return i&&(StructArrayLayout4i8.__proto__=i),StructArrayLayout4i8.prototype=Object.create(i&&i.prototype),StructArrayLayout4i8.prototype.constructor=StructArrayLayout4i8,StructArrayLayout4i8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout4i8.prototype.emplaceBack=function(i,o,s,x){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s,x)},StructArrayLayout4i8.prototype.emplace=function(i,o,s,x,_){var F=4*i;return this.int16[F+0]=o,this.int16[F+1]=s,this.int16[F+2]=x,this.int16[F+3]=_,i},StructArrayLayout4i8}(StructArray);tk.prototype.bytesPerElement=8,register("StructArrayLayout4i8",tk);var tA=function(i){function StructArrayLayout2i4i12(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4i12.__proto__=i),StructArrayLayout2i4i12.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4i12.prototype.constructor=StructArrayLayout2i4i12,StructArrayLayout2i4i12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4i12.prototype.emplaceBack=function(i,o,s,x,_,F){var N=this.length;return this.resize(N+1),this.emplace(N,i,o,s,x,_,F)},StructArrayLayout2i4i12.prototype.emplace=function(i,o,s,x,_,F,N){var j=6*i;return this.int16[j+0]=o,this.int16[j+1]=s,this.int16[j+2]=x,this.int16[j+3]=_,this.int16[j+4]=F,this.int16[j+5]=N,i},StructArrayLayout2i4i12}(StructArray);tA.prototype.bytesPerElement=12,register("StructArrayLayout2i4i12",tA);var tS=function(i){function StructArrayLayout2i4ub8(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4ub8.__proto__=i),StructArrayLayout2i4ub8.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4ub8.prototype.constructor=StructArrayLayout2i4ub8,StructArrayLayout2i4ub8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4ub8.prototype.emplaceBack=function(i,o,s,x,_,F){var N=this.length;return this.resize(N+1),this.emplace(N,i,o,s,x,_,F)},StructArrayLayout2i4ub8.prototype.emplace=function(i,o,s,x,_,F,N){var j=4*i,G=8*i;return this.int16[j+0]=o,this.int16[j+1]=s,this.uint8[G+4]=x,this.uint8[G+5]=_,this.uint8[G+6]=F,this.uint8[G+7]=N,i},StructArrayLayout2i4ub8}(StructArray);tS.prototype.bytesPerElement=8,register("StructArrayLayout2i4ub8",tS);var tM=function(i){function StructArrayLayout8ui2ub18(){i.apply(this,arguments)}return i&&(StructArrayLayout8ui2ub18.__proto__=i),StructArrayLayout8ui2ub18.prototype=Object.create(i&&i.prototype),StructArrayLayout8ui2ub18.prototype.constructor=StructArrayLayout8ui2ub18,StructArrayLayout8ui2ub18.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout8ui2ub18.prototype.emplaceBack=function(i,o,s,x,_,F,N,j,G,Z){var X=this.length;return this.resize(X+1),this.emplace(X,i,o,s,x,_,F,N,j,G,Z)},StructArrayLayout8ui2ub18.prototype.emplace=function(i,o,s,x,_,F,N,j,G,Z,X){var J=9*i,$=18*i;return this.uint16[J+0]=o,this.uint16[J+1]=s,this.uint16[J+2]=x,this.uint16[J+3]=_,this.uint16[J+4]=F,this.uint16[J+5]=N,this.uint16[J+6]=j,this.uint16[J+7]=G,this.uint8[$+16]=Z,this.uint8[$+17]=X,i},StructArrayLayout8ui2ub18}(StructArray);tM.prototype.bytesPerElement=18,register("StructArrayLayout8ui2ub18",tM);var tC=function(i){function StructArrayLayout4i4ui4i24(){i.apply(this,arguments)}return i&&(StructArrayLayout4i4ui4i24.__proto__=i),StructArrayLayout4i4ui4i24.prototype=Object.create(i&&i.prototype),StructArrayLayout4i4ui4i24.prototype.constructor=StructArrayLayout4i4ui4i24,StructArrayLayout4i4ui4i24.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout4i4ui4i24.prototype.emplaceBack=function(i,o,s,x,_,F,N,j,G,Z,X,J){var $=this.length;return this.resize($+1),this.emplace($,i,o,s,x,_,F,N,j,G,Z,X,J)},StructArrayLayout4i4ui4i24.prototype.emplace=function(i,o,s,x,_,F,N,j,G,Z,X,J,$){var ee=12*i;return this.int16[ee+0]=o,this.int16[ee+1]=s,this.int16[ee+2]=x,this.int16[ee+3]=_,this.uint16[ee+4]=F,this.uint16[ee+5]=N,this.uint16[ee+6]=j,this.uint16[ee+7]=G,this.int16[ee+8]=Z,this.int16[ee+9]=X,this.int16[ee+10]=J,this.int16[ee+11]=$,i},StructArrayLayout4i4ui4i24}(StructArray);tC.prototype.bytesPerElement=24,register("StructArrayLayout4i4ui4i24",tC);var tE=function(i){function StructArrayLayout3f12(){i.apply(this,arguments)}return i&&(StructArrayLayout3f12.__proto__=i),StructArrayLayout3f12.prototype=Object.create(i&&i.prototype),StructArrayLayout3f12.prototype.constructor=StructArrayLayout3f12,StructArrayLayout3f12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout3f12.prototype.emplaceBack=function(i,o,s){var x=this.length;return this.resize(x+1),this.emplace(x,i,o,s)},StructArrayLayout3f12.prototype.emplace=function(i,o,s,x){var _=3*i;return this.float32[_+0]=o,this.float32[_+1]=s,this.float32[_+2]=x,i},StructArrayLayout3f12}(StructArray);tE.prototype.bytesPerElement=12,register("StructArrayLayout3f12",tE);var tL=function(i){function StructArrayLayout1ul4(){i.apply(this,arguments)}return i&&(StructArrayLayout1ul4.__proto__=i),StructArrayLayout1ul4.prototype=Object.create(i&&i.prototype),StructArrayLayout1ul4.prototype.constructor=StructArrayLayout1ul4,StructArrayLayout1ul4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},StructArrayLayout1ul4.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1ul4.prototype.emplace=function(i,o){return this.uint32[1*i+0]=o,i},StructArrayLayout1ul4}(StructArray);tL.prototype.bytesPerElement=4,register("StructArrayLayout1ul4",tL);var tP=function(i){function StructArrayLayout6i1ul2ui20(){i.apply(this,arguments)}return i&&(StructArrayLayout6i1ul2ui20.__proto__=i),StructArrayLayout6i1ul2ui20.prototype=Object.create(i&&i.prototype),StructArrayLayout6i1ul2ui20.prototype.constructor=StructArrayLayout6i1ul2ui20,StructArrayLayout6i1ul2ui20.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout6i1ul2ui20.prototype.emplaceBack=function(i,o,s,x,_,F,N,j,G){var Z=this.length;return this.resize(Z+1),this.emplace(Z,i,o,s,x,_,F,N,j,G)},StructArrayLayout6i1ul2ui20.prototype.emplace=function(i,o,s,x,_,F,N,j,G,Z){var X=10*i;return this.int16[X+0]=o,this.int16[X+1]=s,this.int16[X+2]=x,this.int16[X+3]=_,this.int16[X+4]=F,this.int16[X+5]=N,this.uint32[5*i+3]=j,this.uint16[X+8]=G,this.uint16[X+9]=Z,i},StructArrayLayout6i1ul2ui20}(StructArray);tP.prototype.bytesPerElement=20,register("StructArrayLayout6i1ul2ui20",tP);var tI=function(i){function StructArrayLayout2i2i2i12(){i.apply(this,arguments)}return i&&(StructArrayLayout2i2i2i12.__proto__=i),StructArrayLayout2i2i2i12.prototype=Object.create(i&&i.prototype),StructArrayLayout2i2i2i12.prototype.constructor=StructArrayLayout2i2i2i12,StructArrayLayout2i2i2i12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i2i2i12.prototype.emplaceBack=function(i,o,s,x,_,F){var N=this.length;return this.resize(N+1),this.emplace(N,i,o,s,x,_,F)},StructArrayLayout2i2i2i12.prototype.emplace=function(i,o,s,x,_,F,N){var j=6*i;return this.int16[j+0]=o,this.int16[j+1]=s,this.int16[j+2]=x,this.int16[j+3]=_,this.int16[j+4]=F,this.int16[j+5]=N,i},StructArrayLayout2i2i2i12}(StructArray);tI.prototype.bytesPerElement=12,register("StructArrayLayout2i2i2i12",tI);var tO=function(i){function StructArrayLayout2f1f2i16(){i.apply(this,arguments)}return i&&(StructArrayLayout2f1f2i16.__proto__=i),StructArrayLayout2f1f2i16.prototype=Object.create(i&&i.prototype),StructArrayLayout2f1f2i16.prototype.constructor=StructArrayLayout2f1f2i16,StructArrayLayout2f1f2i16.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2f1f2i16.prototype.emplaceBack=function(i,o,s,x,_){var F=this.length;return this.resize(F+1),this.emplace(F,i,o,s,x,_)},StructArrayLayout2f1f2i16.prototype.emplace=function(i,o,s,x,_,F){var N=4*i,j=8*i;return this.float32[N+0]=o,this.float32[N+1]=s,this.float32[N+2]=x,this.int16[j+6]=_,this.int16[j+7]=F,i},StructArrayLayout2f1f2i16}(StructArray);tO.prototype.bytesPerElement=16,register("StructArrayLayout2f1f2i16",tO);var tD=function(i){function StructArrayLayout2ub2f12(){i.apply(this,arguments)}return i&&(StructArrayLayout2ub2f12.__proto__=i),StructArrayLayout2ub2f12.prototype=Object.create(i&&i.prototype),StructArrayLayout2ub2f12.prototype.constructor=StructArrayLayout2ub2f12,StructArrayLayout2ub2f12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2ub2f12.prototype.emplaceBack=function(i,o,s,x){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s,x)},StructArrayLayout2ub2f12.prototype.emplace=function(i,o,s,x,_){var F=12*i,N=3*i;return this.uint8[F+0]=o,this.uint8[F+1]=s,this.float32[N+1]=x,this.float32[N+2]=_,i},StructArrayLayout2ub2f12}(StructArray);tD.prototype.bytesPerElement=12,register("StructArrayLayout2ub2f12",tD);var tR=function(i){function StructArrayLayout3ui6(){i.apply(this,arguments)}return i&&(StructArrayLayout3ui6.__proto__=i),StructArrayLayout3ui6.prototype=Object.create(i&&i.prototype),StructArrayLayout3ui6.prototype.constructor=StructArrayLayout3ui6,StructArrayLayout3ui6.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout3ui6.prototype.emplaceBack=function(i,o,s){var x=this.length;return this.resize(x+1),this.emplace(x,i,o,s)},StructArrayLayout3ui6.prototype.emplace=function(i,o,s,x){var _=3*i;return this.uint16[_+0]=o,this.uint16[_+1]=s,this.uint16[_+2]=x,i},StructArrayLayout3ui6}(StructArray);tR.prototype.bytesPerElement=6,register("StructArrayLayout3ui6",tR);var tB=function(i){function StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48(){i.apply(this,arguments)}return i&&(StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.__proto__=i),StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype=Object.create(i&&i.prototype),StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.constructor=StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48,StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.emplaceBack=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en){var ei=this.length;return this.resize(ei+1),this.emplace(ei,i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en)},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.emplace=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei){var eo=24*i,es=12*i,el=48*i;return this.int16[eo+0]=o,this.int16[eo+1]=s,this.uint16[eo+2]=x,this.uint16[eo+3]=_,this.uint32[es+2]=F,this.uint32[es+3]=N,this.uint32[es+4]=j,this.uint16[eo+10]=G,this.uint16[eo+11]=Z,this.uint16[eo+12]=X,this.float32[es+7]=J,this.float32[es+8]=$,this.uint8[el+36]=ee,this.uint8[el+37]=et,this.uint8[el+38]=er,this.uint32[es+10]=en,this.int16[eo+22]=ei,i},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48}(StructArray);tB.prototype.bytesPerElement=48,register("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",tB);var tz=function(i){function StructArrayLayout8i15ui1ul4f68(){i.apply(this,arguments)}return i&&(StructArrayLayout8i15ui1ul4f68.__proto__=i),StructArrayLayout8i15ui1ul4f68.prototype=Object.create(i&&i.prototype),StructArrayLayout8i15ui1ul4f68.prototype.constructor=StructArrayLayout8i15ui1ul4f68,StructArrayLayout8i15ui1ul4f68.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout8i15ui1ul4f68.prototype.emplaceBack=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg){var em=this.length;return this.resize(em+1),this.emplace(em,i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg)},StructArrayLayout8i15ui1ul4f68.prototype.emplace=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em){var ey=34*i,ev=17*i;return this.int16[ey+0]=o,this.int16[ey+1]=s,this.int16[ey+2]=x,this.int16[ey+3]=_,this.int16[ey+4]=F,this.int16[ey+5]=N,this.int16[ey+6]=j,this.int16[ey+7]=G,this.uint16[ey+8]=Z,this.uint16[ey+9]=X,this.uint16[ey+10]=J,this.uint16[ey+11]=$,this.uint16[ey+12]=ee,this.uint16[ey+13]=et,this.uint16[ey+14]=er,this.uint16[ey+15]=en,this.uint16[ey+16]=ei,this.uint16[ey+17]=eo,this.uint16[ey+18]=es,this.uint16[ey+19]=el,this.uint16[ey+20]=ec,this.uint16[ey+21]=eu,this.uint16[ey+22]=ef,this.uint32[ev+12]=eh,this.float32[ev+13]=ed,this.float32[ev+14]=ep,this.float32[ev+15]=eg,this.float32[ev+16]=em,i},StructArrayLayout8i15ui1ul4f68}(StructArray);tz.prototype.bytesPerElement=68,register("StructArrayLayout8i15ui1ul4f68",tz);var tF=function(i){function StructArrayLayout1f4(){i.apply(this,arguments)}return i&&(StructArrayLayout1f4.__proto__=i),StructArrayLayout1f4.prototype=Object.create(i&&i.prototype),StructArrayLayout1f4.prototype.constructor=StructArrayLayout1f4,StructArrayLayout1f4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout1f4.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1f4.prototype.emplace=function(i,o){return this.float32[1*i+0]=o,i},StructArrayLayout1f4}(StructArray);tF.prototype.bytesPerElement=4,register("StructArrayLayout1f4",tF);var tN=function(i){function StructArrayLayout3i6(){i.apply(this,arguments)}return i&&(StructArrayLayout3i6.__proto__=i),StructArrayLayout3i6.prototype=Object.create(i&&i.prototype),StructArrayLayout3i6.prototype.constructor=StructArrayLayout3i6,StructArrayLayout3i6.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout3i6.prototype.emplaceBack=function(i,o,s){var x=this.length;return this.resize(x+1),this.emplace(x,i,o,s)},StructArrayLayout3i6.prototype.emplace=function(i,o,s,x){var _=3*i;return this.int16[_+0]=o,this.int16[_+1]=s,this.int16[_+2]=x,i},StructArrayLayout3i6}(StructArray);tN.prototype.bytesPerElement=6,register("StructArrayLayout3i6",tN);var tj=function(i){function StructArrayLayout1ul2ui8(){i.apply(this,arguments)}return i&&(StructArrayLayout1ul2ui8.__proto__=i),StructArrayLayout1ul2ui8.prototype=Object.create(i&&i.prototype),StructArrayLayout1ul2ui8.prototype.constructor=StructArrayLayout1ul2ui8,StructArrayLayout1ul2ui8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout1ul2ui8.prototype.emplaceBack=function(i,o,s){var x=this.length;return this.resize(x+1),this.emplace(x,i,o,s)},StructArrayLayout1ul2ui8.prototype.emplace=function(i,o,s,x){var _=4*i;return this.uint32[2*i+0]=o,this.uint16[_+2]=s,this.uint16[_+3]=x,i},StructArrayLayout1ul2ui8}(StructArray);tj.prototype.bytesPerElement=8,register("StructArrayLayout1ul2ui8",tj);var tU=function(i){function StructArrayLayout2ui4(){i.apply(this,arguments)}return i&&(StructArrayLayout2ui4.__proto__=i),StructArrayLayout2ui4.prototype=Object.create(i&&i.prototype),StructArrayLayout2ui4.prototype.constructor=StructArrayLayout2ui4,StructArrayLayout2ui4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout2ui4.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2ui4.prototype.emplace=function(i,o,s){var x=2*i;return this.uint16[x+0]=o,this.uint16[x+1]=s,i},StructArrayLayout2ui4}(StructArray);tU.prototype.bytesPerElement=4,register("StructArrayLayout2ui4",tU);var tV=function(i){function StructArrayLayout1ui2(){i.apply(this,arguments)}return i&&(StructArrayLayout1ui2.__proto__=i),StructArrayLayout1ui2.prototype=Object.create(i&&i.prototype),StructArrayLayout1ui2.prototype.constructor=StructArrayLayout1ui2,StructArrayLayout1ui2.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout1ui2.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1ui2.prototype.emplace=function(i,o){return this.uint16[1*i+0]=o,i},StructArrayLayout1ui2}(StructArray);tV.prototype.bytesPerElement=2,register("StructArrayLayout1ui2",tV);var tH=function(i){function StructArrayLayout2f8(){i.apply(this,arguments)}return i&&(StructArrayLayout2f8.__proto__=i),StructArrayLayout2f8.prototype=Object.create(i&&i.prototype),StructArrayLayout2f8.prototype.constructor=StructArrayLayout2f8,StructArrayLayout2f8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2f8.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2f8.prototype.emplace=function(i,o,s){var x=2*i;return this.float32[x+0]=o,this.float32[x+1]=s,i},StructArrayLayout2f8}(StructArray);tH.prototype.bytesPerElement=8,register("StructArrayLayout2f8",tH);var tq=function(i){function StructArrayLayout4f16(){i.apply(this,arguments)}return i&&(StructArrayLayout4f16.__proto__=i),StructArrayLayout4f16.prototype=Object.create(i&&i.prototype),StructArrayLayout4f16.prototype.constructor=StructArrayLayout4f16,StructArrayLayout4f16.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout4f16.prototype.emplaceBack=function(i,o,s,x){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s,x)},StructArrayLayout4f16.prototype.emplace=function(i,o,s,x,_){var F=4*i;return this.float32[F+0]=o,this.float32[F+1]=s,this.float32[F+2]=x,this.float32[F+3]=_,i},StructArrayLayout4f16}(StructArray);tq.prototype.bytesPerElement=16,register("StructArrayLayout4f16",tq);var tG=function(i){function CollisionBoxStruct(){i.apply(this,arguments)}i&&(CollisionBoxStruct.__proto__=i),CollisionBoxStruct.prototype=Object.create(i&&i.prototype),CollisionBoxStruct.prototype.constructor=CollisionBoxStruct;var o={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return o.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},o.x1.get=function(){return this._structArray.int16[this._pos2+2]},o.y1.get=function(){return this._structArray.int16[this._pos2+3]},o.x2.get=function(){return this._structArray.int16[this._pos2+4]},o.y2.get=function(){return this._structArray.int16[this._pos2+5]},o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.anchorPoint.get=function(){return new Point(this.anchorPointX,this.anchorPointY)},Object.defineProperties(CollisionBoxStruct.prototype,o),CollisionBoxStruct}(Struct);tG.prototype.size=20;var tW=function(i){function CollisionBoxArray(){i.apply(this,arguments)}return i&&(CollisionBoxArray.__proto__=i),CollisionBoxArray.prototype=Object.create(i&&i.prototype),CollisionBoxArray.prototype.constructor=CollisionBoxArray,CollisionBoxArray.prototype.get=function(i){return new tG(this,i)},CollisionBoxArray}(tP);register("CollisionBoxArray",tW);var tZ=function(i){function PlacedSymbolStruct(){i.apply(this,arguments)}i&&(PlacedSymbolStruct.__proto__=i),PlacedSymbolStruct.prototype=Object.create(i&&i.prototype),PlacedSymbolStruct.prototype.constructor=PlacedSymbolStruct;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},o.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},o.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},o.segment.get=function(){return this._structArray.uint16[this._pos2+10]},o.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},o.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},o.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},o.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},o.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},o.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},o.placedOrientation.set=function(i){this._structArray.uint8[this._pos1+37]=i},o.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},o.hidden.set=function(i){this._structArray.uint8[this._pos1+38]=i},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},o.crossTileID.set=function(i){this._structArray.uint32[this._pos4+10]=i},o.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(PlacedSymbolStruct.prototype,o),PlacedSymbolStruct}(Struct);tZ.prototype.size=48;var tY=function(i){function PlacedSymbolArray(){i.apply(this,arguments)}return i&&(PlacedSymbolArray.__proto__=i),PlacedSymbolArray.prototype=Object.create(i&&i.prototype),PlacedSymbolArray.prototype.constructor=PlacedSymbolArray,PlacedSymbolArray.prototype.get=function(i){return new tZ(this,i)},PlacedSymbolArray}(tB);register("PlacedSymbolArray",tY);var tX=function(i){function SymbolInstanceStruct(){i.apply(this,arguments)}i&&(SymbolInstanceStruct.__proto__=i),SymbolInstanceStruct.prototype=Object.create(i&&i.prototype),SymbolInstanceStruct.prototype.constructor=SymbolInstanceStruct;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},o.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},o.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},o.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},o.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},o.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},o.key.get=function(){return this._structArray.uint16[this._pos2+8]},o.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},o.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},o.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},o.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},o.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},o.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},o.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},o.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},o.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},o.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},o.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},o.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},o.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},o.crossTileID.set=function(i){this._structArray.uint32[this._pos4+12]=i},o.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},o.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},o.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},o.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(SymbolInstanceStruct.prototype,o),SymbolInstanceStruct}(Struct);tX.prototype.size=68;var tK=function(i){function SymbolInstanceArray(){i.apply(this,arguments)}return i&&(SymbolInstanceArray.__proto__=i),SymbolInstanceArray.prototype=Object.create(i&&i.prototype),SymbolInstanceArray.prototype.constructor=SymbolInstanceArray,SymbolInstanceArray.prototype.get=function(i){return new tX(this,i)},SymbolInstanceArray}(tz);register("SymbolInstanceArray",tK);var tJ=function(i){function GlyphOffsetArray(){i.apply(this,arguments)}return i&&(GlyphOffsetArray.__proto__=i),GlyphOffsetArray.prototype=Object.create(i&&i.prototype),GlyphOffsetArray.prototype.constructor=GlyphOffsetArray,GlyphOffsetArray.prototype.getoffsetX=function(i){return this.float32[1*i+0]},GlyphOffsetArray}(tF);register("GlyphOffsetArray",tJ);var t$=function(i){function SymbolLineVertexArray(){i.apply(this,arguments)}return i&&(SymbolLineVertexArray.__proto__=i),SymbolLineVertexArray.prototype=Object.create(i&&i.prototype),SymbolLineVertexArray.prototype.constructor=SymbolLineVertexArray,SymbolLineVertexArray.prototype.getx=function(i){return this.int16[3*i+0]},SymbolLineVertexArray.prototype.gety=function(i){return this.int16[3*i+1]},SymbolLineVertexArray.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},SymbolLineVertexArray}(tN);register("SymbolLineVertexArray",t$);var tQ=function(i){function FeatureIndexStruct(){i.apply(this,arguments)}i&&(FeatureIndexStruct.__proto__=i),FeatureIndexStruct.prototype=Object.create(i&&i.prototype),FeatureIndexStruct.prototype.constructor=FeatureIndexStruct;var o={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(FeatureIndexStruct.prototype,o),FeatureIndexStruct}(Struct);tQ.prototype.size=8;var t0=function(i){function FeatureIndexArray(){i.apply(this,arguments)}return i&&(FeatureIndexArray.__proto__=i),FeatureIndexArray.prototype=Object.create(i&&i.prototype),FeatureIndexArray.prototype.constructor=FeatureIndexArray,FeatureIndexArray.prototype.get=function(i){return new tQ(this,i)},FeatureIndexArray}(tj);register("FeatureIndexArray",t0);var t1=createLayout([{name:"a_pos",components:2,type:"Int16"}],4).members,SegmentVector=function(i){void 0===i&&(i=[]),this.segments=i};function packUint8ToFloat(i,o){return 256*(i=clamp(Math.floor(i),0,255))+(o=clamp(Math.floor(o),0,255))}SegmentVector.prototype.prepareSegment=function(i,o,s,x){var _=this.segments[this.segments.length-1];return i>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&warnOnce("Max vertices per segment is "+SegmentVector.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+i),(!_||_.vertexLength+i>SegmentVector.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==x)&&(_={vertexOffset:o.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},void 0!==x&&(_.sortKey=x),this.segments.push(_)),_},SegmentVector.prototype.get=function(){return this.segments},SegmentVector.prototype.destroy=function(){for(var i=0,o=this.segments;i<o.length;i+=1){var s=o[i];for(var x in s.vaos)s.vaos[x].destroy()}},SegmentVector.simpleSegment=function(i,o,s,x){return new SegmentVector([{vertexOffset:i,primitiveOffset:o,vertexLength:s,primitiveLength:x,vaos:{},sortKey:0}])},SegmentVector.MAX_VERTEX_ARRAY_LENGTH=65535,register("SegmentVector",SegmentVector);var t2=createLayout([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),t3=createCommonjsModule(function(i){i.exports=function(i,o){var s,x,_,F,N,j;for(s=3&i.length,x=i.length-s,_=o,j=0;j<x;)N=255&i.charCodeAt(j)|(255&i.charCodeAt(++j))<<8|(255&i.charCodeAt(++j))<<16|(255&i.charCodeAt(++j))<<24,++j,_^=N=(65535&(N=(N=(65535&N)*3432918353+(((N>>>16)*3432918353&65535)<<16)&4294967295)<<15|N>>>17))*461845907+(((N>>>16)*461845907&65535)<<16)&4294967295,_=(65535&(F=(65535&(_=_<<13|_>>>19))*5+(((_>>>16)*5&65535)<<16)&4294967295))+27492+(((F>>>16)+58964&65535)<<16);switch(N=0,s){case 3:N^=(255&i.charCodeAt(j+2))<<16;case 2:N^=(255&i.charCodeAt(j+1))<<8;case 1:N^=255&i.charCodeAt(j),_^=N=(65535&(N=(N=(65535&N)*3432918353+(((N>>>16)*3432918353&65535)<<16)&4294967295)<<15|N>>>17))*461845907+(((N>>>16)*461845907&65535)<<16)&4294967295}return _^=i.length,_^=_>>>16,_=(65535&_)*2246822507+(((_>>>16)*2246822507&65535)<<16)&4294967295,_^=_>>>13,_=(65535&_)*3266489909+(((_>>>16)*3266489909&65535)<<16)&4294967295,(_^=_>>>16)>>>0}}),t5=createCommonjsModule(function(i){i.exports=function(i,o){for(var s,x=i.length,_=o^x,F=0;x>=4;)s=(65535&(s=255&i.charCodeAt(F)|(255&i.charCodeAt(++F))<<8|(255&i.charCodeAt(++F))<<16|(255&i.charCodeAt(++F))<<24))*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,_=(65535&_)*1540483477+(((_>>>16)*1540483477&65535)<<16)^(s=(65535&s)*1540483477+(((s>>>16)*1540483477&65535)<<16)),x-=4,++F;switch(x){case 3:_^=(255&i.charCodeAt(F+2))<<16;case 2:_^=(255&i.charCodeAt(F+1))<<8;case 1:_^=255&i.charCodeAt(F),_=(65535&_)*1540483477+(((_>>>16)*1540483477&65535)<<16)}return _^=_>>>13,_=(65535&_)*1540483477+(((_>>>16)*1540483477&65535)<<16),(_^=_>>>15)>>>0}});t3.murmur3=t3,t3.murmur2=t5;var FeaturePositionMap=function(){this.ids=[],this.positions=[],this.indexed=!1};function getNumericId(i){var o=+i;return!isNaN(o)&&o<=9007199254740991?o:t3(String(i))}function swap(i,o,s){var x=i[o];i[o]=i[s],i[s]=x}FeaturePositionMap.prototype.add=function(i,o,s,x){this.ids.push(getNumericId(i)),this.positions.push(o,s,x)},FeaturePositionMap.prototype.getPositions=function(i){for(var o=getNumericId(i),s=0,x=this.ids.length-1;s<x;){var _=s+x>>1;this.ids[_]>=o?x=_:s=_+1}for(var F=[];this.ids[s]===o;){var N=this.positions[3*s],j=this.positions[3*s+1],G=this.positions[3*s+2];F.push({index:N,start:j,end:G}),s++}return F},FeaturePositionMap.serialize=function(i,o){var s=new Float64Array(i.ids),x=new Uint32Array(i.positions);return function sort(i,o,s,x){for(;s<x;){for(var _=i[s+x>>1],F=s-1,N=x+1;;){do F++;while(i[F]<_);do N--;while(i[N]>_);if(F>=N)break;swap(i,F,N),swap(o,3*F,3*N),swap(o,3*F+1,3*N+1),swap(o,3*F+2,3*N+2)}N-s<x-N?(sort(i,o,s,N),s=N+1):(sort(i,o,N+1,x),x=N)}}(s,x,0,s.length-1),o&&o.push(s.buffer,x.buffer),{ids:s,positions:x}},FeaturePositionMap.deserialize=function(i){var o=new FeaturePositionMap;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o},register("FeaturePositionMap",FeaturePositionMap);var Uniform=function(i,o){this.gl=i.gl,this.location=o},t4=function(i){function Uniform1i(o,s){i.call(this,o,s),this.current=0}return i&&(Uniform1i.__proto__=i),Uniform1i.prototype=Object.create(i&&i.prototype),Uniform1i.prototype.constructor=Uniform1i,Uniform1i.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},Uniform1i}(Uniform),t6=function(i){function Uniform1f(o,s){i.call(this,o,s),this.current=0}return i&&(Uniform1f.__proto__=i),Uniform1f.prototype=Object.create(i&&i.prototype),Uniform1f.prototype.constructor=Uniform1f,Uniform1f.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},Uniform1f}(Uniform),t8=function(i){function Uniform2f(o,s){i.call(this,o,s),this.current=[0,0]}return i&&(Uniform2f.__proto__=i),Uniform2f.prototype=Object.create(i&&i.prototype),Uniform2f.prototype.constructor=Uniform2f,Uniform2f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1])&&(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},Uniform2f}(Uniform),t7=function(i){function Uniform3f(o,s){i.call(this,o,s),this.current=[0,0,0]}return i&&(Uniform3f.__proto__=i),Uniform3f.prototype=Object.create(i&&i.prototype),Uniform3f.prototype.constructor=Uniform3f,Uniform3f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1]||i[2]!==this.current[2])&&(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},Uniform3f}(Uniform),t9=function(i){function Uniform4f(o,s){i.call(this,o,s),this.current=[0,0,0,0]}return i&&(Uniform4f.__proto__=i),Uniform4f.prototype=Object.create(i&&i.prototype),Uniform4f.prototype.constructor=Uniform4f,Uniform4f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1]||i[2]!==this.current[2]||i[3]!==this.current[3])&&(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},Uniform4f}(Uniform),re=function(i){function UniformColor(o,s){i.call(this,o,s),this.current=Color.transparent}return i&&(UniformColor.__proto__=i),UniformColor.prototype=Object.create(i&&i.prototype),UniformColor.prototype.constructor=UniformColor,UniformColor.prototype.set=function(i){(i.r!==this.current.r||i.g!==this.current.g||i.b!==this.current.b||i.a!==this.current.a)&&(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},UniformColor}(Uniform),rt=new Float32Array(16),rr=function(i){function UniformMatrix4f(o,s){i.call(this,o,s),this.current=rt}return i&&(UniformMatrix4f.__proto__=i),UniformMatrix4f.prototype=Object.create(i&&i.prototype),UniformMatrix4f.prototype.constructor=UniformMatrix4f,UniformMatrix4f.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);return}for(var o=1;o<16;o++)if(i[o]!==this.current[o]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},UniformMatrix4f}(Uniform);function packColor(i){return[packUint8ToFloat(255*i.r,255*i.g),packUint8ToFloat(255*i.b,255*i.a)]}var ConstantBinder=function(i,o,s){this.value=i,this.uniformNames=o.map(function(i){return"u_"+i}),this.type=s};ConstantBinder.prototype.setUniform=function(i,o,s){i.set(s.constantOr(this.value))},ConstantBinder.prototype.getBinding=function(i,o,s){return"color"===this.type?new re(i,o):new t6(i,o)};var CrossFadedConstantBinder=function(i,o){this.uniformNames=o.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};CrossFadedConstantBinder.prototype.setConstantPatternPositions=function(i,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=i.tlbr},CrossFadedConstantBinder.prototype.setUniform=function(i,o,s,x){var _="u_pattern_to"===x?this.patternTo:"u_pattern_from"===x?this.patternFrom:"u_pixel_ratio_to"===x?this.pixelRatioTo:"u_pixel_ratio_from"===x?this.pixelRatioFrom:null;_&&i.set(_)},CrossFadedConstantBinder.prototype.getBinding=function(i,o,s){return"u_pattern"===s.substr(0,9)?new t9(i,o):new t6(i,o)};var SourceExpressionBinder=function(i,o,s,x){this.expression=i,this.type=s,this.maxValue=0,this.paintVertexAttributes=o.map(function(i){return{name:"a_"+i,type:"Float32",components:"color"===s?2:1,offset:0}}),this.paintVertexArray=new x};SourceExpressionBinder.prototype.populatePaintArray=function(i,o,s,x,_){var F=this.paintVertexArray.length,N=this.expression.evaluate(new EvaluationParameters(0),o,{},x,[],_);this.paintVertexArray.resize(i),this._setPaintValue(F,i,N)},SourceExpressionBinder.prototype.updatePaintArray=function(i,o,s,x){var _=this.expression.evaluate({zoom:0},s,x);this._setPaintValue(i,o,_)},SourceExpressionBinder.prototype._setPaintValue=function(i,o,s){if("color"===this.type)for(var x=packColor(s),_=i;_<o;_++)this.paintVertexArray.emplace(_,x[0],x[1]);else{for(var F=i;F<o;F++)this.paintVertexArray.emplace(F,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},SourceExpressionBinder.prototype.upload=function(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},SourceExpressionBinder.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var CompositeExpressionBinder=function(i,o,s,x,_,F){this.expression=i,this.uniformNames=o.map(function(i){return"u_"+i+"_t"}),this.type=s,this.useIntegerZoom=x,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=o.map(function(i){return{name:"a_"+i,type:"Float32",components:"color"===s?4:2,offset:0}}),this.paintVertexArray=new F};CompositeExpressionBinder.prototype.populatePaintArray=function(i,o,s,x,_){var F=this.expression.evaluate(new EvaluationParameters(this.zoom),o,{},x,[],_),N=this.expression.evaluate(new EvaluationParameters(this.zoom+1),o,{},x,[],_),j=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(j,i,F,N)},CompositeExpressionBinder.prototype.updatePaintArray=function(i,o,s,x){var _=this.expression.evaluate({zoom:this.zoom},s,x),F=this.expression.evaluate({zoom:this.zoom+1},s,x);this._setPaintValue(i,o,_,F)},CompositeExpressionBinder.prototype._setPaintValue=function(i,o,s,x){if("color"===this.type)for(var _=packColor(s),F=packColor(x),N=i;N<o;N++)this.paintVertexArray.emplace(N,_[0],_[1],F[0],F[1]);else{for(var j=i;j<o;j++)this.paintVertexArray.emplace(j,s,x);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(x))}},CompositeExpressionBinder.prototype.upload=function(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},CompositeExpressionBinder.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},CompositeExpressionBinder.prototype.setUniform=function(i,o){var s=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,x=clamp(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);i.set(x)},CompositeExpressionBinder.prototype.getBinding=function(i,o,s){return new t6(i,o)};var CrossFadedCompositeBinder=function(i,o,s,x,_,F){this.expression=i,this.type=o,this.useIntegerZoom=s,this.zoom=x,this.layerId=F,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _};CrossFadedCompositeBinder.prototype.populatePaintArray=function(i,o,s){var x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(x,i,o.patterns&&o.patterns[this.layerId],s)},CrossFadedCompositeBinder.prototype.updatePaintArray=function(i,o,s,x,_){this._setPaintValues(i,o,s.patterns&&s.patterns[this.layerId],_)},CrossFadedCompositeBinder.prototype._setPaintValues=function(i,o,s,x){if(x&&s){var _=s.min,F=s.mid,N=s.max,j=x[_],G=x[F],Z=x[N];if(j&&G&&Z)for(var X=i;X<o;X++)this.zoomInPaintVertexArray.emplace(X,G.tl[0],G.tl[1],G.br[0],G.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],G.pixelRatio,j.pixelRatio),this.zoomOutPaintVertexArray.emplace(X,G.tl[0],G.tl[1],G.br[0],G.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],G.pixelRatio,Z.pixelRatio)}},CrossFadedCompositeBinder.prototype.upload=function(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,t2.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,t2.members,this.expression.isStateDependent))},CrossFadedCompositeBinder.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ProgramConfiguration=function(i,o,s,x){this.binders={},this.layoutAttributes=x,this._buffers=[];var _=[];for(var F in i.paint._values)if(s(F)){var N=i.paint.get(F);if(N instanceof PossiblyEvaluatedPropertyValue&&supportsPropertyExpression(N.property.specification)){var j,G=(j=i.type,({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[F]||[F.replace(j+"-","").replace(/-/g,"_")]),Z=N.value,X=N.property.specification.type,J=N.property.useIntegerZoom,$=N.property.specification["property-type"],ee="cross-faded"===$||"cross-faded-data-driven"===$;if("constant"===Z.kind)this.binders[F]=ee?new CrossFadedConstantBinder(Z.value,G):new ConstantBinder(Z.value,G,X),_.push("/u_"+F);else if("source"===Z.kind||ee){var et=layoutType(F,X,"source");this.binders[F]=ee?new CrossFadedCompositeBinder(Z,X,J,o,et,i.id):new SourceExpressionBinder(Z,G,X,et),_.push("/a_"+F)}else{var er=layoutType(F,X,"composite");this.binders[F]=new CompositeExpressionBinder(Z,G,X,J,o,er),_.push("/z_"+F)}}}this.cacheKey=_.sort().join("")};ProgramConfiguration.prototype.getMaxValue=function(i){var o=this.binders[i];return o instanceof SourceExpressionBinder||o instanceof CompositeExpressionBinder?o.maxValue:0},ProgramConfiguration.prototype.populatePaintArrays=function(i,o,s,x,_){for(var F in this.binders){var N=this.binders[F];(N instanceof SourceExpressionBinder||N instanceof CompositeExpressionBinder||N instanceof CrossFadedCompositeBinder)&&N.populatePaintArray(i,o,s,x,_)}},ProgramConfiguration.prototype.setConstantPatternPositions=function(i,o){for(var s in this.binders){var x=this.binders[s];x instanceof CrossFadedConstantBinder&&x.setConstantPatternPositions(i,o)}},ProgramConfiguration.prototype.updatePaintArrays=function(i,o,s,x,_){var F=!1;for(var N in i)for(var j=o.getPositions(N),G=0;G<j.length;G+=1){var Z=j[G],X=s.feature(Z.index);for(var J in this.binders){var $=this.binders[J];if(($ instanceof SourceExpressionBinder||$ instanceof CompositeExpressionBinder||$ instanceof CrossFadedCompositeBinder)&&!0===$.expression.isStateDependent){var ee=x.paint.get(J);$.expression=ee.value,$.updatePaintArray(Z.start,Z.end,X,i[N],_),F=!0}}}return F},ProgramConfiguration.prototype.defines=function(){var i=[];for(var o in this.binders){var s=this.binders[o];(s instanceof ConstantBinder||s instanceof CrossFadedConstantBinder)&&i.push.apply(i,s.uniformNames.map(function(i){return"#define HAS_UNIFORM_"+i}))}return i},ProgramConfiguration.prototype.getPaintVertexBuffers=function(){return this._buffers},ProgramConfiguration.prototype.getUniforms=function(i,o){var s=[];for(var x in this.binders){var _=this.binders[x];if(_ instanceof ConstantBinder||_ instanceof CrossFadedConstantBinder||_ instanceof CompositeExpressionBinder)for(var F=0,N=_.uniformNames;F<N.length;F+=1){var j=N[F];if(o[j]){var G=_.getBinding(i,o[j],j);s.push({name:j,property:x,binding:G})}}}return s},ProgramConfiguration.prototype.setUniforms=function(i,o,s,x){for(var _=0;_<o.length;_+=1){var F=o[_],N=F.name,j=F.property,G=F.binding;this.binders[j].setUniform(G,x,s.get(j),N)}},ProgramConfiguration.prototype.updatePaintBuffers=function(i){for(var o in this._buffers=[],this.binders){var s=this.binders[o];if(i&&s instanceof CrossFadedCompositeBinder){var x=2===i.fromScale?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(s instanceof SourceExpressionBinder||s instanceof CompositeExpressionBinder)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},ProgramConfiguration.prototype.upload=function(i){for(var o in this.binders){var s=this.binders[o];(s instanceof SourceExpressionBinder||s instanceof CompositeExpressionBinder||s instanceof CrossFadedCompositeBinder)&&s.upload(i)}this.updatePaintBuffers()},ProgramConfiguration.prototype.destroy=function(){for(var i in this.binders){var o=this.binders[i];(o instanceof SourceExpressionBinder||o instanceof CompositeExpressionBinder||o instanceof CrossFadedCompositeBinder)&&o.destroy()}};var ProgramConfigurationSet=function(i,o,s,x){void 0===x&&(x=function(){return!0}),this.programConfigurations={};for(var _=0;_<o.length;_+=1){var F=o[_];this.programConfigurations[F.id]=new ProgramConfiguration(F,s,x,i)}this.needsUpload=!1,this._featureMap=new FeaturePositionMap,this._bufferOffset=0};function layoutType(i,o,s){var x={"line-pattern":{source:tM,composite:tM},"fill-pattern":{source:tM,composite:tM},"fill-extrusion-pattern":{source:tM,composite:tM}}[i];return x&&x[s]||({color:{source:tH,composite:tq},number:{source:tF,composite:tH}})[o][s]}ProgramConfigurationSet.prototype.populatePaintArrays=function(i,o,s,x,_,F){for(var N in this.programConfigurations)this.programConfigurations[N].populatePaintArrays(i,o,x,_,F);void 0!==o.id&&this._featureMap.add(o.id,s,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0},ProgramConfigurationSet.prototype.updatePaintArrays=function(i,o,s,x){for(var _=0;_<s.length;_+=1){var F=s[_];this.needsUpload=this.programConfigurations[F.id].updatePaintArrays(i,this._featureMap,o,F,x)||this.needsUpload}},ProgramConfigurationSet.prototype.get=function(i){return this.programConfigurations[i]},ProgramConfigurationSet.prototype.upload=function(i){if(this.needsUpload){for(var o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}},ProgramConfigurationSet.prototype.destroy=function(){for(var i in this.programConfigurations)this.programConfigurations[i].destroy()},register("ConstantBinder",ConstantBinder),register("CrossFadedConstantBinder",CrossFadedConstantBinder),register("SourceExpressionBinder",SourceExpressionBinder),register("CrossFadedCompositeBinder",CrossFadedCompositeBinder),register("CompositeExpressionBinder",CompositeExpressionBinder),register("ProgramConfiguration",ProgramConfiguration,{omit:["_buffers"]}),register("ProgramConfigurationSet",ProgramConfigurationSet);var rn={min:-16384,max:16383};function loadGeometry(i){for(var o=8192/i.extent,s=i.loadGeometry(),x=0;x<s.length;x++)for(var _=s[x],F=0;F<_.length;F++){var N=_[F];N.x=Math.round(N.x*o),N.y=Math.round(N.y*o),(N.x<rn.min||N.x>rn.max||N.y<rn.min||N.y>rn.max)&&(warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size"),N.x=clamp(N.x,rn.min,rn.max),N.y=clamp(N.y,rn.min,rn.max))}return s}function addCircleVertex(i,o,s,x,_){i.emplaceBack(2*o+(x+1)/2,2*s+(_+1)/2)}var CircleBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new tT,this.indexArray=new tR,this.segments=new SegmentVector,this.programConfigurations=new ProgramConfigurationSet(t1,i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function polygonIntersectsPolygon(i,o){for(var s=0;s<i.length;s++)if(polygonContainsPoint(o,i[s]))return!0;for(var x=0;x<o.length;x++)if(polygonContainsPoint(i,o[x]))return!0;return!!lineIntersectsLine(i,o)}function polygonIntersectsMultiPolygon(i,o){if(1===i.length)return multiPolygonContainsPoint(o,i[0]);for(var s=0;s<o.length;s++)for(var x=o[s],_=0;_<x.length;_++)if(polygonContainsPoint(i,x[_]))return!0;for(var F=0;F<i.length;F++)if(multiPolygonContainsPoint(o,i[F]))return!0;for(var N=0;N<o.length;N++)if(lineIntersectsLine(i,o[N]))return!0;return!1}function lineIntersectsLine(i,o){if(0===i.length||0===o.length)return!1;for(var s,x,_=0;_<i.length-1;_++)for(var F=i[_],N=i[_+1],j=0;j<o.length-1;j++)if(isCounterClockwise(F,s=o[j],x=o[j+1])!==isCounterClockwise(N,s,x)&&isCounterClockwise(F,N,s)!==isCounterClockwise(F,N,x))return!0;return!1}function pointIntersectsBufferedLine(i,o,s){var x=s*s;if(1===o.length)return i.distSqr(o[0])<x;for(var _=1;_<o.length;_++)if(distToSegmentSquared(i,o[_-1],o[_])<x)return!0;return!1}function distToSegmentSquared(i,o,s){var x=o.distSqr(s);if(0===x)return i.distSqr(o);var _=((i.x-o.x)*(s.x-o.x)+(i.y-o.y)*(s.y-o.y))/x;return _<0?i.distSqr(o):_>1?i.distSqr(s):i.distSqr(s.sub(o)._mult(_)._add(o))}function multiPolygonContainsPoint(i,o){for(var s,x,_,F=!1,N=0;N<i.length;N++){s=i[N];for(var j=0,G=s.length-1;j<s.length;G=j++)x=s[j],_=s[G],x.y>o.y!=_.y>o.y&&o.x<(_.x-x.x)*(o.y-x.y)/(_.y-x.y)+x.x&&(F=!F)}return F}function polygonContainsPoint(i,o){for(var s=!1,x=0,_=i.length-1;x<i.length;_=x++){var F=i[x],N=i[_];F.y>o.y!=N.y>o.y&&o.x<(N.x-F.x)*(o.y-F.y)/(N.y-F.y)+F.x&&(s=!s)}return s}function getMaximumPaintValue(i,o,s){var x=o.paint.get(i).value;return"constant"===x.kind?x.value:s.programConfigurations.get(o.id).getMaxValue(i)}function translateDistance(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function translate(i,o,s,x,_){if(!o[0]&&!o[1])return i;var F=Point.convert(o)._mult(_);"viewport"===s&&F._rotate(-x);for(var N=[],j=0;j<i.length;j++){var G=i[j];N.push(G.sub(F))}return N}CircleBucket.prototype.populate=function(i,o,s){var x=this.layers[0],_=[],F=null;"circle"===x.type&&(F=x.layout.get("circle-sort-key"));for(var N=0;N<i.length;N+=1){var j=i[N],G=j.feature,Z=j.id,X=j.index,J=j.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,ee={type:G.type,id:Z,properties:G.properties,geometry:$?loadGeometry(G):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),ee,s)){$||(ee.geometry=loadGeometry(G));var et=F?F.evaluate(ee,{},s):void 0,er={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:J,index:X,geometry:ee.geometry,patterns:{},sortKey:et};_.push(er)}}F&&_.sort(function(i,o){return i.sortKey-o.sortKey});for(var en=0;en<_.length;en+=1){var ei=_[en],eo=ei.geometry,es=ei.index,el=ei.sourceLayerIndex,ec=i[es].feature;this.addFeature(ei,eo,es,s),o.featureIndex.insert(ec,eo,es,el,this.index)}},CircleBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},CircleBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},CircleBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},CircleBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,t1),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},CircleBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},CircleBucket.prototype.addFeature=function(i,o,s,x){for(var _=0;_<o.length;_+=1)for(var F=o[_],N=0;N<F.length;N+=1){var j=F[N],G=j.x,Z=j.y;if(!(G<0)&&!(G>=8192)&&!(Z<0)&&!(Z>=8192)){var X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),J=X.vertexLength;addCircleVertex(this.layoutVertexArray,G,Z,-1,-1),addCircleVertex(this.layoutVertexArray,G,Z,1,-1),addCircleVertex(this.layoutVertexArray,G,Z,1,1),addCircleVertex(this.layoutVertexArray,G,Z,-1,1),this.indexArray.emplaceBack(J,J+1,J+2),this.indexArray.emplaceBack(J,J+3,J+2),X.vertexLength+=4,X.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,{},x)},register("CircleBucket",CircleBucket,{omit:["layers"]});var ri=new Properties({"circle-sort-key":new DataDrivenProperty(eP.layout_circle["circle-sort-key"])}),ro={paint:new Properties({"circle-radius":new DataDrivenProperty(eP.paint_circle["circle-radius"]),"circle-color":new DataDrivenProperty(eP.paint_circle["circle-color"]),"circle-blur":new DataDrivenProperty(eP.paint_circle["circle-blur"]),"circle-opacity":new DataDrivenProperty(eP.paint_circle["circle-opacity"]),"circle-translate":new DataConstantProperty(eP.paint_circle["circle-translate"]),"circle-translate-anchor":new DataConstantProperty(eP.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new DataConstantProperty(eP.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new DataConstantProperty(eP.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new DataDrivenProperty(eP.paint_circle["circle-stroke-width"]),"circle-stroke-color":new DataDrivenProperty(eP.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new DataDrivenProperty(eP.paint_circle["circle-stroke-opacity"])}),layout:ri},rs="undefined"!=typeof Float32Array?Float32Array:Array;function identity(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function multiply(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],er=o[12],en=o[13],ei=o[14],eo=o[15],es=s[0],el=s[1],ec=s[2],eu=s[3];return i[0]=es*x+el*j+ec*J+eu*er,i[1]=es*_+el*G+ec*$+eu*en,i[2]=es*F+el*Z+ec*ee+eu*ei,i[3]=es*N+el*X+ec*et+eu*eo,es=s[4],el=s[5],ec=s[6],eu=s[7],i[4]=es*x+el*j+ec*J+eu*er,i[5]=es*_+el*G+ec*$+eu*en,i[6]=es*F+el*Z+ec*ee+eu*ei,i[7]=es*N+el*X+ec*et+eu*eo,es=s[8],el=s[9],ec=s[10],eu=s[11],i[8]=es*x+el*j+ec*J+eu*er,i[9]=es*_+el*G+ec*$+eu*en,i[10]=es*F+el*Z+ec*ee+eu*ei,i[11]=es*N+el*X+ec*et+eu*eo,es=s[12],el=s[13],ec=s[14],eu=s[15],i[12]=es*x+el*j+ec*J+eu*er,i[13]=es*_+el*G+ec*$+eu*en,i[14]=es*F+el*Z+ec*ee+eu*ei,i[15]=es*N+el*X+ec*et+eu*eo,i}function transformMat4(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3];return i[0]=s[0]*x+s[4]*_+s[8]*F+s[12]*N,i[1]=s[1]*x+s[5]*_+s[9]*F+s[13]*N,i[2]=s[2]*x+s[6]*_+s[10]*F+s[14]*N,i[3]=s[3]*x+s[7]*_+s[11]*F+s[15]*N,i}Math.hypot||(Math.hypot=function(){for(var i=arguments,o=0,s=arguments.length;s--;)o+=i[s]*i[s];return Math.sqrt(o)}),o=new rs(3),rs!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),s=new rs(4),rs!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0),x=new rs(2),rs!=Float32Array&&(x[0]=0,x[1]=0);var rl=function(i){function CircleStyleLayer(o){i.call(this,o,ro)}return i&&(CircleStyleLayer.__proto__=i),CircleStyleLayer.prototype=Object.create(i&&i.prototype),CircleStyleLayer.prototype.constructor=CircleStyleLayer,CircleStyleLayer.prototype.createBucket=function(i){return new CircleBucket(i)},CircleStyleLayer.prototype.queryRadius=function(i){return getMaximumPaintValue("circle-radius",this,i)+getMaximumPaintValue("circle-stroke-width",this,i)+translateDistance(this.paint.get("circle-translate"))},CircleStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,x,_,F,N,j){for(var G=translate(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),F.angle,N),Z=this.paint.get("circle-radius").evaluate(o,s)+this.paint.get("circle-stroke-width").evaluate(o,s),X="map"===this.paint.get("circle-pitch-alignment"),J=X?G:G.map(function(i){return projectPoint(i,j)}),$=X?Z*N:Z,ee=0;ee<x.length;ee+=1)for(var et=x[ee],er=0;er<et.length;er+=1){var en,ei=et[er],eo=X?ei:projectPoint(ei,j),es=$,el=transformMat4([],[ei.x,ei.y,0,1],j);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?es*=el[3]/F.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(es*=F.cameraToCenterDistance/el[3]),en=es,polygonContainsPoint(J,eo)||pointIntersectsBufferedLine(eo,J,en))return!0}return!1},CircleStyleLayer}(t_);function projectPoint(i,o){var s=transformMat4([],[i.x,i.y,0,1],o);return new Point(s[0]/s[3],s[1]/s[3])}var rc=function(i){function HeatmapBucket(){i.apply(this,arguments)}return i&&(HeatmapBucket.__proto__=i),HeatmapBucket.prototype=Object.create(i&&i.prototype),HeatmapBucket.prototype.constructor=HeatmapBucket,HeatmapBucket}(CircleBucket);function createImage(i,o,s,x){var _=o.width,F=o.height;if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==_*F*s)throw RangeError("mismatched image size")}else x=new Uint8Array(_*F*s);return i.width=_,i.height=F,i.data=x,i}function resizeImage(i,o,s){var x=o.width,_=o.height;if(x!==i.width||_!==i.height){var F=createImage({},{width:x,height:_},s);copyImage(i,F,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,x),height:Math.min(i.height,_)},s),i.width=x,i.height=_,i.data=F.data}}function copyImage(i,o,s,x,_,F){if(0===_.width||0===_.height)return o;if(_.width>i.width||_.height>i.height||s.x>i.width-_.width||s.y>i.height-_.height)throw RangeError("out of range source coordinates for image copy");if(_.width>o.width||_.height>o.height||x.x>o.width-_.width||x.y>o.height-_.height)throw RangeError("out of range destination coordinates for image copy");for(var N=i.data,j=o.data,G=0;G<_.height;G++)for(var Z=((s.y+G)*i.width+s.x)*F,X=((x.y+G)*o.width+x.x)*F,J=0;J<_.width*F;J++)j[X+J]=N[Z+J];return o}register("HeatmapBucket",rc,{omit:["layers"]});var AlphaImage=function(i,o){createImage(this,i,1,o)};AlphaImage.prototype.resize=function(i){resizeImage(this,i,1)},AlphaImage.prototype.clone=function(){return new AlphaImage({width:this.width,height:this.height},new Uint8Array(this.data))},AlphaImage.copy=function(i,o,s,x,_){copyImage(i,o,s,x,_,1)};var RGBAImage=function(i,o){createImage(this,i,4,o)};RGBAImage.prototype.resize=function(i){resizeImage(this,i,4)},RGBAImage.prototype.replace=function(i,o){o?this.data.set(i):i instanceof Uint8ClampedArray?this.data=new Uint8Array(i.buffer):this.data=i},RGBAImage.prototype.clone=function(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))},RGBAImage.copy=function(i,o,s,x,_){copyImage(i,o,s,x,_,4)},register("AlphaImage",AlphaImage),register("RGBAImage",RGBAImage);var ru={paint:new Properties({"heatmap-radius":new DataDrivenProperty(eP.paint_heatmap["heatmap-radius"]),"heatmap-weight":new DataDrivenProperty(eP.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new DataConstantProperty(eP.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ColorRampProperty(eP.paint_heatmap["heatmap-color"]),"heatmap-opacity":new DataConstantProperty(eP.paint_heatmap["heatmap-opacity"])})};function renderColorRamp(i,o){for(var s=new Uint8Array(1024),x={},_=0,F=0;_<256;_++,F+=4){x[o]=_/255;var N=i.evaluate(x);s[F+0]=Math.floor(255*N.r/N.a),s[F+1]=Math.floor(255*N.g/N.a),s[F+2]=Math.floor(255*N.b/N.a),s[F+3]=Math.floor(255*N.a)}return new RGBAImage({width:256,height:1},s)}var rf=function(i){function HeatmapStyleLayer(o){i.call(this,o,ru),this._updateColorRamp()}return i&&(HeatmapStyleLayer.__proto__=i),HeatmapStyleLayer.prototype=Object.create(i&&i.prototype),HeatmapStyleLayer.prototype.constructor=HeatmapStyleLayer,HeatmapStyleLayer.prototype.createBucket=function(i){return new rc(i)},HeatmapStyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){"heatmap-color"===i&&this._updateColorRamp()},HeatmapStyleLayer.prototype._updateColorRamp=function(){var i=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=renderColorRamp(i,"heatmapDensity"),this.colorRampTexture=null},HeatmapStyleLayer.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},HeatmapStyleLayer.prototype.queryRadius=function(){return 0},HeatmapStyleLayer.prototype.queryIntersectsFeature=function(){return!1},HeatmapStyleLayer.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},HeatmapStyleLayer}(t_),rh={paint:new Properties({"hillshade-illumination-direction":new DataConstantProperty(eP.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new DataConstantProperty(eP.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new DataConstantProperty(eP.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new DataConstantProperty(eP.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new DataConstantProperty(eP.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new DataConstantProperty(eP.paint_hillshade["hillshade-accent-color"])})},rd=function(i){function HillshadeStyleLayer(o){i.call(this,o,rh)}return i&&(HillshadeStyleLayer.__proto__=i),HillshadeStyleLayer.prototype=Object.create(i&&i.prototype),HillshadeStyleLayer.prototype.constructor=HillshadeStyleLayer,HillshadeStyleLayer.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},HillshadeStyleLayer}(t_),rp=createLayout([{name:"a_pos",components:2,type:"Int16"}],4).members,rg=earcut;function earcut(i,o,s){s=s||2;var x,_,F,N,j,G,Z,X=o&&o.length,J=X?o[0]*s:i.length,$=linkedList(i,0,J,s,!0),ee=[];if(!$||$.next===$.prev)return ee;if(X&&($=function(i,o,s,x){var _,F,N,j,G,Z=[];for(_=0,F=o.length;_<F;_++)N=o[_]*x,j=_<F-1?o[_+1]*x:i.length,(G=linkedList(i,N,j,x,!1))===G.next&&(G.steiner=!0),Z.push(function(i){var o=i,s=i;do(o.x<s.x||o.x===s.x&&o.y<s.y)&&(s=o),o=o.next;while(o!==i);return s}(G));for(Z.sort(compareX),_=0;_<Z.length;_++)(function(i,o){if(o=function(i,o){var s,x,_,F=o,N=i.x,j=i.y,G=-1/0;do{if(j<=F.y&&j>=F.next.y&&F.next.y!==F.y){var Z=F.x+(j-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Z<=N&&Z>G){if(G=Z,Z===N){if(j===F.y)return F;if(j===F.next.y)return F.next}_=F.x<F.next.x?F:F.next}}F=F.next}while(F!==o);if(!_)return null;if(N===G)return _;var X,J=_,$=_.x,ee=_.y,et=1/0;F=_;do N>=F.x&&F.x>=$&&N!==F.x&&pointInTriangle(j<ee?N:G,j,$,ee,j<ee?G:N,j,F.x,F.y)&&(X=Math.abs(j-F.y)/(N-F.x),locallyInside(F,i)&&(X<et||X===et&&(F.x>_.x||F.x===_.x&&(s=_,x=F,0>area(s.prev,s,x.prev)&&0>area(x.next,s,s.next))))&&(_=F,et=X)),F=F.next;while(F!==J);return _}(i,o)){var s=splitPolygon(o,i);filterPoints(o,o.next),filterPoints(s,s.next)}})(Z[_],s),s=filterPoints(s,s.next);return s}(i,o,$,s)),i.length>80*s){x=F=i[0],_=N=i[1];for(var et=s;et<J;et+=s)j=i[et],G=i[et+1],j<x&&(x=j),G<_&&(_=G),j>F&&(F=j),G>N&&(N=G);Z=0!==(Z=Math.max(F-x,N-_))?1/Z:0}return function earcutLinked(i,o,s,x,_,F,N){if(i){!N&&F&&function(i,o,s,x){var _=i;do null===_.z&&(_.z=zOrder(_.x,_.y,o,s,x)),_.prevZ=_.prev,_.nextZ=_.next,_=_.next;while(_!==i);_.prevZ.nextZ=null,_.prevZ=null,function(i){var o,s,x,_,F,N,j,G,Z=1;do{for(s=i,i=null,F=null,N=0;s;){for(N++,x=s,j=0,o=0;o<Z&&(j++,x=x.nextZ);o++);for(G=Z;j>0||G>0&&x;)0!==j&&(0===G||!x||s.z<=x.z)?(_=s,s=s.nextZ,j--):(_=x,x=x.nextZ,G--),F?F.nextZ=_:i=_,_.prevZ=F,F=_;s=x}F.nextZ=null,Z*=2}while(N>1)}(_)}(i,x,_,F);for(var j,G,Z=i;i.prev!==i.next;){if(j=i.prev,G=i.next,F?function(i,o,s,x){var _=i.prev,F=i.next;if(area(_,i,F)>=0)return!1;for(var N=_.x<i.x?_.x<F.x?_.x:F.x:i.x<F.x?i.x:F.x,j=_.y<i.y?_.y<F.y?_.y:F.y:i.y<F.y?i.y:F.y,G=_.x>i.x?_.x>F.x?_.x:F.x:i.x>F.x?i.x:F.x,Z=_.y>i.y?_.y>F.y?_.y:F.y:i.y>F.y?i.y:F.y,X=zOrder(N,j,o,s,x),J=zOrder(G,Z,o,s,x),$=i.prevZ,ee=i.nextZ;$&&$.z>=X&&ee&&ee.z<=J;){if($!==i.prev&&$!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,$.x,$.y)&&area($.prev,$,$.next)>=0||($=$.prevZ,ee!==i.prev&&ee!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;$&&$.z>=X;){if($!==i.prev&&$!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,$.x,$.y)&&area($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;ee&&ee.z<=J;){if(ee!==i.prev&&ee!==i.next&&pointInTriangle(_.x,_.y,i.x,i.y,F.x,F.y,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}(i,x,_,F):function(i){var o=i.prev,s=i.next;if(area(o,i,s)>=0)return!1;for(var x=i.next.next;x!==i.prev;){if(pointInTriangle(o.x,o.y,i.x,i.y,s.x,s.y,x.x,x.y)&&area(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}(i)){o.push(j.i/s),o.push(i.i/s),o.push(G.i/s),removeNode(i),i=G.next,Z=G.next;continue}if((i=G)===Z){N?1===N?earcutLinked(i=function(i,o,s){var x=i;do{var _=x.prev,F=x.next.next;!equals(_,F)&&intersects(_,x,x.next,F)&&locallyInside(_,F)&&locallyInside(F,_)&&(o.push(_.i/s),o.push(x.i/s),o.push(F.i/s),removeNode(x),removeNode(x.next),x=i=F),x=x.next}while(x!==i);return filterPoints(x)}(filterPoints(i),o,s),o,s,x,_,F,2):2===N&&function(i,o,s,x,_,F){var N=i;do{for(var j,G,Z=N.next.next;Z!==N.prev;){if(N.i!==Z.i&&(j=N,G=Z,j.next.i!==G.i&&j.prev.i!==G.i&&!function(i,o){var s=i;do{if(s.i!==i.i&&s.next.i!==i.i&&s.i!==o.i&&s.next.i!==o.i&&intersects(s,s.next,i,o))return!0;s=s.next}while(s!==i);return!1}(j,G)&&(locallyInside(j,G)&&locallyInside(G,j)&&function(i,o){var s=i,x=!1,_=(i.x+o.x)/2,F=(i.y+o.y)/2;do s.y>F!=s.next.y>F&&s.next.y!==s.y&&_<(s.next.x-s.x)*(F-s.y)/(s.next.y-s.y)+s.x&&(x=!x),s=s.next;while(s!==i);return x}(j,G)&&(area(j.prev,j,G.prev)||area(j,G.prev,G))||equals(j,G)&&area(j.prev,j,j.next)>0&&area(G.prev,G,G.next)>0))){var X=splitPolygon(N,Z);N=filterPoints(N,N.next),X=filterPoints(X,X.next),earcutLinked(N,o,s,x,_,F),earcutLinked(X,o,s,x,_,F);return}Z=Z.next}N=N.next}while(N!==i)}(i,o,s,x,_,F):earcutLinked(filterPoints(i),o,s,x,_,F,1);break}}}}($,ee,s,x,_,Z),ee}function linkedList(i,o,s,x,_){var F,N;if(_===signedArea(i,o,s,x)>0)for(F=o;F<s;F+=x)N=insertNode(F,i[F],i[F+1],N);else for(F=s-x;F>=o;F-=x)N=insertNode(F,i[F],i[F+1],N);return N&&equals(N,N.next)&&(removeNode(N),N=N.next),N}function filterPoints(i,o){if(!i)return i;o||(o=i);var s,x=i;do if(s=!1,!x.steiner&&(equals(x,x.next)||0===area(x.prev,x,x.next))){if(removeNode(x),(x=o=x.prev)===x.next)break;s=!0}else x=x.next;while(s||x!==o);return o}function compareX(i,o){return i.x-o.x}function zOrder(i,o,s,x,_){return(i=((i=((i=((i=((i=32767*(i-s)*_)|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=((o=32767*(o-x)*_)|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1}function pointInTriangle(i,o,s,x,_,F,N,j){return(_-N)*(o-j)-(i-N)*(F-j)>=0&&(i-N)*(x-j)-(s-N)*(o-j)>=0&&(s-N)*(F-j)-(_-N)*(x-j)>=0}function area(i,o,s){return(o.y-i.y)*(s.x-o.x)-(o.x-i.x)*(s.y-o.y)}function equals(i,o){return i.x===o.x&&i.y===o.y}function intersects(i,o,s,x){var _=sign(area(i,o,s)),F=sign(area(i,o,x)),N=sign(area(s,x,i)),j=sign(area(s,x,o));return!!(_!==F&&N!==j||0===_&&onSegment(i,s,o)||0===F&&onSegment(i,x,o)||0===N&&onSegment(s,i,x)||0===j&&onSegment(s,o,x))}function onSegment(i,o,s){return o.x<=Math.max(i.x,s.x)&&o.x>=Math.min(i.x,s.x)&&o.y<=Math.max(i.y,s.y)&&o.y>=Math.min(i.y,s.y)}function sign(i){return i>0?1:i<0?-1:0}function locallyInside(i,o){return 0>area(i.prev,i,i.next)?area(i,o,i.next)>=0&&area(i,i.prev,o)>=0:0>area(i,o,i.prev)||0>area(i,i.next,o)}function splitPolygon(i,o){var s=new Node(i.i,i.x,i.y),x=new Node(o.i,o.x,o.y),_=i.next,F=o.prev;return i.next=o,o.prev=i,s.next=_,_.prev=s,x.next=s,s.prev=x,F.next=x,x.prev=F,x}function insertNode(i,o,s,x){var _=new Node(i,o,s);return x?(_.next=x.next,_.prev=x,x.next.prev=_,x.next=_):(_.prev=_,_.next=_),_}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,o,s){this.i=i,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,o,s,x){for(var _=0,F=o,N=s-x;F<s;F+=x)_+=(i[N]-i[F])*(i[F+1]+i[N+1]),N=F;return _}function swap$1(i,o,s){var x=i[o];i[o]=i[s],i[s]=x}function defaultCompare(i,o){return i<o?-1:i>o?1:0}function classifyRings(i,o){var s,x,_,F=i.length;if(F<=1)return[i];for(var N=[],j=0;j<F;j++){var G=function(i){for(var o=0,s=0,x=i.length,_=x-1,F=void 0,N=void 0;s<x;_=s++)F=i[s],o+=((N=i[_]).x-F.x)*(F.y+N.y);return o}(i[j]);0!==G&&(i[j].area=Math.abs(G),void 0===_&&(_=G<0),_===G<0?(x&&N.push(x),x=[i[j]]):x.push(i[j]))}if(x&&N.push(x),o>1)for(var Z=0;Z<N.length;Z++)N[Z].length<=o||(function quickselectStep(i,o,s,x,_){for(;x>s;){if(x-s>600){var F=x-s+1,N=o-s+1,j=Math.log(F),G=.5*Math.exp(2*j/3),Z=.5*Math.sqrt(j*G*(F-G)/F)*(N-F/2<0?-1:1),X=Math.max(s,Math.floor(o-N*G/F+Z)),J=Math.min(x,Math.floor(o+(F-N)*G/F+Z));quickselectStep(i,o,X,J,_)}var $=i[o],ee=s,et=x;for(swap$1(i,s,o),_(i[x],$)>0&&swap$1(i,s,x);ee<et;){for(swap$1(i,ee,et),ee++,et--;0>_(i[ee],$);)ee++;for(;_(i[et],$)>0;)et--}0===_(i[s],$)?swap$1(i,s,et):swap$1(i,++et,x),et<=o&&(s=et+1),o<=et&&(x=et-1)}}(s=N[Z],o,1,N[Z].length-1||s.length-1,compareAreas||defaultCompare),N[Z]=N[Z].slice(0,o));return N}function compareAreas(i,o){return o.area-i.area}function hasPattern(i,o,s){for(var x=s.patternDependencies,_=!1,F=0;F<o.length;F+=1){var N=o[F].paint.get(i+"-pattern");N.isConstant()||(_=!0);var j=N.constantOr(null);j&&(_=!0,x[j.to]=!0,x[j.from]=!0)}return _}function addPatternDependencies(i,o,s,x,_){for(var F=_.patternDependencies,N=0;N<o.length;N+=1){var j=o[N],G=j.paint.get(i+"-pattern").value;if("constant"!==G.kind){var Z=G.evaluate({zoom:x-1},s,{},_.availableImages),X=G.evaluate({zoom:x},s,{},_.availableImages),J=G.evaluate({zoom:x+1},s,{},_.availableImages);Z=Z&&Z.name?Z.name:Z,X=X&&X.name?X.name:X,J=J&&J.name?J.name:J,F[Z]=!0,F[X]=!0,F[J]=!0,s.patterns[j.id]={min:Z,mid:X,max:J}}}return s}earcut.deviation=function(i,o,s,x){var _=o&&o.length,F=_?o[0]*s:i.length,N=Math.abs(signedArea(i,0,F,s));if(_)for(var j=0,G=o.length;j<G;j++){var Z=o[j]*s,X=j<G-1?o[j+1]*s:i.length;N-=Math.abs(signedArea(i,Z,X,s))}var J=0;for(j=0;j<x.length;j+=3){var $=x[j]*s,ee=x[j+1]*s,et=x[j+2]*s;J+=Math.abs((i[$]-i[et])*(i[ee+1]-i[$+1])-(i[$]-i[ee])*(i[et+1]-i[$+1]))}return 0===N&&0===J?0:Math.abs((J-N)/N)},earcut.flatten=function(i){for(var o=i[0][0].length,s={vertices:[],holes:[],dimensions:o},x=0,_=0;_<i.length;_++){for(var F=0;F<i[_].length;F++)for(var N=0;N<o;N++)s.vertices.push(i[_][F][N]);_>0&&(x+=i[_-1].length,s.holes.push(x))}return s},rg.default=earcut;var FillBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tT,this.indexArray=new tR,this.indexArray2=new tU,this.programConfigurations=new ProgramConfigurationSet(rp,i.layers,i.zoom),this.segments=new SegmentVector,this.segments2=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};FillBucket.prototype.populate=function(i,o,s){this.hasPattern=hasPattern("fill",this.layers,o);for(var x=this.layers[0].layout.get("fill-sort-key"),_=[],F=0;F<i.length;F+=1){var N=i[F],j=N.feature,G=N.id,Z=N.index,X=N.sourceLayerIndex,J=this.layers[0]._featureFilter.needGeometry,$={type:j.type,id:G,properties:j.properties,geometry:J?loadGeometry(j):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),$,s)){J||($.geometry=loadGeometry(j));var ee=x?x.evaluate($,{},s,o.availableImages):void 0,et={id:G,properties:j.properties,type:j.type,sourceLayerIndex:X,index:Z,geometry:$.geometry,patterns:{},sortKey:ee};_.push(et)}}x&&_.sort(function(i,o){return i.sortKey-o.sortKey});for(var er=0;er<_.length;er+=1){var en=_[er],ei=en.geometry,eo=en.index,es=en.sourceLayerIndex;if(this.hasPattern){var el=addPatternDependencies("fill",this.layers,en,this.zoom,o);this.patternFeatures.push(el)}else this.addFeature(en,ei,eo,s,{});var ec=i[eo].feature;o.featureIndex.insert(ec,ei,eo,es,this.index)}},FillBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},FillBucket.prototype.addFeatures=function(i,o,s){for(var x=0,_=this.patternFeatures;x<_.length;x+=1){var F=_[x];this.addFeature(F,F.geometry,F.index,o,s)}},FillBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},FillBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},FillBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rp),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0},FillBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},FillBucket.prototype.addFeature=function(i,o,s,x,_){for(var F=0,N=classifyRings(o,500);F<N.length;F+=1){for(var j=N[F],G=0,Z=0;Z<j.length;Z+=1)G+=j[Z].length;for(var X=this.segments.prepareSegment(G,this.layoutVertexArray,this.indexArray),J=X.vertexLength,$=[],ee=[],et=0;et<j.length;et+=1){var er=j[et];if(0!==er.length){er!==j[0]&&ee.push($.length/2);var en=this.segments2.prepareSegment(er.length,this.layoutVertexArray,this.indexArray2),ei=en.vertexLength;this.layoutVertexArray.emplaceBack(er[0].x,er[0].y),this.indexArray2.emplaceBack(ei+er.length-1,ei),$.push(er[0].x),$.push(er[0].y);for(var eo=1;eo<er.length;eo++)this.layoutVertexArray.emplaceBack(er[eo].x,er[eo].y),this.indexArray2.emplaceBack(ei+eo-1,ei+eo),$.push(er[eo].x),$.push(er[eo].y);en.vertexLength+=er.length,en.primitiveLength+=er.length}}for(var es=rg($,ee),el=0;el<es.length;el+=3)this.indexArray.emplaceBack(J+es[el],J+es[el+1],J+es[el+2]);X.vertexLength+=G,X.primitiveLength+=es.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,_,x)},register("FillBucket",FillBucket,{omit:["layers","patternFeatures"]});var rm=new Properties({"fill-sort-key":new DataDrivenProperty(eP.layout_fill["fill-sort-key"])}),ry={paint:new Properties({"fill-antialias":new DataConstantProperty(eP.paint_fill["fill-antialias"]),"fill-opacity":new DataDrivenProperty(eP.paint_fill["fill-opacity"]),"fill-color":new DataDrivenProperty(eP.paint_fill["fill-color"]),"fill-outline-color":new DataDrivenProperty(eP.paint_fill["fill-outline-color"]),"fill-translate":new DataConstantProperty(eP.paint_fill["fill-translate"]),"fill-translate-anchor":new DataConstantProperty(eP.paint_fill["fill-translate-anchor"]),"fill-pattern":new tx(eP.paint_fill["fill-pattern"])}),layout:rm},rv=function(i){function FillStyleLayer(o){i.call(this,o,ry)}return i&&(FillStyleLayer.__proto__=i),FillStyleLayer.prototype=Object.create(i&&i.prototype),FillStyleLayer.prototype.constructor=FillStyleLayer,FillStyleLayer.prototype.recalculate=function(o,s){i.prototype.recalculate.call(this,o,s);var x=this.paint._values["fill-outline-color"];"constant"===x.value.kind&&void 0===x.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},FillStyleLayer.prototype.createBucket=function(i){return new FillBucket(i)},FillStyleLayer.prototype.queryRadius=function(){return translateDistance(this.paint.get("fill-translate"))},FillStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,x,_,F,N){return polygonIntersectsMultiPolygon(translate(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),F.angle,N),x)},FillStyleLayer.prototype.isTileClipped=function(){return!0},FillStyleLayer}(t_),rx=createLayout([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;function VectorTileFeature(i,o,s,x,_){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=x,this._values=_,i.readFields(readFeature,this,o)}function readFeature(i,o,s){1==i?o.id=s.readVarint():2==i?function(i,o){for(var s=i.readVarint()+i.pos;i.pos<s;){var x=o._keys[i.readVarint()],_=o._values[i.readVarint()];o.properties[x]=_}}(s,o):3==i?o.type=s.readVarint():4==i&&(o._geometry=s.pos)}function VectorTileLayer(i,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(readLayer,this,o),this.length=this._features.length}function readLayer(i,o,s){15===i?o.version=s.readVarint():1===i?o.name=s.readString():5===i?o.extent=s.readVarint():2===i?o._features.push(s.pos):3===i?o._keys.push(s.readString()):4===i&&o._values.push(function(i){for(var o=null,s=i.readVarint()+i.pos;i.pos<s;){var x=i.readVarint()>>3;o=1===x?i.readString():2===x?i.readFloat():3===x?i.readDouble():4===x?i.readVarint64():5===x?i.readVarint():6===x?i.readSVarint():7===x?i.readBoolean():null}return o}(s))}function readTile(i,o,s){if(3===i){var x=new VectorTileLayer(s,s.readVarint()+s.pos);x.length&&(o[x.name]=x)}}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var o,s=i.readVarint()+i.pos,x=1,_=0,F=0,N=0,j=[];i.pos<s;){if(_<=0){var G=i.readVarint();x=7&G,_=G>>3}if(_--,1===x||2===x)F+=i.readSVarint(),N+=i.readSVarint(),1===x&&(o&&j.push(o),o=[]),o.push(new Point(F,N));else if(7===x)o&&o.push(o[0].clone());else throw Error("unknown command "+x)}return o&&j.push(o),j},VectorTileFeature.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var o=i.readVarint()+i.pos,s=1,x=0,_=0,F=0,N=1/0,j=-1/0,G=1/0,Z=-1/0;i.pos<o;){if(x<=0){var X=i.readVarint();s=7&X,x=X>>3}if(x--,1===s||2===s)_+=i.readSVarint(),F+=i.readSVarint(),_<N&&(N=_),_>j&&(j=_),F<G&&(G=F),F>Z&&(Z=F);else if(7!==s)throw Error("unknown command "+s)}return[N,G,j,Z]},VectorTileFeature.prototype.toGeoJSON=function(i,o,s){var x,_,F=this.extent*Math.pow(2,s),N=this.extent*i,j=this.extent*o,G=this.loadGeometry(),Z=VectorTileFeature.types[this.type];function project(i){for(var o=0;o<i.length;o++){var s=i[o],x=180-(s.y+j)*360/F;i[o]=[(s.x+N)*360/F-180,360/Math.PI*Math.atan(Math.exp(x*Math.PI/180))-90]}}switch(this.type){case 1:var X=[];for(x=0;x<G.length;x++)X[x]=G[x][0];project(G=X);break;case 2:for(x=0;x<G.length;x++)project(G[x]);break;case 3:for(x=0,G=function(i){var o=i.length;if(o<=1)return[i];for(var s,x,_=[],F=0;F<o;F++){var N=function(i){for(var o,s,x=0,_=0,F=i.length,N=F-1;_<F;N=_++)o=i[_],x+=((s=i[N]).x-o.x)*(o.y+s.y);return x}(i[F]);0!==N&&(void 0===x&&(x=N<0),x===N<0?(s&&_.push(s),s=[i[F]]):s.push(i[F]))}return s&&_.push(s),_}(G);x<G.length;x++)for(_=0;_<G[x].length;_++)project(G[x][_])}1===G.length?G=G[0]:Z="Multi"+Z;var J={type:"Feature",geometry:{type:Z,coordinates:G},properties:this.properties};return"id"in this&&(J.id=this.id),J},VectorTileLayer.prototype.feature=function(i){if(i<0||i>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[i];var o=this._pbf.readVarint()+this._pbf.pos;return new VectorTileFeature(this._pbf,o,this.extent,this._keys,this._values)};var r_={VectorTile:function(i,o){this.layers=i.readFields(readTile,{},o)},VectorTileFeature:VectorTileFeature,VectorTileLayer:VectorTileLayer},rw=r_.VectorTileFeature.types;function addVertex(i,o,s,x,_,F,N,j){i.emplaceBack(o,s,2*Math.floor(8192*x)+N,16384*_,16384*F,Math.round(j))}var FillExtrusionBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new tA,this.indexArray=new tR,this.programConfigurations=new ProgramConfigurationSet(rx,i.layers,i.zoom),this.segments=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};FillExtrusionBucket.prototype.populate=function(i,o,s){this.features=[],this.hasPattern=hasPattern("fill-extrusion",this.layers,o);for(var x=0;x<i.length;x+=1){var _=i[x],F=_.feature,N=_.id,j=_.index,G=_.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,X={type:F.type,id:N,properties:F.properties,geometry:Z?loadGeometry(F):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),X,s)){var J={id:N,sourceLayerIndex:G,index:j,geometry:Z?X.geometry:loadGeometry(F),properties:F.properties,type:F.type,patterns:{}};void 0!==F.id&&(J.id=F.id),this.hasPattern?this.features.push(addPatternDependencies("fill-extrusion",this.layers,J,this.zoom,o)):this.addFeature(J,J.geometry,j,s,{}),o.featureIndex.insert(F,J.geometry,j,G,this.index,!0)}}},FillExtrusionBucket.prototype.addFeatures=function(i,o,s){for(var x=0,_=this.features;x<_.length;x+=1){var F=_[x],N=F.geometry;this.addFeature(F,N,F.index,o,s)}},FillExtrusionBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},FillExtrusionBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},FillExtrusionBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},FillExtrusionBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rx),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},FillExtrusionBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},FillExtrusionBucket.prototype.addFeature=function(i,o,s,x,_){for(var F=0,N=classifyRings(o,500);F<N.length;F+=1){for(var j=N[F],G=0,Z=0;Z<j.length;Z+=1)G+=j[Z].length;for(var X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),J=0;J<j.length;J+=1){var $=j[J];if(!(0===$.length||(en=$).every(function(i){return i.x<0})||en.every(function(i){return i.x>8192})||en.every(function(i){return i.y<0})||en.every(function(i){return i.y>8192})))for(var ee=0,et=0;et<$.length;et++){var er=$[et];if(et>=1){var en,ei=$[et-1];if((er.x!==ei.x||!(er.x<0)&&!(er.x>8192))&&(er.y!==ei.y||!(er.y<0)&&!(er.y>8192))){X.vertexLength+4>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var eo=er.sub(ei)._perp()._unit(),es=ei.dist(er);ee+es>32768&&(ee=0),addVertex(this.layoutVertexArray,er.x,er.y,eo.x,eo.y,0,0,ee),addVertex(this.layoutVertexArray,er.x,er.y,eo.x,eo.y,0,1,ee),ee+=es,addVertex(this.layoutVertexArray,ei.x,ei.y,eo.x,eo.y,0,0,ee),addVertex(this.layoutVertexArray,ei.x,ei.y,eo.x,eo.y,0,1,ee);var el=X.vertexLength;this.indexArray.emplaceBack(el,el+2,el+1),this.indexArray.emplaceBack(el+1,el+2,el+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+G>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(G,this.layoutVertexArray,this.indexArray)),"Polygon"===rw[i.type]){for(var ec=[],eu=[],ef=X.vertexLength,eh=0;eh<j.length;eh+=1){var ed=j[eh];if(0!==ed.length){ed!==j[0]&&eu.push(ec.length/2);for(var ep=0;ep<ed.length;ep++){var eg=ed[ep];addVertex(this.layoutVertexArray,eg.x,eg.y,0,0,1,1,0),ec.push(eg.x),ec.push(eg.y)}}}for(var em=rg(ec,eu),ey=0;ey<em.length;ey+=3)this.indexArray.emplaceBack(ef+em[ey],ef+em[ey+2],ef+em[ey+1]);X.primitiveLength+=em.length/3,X.vertexLength+=G}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,_,x)},register("FillExtrusionBucket",FillExtrusionBucket,{omit:["layers","features"]});var rT={paint:new Properties({"fill-extrusion-opacity":new DataConstantProperty(eP["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new DataDrivenProperty(eP["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new DataConstantProperty(eP["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new DataConstantProperty(eP["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tx(eP["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new DataDrivenProperty(eP["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new DataDrivenProperty(eP["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new DataConstantProperty(eP["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},rk=function(i){function FillExtrusionStyleLayer(o){i.call(this,o,rT)}return i&&(FillExtrusionStyleLayer.__proto__=i),FillExtrusionStyleLayer.prototype=Object.create(i&&i.prototype),FillExtrusionStyleLayer.prototype.constructor=FillExtrusionStyleLayer,FillExtrusionStyleLayer.prototype.createBucket=function(i){return new FillExtrusionBucket(i)},FillExtrusionStyleLayer.prototype.queryRadius=function(){return translateDistance(this.paint.get("fill-extrusion-translate"))},FillExtrusionStyleLayer.prototype.is3D=function(){return!0},FillExtrusionStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,x,_,F,N,j){var G=translate(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),F.angle,N),Z=this.paint.get("fill-extrusion-height").evaluate(o,s),X=this.paint.get("fill-extrusion-base").evaluate(o,s),J=function(i,o,s,x){for(var _=[],F=0;F<i.length;F+=1){var N=i[F],j=[N.x,N.y,0,1];transformMat4(j,j,o),_.push(new Point(j[0]/j[3],j[1]/j[3]))}return _}(G,j,0,0),$=function(i,o,s,x){for(var _=[],F=[],N=x[8]*o,j=x[9]*o,G=x[10]*o,Z=x[11]*o,X=x[8]*s,J=x[9]*s,$=x[10]*s,ee=x[11]*s,et=0;et<i.length;et+=1){for(var er=i[et],en=[],ei=[],eo=0;eo<er.length;eo+=1){var es=er[eo],el=es.x,ec=es.y,eu=x[0]*el+x[4]*ec+x[12],ef=x[1]*el+x[5]*ec+x[13],eh=x[2]*el+x[6]*ec+x[14],ed=x[3]*el+x[7]*ec+x[15],ep=eu+N,eg=ef+j,em=eh+G,ey=ed+Z,ev=eu+X,ex=ef+J,e_=eh+$,ew=ed+ee,eT=new Point(ep/ey,eg/ey);eT.z=em/ey,en.push(eT);var ek=new Point(ev/ew,ex/ew);ek.z=e_/ew,ei.push(ek)}_.push(en),F.push(ei)}return[_,F]}(x,X,Z,j);return function(i,o,s){var x=1/0;polygonIntersectsMultiPolygon(s,o)&&(x=getIntersectionDistance(s,o[0]));for(var _=0;_<o.length;_++)for(var F=o[_],N=i[_],j=0;j<F.length-1;j++){var G=F[j],Z=F[j+1],X=N[j],J=[G,Z,N[j+1],X,G];polygonIntersectsPolygon(s,J)&&(x=Math.min(x,getIntersectionDistance(s,J)))}return x!==1/0&&x}($[0],$[1],J)},FillExtrusionStyleLayer}(t_);function dot$2(i,o){return i.x*o.x+i.y*o.y}function getIntersectionDistance(i,o){if(1===i.length){for(var s,x=0,_=o[x++];!s||_.equals(s);)if(!(s=o[x++]))return 1/0;for(;x<o.length;x++){var F=o[x],N=i[0],j=s.sub(_),G=F.sub(_),Z=N.sub(_),X=dot$2(j,j),J=dot$2(j,G),$=dot$2(G,G),ee=dot$2(Z,j),et=dot$2(Z,G),er=X*$-J*J,en=($*ee-J*et)/er,ei=(X*et-J*ee)/er,eo=1-en-ei,es=_.z*eo+s.z*en+F.z*ei;if(isFinite(es))return es}return 1/0}for(var el=1/0,ec=0;ec<o.length;ec+=1)el=Math.min(el,o[ec].z);return el}var rA=createLayout([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,rS=r_.VectorTileFeature.types,rM=Math.cos(37.5*(Math.PI/180)),LineBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tS,this.indexArray=new tR,this.programConfigurations=new ProgramConfigurationSet(rA,i.layers,i.zoom),this.segments=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};LineBucket.prototype.populate=function(i,o,s){this.hasPattern=hasPattern("line",this.layers,o);for(var x=this.layers[0].layout.get("line-sort-key"),_=[],F=0;F<i.length;F+=1){var N=i[F],j=N.feature,G=N.id,Z=N.index,X=N.sourceLayerIndex,J=this.layers[0]._featureFilter.needGeometry,$={type:j.type,id:G,properties:j.properties,geometry:J?loadGeometry(j):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),$,s)){J||($.geometry=loadGeometry(j));var ee=x?x.evaluate($,{},s):void 0,et={id:G,properties:j.properties,type:j.type,sourceLayerIndex:X,index:Z,geometry:$.geometry,patterns:{},sortKey:ee};_.push(et)}}x&&_.sort(function(i,o){return i.sortKey-o.sortKey});for(var er=0;er<_.length;er+=1){var en=_[er],ei=en.geometry,eo=en.index,es=en.sourceLayerIndex;if(this.hasPattern){var el=addPatternDependencies("line",this.layers,en,this.zoom,o);this.patternFeatures.push(el)}else this.addFeature(en,ei,eo,s,{});var ec=i[eo].feature;o.featureIndex.insert(ec,ei,eo,es,this.index)}},LineBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},LineBucket.prototype.addFeatures=function(i,o,s){for(var x=0,_=this.patternFeatures;x<_.length;x+=1){var F=_[x];this.addFeature(F,F.geometry,F.index,o,s)}},LineBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},LineBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},LineBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rA),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},LineBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},LineBucket.prototype.addFeature=function(i,o,s,x,_){for(var F=this.layers[0].layout,N=F.get("line-join").evaluate(i,{}),j=F.get("line-cap"),G=F.get("line-miter-limit"),Z=F.get("line-round-limit"),X=0;X<o.length;X+=1){var J=o[X];this.addLine(J,i,N,j,G,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,_,x)},LineBucket.prototype.addLine=function(i,o,s,x,_,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+o.properties.mapbox_clip_start,this.clipEnd=+o.properties.mapbox_clip_end;for(var N,j=0;j<i.length-1;j++)this.totalDistance+=i[j].dist(i[j+1]);this.updateScaledDistance()}for(var G="Polygon"===rS[o.type],Z=i.length;Z>=2&&i[Z-1].equals(i[Z-2]);)Z--;for(var X=0;X<Z-1&&i[X].equals(i[X+1]);)X++;if(!(Z<(G?3:2))){"bevel"===s&&(_=1.05);var J=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray),ee=void 0,et=void 0,er=void 0,en=void 0;this.e1=this.e2=-1,G&&(N=i[Z-2],en=i[X].sub(N)._unit()._perp());for(var ei=X;ei<Z;ei++)if(!((et=ei===Z-1?G?i[X+1]:void 0:i[ei+1])&&i[ei].equals(et))){en&&(er=en),N&&(ee=N),N=i[ei],en=et?et.sub(N)._unit()._perp():er;var eo=(er=er||en).add(en);(0!==eo.x||0!==eo.y)&&eo._unit();var es=er.x*en.x+er.y*en.y,el=eo.x*en.x+eo.y*en.y,ec=0!==el?1/el:1/0,eu=2*Math.sqrt(2-2*el),ef=el<rM&&ee&&et,eh=er.x*en.y-er.y*en.x>0;if(ef&&ei>X){var ed=N.dist(ee);if(ed>2*J){var ep=N.sub(N.sub(ee)._mult(J/ed)._round());this.updateDistance(ee,ep),this.addCurrentVertex(ep,er,0,0,$),ee=ep}}var eg=ee&&et,em=eg?s:G?"butt":x;if(eg&&"round"===em&&(ec<F?em="miter":ec<=2&&(em="fakeround")),"miter"===em&&ec>_&&(em="bevel"),"bevel"===em&&(ec>2&&(em="flipbevel"),ec<_&&(em="miter")),ee&&this.updateDistance(ee,N),"miter"===em)eo._mult(ec),this.addCurrentVertex(N,eo,0,0,$);else if("flipbevel"===em){if(ec>100)eo=en.mult(-1);else{var ey=ec*er.add(en).mag()/er.sub(en).mag();eo._perp()._mult(ey*(eh?-1:1))}this.addCurrentVertex(N,eo,0,0,$),this.addCurrentVertex(N,eo.mult(-1),0,0,$)}else if("bevel"===em||"fakeround"===em){var ev=-Math.sqrt(ec*ec-1),ex=eh?ev:0,e_=eh?0:ev;if(ee&&this.addCurrentVertex(N,er,ex,e_,$),"fakeround"===em)for(var ew=Math.round(180*eu/Math.PI/20),eT=1;eT<ew;eT++){var ek=eT/ew;if(.5!==ek){var eA=ek-.5,eS=1.0904+es*(-3.2452+es*(3.55645-1.43519*es)),eM=.848013+es*(-1.06021+.215638*es);ek+=ek*eA*(ek-1)*(eS*eA*eA+eM)}var eC=en.sub(er)._mult(ek)._add(er)._unit()._mult(eh?-1:1);this.addHalfVertex(N,eC.x,eC.y,!1,eh,0,$)}et&&this.addCurrentVertex(N,en,-ex,-e_,$)}else if("butt"===em)this.addCurrentVertex(N,eo,0,0,$);else if("square"===em){var eE=ee?1:-1;this.addCurrentVertex(N,eo,eE,eE,$)}else"round"===em&&(ee&&(this.addCurrentVertex(N,er,0,0,$),this.addCurrentVertex(N,er,1,1,$,!0)),et&&(this.addCurrentVertex(N,en,-1,-1,$,!0),this.addCurrentVertex(N,en,0,0,$)));if(ef&&ei<Z-1){var eL=N.dist(et);if(eL>2*J){var eP=N.add(et.sub(N)._mult(J/eL)._round());this.updateDistance(N,eP),this.addCurrentVertex(eP,en,0,0,$),N=eP}}}}},LineBucket.prototype.addCurrentVertex=function(i,o,s,x,_,F){void 0===F&&(F=!1);var N=o.x+o.y*s,j=o.y-o.x*s,G=-o.x+o.y*x,Z=-o.y-o.x*x;this.addHalfVertex(i,N,j,F,!1,s,_),this.addHalfVertex(i,G,Z,F,!0,-x,_),this.distance>16384&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(i,o,s,x,_,F))},LineBucket.prototype.addHalfVertex=function(i,o,s,x,_,F,N){var j=i.x,G=i.y,Z=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((j<<1)+(x?1:0),(G<<1)+(_?1:0),Math.round(63*o)+128,Math.round(63*s)+128,(0===F?0:F<0?-1:1)+1|(63&Z)<<2,Z>>6);var X=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),N.primitiveLength++),_?this.e2=X:this.e1=X},LineBucket.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*32767:this.distance},LineBucket.prototype.updateDistance=function(i,o){this.distance+=i.dist(o),this.updateScaledDistance()},register("LineBucket",LineBucket,{omit:["layers","patternFeatures"]});var rC=new Properties({"line-cap":new DataConstantProperty(eP.layout_line["line-cap"]),"line-join":new DataDrivenProperty(eP.layout_line["line-join"]),"line-miter-limit":new DataConstantProperty(eP.layout_line["line-miter-limit"]),"line-round-limit":new DataConstantProperty(eP.layout_line["line-round-limit"]),"line-sort-key":new DataDrivenProperty(eP.layout_line["line-sort-key"])}),rE={paint:new Properties({"line-opacity":new DataDrivenProperty(eP.paint_line["line-opacity"]),"line-color":new DataDrivenProperty(eP.paint_line["line-color"]),"line-translate":new DataConstantProperty(eP.paint_line["line-translate"]),"line-translate-anchor":new DataConstantProperty(eP.paint_line["line-translate-anchor"]),"line-width":new DataDrivenProperty(eP.paint_line["line-width"]),"line-gap-width":new DataDrivenProperty(eP.paint_line["line-gap-width"]),"line-offset":new DataDrivenProperty(eP.paint_line["line-offset"]),"line-blur":new DataDrivenProperty(eP.paint_line["line-blur"]),"line-dasharray":new CrossFadedProperty(eP.paint_line["line-dasharray"]),"line-pattern":new tx(eP.paint_line["line-pattern"]),"line-gradient":new ColorRampProperty(eP.paint_line["line-gradient"])}),layout:rC},rL=new(function(i){function LineFloorwidthProperty(){i.apply(this,arguments)}return i&&(LineFloorwidthProperty.__proto__=i),LineFloorwidthProperty.prototype=Object.create(i&&i.prototype),LineFloorwidthProperty.prototype.constructor=LineFloorwidthProperty,LineFloorwidthProperty.prototype.possiblyEvaluate=function(o,s){return s=new EvaluationParameters(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),i.prototype.possiblyEvaluate.call(this,o,s)},LineFloorwidthProperty.prototype.evaluate=function(o,s,x,_){return s=extend({},s,{zoom:Math.floor(s.zoom)}),i.prototype.evaluate.call(this,o,s,x,_)},LineFloorwidthProperty}(DataDrivenProperty))(rE.paint.properties["line-width"].specification);rL.useIntegerZoom=!0;var rP=function(i){function LineStyleLayer(o){i.call(this,o,rE)}return i&&(LineStyleLayer.__proto__=i),LineStyleLayer.prototype=Object.create(i&&i.prototype),LineStyleLayer.prototype.constructor=LineStyleLayer,LineStyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){"line-gradient"===i&&this._updateGradient()},LineStyleLayer.prototype._updateGradient=function(){var i=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=renderColorRamp(i,"lineProgress"),this.gradientTexture=null},LineStyleLayer.prototype.recalculate=function(o,s){i.prototype.recalculate.call(this,o,s),this.paint._values["line-floorwidth"]=rL.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)},LineStyleLayer.prototype.createBucket=function(i){return new LineBucket(i)},LineStyleLayer.prototype.queryRadius=function(i){var o,s;return o=getMaximumPaintValue("line-width",this,i),((s=getMaximumPaintValue("line-gap-width",this,i))>0?s+2*o:o)/2+Math.abs(getMaximumPaintValue("line-offset",this,i))+translateDistance(this.paint.get("line-translate"))},LineStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,x,_,F,N){var j,G,Z=translate(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),F.angle,N),X=N/2*(j=this.paint.get("line-width").evaluate(o,s),(G=this.paint.get("line-gap-width").evaluate(o,s))>0?G+2*j:j),J=this.paint.get("line-offset").evaluate(o,s);return J&&(x=function(i,o){for(var s=[],x=new Point(0,0),_=0;_<i.length;_++){for(var F=i[_],N=[],j=0;j<F.length;j++){var G=F[j-1],Z=F[j],X=F[j+1],J=0===j?x:Z.sub(G)._unit()._perp(),$=j===F.length-1?x:X.sub(Z)._unit()._perp(),ee=J._add($)._unit(),et=ee.x*$.x+ee.y*$.y;ee._mult(1/et),N.push(ee._mult(o)._add(Z))}s.push(N)}return s}(x,J*N)),function(i,o,s){for(var x=0;x<o.length;x++){var _=o[x];if(i.length>=3){for(var F=0;F<_.length;F++)if(polygonContainsPoint(i,_[F]))return!0}if(function(i,o,s){if(i.length>1){if(lineIntersectsLine(i,o))return!0;for(var x=0;x<o.length;x++)if(pointIntersectsBufferedLine(o[x],i,s))return!0}for(var _=0;_<i.length;_++)if(pointIntersectsBufferedLine(i[_],o,s))return!0;return!1}(i,_,s))return!0}return!1}(Z,x,X)},LineStyleLayer.prototype.isTileClipped=function(){return!0},LineStyleLayer}(t_),rI=createLayout([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rO=createLayout([{name:"a_projected_pos",components:3,type:"Float32"}],4);createLayout([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var rD=createLayout([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);createLayout([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var rR=createLayout([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rB=createLayout([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);createLayout([{name:"triangle",components:3,type:"Uint16"}]),createLayout([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),createLayout([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),createLayout([{type:"Float32",name:"offsetX"}]),createLayout([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var rz={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","\xa2":"","\xa3":"","\xa5":"","\xa6":"","\xac":"","\xaf":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},rF={read:function(i,o,s,x,_){var F,N,j=8*_-x-1,G=(1<<j)-1,Z=G>>1,X=-7,J=s?_-1:0,$=s?-1:1,ee=i[o+J];for(J+=$,F=ee&(1<<-X)-1,ee>>=-X,X+=j;X>0;F=256*F+i[o+J],J+=$,X-=8);for(N=F&(1<<-X)-1,F>>=-X,X+=x;X>0;N=256*N+i[o+J],J+=$,X-=8);if(0===F)F=1-Z;else{if(F===G)return N?NaN:(ee?-1:1)*(1/0);N+=Math.pow(2,x),F-=Z}return(ee?-1:1)*N*Math.pow(2,F-x)},write:function(i,o,s,x,_,F){var N,j,G,Z=8*F-_-1,X=(1<<Z)-1,J=X>>1,$=23===_?5960464477539062e-23:0,ee=x?0:F-1,et=x?1:-1,er=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(j=isNaN(o)?1:0,N=X):(N=Math.floor(Math.log(o)/Math.LN2),o*(G=Math.pow(2,-N))<1&&(N--,G*=2),N+J>=1?o+=$/G:o+=$*Math.pow(2,1-J),o*G>=2&&(N++,G/=2),N+J>=X?(j=0,N=X):N+J>=1?(j=(o*G-1)*Math.pow(2,_),N+=J):(j=o*Math.pow(2,J-1)*Math.pow(2,_),N=0));_>=8;i[s+ee]=255&j,ee+=et,j/=256,_-=8);for(N=N<<_|j,Z+=_;Z>0;i[s+ee]=255&N,ee+=et,N/=256,Z-=8);i[s+ee-et]|=128*er}};function Pbf(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var rN="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function readPackedEnd(i){return i.type===Pbf.Bytes?i.readVarint()+i.pos:i.pos+1}function makeRoomForExtraLength(i,o,s){var x=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));s.realloc(x);for(var _=s.pos-1;_>=i;_--)s.buf[_+x]=s.buf[_]}function writePackedVarint(i,o){for(var s=0;s<i.length;s++)o.writeVarint(i[s])}function writePackedSVarint(i,o){for(var s=0;s<i.length;s++)o.writeSVarint(i[s])}function writePackedFloat(i,o){for(var s=0;s<i.length;s++)o.writeFloat(i[s])}function writePackedDouble(i,o){for(var s=0;s<i.length;s++)o.writeDouble(i[s])}function writePackedBoolean(i,o){for(var s=0;s<i.length;s++)o.writeBoolean(i[s])}function writePackedFixed32(i,o){for(var s=0;s<i.length;s++)o.writeFixed32(i[s])}function writePackedSFixed32(i,o){for(var s=0;s<i.length;s++)o.writeSFixed32(i[s])}function writePackedFixed64(i,o){for(var s=0;s<i.length;s++)o.writeFixed64(i[s])}function writePackedSFixed64(i,o){for(var s=0;s<i.length;s++)o.writeSFixed64(i[s])}function readUInt32(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+16777216*i[o+3]}function writeInt32(i,o,s){i[s]=o,i[s+1]=o>>>8,i[s+2]=o>>>16,i[s+3]=o>>>24}function readInt32(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+(i[o+3]<<24)}function readFontstacks(i,o,s){1===i&&s.readMessage(readFontstack,o)}function readFontstack(i,o,s){if(3===i){var x=s.readMessage(readGlyph,{}),_=x.id,F=x.bitmap,N=x.width,j=x.height,G=x.left,Z=x.top,X=x.advance;o.push({id:_,bitmap:new AlphaImage({width:N+6,height:j+6},F),metrics:{width:N,height:j,left:G,top:Z,advance:X}})}}function readGlyph(i,o,s){1===i?o.id=s.readVarint():2===i?o.bitmap=s.readBytes():3===i?o.width=s.readVarint():4===i?o.height=s.readVarint():5===i?o.left=s.readSVarint():6===i?o.top=s.readSVarint():7===i&&(o.advance=s.readVarint())}function potpack(i){for(var o=0,s=0,x=0;x<i.length;x+=1){var _=i[x];o+=_.w*_.h,s=Math.max(s,_.w)}i.sort(function(i,o){return o.h-i.h});for(var F=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),s),h:1/0}],N=0,j=0,G=0;G<i.length;G+=1)for(var Z=i[G],X=F.length-1;X>=0;X--){var J=F[X];if(!(Z.w>J.w)&&!(Z.h>J.h)){if(Z.x=J.x,Z.y=J.y,j=Math.max(j,Z.y+Z.h),N=Math.max(N,Z.x+Z.w),Z.w===J.w&&Z.h===J.h){var $=F.pop();X<F.length&&(F[X]=$)}else Z.h===J.h?(J.x+=Z.w,J.w-=Z.w):(Z.w===J.w||F.push({x:J.x+Z.w,y:J.y,w:J.w-Z.w,h:Z.h}),J.y+=Z.h,J.h-=Z.h);break}}return{w:N,h:j,fill:o/(N*j)||0}}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(i,o,s){for(s=s||this.length;this.pos<s;){var x=this.readVarint(),_=x>>3,F=this.pos;this.type=7&x,i(_,o,this),this.pos===F&&this.skip(x)}return o},readMessage:function(i,o){return this.readFields(i,o,this.readVarint()+this.pos)},readFixed32:function(){var i=readUInt32(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=readInt32(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=readUInt32(this.buf,this.pos)+4294967296*readUInt32(this.buf,this.pos+4);return this.pos+=8,i},readSFixed64:function(){var i=readUInt32(this.buf,this.pos)+4294967296*readInt32(this.buf,this.pos+4);return this.pos+=8,i},readFloat:function(){var i=rF.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=rF.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var o,s,x=this.buf;return(o=127&(s=x[this.pos++]),s<128)?o:(o|=(127&(s=x[this.pos++]))<<7,s<128)?o:(o|=(127&(s=x[this.pos++]))<<14,s<128)?o:(o|=(127&(s=x[this.pos++]))<<21,s<128)?o:function(i,o,s){var x,_,F,N,j=s.buf;if(F=(112&(N=j[s.pos++]))>>4,N<128||(F|=(127&(N=j[s.pos++]))<<3,N<128)||(F|=(127&(N=j[s.pos++]))<<10,N<128)||(F|=(127&(N=j[s.pos++]))<<17,N<128)||(F|=(127&(N=j[s.pos++]))<<24,N<128)||(F|=(1&(N=j[s.pos++]))<<31,N<128)){return x=i,_=F,o?4294967296*_+(x>>>0):(_>>>0)*4294967296+(x>>>0)}throw Error("Expected varint not more than 10 bytes")}(o|=(15&(s=x[this.pos]))<<28,i,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?-((i+1)/2):i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i,o=this.readVarint()+this.pos,s=this.pos;return(this.pos=o,o-s>=12&&rN)?(i=this.buf,rN.decode(i.subarray(s,o))):function(i,o,s){for(var x="",_=o;_<s;){var F,N,j,G=i[_],Z=null,X=G>239?4:G>223?3:G>191?2:1;if(_+X>s)break;1===X?G<128&&(Z=G):2===X?(192&(F=i[_+1]))==128&&(Z=(31&G)<<6|63&F)<=127&&(Z=null):3===X?(F=i[_+1],N=i[_+2],(192&F)==128&&(192&N)==128&&((Z=(15&G)<<12|(63&F)<<6|63&N)<=2047||Z>=55296&&Z<=57343)&&(Z=null)):4===X&&(F=i[_+1],N=i[_+2],j=i[_+3],(192&F)==128&&(192&N)==128&&(192&j)==128&&((Z=(15&G)<<18|(63&F)<<12|(63&N)<<6|63&j)<=65535||Z>=1114112)&&(Z=null)),null===Z?(Z=65533,X=1):Z>65535&&(Z-=65536,x+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),x+=String.fromCharCode(Z),_+=X}return x}(this.buf,s,o)},readBytes:function(){var i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o},readPackedVarint:function(i,o){if(this.type!==Pbf.Bytes)return i.push(this.readVarint(o));var s=readPackedEnd(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(o));return i},readPackedSVarint:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSVarint());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readBoolean());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFloat());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readDouble());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed32());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed32());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed64());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed64());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed64());return i},skip:function(i){var o=7&i;if(o===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(o===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Pbf.Fixed32)this.pos+=4;else if(o===Pbf.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+o)},writeTag:function(i,o){this.writeVarint(i<<3|o)},realloc:function(i){for(var o=this.length||16;o<this.pos+i;)o*=2;if(o!==this.length){var s=new Uint8Array(o);s.set(this.buf),this.buf=s,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),writeInt32(this.buf,-1&i,this.pos),writeInt32(this.buf,Math.floor(23283064365386963e-26*i),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),writeInt32(this.buf,-1&i,this.pos),writeInt32(this.buf,Math.floor(23283064365386963e-26*i),this.pos+4),this.pos+=8},writeVarint:function(i){if((i=+i||0)>268435455||i<0){(function(i,o){var s,x,_,F,N,j;if(i>=0?(s=i%4294967296|0,x=i/4294967296|0):(s=~(-i%4294967296),x=~(-i/4294967296),4294967295^s?s=s+1|0:(s=0,x=x+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");o.realloc(10),_=s,o.buf[o.pos++]=127&_|128,_>>>=7,o.buf[o.pos++]=127&_|128,_>>>=7,o.buf[o.pos++]=127&_|128,_>>>=7,o.buf[o.pos++]=127&_|128,_>>>=7,o.buf[o.pos]=127&_,F=x,N=o,j=(7&F)<<4,N.buf[N.pos++]|=j|((F>>>=3)?128:0),!F||(N.buf[N.pos++]=127&F|((F>>>=7)?128:0),!F)||(N.buf[N.pos++]=127&F|((F>>>=7)?128:0),!F)||(N.buf[N.pos++]=127&F|((F>>>=7)?128:0),!F)||(N.buf[N.pos++]=127&F|((F>>>=7)?128:0),F&&(N.buf[N.pos++]=127&F))})(i,this);return}this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),!(i<=127))&&(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))},writeSVarint:function(i){this.writeVarint(i<0?-(2*i)-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var o=this.pos;this.pos=function(i,o,s){for(var x,_,F=0;F<o.length;F++){if((x=o.charCodeAt(F))>55295&&x<57344){if(_){if(x<56320){i[s++]=239,i[s++]=191,i[s++]=189,_=x;continue}x=_-55296<<10|x-56320|65536,_=null}else{x>56319||F+1===o.length?(i[s++]=239,i[s++]=191,i[s++]=189):_=x;continue}}else _&&(i[s++]=239,i[s++]=191,i[s++]=189,_=null);x<128?i[s++]=x:(x<2048?i[s++]=x>>6|192:(x<65536?i[s++]=x>>12|224:(i[s++]=x>>18|240,i[s++]=x>>12&63|128),i[s++]=x>>6&63|128),i[s++]=63&x|128)}return s}(this.buf,i,this.pos);var s=this.pos-o;s>=128&&makeRoomForExtraLength(o,s,this),this.pos=o-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),rF.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),rF.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var o=i.length;this.writeVarint(o),this.realloc(o);for(var s=0;s<o;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,o){this.pos++;var s=this.pos;i(o,this);var x=this.pos-s;x>=128&&makeRoomForExtraLength(s,x,this),this.pos=s-1,this.writeVarint(x),this.pos+=x},writeMessage:function(i,o,s){this.writeTag(i,Pbf.Bytes),this.writeRawMessage(o,s)},writePackedVarint:function(i,o){o.length&&this.writeMessage(i,writePackedVarint,o)},writePackedSVarint:function(i,o){o.length&&this.writeMessage(i,writePackedSVarint,o)},writePackedBoolean:function(i,o){o.length&&this.writeMessage(i,writePackedBoolean,o)},writePackedFloat:function(i,o){o.length&&this.writeMessage(i,writePackedFloat,o)},writePackedDouble:function(i,o){o.length&&this.writeMessage(i,writePackedDouble,o)},writePackedFixed32:function(i,o){o.length&&this.writeMessage(i,writePackedFixed32,o)},writePackedSFixed32:function(i,o){o.length&&this.writeMessage(i,writePackedSFixed32,o)},writePackedFixed64:function(i,o){o.length&&this.writeMessage(i,writePackedFixed64,o)},writePackedSFixed64:function(i,o){o.length&&this.writeMessage(i,writePackedSFixed64,o)},writeBytesField:function(i,o){this.writeTag(i,Pbf.Bytes),this.writeBytes(o)},writeFixed32Field:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeSFixed64(o)},writeVarintField:function(i,o){this.writeTag(i,Pbf.Varint),this.writeVarint(o)},writeSVarintField:function(i,o){this.writeTag(i,Pbf.Varint),this.writeSVarint(o)},writeStringField:function(i,o){this.writeTag(i,Pbf.Bytes),this.writeString(o)},writeFloatField:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeFloat(o)},writeDoubleField:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeDouble(o)},writeBooleanField:function(i,o){this.writeVarintField(i,!!o)}};var ImagePosition=function(i,o){var s=o.pixelRatio,x=o.version,_=o.stretchX,F=o.stretchY,N=o.content;this.paddedRect=i,this.pixelRatio=s,this.stretchX=_,this.stretchY=F,this.content=N,this.version=x},rj={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};rj.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},rj.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},rj.tlbr.get=function(){return this.tl.concat(this.br)},rj.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ImagePosition.prototype,rj);var ImageAtlas=function(i,o){var s={},x={};this.haveRenderCallbacks=[];var _=[];this.addImages(i,s,_),this.addImages(o,x,_);var F=potpack(_),N=F.w,j=F.h,G=new RGBAImage({width:N||1,height:j||1});for(var Z in i){var X=i[Z],J=s[Z].paddedRect;RGBAImage.copy(X.data,G,{x:0,y:0},{x:J.x+1,y:J.y+1},X.data)}for(var $ in o){var ee=o[$],et=x[$].paddedRect,er=et.x+1,en=et.y+1,ei=ee.data.width,eo=ee.data.height;RGBAImage.copy(ee.data,G,{x:0,y:0},{x:er,y:en},ee.data),RGBAImage.copy(ee.data,G,{x:0,y:eo-1},{x:er,y:en-1},{width:ei,height:1}),RGBAImage.copy(ee.data,G,{x:0,y:0},{x:er,y:en+eo},{width:ei,height:1}),RGBAImage.copy(ee.data,G,{x:ei-1,y:0},{x:er-1,y:en},{width:1,height:eo}),RGBAImage.copy(ee.data,G,{x:0,y:0},{x:er+ei,y:en},{width:1,height:eo})}this.image=G,this.iconPositions=s,this.patternPositions=x};ImageAtlas.prototype.addImages=function(i,o,s){for(var x in i){var _=i[x],F={x:0,y:0,w:_.data.width+2,h:_.data.height+2};s.push(F),o[x]=new ImagePosition(F,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(x)}},ImageAtlas.prototype.patchUpdatedImages=function(i,o){for(var s in i.dispatchRenderCallbacks(this.haveRenderCallbacks),i.updatedImages)this.patchUpdatedImage(this.iconPositions[s],i.getImage(s),o),this.patchUpdatedImage(this.patternPositions[s],i.getImage(s),o)},ImageAtlas.prototype.patchUpdatedImage=function(i,o,s){if(i&&o&&i.version!==o.version){i.version=o.version;var x=i.tl,_=x[0],F=x[1];s.update(o.data,void 0,{x:_,y:F})}},register("ImagePosition",ImagePosition),register("ImageAtlas",ImageAtlas);var rU={horizontal:1,vertical:2,horizontalOnly:3},SectionOptions=function(){this.scale=1,this.fontStack="",this.imageName=null};SectionOptions.forText=function(i,o){var s=new SectionOptions;return s.scale=i||1,s.fontStack=o,s},SectionOptions.forImage=function(i){var o=new SectionOptions;return o.imageName=i,o};var TaggedString=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function shapeText(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er){var en,ei=TaggedString.fromFeature(i,_);J===rU.vertical&&ei.verticalizePunctuation();var eo=tv.processBidirectionalText,es=tv.processStyledBidirectionalText;if(eo&&1===ei.sections.length){en=[];for(var el=eo(ei.toString(),determineLineBreaks(ei,Z,F,o,x,ee,et)),ec=0;ec<el.length;ec+=1){var eu=el[ec],ef=new TaggedString;ef.text=eu,ef.sections=ei.sections;for(var eh=0;eh<eu.length;eh++)ef.sectionIndex.push(0);en.push(ef)}}else if(es){en=[];for(var ed=es(ei.text,ei.sectionIndex,determineLineBreaks(ei,Z,F,o,x,ee,et)),ep=0;ep<ed.length;ep+=1){var eg=ed[ep],em=new TaggedString;em.text=eg[0],em.sectionIndex=eg[1],em.sections=ei.sections,en.push(em)}}else en=function(i,o){for(var s=[],x=i.text,_=0,F=0;F<o.length;F+=1){var N=o[F];s.push(i.substring(_,N)),_=N}return _<x.length&&s.push(i.substring(_,x.length)),s}(ei,determineLineBreaks(ei,Z,F,o,x,ee,et));var ey=[],ev={positionedLines:ey,text:ei.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(i,o,s,x,_,F,N,j,G,Z,X,J){for(var $=0,ee=-17,et=0,er=0,en="right"===j?1:"left"===j?0:.5,ei=0,eo=0;eo<_.length;eo+=1){var es=_[eo];es.trim();var el=es.getMaxScale(),ec=(el-1)*24,eu={positionedGlyphs:[],lineOffset:0};i.positionedLines[ei]=eu;var ef=eu.positionedGlyphs,eh=0;if(!es.length()){ee+=F,++ei;continue}for(var ed=0;ed<es.length();ed++){var ep=es.getSection(ed),eg=es.getSectionIndex(ed),em=es.getCharCode(ed),ey=0,ev=null,ex=null,e_=null,ew=24,eT=!(G===rU.horizontal||!X&&!charHasUprightVerticalOrientation(em)||X&&(rV[em]||th.Arabic(em)||th["Arabic Supplement"](em)||th["Arabic Extended-A"](em)||th["Arabic Presentation Forms-A"](em)||th["Arabic Presentation Forms-B"](em)));if(ep.imageName){var ek=x[ep.imageName];if(!ek)continue;e_=ep.imageName,i.iconsInText=i.iconsInText||!0,ex=ek.paddedRect;var eA=ek.displaySize;ep.scale=24*ep.scale/J,ev={width:eA[0],height:eA[1],left:1,top:-3,advance:eT?eA[1]:eA[0]},ey=ec+(24-eA[1]*ep.scale),ew=ev.advance;var eS=eT?eA[0]*ep.scale-24*el:eA[1]*ep.scale-24*el;eS>0&&eS>eh&&(eh=eS)}else{var eM=s[ep.fontStack],eC=eM&&eM[em];if(eC&&eC.rect)ex=eC.rect,ev=eC.metrics;else{var eE=o[ep.fontStack],eL=eE&&eE[em];if(!eL)continue;ev=eL.metrics}ey=(el-ep.scale)*24}eT?(i.verticalizable=!0,ef.push({glyph:em,imageName:e_,x:$,y:ee+ey,vertical:eT,scale:ep.scale,fontStack:ep.fontStack,sectionIndex:eg,metrics:ev,rect:ex}),$+=ew*ep.scale+Z):(ef.push({glyph:em,imageName:e_,x:$,y:ee+ey,vertical:eT,scale:ep.scale,fontStack:ep.fontStack,sectionIndex:eg,metrics:ev,rect:ex}),$+=ev.advance*ep.scale+Z)}0!==ef.length&&(et=Math.max($-Z,et),function(i,o,s,x,_){if(x||_)for(var F=i[s],N=F.metrics.advance*F.scale,j=(i[s].x+N)*x,G=0;G<=s;G++)i[G].x-=j,i[G].y+=_}(ef,0,ef.length-1,en,eh)),$=0;var eP=F*el+eh;eu.lineOffset=Math.max(eh,ec),ee+=eP,er=Math.max(eP,er),++ei}var eI=ee- -17,eO=getAnchorAlignment(N),eD=eO.horizontalAlign,eR=eO.verticalAlign;(function(i,o,s,x,_,F,N,j,G){var Z=(o-s)*_,X=0;X=F!==N?-j*x- -17:(-x*G+.5)*N;for(var J=0;J<i.length;J+=1)for(var $=i[J],ee=0,et=$.positionedGlyphs;ee<et.length;ee+=1){var er=et[ee];er.x+=Z,er.y+=X}})(i.positionedLines,en,eD,eR,et,er,F,eI,_.length),i.top+=-eR*eI,i.bottom=i.top+eI,i.left+=-eD*et,i.right=i.left+et}(ev,o,s,x,en,N,j,G,J,Z,$,er),!function(i){for(var o=0;o<i.length;o+=1)if(0!==i[o].positionedGlyphs.length)return!1;return!0}(ey)&&ev}TaggedString.fromFeature=function(i,o){for(var s=new TaggedString,x=0;x<i.sections.length;x++){var _=i.sections[x];_.image?s.addImageSection(_):s.addTextSection(_,o)}return s},TaggedString.prototype.length=function(){return this.text.length},TaggedString.prototype.getSection=function(i){return this.sections[this.sectionIndex[i]]},TaggedString.prototype.getSectionIndex=function(i){return this.sectionIndex[i]},TaggedString.prototype.getCharCode=function(i){return this.text.charCodeAt(i)},TaggedString.prototype.verticalizePunctuation=function(){this.text=function(i){for(var o="",s=0;s<i.length;s++){var x=i.charCodeAt(s+1)||null,_=i.charCodeAt(s-1)||null;x&&charHasRotatedVerticalOrientation(x)&&!rz[i[s+1]]||_&&charHasRotatedVerticalOrientation(_)&&!rz[i[s-1]]||!rz[i[s]]?o+=i[s]:o+=rz[i[s]]}return o}(this.text)},TaggedString.prototype.trim=function(){for(var i=0,o=0;o<this.text.length&&rV[this.text.charCodeAt(o)];o++)i++;for(var s=this.text.length,x=this.text.length-1;x>=0&&x>=i&&rV[this.text.charCodeAt(x)];x--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)},TaggedString.prototype.substring=function(i,o){var s=new TaggedString;return s.text=this.text.substring(i,o),s.sectionIndex=this.sectionIndex.slice(i,o),s.sections=this.sections,s},TaggedString.prototype.toString=function(){return this.text},TaggedString.prototype.getMaxScale=function(){var i=this;return this.sectionIndex.reduce(function(o,s){return Math.max(o,i.sections[s].scale)},0)},TaggedString.prototype.addTextSection=function(i,o){this.text+=i.text,this.sections.push(SectionOptions.forText(i.scale,i.fontStack||o));for(var s=this.sections.length-1,x=0;x<i.text.length;++x)this.sectionIndex.push(s)},TaggedString.prototype.addImageSection=function(i){var o=i.image?i.image.name:"";if(0===o.length){warnOnce("Can't add FormattedSection with an empty image.");return}var s=this.getNextImageSectionCharCode();if(!s){warnOnce("Reached maximum number of images 6401");return}this.text+=String.fromCharCode(s),this.sections.push(SectionOptions.forImage(o)),this.sectionIndex.push(this.sections.length-1)},TaggedString.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var rV={};rV[9]=!0,rV[10]=!0,rV[11]=!0,rV[12]=!0,rV[13]=!0,rV[32]=!0;var rH={};function getGlyphAdvance(i,o,s,x,_,F){if(o.imageName){var N=x[o.imageName];return N?N.displaySize[0]*o.scale*24/F+_:0}var j=s[o.fontStack],G=j&&j[i];return G?G.metrics.advance*o.scale+_:0}function calculateBadness(i,o,s,x){var _=Math.pow(i-o,2);return x?i<o?_/2:2*_:_+Math.abs(s)*s}function evaluateBreak(i,o,s,x,_,F){for(var N=null,j=calculateBadness(o,s,_,F),G=0;G<x.length;G+=1){var Z=x[G],X=calculateBadness(o-Z.x,s,_,F)+Z.badness;X<=j&&(N=Z,j=X)}return{index:i,x:o,priorBreak:N,badness:j}}function determineLineBreaks(i,o,s,x,_,F,N){if("point"!==F||!i)return[];for(var j=[],G=function(i,o,s,x,_,F){for(var N=0,j=0;j<i.length();j++){var G=i.getSection(j);N+=getGlyphAdvance(i.getCharCode(j),G,x,_,o,F)}var Z=Math.max(1,Math.ceil(N/s));return N/Z}(i,o,s,x,_,N),Z=i.text.indexOf("")>=0,X=0,J=0;J<i.length();J++){var $=i.getSection(J),ee=i.getCharCode(J);if(rV[ee]||(X+=getGlyphAdvance(ee,$,x,_,o,N)),J<i.length()-1){var et=!(ee<11904)&&!!(th["Bopomofo Extended"](ee)||th.Bopomofo(ee)||th["CJK Compatibility Forms"](ee)||th["CJK Compatibility Ideographs"](ee)||th["CJK Compatibility"](ee)||th["CJK Radicals Supplement"](ee)||th["CJK Strokes"](ee)||th["CJK Symbols and Punctuation"](ee)||th["CJK Unified Ideographs Extension A"](ee)||th["CJK Unified Ideographs"](ee)||th["Enclosed CJK Letters and Months"](ee)||th["Halfwidth and Fullwidth Forms"](ee)||th.Hiragana(ee)||th["Ideographic Description Characters"](ee)||th["Kangxi Radicals"](ee)||th["Katakana Phonetic Extensions"](ee)||th.Katakana(ee)||th["Vertical Forms"](ee)||th["Yi Radicals"](ee)||th["Yi Syllables"](ee));(rH[ee]||et||$.imageName)&&j.push(evaluateBreak(J+1,X,G,j,function(i,o,s){var x=0;return 10===i&&(x-=1e4),s&&(x+=150),(40===i||65288===i)&&(x+=50),(41===o||65289===o)&&(x+=50),x}(ee,i.getCharCode(J+1),et&&Z),!1))}}return function leastBadBreaks(i){return i?leastBadBreaks(i.priorBreak).concat(i.index):[]}(evaluateBreak(i.length(),X,G,j,0,!0))}function getAnchorAlignment(i){var o=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:o,verticalAlign:s}}function fitIconToText(i,o,s,x,_,F){var N,j,G,Z,X,J=i.image;if(J.content){var $=J.content,ee=J.pixelRatio||1;N=[$[0]/ee,$[1]/ee,J.displaySize[0]-$[2]/ee,J.displaySize[1]-$[3]/ee]}var et=o.left*F,er=o.right*F;"width"===s||"both"===s?(X=_[0]+et-x[3],G=_[0]+er+x[1]):G=(X=_[0]+(et+er-J.displaySize[0])/2)+J.displaySize[0];var en=o.top*F,ei=o.bottom*F;return"height"===s||"both"===s?(j=_[1]+en-x[0],Z=_[1]+ei+x[2]):Z=(j=_[1]+(en+ei-J.displaySize[1])/2)+J.displaySize[1],{image:J,top:j,right:G,bottom:Z,left:X,collisionPadding:N}}rH[10]=!0,rH[32]=!0,rH[38]=!0,rH[40]=!0,rH[41]=!0,rH[43]=!0,rH[45]=!0,rH[47]=!0,rH[173]=!0,rH[183]=!0,rH[8203]=!0,rH[8208]=!0,rH[8211]=!0,rH[8231]=!0;var rq=function(i){function Anchor(o,s,x,_){i.call(this,o,s),this.angle=x,void 0!==_&&(this.segment=_)}return i&&(Anchor.__proto__=i),Anchor.prototype=Object.create(i&&i.prototype),Anchor.prototype.constructor=Anchor,Anchor.prototype.clone=function(){return new Anchor(this.x,this.y,this.angle,this.segment)},Anchor}(Point);function getSizeData(i,o){var s=o.expression;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new EvaluationParameters(i+1))};if("source"===s.kind)return{kind:"source"};for(var x=s.zoomStops,_=s.interpolationType,F=0;F<x.length&&x[F]<=i;)F++;for(var N=F=Math.max(0,F-1);N<x.length&&x[N]<i+1;)N++;N=Math.min(x.length-1,N);var j=x[F],G=x[N];if("composite"===s.kind)return{kind:"composite",minZoom:j,maxZoom:G,interpolationType:_};var Z=s.evaluate(new EvaluationParameters(j)),X=s.evaluate(new EvaluationParameters(G));return{kind:"camera",minZoom:j,maxZoom:G,minSize:Z,maxSize:X,interpolationType:_}}function evaluateSizeForFeature(i,o,s){var x=o.uSize,_=o.uSizeT,F=s.lowerSize,N=s.upperSize;return"source"===i.kind?F/128:"composite"===i.kind?number(F/128,N/128,_):x}function evaluateSizeForZoom(i,o){var s=0,x=0;if("constant"===i.kind)x=i.layoutSize;else if("source"!==i.kind){var _=i.interpolationType,F=i.minZoom,N=i.maxZoom,j=_?clamp(Interpolate.interpolationFactor(_,o,F,N),0,1):0;"camera"===i.kind?x=number(i.minSize,i.maxSize,j):s=j}return{uSizeT:s,uSize:x}}register("Anchor",rq);var rG=Object.freeze({__proto__:null,getSizeData:getSizeData,evaluateSizeForFeature:evaluateSizeForFeature,evaluateSizeForZoom:evaluateSizeForZoom,SIZE_PACK_FACTOR:128});function checkMaxAngle(i,o,s,x,_){if(void 0===o.segment)return!0;for(var F=o,N=o.segment+1,j=0;j>-s/2;){if(--N<0)return!1;j-=i[N].dist(F),F=i[N]}j+=i[N].dist(i[N+1]),N++;for(var G=[],Z=0;j<s/2;){var X=i[N-1],J=i[N],$=i[N+1];if(!$)return!1;var ee=X.angleTo(J)-J.angleTo($);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),G.push({distance:j,angleDelta:ee}),Z+=ee;j-G[0].distance>x;)Z-=G.shift().angleDelta;if(Z>_)return!1;N++,j+=J.dist($)}return!0}function getLineLength(i){for(var o=0,s=0;s<i.length-1;s++)o+=i[s].dist(i[s+1]);return o}function getShapedLabelLength(i,o){return Math.max(i?i.right-i.left:0,o?o.right-o.left:0)}function clipLine(i,o,s,x,_){for(var F=[],N=0;N<i.length;N++)for(var j=i[N],G=void 0,Z=0;Z<j.length-1;Z++){var X=j[Z],J=j[Z+1];if((!(X.x<o)||!(J.x<o))&&(X.x<o?X=new Point(o,X.y+(J.y-X.y)*((o-X.x)/(J.x-X.x)))._round():J.x<o&&(J=new Point(o,X.y+(J.y-X.y)*((o-X.x)/(J.x-X.x)))._round()),!(X.y<s)||!(J.y<s)))X.y<s?X=new Point(X.x+(J.x-X.x)*((s-X.y)/(J.y-X.y)),s)._round():J.y<s&&(J=new Point(X.x+(J.x-X.x)*((s-X.y)/(J.y-X.y)),s)._round()),(!(X.x>=x)||!(J.x>=x))&&(X.x>=x?X=new Point(x,X.y+(J.y-X.y)*((x-X.x)/(J.x-X.x)))._round():J.x>=x&&(J=new Point(x,X.y+(J.y-X.y)*((x-X.x)/(J.x-X.x)))._round()),X.y>=_&&J.y>=_||(X.y>=_?X=new Point(X.x+(J.x-X.x)*((_-X.y)/(J.y-X.y)),_)._round():J.y>=_&&(J=new Point(X.x+(J.x-X.x)*((_-X.y)/(J.y-X.y)),_)._round()),G&&X.equals(G[G.length-1])||(G=[X],F.push(G)),G.push(J)))}return F}function getIconQuads(i,o,s,x){var _=[],F=i.image,N=F.pixelRatio,j=F.paddedRect.w-2,G=F.paddedRect.h-2,Z=i.right-i.left,X=i.bottom-i.top,J=F.stretchX||[[0,j]],$=F.stretchY||[[0,G]],reduceRanges=function(i,o){return i+o[1]-o[0]},ee=J.reduce(reduceRanges,0),et=$.reduce(reduceRanges,0),er=j-ee,en=G-et,ei=0,eo=ee,es=0,el=et,ec=0,eu=er,ef=0,eh=en;if(F.content&&x){var ed=F.content;ei=sumWithinRange(J,0,ed[0]),es=sumWithinRange($,0,ed[1]),eo=sumWithinRange(J,ed[0],ed[2]),el=sumWithinRange($,ed[1],ed[3]),ec=ed[0]-ei,ef=ed[1]-es,eu=ed[2]-ed[0]-eo,eh=ed[3]-ed[1]-el}var makeBox=function(x,_,j,G){var J,$,er,en,ed,ep,eg,em,ey,ev,ex,e_,ew=(x.stretch-ei)/eo*Z+i.left,eT=(er=x.fixed-ec,er-eu*x.stretch/ee),ek=(_.stretch-es)/el*X+i.top,eA=(ep=_.fixed-ef,ep-eh*_.stretch/et),eS=(j.stretch-ei)/eo*Z+i.left,eM=(ey=j.fixed-ec,ey-eu*j.stretch/ee),eC=(G.stretch-es)/el*X+i.top,eE=(e_=G.fixed-ef,e_-eh*G.stretch/et),eL=new Point(ew,ek),eP=new Point(eS,ek),eI=new Point(eS,eC),eO=new Point(ew,eC),eD=new Point(eT/N,eA/N),eR=new Point(eM/N,eE/N),eB=o*Math.PI/180;if(eB){var ez=Math.sin(eB),eF=Math.cos(eB),eN=[eF,-ez,ez,eF];eL._matMult(eN),eP._matMult(eN),eO._matMult(eN),eI._matMult(eN)}var ej=x.stretch+x.fixed,eU=j.stretch+j.fixed,eV=_.stretch+_.fixed,eH=G.stretch+G.fixed;return{tl:eL,tr:eP,bl:eO,br:eI,tex:{x:F.paddedRect.x+1+ej,y:F.paddedRect.y+1+eV,w:eU-ej,h:eH-eV},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:eD,pixelOffsetBR:eR,minFontScaleX:eu/N/Z,minFontScaleY:eh/N/X,isSDF:s}};if(x&&(F.stretchX||F.stretchY))for(var ep=stretchZonesToCuts(J,er,ee),eg=stretchZonesToCuts($,en,et),em=0;em<ep.length-1;em++)for(var ey=ep[em],ev=ep[em+1],ex=0;ex<eg.length-1;ex++){var e_=eg[ex],ew=eg[ex+1];_.push(makeBox(ey,e_,ev,ew))}else _.push(makeBox({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:j+1},{fixed:0,stretch:G+1}));return _}function sumWithinRange(i,o,s){for(var x=0,_=0;_<i.length;_+=1){var F=i[_];x+=Math.max(o,Math.min(s,F[1]))-Math.max(o,Math.min(s,F[0]))}return x}function stretchZonesToCuts(i,o,s){for(var x=[{fixed:-1,stretch:0}],_=0;_<i.length;_+=1){var F=i[_],N=F[0],j=F[1],G=x[x.length-1];x.push({fixed:N-G.stretch,stretch:G.stretch}),x.push({fixed:N-G.stretch,stretch:G.stretch+(j-N)})}return x.push({fixed:o+1,stretch:s}),x}var CollisionFeature=function(i,o,s,x,_,F,N,j,G,Z){if(this.boxStartIndex=i.length,G){var X=F.top,J=F.bottom,$=F.collisionPadding;$&&(X-=$[1],J+=$[3]);var ee=J-X;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{var et=F.top*N-j,er=F.bottom*N+j,en=F.left*N-j,ei=F.right*N+j,eo=F.collisionPadding;if(eo&&(en-=eo[0]*N,et-=eo[1]*N,ei+=eo[2]*N,er+=eo[3]*N),Z){var es=new Point(en,et),el=new Point(ei,et),ec=new Point(en,er),eu=new Point(ei,er),ef=Z*Math.PI/180;es._rotate(ef),el._rotate(ef),ec._rotate(ef),eu._rotate(ef),en=Math.min(es.x,el.x,ec.x,eu.x),ei=Math.max(es.x,el.x,ec.x,eu.x),et=Math.min(es.y,el.y,ec.y,eu.y),er=Math.max(es.y,el.y,ec.y,eu.y)}i.emplaceBack(o.x,o.y,en,et,ei,er,s,x,_)}this.boxEndIndex=i.length},TinyQueue=function(i,o){if(void 0===i&&(i=[]),void 0===o&&(o=defaultCompare$1),this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function defaultCompare$1(i,o){return i<o?-1:i>o?1:0}function compareMax(i,o){return o.max-i.max}function Cell(i,o,s,x){this.p=new Point(i,o),this.h=s,this.d=function(i,o){for(var s=!1,x=1/0,_=0;_<o.length;_++)for(var F=o[_],N=0,j=F.length,G=j-1;N<j;G=N++){var Z=F[N],X=F[G];Z.y>i.y!=X.y>i.y&&i.x<(X.x-Z.x)*(i.y-Z.y)/(X.y-Z.y)+Z.x&&(s=!s),x=Math.min(x,distToSegmentSquared(i,Z,X))}return(s?1:-1)*Math.sqrt(x)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}TinyQueue.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},TinyQueue.prototype.pop=function(){if(0!==this.length){var i=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),i}},TinyQueue.prototype.peek=function(){return this.data[0]},TinyQueue.prototype._up=function(i){for(var o=this.data,s=this.compare,x=o[i];i>0;){var _=i-1>>1,F=o[_];if(s(x,F)>=0)break;o[i]=F,i=_}o[i]=x},TinyQueue.prototype._down=function(i){for(var o=this.data,s=this.compare,x=this.length>>1,_=o[i];i<x;){var F=(i<<1)+1,N=o[F],j=F+1;if(j<this.length&&0>s(o[j],N)&&(F=j,N=o[j]),s(N,_)>=0)break;o[i]=N,i=F}o[i]=_};var rW=Number.POSITIVE_INFINITY;function evaluateVariableOffset(i,o){return o[1]!==rW?function(i,o,s){var x=0,_=0;switch(o=Math.abs(o),s=Math.abs(s),i){case"top-right":case"top-left":case"top":_=s-7;break;case"bottom-right":case"bottom-left":case"bottom":_=-s+7}switch(i){case"top-right":case"bottom-right":case"right":x=-o;break;case"top-left":case"bottom-left":case"left":x=o}return[x,_]}(i,o[0],o[1]):function(i,o){var s=0,x=0;o<0&&(o=0);var _=o/Math.sqrt(2);switch(i){case"top-right":case"top-left":x=_-7;break;case"bottom-right":case"bottom-left":x=-_+7;break;case"bottom":x=-o+7;break;case"top":x=o-7}switch(i){case"top-right":case"bottom-right":s=-_;break;case"top-left":case"bottom-left":s=_;break;case"left":s=o;break;case"right":s=-o}return[s,x]}(i,o[0])}function getAnchorJustification(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function addTextVertices(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et){var er=function(i,o,s,x,_,F,N,j){for(var G=x.layout.get("text-rotate").evaluate(F,{})*Math.PI/180,Z=[],X=0,J=o.positionedLines;X<J.length;X+=1)for(var $=J[X],ee=0,et=$.positionedGlyphs;ee<et.length;ee+=1){var er=et[ee];if(er.rect){var en=er.rect||{},ei=4,eo=!0,es=1,el=0,ec=(_||j)&&er.vertical,eu=er.metrics.advance*er.scale/2;if(j&&o.verticalizable){var ef=(er.scale-1)*24,eh=(24-er.metrics.width*er.scale)/2;el=$.lineOffset/2-(er.imageName?-eh:ef)}if(er.imageName){var ed=N[er.imageName];eo=ed.sdf,ei=1/(es=ed.pixelRatio)}var ep=_?[er.x+eu,er.y]:[0,0],eg=_?[0,0]:[er.x+eu+s[0],er.y+s[1]-el],em=[0,0];ec&&(em=eg,eg=[0,0]);var ey=(er.metrics.left-ei)*er.scale-eu+eg[0],ev=(-er.metrics.top-ei)*er.scale+eg[1],ex=ey+en.w*er.scale/es,e_=ev+en.h*er.scale/es,ew=new Point(ey,ev),eT=new Point(ex,ev),ek=new Point(ey,e_),eA=new Point(ex,e_);if(ec){var eS=new Point(-eu,eu- -17),eM=-Math.PI/2,eC=12-eu,eE=er.imageName?eC:0,eL=new Point(22-eC,-eE),eP=new(Function.prototype.bind.apply(Point,[null].concat(em)));ew._rotateAround(eM,eS)._add(eL)._add(eP),eT._rotateAround(eM,eS)._add(eL)._add(eP),ek._rotateAround(eM,eS)._add(eL)._add(eP),eA._rotateAround(eM,eS)._add(eL)._add(eP)}if(G){var eI=Math.sin(G),eO=Math.cos(G),eD=[eO,-eI,eI,eO];ew._matMult(eD),eT._matMult(eD),ek._matMult(eD),eA._matMult(eD)}var eR=new Point(0,0),eB=new Point(0,0);Z.push({tl:ew,tr:eT,bl:ek,br:eA,tex:en,writingMode:o.writingMode,glyphOffset:ep,sectionIndex:er.sectionIndex,isSDF:eo,pixelOffsetTL:eR,pixelOffsetBR:eB,minFontScaleX:0,minFontScaleY:0})}}return Z}(0,s,j,_,F,N,x,i.allowVerticalPlacement),en=i.textSizeData,ei=null;"source"===en.kind?(ei=[128*_.layout.get("text-size").evaluate(N,{})])[0]>32640&&warnOnce(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===en.kind&&((ei=[128*ee.compositeTextSizes[0].evaluate(N,{},et),128*ee.compositeTextSizes[1].evaluate(N,{},et)])[0]>32640||ei[1]>32640)&&warnOnce(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),i.addSymbols(i.text,er,ei,j,F,N,Z,o,G.lineStartIndex,G.lineLength,$,et);for(var eo=0;eo<X.length;eo+=1)J[X[eo]]=i.text.placedSymbolArray.length-1;return 4*er.length}function getDefaultHorizontalShaping(i){for(var o in i)return i[o];return null}var rZ=r_.VectorTileFeature.types,rY=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function addVertex$1(i,o,s,x,_,F,N,j,G,Z,X,J,$){var ee=j?Math.min(32640,Math.round(j[0])):0,et=j?Math.min(32640,Math.round(j[1])):0;i.emplaceBack(o,s,Math.round(32*x),Math.round(32*_),F,N,(ee<<1)+(G?1:0),et,16*Z,16*X,256*J,256*$)}function addDynamicAttributes(i,o,s){i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s)}var SymbolBuffers=function(i){this.layoutVertexArray=new tC,this.indexArray=new tR,this.programConfigurations=i,this.segments=new SegmentVector,this.dynamicLayoutVertexArray=new tE,this.opacityVertexArray=new tL,this.placedSymbolArray=new tY};SymbolBuffers.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},SymbolBuffers.prototype.upload=function(i,o,s,x){!this.isEmpty()&&(s&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rI.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,rO.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,rY,!0),this.opacityVertexBuffer.itemSize=1),(s||x)&&this.programConfigurations.upload(i))},SymbolBuffers.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},register("SymbolBuffers",SymbolBuffers);var CollisionBuffers=function(i,o,s){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new s,this.segments=new SegmentVector,this.collisionVertexArray=new tD};CollisionBuffers.prototype.upload=function(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,rD.members,!0)},CollisionBuffers.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},register("CollisionBuffers",CollisionBuffers);var SymbolBucket=function(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=identity([]),this.placementViewportMatrix=identity([]);var o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=getSizeData(this.zoom,o["text-size"]),this.iconSizeData=getSizeData(this.zoom,o["icon-size"]);var s=this.layers[0].layout,x=s.get("symbol-sort-key"),_=s.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==_&&void 0!==x.constantOr(1);var F="viewport-y"===_||"auto"===_&&!this.sortFeaturesByKey;this.sortFeaturesByY=F&&(s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement")),"point"===s.get("symbol-placement")&&(this.writingModes=s.get("text-writing-mode").map(function(i){return rU[i]})),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id}),this.sourceID=i.sourceID};SymbolBucket.prototype.createArrays=function(){this.text=new SymbolBuffers(new ProgramConfigurationSet(rI.members,this.layers,this.zoom,function(i){return/^text/.test(i)})),this.icon=new SymbolBuffers(new ProgramConfigurationSet(rI.members,this.layers,this.zoom,function(i){return/^icon/.test(i)})),this.glyphOffsetArray=new tJ,this.lineVertexArray=new t$,this.symbolInstances=new tK},SymbolBucket.prototype.calculateGlyphDependencies=function(i,o,s,x,_){for(var F=0;F<i.length;F++)if(o[i.charCodeAt(F)]=!0,(s||x)&&_){var N=rz[i.charAt(F)];N&&(o[N.charCodeAt(0)]=!0)}},SymbolBucket.prototype.populate=function(i,o,s){var x=this.layers[0],_=x.layout,F=_.get("text-font"),N=_.get("text-field"),j=_.get("icon-image"),G=("constant"!==N.value.kind||N.value.value instanceof Formatted&&!N.value.value.isEmpty()||N.value.value.toString().length>0)&&("constant"!==F.value.kind||F.value.value.length>0),Z="constant"!==j.value.kind||!!j.value.value||Object.keys(j.parameters).length>0,X=_.get("symbol-sort-key");if(this.features=[],G||Z){for(var J=o.iconDependencies,$=o.glyphDependencies,ee=o.availableImages,et=new EvaluationParameters(this.zoom),er=0;er<i.length;er+=1){var en=i[er],ei=en.feature,eo=en.id,es=en.index,el=en.sourceLayerIndex,ec=x._featureFilter.needGeometry,eu={type:ei.type,id:eo,properties:ei.properties,geometry:ec?loadGeometry(ei):[]};if(x._featureFilter.filter(et,eu,s)){ec||(eu.geometry=loadGeometry(ei));var ef=void 0;if(G){var eh=x.getValueAndResolveTokens("text-field",eu,s,ee),ed=Formatted.factory(eh);(function(i){for(var o=0,s=i.sections;o<s.length;o+=1)if(function(i){for(var o=0;o<i.length;o+=1)if(charInRTLScript(i[o].charCodeAt(0)))return!0;return!1}(s[o].text))return!0;return!1})(ed)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===getRTLTextPluginStatus()||this.hasRTLText&&tv.isParsed())&&(ef=function(i,o,s){return i.sections.forEach(function(i){var x,_;i.text=(x=i.text,"uppercase"===(_=o.layout.get("text-transform").evaluate(s,{}))?x=x.toLocaleUpperCase():"lowercase"===_&&(x=x.toLocaleLowerCase()),tv.applyArabicShaping&&(x=tv.applyArabicShaping(x)),x)}),i}(ed,x,eu))}var ep=void 0;if(Z){var eg=x.getValueAndResolveTokens("icon-image",eu,s,ee);ep=eg instanceof ResolvedImage?eg:ResolvedImage.fromString(eg)}if(ef||ep){var em=this.sortFeaturesByKey?X.evaluate(eu,{},s):void 0,ey={id:eo,text:ef,icon:ep,index:es,sourceLayerIndex:el,geometry:loadGeometry(ei),properties:ei.properties,type:rZ[ei.type],sortKey:em};if(this.features.push(ey),ep&&(J[ep.name]=!0),ef){var ev=F.evaluate(eu,{},s).join(","),ex="map"===_.get("text-rotation-alignment")&&"point"!==_.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rU.vertical)>=0;for(var e_=0,ew=ef.sections;e_<ew.length;e_+=1){var eT=ew[e_];if(eT.image)J[eT.image.name]=!0;else{var ek=allowsVerticalWritingMode(ef.toString()),eA=eT.fontStack||ev,eS=$[eA]=$[eA]||{};this.calculateGlyphDependencies(eT.text,eS,ex,this.allowVerticalPlacement,ek)}}}}}}"line"===_.get("symbol-placement")&&(this.features=function(i){var o={},s={},x=[],_=0;function add(o){x.push(i[o]),_++}function mergeFromRight(i,o,_){var F=s[i];return delete s[i],s[o]=F,x[F].geometry[0].pop(),x[F].geometry[0]=x[F].geometry[0].concat(_[0]),F}function mergeFromLeft(i,s,_){var F=o[s];return delete o[s],o[i]=F,x[F].geometry[0].shift(),x[F].geometry[0]=_[0].concat(x[F].geometry[0]),F}function getKey(i,o,s){var x=s?o[0][o[0].length-1]:o[0][0];return i+":"+x.x+":"+x.y}for(var F=0;F<i.length;F++){var N=i[F],j=N.geometry,G=N.text?N.text.toString():null;if(!G){add(F);continue}var Z=getKey(G,j),X=getKey(G,j,!0);if(Z in s&&X in o&&s[Z]!==o[X]){var J=mergeFromLeft(Z,X,j),$=mergeFromRight(Z,X,x[J].geometry);delete o[Z],delete s[X],s[getKey(G,x[$].geometry,!0)]=$,x[J].geometry=null}else Z in s?mergeFromRight(Z,X,j):X in o?mergeFromLeft(Z,X,j):(add(F),o[Z]=_-1,s[X]=_-1)}return x.filter(function(i){return i.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(i,o){return i.sortKey-o.sortKey})}},SymbolBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,s),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,s))},SymbolBucket.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},SymbolBucket.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},SymbolBucket.prototype.upload=function(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},SymbolBucket.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},SymbolBucket.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},SymbolBucket.prototype.addToLineVertexArray=function(i,o){var s=this.lineVertexArray.length;if(void 0!==i.segment){for(var x=i.dist(o[i.segment+1]),_=i.dist(o[i.segment]),F={},N=i.segment+1;N<o.length;N++)F[N]={x:o[N].x,y:o[N].y,tileUnitDistanceFromAnchor:x},N<o.length-1&&(x+=o[N+1].dist(o[N]));for(var j=i.segment||0;j>=0;j--)F[j]={x:o[j].x,y:o[j].y,tileUnitDistanceFromAnchor:_},j>0&&(_+=o[j-1].dist(o[j]));for(var G=0;G<o.length;G++){var Z=F[G];this.lineVertexArray.emplaceBack(Z.x,Z.y,Z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},SymbolBucket.prototype.addSymbols=function(i,o,s,x,_,F,N,j,G,Z,X,J){for(var $=i.indexArray,ee=i.layoutVertexArray,et=i.segments.prepareSegment(4*o.length,ee,$,F.sortKey),er=this.glyphOffsetArray.length,en=et.vertexLength,ei=this.allowVerticalPlacement&&N===rU.vertical?Math.PI/2:0,eo=F.text&&F.text.sections,es=0;es<o.length;es++){var el=o[es],ec=el.tl,eu=el.tr,ef=el.bl,eh=el.br,ed=el.tex,ep=el.pixelOffsetTL,eg=el.pixelOffsetBR,em=el.minFontScaleX,ey=el.minFontScaleY,ev=el.glyphOffset,ex=el.isSDF,e_=el.sectionIndex,ew=et.vertexLength,eT=ev[1];addVertex$1(ee,j.x,j.y,ec.x,eT+ec.y,ed.x,ed.y,s,ex,ep.x,ep.y,em,ey),addVertex$1(ee,j.x,j.y,eu.x,eT+eu.y,ed.x+ed.w,ed.y,s,ex,eg.x,ep.y,em,ey),addVertex$1(ee,j.x,j.y,ef.x,eT+ef.y,ed.x,ed.y+ed.h,s,ex,ep.x,eg.y,em,ey),addVertex$1(ee,j.x,j.y,eh.x,eT+eh.y,ed.x+ed.w,ed.y+ed.h,s,ex,eg.x,eg.y,em,ey),addDynamicAttributes(i.dynamicLayoutVertexArray,j,ei),$.emplaceBack(ew,ew+1,ew+2),$.emplaceBack(ew+1,ew+2,ew+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ev[0]),(es===o.length-1||e_!==o[es+1].sectionIndex)&&i.programConfigurations.populatePaintArrays(ee.length,F,F.index,{},J,eo&&eo[e_])}i.placedSymbolArray.emplaceBack(j.x,j.y,er,this.glyphOffsetArray.length-er,en,G,Z,j.segment,s?s[0]:0,s?s[1]:0,x[0],x[1],N,0,!1,0,X)},SymbolBucket.prototype._addCollisionDebugVertex=function(i,o,s,x,_,F){return o.emplaceBack(0,0),i.emplaceBack(s.x,s.y,x,_,Math.round(F.x),Math.round(F.y))},SymbolBucket.prototype.addCollisionDebugVertices=function(i,o,s,x,_,F,N){var j=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),G=j.vertexLength,Z=_.layoutVertexArray,X=_.collisionVertexArray,J=N.anchorX,$=N.anchorY;this._addCollisionDebugVertex(Z,X,F,J,$,new Point(i,o)),this._addCollisionDebugVertex(Z,X,F,J,$,new Point(s,o)),this._addCollisionDebugVertex(Z,X,F,J,$,new Point(s,x)),this._addCollisionDebugVertex(Z,X,F,J,$,new Point(i,x)),j.vertexLength+=4;var ee=_.indexArray;ee.emplaceBack(G,G+1),ee.emplaceBack(G+1,G+2),ee.emplaceBack(G+2,G+3),ee.emplaceBack(G+3,G),j.primitiveLength+=4},SymbolBucket.prototype.addDebugCollisionBoxes=function(i,o,s,x){for(var _=i;_<o;_++){var F=this.collisionBoxArray.get(_),N=F.x1,j=F.y1,G=F.x2,Z=F.y2;this.addCollisionDebugVertices(N,j,G,Z,x?this.textCollisionBox:this.iconCollisionBox,F.anchorPoint,s)}},SymbolBucket.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new CollisionBuffers(tI,rR.members,tU),this.iconCollisionBox=new CollisionBuffers(tI,rR.members,tU);for(var i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}},SymbolBucket.prototype._deserializeCollisionBoxesForSymbol=function(i,o,s,x,_,F,N,j,G){for(var Z={},X=o;X<s;X++){var J=i.get(X);Z.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},Z.textFeatureIndex=J.featureIndex;break}for(var $=x;$<_;$++){var ee=i.get($);Z.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},Z.verticalTextFeatureIndex=ee.featureIndex;break}for(var et=F;et<N;et++){var er=i.get(et);Z.iconBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},Z.iconFeatureIndex=er.featureIndex;break}for(var en=j;en<G;en++){var ei=i.get(en);Z.verticalIconBox={x1:ei.x1,y1:ei.y1,x2:ei.x2,y2:ei.y2,anchorPointX:ei.anchorPointX,anchorPointY:ei.anchorPointY},Z.verticalIconFeatureIndex=ei.featureIndex;break}return Z},SymbolBucket.prototype.deserializeCollisionBoxes=function(i){this.collisionArrays=[];for(var o=0;o<this.symbolInstances.length;o++){var s=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},SymbolBucket.prototype.hasTextData=function(){return this.text.segments.get().length>0},SymbolBucket.prototype.hasIconData=function(){return this.icon.segments.get().length>0},SymbolBucket.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},SymbolBucket.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},SymbolBucket.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},SymbolBucket.prototype.addIndicesForPlacedSymbol=function(i,o){for(var s=i.placedSymbolArray.get(o),x=s.vertexStartIndex+4*s.numGlyphs,_=s.vertexStartIndex;_<x;_+=4)i.indexArray.emplaceBack(_,_+1,_+2),i.indexArray.emplaceBack(_+1,_+2,_+3)},SymbolBucket.prototype.getSortedSymbolIndexes=function(i){if(this.sortedAngle===i&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var o=Math.sin(i),s=Math.cos(i),x=[],_=[],F=[],N=0;N<this.symbolInstances.length;++N){F.push(N);var j=this.symbolInstances.get(N);x.push(0|Math.round(o*j.anchorX+s*j.anchorY)),_.push(j.featureIndex)}return F.sort(function(i,o){return x[i]-x[o]||_[o]-_[i]}),F},SymbolBucket.prototype.addToSortKeyRanges=function(i,o){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===o?s.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})},SymbolBucket.prototype.sortFeatures=function(i){var o=this;if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1)&&!(this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,x=this.symbolInstanceIndexes;s<x.length;s+=1){var _=x[s],F=this.symbolInstances.get(_);this.featureSortOrder.push(F.featureIndex),[F.rightJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.leftJustifiedTextSymbolIndex].forEach(function(i,s,x){i>=0&&x.indexOf(i)===s&&o.addIndicesForPlacedSymbol(o.text,i)}),F.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,F.verticalPlacedTextSymbolIndex),F.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.placedIconSymbolIndex),F.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,F.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},register("SymbolBucket",SymbolBucket,{omit:["layers","collisionBoxArray","features","compareText"]}),SymbolBucket.MAX_GLYPHS=65535,SymbolBucket.addDynamicAttributes=addDynamicAttributes;var rX=new Properties({"symbol-placement":new DataConstantProperty(eP.layout_symbol["symbol-placement"]),"symbol-spacing":new DataConstantProperty(eP.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new DataConstantProperty(eP.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new DataDrivenProperty(eP.layout_symbol["symbol-sort-key"]),"symbol-z-order":new DataConstantProperty(eP.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new DataConstantProperty(eP.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new DataConstantProperty(eP.layout_symbol["icon-ignore-placement"]),"icon-optional":new DataConstantProperty(eP.layout_symbol["icon-optional"]),"icon-rotation-alignment":new DataConstantProperty(eP.layout_symbol["icon-rotation-alignment"]),"icon-size":new DataDrivenProperty(eP.layout_symbol["icon-size"]),"icon-text-fit":new DataConstantProperty(eP.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new DataConstantProperty(eP.layout_symbol["icon-text-fit-padding"]),"icon-image":new DataDrivenProperty(eP.layout_symbol["icon-image"]),"icon-rotate":new DataDrivenProperty(eP.layout_symbol["icon-rotate"]),"icon-padding":new DataConstantProperty(eP.layout_symbol["icon-padding"]),"icon-keep-upright":new DataConstantProperty(eP.layout_symbol["icon-keep-upright"]),"icon-offset":new DataDrivenProperty(eP.layout_symbol["icon-offset"]),"icon-anchor":new DataDrivenProperty(eP.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new DataConstantProperty(eP.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new DataConstantProperty(eP.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new DataConstantProperty(eP.layout_symbol["text-rotation-alignment"]),"text-field":new DataDrivenProperty(eP.layout_symbol["text-field"]),"text-font":new DataDrivenProperty(eP.layout_symbol["text-font"]),"text-size":new DataDrivenProperty(eP.layout_symbol["text-size"]),"text-max-width":new DataDrivenProperty(eP.layout_symbol["text-max-width"]),"text-line-height":new DataConstantProperty(eP.layout_symbol["text-line-height"]),"text-letter-spacing":new DataDrivenProperty(eP.layout_symbol["text-letter-spacing"]),"text-justify":new DataDrivenProperty(eP.layout_symbol["text-justify"]),"text-radial-offset":new DataDrivenProperty(eP.layout_symbol["text-radial-offset"]),"text-variable-anchor":new DataConstantProperty(eP.layout_symbol["text-variable-anchor"]),"text-anchor":new DataDrivenProperty(eP.layout_symbol["text-anchor"]),"text-max-angle":new DataConstantProperty(eP.layout_symbol["text-max-angle"]),"text-writing-mode":new DataConstantProperty(eP.layout_symbol["text-writing-mode"]),"text-rotate":new DataDrivenProperty(eP.layout_symbol["text-rotate"]),"text-padding":new DataConstantProperty(eP.layout_symbol["text-padding"]),"text-keep-upright":new DataConstantProperty(eP.layout_symbol["text-keep-upright"]),"text-transform":new DataDrivenProperty(eP.layout_symbol["text-transform"]),"text-offset":new DataDrivenProperty(eP.layout_symbol["text-offset"]),"text-allow-overlap":new DataConstantProperty(eP.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new DataConstantProperty(eP.layout_symbol["text-ignore-placement"]),"text-optional":new DataConstantProperty(eP.layout_symbol["text-optional"])}),rK={paint:new Properties({"icon-opacity":new DataDrivenProperty(eP.paint_symbol["icon-opacity"]),"icon-color":new DataDrivenProperty(eP.paint_symbol["icon-color"]),"icon-halo-color":new DataDrivenProperty(eP.paint_symbol["icon-halo-color"]),"icon-halo-width":new DataDrivenProperty(eP.paint_symbol["icon-halo-width"]),"icon-halo-blur":new DataDrivenProperty(eP.paint_symbol["icon-halo-blur"]),"icon-translate":new DataConstantProperty(eP.paint_symbol["icon-translate"]),"icon-translate-anchor":new DataConstantProperty(eP.paint_symbol["icon-translate-anchor"]),"text-opacity":new DataDrivenProperty(eP.paint_symbol["text-opacity"]),"text-color":new DataDrivenProperty(eP.paint_symbol["text-color"],{runtimeType:ez,getOverride:function(i){return i.textColor},hasOverride:function(i){return!!i.textColor}}),"text-halo-color":new DataDrivenProperty(eP.paint_symbol["text-halo-color"]),"text-halo-width":new DataDrivenProperty(eP.paint_symbol["text-halo-width"]),"text-halo-blur":new DataDrivenProperty(eP.paint_symbol["text-halo-blur"]),"text-translate":new DataConstantProperty(eP.paint_symbol["text-translate"]),"text-translate-anchor":new DataConstantProperty(eP.paint_symbol["text-translate-anchor"])}),layout:rX},FormatSectionOverride=function(i){this.type=i.property.overrides?i.property.overrides.runtimeType:eO,this.defaultValue=i};FormatSectionOverride.prototype.evaluate=function(i){if(i.formattedSection){var o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default},FormatSectionOverride.prototype.eachChild=function(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)},FormatSectionOverride.prototype.outputDefined=function(){return!1},FormatSectionOverride.prototype.serialize=function(){return null},register("FormatSectionOverride",FormatSectionOverride,{omit:["defaultValue"]});var rJ=function(i){function SymbolStyleLayer(o){i.call(this,o,rK)}return i&&(SymbolStyleLayer.__proto__=i),SymbolStyleLayer.prototype=Object.create(i&&i.prototype),SymbolStyleLayer.prototype.constructor=SymbolStyleLayer,SymbolStyleLayer.prototype.recalculate=function(o,s){if(i.prototype.recalculate.call(this,o,s),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var x=this.layout.get("text-writing-mode");if(x){for(var _=[],F=0;F<x.length;F+=1){var N=x[F];0>_.indexOf(N)&&_.push(N)}this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},SymbolStyleLayer.prototype.getValueAndResolveTokens=function(i,o,s,x){var _,F=this.layout.get(i).evaluate(o,{},s,x),N=this._unevaluatedLayout._values[i];return N.isDataDriven()||isExpression(N.value)||!F?F:(_=o.properties,F.replace(/{([^{}]+)}/g,function(i,o){return o in _?String(_[o]):""}))},SymbolStyleLayer.prototype.createBucket=function(i){return new SymbolBucket(i)},SymbolStyleLayer.prototype.queryRadius=function(){return 0},SymbolStyleLayer.prototype.queryIntersectsFeature=function(){return!1},SymbolStyleLayer.prototype._setPaintOverrides=function(){for(var i=0,o=rK.paint.overridableProperties;i<o.length;i+=1){var s=o[i];if(SymbolStyleLayer.hasPaintOverride(this.layout,s)){var x=this.paint.get(s),_=new FormatSectionOverride(x),F=new StyleExpression(_,x.property.specification),N=null;N="constant"===x.value.kind||"source"===x.value.kind?new ZoomConstantExpression("source",F):new ZoomDependentExpression("composite",F,x.value.zoomStops,x.value._interpolationType),this.paint._values[s]=new PossiblyEvaluatedPropertyValue(x.property,N,x.parameters)}}},SymbolStyleLayer.prototype._handleOverridablePaintPropertyUpdate=function(i,o,s){return!(!this.layout||o.isDataDriven()||s.isDataDriven())&&SymbolStyleLayer.hasPaintOverride(this.layout,i)},SymbolStyleLayer.hasPaintOverride=function(i,o){var s=i.get("text-field"),x=rK.paint.properties[o],_=!1,checkSections=function(i){for(var o=0;o<i.length;o+=1){var s=i[o];if(x.overrides&&x.overrides.hasOverride(s)){_=!0;return}}};if("constant"===s.value.kind&&s.value.value instanceof Formatted)checkSections(s.value.value.sections);else if("source"===s.value.kind){var checkExpression=function(i){_||(i instanceof Literal&&typeOf(i.value)===eU?checkSections(i.value.sections):i instanceof FormatExpression?checkSections(i.sections):i.eachChild(checkExpression))},F=s.value;F._styleExpression&&checkExpression(F._styleExpression.expression)}return _},SymbolStyleLayer}(t_),r$={paint:new Properties({"background-color":new DataConstantProperty(eP.paint_background["background-color"]),"background-pattern":new CrossFadedProperty(eP.paint_background["background-pattern"]),"background-opacity":new DataConstantProperty(eP.paint_background["background-opacity"])})},rQ=function(i){function BackgroundStyleLayer(o){i.call(this,o,r$)}return i&&(BackgroundStyleLayer.__proto__=i),BackgroundStyleLayer.prototype=Object.create(i&&i.prototype),BackgroundStyleLayer.prototype.constructor=BackgroundStyleLayer,BackgroundStyleLayer}(t_),r0={paint:new Properties({"raster-opacity":new DataConstantProperty(eP.paint_raster["raster-opacity"]),"raster-hue-rotate":new DataConstantProperty(eP.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new DataConstantProperty(eP.paint_raster["raster-brightness-min"]),"raster-brightness-max":new DataConstantProperty(eP.paint_raster["raster-brightness-max"]),"raster-saturation":new DataConstantProperty(eP.paint_raster["raster-saturation"]),"raster-contrast":new DataConstantProperty(eP.paint_raster["raster-contrast"]),"raster-resampling":new DataConstantProperty(eP.paint_raster["raster-resampling"]),"raster-fade-duration":new DataConstantProperty(eP.paint_raster["raster-fade-duration"])})},r1=function(i){function RasterStyleLayer(o){i.call(this,o,r0)}return i&&(RasterStyleLayer.__proto__=i),RasterStyleLayer.prototype=Object.create(i&&i.prototype),RasterStyleLayer.prototype.constructor=RasterStyleLayer,RasterStyleLayer}(t_),r2=function(i){function CustomStyleLayer(o){i.call(this,o,{}),this.implementation=o}return i&&(CustomStyleLayer.__proto__=i),CustomStyleLayer.prototype=Object.create(i&&i.prototype),CustomStyleLayer.prototype.constructor=CustomStyleLayer,CustomStyleLayer.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},CustomStyleLayer.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},CustomStyleLayer.prototype.recalculate=function(){},CustomStyleLayer.prototype.updateTransitions=function(){},CustomStyleLayer.prototype.hasTransition=function(){},CustomStyleLayer.prototype.serialize=function(){},CustomStyleLayer.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},CustomStyleLayer.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},CustomStyleLayer}(t_),r3={circle:rl,heatmap:rf,hillshade:rd,fill:rv,"fill-extrusion":rk,line:rP,symbol:rJ,background:rQ,raster:r1},r5=self.HTMLImageElement,r4=self.HTMLCanvasElement,r6=self.HTMLVideoElement,r8=self.ImageData,r7=self.ImageBitmap,Texture=function(i,o,s,x){this.context=i,this.format=s,this.texture=i.gl.createTexture(),this.update(o,x)};Texture.prototype.update=function(i,o,s){var x=i.width,_=i.height,F=(!this.size||this.size[0]!==x||this.size[1]!==_)&&!s,N=this.context,j=N.gl;if(this.useMipmap=!!(o&&o.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),N.pixelStoreUnpackFlipY.set(!1),N.pixelStoreUnpack.set(1),N.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!o||!1!==o.premultiply)),F)this.size=[x,_],i instanceof r5||i instanceof r4||i instanceof r6||i instanceof r8||r7&&i instanceof r7?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,i):j.texImage2D(j.TEXTURE_2D,0,this.format,x,_,0,this.format,j.UNSIGNED_BYTE,i.data);else{var G=s||{x:0,y:0},Z=G.x,X=G.y;i instanceof r5||i instanceof r4||i instanceof r6||i instanceof r8||r7&&i instanceof r7?j.texSubImage2D(j.TEXTURE_2D,0,Z,X,j.RGBA,j.UNSIGNED_BYTE,i):j.texSubImage2D(j.TEXTURE_2D,0,Z,X,x,_,j.RGBA,j.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)},Texture.prototype.bind=function(i,o,s){var x=this.context.gl;x.bindTexture(x.TEXTURE_2D,this.texture),s!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,s||i),this.filter=i),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)},Texture.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Texture.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ThrottledInvoker=function(i){var o=this;this._callback=i,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){o._triggered=!1,o._callback()})};ThrottledInvoker.prototype.trigger=function(){var i=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){i._triggered=!1,i._callback()},0))},ThrottledInvoker.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Actor=function(i,o,s){this.target=i,this.parent=o,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},bindAll(["receive","process"],this),this.invoker=new ThrottledInvoker(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=isWorker()?i:self};function getMercCoords(i,o,s){var x=2*Math.PI*6378137/256/Math.pow(2,s);return[i*x-2*Math.PI*6378137/2,o*x-2*Math.PI*6378137/2]}Actor.prototype.send=function(i,o,s,x,_){var F=this;void 0===_&&(_=!1);var N=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[N]=s);var j=isSafari(this.globalScope)?void 0:[];return this.target.postMessage({id:N,type:i,hasCallback:!!s,targetMapId:x,mustQueue:_,sourceMapId:this.mapId,data:serialize(o,j)},j),{cancel:function(){s&&delete F.callbacks[N],F.target.postMessage({id:N,type:"<cancel>",targetMapId:x,sourceMapId:F.mapId})}}},Actor.prototype.receive=function(i){var o=i.data,s=o.id;if(s&&(!o.targetMapId||this.mapId===o.targetMapId)){if("<cancel>"===o.type){delete this.tasks[s];var x=this.cancelCallbacks[s];delete this.cancelCallbacks[s],x&&x()}else isWorker()||o.mustQueue?(this.tasks[s]=o,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,o)}},Actor.prototype.process=function(){if(this.taskQueue.length){var i=this.taskQueue.shift(),o=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(i,o)}},Actor.prototype.processTask=function(i,o){var s=this;if("<response>"===o.type){var x=this.callbacks[i];delete this.callbacks[i],x&&(o.error?x(deserialize(o.error)):x(null,deserialize(o.data)))}else{var _=!1,F=isSafari(this.globalScope)?void 0:[],N=o.hasCallback?function(o,x){_=!0,delete s.cancelCallbacks[i],s.target.postMessage({id:i,type:"<response>",sourceMapId:s.mapId,error:o?serialize(o):null,data:serialize(x,F)},F)}:function(i){_=!0},j=null,G=deserialize(o.data);if(this.parent[o.type])j=this.parent[o.type](o.sourceMapId,G,N);else if(this.parent.getWorkerSource){var Z=o.type.split(".");j=this.parent.getWorkerSource(o.sourceMapId,Z[0],G.source)[Z[1]](G,N)}else N(Error("Could not find function "+o.type));!_&&j&&j.cancel&&(this.cancelCallbacks[i]=j.cancel)}},Actor.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var LngLatBounds=function(i,o){i&&(o?this.setSouthWest(i).setNorthEast(o):4===i.length?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))};LngLatBounds.prototype.setNorthEast=function(i){return this._ne=i instanceof LngLat?new LngLat(i.lng,i.lat):LngLat.convert(i),this},LngLatBounds.prototype.setSouthWest=function(i){return this._sw=i instanceof LngLat?new LngLat(i.lng,i.lat):LngLat.convert(i),this},LngLatBounds.prototype.extend=function(i){var o,s,x=this._sw,_=this._ne;if(i instanceof LngLat)o=i,s=i;else if(!(i instanceof LngLatBounds))return Array.isArray(i)?4===i.length||i.every(Array.isArray)?this.extend(LngLatBounds.convert(i)):this.extend(LngLat.convert(i)):this;else if(o=i._sw,s=i._ne,!o||!s)return this;return x||_?(x.lng=Math.min(o.lng,x.lng),x.lat=Math.min(o.lat,x.lat),_.lng=Math.max(s.lng,_.lng),_.lat=Math.max(s.lat,_.lat)):(this._sw=new LngLat(o.lng,o.lat),this._ne=new LngLat(s.lng,s.lat)),this},LngLatBounds.prototype.getCenter=function(){return new LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},LngLatBounds.prototype.getSouthWest=function(){return this._sw},LngLatBounds.prototype.getNorthEast=function(){return this._ne},LngLatBounds.prototype.getNorthWest=function(){return new LngLat(this.getWest(),this.getNorth())},LngLatBounds.prototype.getSouthEast=function(){return new LngLat(this.getEast(),this.getSouth())},LngLatBounds.prototype.getWest=function(){return this._sw.lng},LngLatBounds.prototype.getSouth=function(){return this._sw.lat},LngLatBounds.prototype.getEast=function(){return this._ne.lng},LngLatBounds.prototype.getNorth=function(){return this._ne.lat},LngLatBounds.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},LngLatBounds.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},LngLatBounds.prototype.isEmpty=function(){return!(this._sw&&this._ne)},LngLatBounds.prototype.contains=function(i){var o=LngLat.convert(i),s=o.lng,x=o.lat,_=this._sw.lat<=x&&x<=this._ne.lat,F=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(F=this._sw.lng>=s&&s>=this._ne.lng),_&&F},LngLatBounds.convert=function(i){return!i||i instanceof LngLatBounds?i:new LngLatBounds(i)};var LngLat=function(i,o){if(isNaN(i)||isNaN(o))throw Error("Invalid LngLat object: ("+i+", "+o+")");if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")};LngLat.prototype.wrap=function(){return new LngLat(wrap(this.lng,-180,180),this.lat)},LngLat.prototype.toArray=function(){return[this.lng,this.lat]},LngLat.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},LngLat.prototype.distanceTo=function(i){var o=Math.PI/180,s=this.lat*o,x=i.lat*o;return 6371008.8*Math.acos(Math.min(Math.sin(s)*Math.sin(x)+Math.cos(s)*Math.cos(x)*Math.cos((i.lng-this.lng)*o),1))},LngLat.prototype.toBounds=function(i){void 0===i&&(i=0);var o=360*i/40075017,s=o/Math.cos(Math.PI/180*this.lat);return new LngLatBounds(new LngLat(this.lng-s,this.lat-o),new LngLat(this.lng+s,this.lat+o))},LngLat.convert=function(i){if(i instanceof LngLat)return i;if(Array.isArray(i)&&(2===i.length||3===i.length))return new LngLat(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&"object"==typeof i&&null!==i)return new LngLat(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var r9=2*Math.PI*6371008.8;function circumferenceAtLatitude(i){return r9*Math.cos(i*Math.PI/180)}function mercatorXfromLng$1(i){return(180+i)/360}function mercatorYfromLat$1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function latFromMercatorY(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}var MercatorCoordinate=function(i,o,s){void 0===s&&(s=0),this.x=+i,this.y=+o,this.z=+s};MercatorCoordinate.fromLngLat=function(i,o){void 0===o&&(o=0);var s=LngLat.convert(i);return new MercatorCoordinate(mercatorXfromLng$1(s.lng),mercatorYfromLat$1(s.lat),o/circumferenceAtLatitude(s.lat))},MercatorCoordinate.prototype.toLngLat=function(){return new LngLat(360*this.x-180,latFromMercatorY(this.y))},MercatorCoordinate.prototype.toAltitude=function(){return this.z*circumferenceAtLatitude(latFromMercatorY(this.y))},MercatorCoordinate.prototype.meterInMercatorCoordinateUnits=function(){return 1/r9*(1/Math.cos(latFromMercatorY(this.y)*Math.PI/180))};var CanonicalTileID=function(i,o,s){this.z=i,this.x=o,this.y=s,this.key=calculateKey(0,i,i,o,s)};CanonicalTileID.prototype.equals=function(i){return this.z===i.z&&this.x===i.x&&this.y===i.y},CanonicalTileID.prototype.url=function(i,o){var s,x,_,F,N,j=(s=this.x,x=this.y,F=getMercCoords(256*s,256*(x=Math.pow(2,_=this.z)-x-1),_),N=getMercCoords((s+1)*256,(x+1)*256,_),F[0]+","+F[1]+","+N[0]+","+N[1]),G=function(i,o,s){for(var x,_="",F=i;F>0;F--)_+=(o&(x=1<<F-1)?1:0)+(s&x?2:0);return _}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===o?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",G).replace("{bbox-epsg-3857}",j)},CanonicalTileID.prototype.getTilePoint=function(i){var o=Math.pow(2,this.z);return new Point((i.x*o-this.x)*8192,(i.y*o-this.y)*8192)},CanonicalTileID.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var UnwrappedTileID=function(i,o){this.wrap=i,this.canonical=o,this.key=calculateKey(i,o.z,o.z,o.x,o.y)},OverscaledTileID=function(i,o,s,x,_){this.overscaledZ=i,this.wrap=o,this.canonical=new CanonicalTileID(s,+x,+_),this.key=calculateKey(o,i,s,x,_)};function calculateKey(i,o,s,x,_){(i*=2)<0&&(i=-1*i-1);var F=1<<s;return(F*F*i+F*_+x).toString(36)+s.toString(36)+o.toString(36)}OverscaledTileID.prototype.equals=function(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)},OverscaledTileID.prototype.scaledTo=function(i){var o=this.canonical.z-i;return i>this.canonical.z?new OverscaledTileID(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new OverscaledTileID(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)},OverscaledTileID.prototype.calculateScaledKey=function(i,o){var s=this.canonical.z-i;return i>this.canonical.z?calculateKey(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y):calculateKey(this.wrap*+o,i,i,this.canonical.x>>s,this.canonical.y>>s)},OverscaledTileID.prototype.isChildOf=function(i){if(i.wrap!==this.wrap)return!1;var o=this.canonical.z-i.canonical.z;return 0===i.overscaledZ||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o},OverscaledTileID.prototype.children=function(i){if(this.overscaledZ>=i)return[new OverscaledTileID(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var o=this.canonical.z+1,s=2*this.canonical.x,x=2*this.canonical.y;return[new OverscaledTileID(o,this.wrap,o,s,x),new OverscaledTileID(o,this.wrap,o,s+1,x),new OverscaledTileID(o,this.wrap,o,s,x+1),new OverscaledTileID(o,this.wrap,o,s+1,x+1)]},OverscaledTileID.prototype.isLessThan=function(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))},OverscaledTileID.prototype.wrapped=function(){return new OverscaledTileID(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},OverscaledTileID.prototype.unwrapTo=function(i){return new OverscaledTileID(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)},OverscaledTileID.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},OverscaledTileID.prototype.toUnwrapped=function(){return new UnwrappedTileID(this.wrap,this.canonical)},OverscaledTileID.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},OverscaledTileID.prototype.getTilePoint=function(i){return this.canonical.getTilePoint(new MercatorCoordinate(i.x-this.wrap,i.y))},register("CanonicalTileID",CanonicalTileID),register("OverscaledTileID",OverscaledTileID,{omit:["posMatrix"]});var DEMData=function(i,o,s){if(this.uid=i,o.height!==o.width)throw RangeError("DEM tiles must be square");if(s&&"mapbox"!==s&&"terrarium"!==s)return warnOnce('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=o.height;var x=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=s||"mapbox";for(var _=0;_<x;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(x,_)]=this.data[this._idx(x-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,x)]=this.data[this._idx(_,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)],this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)],this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};DEMData.prototype.get=function(i,o){var s=new Uint8Array(this.data.buffer),x=4*this._idx(i,o);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(s[x],s[x+1],s[x+2])},DEMData.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},DEMData.prototype._idx=function(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)},DEMData.prototype._unpackMapbox=function(i,o,s){return(65536*i+256*o+s)/10-1e4},DEMData.prototype._unpackTerrarium=function(i,o,s){return 256*i+o+s/256-32768},DEMData.prototype.getPixels=function(){return new RGBAImage({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},DEMData.prototype.backfillBorder=function(i,o,s){if(this.dim!==i.dim)throw Error("dem dimension mismatch");var x=o*this.dim,_=o*this.dim+this.dim,F=s*this.dim,N=s*this.dim+this.dim;switch(o){case -1:x=_-1;break;case 1:_=x+1}switch(s){case -1:F=N-1;break;case 1:N=F+1}for(var j=-o*this.dim,G=-s*this.dim,Z=F;Z<N;Z++)for(var X=x;X<_;X++)this.data[this._idx(X,Z)]=i.data[this._idx(X+j,Z+G)]},register("DEMData",DEMData);var DictionaryCoder=function(i){this._stringToNumber={},this._numberToString=[];for(var o=0;o<i.length;o++){var s=i[o];this._stringToNumber[s]=o,this._numberToString[o]=s}};DictionaryCoder.prototype.encode=function(i){return this._stringToNumber[i]},DictionaryCoder.prototype.decode=function(i){return this._numberToString[i]};var Feature=function(i,o,s,x,_){this.type="Feature",this._vectorTileFeature=i,i._z=o,i._x=s,i._y=x,this.properties=i.properties,this.id=_},ne={geometry:{configurable:!0}};ne.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ne.geometry.set=function(i){this._geometry=i},Feature.prototype.toJSON=function(){var i={geometry:this.geometry};for(var o in this)"_geometry"!==o&&"_vectorTileFeature"!==o&&(i[o]=this[o]);return i},Object.defineProperties(Feature.prototype,ne);var SourceFeatureState=function(){this.state={},this.stateChanges={},this.deletedStates={}};SourceFeatureState.prototype.updateState=function(i,o,s){var x=String(o);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][x]=this.stateChanges[i][x]||{},extend(this.stateChanges[i][x],s),null===this.deletedStates[i])for(var _ in this.deletedStates[i]={},this.state[i])_!==x&&(this.deletedStates[i][_]=null);else if(this.deletedStates[i]&&null===this.deletedStates[i][x])for(var F in this.deletedStates[i][x]={},this.state[i][x])s[F]||(this.deletedStates[i][x][F]=null);else for(var N in s)this.deletedStates[i]&&this.deletedStates[i][x]&&null===this.deletedStates[i][x][N]&&delete this.deletedStates[i][x][N]},SourceFeatureState.prototype.removeFeatureState=function(i,o,s){if(null!==this.deletedStates[i]){var x=String(o);if(this.deletedStates[i]=this.deletedStates[i]||{},s&&void 0!==o)null!==this.deletedStates[i][x]&&(this.deletedStates[i][x]=this.deletedStates[i][x]||{},this.deletedStates[i][x][s]=null);else if(void 0!==o){if(this.stateChanges[i]&&this.stateChanges[i][x])for(s in this.deletedStates[i][x]={},this.stateChanges[i][x])this.deletedStates[i][x][s]=null;else this.deletedStates[i][x]=null}else this.deletedStates[i]=null}},SourceFeatureState.prototype.getState=function(i,o){var s=String(o),x=this.state[i]||{},_=this.stateChanges[i]||{},F=extend({},x[s],_[s]);if(null===this.deletedStates[i])return{};if(this.deletedStates[i]){var N=this.deletedStates[i][o];if(null===N)return{};for(var j in N)delete F[j]}return F},SourceFeatureState.prototype.initializeTileState=function(i,o){i.setFeatureState(this.state,o)},SourceFeatureState.prototype.coalesceChanges=function(i,o){var s={};for(var x in this.stateChanges){this.state[x]=this.state[x]||{};var _={};for(var F in this.stateChanges[x])this.state[x][F]||(this.state[x][F]={}),extend(this.state[x][F],this.stateChanges[x][F]),_[F]=this.state[x][F];s[x]=_}for(var N in this.deletedStates){this.state[N]=this.state[N]||{};var j={};if(null===this.deletedStates[N])for(var G in this.state[N])j[G]={},this.state[N][G]={};else for(var Z in this.deletedStates[N]){if(null===this.deletedStates[N][Z])this.state[N][Z]={};else for(var X=0,J=Object.keys(this.deletedStates[N][Z]);X<J.length;X+=1){var $=J[X];delete this.state[N][Z][$]}j[Z]=this.state[N][Z]}s[N]=s[N]||{},extend(s[N],j)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(s).length)for(var ee in i)i[ee].setFeatureState(s,o)};var FeatureIndex=function(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new GridIndex(8192,16,0),this.grid3D=new GridIndex(8192,16,0),this.featureIndexArray=new t0,this.promoteId=o};function evaluateProperties(i,o,s,x,_){return mapObject(i,function(i,F){var N=o instanceof PossiblyEvaluated?o.get(F):null;return N&&N.evaluate?N.evaluate(s,x,_):N})}function getBounds(i){for(var o=1/0,s=1/0,x=-1/0,_=-1/0,F=0;F<i.length;F+=1){var N=i[F];o=Math.min(o,N.x),s=Math.min(s,N.y),x=Math.max(x,N.x),_=Math.max(_,N.y)}return{minX:o,minY:s,maxX:x,maxY:_}}function topDownFeatureComparator(i,o){return o-i}FeatureIndex.prototype.insert=function(i,o,s,x,_,F){var N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,x,_);for(var j=F?this.grid3D:this.grid,G=0;G<o.length;G++){for(var Z=o[G],X=[1/0,1/0,-1/0,-1/0],J=0;J<Z.length;J++){var $=Z[J];X[0]=Math.min(X[0],$.x),X[1]=Math.min(X[1],$.y),X[2]=Math.max(X[2],$.x),X[3]=Math.max(X[3],$.y)}X[0]<8192&&X[1]<8192&&X[2]>=0&&X[3]>=0&&j.insert(N,X[0],X[1],X[2],X[3])}},FeatureIndex.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new r_.VectorTile(new Pbf(this.rawTileData)).layers,this.sourceLayerCoder=new DictionaryCoder(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},FeatureIndex.prototype.query=function(i,o,s,x){var _,F=this;this.loadVTLayers();for(var N=i.params||{},j=8192/i.tileSize/i.scale,G=createFilter(N.filter),Z=i.queryGeometry,X=i.queryPadding*j,J=getBounds(Z),$=this.grid.query(J.minX-X,J.minY-X,J.maxX+X,J.maxY+X),ee=getBounds(i.cameraQueryGeometry),et=this.grid3D.query(ee.minX-X,ee.minY-X,ee.maxX+X,ee.maxY+X,function(o,s,x,_){return function(i,o,s,x,_){for(var F=0;F<i.length;F+=1){var N=i[F];if(o<=N.x&&s<=N.y&&x>=N.x&&_>=N.y)return!0}var j=[new Point(o,s),new Point(o,_),new Point(x,_),new Point(x,s)];if(i.length>2){for(var G=0;G<j.length;G+=1)if(polygonContainsPoint(i,j[G]))return!0}for(var Z=0;Z<i.length-1;Z++)if(function(i,o,s){var x=s[0],_=s[2];if(i.x<x.x&&o.x<x.x||i.x>_.x&&o.x>_.x||i.y<x.y&&o.y<x.y||i.y>_.y&&o.y>_.y)return!1;var F=isCounterClockwise(i,o,s[0]);return F!==isCounterClockwise(i,o,s[1])||F!==isCounterClockwise(i,o,s[2])||F!==isCounterClockwise(i,o,s[3])}(i[Z],i[Z+1],j))return!0;return!1}(i.cameraQueryGeometry,o-X,s-X,x+X,_+X)}),er=0;er<et.length;er+=1){var en=et[er];$.push(en)}$.sort(topDownFeatureComparator);for(var ei={},eo=0;eo<$.length;eo++)!function(X){var J=$[X];if(J!==_){_=J;var ee=F.featureIndexArray.get(J),et=null;F.loadMatchingFeature(ei,ee.bucketIndex,ee.sourceLayerIndex,ee.featureIndex,G,N.layers,N.availableImages,o,s,x,function(o,s,x){return et||(et=loadGeometry(o)),s.queryIntersectsFeature(Z,o,x,et,F.z,i.transform,j,i.pixelPosMatrix)})}}(eo);return ei},FeatureIndex.prototype.loadMatchingFeature=function(i,o,s,x,_,F,N,j,G,Z,X){var J=this.bucketLayerIDs[o];if(!F||function(i,o){for(var s=0;s<i.length;s++)if(o.indexOf(i[s])>=0)return!0;return!1}(F,J)){var $=this.sourceLayerCoder.decode(s),ee=this.vtLayers[$].feature(x);if(_.filter(new EvaluationParameters(this.tileID.overscaledZ),ee))for(var et=this.getId(ee,$),er=0;er<J.length;er++){var en=J[er];if(!(F&&0>F.indexOf(en))){var ei=j[en];if(ei){var eo={};void 0!==et&&Z&&(eo=Z.getState(ei.sourceLayer||"_geojsonTileLayer",et));var es=G[en];es.paint=evaluateProperties(es.paint,ei.paint,ee,eo,N),es.layout=evaluateProperties(es.layout,ei.layout,ee,eo,N);var el=!X||X(ee,ei,eo);if(el){var ec=new Feature(ee,this.z,this.x,this.y,et);ec.layer=es;var eu=i[en];void 0===eu&&(eu=i[en]=[]),eu.push({featureIndex:x,feature:ec,intersectionZ:el})}}}}}},FeatureIndex.prototype.lookupSymbolFeatures=function(i,o,s,x,_,F,N,j){var G={};this.loadVTLayers();for(var Z=createFilter(_),X=0;X<i.length;X+=1){var J=i[X];this.loadMatchingFeature(G,s,x,J,Z,F,N,j,o)}return G},FeatureIndex.prototype.hasLayer=function(i){for(var o=0,s=this.bucketLayerIDs;o<s.length;o+=1)for(var x=s[o],_=0;_<x.length;_+=1)if(i===x[_])return!0;return!1},FeatureIndex.prototype.getId=function(i,o){var s=i.id;if(this.promoteId){var x="string"==typeof this.promoteId?this.promoteId:this.promoteId[o];"boolean"==typeof(s=i.properties[x])&&(s=Number(s))}return s},register("FeatureIndex",FeatureIndex,{omit:["rawTileData","sourceLayerCoder"]});var Tile=function(i,o){this.tileID=i,this.uid=uniqueId(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Tile.prototype.registerFadeDuration=function(i){var o=i+this.timeAdded;o<ec.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)},Tile.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Tile.prototype.loadVectorData=function(i,o,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!i){this.collisionBoxArray=new tW;return}for(var x in i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(i,o){var s={};if(!o)return s;for(var x=0,_=i;x<_.length;x+=1)!function(){var i=_[x],F=i.layerIds.map(function(i){return o.getLayer(i)}).filter(Boolean);if(0!==F.length){i.layers=F,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map(function(i){return F.filter(function(o){return o.id===i})[0]}));for(var N=0;N<F.length;N+=1)s[F[N].id]=i}}();return s}(i.buckets,o.style),this.hasSymbolBuckets=!1,this.buckets){var _=this.buckets[x];if(_ instanceof SymbolBucket){if(this.hasSymbolBuckets=!0,s)_.justReloaded=!0;else break}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var F in this.buckets){var N=this.buckets[F];if(N instanceof SymbolBucket&&N.hasRTLText){this.hasRTLText=!0,lazyLoadRTLTextPlugin();break}}for(var j in this.queryPadding=0,this.buckets){var G=this.buckets[j];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(j).queryRadius(G))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)},Tile.prototype.unloadVectorData=function(){for(var i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Tile.prototype.getBucket=function(i){return this.buckets[i.id]},Tile.prototype.upload=function(i){for(var o in this.buckets){var s=this.buckets[o];s.uploadPending()&&s.upload(i)}var x=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Texture(i,this.imageAtlas.image,x.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Texture(i,this.glyphAtlasImage,x.ALPHA),this.glyphAtlasImage=null)},Tile.prototype.prepare=function(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)},Tile.prototype.queryRenderedFeatures=function(i,o,s,x,_,F,N,j,G,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:_,scale:F,tileSize:this.tileSize,pixelPosMatrix:Z,transform:j,params:N,queryPadding:this.queryPadding*G},i,o,s):{}},Tile.prototype.querySourceFeatures=function(i,o){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var x=s.loadVTLayers(),_=o?o.sourceLayer:"",F=x._geojsonTileLayer||x[_];if(F)for(var N=createFilter(o&&o.filter),j=this.tileID.canonical,G=j.z,Z=j.x,X=j.y,J={z:G,x:Z,y:X},$=0;$<F.length;$++){var ee=F.feature($);if(N.filter(new EvaluationParameters(this.tileID.overscaledZ),ee)){var et=s.getId(ee,_),er=new Feature(ee,G,Z,X,et);er.tile=J,i.push(er)}}}},Tile.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Tile.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Tile.prototype.setExpiryData=function(i){var o=this.expirationTime;if(i.cacheControl){var s=parseCacheControl(i.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){var x=Date.now(),_=!1;if(this.expirationTime>x)_=!1;else if(o){if(this.expirationTime<o)_=!0;else{var F=this.expirationTime-o;F?this.expirationTime=x+Math.max(F,3e4):_=!0}}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Tile.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),2147483647)},Tile.prototype.setFeatureState=function(i,o){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(i).length){var s=this.latestFeatureIndex.loadVTLayers();for(var x in this.buckets)if(o.style.hasLayer(x)){var _=this.buckets[x],F=_.layers[0].sourceLayer||"_geojsonTileLayer",N=s[F],j=i[F];if(N&&j&&0!==Object.keys(j).length){_.update(j,N,this.imageAtlas&&this.imageAtlas.patternPositions||{});var G=o&&o.style&&o.style.getLayer(x);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(_)))}}}},Tile.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Tile.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ec.now()},Tile.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Tile.prototype.setHoldDuration=function(i){this.symbolFadeHoldUntil=ec.now()+i},Tile.prototype.setDependencies=function(i,o){for(var s={},x=0;x<o.length;x+=1)s[o[x]]=!0;this.dependencies[i]=s},Tile.prototype.hasDependency=function(i,o){for(var s=0;s<i.length;s+=1){var x=i[s],_=this.dependencies[x];if(_){for(var F=0;F<o.length;F+=1)if(_[o[F]])return!0}}return!1};var nt=self.performance,RequestPerformance=function(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},nt.mark(this._marks.start)};RequestPerformance.prototype.finish=function(){nt.mark(this._marks.end);var i=nt.getEntriesByName(this._marks.measure);return 0===i.length&&(nt.measure(this._marks.measure,this._marks.start,this._marks.end),i=nt.getEntriesByName(this._marks.measure),nt.clearMarks(this._marks.start),nt.clearMarks(this._marks.end),nt.clearMeasures(this._marks.measure)),i},i.Actor=Actor,i.AlphaImage=AlphaImage,i.CanonicalTileID=CanonicalTileID,i.CollisionBoxArray=tW,i.Color=Color,i.DEMData=DEMData,i.DataConstantProperty=DataConstantProperty,i.DictionaryCoder=DictionaryCoder,i.EXTENT=8192,i.ErrorEvent=eL,i.EvaluationParameters=EvaluationParameters,i.Event=Event,i.Evented=Evented,i.FeatureIndex=FeatureIndex,i.FillBucket=FillBucket,i.FillExtrusionBucket=FillExtrusionBucket,i.ImageAtlas=ImageAtlas,i.ImagePosition=ImagePosition,i.LineBucket=LineBucket,i.LngLat=LngLat,i.LngLatBounds=LngLatBounds,i.MercatorCoordinate=MercatorCoordinate,i.ONE_EM=24,i.OverscaledTileID=OverscaledTileID,i.Point=Point,i.Point$1=Point,i.Properties=Properties,i.Protobuf=Pbf,i.RGBAImage=RGBAImage,i.RequestManager=RequestManager,i.RequestPerformance=RequestPerformance,i.ResourceType=eM,i.SegmentVector=SegmentVector,i.SourceFeatureState=SourceFeatureState,i.StructArrayLayout1ui2=tV,i.StructArrayLayout2f1f2i16=tO,i.StructArrayLayout2i4=tT,i.StructArrayLayout3ui6=tR,i.StructArrayLayout4i8=tk,i.SymbolBucket=SymbolBucket,i.Texture=Texture,i.Tile=Tile,i.Transitionable=Transitionable,i.Uniform1f=t6,i.Uniform1i=t4,i.Uniform2f=t8,i.Uniform3f=t7,i.Uniform4f=t9,i.UniformColor=re,i.UniformMatrix4f=rr,i.UnwrappedTileID=UnwrappedTileID,i.ValidationError=ValidationError,i.WritingMode=rU,i.ZoomHistory=ZoomHistory,i.add=function(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i},i.addDynamicAttributes=addDynamicAttributes,i.asyncAll=function(i,o,s){if(!i.length)return s(null,[]);var x=i.length,_=Array(i.length),F=null;i.forEach(function(i,N){o(i,function(i,o){i&&(F=i),_[N]=o,0==--x&&s(F,_)})})},i.bezier=bezier,i.bindAll=bindAll,i.browser=ec,i.cacheEntryPossiblyAdded=function(i){++eS>eA&&(i.getActor().send("enforceCacheSizeLimit",ek),eS=0)},i.clamp=clamp,i.clearTileCache=function(i){var o=self.caches.delete(eT);i&&o.catch(i).then(function(){return i()})},i.clipLine=clipLine,i.clone=function(i){var o=new rs(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o},i.clone$1=clone,i.clone$2=function(i){var o=new rs(3);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o},i.collisionCircleLayout=rB,i.config=eu,i.create=function(){var i=new rs(16);return rs!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},i.create$1=function(){var i=new rs(9);return rs!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i},i.create$2=function(){var i=new rs(4);return rs!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i},i.createCommonjsModule=createCommonjsModule,i.createExpression=createExpression,i.createLayout=createLayout,i.createStyleLayer=function(i){return"custom"===i.type?new r2(i):new r3[i.type](i)},i.cross=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=s[0],j=s[1],G=s[2];return i[0]=_*G-F*j,i[1]=F*N-x*G,i[2]=x*j-_*N,i},i.deepEqual=function deepEqual(i,o){if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!deepEqual(i[s],o[s]))return!1;return!0}if("object"==typeof i&&null!==i&&null!==o){if("object"!=typeof o||Object.keys(i).length!==Object.keys(o).length)return!1;for(var x in i)if(!deepEqual(i[x],o[x]))return!1;return!0}return i===o},i.dot=function(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]},i.dot$1=function(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]},i.ease=et,i.emitValidationErrors=emitValidationErrors,i.endsWith=endsWith,i.enforceCacheSizeLimit=function(i){cacheOpen(),G&&G.then(function(o){o.keys().then(function(s){for(var x=0;x<s.length-i;x++)o.delete(s[x])})})},i.evaluateSizeForFeature=evaluateSizeForFeature,i.evaluateSizeForZoom=evaluateSizeForZoom,i.evaluateVariableOffset=evaluateVariableOffset,i.evented=ty,i.extend=extend,i.featureFilter=createFilter,i.filterObject=filterObject,i.fromRotation=function(i,o){var s=Math.sin(o),x=Math.cos(o);return i[0]=x,i[1]=s,i[2]=0,i[3]=-s,i[4]=x,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},i.getAnchorAlignment=getAnchorAlignment,i.getAnchorJustification=getAnchorJustification,i.getArrayBuffer=getArrayBuffer,i.getImage=getImage,i.getJSON=function(i,o){return makeRequest(extend(i,{type:"json"}),o)},i.getRTLTextPluginStatus=getRTLTextPluginStatus,i.getReferrer=eE,i.getVideo=function(i,o){var s=self.document.createElement("video");s.muted=!0,s.onloadstart=function(){o(null,s)};for(var x=0;x<i.length;x++){var _=self.document.createElement("source");!function(i){var o=self.document.createElement("a");return o.href=i,o.protocol===self.document.location.protocol&&o.host===self.document.location.host}(i[x])&&(s.crossOrigin="Anonymous"),_.src=i[x],s.appendChild(_)}return{cancel:function(){}}},i.identity=identity,i.invert=function(i,o){var s=o[0],x=o[1],_=o[2],F=o[3],N=o[4],j=o[5],G=o[6],Z=o[7],X=o[8],J=o[9],$=o[10],ee=o[11],et=o[12],er=o[13],en=o[14],ei=o[15],eo=s*j-x*N,es=s*G-_*N,el=s*Z-F*N,ec=x*G-_*j,eu=x*Z-F*j,ef=_*Z-F*G,eh=X*er-J*et,ed=X*en-$*et,ep=X*ei-ee*et,eg=J*en-$*er,em=J*ei-ee*er,ey=$*ei-ee*en,ev=eo*ey-es*em+el*eg+ec*ep-eu*ed+ef*eh;return ev?(ev=1/ev,i[0]=(j*ey-G*em+Z*eg)*ev,i[1]=(_*em-x*ey-F*eg)*ev,i[2]=(er*ef-en*eu+ei*ec)*ev,i[3]=($*eu-J*ef-ee*ec)*ev,i[4]=(G*ep-N*ey-Z*ed)*ev,i[5]=(s*ey-_*ep+F*ed)*ev,i[6]=(en*el-et*ef-ei*es)*ev,i[7]=(X*ef-$*el+ee*es)*ev,i[8]=(N*em-j*ep+Z*eh)*ev,i[9]=(x*ep-s*em-F*eh)*ev,i[10]=(et*eu-er*el+ei*eo)*ev,i[11]=(J*el-X*eu-ee*eo)*ev,i[12]=(j*ed-N*eg-G*eh)*ev,i[13]=(s*eg-x*ed+_*eh)*ev,i[14]=(er*es-et*ec-en*eo)*ev,i[15]=(X*ec-J*es+$*eo)*ev,i):null},i.isChar=th,i.isMapboxURL=isMapboxURL,i.keysDifference=function(i,o){var s=[];for(var x in i)x in o||s.push(x);return s},i.makeRequest=makeRequest,i.mapObject=mapObject,i.mercatorXfromLng=mercatorXfromLng$1,i.mercatorYfromLat=mercatorYfromLat$1,i.mercatorZfromAltitude=function(i,o){return i/circumferenceAtLatitude(o)},i.mul=multiply,i.multiply=multiply,i.mvt=r_,i.normalize=function(i,o){var s=o[0],x=o[1],_=o[2],F=s*s+x*x+_*_;return F>0&&(F=1/Math.sqrt(F)),i[0]=o[0]*F,i[1]=o[1]*F,i[2]=o[2]*F,i},i.number=number,i.offscreenCanvasSupported=offscreenCanvasSupported,i.ortho=function(i,o,s,x,_,F,N){var j=1/(o-s),G=1/(x-_),Z=1/(F-N);return i[0]=-2*j,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*G,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*Z,i[11]=0,i[12]=(o+s)*j,i[13]=(_+x)*G,i[14]=(N+F)*Z,i[15]=1,i},i.parseGlyphPBF=function(i){return new Pbf(i).readFields(readFontstacks,[])},i.pbf=Pbf,i.performSymbolLayout=function(i,o,s,x,_,F,N){i.createArrays();var j=512*i.overscaling;i.tilePixelRatio=8192/j,i.compareText={},i.iconsNeedLinear=!1;var G=i.layers[0].layout,Z=i.layers[0]._unevaluatedLayout._values,X={};if("composite"===i.textSizeData.kind){var J=i.textSizeData,$=J.minZoom,ee=J.maxZoom;X.compositeTextSizes=[Z["text-size"].possiblyEvaluate(new EvaluationParameters($),N),Z["text-size"].possiblyEvaluate(new EvaluationParameters(ee),N)]}if("composite"===i.iconSizeData.kind){var et=i.iconSizeData,er=et.minZoom,en=et.maxZoom;X.compositeIconSizes=[Z["icon-size"].possiblyEvaluate(new EvaluationParameters(er),N),Z["icon-size"].possiblyEvaluate(new EvaluationParameters(en),N)]}X.layoutTextSize=Z["text-size"].possiblyEvaluate(new EvaluationParameters(i.zoom+1),N),X.layoutIconSize=Z["icon-size"].possiblyEvaluate(new EvaluationParameters(i.zoom+1),N),X.textMaxSize=Z["text-size"].possiblyEvaluate(new EvaluationParameters(18));for(var ei=24*G.get("text-line-height"),eo="map"===G.get("text-rotation-alignment")&&"point"!==G.get("symbol-placement"),es=G.get("text-keep-upright"),el=G.get("text-size"),ec=0,eu=i.features;ec<eu.length;ec+=1)!function(){var F=eu[ec],j=G.get("text-font").evaluate(F,{},N).join(","),Z=el.evaluate(F,{},N),J=X.layoutTextSize.evaluate(F,{},N),$=X.layoutIconSize.evaluate(F,{},N),ee={horizontal:{},vertical:void 0},et=F.text,er=[0,0];if(et){var en=et.toString(),ef=24*G.get("text-letter-spacing").evaluate(F,{},N),eh=!function(i){for(var o,s=0;s<i.length;s+=1)if(o=i[s].charCodeAt(0),th.Arabic(o)||th["Arabic Supplement"](o)||th["Arabic Extended-A"](o)||th["Arabic Presentation Forms-A"](o)||th["Arabic Presentation Forms-B"](o))return!1;return!0}(en)?0:ef,ed=G.get("text-anchor").evaluate(F,{},N),ep=G.get("text-variable-anchor");if(!ep){var eg=G.get("text-radial-offset").evaluate(F,{},N);er=eg?evaluateVariableOffset(ed,[24*eg,rW]):G.get("text-offset").evaluate(F,{},N).map(function(i){return 24*i})}var em=eo?"center":G.get("text-justify").evaluate(F,{},N),ey=G.get("symbol-placement"),ev="point"===ey?24*G.get("text-max-width").evaluate(F,{},N):0,addVerticalShapingForPointLabelIfNeeded=function(){i.allowVerticalPlacement&&allowsVerticalWritingMode(en)&&(ee.vertical=shapeText(et,o,s,_,j,ev,ei,ed,"left",eh,er,rU.vertical,!0,ey,J,Z))};if(!eo&&ep){for(var ex="auto"===em?ep.map(function(i){return getAnchorJustification(i)}):[em],e_=!1,ew=0;ew<ex.length;ew++){var eT=ex[ew];if(!ee.horizontal[eT]){if(e_)ee.horizontal[eT]=ee.horizontal[0];else{var ek=shapeText(et,o,s,_,j,ev,ei,"center",eT,eh,er,rU.horizontal,!1,ey,J,Z);ek&&(ee.horizontal[eT]=ek,e_=1===ek.positionedLines.length)}}}addVerticalShapingForPointLabelIfNeeded()}else{"auto"===em&&(em=getAnchorJustification(ed));var eA=shapeText(et,o,s,_,j,ev,ei,ed,em,eh,er,rU.horizontal,!1,ey,J,Z);eA&&(ee.horizontal[em]=eA),addVerticalShapingForPointLabelIfNeeded(),allowsVerticalWritingMode(en)&&eo&&es&&(ee.vertical=shapeText(et,o,s,_,j,ev,ei,ed,em,eh,er,rU.vertical,!1,ey,J,Z))}}var eS=void 0,eM=!1;if(F.icon&&F.icon.name){var eC,eE,eL,eP,eI,eO,eD,eR,eB,ez,eF,eN=x[F.icon.name];eN&&(eC=_[F.icon.name],eE=G.get("icon-offset").evaluate(F,{},N),eP=(eL=getAnchorAlignment(G.get("icon-anchor").evaluate(F,{},N))).horizontalAlign,eI=eL.verticalAlign,eO=eE[0],eD=eE[1],eB=(eR=eO-eC.displaySize[0]*eP)+eC.displaySize[0],eF=(ez=eD-eC.displaySize[1]*eI)+eC.displaySize[1],eS={image:eC,top:ez,bottom:eF,left:eR,right:eB},eM=eN.sdf,void 0===i.sdfIcons?i.sdfIcons=eN.sdf:i.sdfIcons!==eN.sdf&&warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),eN.pixelRatio!==i.pixelRatio?i.iconsNeedLinear=!0:0!==G.get("icon-rotate").constantOr(1)&&(i.iconsNeedLinear=!0))}var ej=getDefaultHorizontalShaping(ee.horizontal)||ee.vertical;i.iconsInText=!!ej&&ej.iconsInText,(ej||eS)&&function(i,o,s,x,_,F,N,j,G,Z,X){var J,$=F.textMaxSize.evaluate(o,{});void 0===$&&($=N);var ee=i.layers[0].layout,et=ee.get("icon-offset").evaluate(o,{},X),er=getDefaultHorizontalShaping(s.horizontal),en=N/24,ei=i.tilePixelRatio*en,eo=i.tilePixelRatio*$/24,es=i.tilePixelRatio*j,el=i.tilePixelRatio*ee.get("symbol-spacing"),ec=ee.get("text-padding")*i.tilePixelRatio,eu=ee.get("icon-padding")*i.tilePixelRatio,ef=ee.get("text-max-angle")/180*Math.PI,eh="map"===ee.get("text-rotation-alignment")&&"point"!==ee.get("symbol-placement"),ed="map"===ee.get("icon-rotation-alignment")&&"point"!==ee.get("symbol-placement"),ep=ee.get("symbol-placement"),eg=el/2,em=ee.get("icon-text-fit");x&&"none"!==em&&(i.allowVerticalPlacement&&s.vertical&&(J=fitIconToText(x,s.vertical,em,ee.get("icon-text-fit-padding"),et,en)),er&&(x=fitIconToText(x,er,em,ee.get("icon-text-fit-padding"),et,en)));var addSymbolAtAnchor=function(j,$){$.x<0||$.x>=8192||$.y<0||$.y>=8192||function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,eh){var ed,ep,eg,em,ey,ev=i.addToLineVertexArray(o,s),ex=0,e_=0,ew=0,eT=0,ek=-1,eA=-1,eS={},eM=t3(""),eC=0,eE=0;if(void 0===j._unevaluatedLayout.getValue("text-radial-offset")?(eC=(ed=j.layout.get("text-offset").evaluate(el,{},ef).map(function(i){return 24*i}))[0],eE=ed[1]):(eC=24*j.layout.get("text-radial-offset").evaluate(el,{},ef),eE=rW),i.allowVerticalPlacement&&x.vertical){var eL=j.layout.get("text-rotate").evaluate(el,{},ef)+90,eP=x.vertical;em=new CollisionFeature(G,o,Z,X,J,eP,$,ee,et,eL),N&&(ey=new CollisionFeature(G,o,Z,X,J,N,en,ei,et,eL))}if(_){var eI=j.layout.get("icon-rotate").evaluate(el,{}),eO="none"!==j.layout.get("icon-text-fit"),eD=getIconQuads(_,eI,eu,eO),eR=N?getIconQuads(N,eI,eu,eO):void 0;eg=new CollisionFeature(G,o,Z,X,J,_,en,ei,!1,eI),ex=4*eD.length;var eB=i.iconSizeData,ez=null;"source"===eB.kind?(ez=[128*j.layout.get("icon-size").evaluate(el,{})])[0]>32640&&warnOnce(i.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===eB.kind&&((ez=[128*ec.compositeIconSizes[0].evaluate(el,{},ef),128*ec.compositeIconSizes[1].evaluate(el,{},ef)])[0]>32640||ez[1]>32640)&&warnOnce(i.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),i.addSymbols(i.icon,eD,ez,es,eo,el,!1,o,ev.lineStartIndex,ev.lineLength,-1,ef),ek=i.icon.placedSymbolArray.length-1,eR&&(e_=4*eR.length,i.addSymbols(i.icon,eR,ez,es,eo,el,rU.vertical,o,ev.lineStartIndex,ev.lineLength,-1,ef),eA=i.icon.placedSymbolArray.length-1)}for(var eF in x.horizontal){var eN=x.horizontal[eF];if(!ep){eM=t3(eN.text);var ej=j.layout.get("text-rotate").evaluate(el,{},ef);ep=new CollisionFeature(G,o,Z,X,J,eN,$,ee,et,ej)}var eU=1===eN.positionedLines.length;if(ew+=addTextVertices(i,o,eN,F,j,et,el,er,ev,x.vertical?rU.horizontal:rU.horizontalOnly,eU?Object.keys(x.horizontal):[eF],eS,ek,ec,ef),eU)break}x.vertical&&(eT+=addTextVertices(i,o,x.vertical,F,j,et,el,er,ev,rU.vertical,["vertical"],eS,eA,ec,ef));var eV=ep?ep.boxStartIndex:i.collisionBoxArray.length,eH=ep?ep.boxEndIndex:i.collisionBoxArray.length,eG=em?em.boxStartIndex:i.collisionBoxArray.length,eW=em?em.boxEndIndex:i.collisionBoxArray.length,eZ=eg?eg.boxStartIndex:i.collisionBoxArray.length,eY=eg?eg.boxEndIndex:i.collisionBoxArray.length,eX=ey?ey.boxStartIndex:i.collisionBoxArray.length,eK=ey?ey.boxEndIndex:i.collisionBoxArray.length,eJ=-1,getCollisionCircleHeight=function(i,o){return i&&i.circleDiameter?Math.max(i.circleDiameter,o):o};eJ=getCollisionCircleHeight(ep,-1),eJ=getCollisionCircleHeight(em,eJ),eJ=getCollisionCircleHeight(eg,eJ);var e$=(eJ=getCollisionCircleHeight(ey,eJ))>-1?1:0;e$&&(eJ*=eh/24),i.glyphOffsetArray.length>=SymbolBucket.MAX_GLYPHS&&warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==el.sortKey&&i.addToSortKeyRanges(i.symbolInstances.length,el.sortKey),i.symbolInstances.emplaceBack(o.x,o.y,eS.right>=0?eS.right:-1,eS.center>=0?eS.center:-1,eS.left>=0?eS.left:-1,eS.vertical||-1,ek,eA,eM,eV,eH,eG,eW,eZ,eY,eX,eK,Z,ew,eT,ex,e_,e$,0,$,eC,eE,eJ)}(i,$,j,s,x,_,J,i.layers[0],i.collisionBoxArray,o.index,o.sourceLayerIndex,i.index,ei,ec,eh,G,es,eu,ed,et,o,F,Z,X,N)};if("line"===ep)for(var ey=0,ev=clipLine(o.geometry,0,0,8192,8192);ey<ev.length;ey+=1)for(var ex=ev[ey],e_=function(i,o,s,x,_,F,N,j,G){var Z=x?.6*F*N:0,X=getShapedLabelLength(x,_),J=X*N,$=0===i[0].x||i[0].x===G||0===i[0].y||i[0].y===G;o-J<o/4&&(o=J+o/4);var ee=2*F;return function resample(i,o,s,x,_,F,N,j,G){for(var Z=F/2,X=getLineLength(i),J=0,$=o-s,ee=[],et=0;et<i.length-1;et++){for(var er=i[et],en=i[et+1],ei=er.dist(en),eo=en.angleTo(er);$+s<J+ei;){var es=(($+=s)-J)/ei,el=number(er.x,en.x,es),ec=number(er.y,en.y,es);if(el>=0&&el<G&&ec>=0&&ec<G&&$-Z>=0&&$+Z<=X){var eu=new rq(el,ec,eo,et);eu._round(),(!x||checkMaxAngle(i,eu,F,x,_))&&ee.push(eu)}}J+=ei}return j||ee.length||N||(ee=resample(i,J/2,s,x,_,F,N,!0,G)),ee}(i,$?o/2*j%o:(X/2+ee)*N*j%o,o,Z,s,J,$,!1,G)}(ex,el,ef,s.vertical||er,x,24,eo,i.overscaling,8192),ew=0;ew<e_.length;ew+=1){var eT=e_[ew];er&&function(i,o,s,x){var _=i.compareText;if(o in _){for(var F=_[o],N=F.length-1;N>=0;N--)if(x.dist(F[N])<s)return!0}else _[o]=[];return _[o].push(x),!1}(i,er.text,eg,eT)||addSymbolAtAnchor(ex,eT)}else if("line-center"===ep)for(var ek=0,eA=o.geometry;ek<eA.length;ek+=1){var eS=eA[ek];if(eS.length>1){var eM=function(i,o,s,x,_,F){for(var N=s?.6*24*F:0,j=getShapedLabelLength(s,x)*F,G=0,Z=getLineLength(i)/2,X=0;X<i.length-1;X++){var J=i[X],$=i[X+1],ee=J.dist($);if(G+ee>Z){var et=(Z-G)/ee,er=number(J.x,$.x,et),en=number(J.y,$.y,et),ei=new rq(er,en,$.angleTo(J),X);if(ei._round(),!N||checkMaxAngle(i,ei,j,N,o))return ei;return}G+=ee}}(eS,ef,s.vertical||er,x,0,eo);eM&&addSymbolAtAnchor(eS,eM)}}else if("Polygon"===o.type)for(var eC=0,eE=classifyRings(o.geometry,0);eC<eE.length;eC+=1){var eL=eE[eC],eP=function(i,o,s){void 0===o&&(o=1),void 0===s&&(s=!1);for(var x=1/0,_=1/0,F=-1/0,N=-1/0,j=i[0],G=0;G<j.length;G++){var Z=j[G];(!G||Z.x<x)&&(x=Z.x),(!G||Z.y<_)&&(_=Z.y),(!G||Z.x>F)&&(F=Z.x),(!G||Z.y>N)&&(N=Z.y)}var X=Math.min(F-x,N-_),J=X/2,$=new TinyQueue([],compareMax);if(0===X)return new Point(x,_);for(var ee=x;ee<F;ee+=X)for(var et=_;et<N;et+=X)$.push(new Cell(ee+J,et+J,J,i));for(var er=function(i){for(var o=0,s=0,x=0,_=i[0],F=0,N=_.length,j=N-1;F<N;j=F++){var G=_[F],Z=_[j],X=G.x*Z.y-Z.x*G.y;s+=(G.x+Z.x)*X,x+=(G.y+Z.y)*X,o+=3*X}return new Cell(s/o,x/o,0,i)}(i),en=$.length;$.length;){var ei=$.pop();(ei.d>er.d||!er.d)&&(er=ei,s&&console.log("found best %d after %d probes",Math.round(1e4*ei.d)/1e4,en)),ei.max-er.d<=o||(J=ei.h/2,$.push(new Cell(ei.p.x-J,ei.p.y-J,J,i)),$.push(new Cell(ei.p.x+J,ei.p.y-J,J,i)),$.push(new Cell(ei.p.x-J,ei.p.y+J,J,i)),$.push(new Cell(ei.p.x+J,ei.p.y+J,J,i)),en+=4)}return s&&(console.log("num probes: "+en),console.log("best distance: "+er.d)),er.p}(eL,16);addSymbolAtAnchor(eL[0],new rq(eP.x,eP.y,0))}else if("LineString"===o.type)for(var eI=0,eO=o.geometry;eI<eO.length;eI+=1){var eD=eO[eI];addSymbolAtAnchor(eD,new rq(eD[0].x,eD[0].y,0))}else if("Point"===o.type)for(var eR=0,eB=o.geometry;eR<eB.length;eR+=1)for(var ez=eB[eR],eF=0;eF<ez.length;eF+=1){var eN=ez[eF];addSymbolAtAnchor([eN],new rq(eN.x,eN.y,0))}}(i,F,ee,eS,x,X,J,$,er,eM,N)}();F&&i.generateCollisionDebugBuffers()},i.perspective=function(i,o,s,x,_){var F,N=1/Math.tan(o/2);return i[0]=N/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=N,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,null!=_&&_!==1/0?(F=1/(x-_),i[10]=(_+x)*F,i[14]=2*_*x*F):(i[10]=-1,i[14]=-2*x),i},i.pick=function(i,o){for(var s={},x=0;x<o.length;x++){var _=o[x];_ in i&&(s[_]=i[_])}return s},i.plugin=tv,i.polygonIntersectsPolygon=polygonIntersectsPolygon,i.postMapLoadEvent=ew,i.postTurnstileEvent=ex,i.potpack=potpack,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=register,i.registerForPluginStateChange=function(i){return i({pluginStatus:tg,pluginURL:tm}),ty.on("pluginStateChange",i),i},i.rotate=function(i,o,s){var x=o[0],_=o[1],F=o[2],N=o[3],j=Math.sin(s),G=Math.cos(s);return i[0]=x*G+F*j,i[1]=_*G+N*j,i[2]=-(x*j)+F*G,i[3]=-(_*j)+N*G,i},i.rotateX=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[4],N=o[5],j=o[6],G=o[7],Z=o[8],X=o[9],J=o[10],$=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=F*_+Z*x,i[5]=N*_+X*x,i[6]=j*_+J*x,i[7]=G*_+$*x,i[8]=Z*_-F*x,i[9]=X*_-N*x,i[10]=J*_-j*x,i[11]=$*_-G*x,i},i.rotateZ=function(i,o,s){var x=Math.sin(s),_=Math.cos(s),F=o[0],N=o[1],j=o[2],G=o[3],Z=o[4],X=o[5],J=o[6],$=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=F*_+Z*x,i[1]=N*_+X*x,i[2]=j*_+J*x,i[3]=G*_+$*x,i[4]=Z*_-F*x,i[5]=X*_-N*x,i[6]=J*_-j*x,i[7]=$*_-G*x,i},i.scale=function(i,o,s){var x=s[0],_=s[1],F=s[2];return i[0]=o[0]*x,i[1]=o[1]*x,i[2]=o[2]*x,i[3]=o[3]*x,i[4]=o[4]*_,i[5]=o[5]*_,i[6]=o[6]*_,i[7]=o[7]*_,i[8]=o[8]*F,i[9]=o[9]*F,i[10]=o[10]*F,i[11]=o[11]*F,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i},i.scale$1=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i},i.scale$2=function(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i},i.setCacheLimits=function(i,o){ek=i,eA=o},i.setRTLTextPlugin=function(i,o,s){if(void 0===s&&(s=!1),tg===td.deferred||tg===td.loading||tg===td.loaded)throw Error("setRTLTextPlugin cannot be called multiple times.");tm=ec.resolveURL(i),tg=td.deferred,tp=o,sendPluginStateToWorker(),s||downloadRTLTextPlugin()},i.sphericalToCartesian=function(i){var o=i[0],s=i[1],x=i[2];return s+=90,{x:o*Math.cos(s*=Math.PI/180)*Math.sin(x*=Math.PI/180),y:o*Math.sin(s)*Math.sin(x),z:o*Math.cos(x)}},i.sqrLen=function(i){var o=i[0],s=i[1];return o*o+s*s},i.styleSpec=eP,i.sub=function(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i},i.symbolSize=rG,i.transformMat3=function(i,o,s){var x=o[0],_=o[1],F=o[2];return i[0]=x*s[0]+_*s[3]+F*s[6],i[1]=x*s[1]+_*s[4]+F*s[7],i[2]=x*s[2]+_*s[5]+F*s[8],i},i.transformMat4=transformMat4,i.translate=function(i,o,s){var x,_,F,N,j,G,Z,X,J,$,ee,et,er=s[0],en=s[1],ei=s[2];return o===i?(i[12]=o[0]*er+o[4]*en+o[8]*ei+o[12],i[13]=o[1]*er+o[5]*en+o[9]*ei+o[13],i[14]=o[2]*er+o[6]*en+o[10]*ei+o[14],i[15]=o[3]*er+o[7]*en+o[11]*ei+o[15]):(x=o[0],_=o[1],F=o[2],N=o[3],j=o[4],G=o[5],Z=o[6],X=o[7],J=o[8],$=o[9],ee=o[10],et=o[11],i[0]=x,i[1]=_,i[2]=F,i[3]=N,i[4]=j,i[5]=G,i[6]=Z,i[7]=X,i[8]=J,i[9]=$,i[10]=ee,i[11]=et,i[12]=x*er+j*en+J*ei+o[12],i[13]=_*er+G*en+$*ei+o[13],i[14]=F*er+Z*en+ee*ei+o[14],i[15]=N*er+X*en+et*ei+o[15]),i},i.triggerPluginCompletionEvent=triggerPluginCompletionEvent,i.uniqueId=uniqueId,i.validateCustomStyleLayer=function(i){var o=[],s=i.id;return void 0===s&&o.push({message:"layers."+s+': missing required property "id"'}),void 0===i.render&&o.push({message:"layers."+s+': missing required method "render"'}),i.renderingMode&&"2d"!==i.renderingMode&&"3d"!==i.renderingMode&&o.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),o},i.validateLight=ta,i.validateStyle=validateStyleMin,i.values=function(i){var o=[];for(var s in i)o.push(i[s]);return o},i.vectorTile=r_,i.version=ee,i.warnOnce=warnOnce,i.webpSupported=ef,i.window=self,i.wrap=wrap}),define(["./shared"],function(i){var StyleLayerIndex=function(i){this.keyCache={},i&&this.replace(i)};StyleLayerIndex.prototype.replace=function(i){this._layerConfigs={},this._layers={},this.update(i,[])},StyleLayerIndex.prototype.update=function(o,s){for(var x=this,_=0;_<o.length;_+=1){var F=o[_];this._layerConfigs[F.id]=F;var N=this._layers[F.id]=i.createStyleLayer(F);N._featureFilter=i.featureFilter(N.filter),this.keyCache[F.id]&&delete this.keyCache[F.id]}for(var j=0;j<s.length;j+=1){var G=s[j];delete this.keyCache[G],delete this._layerConfigs[G],delete this._layers[G]}this.familiesBySource={};for(var Z=function(o,s){for(var x={},_=0;_<o.length;_++){var F=s&&s[o[_].id]||function(o){for(var s="",x=0,_=i.refProperties;x<_.length;x+=1)s+="/"+function stringify(i){var o=typeof i;if("number"===o||"boolean"===o||"string"===o||null==i)return JSON.stringify(i);if(Array.isArray(i)){for(var s="[",x=0;x<i.length;x+=1)s+=stringify(i[x])+",";return s+"]"}for(var _=Object.keys(i).sort(),F="{",N=0;N<_.length;N++)F+=JSON.stringify(_[N])+":"+stringify(i[_[N]])+",";return F+"}"}(o[_[x]]);return s}(o[_]);s&&(s[o[_].id]=F);var N=x[F];N||(N=x[F]=[]),N.push(o[_])}var j=[];for(var G in x)j.push(x[G]);return j}(i.values(this._layerConfigs),this.keyCache),X=0;X<Z.length;X+=1){var J=Z[X].map(function(i){return x._layers[i.id]}),$=J[0];if("none"!==$.visibility){var ee=$.source||"",et=this.familiesBySource[ee];et||(et=this.familiesBySource[ee]={});var er=$.sourceLayer||"_geojsonTileLayer",en=et[er];en||(en=et[er]=[]),en.push(J)}}};var GlyphAtlas=function(o){var s={},x=[];for(var _ in o){var F=o[_],N=s[_]={};for(var j in F){var G=F[+j];if(G&&0!==G.bitmap.width&&0!==G.bitmap.height){var Z={x:0,y:0,w:G.bitmap.width+2,h:G.bitmap.height+2};x.push(Z),N[j]={rect:Z,metrics:G.metrics}}}}var X=i.potpack(x),J=X.w,$=X.h,ee=new i.AlphaImage({width:J||1,height:$||1});for(var et in o){var er=o[et];for(var en in er){var ei=er[+en];if(ei&&0!==ei.bitmap.width&&0!==ei.bitmap.height){var eo=s[et][en].rect;i.AlphaImage.copy(ei.bitmap,ee,{x:0,y:0},{x:eo.x+1,y:eo.y+1},ei.bitmap)}}}this.image=ee,this.positions=s};i.register("GlyphAtlas",GlyphAtlas);var WorkerTile=function(o){this.tileID=new i.OverscaledTileID(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.uid=o.uid,this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId};function recalculateLayers(o,s,x){for(var _=new i.EvaluationParameters(s),F=0;F<o.length;F+=1)o[F].recalculate(_,x)}function loadVectorTile(o,s){var x=i.getArrayBuffer(o.request,function(o,x,_,F){o?s(o):x&&s(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(x)),rawData:x,cacheControl:_,expires:F})});return function(){x.cancel(),s()}}WorkerTile.prototype.parse=function(o,s,x,_,F){var N,j,G,Z,X=this;this.status="parsing",this.data=o,this.collisionBoxArray=new i.CollisionBoxArray;var J=new i.DictionaryCoder(Object.keys(o.layers).sort()),$=new i.FeatureIndex(this.tileID,this.promoteId);$.bucketLayerIDs=[];var ee={},et={featureIndex:$,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:x},er=s.familiesBySource[this.source];for(var en in er){var ei=o.layers[en];if(ei){1===ei.version&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+en+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var eo=J.encode(en),es=[],el=0;el<ei.length;el++){var ec=ei.feature(el),eu=$.getId(ec,en);es.push({feature:ec,id:eu,index:el,sourceLayerIndex:eo})}for(var ef=0,eh=er[en];ef<eh.length;ef+=1){var ed=eh[ef],ep=ed[0];ep.minzoom&&this.zoom<Math.floor(ep.minzoom)||ep.maxzoom&&this.zoom>=ep.maxzoom||"none"===ep.visibility||(recalculateLayers(ed,this.zoom,x),(ee[ep.id]=ep.createBucket({index:$.bucketLayerIDs.length,layers:ed,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:eo,sourceID:this.source})).populate(es,et,this.tileID.canonical),$.bucketLayerIDs.push(ed.map(function(i){return i.id})))}}}var eg=i.mapObject(et.glyphDependencies,function(i){return Object.keys(i).map(Number)});Object.keys(eg).length?_.send("getGlyphs",{uid:this.uid,stacks:eg},function(i,o){N||(N=i,j=o,maybePrepare.call(X))}):j={};var em=Object.keys(et.iconDependencies);em.length?_.send("getImages",{icons:em,source:this.source,tileID:this.tileID,type:"icons"},function(i,o){N||(N=i,G=o,maybePrepare.call(X))}):G={};var ey=Object.keys(et.patternDependencies);function maybePrepare(){if(N)return F(N);if(j&&G&&Z){var o=new GlyphAtlas(j),s=new i.ImageAtlas(G,Z);for(var _ in ee){var X=ee[_];X instanceof i.SymbolBucket?(recalculateLayers(X.layers,this.zoom,x),i.performSymbolLayout(X,j,o.positions,G,s.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):X.hasPattern&&(X instanceof i.LineBucket||X instanceof i.FillBucket||X instanceof i.FillExtrusionBucket)&&(recalculateLayers(X.layers,this.zoom,x),X.addFeatures(et,this.tileID.canonical,s.patternPositions))}this.status="done",F(null,{buckets:i.values(ee).filter(function(i){return!i.isEmpty()}),featureIndex:$,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:o.image,imageAtlas:s,glyphMap:this.returnDependencies?j:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?o.positions:null})}}ey.length?_.send("getImages",{icons:ey,source:this.source,tileID:this.tileID,type:"patterns"},function(i,o){N||(N=i,Z=o,maybePrepare.call(X))}):Z={},maybePrepare.call(this)};var VectorTileWorkerSource=function(i,o,s,x){this.actor=i,this.layerIndex=o,this.availableImages=s,this.loadVectorData=x||loadVectorTile,this.loading={},this.loaded={}};VectorTileWorkerSource.prototype.loadTile=function(o,s){var x=this,_=o.uid;this.loading||(this.loading={});var F=!!o&&!!o.request&&!!o.request.collectResourceTiming&&new i.RequestPerformance(o.request),N=this.loading[_]=new WorkerTile(o);N.abort=this.loadVectorData(o,function(o,j){if(delete x.loading[_],o||!j)return N.status="done",x.loaded[_]=N,s(o);var G=j.rawData,Z={};j.expires&&(Z.expires=j.expires),j.cacheControl&&(Z.cacheControl=j.cacheControl);var X={};if(F){var J=F.finish();J&&(X.resourceTiming=JSON.parse(JSON.stringify(J)))}N.vectorTile=j.vectorTile,N.parse(j.vectorTile,x.layerIndex,x.availableImages,x.actor,function(o,x){if(o||!x)return s(o);s(null,i.extend({rawTileData:G.slice(0)},x,Z,X))}),x.loaded=x.loaded||{},x.loaded[_]=N})},VectorTileWorkerSource.prototype.reloadTile=function(i,o){var s=this,x=this.loaded,_=i.uid,F=this;if(x&&x[_]){var N=x[_];N.showCollisionBoxes=i.showCollisionBoxes;var done=function(i,x){var _=N.reloadCallback;_&&(delete N.reloadCallback,N.parse(N.vectorTile,F.layerIndex,s.availableImages,F.actor,_)),o(i,x)};"parsing"===N.status?N.reloadCallback=done:"done"===N.status&&(N.vectorTile?N.parse(N.vectorTile,this.layerIndex,this.availableImages,this.actor,done):done())}},VectorTileWorkerSource.prototype.abortTile=function(i,o){var s=this.loading,x=i.uid;s&&s[x]&&s[x].abort&&(s[x].abort(),delete s[x]),o()},VectorTileWorkerSource.prototype.removeTile=function(i,o){var s=this.loaded,x=i.uid;s&&s[x]&&delete s[x],o()};var o=i.window.ImageBitmap,RasterDEMTileWorkerSource=function(){this.loaded={}};function rewindRings(i,o){if(0!==i.length){rewindRing(i[0],o);for(var s=1;s<i.length;s++)rewindRing(i[s],!o)}}function rewindRing(i,o){for(var s=0,x=0,_=i.length,F=_-1;x<_;F=x++)s+=(i[x][0]-i[F][0])*(i[F][1]+i[x][1]);s>=0!=!!o&&i.reverse()}RasterDEMTileWorkerSource.prototype.loadTile=function(s,x){var _=s.uid,F=s.encoding,N=s.rawImageData,j=o&&N instanceof o?this.getImageData(N):N,G=new i.DEMData(_,j,F);this.loaded=this.loaded||{},this.loaded[_]=G,x(null,G)},RasterDEMTileWorkerSource.prototype.getImageData=function(o){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(o.width,o.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=o.width,this.offscreenCanvas.height=o.height,this.offscreenCanvasContext.drawImage(o,0,0,o.width,o.height);var s=this.offscreenCanvasContext.getImageData(-1,-1,o.width+2,o.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:s.width,height:s.height},s.data)},RasterDEMTileWorkerSource.prototype.removeTile=function(i){var o=this.loaded,s=i.uid;o&&o[s]&&delete o[s]};var s=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,FeatureWrapper=function(o){this._feature=o,this.extent=i.EXTENT,this.type=o.type,this.properties=o.tags,"id"in o&&!isNaN(o.id)&&(this.id=parseInt(o.id,10))};FeatureWrapper.prototype.loadGeometry=function(){if(1===this._feature.type){for(var o=[],s=0,x=this._feature.geometry;s<x.length;s+=1){var _=x[s];o.push([new i.Point$1(_[0],_[1])])}return o}for(var F=[],N=0,j=this._feature.geometry;N<j.length;N+=1){for(var G=j[N],Z=[],X=0;X<G.length;X+=1){var J=G[X];Z.push(new i.Point$1(J[0],J[1]))}F.push(Z)}return F},FeatureWrapper.prototype.toGeoJSON=function(i,o,x){return s.call(this,i,o,x)};var GeoJSONWrapper=function(o){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=o.length,this._features=o};GeoJSONWrapper.prototype.feature=function(i){return new FeatureWrapper(this._features[i])};var x=i.vectorTile.VectorTileFeature;function GeoJSONWrapper$1(i,o){this.options=o||{},this.features=i,this.length=i.length}function FeatureWrapper$1(i,o){this.id="number"==typeof i.id?i.id:void 0,this.type=i.type,this.rawGeometry=1===i.type?[i.geometry]:i.geometry,this.properties=i.tags,this.extent=o||4096}GeoJSONWrapper$1.prototype.feature=function(i){return new FeatureWrapper$1(this.features[i],this.options.extent)},FeatureWrapper$1.prototype.loadGeometry=function(){var o=this.rawGeometry;this.geometry=[];for(var s=0;s<o.length;s++){for(var x=o[s],_=[],F=0;F<x.length;F++)_.push(new i.Point$1(x[F][0],x[F][1]));this.geometry.push(_)}return this.geometry},FeatureWrapper$1.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var i=this.geometry,o=1/0,s=-1/0,x=1/0,_=-1/0,F=0;F<i.length;F++)for(var N=i[F],j=0;j<N.length;j++){var G=N[j];o=Math.min(o,G.x),s=Math.max(s,G.x),x=Math.min(x,G.y),_=Math.max(_,G.y)}return[o,x,s,_]},FeatureWrapper$1.prototype.toGeoJSON=x.prototype.toGeoJSON;var _=fromVectorTileJs;function fromVectorTileJs(o){var s=new i.pbf;return function(i,o){for(var s in i.layers)o.writeMessage(3,writeLayer,i.layers[s])}(o,s),s.finish()}function writeLayer(i,o){o.writeVarintField(15,i.version||1),o.writeStringField(1,i.name||""),o.writeVarintField(5,i.extent||4096);var s,x={keys:[],values:[],keycache:{},valuecache:{}};for(s=0;s<i.length;s++)x.feature=i.feature(s),o.writeMessage(2,writeFeature,x);var _=x.keys;for(s=0;s<_.length;s++)o.writeStringField(3,_[s]);var F=x.values;for(s=0;s<F.length;s++)o.writeMessage(4,writeValue,F[s])}function writeFeature(i,o){var s=i.feature;void 0!==s.id&&o.writeVarintField(1,s.id),o.writeMessage(2,writeProperties,i),o.writeVarintField(3,s.type),o.writeMessage(4,writeGeometry,s)}function writeProperties(i,o){var s=i.feature,x=i.keys,_=i.values,F=i.keycache,N=i.valuecache;for(var j in s.properties){var G=F[j];void 0===G&&(x.push(j),G=x.length-1,F[j]=G),o.writeVarint(G);var Z=s.properties[j],X=typeof Z;"string"!==X&&"boolean"!==X&&"number"!==X&&(Z=JSON.stringify(Z));var J=X+":"+Z,$=N[J];void 0===$&&(_.push(Z),$=_.length-1,N[J]=$),o.writeVarint($)}}function writeGeometry(i,o){for(var s=i.loadGeometry(),x=i.type,_=0,F=0,N=s.length,j=0;j<N;j++){var G=s[j],Z=1;1===x&&(Z=G.length),o.writeVarint((Z<<3)+1);for(var X=3===x?G.length-1:G.length,J=0;J<X;J++){1===J&&1!==x&&o.writeVarint((X-1<<3)+2);var $=G[J].x-_,ee=G[J].y-F;o.writeVarint($<<1^$>>31),o.writeVarint(ee<<1^ee>>31),_+=$,F+=ee}3===x&&o.writeVarint(15)}}function writeValue(i,o){var s=typeof i;"string"===s?o.writeStringField(1,i):"boolean"===s?o.writeBooleanField(7,i):"number"===s&&(i%1!=0?o.writeDoubleField(3,i):i<0?o.writeSVarintField(6,i):o.writeVarintField(5,i))}function swapItem(i,o,s,x){swap(i,s,x),swap(o,2*s,2*x),swap(o,2*s+1,2*x+1)}function swap(i,o,s){var x=i[o];i[o]=i[s],i[s]=x}function sqDist(i,o,s,x){var _=i-s,F=o-x;return _*_+F*F}_.fromVectorTileJs=fromVectorTileJs,_.fromGeojsonVt=function(i,o){o=o||{};var s={};for(var x in i)s[x]=new GeoJSONWrapper$1(i[x].features,o),s[x].name=x,s[x].version=o.version,s[x].extent=o.extent;return fromVectorTileJs({layers:s})},_.GeoJSONWrapper=GeoJSONWrapper$1;var defaultGetX=function(i){return i[0]},defaultGetY=function(i){return i[1]},KDBush=function(i,o,s,x,_){void 0===o&&(o=defaultGetX),void 0===s&&(s=defaultGetY),void 0===x&&(x=64),void 0===_&&(_=Float64Array),this.nodeSize=x,this.points=i;for(var F=i.length<65536?Uint16Array:Uint32Array,N=this.ids=new F(i.length),j=this.coords=new _(2*i.length),G=0;G<i.length;G++)N[G]=G,j[2*G]=o(i[G]),j[2*G+1]=s(i[G]);!function sortKD(i,o,s,x,_,F){if(!(_-x<=s)){var N=x+_>>1;(function select(i,o,s,x,_,F){for(;_>x;){if(_-x>600){var N=_-x+1,j=s-x+1,G=Math.log(N),Z=.5*Math.exp(2*G/3),X=.5*Math.sqrt(G*Z*(N-Z)/N)*(j-N/2<0?-1:1),J=Math.max(x,Math.floor(s-j*Z/N+X)),$=Math.min(_,Math.floor(s+(N-j)*Z/N+X));select(i,o,s,J,$,F)}var ee=o[2*s+F],et=x,er=_;for(swapItem(i,o,x,s),o[2*_+F]>ee&&swapItem(i,o,x,_);et<er;){for(swapItem(i,o,et,er),et++,er--;o[2*et+F]<ee;)et++;for(;o[2*er+F]>ee;)er--}o[2*x+F]===ee?swapItem(i,o,x,er):swapItem(i,o,++er,_),er<=s&&(x=er+1),s<=er&&(_=er-1)}})(i,o,N,x,_,F%2),sortKD(i,o,s,x,N-1,F+1),sortKD(i,o,s,N+1,_,F+1)}}(N,j,x,0,N.length-1,0)};KDBush.prototype.range=function(i,o,s,x){return function(i,o,s,x,_,F,N){for(var j,G,Z=[0,i.length-1,0],X=[];Z.length;){var J=Z.pop(),$=Z.pop(),ee=Z.pop();if($-ee<=N){for(var et=ee;et<=$;et++)j=o[2*et],G=o[2*et+1],j>=s&&j<=_&&G>=x&&G<=F&&X.push(i[et]);continue}var er=Math.floor((ee+$)/2);j=o[2*er],G=o[2*er+1],j>=s&&j<=_&&G>=x&&G<=F&&X.push(i[er]);var en=(J+1)%2;(0===J?s<=j:x<=G)&&(Z.push(ee),Z.push(er-1),Z.push(en)),(0===J?_>=j:F>=G)&&(Z.push(er+1),Z.push($),Z.push(en))}return X}(this.ids,this.coords,i,o,s,x,this.nodeSize)},KDBush.prototype.within=function(i,o,s){return function(i,o,s,x,_,F){for(var N=[0,i.length-1,0],j=[],G=_*_;N.length;){var Z=N.pop(),X=N.pop(),J=N.pop();if(X-J<=F){for(var $=J;$<=X;$++)sqDist(o[2*$],o[2*$+1],s,x)<=G&&j.push(i[$]);continue}var ee=Math.floor((J+X)/2),et=o[2*ee],er=o[2*ee+1];sqDist(et,er,s,x)<=G&&j.push(i[ee]);var en=(Z+1)%2;(0===Z?s-_<=et:x-_<=er)&&(N.push(J),N.push(ee-1),N.push(en)),(0===Z?s+_>=et:x+_>=er)&&(N.push(ee+1),N.push(X),N.push(en))}return j}(this.ids,this.coords,i,o,s,this.nodeSize)};var F={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(i){return i}},Supercluster=function(i){this.options=extend(Object.create(F),i),this.trees=Array(this.options.maxZoom+1)};function getClusterJSON(i){return{type:"Feature",id:i.id,properties:getClusterProperties(i),geometry:{type:"Point",coordinates:[(i.x-.5)*360,360*Math.atan(Math.exp((180-360*i.y)*Math.PI/180))/Math.PI-90]}}}function getClusterProperties(i){var o=i.numPoints,s=o>=1e4?Math.round(o/1e3)+"k":o>=1e3?Math.round(o/100)/10+"k":o;return extend(extend({},i.properties),{cluster:!0,cluster_id:i.id,point_count:o,point_count_abbreviated:s})}function lngX(i){return i/360+.5}function latY(i){var o=Math.sin(i*Math.PI/180),s=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return s<0?0:s>1?1:s}function extend(i,o){for(var s in o)i[s]=o[s];return i}function getX(i){return i.x}function getY(i){return i.y}function createFeature(i,o,s,x){var _={id:void 0===i?null:i,type:o,geometry:s,tags:x,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(i){var o=i.geometry,s=i.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)calcLineBBox(i,o);else if("Polygon"===s||"MultiLineString"===s)for(var x=0;x<o.length;x++)calcLineBBox(i,o[x]);else if("MultiPolygon"===s)for(x=0;x<o.length;x++)for(var _=0;_<o[x].length;_++)calcLineBBox(i,o[x][_])}(_),_}function calcLineBBox(i,o){for(var s=0;s<o.length;s+=3)i.minX=Math.min(i.minX,o[s]),i.minY=Math.min(i.minY,o[s+1]),i.maxX=Math.max(i.maxX,o[s]),i.maxY=Math.max(i.maxY,o[s+1])}function convertFeature(i,o,s,x){if(o.geometry){var _=o.geometry.coordinates,F=o.geometry.type,N=Math.pow(s.tolerance/((1<<s.maxZoom)*s.extent),2),j=[],G=o.id;if(s.promoteId?G=o.properties[s.promoteId]:s.generateId&&(G=x||0),"Point"===F)convertPoint(_,j);else if("MultiPoint"===F)for(var Z=0;Z<_.length;Z++)convertPoint(_[Z],j);else if("LineString"===F)convertLine(_,j,N,!1);else if("MultiLineString"===F){if(s.lineMetrics){for(Z=0;Z<_.length;Z++)j=[],convertLine(_[Z],j,N,!1),i.push(createFeature(G,"LineString",j,o.properties));return}convertLines(_,j,N,!1)}else if("Polygon"===F)convertLines(_,j,N,!0);else if("MultiPolygon"===F)for(Z=0;Z<_.length;Z++){var X=[];convertLines(_[Z],X,N,!0),j.push(X)}else if("GeometryCollection"===F){for(Z=0;Z<o.geometry.geometries.length;Z++)convertFeature(i,{id:G,geometry:o.geometry.geometries[Z],properties:o.properties},s,x);return}else throw Error("Input data is not a valid GeoJSON object.");i.push(createFeature(G,F,j,o.properties))}}function convertPoint(i,o){var s;o.push(i[0]/360+.5),o.push(projectY(i[1])),o.push(0)}function convertLine(i,o,s,x){for(var _,F,N=0,j=0;j<i.length;j++){var G,Z=i[j][0]/360+.5,X=projectY(i[j][1]);o.push(Z),o.push(X),o.push(0),j>0&&(x?N+=(_*X-Z*F)/2:N+=Math.sqrt(Math.pow(Z-_,2)+Math.pow(X-F,2))),_=Z,F=X}var J=o.length-3;o[2]=1,function simplify(i,o,s,x){for(var _,F=x,N=s-o>>1,j=s-o,G=i[o],Z=i[o+1],X=i[s],J=i[s+1],$=o+3;$<s;$+=3){var ee=function(i,o,s,x,_,F){var N=_-s,j=F-x;if(0!==N||0!==j){var G=((i-s)*N+(o-x)*j)/(N*N+j*j);G>1?(s=_,x=F):G>0&&(s+=N*G,x+=j*G)}return(N=i-s)*N+(j=o-x)*j}(i[$],i[$+1],G,Z,X,J);if(ee>F)_=$,F=ee;else if(ee===F){var et=Math.abs($-N);et<j&&(_=$,j=et)}}F>x&&(_-o>3&&simplify(i,o,_,x),i[_+2]=F,s-_>3&&simplify(i,_,s,x))}(o,0,J,s),o[J+2]=1,o.size=Math.abs(N),o.start=0,o.end=o.size}function convertLines(i,o,s,x){for(var _=0;_<i.length;_++){var F=[];convertLine(i[_],F,s,x),o.push(F)}}function projectY(i){var o=Math.sin(i*Math.PI/180),s=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return s<0?0:s>1?1:s}function clip(i,o,s,x,_,F,N,j){if(s/=o,x/=o,F>=s&&N<x)return i;if(N<s||F>=x)return null;for(var G=[],Z=0;Z<i.length;Z++){var X=i[Z],J=X.geometry,$=X.type,ee=0===_?X.minX:X.minY,et=0===_?X.maxX:X.maxY;if(ee>=s&&et<x){G.push(X);continue}if(!(et<s)&&!(ee>=x)){var er=[];if("Point"===$||"MultiPoint"===$)(function(i,o,s,x,_){for(var F=0;F<i.length;F+=3){var N=i[F+_];N>=s&&N<=x&&(o.push(i[F]),o.push(i[F+1]),o.push(i[F+2]))}})(J,er,s,x,_);else if("LineString"===$)clipLine(J,er,s,x,_,!1,j.lineMetrics);else if("MultiLineString"===$)clipLines(J,er,s,x,_,!1);else if("Polygon"===$)clipLines(J,er,s,x,_,!0);else if("MultiPolygon"===$)for(var en=0;en<J.length;en++){var ei=[];clipLines(J[en],ei,s,x,_,!0),ei.length&&er.push(ei)}if(er.length){if(j.lineMetrics&&"LineString"===$){for(en=0;en<er.length;en++)G.push(createFeature(X.id,$,er[en],X.tags));continue}("LineString"===$||"MultiLineString"===$)&&(1===er.length?($="LineString",er=er[0]):$="MultiLineString"),("Point"===$||"MultiPoint"===$)&&($=3===er.length?"Point":"MultiPoint"),G.push(createFeature(X.id,$,er,X.tags))}}}return G.length?G:null}function clipLine(i,o,s,x,_,F,N){for(var j,G,Z=newSlice(i),X=0===_?intersectX:intersectY,J=i.start,$=0;$<i.length-3;$+=3){var ee=i[$],et=i[$+1],er=i[$+2],en=i[$+3],ei=i[$+4],eo=0===_?ee:et,es=0===_?en:ei,el=!1;N&&(j=Math.sqrt(Math.pow(ee-en,2)+Math.pow(et-ei,2))),eo<s?es>s&&(G=X(Z,ee,et,en,ei,s),N&&(Z.start=J+j*G)):eo>x?es<x&&(G=X(Z,ee,et,en,ei,x),N&&(Z.start=J+j*G)):addPoint(Z,ee,et,er),es<s&&eo>=s&&(G=X(Z,ee,et,en,ei,s),el=!0),es>x&&eo<=x&&(G=X(Z,ee,et,en,ei,x),el=!0),!F&&el&&(N&&(Z.end=J+j*G),o.push(Z),Z=newSlice(i)),N&&(J+=j)}var ec=i.length-3;ee=i[ec],et=i[ec+1],er=i[ec+2],(eo=0===_?ee:et)>=s&&eo<=x&&addPoint(Z,ee,et,er),ec=Z.length-3,F&&ec>=3&&(Z[ec]!==Z[0]||Z[ec+1]!==Z[1])&&addPoint(Z,Z[0],Z[1],Z[2]),Z.length&&o.push(Z)}function newSlice(i){var o=[];return o.size=i.size,o.start=i.start,o.end=i.end,o}function clipLines(i,o,s,x,_,F){for(var N=0;N<i.length;N++)clipLine(i[N],o,s,x,_,F,!1)}function addPoint(i,o,s,x){i.push(o),i.push(s),i.push(x)}function intersectX(i,o,s,x,_,F){var N=(F-o)/(x-o);return i.push(F),i.push(s+(_-s)*N),i.push(1),N}function intersectY(i,o,s,x,_,F){var N=(F-s)/(_-s);return i.push(o+(x-o)*N),i.push(F),i.push(1),N}function shiftFeatureCoords(i,o){for(var s=[],x=0;x<i.length;x++){var _,F=i[x],N=F.type;if("Point"===N||"MultiPoint"===N||"LineString"===N)_=shiftCoords(F.geometry,o);else if("MultiLineString"===N||"Polygon"===N){_=[];for(var j=0;j<F.geometry.length;j++)_.push(shiftCoords(F.geometry[j],o))}else if("MultiPolygon"===N)for(j=0,_=[];j<F.geometry.length;j++){for(var G=[],Z=0;Z<F.geometry[j].length;Z++)G.push(shiftCoords(F.geometry[j][Z],o));_.push(G)}s.push(createFeature(F.id,N,_,F.tags))}return s}function shiftCoords(i,o){var s=[];s.size=i.size,void 0!==i.start&&(s.start=i.start,s.end=i.end);for(var x=0;x<i.length;x+=3)s.push(i[x]+o,i[x+1],i[x+2]);return s}function transformTile(i,o){if(i.transformed)return i;var s,x,_,F=1<<i.z,N=i.x,j=i.y;for(s=0;s<i.features.length;s++){var G=i.features[s],Z=G.geometry,X=G.type;if(G.geometry=[],1===X)for(x=0;x<Z.length;x+=2)G.geometry.push(transformPoint(Z[x],Z[x+1],o,F,N,j));else for(x=0;x<Z.length;x++){var J=[];for(_=0;_<Z[x].length;_+=2)J.push(transformPoint(Z[x][_],Z[x][_+1],o,F,N,j));G.geometry.push(J)}}return i.transformed=!0,i}function transformPoint(i,o,s,x,_,F){return[Math.round(s*(i*x-_)),Math.round(s*(o*x-F))]}function addLine(i,o,s,x,_,F){var N=x*x;if(x>0&&o.size<(_?N:x)){s.numPoints+=o.length/3;return}for(var j=[],G=0;G<o.length;G+=3)(0===x||o[G+2]>N)&&(s.numSimplified++,j.push(o[G]),j.push(o[G+1])),s.numPoints++;_&&function(i,o){for(var s=0,x=0,_=i.length,F=_-2;x<_;F=x,x+=2)s+=(i[x]-i[F])*(i[x+1]+i[F+1]);if(s>0===o)for(x=0,_=i.length;x<_/2;x+=2){var N=i[x],j=i[x+1];i[x]=i[_-2-x],i[x+1]=i[_-1-x],i[_-2-x]=N,i[_-1-x]=j}}(j,F),i.push(j)}function GeoJSONVT(i,o){var s,x,_,F,N,j,G=(o=this.options=function(i,o){for(var s in o)i[s]=o[s];return i}(Object.create(this.options),o)).debug;if(G&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw Error("promoteId and generateId cannot be used together.");var Z=function(i,o){var s=[];if("FeatureCollection"===i.type)for(var x=0;x<i.features.length;x++)convertFeature(s,i.features[x],o,x);else"Feature"===i.type?convertFeature(s,i,o):convertFeature(s,{geometry:i},o);return s}(i,o);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),s=Z,_=(x=o).buffer/x.extent,F=s,N=clip(s,1,-1-_,_,0,-1,2,x),j=clip(s,1,1-_,2+_,0,-1,2,x),(N||j)&&(F=clip(s,1,-_,1+_,0,-1,2,x)||[],N&&(F=shiftFeatureCoords(N,1).concat(F)),j&&(F=F.concat(shiftFeatureCoords(j,-1)))),(Z=F).length&&this.splitTile(Z,0,0,0),G&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(i,o,s){return((1<<i)*s+o)*32+i}function loadGeoJSONTile(i,o){var s=i.tileID.canonical;if(!this._geoJSONIndex)return o(null,null);var x=this._geoJSONIndex.getTile(s.z,s.x,s.y);if(!x)return o(null,null);var F=new GeoJSONWrapper(x.features),N=_(F);(0!==N.byteOffset||N.byteLength!==N.buffer.byteLength)&&(N=new Uint8Array(N)),o(null,{vectorTile:F,rawData:N.buffer})}Supercluster.prototype.load=function(i){var o=this.options,s=o.log,x=o.minZoom,_=o.maxZoom,F=o.nodeSize;s&&console.time("total time");var N="prepare "+i.length+" points";s&&console.time(N),this.points=i;for(var j=[],G=0;G<i.length;G++)i[G].geometry&&j.push(function(i,o){var s=i.geometry.coordinates,x=s[0],_=s[1];return{x:lngX(x),y:latY(_),zoom:1/0,index:o,parentId:-1}}(i[G],G));this.trees[_+1]=new KDBush(j,getX,getY,F,Float32Array),s&&console.timeEnd(N);for(var Z=_;Z>=x;Z--){var X=+Date.now();j=this._cluster(j,Z),this.trees[Z]=new KDBush(j,getX,getY,F,Float32Array),s&&console.log("z%d: %d clusters in %dms",Z,j.length,+Date.now()-X)}return s&&console.timeEnd("total time"),this},Supercluster.prototype.getClusters=function(i,o){var s=((i[0]+180)%360+360)%360-180,x=Math.max(-90,Math.min(90,i[1])),_=180===i[2]?180:((i[2]+180)%360+360)%360-180,F=Math.max(-90,Math.min(90,i[3]));if(i[2]-i[0]>=360)s=-180,_=180;else if(s>_){var N=this.getClusters([s,x,180,F],o),j=this.getClusters([-180,x,_,F],o);return N.concat(j)}for(var G=this.trees[this._limitZoom(o)],Z=G.range(lngX(s),latY(F),lngX(_),latY(x)),X=[],J=0;J<Z.length;J+=1){var $=Z[J],ee=G.points[$];X.push(ee.numPoints?getClusterJSON(ee):this.points[ee.index])}return X},Supercluster.prototype.getChildren=function(i){var o=this._getOriginId(i),s=this._getOriginZoom(i),x="No cluster with the specified id.",_=this.trees[s];if(!_)throw Error(x);var F=_.points[o];if(!F)throw Error(x);for(var N=this.options.radius/(this.options.extent*Math.pow(2,s-1)),j=_.within(F.x,F.y,N),G=[],Z=0;Z<j.length;Z+=1){var X=j[Z],J=_.points[X];J.parentId===i&&G.push(J.numPoints?getClusterJSON(J):this.points[J.index])}if(0===G.length)throw Error(x);return G},Supercluster.prototype.getLeaves=function(i,o,s){o=o||10,s=s||0;var x=[];return this._appendLeaves(x,i,o,s,0),x},Supercluster.prototype.getTile=function(i,o,s){var x=this.trees[this._limitZoom(i)],_=Math.pow(2,i),F=this.options,N=F.extent,j=F.radius/N,G=(s-j)/_,Z=(s+1+j)/_,X={features:[]};return this._addTileFeatures(x.range((o-j)/_,G,(o+1+j)/_,Z),x.points,o,s,_,X),0===o&&this._addTileFeatures(x.range(1-j/_,G,1,Z),x.points,_,s,_,X),o===_-1&&this._addTileFeatures(x.range(0,G,j/_,Z),x.points,-1,s,_,X),X.features.length?X:null},Supercluster.prototype.getClusterExpansionZoom=function(i){for(var o=this._getOriginZoom(i)-1;o<=this.options.maxZoom;){var s=this.getChildren(i);if(o++,1!==s.length)break;i=s[0].properties.cluster_id}return o},Supercluster.prototype._appendLeaves=function(i,o,s,x,_){for(var F=this.getChildren(o),N=0;N<F.length;N+=1){var j=F[N],G=j.properties;if(G&&G.cluster?_+G.point_count<=x?_+=G.point_count:_=this._appendLeaves(i,G.cluster_id,s,x,_):_<x?_++:i.push(j),i.length===s)break}return _},Supercluster.prototype._addTileFeatures=function(i,o,s,x,_,F){for(var N=0;N<i.length;N+=1){var j=o[i[N]],G=j.numPoints,Z={type:1,geometry:[[Math.round(this.options.extent*(j.x*_-s)),Math.round(this.options.extent*(j.y*_-x))]],tags:G?getClusterProperties(j):this.points[j.index].properties},X=void 0;G?X=j.id:this.options.generateId?X=j.index:this.points[j.index].id&&(X=this.points[j.index].id),void 0!==X&&(Z.id=X),F.features.push(Z)}},Supercluster.prototype._limitZoom=function(i){return Math.max(this.options.minZoom,Math.min(i,this.options.maxZoom+1))},Supercluster.prototype._cluster=function(i,o){for(var s=[],x=this.options,_=x.radius,F=x.extent,N=x.reduce,j=_/(F*Math.pow(2,o)),G=0;G<i.length;G++){var Z=i[G];if(!(Z.zoom<=o)){Z.zoom=o;for(var X=this.trees[o+1],J=X.within(Z.x,Z.y,j),$=Z.numPoints||1,ee=Z.x*$,et=Z.y*$,er=N&&$>1?this._map(Z,!0):null,en=(G<<5)+(o+1)+this.points.length,ei=0;ei<J.length;ei+=1){var eo=J[ei],es=X.points[eo];if(!(es.zoom<=o)){es.zoom=o;var el=es.numPoints||1;ee+=es.x*el,et+=es.y*el,$+=el,es.parentId=en,N&&(er||(er=this._map(Z,!0)),N(er,this._map(es)))}}1===$?s.push(Z):(Z.parentId=en,s.push({x:ee/$,y:et/$,zoom:1/0,id:en,parentId:-1,numPoints:$,properties:er}))}}return s},Supercluster.prototype._getOriginId=function(i){return i-this.points.length>>5},Supercluster.prototype._getOriginZoom=function(i){return(i-this.points.length)%32},Supercluster.prototype._map=function(i,o){if(i.numPoints)return o?extend({},i.properties):i.properties;var s=this.points[i.index].properties,x=this.options.map(s);return o&&x===s?extend({},x):x},GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(i,o,s,x,_,F,N){for(var j=[i,o,s,x],G=this.options,Z=G.debug;j.length;){x=j.pop(),s=j.pop(),o=j.pop(),i=j.pop();var X=1<<o,J=toID(o,s,x),$=this.tiles[J];if(!$&&(Z>1&&console.time("creation"),$=this.tiles[J]=function(i,o,s,x,_){for(var F=o===_.maxZoom?0:_.tolerance/((1<<o)*_.extent),N={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:s,y:x,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},j=0;j<i.length;j++){N.numFeatures++,function(i,o,s,x){var _=o.geometry,F=o.type,N=[];if("Point"===F||"MultiPoint"===F)for(var j=0;j<_.length;j+=3)N.push(_[j]),N.push(_[j+1]),i.numPoints++,i.numSimplified++;else if("LineString"===F)addLine(N,_,i,s,!1,!1);else if("MultiLineString"===F||"Polygon"===F)for(j=0;j<_.length;j++)addLine(N,_[j],i,s,"Polygon"===F,0===j);else if("MultiPolygon"===F)for(var G=0;G<_.length;G++){var Z=_[G];for(j=0;j<Z.length;j++)addLine(N,Z[j],i,s,!0,0===j)}if(N.length){var X=o.tags||null;if("LineString"===F&&x.lineMetrics){for(var J in X={},o.tags)X[J]=o.tags[J];X.mapbox_clip_start=_.start/_.size,X.mapbox_clip_end=_.end/_.size}var $={geometry:N,type:"Polygon"===F||"MultiPolygon"===F?3:"LineString"===F||"MultiLineString"===F?2:1,tags:X};null!==o.id&&($.id=o.id),i.features.push($)}}(N,i[j],F,_);var G=i[j].minX,Z=i[j].minY,X=i[j].maxX,J=i[j].maxY;G<N.minX&&(N.minX=G),Z<N.minY&&(N.minY=Z),X>N.maxX&&(N.maxX=X),J>N.maxY&&(N.maxY=J)}return N}(i,o,s,x,G),this.tileCoords.push({z:o,x:s,y:x}),Z)){Z>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,s,x,$.numFeatures,$.numPoints,$.numSimplified),console.timeEnd("creation"));var ee="z"+o;this.stats[ee]=(this.stats[ee]||0)+1,this.total++}if($.source=i,_){if(o===G.maxZoom||o===_)continue;var et=1<<_-o;if(s!==Math.floor(F/et)||x!==Math.floor(N/et))continue}else if(o===G.indexMaxZoom||$.numPoints<=G.indexMaxPoints)continue;if($.source=null,0!==i.length){Z>1&&console.time("clipping");var er,en,ei,eo,es,el,ec=.5*G.buffer/G.extent,eu=.5-ec,ef=.5+ec,eh=1+ec;er=en=ei=eo=null,es=clip(i,X,s-ec,s+ef,0,$.minX,$.maxX,G),el=clip(i,X,s+eu,s+eh,0,$.minX,$.maxX,G),i=null,es&&(er=clip(es,X,x-ec,x+ef,1,$.minY,$.maxY,G),en=clip(es,X,x+eu,x+eh,1,$.minY,$.maxY,G),es=null),el&&(ei=clip(el,X,x-ec,x+ef,1,$.minY,$.maxY,G),eo=clip(el,X,x+eu,x+eh,1,$.minY,$.maxY,G),el=null),Z>1&&console.timeEnd("clipping"),j.push(er||[],o+1,2*s,2*x),j.push(en||[],o+1,2*s,2*x+1),j.push(ei||[],o+1,2*s+1,2*x),j.push(eo||[],o+1,2*s+1,2*x+1)}}},GeoJSONVT.prototype.getTile=function(i,o,s){var x=this.options,_=x.extent,F=x.debug;if(i<0||i>24)return null;var N=1<<i,j=toID(i,o=(o%N+N)%N,s);if(this.tiles[j])return transformTile(this.tiles[j],_);F>1&&console.log("drilling down to z%d-%d-%d",i,o,s);for(var G,Z=i,X=o,J=s;!G&&Z>0;)Z--,X=Math.floor(X/2),J=Math.floor(J/2),G=this.tiles[toID(Z,X,J)];return G&&G.source?(F>1&&console.log("found parent tile z%d-%d-%d",Z,X,J),F>1&&console.time("drilling down"),this.splitTile(G.source,Z,X,J,i,o,s),F>1&&console.timeEnd("drilling down"),this.tiles[j]?transformTile(this.tiles[j],_):null):null};var N=function(o){function GeoJSONWorkerSource(i,s,x,_){o.call(this,i,s,x,loadGeoJSONTile),_&&(this.loadGeoJSON=_)}return o&&(GeoJSONWorkerSource.__proto__=o),GeoJSONWorkerSource.prototype=Object.create(o&&o.prototype),GeoJSONWorkerSource.prototype.constructor=GeoJSONWorkerSource,GeoJSONWorkerSource.prototype.loadData=function(i,o){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=o,this._pendingLoadDataParams=i,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},GeoJSONWorkerSource.prototype._loadData=function(){var o=this;if(this._pendingCallback&&this._pendingLoadDataParams){var s=this._pendingCallback,x=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var _=!!x&&!!x.request&&!!x.request.collectResourceTiming&&new i.RequestPerformance(x.request);this.loadGeoJSON(x,function(F,N){if(F||!N)return s(F);if("object"!=typeof N)return s(Error("Input data given to '"+x.source+"' is not a valid GeoJSON object."));(function rewind(i,o){var s,x=i&&i.type;if("FeatureCollection"===x)for(s=0;s<i.features.length;s++)rewind(i.features[s],o);else if("GeometryCollection"===x)for(s=0;s<i.geometries.length;s++)rewind(i.geometries[s],o);else if("Feature"===x)rewind(i.geometry,o);else if("Polygon"===x)rewindRings(i.coordinates,o);else if("MultiPolygon"===x)for(s=0;s<i.coordinates.length;s++)rewindRings(i.coordinates[s],o);return i})(N,!0);try{var j;o._geoJSONIndex=x.cluster?new Supercluster(function(o){var s=o.superclusterOptions,x=o.clusterProperties;if(!x||!s)return s;for(var _={},F={},N={accumulated:null,zoom:0},j={properties:null},G=Object.keys(x),Z=0;Z<G.length;Z+=1){var X=G[Z],J=x[X],$=J[0],ee=J[1],et=i.createExpression(ee),er=i.createExpression("string"==typeof $?[$,["accumulated"],["get",X]]:$);_[X]=et.value,F[X]=er.value}return s.map=function(i){j.properties=i;for(var o={},s=0;s<G.length;s+=1){var x=G[s];o[x]=_[x].evaluate(N,j)}return o},s.reduce=function(i,o){j.properties=o;for(var s=0;s<G.length;s+=1){var x=G[s];N.accumulated=i[x],i[x]=F[x].evaluate(N,j)}},s}(x)).load(N.features):(j=x.geojsonVtOptions,new GeoJSONVT(N,j))}catch(i){return s(i)}o.loaded={};var G={};if(_){var Z=_.finish();Z&&(G.resourceTiming={},G.resourceTiming[x.source]=JSON.parse(JSON.stringify(Z)))}s(null,G)})}},GeoJSONWorkerSource.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},GeoJSONWorkerSource.prototype.reloadTile=function(i,s){var x=this.loaded,_=i.uid;return x&&x[_]?o.prototype.reloadTile.call(this,i,s):this.loadTile(i,s)},GeoJSONWorkerSource.prototype.loadGeoJSON=function(o,s){if(o.request)i.getJSON(o.request,s);else if("string"!=typeof o.data)return s(Error("Input data given to '"+o.source+"' is not a valid GeoJSON object."));else try{return s(null,JSON.parse(o.data))}catch(i){return s(Error("Input data given to '"+o.source+"' is not a valid GeoJSON object."))}},GeoJSONWorkerSource.prototype.removeSource=function(i,o){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),o()},GeoJSONWorkerSource.prototype.getClusterExpansionZoom=function(i,o){try{o(null,this._geoJSONIndex.getClusterExpansionZoom(i.clusterId))}catch(i){o(i)}},GeoJSONWorkerSource.prototype.getClusterChildren=function(i,o){try{o(null,this._geoJSONIndex.getChildren(i.clusterId))}catch(i){o(i)}},GeoJSONWorkerSource.prototype.getClusterLeaves=function(i,o){try{o(null,this._geoJSONIndex.getLeaves(i.clusterId,i.limit,i.offset))}catch(i){o(i)}},GeoJSONWorkerSource}(VectorTileWorkerSource),Worker=function(o){var s=this;this.self=o,this.actor=new i.Actor(o,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:VectorTileWorkerSource,geojson:N},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(i,o){if(s.workerSourceTypes[i])throw Error('Worker source with name "'+i+'" already registered.');s.workerSourceTypes[i]=o},this.self.registerRTLTextPlugin=function(o){if(i.plugin.isParsed())throw Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=o.applyArabicShaping,i.plugin.processBidirectionalText=o.processBidirectionalText,i.plugin.processStyledBidirectionalText=o.processStyledBidirectionalText}};return Worker.prototype.setReferrer=function(i,o){this.referrer=o},Worker.prototype.setImages=function(i,o,s){for(var x in this.availableImages[i]=o,this.workerSources[i]){var _=this.workerSources[i][x];for(var F in _)_[F].availableImages=o}s()},Worker.prototype.setLayers=function(i,o,s){this.getLayerIndex(i).replace(o),s()},Worker.prototype.updateLayers=function(i,o,s){this.getLayerIndex(i).update(o.layers,o.removedIds),s()},Worker.prototype.loadTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).loadTile(o,s)},Worker.prototype.loadDEMTile=function(i,o,s){this.getDEMWorkerSource(i,o.source).loadTile(o,s)},Worker.prototype.reloadTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).reloadTile(o,s)},Worker.prototype.abortTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).abortTile(o,s)},Worker.prototype.removeTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).removeTile(o,s)},Worker.prototype.removeDEMTile=function(i,o){this.getDEMWorkerSource(i,o.source).removeTile(o)},Worker.prototype.removeSource=function(i,o,s){if(this.workerSources[i]&&this.workerSources[i][o.type]&&this.workerSources[i][o.type][o.source]){var x=this.workerSources[i][o.type][o.source];delete this.workerSources[i][o.type][o.source],void 0!==x.removeSource?x.removeSource(o,s):s()}},Worker.prototype.loadWorkerSource=function(i,o,s){try{this.self.importScripts(o.url),s()}catch(i){s(i.toString())}},Worker.prototype.syncRTLPluginState=function(o,s,x){try{i.plugin.setState(s);var _=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&null!=_){this.self.importScripts(_);var F=i.plugin.isParsed(),N=F?void 0:Error("RTL Text Plugin failed to import scripts from "+_);x(N,F)}}catch(i){x(i.toString())}},Worker.prototype.getAvailableImages=function(i){var o=this.availableImages[i];return o||(o=[]),o},Worker.prototype.getLayerIndex=function(i){var o=this.layerIndexes[i];return o||(o=this.layerIndexes[i]=new StyleLayerIndex),o},Worker.prototype.getWorkerSource=function(i,o,s){var x=this;return this.workerSources[i]||(this.workerSources[i]={}),this.workerSources[i][o]||(this.workerSources[i][o]={}),this.workerSources[i][o][s]||(this.workerSources[i][o][s]=new this.workerSourceTypes[o]({send:function(o,s,_){x.actor.send(o,s,_,i)}},this.getLayerIndex(i),this.getAvailableImages(i))),this.workerSources[i][o][s]},Worker.prototype.getDEMWorkerSource=function(i,o){return this.demWorkerSources[i]||(this.demWorkerSources[i]={}),this.demWorkerSources[i][o]||(this.demWorkerSources[i][o]=new RasterDEMTileWorkerSource),this.demWorkerSources[i][o]},Worker.prototype.enforceCacheSizeLimit=function(o,s){i.enforceCacheSizeLimit(s)},"undefined"!=typeof WorkerGlobalScope&&void 0!==i.window&&i.window instanceof WorkerGlobalScope&&(i.window.worker=new Worker(i.window)),Worker}),define(["./shared"],function(i){var o,s,x,_,F=i.createCommonjsModule(function(i){function isSupported(i){return!notSupportedReason(i)}function notSupportedReason(i){var s;return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var i,o,s=new Blob([""],{type:"text/javascript"}),x=URL.createObjectURL(s);try{o=new Worker(x),i=!0}catch(o){i=!1}return o&&o.terminate(),URL.revokeObjectURL(x),i}()?"insufficient worker support":"Uint8ClampedArray"in window?ArrayBuffer.isView?!function(){var i=document.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");if(!o)return!1;var s=o.getImageData(0,0,1,1);return s&&s.width===i.width}()?"insufficient Canvas/getImageData support":(void 0===o[s=i&&i.failIfMajorPerformanceCaveat]&&(o[s]=function(i){var o,s,x=(o=document.createElement("canvas"),((s=Object.create(isSupported.webGLContextAttributes)).failIfMajorPerformanceCaveat=i,o.probablySupportsContext)?o.probablySupportsContext("webgl",s)||o.probablySupportsContext("experimental-webgl",s):o.supportsContext?o.supportsContext("webgl",s)||o.supportsContext("experimental-webgl",s):o.getContext("webgl",s)||o.getContext("experimental-webgl",s));if(!x)return!1;var _=x.createShader(x.VERTEX_SHADER);return!(!_||x.isContextLost())&&(x.shaderSource(_,"void main() {}"),x.compileShader(_),!0===x.getShaderParameter(_,x.COMPILE_STATUS))}(s)),o[s])?void 0:"insufficient WebGL support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}i.exports?i.exports=isSupported:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=isSupported,window.mapboxgl.notSupportedReason=notSupportedReason);var o={};isSupported.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),N={};N.create=function(o,s,x){var _=i.window.document.createElement(o);return void 0!==s&&(_.className=s),x&&x.appendChild(_),_},N.createNS=function(o,s){return i.window.document.createElementNS(o,s)};var j=i.window.document.documentElement.style;function testProp(i){if(!j)return i[0];for(var o=0;o<i.length;o++)if(i[o]in j)return i[o];return i[0]}var G=testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);N.disableDrag=function(){j&&G&&(o=j[G],j[G]="none")},N.enableDrag=function(){j&&G&&(j[G]=o)};var Z=testProp(["transform","WebkitTransform"]);N.setTransform=function(i,o){i.style[Z]=o};var X=!1;try{var J=Object.defineProperty({},"passive",{get:function(){X=!0}});i.window.addEventListener("test",J,J),i.window.removeEventListener("test",J,J)}catch(i){X=!1}N.addEventListener=function(i,o,s,x){void 0===x&&(x={}),"passive"in x&&X?i.addEventListener(o,s,x):i.addEventListener(o,s,x.capture)},N.removeEventListener=function(i,o,s,x){void 0===x&&(x={}),"passive"in x&&X?i.removeEventListener(o,s,x):i.removeEventListener(o,s,x.capture)};var suppressClick=function(o){o.preventDefault(),o.stopPropagation(),i.window.removeEventListener("click",suppressClick,!0)};N.suppressClick=function(){i.window.addEventListener("click",suppressClick,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",suppressClick,!0)},0)},N.mousePos=function(o,s){var x=o.getBoundingClientRect();return new i.Point(s.clientX-x.left-o.clientLeft,s.clientY-x.top-o.clientTop)},N.touchPos=function(o,s){for(var x=o.getBoundingClientRect(),_=[],F=0;F<s.length;F++)_.push(new i.Point(s[F].clientX-x.left-o.clientLeft,s[F].clientY-x.top-o.clientTop));return _},N.mouseButton=function(o){return void 0!==i.window.InstallTrigger&&2===o.button&&o.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},N.remove=function(i){i.parentNode&&i.parentNode.removeChild(i)};var $=function(o){function ImageManager(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(ImageManager.__proto__=o),ImageManager.prototype=Object.create(o&&o.prototype),ImageManager.prototype.constructor=ImageManager,ImageManager.prototype.isLoaded=function(){return this.loaded},ImageManager.prototype.setLoaded=function(i){if(this.loaded!==i&&(this.loaded=i,i)){for(var o=0,s=this.requestors;o<s.length;o+=1){var x=s[o],_=x.ids,F=x.callback;this._notify(_,F)}this.requestors=[]}},ImageManager.prototype.getImage=function(i){return this.images[i]},ImageManager.prototype.addImage=function(i,o){this._validate(i,o)&&(this.images[i]=o)},ImageManager.prototype._validate=function(o,s){var x=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "stretchX" value'))),x=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "stretchY" value'))),x=!1),this._validateContent(s.content,s)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "content" value'))),x=!1),x},ImageManager.prototype._validateStretch=function(i,o){if(!i)return!0;for(var s=0,x=0;x<i.length;x+=1){var _=i[x];if(_[0]<s||_[1]<_[0]||o<_[1])return!1;s=_[1]}return!0},ImageManager.prototype._validateContent=function(i,o){return!i||4===i.length&&!(i[0]<0)&&!(o.data.width<i[0])&&!(i[1]<0)&&!(o.data.height<i[1])&&!(i[2]<0)&&!(o.data.width<i[2])&&!(i[3]<0)&&!(o.data.height<i[3])&&!(i[2]<i[0])&&!(i[3]<i[1])},ImageManager.prototype.updateImage=function(i,o){var s=this.images[i];o.version=s.version+1,this.images[i]=o,this.updatedImages[i]=!0},ImageManager.prototype.removeImage=function(i){var o=this.images[i];delete this.images[i],delete this.patterns[i],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()},ImageManager.prototype.listImages=function(){return Object.keys(this.images)},ImageManager.prototype.getImages=function(i,o){var s=!0;if(!this.isLoaded())for(var x=0;x<i.length;x+=1){var _=i[x];this.images[_]||(s=!1)}this.isLoaded()||s?this._notify(i,o):this.requestors.push({ids:i,callback:o})},ImageManager.prototype._notify=function(o,s){for(var x={},_=0;_<o.length;_+=1){var F=o[_];this.images[F]||this.fire(new i.Event("styleimagemissing",{id:F}));var N=this.images[F];N?x[F]={data:N.data.clone(),pixelRatio:N.pixelRatio,sdf:N.sdf,version:N.version,stretchX:N.stretchX,stretchY:N.stretchY,content:N.content,hasRenderCallback:!!(N.userImage&&N.userImage.render)}:i.warnOnce('Image "'+F+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}s(null,x)},ImageManager.prototype.getPixelSize=function(){var i=this.atlasImage;return{width:i.width,height:i.height}},ImageManager.prototype.getPattern=function(o){var s=this.patterns[o],x=this.getImage(o);if(!x)return null;if(s&&s.position.version===x.version)return s.position;if(s)s.position.version=x.version;else{var _={w:x.data.width+2,h:x.data.height+2,x:0,y:0},F=new i.ImagePosition(_,x);this.patterns[o]={bin:_,position:F}}return this._updatePatternAtlas(),this.patterns[o].position},ImageManager.prototype.bind=function(o){var s=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(o,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)},ImageManager.prototype._updatePatternAtlas=function(){var o=[];for(var s in this.patterns)o.push(this.patterns[s].bin);var x=i.potpack(o),_=x.w,F=x.h,N=this.atlasImage;for(var j in N.resize({width:_||1,height:F||1}),this.patterns){var G=this.patterns[j].bin,Z=G.x+1,X=G.y+1,J=this.images[j].data,$=J.width,ee=J.height;i.RGBAImage.copy(J,N,{x:0,y:0},{x:Z,y:X},{width:$,height:ee}),i.RGBAImage.copy(J,N,{x:0,y:ee-1},{x:Z,y:X-1},{width:$,height:1}),i.RGBAImage.copy(J,N,{x:0,y:0},{x:Z,y:X+ee},{width:$,height:1}),i.RGBAImage.copy(J,N,{x:$-1,y:0},{x:Z-1,y:X},{width:1,height:ee}),i.RGBAImage.copy(J,N,{x:0,y:0},{x:Z+$,y:X},{width:1,height:ee})}this.dirty=!0},ImageManager.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},ImageManager.prototype.dispatchRenderCallbacks=function(i){for(var o=0;o<i.length;o+=1){var s=i[o];if(!this.callbackDispatchedThisFrame[s]){this.callbackDispatchedThisFrame[s]=!0;var x=this.images[s];(function(i){var o=i.userImage;return!!(o&&o.render&&o.render())&&(i.data.replace(new Uint8Array(o.data.buffer)),!0)})(x)&&this.updateImage(s,x)}}},ImageManager}(i.Evented);function TinySDF(i,o,s,x,_,F){this.fontSize=i||24,this.buffer=void 0===o?3:o,this.cutoff=x||.25,this.fontFamily=_||"sans-serif",this.fontWeight=F||"normal",this.radius=s||8;var N=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=N,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.d=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Int16Array(N),this.middle=Math.round(N/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function edt(i,o,s,x,_,F,N){for(var j=0;j<o;j++){for(var G=0;G<s;G++)x[G]=i[G*o+j];for(edt1d(x,_,F,N,s),G=0;G<s;G++)i[G*o+j]=_[G]}for(G=0;G<s;G++){for(j=0;j<o;j++)x[j]=i[G*o+j];for(edt1d(x,_,F,N,o),j=0;j<o;j++)i[G*o+j]=Math.sqrt(_[j])}}function edt1d(i,o,s,x,_){s[0]=0,x[0]=-1e20,x[1]=1e20;for(var F=1,N=0;F<_;F++){for(var j=(i[F]+F*F-(i[s[N]]+s[N]*s[N]))/(2*F-2*s[N]);j<=x[N];)N--,j=(i[F]+F*F-(i[s[N]]+s[N]*s[N]))/(2*F-2*s[N]);s[++N]=F,x[N]=j,x[N+1]=1e20}for(F=0,N=0;F<_;F++){for(;x[N+1]<F;)N++;o[F]=(F-s[N])*(F-s[N])+i[s[N]]}}TinySDF.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var o=this.ctx.getImageData(0,0,this.size,this.size),s=new Uint8ClampedArray(this.size*this.size),x=0;x<this.size*this.size;x++){var _=o.data[4*x+3]/255;this.gridOuter[x]=1===_?0:0===_?1e20:Math.pow(Math.max(0,.5-_),2),this.gridInner[x]=1===_?1e20:0===_?0:Math.pow(Math.max(0,_-.5),2)}for(edt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),edt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),x=0;x<this.size*this.size;x++){var F=this.gridOuter[x]-this.gridInner[x];s[x]=Math.max(0,Math.min(255,Math.round(255-255*(F/this.radius+this.cutoff))))}return s},TinySDF.default=TinySDF;var GlyphManager=function(i,o){this.requestManager=i,this.localIdeographFontFamily=o,this.entries={}};GlyphManager.prototype.setURL=function(i){this.url=i},GlyphManager.prototype.getGlyphs=function(o,s){var x=this,_=[];for(var F in o)for(var N=0,j=o[F];N<j.length;N+=1){var G=j[N];_.push({stack:F,id:G})}i.asyncAll(_,function(i,o){var s=i.stack,_=i.id,F=x.entries[s];F||(F=x.entries[s]={glyphs:{},requests:{},ranges:{}});var N=F.glyphs[_];if(void 0!==N){o(null,{stack:s,id:_,glyph:N});return}if(N=x._tinySDF(F,s,_)){F.glyphs[_]=N,o(null,{stack:s,id:_,glyph:N});return}var j=Math.floor(_/256);if(256*j>65535){o(Error("glyphs > 65535 not supported"));return}if(F.ranges[j]){o(null,{stack:s,id:_,glyph:N});return}var G=F.requests[j];G||(G=F.requests[j]=[],GlyphManager.loadGlyphRange(s,j,x.url,x.requestManager,function(i,o){if(o){for(var s in o)x._doesCharSupportLocalGlyph(+s)||(F.glyphs[+s]=o[+s]);F.ranges[j]=!0}for(var _=0,N=G;_<N.length;_+=1)(0,N[_])(i,o);delete F.requests[j]})),G.push(function(i,x){i?o(i):x&&o(null,{stack:s,id:_,glyph:x[_]||null})})},function(i,o){if(i)s(i);else if(o){for(var x={},_=0;_<o.length;_+=1){var F=o[_],N=F.stack,j=F.id,G=F.glyph;(x[N]||(x[N]={}))[j]=G&&{id:G.id,bitmap:G.bitmap.clone(),metrics:G.metrics}}s(null,x)}})},GlyphManager.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](o)||i.isChar["Hangul Syllables"](o)||i.isChar.Hiragana(o)||i.isChar.Katakana(o))},GlyphManager.prototype._tinySDF=function(o,s,x){var _=this.localIdeographFontFamily;if(_&&this._doesCharSupportLocalGlyph(x)){var F=o.tinySDF;if(!F){var N="400";/bold/i.test(s)?N="900":/medium/i.test(s)?N="500":/light/i.test(s)&&(N="200"),F=o.tinySDF=new GlyphManager.TinySDF(24,3,8,.25,_,N)}return{id:x,bitmap:new i.AlphaImage({width:30,height:30},F.draw(String.fromCharCode(x))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},GlyphManager.loadGlyphRange=function(o,s,x,_,F){var N=256*s,j=N+255,G=_.transformRequest(_.normalizeGlyphsURL(x).replace("{fontstack}",o).replace("{range}",N+"-"+j),i.ResourceType.Glyphs);i.getArrayBuffer(G,function(o,s){if(o)F(o);else if(s){for(var x={},_=0,N=i.parseGlyphPBF(s);_<N.length;_+=1){var j=N[_];x[j.id]=j}F(null,x)}})},GlyphManager.TinySDF=TinySDF;var LightPositionProperty=function(){this.specification=i.styleSpec.light.position};LightPositionProperty.prototype.possiblyEvaluate=function(o,s){return i.sphericalToCartesian(o.expression.evaluate(s))},LightPositionProperty.prototype.interpolate=function(o,s,x){return{x:i.number(o.x,s.x,x),y:i.number(o.y,s.y,x),z:i.number(o.z,s.z,x)}};var ee=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new LightPositionProperty,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),et="-transition",er=function(o){function Light(s){o.call(this),this._transitionable=new i.Transitionable(ee),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}return o&&(Light.__proto__=o),Light.prototype=Object.create(o&&o.prototype),Light.prototype.constructor=Light,Light.prototype.getLight=function(){return this._transitionable.serialize()},Light.prototype.setLight=function(o,s){if(void 0===s&&(s={}),!this._validate(i.validateLight,o,s))for(var x in o){var _=o[x];i.endsWith(x,et)?this._transitionable.setTransition(x.slice(0,-et.length),_):this._transitionable.setValue(x,_)}},Light.prototype.updateTransitions=function(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)},Light.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Light.prototype.recalculate=function(i){this.properties=this._transitioning.possiblyEvaluate(i)},Light.prototype._validate=function(o,s,x){return(!x||!1!==x.validate)&&i.emitValidationErrors(this,o.call(i.validateStyle,i.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},Light}(i.Evented),LineAtlas=function(i,o){this.width=i,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};LineAtlas.prototype.getDash=function(i,o){var s=i.join(",")+String(o);return this.dashEntry[s]||(this.dashEntry[s]=this.addDash(i,o)),this.dashEntry[s]},LineAtlas.prototype.getDashRanges=function(i,o,s){var x=i.length%2==1,_=[],F=x?-i[i.length-1]*s:0,N=i[0]*s,j=!0;_.push({left:F,right:N,isDash:j,zeroLength:0===i[0]});for(var G=i[0],Z=1;Z<i.length;Z++){j=!j;var X=i[Z];F=G*s,G+=X,N=G*s,_.push({left:F,right:N,isDash:j,zeroLength:0===X})}return _},LineAtlas.prototype.addRoundDash=function(i,o,s){for(var x=o/2,_=-s;_<=s;_++)for(var F=this.nextRow+s+_,N=this.width*F,j=0,G=i[0],Z=0;Z<this.width;Z++){Z/G.right>1&&(G=i[++j]);var X=Math.min(Math.abs(Z-G.left),Math.abs(Z-G.right)),J=void 0,$=_/s*(x+1);if(G.isDash){var ee=x-Math.abs($);J=Math.sqrt(X*X+ee*ee)}else J=x-Math.sqrt(X*X+$*$);this.data[N+Z]=Math.max(0,Math.min(255,J+128))}},LineAtlas.prototype.addRegularDash=function(i){for(var o=i.length-1;o>=0;--o){var s=i[o],x=i[o+1];s.zeroLength?i.splice(o,1):x&&x.isDash===s.isDash&&(x.left=s.left,i.splice(o,1))}var _=i[0],F=i[i.length-1];_.isDash===F.isDash&&(_.left=F.left-this.width,F.right=_.right+this.width);for(var N=this.width*this.nextRow,j=0,G=i[0],Z=0;Z<this.width;Z++){Z/G.right>1&&(G=i[++j]);var X=Math.min(Math.abs(Z-G.left),Math.abs(Z-G.right)),J=G.isDash?X:-X;this.data[N+Z]=Math.max(0,Math.min(255,J+128))}},LineAtlas.prototype.addDash=function(o,s){var x=s?7:0,_=2*x+1;if(this.nextRow+_>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var F=0,N=0;N<o.length;N++)F+=o[N];if(0!==F){var j=this.width/F,G=this.getDashRanges(o,this.width,j);s?this.addRoundDash(G,j,x):this.addRegularDash(G)}var Z={y:(this.nextRow+x+.5)/this.height,height:2*x/this.height,width:F};return this.nextRow+=_,this.dirty=!0,Z},LineAtlas.prototype.bind=function(i){var o=i.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))};var Dispatcher=function Dispatcher(o,s){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var x=this.workerPool.acquire(this.id),_=0;_<x.length;_++){var F=x[_],N=new Dispatcher.Actor(F,s,this.id);N.name="Worker "+_,this.actors.push(N)}};function loadTileJSON(o,s,x){var loaded=function(_,F){if(_)return x(_);if(F){var N=i.pick(i.extend(F,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);F.vector_layers&&(N.vectorLayers=F.vector_layers,N.vectorLayerIds=N.vectorLayers.map(function(i){return i.id})),N.tiles=s.canonicalizeTileset(N,o.url),x(null,N)}};return o.url?i.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),i.ResourceType.Source),loaded):i.browser.frame(function(){return loaded(null,o)})}Dispatcher.prototype.broadcast=function(o,s,x){x=x||function(){},i.asyncAll(this.actors,function(i,x){i.send(o,s,x)},x)},Dispatcher.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Dispatcher.prototype.remove=function(){this.actors.forEach(function(i){i.remove()}),this.actors=[],this.workerPool.release(this.id)},Dispatcher.Actor=i.Actor;var TileBounds=function(o,s,x){this.bounds=i.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=x||24};TileBounds.prototype.validateBounds=function(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]},TileBounds.prototype.contains=function(o){var s=Math.pow(2,o.z),x={minX:Math.floor(i.mercatorXfromLng(this.bounds.getWest())*s),minY:Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*s),maxX:Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*s),maxY:Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*s)};return o.x>=x.minX&&o.x<x.maxX&&o.y>=x.minY&&o.y<x.maxY};var en=function(o){function VectorTileSource(s,x,_,F){if(o.call(this),this.id=s,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(x,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},x),this._collectResourceTiming=x.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(F)}return o&&(VectorTileSource.__proto__=o),VectorTileSource.prototype=Object.create(o&&o.prototype),VectorTileSource.prototype.constructor=VectorTileSource,VectorTileSource.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=loadTileJSON(this._options,this.map._requestManager,function(s,x){o._tileJSONRequest=null,o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):x&&(i.extend(o,x),x.bounds&&(o.tileBounds=new TileBounds(x.bounds,o.minzoom,o.maxzoom)),i.postTurnstileEvent(x.tiles,o.map._requestManager._customAccessToken),i.postMapLoadEvent(x.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},VectorTileSource.prototype.loaded=function(){return this._loaded},VectorTileSource.prototype.hasTile=function(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)},VectorTileSource.prototype.onAdd=function(i){this.map=i,this.load()},VectorTileSource.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},VectorTileSource.prototype.serialize=function(){return i.extend({},this._options)},VectorTileSource.prototype.loadTile=function(o,s){var x=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(x,i.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function done(x,_){return(delete o.request,o.aborted)?s(null):x&&404!==x.status?s(x):void(_&&_.resourceTiming&&(o.resourceTiming=_.resourceTiming),this.map._refreshExpiredTiles&&_&&o.setExpiryData(_),o.loadVectorData(_,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),s(null),o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null))}_.request.collectResourceTiming=this._collectResourceTiming,o.actor&&"expired"!==o.state?"loading"===o.state?o.reloadCallback=s:o.request=o.actor.send("reloadTile",_,done.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",_,done.bind(this)))},VectorTileSource.prototype.abortTile=function(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)},VectorTileSource.prototype.unloadTile=function(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)},VectorTileSource.prototype.hasTransition=function(){return!1},VectorTileSource}(i.Evented),ei=function(o){function RasterTileSource(s,x,_,F){o.call(this),this.id=s,this.dispatcher=_,this.setEventedParent(F),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},x),i.extend(this,i.pick(x,["url","scheme","tileSize"]))}return o&&(RasterTileSource.__proto__=o),RasterTileSource.prototype=Object.create(o&&o.prototype),RasterTileSource.prototype.constructor=RasterTileSource,RasterTileSource.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=loadTileJSON(this._options,this.map._requestManager,function(s,x){o._tileJSONRequest=null,o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):x&&(i.extend(o,x),x.bounds&&(o.tileBounds=new TileBounds(x.bounds,o.minzoom,o.maxzoom)),i.postTurnstileEvent(x.tiles),i.postMapLoadEvent(x.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},RasterTileSource.prototype.loaded=function(){return this._loaded},RasterTileSource.prototype.onAdd=function(i){this.map=i,this.load()},RasterTileSource.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},RasterTileSource.prototype.serialize=function(){return i.extend({},this._options)},RasterTileSource.prototype.hasTile=function(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)},RasterTileSource.prototype.loadTile=function(o,s){var x=this,_=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=i.getImage(this.map._requestManager.transformRequest(_,i.ResourceType.Tile),function(_,F){if(delete o.request,o.aborted)o.state="unloaded",s(null);else if(_)o.state="errored",s(_);else if(F){x.map._refreshExpiredTiles&&o.setExpiryData(F),delete F.cacheControl,delete F.expires;var N=x.map.painter.context,j=N.gl;o.texture=x.map.painter.getTileTexture(F.width),o.texture?o.texture.update(F,{useMipmap:!0}):(o.texture=new i.Texture(N,F,j.RGBA,{useMipmap:!0}),o.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),N.extTextureFilterAnisotropic&&j.texParameterf(j.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax)),o.state="loaded",i.cacheEntryPossiblyAdded(x.dispatcher),s(null)}})},RasterTileSource.prototype.abortTile=function(i,o){i.request&&(i.request.cancel(),delete i.request),o()},RasterTileSource.prototype.unloadTile=function(i,o){i.texture&&this.map.painter.saveTileTexture(i.texture),o()},RasterTileSource.prototype.hasTransition=function(){return!1},RasterTileSource}(i.Evented),eo=function(o){function RasterDEMTileSource(s,x,_,F){o.call(this,s,x,_,F),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},x),this.encoding=x.encoding||"mapbox"}return o&&(RasterDEMTileSource.__proto__=o),RasterDEMTileSource.prototype=Object.create(o&&o.prototype),RasterDEMTileSource.prototype.constructor=RasterDEMTileSource,RasterDEMTileSource.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},RasterDEMTileSource.prototype.loadTile=function(o,s){var x=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function done(i,x){i&&(o.state="errored",s(i)),x&&(o.dem=x,o.needsHillshadePrepare=!0,o.state="loaded",s(null))}o.request=i.getImage(this.map._requestManager.transformRequest(x,i.ResourceType.Tile),(function(x,_){if(delete o.request,o.aborted)o.state="unloaded",s(null);else if(x)o.state="errored",s(x);else if(_){this.map._refreshExpiredTiles&&o.setExpiryData(_),delete _.cacheControl,delete _.expires;var F=i.window.ImageBitmap&&_ instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?_:i.browser.getImageData(_,1),N={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:F,encoding:this.encoding};o.actor&&"expired"!==o.state||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",N,done.bind(this)))}}).bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},RasterDEMTileSource.prototype._getNeighboringTiles=function(o){var s=o.canonical,x=Math.pow(2,s.z),_=(s.x-1+x)%x,F=0===s.x?o.wrap-1:o.wrap,N=(s.x+1+x)%x,j=s.x+1===x?o.wrap+1:o.wrap,G={};return G[new i.OverscaledTileID(o.overscaledZ,F,s.z,_,s.y).key]={backfilled:!1},G[new i.OverscaledTileID(o.overscaledZ,j,s.z,N,s.y).key]={backfilled:!1},s.y>0&&(G[new i.OverscaledTileID(o.overscaledZ,F,s.z,_,s.y-1).key]={backfilled:!1},G[new i.OverscaledTileID(o.overscaledZ,o.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},G[new i.OverscaledTileID(o.overscaledZ,j,s.z,N,s.y-1).key]={backfilled:!1}),s.y+1<x&&(G[new i.OverscaledTileID(o.overscaledZ,F,s.z,_,s.y+1).key]={backfilled:!1},G[new i.OverscaledTileID(o.overscaledZ,o.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},G[new i.OverscaledTileID(o.overscaledZ,j,s.z,N,s.y+1).key]={backfilled:!1}),G},RasterDEMTileSource.prototype.unloadTile=function(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})},RasterDEMTileSource}(ei),es=function(o){function GeoJSONSource(s,x,_,F){o.call(this),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_.getActor(),this.setEventedParent(F),this._data=x.data,this._options=i.extend({},x),this._collectResourceTiming=x.collectResourceTiming,this._resourceTiming=[],void 0!==x.maxzoom&&(this.maxzoom=x.maxzoom),x.type&&(this.type=x.type),x.attribution&&(this.attribution=x.attribution),this.promoteId=x.promoteId;var N=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:x.cluster||!1,geojsonVtOptions:{buffer:(void 0!==x.buffer?x.buffer:128)*N,tolerance:(void 0!==x.tolerance?x.tolerance:.375)*N,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:x.lineMetrics||!1,generateId:x.generateId||!1},superclusterOptions:{maxZoom:void 0!==x.clusterMaxZoom?Math.min(x.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:i.EXTENT,radius:(x.clusterRadius||50)*N,log:!1,generateId:x.generateId||!1},clusterProperties:x.clusterProperties},x.workerOptions)}return o&&(GeoJSONSource.__proto__=o),GeoJSONSource.prototype=Object.create(o&&o.prototype),GeoJSONSource.prototype.constructor=GeoJSONSource,GeoJSONSource.prototype.load=function(){var o=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(s){if(s){o.fire(new i.ErrorEvent(s));return}var x={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(x.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new i.Event("data",x))})},GeoJSONSource.prototype.onAdd=function(i){this.map=i,this.load()},GeoJSONSource.prototype.setData=function(o){var s=this;return this._data=o,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(o){if(o){s.fire(new i.ErrorEvent(o));return}var x={dataType:"source",sourceDataType:"content"};s._collectResourceTiming&&s._resourceTiming&&s._resourceTiming.length>0&&(x.resourceTiming=s._resourceTiming,s._resourceTiming=[]),s.fire(new i.Event("data",x))}),this},GeoJSONSource.prototype.getClusterExpansionZoom=function(i,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},o),this},GeoJSONSource.prototype.getClusterChildren=function(i,o){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},o),this},GeoJSONSource.prototype.getClusterLeaves=function(i,o,s,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:o,offset:s},x),this},GeoJSONSource.prototype._updateWorkerData=function(o){var s=this;this._loaded=!1;var x=i.extend({},this.workerOptions),_=this._data;"string"==typeof _?(x.request=this.map._requestManager.transformRequest(i.browser.resolveURL(_),i.ResourceType.Source),x.request.collectResourceTiming=this._collectResourceTiming):x.data=JSON.stringify(_),this.actor.send(this.type+".loadData",x,function(i,_){s._removed||_&&_.abandoned||(s._loaded=!0,_&&_.resourceTiming&&_.resourceTiming[s.id]&&(s._resourceTiming=_.resourceTiming[s.id].slice(0)),s.actor.send(s.type+".coalesce",{source:x.source},null),o(i))})},GeoJSONSource.prototype.loaded=function(){return this._loaded},GeoJSONSource.prototype.loadTile=function(o,s){var x=this,_=o.actor?"reloadTile":"loadTile";o.actor=this.actor;var F={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(_,F,function(i,F){return(delete o.request,o.unloadVectorData(),o.aborted)?s(null):i?s(i):(o.loadVectorData(F,x.map.painter,"reloadTile"===_),s(null))})},GeoJSONSource.prototype.abortTile=function(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0},GeoJSONSource.prototype.unloadTile=function(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})},GeoJSONSource.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},GeoJSONSource.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},GeoJSONSource.prototype.hasTransition=function(){return!1},GeoJSONSource}(i.Evented),el=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ec=function(o){function ImageSource(i,s,x,_){o.call(this),this.id=i,this.dispatcher=x,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=s}return o&&(ImageSource.__proto__=o),ImageSource.prototype=Object.create(o&&o.prototype),ImageSource.prototype.constructor=ImageSource,ImageSource.prototype.load=function(o,s){var x=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(_,F){x._loaded=!0,_?x.fire(new i.ErrorEvent(_)):F&&(x.image=F,o&&(x.coordinates=o),s&&s(),x._finishLoading())})},ImageSource.prototype.loaded=function(){return this._loaded},ImageSource.prototype.updateImage=function(i){var o=this;return this.image&&i.url&&(this.options.url=i.url,this.load(i.coordinates,function(){o.texture=null})),this},ImageSource.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ImageSource.prototype.onAdd=function(i){this.map=i,this.load()},ImageSource.prototype.setCoordinates=function(o){var s=this;this.coordinates=o;var x=o.map(i.MercatorCoordinate.fromLngLat);this.tileID=function(o){for(var s=1/0,x=1/0,_=-1/0,F=-1/0,N=0;N<o.length;N+=1){var j=o[N];s=Math.min(s,j.x),x=Math.min(x,j.y),_=Math.max(_,j.x),F=Math.max(F,j.y)}var G=Math.max(0,Math.floor(-Math.log(Math.max(_-s,F-x))/Math.LN2)),Z=Math.pow(2,G);return new i.CanonicalTileID(G,Math.floor((s+_)/2*Z),Math.floor((x+F)/2*Z))}(x),this.minzoom=this.maxzoom=this.tileID.z;var _=x.map(function(i){return s.tileID.getTilePoint(i)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},ImageSource.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var o=this.map.painter.context,s=o.gl;for(var x in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,el.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(o,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[x];"loaded"!==_.state&&(_.state="loaded",_.texture=this.texture)}}},ImageSource.prototype.loadTile=function(i,o){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored",o(null)},ImageSource.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ImageSource.prototype.hasTransition=function(){return!1},ImageSource}(i.Evented),eu=function(o){function VideoSource(i,s,x,_){o.call(this,i,s,x,_),this.roundZoom=!0,this.type="video",this.options=s}return o&&(VideoSource.__proto__=o),VideoSource.prototype=Object.create(o&&o.prototype),VideoSource.prototype.constructor=VideoSource,VideoSource.prototype.load=function(){var o=this;this._loaded=!1;var s=this.options;this.urls=[];for(var x=0,_=s.urls;x<_.length;x+=1){var F=_[x];this.urls.push(this.map._requestManager.transformRequest(F,i.ResourceType.Source).url)}i.getVideo(this.urls,function(s,x){o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):x&&(o.video=x,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},VideoSource.prototype.pause=function(){this.video&&this.video.pause()},VideoSource.prototype.play=function(){this.video&&this.video.play()},VideoSource.prototype.seek=function(o){if(this.video){var s=this.video.seekable;o<s.start(0)||o>s.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+s.start(0)+" and "+s.end(0)+"-second mark."))):this.video.currentTime=o}},VideoSource.prototype.getVideo=function(){return this.video},VideoSource.prototype.onAdd=function(i){!this.map&&(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},VideoSource.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&!(this.video.readyState<2)){var o=this.map.painter.context,s=o.gl;for(var x in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,el.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(o,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[x];"loaded"!==_.state&&(_.state="loaded",_.texture=this.texture)}}},VideoSource.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},VideoSource.prototype.hasTransition=function(){return this.video&&!this.video.paused},VideoSource}(ec),ef=function(o){function CanvasSource(s,x,_,F){o.call(this,s,x,_,F),x.coordinates?(!Array.isArray(x.coordinates)||4!==x.coordinates.length||x.coordinates.some(function(i){return!Array.isArray(i)||2!==i.length||i.some(function(i){return"number"!=typeof i})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'missing required property "coordinates"'))),x.animate&&"boolean"!=typeof x.animate&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'optional "animate" property must be a boolean value'))),x.canvas?"string"==typeof x.canvas||x.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'missing required property "canvas"'))),this.options=x,this.animate=void 0===x.animate||x.animate}return o&&(CanvasSource.__proto__=o),CanvasSource.prototype=Object.create(o&&o.prototype),CanvasSource.prototype.constructor=CanvasSource,CanvasSource.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new i.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},CanvasSource.prototype.getCanvas=function(){return this.canvas},CanvasSource.prototype.onAdd=function(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()},CanvasSource.prototype.onRemove=function(){this.pause()},CanvasSource.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var s=this.map.painter.context,x=s.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,el.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(s,this.canvas,x.RGBA,{premultiply:!0}),this.tiles){var F=this.tiles[_];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture)}}},CanvasSource.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},CanvasSource.prototype.hasTransition=function(){return this._playing},CanvasSource.prototype._hasInvalidDimensions=function(){for(var i=0,o=[this.canvas.width,this.canvas.height];i<o.length;i+=1){var s=o[i];if(isNaN(s)||s<=0)return!0}return!1},CanvasSource}(ec),eh={vector:en,raster:ei,"raster-dem":eo,geojson:es,video:eu,image:ec,canvas:ef},create=function(o,s,x,_){var F=new eh[s.type](o,s,x,_);if(F.id!==o)throw Error("Expected Source id to be "+o+" instead of "+F.id);return i.bindAll(["load","abort","unload","serialize","prepare"],F),F};function sortTilesIn(i,o){var s=i.tileID,x=o.tileID;return s.overscaledZ-x.overscaledZ||s.canonical.y-x.canonical.y||s.wrap-x.wrap||s.canonical.x-x.canonical.x}var TileCache=function(i,o){this.max=i,this.onRemove=o,this.reset()};TileCache.prototype.reset=function(){for(var i in this.data)for(var o=0,s=this.data[i];o<s.length;o+=1){var x=s[o];x.timeout&&clearTimeout(x.timeout),this.onRemove(x.value)}return this.data={},this.order=[],this},TileCache.prototype.add=function(i,o,s){var x=this,_=i.wrapped().key;void 0===this.data[_]&&(this.data[_]=[]);var F={value:o,timeout:void 0};if(void 0!==s&&(F.timeout=setTimeout(function(){x.remove(i,F)},s)),this.data[_].push(F),this.order.push(_),this.order.length>this.max){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},TileCache.prototype.has=function(i){return i.wrapped().key in this.data},TileCache.prototype.getAndRemove=function(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null},TileCache.prototype._getAndRemoveByKey=function(i){var o=this.data[i].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),o.value},TileCache.prototype.getByKey=function(i){var o=this.data[i];return o?o[0].value:null},TileCache.prototype.get=function(i){return this.has(i)?this.data[i.wrapped().key][0].value:null},TileCache.prototype.remove=function(i,o){if(!this.has(i))return this;var s=i.wrapped().key,x=void 0===o?0:this.data[s].indexOf(o),_=this.data[s][x];return this.data[s].splice(x,1),_.timeout&&clearTimeout(_.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(_.value),this.order.splice(this.order.indexOf(s),1),this},TileCache.prototype.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},TileCache.prototype.filter=function(i){var o=[];for(var s in this.data)for(var x=0,_=this.data[s];x<_.length;x+=1){var F=_[x];i(F.value)||o.push(F)}for(var N=0;N<o.length;N+=1){var j=o[N];this.remove(j.value.tileID,j)}};var IndexBuffer=function(i,o,s){this.context=i;var x=i.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!s,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};IndexBuffer.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},IndexBuffer.prototype.updateData=function(i){var o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)},IndexBuffer.prototype.destroy=function(){var i=this.context.gl;this.buffer&&(i.deleteBuffer(this.buffer),delete this.buffer)};var ed={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},VertexBuffer=function(i,o,s,x){this.length=o.length,this.attributes=s,this.itemSize=o.bytesPerElement,this.dynamicDraw=x,this.context=i;var _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};VertexBuffer.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},VertexBuffer.prototype.updateData=function(i){var o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,i.arrayBuffer)},VertexBuffer.prototype.enableAttributes=function(i,o){for(var s=0;s<this.attributes.length;s++){var x=this.attributes[s],_=o.attributes[x.name];void 0!==_&&i.enableVertexAttribArray(_)}},VertexBuffer.prototype.setVertexAttribPointers=function(i,o,s){for(var x=0;x<this.attributes.length;x++){var _=this.attributes[x],F=o.attributes[_.name];void 0!==F&&i.vertexAttribPointer(F,_.components,i[ed[_.type]],!1,this.itemSize,_.offset+this.itemSize*(s||0))}},VertexBuffer.prototype.destroy=function(){var i=this.context.gl;this.buffer&&(i.deleteBuffer(this.buffer),delete this.buffer)};var BaseValue=function(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};BaseValue.prototype.get=function(){return this.current},BaseValue.prototype.set=function(i){},BaseValue.prototype.getDefault=function(){return this.default},BaseValue.prototype.setDefault=function(){this.set(this.default)};var ep=function(o){function ClearColor(){o.apply(this,arguments)}return o&&(ClearColor.__proto__=o),ClearColor.prototype=Object.create(o&&o.prototype),ClearColor.prototype.constructor=ClearColor,ClearColor.prototype.getDefault=function(){return i.Color.transparent},ClearColor.prototype.set=function(i){var o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)},ClearColor}(BaseValue),eg=function(i){function ClearDepth(){i.apply(this,arguments)}return i&&(ClearDepth.__proto__=i),ClearDepth.prototype=Object.create(i&&i.prototype),ClearDepth.prototype.constructor=ClearDepth,ClearDepth.prototype.getDefault=function(){return 1},ClearDepth.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)},ClearDepth}(BaseValue),em=function(i){function ClearStencil(){i.apply(this,arguments)}return i&&(ClearStencil.__proto__=i),ClearStencil.prototype=Object.create(i&&i.prototype),ClearStencil.prototype.constructor=ClearStencil,ClearStencil.prototype.getDefault=function(){return 0},ClearStencil.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)},ClearStencil}(BaseValue),ey=function(i){function ColorMask(){i.apply(this,arguments)}return i&&(ColorMask.__proto__=i),ColorMask.prototype=Object.create(i&&i.prototype),ColorMask.prototype.constructor=ColorMask,ColorMask.prototype.getDefault=function(){return[!0,!0,!0,!0]},ColorMask.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)},ColorMask}(BaseValue),ev=function(i){function DepthMask(){i.apply(this,arguments)}return i&&(DepthMask.__proto__=i),DepthMask.prototype=Object.create(i&&i.prototype),DepthMask.prototype.constructor=DepthMask,DepthMask.prototype.getDefault=function(){return!0},DepthMask.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)},DepthMask}(BaseValue),ex=function(i){function StencilMask(){i.apply(this,arguments)}return i&&(StencilMask.__proto__=i),StencilMask.prototype=Object.create(i&&i.prototype),StencilMask.prototype.constructor=StencilMask,StencilMask.prototype.getDefault=function(){return 255},StencilMask.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)},StencilMask}(BaseValue),e_=function(i){function StencilFunc(){i.apply(this,arguments)}return i&&(StencilFunc.__proto__=i),StencilFunc.prototype=Object.create(i&&i.prototype),StencilFunc.prototype.constructor=StencilFunc,StencilFunc.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},StencilFunc.prototype.set=function(i){var o=this.current;(i.func!==o.func||i.ref!==o.ref||i.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)},StencilFunc}(BaseValue),ew=function(i){function StencilOp(){i.apply(this,arguments)}return i&&(StencilOp.__proto__=i),StencilOp.prototype=Object.create(i&&i.prototype),StencilOp.prototype.constructor=StencilOp,StencilOp.prototype.getDefault=function(){var i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]},StencilOp.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)},StencilOp}(BaseValue),eT=function(i){function StencilTest(){i.apply(this,arguments)}return i&&(StencilTest.__proto__=i),StencilTest.prototype=Object.create(i&&i.prototype),StencilTest.prototype.constructor=StencilTest,StencilTest.prototype.getDefault=function(){return!1},StencilTest.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=i,this.dirty=!1}},StencilTest}(BaseValue),ek=function(i){function DepthRange(){i.apply(this,arguments)}return i&&(DepthRange.__proto__=i),DepthRange.prototype=Object.create(i&&i.prototype),DepthRange.prototype.constructor=DepthRange,DepthRange.prototype.getDefault=function(){return[0,1]},DepthRange.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)},DepthRange}(BaseValue),eA=function(i){function DepthTest(){i.apply(this,arguments)}return i&&(DepthTest.__proto__=i),DepthTest.prototype=Object.create(i&&i.prototype),DepthTest.prototype.constructor=DepthTest,DepthTest.prototype.getDefault=function(){return!1},DepthTest.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=i,this.dirty=!1}},DepthTest}(BaseValue),eS=function(i){function DepthFunc(){i.apply(this,arguments)}return i&&(DepthFunc.__proto__=i),DepthFunc.prototype=Object.create(i&&i.prototype),DepthFunc.prototype.constructor=DepthFunc,DepthFunc.prototype.getDefault=function(){return this.gl.LESS},DepthFunc.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)},DepthFunc}(BaseValue),eM=function(i){function Blend(){i.apply(this,arguments)}return i&&(Blend.__proto__=i),Blend.prototype=Object.create(i&&i.prototype),Blend.prototype.constructor=Blend,Blend.prototype.getDefault=function(){return!1},Blend.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.BLEND):o.disable(o.BLEND),this.current=i,this.dirty=!1}},Blend}(BaseValue),eC=function(i){function BlendFunc(){i.apply(this,arguments)}return i&&(BlendFunc.__proto__=i),BlendFunc.prototype=Object.create(i&&i.prototype),BlendFunc.prototype.constructor=BlendFunc,BlendFunc.prototype.getDefault=function(){var i=this.gl;return[i.ONE,i.ZERO]},BlendFunc.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)},BlendFunc}(BaseValue),eE=function(o){function BlendColor(){o.apply(this,arguments)}return o&&(BlendColor.__proto__=o),BlendColor.prototype=Object.create(o&&o.prototype),BlendColor.prototype.constructor=BlendColor,BlendColor.prototype.getDefault=function(){return i.Color.transparent},BlendColor.prototype.set=function(i){var o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)},BlendColor}(BaseValue),eL=function(i){function BlendEquation(){i.apply(this,arguments)}return i&&(BlendEquation.__proto__=i),BlendEquation.prototype=Object.create(i&&i.prototype),BlendEquation.prototype.constructor=BlendEquation,BlendEquation.prototype.getDefault=function(){return this.gl.FUNC_ADD},BlendEquation.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)},BlendEquation}(BaseValue),eP=function(i){function CullFace(){i.apply(this,arguments)}return i&&(CullFace.__proto__=i),CullFace.prototype=Object.create(i&&i.prototype),CullFace.prototype.constructor=CullFace,CullFace.prototype.getDefault=function(){return!1},CullFace.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=i,this.dirty=!1}},CullFace}(BaseValue),eI=function(i){function CullFaceSide(){i.apply(this,arguments)}return i&&(CullFaceSide.__proto__=i),CullFaceSide.prototype=Object.create(i&&i.prototype),CullFaceSide.prototype.constructor=CullFaceSide,CullFaceSide.prototype.getDefault=function(){return this.gl.BACK},CullFaceSide.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)},CullFaceSide}(BaseValue),eO=function(i){function FrontFace(){i.apply(this,arguments)}return i&&(FrontFace.__proto__=i),FrontFace.prototype=Object.create(i&&i.prototype),FrontFace.prototype.constructor=FrontFace,FrontFace.prototype.getDefault=function(){return this.gl.CCW},FrontFace.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)},FrontFace}(BaseValue),eD=function(i){function Program(){i.apply(this,arguments)}return i&&(Program.__proto__=i),Program.prototype=Object.create(i&&i.prototype),Program.prototype.constructor=Program,Program.prototype.getDefault=function(){return null},Program.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)},Program}(BaseValue),eR=function(i){function ActiveTextureUnit(){i.apply(this,arguments)}return i&&(ActiveTextureUnit.__proto__=i),ActiveTextureUnit.prototype=Object.create(i&&i.prototype),ActiveTextureUnit.prototype.constructor=ActiveTextureUnit,ActiveTextureUnit.prototype.getDefault=function(){return this.gl.TEXTURE0},ActiveTextureUnit.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)},ActiveTextureUnit}(BaseValue),eB=function(i){function Viewport(){i.apply(this,arguments)}return i&&(Viewport.__proto__=i),Viewport.prototype=Object.create(i&&i.prototype),Viewport.prototype.constructor=Viewport,Viewport.prototype.getDefault=function(){var i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]},Viewport.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)},Viewport}(BaseValue),ez=function(i){function BindFramebuffer(){i.apply(this,arguments)}return i&&(BindFramebuffer.__proto__=i),BindFramebuffer.prototype=Object.create(i&&i.prototype),BindFramebuffer.prototype.constructor=BindFramebuffer,BindFramebuffer.prototype.getDefault=function(){return null},BindFramebuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,i),this.current=i,this.dirty=!1}},BindFramebuffer}(BaseValue),eF=function(i){function BindRenderbuffer(){i.apply(this,arguments)}return i&&(BindRenderbuffer.__proto__=i),BindRenderbuffer.prototype=Object.create(i&&i.prototype),BindRenderbuffer.prototype.constructor=BindRenderbuffer,BindRenderbuffer.prototype.getDefault=function(){return null},BindRenderbuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,i),this.current=i,this.dirty=!1}},BindRenderbuffer}(BaseValue),eN=function(i){function BindTexture(){i.apply(this,arguments)}return i&&(BindTexture.__proto__=i),BindTexture.prototype=Object.create(i&&i.prototype),BindTexture.prototype.constructor=BindTexture,BindTexture.prototype.getDefault=function(){return null},BindTexture.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindTexture(o.TEXTURE_2D,i),this.current=i,this.dirty=!1}},BindTexture}(BaseValue),ej=function(i){function BindVertexBuffer(){i.apply(this,arguments)}return i&&(BindVertexBuffer.__proto__=i),BindVertexBuffer.prototype=Object.create(i&&i.prototype),BindVertexBuffer.prototype.constructor=BindVertexBuffer,BindVertexBuffer.prototype.getDefault=function(){return null},BindVertexBuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}},BindVertexBuffer}(BaseValue),eU=function(i){function BindElementBuffer(){i.apply(this,arguments)}return i&&(BindElementBuffer.__proto__=i),BindElementBuffer.prototype=Object.create(i&&i.prototype),BindElementBuffer.prototype.constructor=BindElementBuffer,BindElementBuffer.prototype.getDefault=function(){return null},BindElementBuffer.prototype.set=function(i){var o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1},BindElementBuffer}(BaseValue),eV=function(i){function BindVertexArrayOES(o){i.call(this,o),this.vao=o.extVertexArrayObject}return i&&(BindVertexArrayOES.__proto__=i),BindVertexArrayOES.prototype=Object.create(i&&i.prototype),BindVertexArrayOES.prototype.constructor=BindVertexArrayOES,BindVertexArrayOES.prototype.getDefault=function(){return null},BindVertexArrayOES.prototype.set=function(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)},BindVertexArrayOES}(BaseValue),eH=function(i){function PixelStoreUnpack(){i.apply(this,arguments)}return i&&(PixelStoreUnpack.__proto__=i),PixelStoreUnpack.prototype=Object.create(i&&i.prototype),PixelStoreUnpack.prototype.constructor=PixelStoreUnpack,PixelStoreUnpack.prototype.getDefault=function(){return 4},PixelStoreUnpack.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}},PixelStoreUnpack}(BaseValue),eG=function(i){function PixelStoreUnpackPremultiplyAlpha(){i.apply(this,arguments)}return i&&(PixelStoreUnpackPremultiplyAlpha.__proto__=i),PixelStoreUnpackPremultiplyAlpha.prototype=Object.create(i&&i.prototype),PixelStoreUnpackPremultiplyAlpha.prototype.constructor=PixelStoreUnpackPremultiplyAlpha,PixelStoreUnpackPremultiplyAlpha.prototype.getDefault=function(){return!1},PixelStoreUnpackPremultiplyAlpha.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}},PixelStoreUnpackPremultiplyAlpha}(BaseValue),eW=function(i){function PixelStoreUnpackFlipY(){i.apply(this,arguments)}return i&&(PixelStoreUnpackFlipY.__proto__=i),PixelStoreUnpackFlipY.prototype=Object.create(i&&i.prototype),PixelStoreUnpackFlipY.prototype.constructor=PixelStoreUnpackFlipY,PixelStoreUnpackFlipY.prototype.getDefault=function(){return!1},PixelStoreUnpackFlipY.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}},PixelStoreUnpackFlipY}(BaseValue),eZ=function(i){function FramebufferAttachment(o,s){i.call(this,o),this.context=o,this.parent=s}return i&&(FramebufferAttachment.__proto__=i),FramebufferAttachment.prototype=Object.create(i&&i.prototype),FramebufferAttachment.prototype.constructor=FramebufferAttachment,FramebufferAttachment.prototype.getDefault=function(){return null},FramebufferAttachment}(BaseValue),eY=function(i){function ColorAttachment(){i.apply(this,arguments)}return i&&(ColorAttachment.__proto__=i),ColorAttachment.prototype=Object.create(i&&i.prototype),ColorAttachment.prototype.constructor=ColorAttachment,ColorAttachment.prototype.setDirty=function(){this.dirty=!0},ColorAttachment.prototype.set=function(i){if(i!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}},ColorAttachment}(eZ),eX=function(i){function DepthAttachment(){i.apply(this,arguments)}return i&&(DepthAttachment.__proto__=i),DepthAttachment.prototype=Object.create(i&&i.prototype),DepthAttachment.prototype.constructor=DepthAttachment,DepthAttachment.prototype.set=function(i){if(i!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}},DepthAttachment}(eZ),Framebuffer=function(i,o,s,x){this.context=i,this.width=o,this.height=s;var _=i.gl,F=this.framebuffer=_.createFramebuffer();this.colorAttachment=new eY(i,F),x&&(this.depthAttachment=new eX(i,F))};Framebuffer.prototype.destroy=function(){var i=this.context.gl,o=this.colorAttachment.get();if(o&&i.deleteTexture(o),this.depthAttachment){var s=this.depthAttachment.get();s&&i.deleteRenderbuffer(s)}i.deleteFramebuffer(this.framebuffer)};var DepthMode=function(i,o,s){this.func=i,this.mask=o,this.range=s};DepthMode.ReadOnly=!1,DepthMode.ReadWrite=!0,DepthMode.disabled=new DepthMode(519,DepthMode.ReadOnly,[0,1]);var StencilMode=function(i,o,s,x,_,F){this.test=i,this.ref=o,this.mask=s,this.fail=x,this.depthFail=_,this.pass=F};StencilMode.disabled=new StencilMode({func:519,mask:0},0,0,7680,7680,7680);var ColorMode=function(i,o,s){this.blendFunction=i,this.blendColor=o,this.mask=s};ColorMode.Replace=[1,0],ColorMode.disabled=new ColorMode(ColorMode.Replace,i.Color.transparent,[!1,!1,!1,!1]),ColorMode.unblended=new ColorMode(ColorMode.Replace,i.Color.transparent,[!0,!0,!0,!0]),ColorMode.alphaBlended=new ColorMode([1,771],i.Color.transparent,[!0,!0,!0,!0]);var CullFaceMode=function(i,o,s){this.enable=i,this.mode=o,this.frontFace=s};CullFaceMode.disabled=new CullFaceMode(!1,1029,2305),CullFaceMode.backCCW=new CullFaceMode(!0,1029,2305);var Context=function(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ep(this),this.clearDepth=new eg(this),this.clearStencil=new em(this),this.colorMask=new ey(this),this.depthMask=new ev(this),this.stencilMask=new ex(this),this.stencilFunc=new e_(this),this.stencilOp=new ew(this),this.stencilTest=new eT(this),this.depthRange=new ek(this),this.depthTest=new eA(this),this.depthFunc=new eS(this),this.blend=new eM(this),this.blendFunc=new eC(this),this.blendColor=new eE(this),this.blendEquation=new eL(this),this.cullFace=new eP(this),this.cullFaceSide=new eI(this),this.frontFace=new eO(this),this.program=new eD(this),this.activeTexture=new eR(this),this.viewport=new eB(this),this.bindFramebuffer=new ez(this),this.bindRenderbuffer=new eF(this),this.bindTexture=new eN(this),this.bindVertexBuffer=new ej(this),this.bindElementBuffer=new eU(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new eV(this),this.pixelStoreUnpack=new eH(this),this.pixelStoreUnpackPremultiplyAlpha=new eG(this),this.pixelStoreUnpackFlipY=new eW(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query")};Context.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Context.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Context.prototype.createIndexBuffer=function(i,o){return new IndexBuffer(this,i,o)},Context.prototype.createVertexBuffer=function(i,o,s){return new VertexBuffer(this,i,o,s)},Context.prototype.createRenderbuffer=function(i,o,s){var x=this.gl,_=x.createRenderbuffer();return this.bindRenderbuffer.set(_),x.renderbufferStorage(x.RENDERBUFFER,i,o,s),this.bindRenderbuffer.set(null),_},Context.prototype.createFramebuffer=function(i,o,s){return new Framebuffer(this,i,o,s)},Context.prototype.clear=function(i){var o=i.color,s=i.depth,x=this.gl,_=0;o&&(_|=x.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==s&&(_|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),x.clear(_)},Context.prototype.setCullFace=function(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))},Context.prototype.setDepthMode=function(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)},Context.prototype.setStencilMode=function(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)},Context.prototype.setColorMode=function(o){i.deepEqual(o.blendFunction,ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},Context.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var eK=function(o){function SourceCache(s,x,_){var F=this;o.call(this),this.id=s,this.dispatcher=_,this.on("data",function(i){"source"===i.dataType&&"metadata"===i.sourceDataType&&(F._sourceLoaded=!0),F._sourceLoaded&&!F._paused&&"source"===i.dataType&&"content"===i.sourceDataType&&(F.reload(),F.transform&&F.update(F.transform))}),this.on("error",function(){F._sourceErrored=!0}),this._source=create(s,x,_,this),this._tiles={},this._cache=new TileCache(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return o&&(SourceCache.__proto__=o),SourceCache.prototype=Object.create(o&&o.prototype),SourceCache.prototype.constructor=SourceCache,SourceCache.prototype.onAdd=function(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)},SourceCache.prototype.onRemove=function(i){this._source&&this._source.onRemove&&this._source.onRemove(i)},SourceCache.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var i in this._tiles){var o=this._tiles[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}return!0},SourceCache.prototype.getSource=function(){return this._source},SourceCache.prototype.pause=function(){this._paused=!0},SourceCache.prototype.resume=function(){if(this._paused){var i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}},SourceCache.prototype._loadTile=function(i,o){return this._source.loadTile(i,o)},SourceCache.prototype._unloadTile=function(i){if(this._source.unloadTile)return this._source.unloadTile(i,function(){})},SourceCache.prototype._abortTile=function(i){if(this._source.abortTile)return this._source.abortTile(i,function(){})},SourceCache.prototype.serialize=function(){return this._source.serialize()},SourceCache.prototype.prepare=function(i){for(var o in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var s=this._tiles[o];s.upload(i),s.prepare(this.map.style.imageManager)}},SourceCache.prototype.getIds=function(){return i.values(this._tiles).map(function(i){return i.tileID}).sort(compareTileId).map(function(i){return i.key})},SourceCache.prototype.getRenderableIds=function(o){var s=this,x=[];for(var _ in this._tiles)this._isIdRenderable(_,o)&&x.push(this._tiles[_]);return o?x.sort(function(o,x){var _=o.tileID,F=x.tileID,N=new i.Point(_.canonical.x,_.canonical.y)._rotate(s.transform.angle),j=new i.Point(F.canonical.x,F.canonical.y)._rotate(s.transform.angle);return _.overscaledZ-F.overscaledZ||j.y-N.y||j.x-N.x}).map(function(i){return i.tileID.key}):x.map(function(i){return i.tileID}).sort(compareTileId).map(function(i){return i.key})},SourceCache.prototype.hasRenderableParent=function(i){var o=this.findLoadedParent(i,0);return!!o&&this._isIdRenderable(o.tileID.key)},SourceCache.prototype._isIdRenderable=function(i,o){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(o||!this._tiles[i].holdingForFade())},SourceCache.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}for(var i in this._cache.reset(),this._tiles)"errored"!==this._tiles[i].state&&this._reloadTile(i,"reloading")},SourceCache.prototype._reloadTile=function(i,o){var s=this._tiles[i];s&&("loading"!==s.state&&(s.state=o),this._loadTile(s,this._tileLoaded.bind(this,s,i,o)))},SourceCache.prototype._tileLoaded=function(o,s,x,_){if(_){o.state="errored",404!==_.status?this._source.fire(new i.ErrorEvent(_,{tile:o})):this.update(this.transform);return}o.timeAdded=i.browser.now(),"expired"===x&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(s,o),"raster-dem"===this.getSource().type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},SourceCache.prototype._backfillDEM=function(i){for(var o=this.getRenderableIds(),s=0;s<o.length;s++){var x=o[s];if(i.neighboringTiles&&i.neighboringTiles[x]){var _=this.getTileByID(x);fillBorder(i,_),fillBorder(_,i)}}function fillBorder(i,o){i.needsHillshadePrepare=!0;var s=o.tileID.canonical.x-i.tileID.canonical.x,x=o.tileID.canonical.y-i.tileID.canonical.y,_=Math.pow(2,i.tileID.canonical.z),F=o.tileID.key;!(0===s&&0===x||Math.abs(x)>1)&&(Math.abs(s)>1&&(1===Math.abs(s+_)?s+=_:1===Math.abs(s-_)&&(s-=_)),o.dem&&i.dem&&(i.dem.backfillBorder(o.dem,s,x),i.neighboringTiles&&i.neighboringTiles[F]&&(i.neighboringTiles[F].backfilled=!0)))}},SourceCache.prototype.getTile=function(i){return this.getTileByID(i.key)},SourceCache.prototype.getTileByID=function(i){return this._tiles[i]},SourceCache.prototype._retainLoadedChildren=function(i,o,s,x){for(var _ in this._tiles){var F=this._tiles[_];if(!x[_]&&F.hasData()&&!(F.tileID.overscaledZ<=o)&&!(F.tileID.overscaledZ>s)){for(var N=F.tileID;F&&F.tileID.overscaledZ>o+1;){var j=F.tileID.scaledTo(F.tileID.overscaledZ-1);(F=this._tiles[j.key])&&F.hasData()&&(N=j)}for(var G=N;G.overscaledZ>o;)if(i[(G=G.scaledTo(G.overscaledZ-1)).key]){x[N.key]=N;break}}}},SourceCache.prototype.findLoadedParent=function(i,o){if(i.key in this._loadedParentTiles){var s=this._loadedParentTiles[i.key];return s&&s.tileID.overscaledZ>=o?s:null}for(var x=i.overscaledZ-1;x>=o;x--){var _=i.scaledTo(x),F=this._getLoadedTile(_);if(F)return F}},SourceCache.prototype._getLoadedTile=function(i){var o=this._tiles[i.key];return o&&o.hasData()?o:this._cache.getByKey(i.wrapped().key)},SourceCache.prototype.updateCacheSize=function(i){var o=Math.floor((Math.ceil(i.width/this._source.tileSize)+1)*(Math.ceil(i.height/this._source.tileSize)+1)*5),s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(s)},SourceCache.prototype.handleWrapJump=function(i){var o=void 0===this._prevLng?i:this._prevLng,s=Math.round((i-o)/360);if(this._prevLng=i,s){var x={};for(var _ in this._tiles){var F=this._tiles[_];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+s),x[F.tileID.key]=F}for(var N in this._tiles=x,this._timers)clearTimeout(this._timers[N]),delete this._timers[N];for(var j in this._tiles){var G=this._tiles[j];this._setTileReloadTimer(j,G)}}},SourceCache.prototype.update=function(o){var s,x=this;if(this.transform=o,this._sourceLoaded&&!this._paused){this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?s=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(o){return new i.OverscaledTileID(o.canonical.z,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y)}):(s=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(s=s.filter(function(i){return x._source.hasTile(i)}))):s=[];var _=o.coveringZoomLevel(this._source),F=Math.max(_-SourceCache.maxOverzooming,this._source.minzoom),N=Math.max(_+SourceCache.maxUnderzooming,this._source.minzoom),j=this._updateRetainedTiles(s,_);if(isRasterType(this._source.type)){for(var G={},Z={},X=Object.keys(j),J=0;J<X.length;J+=1){var $=X[J],ee=j[$],et=this._tiles[$];if(!(!et||et.fadeEndTime&&et.fadeEndTime<=i.browser.now())){var er=this.findLoadedParent(ee,F);er&&(this._addTile(er.tileID),G[er.tileID.key]=er.tileID),Z[$]=ee}}for(var en in this._retainLoadedChildren(Z,_,N,j),G)j[en]||(this._coveredTiles[en]=!0,j[en]=G[en])}for(var ei in j)this._tiles[ei].clearFadeHold();for(var eo=i.keysDifference(this._tiles,j),es=0;es<eo.length;es+=1){var el=eo[es],ec=this._tiles[el];ec.hasSymbolBuckets&&!ec.holdingForFade()?ec.setHoldDuration(this.map._fadeDuration):(!ec.hasSymbolBuckets||ec.symbolFadeFinished())&&this._removeTile(el)}this._updateLoadedParentTileCache()}},SourceCache.prototype.releaseSymbolFadeTiles=function(){for(var i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)},SourceCache.prototype._updateRetainedTiles=function(i,o){for(var s={},x={},_=Math.max(o-SourceCache.maxOverzooming,this._source.minzoom),F=Math.max(o+SourceCache.maxUnderzooming,this._source.minzoom),N={},j=0;j<i.length;j+=1){var G=i[j],Z=this._addTile(G);s[G.key]=G,!Z.hasData()&&o<this._source.maxzoom&&(N[G.key]=G)}this._retainLoadedChildren(N,o,F,s);for(var X=0;X<i.length;X+=1){var J=i[X],$=this._tiles[J.key];if(!$.hasData()){if(o+1>this._source.maxzoom){var ee=J.children(this._source.maxzoom)[0],et=this.getTile(ee);if(et&&et.hasData()){s[ee.key]=ee;continue}}else{var er=J.children(this._source.maxzoom);if(s[er[0].key]&&s[er[1].key]&&s[er[2].key]&&s[er[3].key])continue}for(var en=$.wasRequested(),ei=J.overscaledZ-1;ei>=_;--ei){var eo=J.scaledTo(ei);if(x[eo.key]||(x[eo.key]=!0,($=this.getTile(eo))||!en||($=this._addTile(eo)),$&&(s[eo.key]=eo,en=$.wasRequested(),$.hasData())))break}}}return s},SourceCache.prototype._updateLoadedParentTileCache=function(){for(var i in this._loadedParentTiles={},this._tiles){for(var o=[],s=void 0,x=this._tiles[i].tileID;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){s=this._loadedParentTiles[x.key];break}o.push(x.key);var _=x.scaledTo(x.overscaledZ-1);if(s=this._getLoadedTile(_))break;x=_}for(var F=0;F<o.length;F+=1){var N=o[F];this._loadedParentTiles[N]=s}}},SourceCache.prototype._addTile=function(o){var s=this._tiles[o.key];if(s)return s;(s=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,s),s.tileID=o,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,s)));var x=!!s;return(x||(s=new i.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,o.key,s.state))),s)?(s.uses++,this._tiles[o.key]=s,x||this._source.fire(new i.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null},SourceCache.prototype._setTileReloadTimer=function(i,o){var s=this;i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);var x=o.getExpiryTimeout();x&&(this._timers[i]=setTimeout(function(){s._reloadTile(i,"expired"),delete s._timers[i]},x))},SourceCache.prototype._removeTile=function(i){var o=this._tiles[i];o&&(o.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),o.uses>0||(o.hasData()&&"reloading"!==o.state?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))},SourceCache.prototype.clearTiles=function(){for(var i in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(i);this._cache.reset()},SourceCache.prototype.tilesIn=function(o,s,x){var _=this,F=[],N=this.transform;if(!N)return F;for(var j=x?N.getCameraQueryGeometry(o):o,G=o.map(function(i){return N.pointCoordinate(i)}),Z=j.map(function(i){return N.pointCoordinate(i)}),X=this.getIds(),J=1/0,$=1/0,ee=-1/0,et=-1/0,er=0;er<Z.length;er+=1){var en=Z[er];J=Math.min(J,en.x),$=Math.min($,en.y),ee=Math.max(ee,en.x),et=Math.max(et,en.y)}for(var ei=0;ei<X.length;ei++)!function(o){var x=_._tiles[X[o]];if(!x.holdingForFade()){var j=x.tileID,er=Math.pow(2,N.zoom-x.tileID.overscaledZ),en=s*x.queryPadding*i.EXTENT/x.tileSize/er,ei=[j.getTilePoint(new i.MercatorCoordinate(J,$)),j.getTilePoint(new i.MercatorCoordinate(ee,et))];if(ei[0].x-en<i.EXTENT&&ei[0].y-en<i.EXTENT&&ei[1].x+en>=0&&ei[1].y+en>=0){var eo=G.map(function(i){return j.getTilePoint(i)}),es=Z.map(function(i){return j.getTilePoint(i)});F.push({tile:x,tileID:j,queryGeometry:eo,cameraQueryGeometry:es,scale:er})}}}(ei);return F},SourceCache.prototype.getVisibleCoordinates=function(i){for(var o=this,s=this.getRenderableIds(i).map(function(i){return o._tiles[i].tileID}),x=0;x<s.length;x+=1){var _=s[x];_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped())}return s},SourceCache.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(isRasterType(this._source.type))for(var o in this._tiles){var s=this._tiles[o];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=i.browser.now())return!0}return!1},SourceCache.prototype.setFeatureState=function(i,o,s){i=i||"_geojsonTileLayer",this._state.updateState(i,o,s)},SourceCache.prototype.removeFeatureState=function(i,o,s){i=i||"_geojsonTileLayer",this._state.removeFeatureState(i,o,s)},SourceCache.prototype.getFeatureState=function(i,o){return i=i||"_geojsonTileLayer",this._state.getState(i,o)},SourceCache.prototype.setDependencies=function(i,o,s){var x=this._tiles[i];x&&x.setDependencies(o,s)},SourceCache.prototype.reloadTilesForDependencies=function(i,o){for(var s in this._tiles)this._tiles[s].hasDependency(i,o)&&this._reloadTile(s,"reloading");this._cache.filter(function(s){return!s.hasDependency(i,o)})},SourceCache}(i.Evented);function compareTileId(i,o){var s=Math.abs(2*i.wrap)-+(i.wrap<0),x=Math.abs(2*o.wrap)-+(o.wrap<0);return i.overscaledZ-o.overscaledZ||x-s||o.canonical.y-i.canonical.y||o.canonical.x-i.canonical.x}function isRasterType(i){return"raster"===i||"image"===i||"video"===i}function WebWorker(){return new i.window.Worker(tV.workerUrl)}eK.maxOverzooming=10,eK.maxUnderzooming=3;var eJ="mapboxgl_preloaded_worker_pool",WorkerPool=function(){this.active={}};WorkerPool.prototype.acquire=function(i){if(!this.workers)for(this.workers=[];this.workers.length<WorkerPool.workerCount;)this.workers.push(new WebWorker);return this.active[i]=!0,this.workers.slice()},WorkerPool.prototype.release=function(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(function(i){i.terminate()}),this.workers=null)},WorkerPool.prototype.isPreloaded=function(){return!!this.active[eJ]},WorkerPool.prototype.numActive=function(){return Object.keys(this.active).length};var e$=Math.floor(i.browser.hardwareConcurrency/2);function getGlobalWorkerPool(){return s||(s=new WorkerPool),s}function derefLayers(o){o=o.slice();for(var s=Object.create(null),x=0;x<o.length;x++)s[o[x].id]=o[x];for(var _=0;_<o.length;_++)"ref"in o[_]&&(o[_]=function(o,s){var x={};for(var _ in o)"ref"!==_&&(x[_]=o[_]);return i.refProperties.forEach(function(i){i in s&&(x[i]=s[i])}),x}(o[_],s[o[_].ref]));return o}WorkerPool.workerCount=Math.max(Math.min(e$,6),1);var eQ={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function addSource(i,o,s){s.push({command:eQ.addSource,args:[i,o[i]]})}function removeSource(i,o,s){o.push({command:eQ.removeSource,args:[i]}),s[i]=!0}function diffLayerPropertyChanges(o,s,x,_,F,N){var j;for(j in s=s||{},o=o||{})o.hasOwnProperty(j)&&(i.deepEqual(o[j],s[j])||x.push({command:N,args:[_,j,s[j],F]}));for(j in s)!(!s.hasOwnProperty(j)||o.hasOwnProperty(j))&&(i.deepEqual(o[j],s[j])||x.push({command:N,args:[_,j,s[j],F]}))}function pluckId(i){return i.id}function indexById(i,o){return i[o.id]=o,i}var PathInterpolator=function(i,o){this.reset(i,o)};PathInterpolator.prototype.reset=function(i,o){this.points=i||[],this._distances=[0];for(var s=1;s<this.points.length;s++)this._distances[s]=this._distances[s-1]+this.points[s].dist(this.points[s-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding},PathInterpolator.prototype.lerp=function(o){if(1===this.points.length)return this.points[0];o=i.clamp(o,0,1);for(var s=1,x=this._distances[s],_=o*this.paddedLength+this.padding;x<_&&s<this._distances.length;)x=this._distances[++s];var F=s-1,N=this._distances[F],j=x-N,G=j>0?(_-N)/j:0;return this.points[F].mult(1-G).add(this.points[s].mult(G))};var GridIndex=function(i,o,s){var x=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/s),this.yCellCount=Math.ceil(o/s);for(var F=0;F<this.xCellCount*this.yCellCount;F++)x.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=o,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0};function getLabelPlaneMatrix(o,s,x,_,F){var N=i.create();return s?(i.scale(N,N,[1/F,1/F,1]),x||i.rotateZ(N,N,_.angle)):i.multiply(N,_.labelPlaneMatrix,o),N}function getGlCoordMatrix(o,s,x,_,F){if(!s)return _.glCoordMatrix;var N=i.clone(o);return i.scale(N,N,[F,F,1]),x||i.rotateZ(N,N,-_.angle),N}function project(o,s){var x=[o.x,o.y,0,1];xyTransformMat4(x,x,s);var _=x[3];return{point:new i.Point(x[0]/_,x[1]/_),signedDistanceFromCamera:_}}function getPerspectiveRatio(i,o){return .5+.5*(i/o)}function placeFirstAndLastGlyph(i,o,s,x,_,F,N,j,G,Z,X){var J=j.glyphStartIndex+j.numGlyphs,$=j.lineStartIndex,ee=j.lineStartIndex+j.lineLength,et=o.getoffsetX(j.glyphStartIndex),er=o.getoffsetX(J-1),en=placeGlyphAlongLine(i*et,s,x,_,F,N,j.segment,$,ee,G,Z,X);if(!en)return null;var ei=placeGlyphAlongLine(i*er,s,x,_,F,N,j.segment,$,ee,G,Z,X);return ei?{first:en,last:ei}:null}function requiresOrientationChange(o,s,x,_){return o===i.WritingMode.horizontal&&Math.abs(x.y-s.y)>Math.abs(x.x-s.x)*_?{useVertical:!0}:(o===i.WritingMode.vertical?s.y<x.y:s.x>x.x)?{needsFlipping:!0}:null}function placeGlyphsAlongLine(o,s,x,_,F,N,j,G,Z,X,J,$,ee,et){var er,en=s/24,ei=o.lineOffsetX*en,eo=o.lineOffsetY*en;if(o.numGlyphs>1){var es=o.glyphStartIndex+o.numGlyphs,el=o.lineStartIndex,ec=o.lineStartIndex+o.lineLength,eu=placeFirstAndLastGlyph(en,G,ei,eo,x,J,$,o,Z,N,ee);if(!eu)return{notEnoughRoom:!0};var ef=project(eu.first.point,j).point,eh=project(eu.last.point,j).point;if(_&&!x){var ed=requiresOrientationChange(o.writingMode,ef,eh,et);if(ed)return ed}er=[eu.first];for(var ep=o.glyphStartIndex+1;ep<es-1;ep++)er.push(placeGlyphAlongLine(en*G.getoffsetX(ep),ei,eo,x,J,$,o.segment,el,ec,Z,N,ee));er.push(eu.last)}else{if(_&&!x){var eg=project($,F).point,em=o.lineStartIndex+o.segment+1,ey=new i.Point(Z.getx(em),Z.gety(em)),ev=project(ey,F),ex=ev.signedDistanceFromCamera>0?ev.point:projectTruncatedLineSegment($,ey,eg,1,F),e_=requiresOrientationChange(o.writingMode,eg,ex,et);if(e_)return e_}var ew=placeGlyphAlongLine(en*G.getoffsetX(o.glyphStartIndex),ei,eo,x,J,$,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,Z,N,ee);if(!ew)return{notEnoughRoom:!0};er=[ew]}for(var eT=0,ek=er;eT<ek.length;eT+=1){var eA=ek[eT];i.addDynamicAttributes(X,eA.point,eA.angle)}return{}}function projectTruncatedLineSegment(i,o,s,x,_){var F=project(i.add(i.sub(o)._unit()),_).point,N=s.sub(F);return s.add(N._mult(x/N.mag()))}function placeGlyphAlongLine(o,s,x,_,F,N,j,G,Z,X,J,$){var ee=_?o-s:o+s,et=ee>0?1:-1,er=0;_&&(et*=-1,er=Math.PI),et<0&&(er+=Math.PI);for(var en=et>0?G+j:G+j+1,ei=F,eo=F,es=0,el=0,ec=Math.abs(ee),eu=[];es+el<=ec;){if((en+=et)<G||en>=Z)return null;if(eo=ei,eu.push(ei),void 0===(ei=$[en])){var ef=new i.Point(X.getx(en),X.gety(en)),eh=project(ef,J);if(eh.signedDistanceFromCamera>0)ei=$[en]=eh.point;else{var ed=en-et;ei=projectTruncatedLineSegment(0===es?N:new i.Point(X.getx(ed),X.gety(ed)),ef,eo,ec-es+1,J)}}es+=el,el=eo.dist(ei)}var ep=(ec-es)/el,eg=ei.sub(eo),em=eg.mult(ep)._add(eo);em._add(eg._unit()._perp()._mult(x*et));var ey=er+Math.atan2(ei.y-eo.y,ei.x-eo.x);return eu.push(em),{point:em,angle:ey,path:eu}}GridIndex.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},GridIndex.prototype.insert=function(i,o,s,x,_){this._forEachCell(o,s,x,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(o),this.bboxes.push(s),this.bboxes.push(x),this.bboxes.push(_)},GridIndex.prototype.insertCircle=function(i,o,s,x){this._forEachCell(o-x,s-x,o+x,s+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(o),this.circles.push(s),this.circles.push(x)},GridIndex.prototype._insertBoxCell=function(i,o,s,x,_,F){this.boxCells[_].push(F)},GridIndex.prototype._insertCircleCell=function(i,o,s,x,_,F){this.circleCells[_].push(F)},GridIndex.prototype._query=function(i,o,s,x,_,F){if(s<0||i>this.width||x<0||o>this.height)return!_&&[];var N=[];if(!(i<=0)||!(o<=0)||!(this.width<=s)||!(this.height<=x))return this._forEachCell(i,o,s,x,this._queryCell,N,{hitTest:_,seenUids:{box:{},circle:{}}},F),_?N.length>0:N;if(_)return!0;for(var j=0;j<this.boxKeys.length;j++)N.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(var G=0;G<this.circleKeys.length;G++){var Z=this.circles[3*G],X=this.circles[3*G+1],J=this.circles[3*G+2];N.push({key:this.circleKeys[G],x1:Z-J,y1:X-J,x2:Z+J,y2:X+J})}return F?N.filter(F):N},GridIndex.prototype._queryCircle=function(i,o,s,x,_){var F=i-s,N=i+s,j=o-s,G=o+s;if(N<0||F>this.width||G<0||j>this.height)return!x&&[];var Z=[];return this._forEachCell(F,j,N,G,this._queryCellCircle,Z,{hitTest:x,circle:{x:i,y:o,radius:s},seenUids:{box:{},circle:{}}},_),x?Z.length>0:Z},GridIndex.prototype.query=function(i,o,s,x,_){return this._query(i,o,s,x,!1,_)},GridIndex.prototype.hitTest=function(i,o,s,x,_){return this._query(i,o,s,x,!0,_)},GridIndex.prototype.hitTestCircle=function(i,o,s,x){return this._queryCircle(i,o,s,!0,x)},GridIndex.prototype._queryCell=function(i,o,s,x,_,F,N,j){var G=N.seenUids,Z=this.boxCells[_];if(null!==Z)for(var X=this.bboxes,J=0;J<Z.length;J+=1){var $=Z[J];if(!G.box[$]){G.box[$]=!0;var ee=4*$;if(i<=X[ee+2]&&o<=X[ee+3]&&s>=X[ee+0]&&x>=X[ee+1]&&(!j||j(this.boxKeys[$]))){if(N.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[$],x1:X[ee],y1:X[ee+1],x2:X[ee+2],y2:X[ee+3]})}}}var et=this.circleCells[_];if(null!==et)for(var er=this.circles,en=0;en<et.length;en+=1){var ei=et[en];if(!G.circle[ei]){G.circle[ei]=!0;var eo=3*ei;if(this._circleAndRectCollide(er[eo],er[eo+1],er[eo+2],i,o,s,x)&&(!j||j(this.circleKeys[ei]))){if(N.hitTest)return F.push(!0),!0;var es=er[eo],el=er[eo+1],ec=er[eo+2];F.push({key:this.circleKeys[ei],x1:es-ec,y1:el-ec,x2:es+ec,y2:el+ec})}}}},GridIndex.prototype._queryCellCircle=function(i,o,s,x,_,F,N,j){var G=N.circle,Z=N.seenUids,X=this.boxCells[_];if(null!==X)for(var J=this.bboxes,$=0;$<X.length;$+=1){var ee=X[$];if(!Z.box[ee]){Z.box[ee]=!0;var et=4*ee;if(this._circleAndRectCollide(G.x,G.y,G.radius,J[et+0],J[et+1],J[et+2],J[et+3])&&(!j||j(this.boxKeys[ee])))return F.push(!0),!0}}var er=this.circleCells[_];if(null!==er)for(var en=this.circles,ei=0;ei<er.length;ei+=1){var eo=er[ei];if(!Z.circle[eo]){Z.circle[eo]=!0;var es=3*eo;if(this._circlesCollide(en[es],en[es+1],en[es+2],G.x,G.y,G.radius)&&(!j||j(this.circleKeys[eo])))return F.push(!0),!0}}},GridIndex.prototype._forEachCell=function(i,o,s,x,_,F,N,j){for(var G=this._convertToXCellCoord(i),Z=this._convertToYCellCoord(o),X=this._convertToXCellCoord(s),J=this._convertToYCellCoord(x),$=G;$<=X;$++)for(var ee=Z;ee<=J;ee++){var et=this.xCellCount*ee+$;if(_.call(this,i,o,s,x,et,F,N,j))return}},GridIndex.prototype._convertToXCellCoord=function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))},GridIndex.prototype._convertToYCellCoord=function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))},GridIndex.prototype._circlesCollide=function(i,o,s,x,_,F){var N=x-i,j=_-o,G=s+F;return G*G>N*N+j*j},GridIndex.prototype._circleAndRectCollide=function(i,o,s,x,_,F,N){var j=(F-x)/2,G=Math.abs(i-(x+j));if(G>j+s)return!1;var Z=(N-_)/2,X=Math.abs(o-(_+Z));if(X>Z+s)return!1;if(G<=j||X<=Z)return!0;var J=G-j,$=X-Z;return J*J+$*$<=s*s};var e0=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hideGlyphs(i,o){for(var s=0;s<i;s++){var x=o.length;o.resize(x+4),o.float32.set(e0,3*x)}}function xyTransformMat4(i,o,s){var x=o[0],_=o[1];return i[0]=s[0]*x+s[4]*_+s[12],i[1]=s[1]*x+s[5]*_+s[13],i[3]=s[3]*x+s[7]*_+s[15],i}var CollisionIndex=function(i,o,s){void 0===o&&(o=new GridIndex(i.width+200,i.height+200,25)),void 0===s&&(s=new GridIndex(i.width+200,i.height+200,25)),this.transform=i,this.grid=o,this.ignoredGrid=s,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+100,this.screenBottomBoundary=i.height+100,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200};function pixelsToTileUnits(o,s,x){return s*(i.EXTENT/(o.tileSize*Math.pow(2,x-o.tileID.overscaledZ)))}CollisionIndex.prototype.placeCollisionBox=function(i,o,s,x,_){var F=this.projectAndGetPerspectiveRatio(x,i.anchorPointX,i.anchorPointY),N=s*F.perspectiveRatio,j=i.x1*N+F.point.x,G=i.y1*N+F.point.y,Z=i.x2*N+F.point.x,X=i.y2*N+F.point.y;return!this.isInsideGrid(j,G,Z,X)||!o&&this.grid.hitTest(j,G,Z,X,_)?{box:[],offscreen:!1}:{box:[j,G,Z,X],offscreen:this.isOffscreen(j,G,Z,X)}},CollisionIndex.prototype.placeCollisionCircles=function(o,s,x,_,F,N,j,G,Z,X,J,$,ee){var et=[],er=new i.Point(s.anchorX,s.anchorY),en=project(er,N),ei=getPerspectiveRatio(this.transform.cameraToCenterDistance,en.signedDistanceFromCamera),eo=(X?F/ei:F*ei)/i.ONE_EM,es=project(er,j).point,el=s.lineOffsetX*eo,ec=s.lineOffsetY*eo,eu=placeFirstAndLastGlyph(eo,_,el,ec,!1,es,er,s,x,j,{}),ef=!1,eh=!1,ed=!0;if(eu){for(var ep=.5*$*ei+ee,eg=new i.Point(-100,-100),em=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),ey=new PathInterpolator,ev=eu.first,ex=eu.last,e_=[],ew=ev.path.length-1;ew>=1;ew--)e_.push(ev.path[ew]);for(var eT=1;eT<ex.path.length;eT++)e_.push(ex.path[eT]);var ek=2.5*ep;if(G){var eA=e_.map(function(i){return project(i,G)});e_=eA.some(function(i){return i.signedDistanceFromCamera<=0})?[]:eA.map(function(i){return i.point})}var eS=[];if(e_.length>0){for(var eM=e_[0].clone(),eC=e_[0].clone(),eE=1;eE<e_.length;eE++)eM.x=Math.min(eM.x,e_[eE].x),eM.y=Math.min(eM.y,e_[eE].y),eC.x=Math.max(eC.x,e_[eE].x),eC.y=Math.max(eC.y,e_[eE].y);eS=eM.x>=eg.x&&eC.x<=em.x&&eM.y>=eg.y&&eC.y<=em.y?[e_]:eC.x<eg.x||eM.x>em.x||eC.y<eg.y||eM.y>em.y?[]:i.clipLine([e_],eg.x,eg.y,em.x,em.y)}for(var eL=0,eP=eS;eL<eP.length;eL+=1){var eI=eP[eL];ey.reset(eI,.25*ep);var eO=0;eO=ey.length<=.5*ep?1:Math.ceil(ey.paddedLength/ek)+1;for(var eD=0;eD<eO;eD++){var eR=eD/Math.max(eO-1,1),eB=ey.lerp(eR),ez=eB.x+100,eF=eB.y+100;et.push(ez,eF,ep,0);var eN=ez-ep,ej=eF-ep,eU=ez+ep,eV=eF+ep;if(ed=ed&&this.isOffscreen(eN,ej,eU,eV),eh=eh||this.isInsideGrid(eN,ej,eU,eV),!o&&this.grid.hitTestCircle(ez,eF,ep,J)&&(ef=!0,!Z))return{circles:[],offscreen:!1,collisionDetected:ef}}}}return{circles:(Z||!ef)&&eh?et:[],offscreen:ed,collisionDetected:ef}},CollisionIndex.prototype.queryRenderedSymbols=function(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var s=[],x=1/0,_=1/0,F=-1/0,N=-1/0,j=0;j<o.length;j+=1){var G=o[j],Z=new i.Point(G.x+100,G.y+100);x=Math.min(x,Z.x),_=Math.min(_,Z.y),F=Math.max(F,Z.x),N=Math.max(N,Z.y),s.push(Z)}for(var X=this.grid.query(x,_,F,N).concat(this.ignoredGrid.query(x,_,F,N)),J={},$={},ee=0;ee<X.length;ee+=1){var et=X[ee],er=et.key;if(void 0===J[er.bucketInstanceId]&&(J[er.bucketInstanceId]={}),!J[er.bucketInstanceId][er.featureIndex]){var en=[new i.Point(et.x1,et.y1),new i.Point(et.x2,et.y1),new i.Point(et.x2,et.y2),new i.Point(et.x1,et.y2)];i.polygonIntersectsPolygon(s,en)&&(J[er.bucketInstanceId][er.featureIndex]=!0,void 0===$[er.bucketInstanceId]&&($[er.bucketInstanceId]=[]),$[er.bucketInstanceId].push(er.featureIndex))}}return $},CollisionIndex.prototype.insertCollisionBox=function(i,o,s,x,_){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:s,featureIndex:x,collisionGroupID:_},i[0],i[1],i[2],i[3])},CollisionIndex.prototype.insertCollisionCircles=function(i,o,s,x,_){for(var F=o?this.ignoredGrid:this.grid,N={bucketInstanceId:s,featureIndex:x,collisionGroupID:_},j=0;j<i.length;j+=4)F.insertCircle(N,i[j],i[j+1],i[j+2])},CollisionIndex.prototype.projectAndGetPerspectiveRatio=function(o,s,x){var _=[s,x,0,1];return xyTransformMat4(_,_,o),{point:new i.Point((_[0]/_[3]+1)/2*this.transform.width+100,(-_[1]/_[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/_[3])}},CollisionIndex.prototype.isOffscreen=function(i,o,s,x){return s<100||i>=this.screenRightBoundary||x<100||o>this.screenBottomBoundary},CollisionIndex.prototype.isInsideGrid=function(i,o,s,x){return s>=0&&i<this.gridRightBoundary&&x>=0&&o<this.gridBottomBoundary},CollisionIndex.prototype.getViewportMatrix=function(){var o=i.identity([]);return i.translate(o,o,[-100,-100,0]),o};var OpacityState=function(i,o,s,x){i?this.opacity=Math.max(0,Math.min(1,i.opacity+(i.placed?o:-o))):this.opacity=x&&s?1:0,this.placed=s};OpacityState.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var JointOpacityState=function(i,o,s,x,_){this.text=new OpacityState(i?i.text:null,o,s,_),this.icon=new OpacityState(i?i.icon:null,o,x,_)};JointOpacityState.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var JointPlacement=function(i,o,s){this.text=i,this.icon=o,this.skipFade=s},CollisionCircleArray=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},RetainedQueryData=function(i,o,s,x,_){this.bucketInstanceId=i,this.featureIndex=o,this.sourceLayerIndex=s,this.bucketIndex=x,this.tileID=_},CollisionGroups=function(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}};function calculateVariableLayoutShift(o,s,x,_,F){var N=i.getAnchorAlignment(o),j=N.horizontalAlign,G=N.verticalAlign,Z=i.evaluateVariableOffset(o,_);return new i.Point(-(j-.5)*s+Z[0]*F,-(G-.5)*x+Z[1]*F)}function shiftVariableCollisionBox(o,s,x,_,F,N){var j=o.x1,G=o.x2,Z=o.y1,X=o.y2,J=o.anchorPointX,$=o.anchorPointY,ee=new i.Point(s,x);return _&&ee._rotate(F?N:-N),{x1:j+ee.x,y1:Z+ee.y,x2:G+ee.x,y2:X+ee.y,anchorPointX:J,anchorPointY:$}}CollisionGroups.prototype.get=function(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){var o=++this.maxGroupID;this.collisionGroups[i]={ID:o,predicate:function(i){return i.collisionGroupID===o}}}return this.collisionGroups[i]};var Placement=function(i,o,s,x){this.transform=i.clone(),this.collisionIndex=new CollisionIndex(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new CollisionGroups(s),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}};function updateCollisionVertices(i,o,s,x,_){i.emplaceBack(o?1:0,s?1:0,x||0,_||0),i.emplaceBack(o?1:0,s?1:0,x||0,_||0),i.emplaceBack(o?1:0,s?1:0,x||0,_||0),i.emplaceBack(o?1:0,s?1:0,x||0,_||0)}function packOpacity(i){if(0===i.opacity&&!i.placed)return 0;if(1===i.opacity&&i.placed)return 4294967295;var o=i.placed?1:0,s=Math.floor(127*i.opacity);return 33554432*s+16777216*o+131072*s+65536*o+512*s+256*o+2*s+o}Placement.prototype.getBucketParts=function(o,s,x,_){var F=x.getBucket(s),N=x.latestFeatureIndex;if(F&&N&&s.id===F.layerIds[0]){var j=x.collisionBoxArray,G=F.layers[0].layout,Z=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),X=x.tileSize/i.EXTENT,J=this.transform.calculatePosMatrix(x.tileID.toUnwrapped()),$="map"===G.get("text-pitch-alignment"),ee="map"===G.get("text-rotation-alignment"),et=pixelsToTileUnits(x,1,this.transform.zoom),er=getLabelPlaneMatrix(J,$,ee,this.transform,et),en=null;if($){var ei=getGlCoordMatrix(J,$,ee,this.transform,et);en=i.multiply([],this.transform.labelPlaneMatrix,ei)}this.retainedQueryData[F.bucketInstanceId]=new RetainedQueryData(F.bucketInstanceId,N,F.sourceLayerIndex,F.index,x.tileID);var eo={bucket:F,layout:G,posMatrix:J,textLabelPlaneMatrix:er,labelToScreenMatrix:en,scale:Z,textPixelRatio:X,holdingForFade:x.holdingForFade(),collisionBoxArray:j,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(F.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(F.sourceID)};if(_)for(var es=0,el=F.sortKeyRanges;es<el.length;es+=1){var ec=el[es],eu=ec.sortKey,ef=ec.symbolInstanceStart,eh=ec.symbolInstanceEnd;o.push({sortKey:eu,symbolInstanceStart:ef,symbolInstanceEnd:eh,parameters:eo})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:F.symbolInstances.length,parameters:eo})}},Placement.prototype.attemptAnchorPlacement=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et){var er,en=[J.textOffset0,J.textOffset1],ei=calculateVariableLayoutShift(i,s,x,en,_),eo=this.collisionIndex.placeCollisionBox(shiftVariableCollisionBox(o,ei.x,ei.y,F,N,this.transform.angle),X,j,G,Z.predicate);if((!et||0!==this.collisionIndex.placeCollisionBox(shiftVariableCollisionBox(et,ei.x,ei.y,F,N,this.transform.angle),X,j,G,Z.predicate).box.length)&&eo.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(er=this.prevPlacement.variableOffsets[J.crossTileID].anchor),this.variableOffsets[J.crossTileID]={textOffset:en,width:s,height:x,anchor:i,textBoxScale:_,prevAnchor:er},this.markUsedJustification($,i,J,ee),$.allowVerticalPlacement&&(this.markUsedOrientation($,ee,J),this.placedOrientations[J.crossTileID]=ee),{shift:ei,placedGlyphBoxes:eo}},Placement.prototype.placeLayerBucketPart=function(o,s,x){var _=this,F=o.parameters,N=F.bucket,j=F.layout,G=F.posMatrix,Z=F.textLabelPlaneMatrix,X=F.labelToScreenMatrix,J=F.textPixelRatio,$=F.holdingForFade,ee=F.collisionBoxArray,et=F.partiallyEvaluatedTextSize,er=F.collisionGroup,en=j.get("text-optional"),ei=j.get("icon-optional"),eo=j.get("text-allow-overlap"),es=j.get("icon-allow-overlap"),el="map"===j.get("text-rotation-alignment"),ec="map"===j.get("text-pitch-alignment"),eu="none"!==j.get("icon-text-fit"),ef="viewport-y"===j.get("symbol-z-order"),eh=eo&&(es||!N.hasIconData()||ei),ed=es&&(eo||!N.hasTextData()||en);!N.collisionArrays&&ee&&N.deserializeCollisionBoxes(ee);var placeSymbol=function(o,F){if(!s[o.crossTileID]){if($){_.placements[o.crossTileID]=new JointPlacement(!1,!1,!1);return}var ee=!1,ef=!1,ep=!0,eg=null,em={box:null,offscreen:null},ey={box:null,offscreen:null},ev=null,ex=null,e_=null,ew=0,eT=0,ek=0;F.textFeatureIndex?ew=F.textFeatureIndex:o.useRuntimeCollisionCircles&&(ew=o.featureIndex),F.verticalTextFeatureIndex&&(eT=F.verticalTextFeatureIndex);var eA=F.textBox;if(eA){var updatePreviousOrientationIfNotPlaced=function(s){var x=i.WritingMode.horizontal;if(N.allowVerticalPlacement&&!s&&_.prevPlacement){var F=_.prevPlacement.placedOrientations[o.crossTileID];F&&(_.placedOrientations[o.crossTileID]=F,x=F,_.markUsedOrientation(N,x,o))}return x},placeTextForPlacementModes=function(s,x){if(N.allowVerticalPlacement&&o.numVerticalGlyphVertices>0&&F.verticalTextBox)for(var _=0,j=N.writingModes;_<j.length&&(j[_]===i.WritingMode.vertical?ey=em=x():em=s(),!em||!em.box||!em.box.length);_+=1);else em=s()};if(j.get("text-variable-anchor")){var eS=j.get("text-variable-anchor");if(_.prevPlacement&&_.prevPlacement.variableOffsets[o.crossTileID]){var eM=_.prevPlacement.variableOffsets[o.crossTileID];eS.indexOf(eM.anchor)>0&&(eS=eS.filter(function(i){return i!==eM.anchor})).unshift(eM.anchor)}var placeBoxForVariableAnchors=function(i,s,x){for(var F=i.x2-i.x1,j=i.y2-i.y1,Z=o.textBoxScale,X=eu&&!es?s:null,$={box:[],offscreen:!1},et=eo?2*eS.length:eS.length,en=0;en<et;++en){var ei=eS[en%eS.length],ef=en>=eS.length,eh=_.attemptAnchorPlacement(ei,i,F,j,Z,el,ec,J,G,er,ef,o,N,x,X);if(eh&&($=eh.placedGlyphBoxes)&&$.box&&$.box.length){ee=!0,eg=eh.shift;break}}return $};placeTextForPlacementModes(function(){return placeBoxForVariableAnchors(eA,F.iconBox,i.WritingMode.horizontal)},function(){var s=F.verticalTextBox,x=em&&em.box&&em.box.length;return N.allowVerticalPlacement&&!x&&o.numVerticalGlyphVertices>0&&s?placeBoxForVariableAnchors(s,F.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),em&&(ee=em.box,ep=em.offscreen);var eC=updatePreviousOrientationIfNotPlaced(em&&em.box);if(!ee&&_.prevPlacement){var eE=_.prevPlacement.variableOffsets[o.crossTileID];eE&&(_.variableOffsets[o.crossTileID]=eE,_.markUsedJustification(N,eE.anchor,o,eC))}}else{var placeBox=function(i,s){var x=_.collisionIndex.placeCollisionBox(i,eo,J,G,er.predicate);return x&&x.box&&x.box.length&&(_.markUsedOrientation(N,s,o),_.placedOrientations[o.crossTileID]=s),x};placeTextForPlacementModes(function(){return placeBox(eA,i.WritingMode.horizontal)},function(){var s=F.verticalTextBox;return N.allowVerticalPlacement&&o.numVerticalGlyphVertices>0&&s?placeBox(s,i.WritingMode.vertical):{box:null,offscreen:null}}),updatePreviousOrientationIfNotPlaced(em&&em.box&&em.box.length)}}if(ee=(ev=em)&&ev.box&&ev.box.length>0,ep=ev&&ev.offscreen,o.useRuntimeCollisionCircles){var eL=N.text.placedSymbolArray.get(o.centerJustifiedTextSymbolIndex),eP=i.evaluateSizeForFeature(N.textSizeData,et,eL),eI=j.get("text-padding"),eO=o.collisionCircleDiameter;ex=_.collisionIndex.placeCollisionCircles(eo,eL,N.lineVertexArray,N.glyphOffsetArray,eP,G,Z,X,x,ec,er.predicate,eO,eI),ee=eo||ex.circles.length>0&&!ex.collisionDetected,ep=ep&&ex.offscreen}if(F.iconFeatureIndex&&(ek=F.iconFeatureIndex),F.iconBox){var placeIconFeature=function(i){var o=eu&&eg?shiftVariableCollisionBox(i,eg.x,eg.y,el,ec,_.transform.angle):i;return _.collisionIndex.placeCollisionBox(o,es,J,G,er.predicate)};ef=ey&&ey.box&&ey.box.length&&F.verticalIconBox?(e_=placeIconFeature(F.verticalIconBox)).box.length>0:(e_=placeIconFeature(F.iconBox)).box.length>0,ep=ep&&e_.offscreen}var eD=en||0===o.numHorizontalGlyphVertices&&0===o.numVerticalGlyphVertices,eR=ei||0===o.numIconVertices;if(eD||eR?eR?eD||(ef=ef&&ee):ee=ef&&ee:ef=ee=ef&&ee,ee&&ev&&ev.box&&(ey&&ey.box&&eT?_.collisionIndex.insertCollisionBox(ev.box,j.get("text-ignore-placement"),N.bucketInstanceId,eT,er.ID):_.collisionIndex.insertCollisionBox(ev.box,j.get("text-ignore-placement"),N.bucketInstanceId,ew,er.ID)),ef&&e_&&_.collisionIndex.insertCollisionBox(e_.box,j.get("icon-ignore-placement"),N.bucketInstanceId,ek,er.ID),ex&&(ee&&_.collisionIndex.insertCollisionCircles(ex.circles,j.get("text-ignore-placement"),N.bucketInstanceId,ew,er.ID),x)){var eB=N.bucketInstanceId,ez=_.collisionCircleArrays[eB];void 0===ez&&(ez=_.collisionCircleArrays[eB]=new CollisionCircleArray);for(var eF=0;eF<ex.circles.length;eF+=4)ez.circles.push(ex.circles[eF+0]),ez.circles.push(ex.circles[eF+1]),ez.circles.push(ex.circles[eF+2]),ez.circles.push(ex.collisionDetected?1:0)}_.placements[o.crossTileID]=new JointPlacement(ee||eh,ef||ed,ep||N.justReloaded),s[o.crossTileID]=!0}};if(ef)for(var ep=N.getSortedSymbolIndexes(this.transform.angle),eg=ep.length-1;eg>=0;--eg){var em=ep[eg];placeSymbol(N.symbolInstances.get(em),N.collisionArrays[em])}else for(var ey=o.symbolInstanceStart;ey<o.symbolInstanceEnd;ey++)placeSymbol(N.symbolInstances.get(ey),N.collisionArrays[ey]);if(x&&N.bucketInstanceId in this.collisionCircleArrays){var ev=this.collisionCircleArrays[N.bucketInstanceId];i.invert(ev.invProjMatrix,G),ev.viewportMatrix=this.collisionIndex.getViewportMatrix()}N.justReloaded=!1},Placement.prototype.markUsedJustification=function(o,s,x,_){var F,N={left:x.leftJustifiedTextSymbolIndex,center:x.centerJustifiedTextSymbolIndex,right:x.rightJustifiedTextSymbolIndex};F=_===i.WritingMode.vertical?x.verticalPlacedTextSymbolIndex:N[i.getAnchorJustification(s)];for(var j=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex,x.verticalPlacedTextSymbolIndex],G=0;G<j.length;G+=1){var Z=j[G];Z>=0&&(F>=0&&Z!==F?o.text.placedSymbolArray.get(Z).crossTileID=0:o.text.placedSymbolArray.get(Z).crossTileID=x.crossTileID)}},Placement.prototype.markUsedOrientation=function(o,s,x){for(var _=s===i.WritingMode.horizontal||s===i.WritingMode.horizontalOnly?s:0,F=s===i.WritingMode.vertical?s:0,N=[x.leftJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.rightJustifiedTextSymbolIndex],j=0;j<N.length;j+=1){var G=N[j];o.text.placedSymbolArray.get(G).placedOrientation=_}x.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(x.verticalPlacedTextSymbolIndex).placedOrientation=F)},Placement.prototype.commit=function(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;var o=this.prevPlacement,s=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;var x=o?o.symbolFadeChange(i):1,_=o?o.opacities:{},F=o?o.variableOffsets:{},N=o?o.placedOrientations:{};for(var j in this.placements){var G=this.placements[j],Z=_[j];Z?(this.opacities[j]=new JointOpacityState(Z,x,G.text,G.icon),s=s||G.text!==Z.text.placed||G.icon!==Z.icon.placed):(this.opacities[j]=new JointOpacityState(null,x,G.text,G.icon,G.skipFade),s=s||G.text||G.icon)}for(var X in _){var J=_[X];if(!this.opacities[X]){var $=new JointOpacityState(J,x,!1,!1);$.isHidden()||(this.opacities[X]=$,s=s||J.text.placed||J.icon.placed)}}for(var ee in F)this.variableOffsets[ee]||!this.opacities[ee]||this.opacities[ee].isHidden()||(this.variableOffsets[ee]=F[ee]);for(var et in N)this.placedOrientations[et]||!this.opacities[et]||this.opacities[et].isHidden()||(this.placedOrientations[et]=N[et]);s?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:i)},Placement.prototype.updateLayerOpacities=function(i,o){for(var s={},x=0;x<o.length;x+=1){var _=o[x],F=_.getBucket(i);F&&_.latestFeatureIndex&&i.id===F.layerIds[0]&&this.updateBucketOpacities(F,s,_.collisionBoxArray)}},Placement.prototype.updateBucketOpacities=function(o,s,x){var _=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var F=o.layers[0].layout,N=new JointOpacityState(null,0,!1,!1,!0),j=F.get("text-allow-overlap"),G=F.get("icon-allow-overlap"),Z=F.get("text-variable-anchor"),X="map"===F.get("text-rotation-alignment"),J="map"===F.get("text-pitch-alignment"),$="none"!==F.get("icon-text-fit"),ee=new JointOpacityState(null,0,j&&(G||!o.hasIconData()||F.get("icon-optional")),G&&(j||!o.hasTextData()||F.get("text-optional")),!0);!o.collisionArrays&&x&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(x);for(var addOpacities=function(i,o,s){for(var x=0;x<o/4;x++)i.opacityVertexArray.emplaceBack(s)},et=0;et<o.symbolInstances.length;et++)!function(x){var F=o.symbolInstances.get(x),j=F.numHorizontalGlyphVertices,G=F.numVerticalGlyphVertices,et=F.crossTileID,er=s[et],en=_.opacities[et];er?en=N:en||(en=ee,_.opacities[et]=en),s[et]=!0;var ei=j>0||G>0,eo=F.numIconVertices>0,es=_.placedOrientations[F.crossTileID],el=es===i.WritingMode.vertical,ec=es===i.WritingMode.horizontal||es===i.WritingMode.horizontalOnly;if(ei){var eu=packOpacity(en.text),ef=el?e1:eu;addOpacities(o.text,j,ef);var eh=ec?e1:eu;addOpacities(o.text,G,eh);var ed=en.text.isHidden();[F.rightJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.leftJustifiedTextSymbolIndex].forEach(function(i){i>=0&&(o.text.placedSymbolArray.get(i).hidden=ed||el?1:0)}),F.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).hidden=ed||ec?1:0);var ep=_.variableOffsets[F.crossTileID];ep&&_.markUsedJustification(o,ep.anchor,F,es);var eg=_.placedOrientations[F.crossTileID];eg&&(_.markUsedJustification(o,"left",F,eg),_.markUsedOrientation(o,eg,F))}if(eo){var em=packOpacity(en.icon),ey=!($&&F.verticalPlacedIconSymbolIndex&&el);if(F.placedIconSymbolIndex>=0){var ev=ey?em:e1;addOpacities(o.icon,F.numIconVertices,ev),o.icon.placedSymbolArray.get(F.placedIconSymbolIndex).hidden=en.icon.isHidden()}if(F.verticalPlacedIconSymbolIndex>=0){var ex=ey?e1:em;addOpacities(o.icon,F.numVerticalIconVertices,ex),o.icon.placedSymbolArray.get(F.verticalPlacedIconSymbolIndex).hidden=en.icon.isHidden()}}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var e_=o.collisionArrays[x];if(e_){var ew=new i.Point(0,0);if(e_.textBox||e_.verticalTextBox){var eT=!0;if(Z){var ek=_.variableOffsets[et];ek?(ew=calculateVariableLayoutShift(ek.anchor,ek.width,ek.height,ek.textOffset,ek.textBoxScale),X&&ew._rotate(J?_.transform.angle:-_.transform.angle)):eT=!1}e_.textBox&&updateCollisionVertices(o.textCollisionBox.collisionVertexArray,en.text.placed,!eT||el,ew.x,ew.y),e_.verticalTextBox&&updateCollisionVertices(o.textCollisionBox.collisionVertexArray,en.text.placed,!eT||ec,ew.x,ew.y)}var eA=!!(!ec&&e_.verticalIconBox);e_.iconBox&&updateCollisionVertices(o.iconCollisionBox.collisionVertexArray,en.icon.placed,eA,$?ew.x:0,$?ew.y:0),e_.verticalIconBox&&updateCollisionVertices(o.iconCollisionBox.collisionVertexArray,en.icon.placed,!eA,$?ew.x:0,$?ew.y:0)}}}(et);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var er=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=er.invProjMatrix,o.placementViewportMatrix=er.viewportMatrix,o.collisionCircleArray=er.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Placement.prototype.symbolFadeChange=function(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Placement.prototype.zoomAdjustment=function(i){return Math.max(0,(this.transform.zoom-i)/1.5)},Placement.prototype.hasTransitions=function(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration},Placement.prototype.stillRecent=function(i,o){var s=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*s>i},Placement.prototype.setStale=function(){this.stale=!0};var e1=0,LayerPlacement=function(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};LayerPlacement.prototype.continuePlacement=function(i,o,s,x,_){for(var F=this._bucketParts;this._currentTileIndex<i.length;){var N=i[this._currentTileIndex];if(o.getBucketParts(F,x,N,this._sortAcrossTiles),this._currentTileIndex++,_())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort(function(i,o){return i.sortKey-o.sortKey}));this._currentPartIndex<F.length;){var j=F[this._currentPartIndex];if(o.placeLayerBucketPart(j,this._seenCrossTileIDs,s),this._currentPartIndex++,_())return!0}return!1};var PauseablePlacement=function(i,o,s,x,_,F,N){this.placement=new Placement(i,_,F,N),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=s,this._showCollisionBoxes=x,this._done=!1};PauseablePlacement.prototype.isDone=function(){return this._done},PauseablePlacement.prototype.continuePlacement=function(o,s,x){for(var _=this,F=i.browser.now(),shouldPausePlacement=function(){var o=i.browser.now()-F;return!_._forceFullPlacement&&o>2};this._currentPlacementIndex>=0;){var N=s[o[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if("symbol"===N.type&&(!N.minzoom||N.minzoom<=j)&&(!N.maxzoom||N.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new LayerPlacement(N)),this._inProgressLayer.continuePlacement(x[N.source],this.placement,this._showCollisionBoxes,N,shouldPausePlacement))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},PauseablePlacement.prototype.commit=function(i){return this.placement.commit(i),this.placement};var e2=512/i.EXTENT/2,TileLayerIndex=function(i,o,s){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=s;for(var x=0;x<o.length;x++){var _=o.get(x),F=_.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,i)})}};TileLayerIndex.prototype.getScaledCoordinates=function(o,s){var x=e2/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*i.EXTENT+o.anchorX)*x),y:Math.floor((s.canonical.y*i.EXTENT+o.anchorY)*x)}},TileLayerIndex.prototype.findMatches=function(i,o,s){for(var x=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),_=0;_<i.length;_++){var F=i.get(_);if(!F.crossTileID){var N=this.indexedSymbolInstances[F.key];if(N)for(var j=this.getScaledCoordinates(F,o),G=0;G<N.length;G+=1){var Z=N[G];if(Math.abs(Z.coord.x-j.x)<=x&&Math.abs(Z.coord.y-j.y)<=x&&!s[Z.crossTileID]){s[Z.crossTileID]=!0,F.crossTileID=Z.crossTileID;break}}}}};var CrossTileIDs=function(){this.maxCrossTileID=0};CrossTileIDs.prototype.generate=function(){return++this.maxCrossTileID};var CrossTileSymbolLayerIndex=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};CrossTileSymbolLayerIndex.prototype.handleWrapJump=function(i){var o=Math.round((i-this.lng)/360);if(0!==o)for(var s in this.indexes){var x=this.indexes[s],_={};for(var F in x){var N=x[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+o),_[N.tileID.key]=N}this.indexes[s]=_}this.lng=i},CrossTileSymbolLayerIndex.prototype.addBucket=function(i,o,s){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(var x=0;x<o.symbolInstances.length;x++)o.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});var _=this.usedCrossTileIDs[i.overscaledZ];for(var F in this.indexes){var N=this.indexes[F];if(Number(F)>i.overscaledZ)for(var j in N){var G=N[j];G.tileID.isChildOf(i)&&G.findMatches(o.symbolInstances,i,_)}else{var Z=N[i.scaledTo(Number(F)).key];Z&&Z.findMatches(o.symbolInstances,i,_)}}for(var X=0;X<o.symbolInstances.length;X++){var J=o.symbolInstances.get(X);J.crossTileID||(J.crossTileID=s.generate(),_[J.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new TileLayerIndex(i,o.symbolInstances,o.bucketInstanceId),!0},CrossTileSymbolLayerIndex.prototype.removeBucketCrossTileIDs=function(i,o){for(var s in o.indexedSymbolInstances)for(var x=0,_=o.indexedSymbolInstances[s];x<_.length;x+=1){var F=_[x];delete this.usedCrossTileIDs[i][F.crossTileID]}},CrossTileSymbolLayerIndex.prototype.removeStaleBuckets=function(i){var o=!1;for(var s in this.indexes){var x=this.indexes[s];for(var _ in x)i[x[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(s,x[_]),delete x[_],o=!0)}return o};var CrossTileSymbolIndex=function(){this.layerIndexes={},this.crossTileIDs=new CrossTileIDs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};CrossTileSymbolIndex.prototype.addLayer=function(i,o,s){var x=this.layerIndexes[i.id];void 0===x&&(x=this.layerIndexes[i.id]=new CrossTileSymbolLayerIndex);var _=!1,F={};x.handleWrapJump(s);for(var N=0;N<o.length;N+=1){var j=o[N],G=j.getBucket(i);G&&i.id===G.layerIds[0]&&(G.bucketInstanceId||(G.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(j.tileID,G,this.crossTileIDs)&&(_=!0),F[G.bucketInstanceId]=!0)}return x.removeStaleBuckets(F)&&(_=!0),_},CrossTileSymbolIndex.prototype.pruneUnusedLayers=function(i){var o={};for(var s in i.forEach(function(i){o[i]=!0}),this.layerIndexes)o[s]||delete this.layerIndexes[s]};var emitValidationErrors=function(o,s){return i.emitValidationErrors(o,s&&s.filter(function(i){return"source.canvas"!==i.identifier}))},e3=i.pick(eQ,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),e5=i.pick(eQ,["setCenter","setZoom","setBearing","setPitch"]),e4=function(){var o={},s=i.styleSpec.$version;for(var x in i.styleSpec.$root){var _=i.styleSpec.$root[x];if(_.required){var F=null;null!=(F="version"===x?s:"array"===_.type?[]:{})&&(o[x]=F)}}return o}(),e6=function(o){function Style(s,x){var _=this;void 0===x&&(x={}),o.call(this),this.map=s,this.dispatcher=new Dispatcher(getGlobalWorkerPool(),this),this.imageManager=new $,this.imageManager.setEventedParent(this),this.glyphManager=new GlyphManager(s._requestManager,x.localIdeographFontFamily),this.lineAtlas=new LineAtlas(256,512),this.crossTileSymbolIndex=new CrossTileSymbolIndex,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var F=this;this._rtlTextPluginCallback=Style.registerForPluginStateChange(function(o){var s={pluginStatus:o.pluginStatus,pluginURL:o.pluginURL};F.dispatcher.broadcast("syncRTLPluginState",s,function(o,s){if(i.triggerPluginCompletionEvent(o),s&&s.every(function(i){return i}))for(var x in F.sourceCaches)F.sourceCaches[x].reload()})}),this.on("data",function(i){if("source"===i.dataType&&"metadata"===i.sourceDataType){var o=_.sourceCaches[i.sourceId];if(o){var s=o.getSource();if(s&&s.vectorLayerIds)for(var x in _._layers){var F=_._layers[x];F.source===s.id&&_._validateLayer(F)}}}})}return o&&(Style.__proto__=o),Style.prototype=Object.create(o&&o.prototype),Style.prototype.constructor=Style,Style.prototype.loadURL=function(o,s){var x=this;void 0===s&&(s={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var _="boolean"==typeof s.validate?s.validate:!i.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,s.accessToken);var F=this.map._requestManager.transformRequest(o,i.ResourceType.Style);this._request=i.getJSON(F,function(o,s){x._request=null,o?x.fire(new i.ErrorEvent(o)):s&&x._load(s,_)})},Style.prototype.loadJSON=function(o,s){var x=this;void 0===s&&(s={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){x._request=null,x._load(o,!1!==s.validate)})},Style.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(e4,!1)},Style.prototype._load=function(o,s){if(!(s&&emitValidationErrors(this,i.validateStyle(o)))){for(var x in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(x,o.sources[x],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var _=derefLayers(this.stylesheet.layers);this._order=_.map(function(i){return i.id}),this._layers={},this._serializedLayers={};for(var F=0;F<_.length;F+=1){var N=_[F];(N=i.createStyleLayer(N)).setEventedParent(this,{layer:{id:N.id}}),this._layers[N.id]=N,this._serializedLayers[N.id]=N.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new er(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},Style.prototype._loadSprite=function(o){var s=this;this._spriteRequest=function(o,s,x){var _,F,N,j=i.browser.devicePixelRatio>1?"@2x":"",G=i.getJSON(s.transformRequest(s.normalizeSpriteURL(o,j,".json"),i.ResourceType.SpriteJSON),function(i,o){G=null,N||(N=i,_=o,maybeComplete())}),Z=i.getImage(s.transformRequest(s.normalizeSpriteURL(o,j,".png"),i.ResourceType.SpriteImage),function(i,o){Z=null,N||(N=i,F=o,maybeComplete())});function maybeComplete(){if(N)x(N);else if(_&&F){var o=i.browser.getImageData(F),s={};for(var j in _){var G=_[j],Z=G.width,X=G.height,J=G.x,$=G.y,ee=G.sdf,et=G.pixelRatio,er=G.stretchX,en=G.stretchY,ei=G.content,eo=new i.RGBAImage({width:Z,height:X});i.RGBAImage.copy(o,eo,{x:J,y:$},{x:0,y:0},{width:Z,height:X}),s[j]={data:eo,pixelRatio:et,sdf:ee,stretchX:er,stretchY:en,content:ei}}x(null,s)}}return{cancel:function(){G&&(G.cancel(),G=null),Z&&(Z.cancel(),Z=null)}}}(o,this.map._requestManager,function(o,x){if(s._spriteRequest=null,o)s.fire(new i.ErrorEvent(o));else if(x)for(var _ in x)s.imageManager.addImage(_,x[_]);s.imageManager.setLoaded(!0),s._availableImages=s.imageManager.listImages(),s.dispatcher.broadcast("setImages",s._availableImages),s.fire(new i.Event("data",{dataType:"style"}))})},Style.prototype._validateLayer=function(o){var s=this.sourceCaches[o.source];if(s){var x=o.sourceLayer;if(x){var _=s.getSource();("geojson"===_.type||_.vectorLayerIds&&-1===_.vectorLayerIds.indexOf(x))&&this.fire(new i.ErrorEvent(Error('Source layer "'+x+'" does not exist on source "'+_.id+'" as specified by style layer "'+o.id+'"')))}}},Style.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()},Style.prototype._serializeLayers=function(i){for(var o=[],s=0;s<i.length;s+=1){var x=i[s],_=this._layers[x];"custom"!==_.type&&o.push(_.serialize())}return o},Style.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(var o in this._layers)if(this._layers[o].hasTransition())return!0;return!1},Style.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading")},Style.prototype.update=function(o){if(this._loaded){var s=this._changed;if(this._changed){var x=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);for(var F in(x.length||_.length)&&this._updateWorkerLayers(x,_),this._updatedSources){var N=this._updatedSources[F];"reload"===N?this._reloadSource(F):"clear"===N&&this._clearSource(F)}for(var j in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[j].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}for(var G in this.sourceCaches)this.sourceCaches[G].used=!1;for(var Z=0,X=this._order;Z<X.length;Z+=1){var J=X[Z],$=this._layers[J];$.recalculate(o,this._availableImages),!$.isHidden(o.zoom)&&$.source&&(this.sourceCaches[$.source].used=!0)}this.light.recalculate(o),this.z=o.zoom,s&&this.fire(new i.Event("data",{dataType:"style"}))}},Style.prototype._updateTilesForChangedImages=function(){var i=Object.keys(this._changedImages);if(i.length){for(var o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}},Style.prototype._updateWorkerLayers=function(i,o){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:o})},Style.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Style.prototype.setState=function(o){var s=this;if(this._checkLoaded(),emitValidationErrors(this,i.validateStyle(o)))return!1;(o=i.clone$1(o)).layers=derefLayers(o.layers);var x=(function(o,s){if(!o)return[{command:eQ.setStyle,args:[s]}];var x=[];try{if(!i.deepEqual(o.version,s.version))return[{command:eQ.setStyle,args:[s]}];i.deepEqual(o.center,s.center)||x.push({command:eQ.setCenter,args:[s.center]}),i.deepEqual(o.zoom,s.zoom)||x.push({command:eQ.setZoom,args:[s.zoom]}),i.deepEqual(o.bearing,s.bearing)||x.push({command:eQ.setBearing,args:[s.bearing]}),i.deepEqual(o.pitch,s.pitch)||x.push({command:eQ.setPitch,args:[s.pitch]}),i.deepEqual(o.sprite,s.sprite)||x.push({command:eQ.setSprite,args:[s.sprite]}),i.deepEqual(o.glyphs,s.glyphs)||x.push({command:eQ.setGlyphs,args:[s.glyphs]}),i.deepEqual(o.transition,s.transition)||x.push({command:eQ.setTransition,args:[s.transition]}),i.deepEqual(o.light,s.light)||x.push({command:eQ.setLight,args:[s.light]});var _={},F=[];!function(o,s,x,_){var F,N,j;for(F in s=s||{},o=o||{})o.hasOwnProperty(F)&&(s.hasOwnProperty(F)||removeSource(F,x,_));for(F in s)s.hasOwnProperty(F)&&(o.hasOwnProperty(F)?i.deepEqual(o[F],s[F])||("geojson"===o[F].type&&"geojson"===s[F].type&&function(o,s,x){var _;for(_ in o[x])if(o[x].hasOwnProperty(_)&&"data"!==_&&!i.deepEqual(o[x][_],s[x][_]))return!1;for(_ in s[x])if(s[x].hasOwnProperty(_)&&"data"!==_&&!i.deepEqual(o[x][_],s[x][_]))return!1;return!0}(o,s,F)?x.push({command:eQ.setGeoJSONSourceData,args:[F,s[F].data]}):(N=F,j=s,removeSource(N,x,_),addSource(N,j,x))):addSource(F,s,x))}(o.sources,s.sources,F,_);var N=[];o.layers&&o.layers.forEach(function(i){_[i.source]?x.push({command:eQ.removeLayer,args:[i.id]}):N.push(i)}),x=x.concat(F),function(o,s,x){s=s||[];var _,F,N,j,G,Z,X,J=(o=o||[]).map(pluckId),$=s.map(pluckId),ee=o.reduce(indexById,{}),et=s.reduce(indexById,{}),er=J.slice(),en=Object.create(null);for(_=0,F=0;_<J.length;_++)N=J[_],et.hasOwnProperty(N)?F++:(x.push({command:eQ.removeLayer,args:[N]}),er.splice(er.indexOf(N,F),1));for(_=0,F=0;_<$.length;_++)N=$[$.length-1-_],er[er.length-1-_]!==N&&(ee.hasOwnProperty(N)?(x.push({command:eQ.removeLayer,args:[N]}),er.splice(er.lastIndexOf(N,er.length-F),1)):F++,Z=er[er.length-_],x.push({command:eQ.addLayer,args:[et[N],Z]}),er.splice(er.length-_,0,N),en[N]=!0);for(_=0;_<$.length;_++)if(j=ee[N=$[_]],G=et[N],!(en[N]||i.deepEqual(j,G))){if(!i.deepEqual(j.source,G.source)||!i.deepEqual(j["source-layer"],G["source-layer"])||!i.deepEqual(j.type,G.type)){x.push({command:eQ.removeLayer,args:[N]}),Z=er[er.lastIndexOf(N)+1],x.push({command:eQ.addLayer,args:[G,Z]});continue}for(X in diffLayerPropertyChanges(j.layout,G.layout,x,N,null,eQ.setLayoutProperty),diffLayerPropertyChanges(j.paint,G.paint,x,N,null,eQ.setPaintProperty),i.deepEqual(j.filter,G.filter)||x.push({command:eQ.setFilter,args:[N,G.filter]}),i.deepEqual(j.minzoom,G.minzoom)&&i.deepEqual(j.maxzoom,G.maxzoom)||x.push({command:eQ.setLayerZoomRange,args:[N,G.minzoom,G.maxzoom]}),j)j.hasOwnProperty(X)&&"layout"!==X&&"paint"!==X&&"filter"!==X&&"metadata"!==X&&"minzoom"!==X&&"maxzoom"!==X&&(0===X.indexOf("paint.")?diffLayerPropertyChanges(j[X],G[X],x,N,X.slice(6),eQ.setPaintProperty):i.deepEqual(j[X],G[X])||x.push({command:eQ.setLayerProperty,args:[N,X,G[X]]}));for(X in G)!(!G.hasOwnProperty(X)||j.hasOwnProperty(X))&&"layout"!==X&&"paint"!==X&&"filter"!==X&&"metadata"!==X&&"minzoom"!==X&&"maxzoom"!==X&&(0===X.indexOf("paint.")?diffLayerPropertyChanges(j[X],G[X],x,N,X.slice(6),eQ.setPaintProperty):i.deepEqual(j[X],G[X])||x.push({command:eQ.setLayerProperty,args:[N,X,G[X]]}))}}(N,s.layers,x)}catch(i){console.warn("Unable to compute style diff:",i),x=[{command:eQ.setStyle,args:[s]}]}return x})(this.serialize(),o).filter(function(i){return!(i.command in e5)});if(0===x.length)return!1;var _=x.filter(function(i){return!(i.command in e3)});if(_.length>0)throw Error("Unimplemented: "+_.map(function(i){return i.command}).join(", ")+".");return x.forEach(function(i){"setTransition"!==i.command&&s[i.command].apply(s,i.args)}),this.stylesheet=o,!0},Style.prototype.addImage=function(o,s){if(this.getImage(o))return this.fire(new i.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(o,s),this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Style.prototype.updateImage=function(i,o){this.imageManager.updateImage(i,o)},Style.prototype.getImage=function(i){return this.imageManager.getImage(i)},Style.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new i.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(o),this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Style.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Style.prototype.addSource=function(o,s,x){var _=this;if(void 0===x&&(x={}),this._checkLoaded(),void 0!==this.sourceCaches[o])throw Error("There is already a source with this ID");if(!s.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(s).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(i.validateStyle.source,"sources."+o,s,null,x))){this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);var F=this.sourceCaches[o]=new eK(o,s,this.dispatcher);F.style=this,F.setEventedParent(this,function(){return{isSourceLoaded:_.loaded(),source:F.serialize(),sourceId:o}}),F.onAdd(this.map),this._changed=!0}},Style.prototype.removeSource=function(o){if(this._checkLoaded(),void 0===this.sourceCaches[o])throw Error("There is no source with this ID");for(var s in this._layers)if(this._layers[s].source===o)return this.fire(new i.ErrorEvent(Error('Source "'+o+'" cannot be removed while layer "'+s+'" is using it.')));var x=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],x.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),x.setEventedParent(null),x.clearTiles(),x.onRemove&&x.onRemove(this.map),this._changed=!0},Style.prototype.setGeoJSONSourceData=function(i,o){this._checkLoaded(),this.sourceCaches[i].getSource().setData(o),this._changed=!0},Style.prototype.getSource=function(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()},Style.prototype.addLayer=function(o,s,x){void 0===x&&(x={}),this._checkLoaded();var _,F=o.id;if(this.getLayer(F)){this.fire(new i.ErrorEvent(Error('Layer with id "'+F+'" already exists on this map')));return}if("custom"===o.type){if(emitValidationErrors(this,i.validateCustomStyleLayer(o)))return;_=i.createStyleLayer(o)}else{if("object"==typeof o.source&&(this.addSource(F,o.source),o=i.clone$1(o),o=i.extend(o,{source:F})),this._validate(i.validateStyle.layer,"layers."+F,o,{arrayIndex:-1},x))return;_=i.createStyleLayer(o),this._validateLayer(_),_.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[_.id]=_.serialize()}var N=s?this._order.indexOf(s):this._order.length;if(s&&-1===N){this.fire(new i.ErrorEvent(Error('Layer with id "'+s+'" does not exist on this map.')));return}if(this._order.splice(N,0,F),this._layerOrderChanged=!0,this._layers[F]=_,this._removedLayers[F]&&_.source&&"custom"!==_.type){var j=this._removedLayers[F];delete this._removedLayers[F],j.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)},Style.prototype.moveLayer=function(o,s){if(this._checkLoaded(),this._changed=!0,!this._layers[o]){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")));return}if(o!==s){var x=this._order.indexOf(o);this._order.splice(x,1);var _=s?this._order.indexOf(s):this._order.length;if(s&&-1===_){this.fire(new i.ErrorEvent(Error('Layer with id "'+s+'" does not exist on this map.')));return}this._order.splice(_,0,o),this._layerOrderChanged=!0}},Style.prototype.removeLayer=function(o){this._checkLoaded();var s=this._layers[o];if(!s){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")));return}s.setEventedParent(null);var x=this._order.indexOf(o);this._order.splice(x,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=s,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],s.onRemove&&s.onRemove(this.map)},Style.prototype.getLayer=function(i){return this._layers[i]},Style.prototype.hasLayer=function(i){return i in this._layers},Style.prototype.setLayerZoomRange=function(o,s,x){this._checkLoaded();var _=this.getLayer(o);if(!_){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")));return}(_.minzoom!==s||_.maxzoom!==x)&&(null!=s&&(_.minzoom=s),null!=x&&(_.maxzoom=x),this._updateLayer(_))},Style.prototype.setFilter=function(o,s,x){void 0===x&&(x={}),this._checkLoaded();var _=this.getLayer(o);if(!_){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")));return}if(!i.deepEqual(_.filter,s)){if(null==s){_.filter=void 0,this._updateLayer(_);return}this._validate(i.validateStyle.filter,"layers."+_.id+".filter",s,null,x)||(_.filter=i.clone$1(s),this._updateLayer(_))}},Style.prototype.getFilter=function(o){return i.clone$1(this.getLayer(o).filter)},Style.prototype.setLayoutProperty=function(o,s,x,_){void 0===_&&(_={}),this._checkLoaded();var F=this.getLayer(o);if(!F){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(F.getLayoutProperty(s),x)||(F.setLayoutProperty(s,x,_),this._updateLayer(F))},Style.prototype.getLayoutProperty=function(o,s){var x=this.getLayer(o);if(!x){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style.")));return}return x.getLayoutProperty(s)},Style.prototype.setPaintProperty=function(o,s,x,_){void 0===_&&(_={}),this._checkLoaded();var F=this.getLayer(o);if(!F){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(F.getPaintProperty(s),x)||(F.setPaintProperty(s,x,_)&&this._updateLayer(F),this._changed=!0,this._updatedPaintProps[o]=!0)},Style.prototype.getPaintProperty=function(i,o){return this.getLayer(i).getPaintProperty(o)},Style.prototype.setFeatureState=function(o,s){this._checkLoaded();var x=o.source,_=o.sourceLayer,F=this.sourceCaches[x];if(void 0===F){this.fire(new i.ErrorEvent(Error("The source '"+x+"' does not exist in the map's style.")));return}var N=F.getSource().type;if("geojson"===N&&_){this.fire(new i.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if("vector"===N&&!_){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}void 0===o.id&&this.fire(new i.ErrorEvent(Error("The feature id parameter must be provided."))),F.setFeatureState(_,o.id,s)},Style.prototype.removeFeatureState=function(o,s){this._checkLoaded();var x=o.source,_=this.sourceCaches[x];if(void 0===_){this.fire(new i.ErrorEvent(Error("The source '"+x+"' does not exist in the map's style.")));return}var F=_.getSource().type,N="vector"===F?o.sourceLayer:void 0;if("vector"===F&&!N){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}if(s&&"string"!=typeof o.id&&"number"!=typeof o.id){this.fire(new i.ErrorEvent(Error("A feature id is requred to remove its specific state property.")));return}_.removeFeatureState(N,o.id,s)},Style.prototype.getFeatureState=function(o){this._checkLoaded();var s=o.source,x=o.sourceLayer,_=this.sourceCaches[s];if(void 0===_){this.fire(new i.ErrorEvent(Error("The source '"+s+"' does not exist in the map's style.")));return}if("vector"===_.getSource().type&&!x){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}return void 0===o.id&&this.fire(new i.ErrorEvent(Error("The feature id parameter must be provided."))),_.getFeatureState(x,o.id)},Style.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Style.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(i){return i.serialize()}),layers:this._serializeLayers(this._order)},function(i){return void 0!==i})},Style.prototype._updateLayer=function(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&"raster"!==this.sourceCaches[i.source].getSource().type&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0},Style.prototype._flattenAndSortRenderedFeatures=function(i){for(var o=this,isLayer3D=function(i){return"fill-extrusion"===o._layers[i].type},s={},x=[],_=this._order.length-1;_>=0;_--){var F=this._order[_];if(isLayer3D(F)){s[F]=_;for(var N=0;N<i.length;N+=1){var j=i[N][F];if(j)for(var G=0;G<j.length;G+=1){var Z=j[G];x.push(Z)}}}}x.sort(function(i,o){return o.intersectionZ-i.intersectionZ});for(var X=[],J=this._order.length-1;J>=0;J--){var $=this._order[J];if(isLayer3D($))for(var ee=x.length-1;ee>=0;ee--){var et=x[ee].feature;if(s[et.layer.id]<J)break;X.push(et),x.pop()}else for(var er=0;er<i.length;er+=1){var en=i[er][$];if(en)for(var ei=0;ei<en.length;ei+=1){var eo=en[ei];X.push(eo.feature)}}}return X},Style.prototype.queryRenderedFeatures=function(o,s,x){s&&s.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);var _={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new i.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var F=0,N=s.layers;F<N.length;F+=1){var j=N[F],G=this._layers[j];if(!G)return this.fire(new i.ErrorEvent(Error("The layer '"+j+"' does not exist in the map's style and cannot be queried for features."))),[];_[G.source]=!0}}var Z=[];for(var X in s.availableImages=this._availableImages,this.sourceCaches)(!s.layers||_[X])&&Z.push(function(o,s,x,_,F,N){var j=function(i,o,s){if(i)for(var x=0;x<i.length;x+=1){var _=o[i[x]];if(_&&_.source===s&&"fill-extrusion"===_.type)return!0}else for(var F in o){var N=o[F];if(N.source===s&&"fill-extrusion"===N.type)return!0}return!1}(F&&F.layers,s,o.id),G=N.maxPitchScaleFactor(),Z=o.tilesIn(_,G,j);Z.sort(sortTilesIn);for(var X=[],J=0;J<Z.length;J+=1){var $=Z[J];X.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(s,x,o._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,F,N,G,function(o,s){var x=i.identity([]);return i.translate(x,x,[1,1,0]),i.scale(x,x,[.5*o.width,.5*o.height,1]),i.multiply(x,x,o.calculatePosMatrix(s.toUnwrapped()))}(o.transform,$.tileID))})}var ee=function(i){for(var o={},s={},x=0;x<i.length;x+=1){var _=i[x],F=_.queryResults,N=_.wrappedTileID,j=s[N]=s[N]||{};for(var G in F)for(var Z=F[G],X=j[G]=j[G]||{},J=o[G]=o[G]||[],$=0;$<Z.length;$+=1){var ee=Z[$];X[ee.featureIndex]||(X[ee.featureIndex]=!0,J.push(ee))}}return o}(X);for(var et in ee)ee[et].forEach(function(i){var s=i.feature,x=o.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=x});return ee}(this.sourceCaches[X],this._layers,this._serializedLayers,o,s,x));return this.placement&&Z.push(function(i,o,s,x,_,F,N){for(var j={},G=F.queryRenderedSymbols(x),Z=[],X=0,J=Object.keys(G).map(Number);X<J.length;X+=1){var $=J[X];Z.push(N[$])}Z.sort(sortTilesIn);for(var ee=0;ee<Z.length;ee+=1)!function(){var s=Z[ee],x=s.featureIndex.lookupSymbolFeatures(G[s.bucketInstanceId],o,s.bucketIndex,s.sourceLayerIndex,_.filter,_.layers,_.availableImages,i);for(var F in x){var N=j[F]=j[F]||[],X=x[F];X.sort(function(i,o){var x=s.featureSortOrder;if(!x)return o.featureIndex-i.featureIndex;var _=x.indexOf(i.featureIndex);return x.indexOf(o.featureIndex)-_});for(var J=0;J<X.length;J+=1){var $=X[J];N.push($)}}}();var loop$1=function(o){j[o].forEach(function(x){var _=x.feature,F=s[i[o].source].getFeatureState(_.layer["source-layer"],_.id);_.source=_.layer.source,_.layer["source-layer"]&&(_.sourceLayer=_.layer["source-layer"]),_.state=F})};for(var et in j)loop$1(et);return j}(this._layers,this._serializedLayers,this.sourceCaches,o,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Z)},Style.prototype.querySourceFeatures=function(o,s){s&&s.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);var x=this.sourceCaches[o];return x?function(i,o){for(var s=i.getRenderableIds().map(function(o){return i.getTileByID(o)}),x=[],_={},F=0;F<s.length;F++){var N=s[F],j=N.tileID.canonical.key;_[j]||(_[j]=!0,N.querySourceFeatures(x,o))}return x}(x,s):[]},Style.prototype.addSourceType=function(i,o,s){return Style.getSourceType(i)?s(Error('A source type called "'+i+'" already exists.')):(Style.setSourceType(i,o),o.workerSourceURL)?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:o.workerSourceURL},s):s(null,null)},Style.prototype.getLight=function(){return this.light.getLight()},Style.prototype.setLight=function(o,s){void 0===s&&(s={}),this._checkLoaded();var x=this.light.getLight(),_=!1;for(var F in o)if(!i.deepEqual(o[F],x[F])){_=!0;break}if(_){var N={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,s),this.light.updateTransitions(N)}},Style.prototype._validate=function(o,s,x,_,F){return void 0===F&&(F={}),(!F||!1!==F.validate)&&emitValidationErrors(this,o.call(i.validateStyle,i.extend({key:s,style:this.serialize(),value:x,styleSpec:i.styleSpec},_)))},Style.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var s in this.sourceCaches)this.sourceCaches[s].clearTiles(),this.sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Style.prototype._clearSource=function(i){this.sourceCaches[i].clearTiles()},Style.prototype._reloadSource=function(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()},Style.prototype._updateSources=function(i){for(var o in this.sourceCaches)this.sourceCaches[o].update(i)},Style.prototype._generateCollisionBoxes=function(){for(var i in this.sourceCaches)this._reloadSource(i)},Style.prototype._updatePlacement=function(o,s,x,_,F){void 0===F&&(F=!1);for(var N=!1,j=!1,G={},Z=0,X=this._order;Z<X.length;Z+=1){var J=X[Z],$=this._layers[J];if("symbol"===$.type){if(!G[$.source]){var ee=this.sourceCaches[$.source];G[$.source]=ee.getRenderableIds(!0).map(function(i){return ee.getTileByID(i)}).sort(function(i,o){return o.tileID.overscaledZ-i.tileID.overscaledZ||(i.tileID.isLessThan(o.tileID)?-1:1)})}var et=this.crossTileSymbolIndex.addLayer($,G[$.source],o.center.lng);N=N||et}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((F=F||this._layerOrderChanged||0===x)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),o.zoom))&&(this.pauseablePlacement=new PauseablePlacement(o,this._order,F,s,x,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),j=!0),N&&this.pauseablePlacement.placement.setStale()),j||N)for(var er=0,en=this._order;er<en.length;er+=1){var ei=en[er],eo=this._layers[ei];"symbol"===eo.type&&this.placement.updateLayerOpacities(eo,G[eo.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},Style.prototype._releaseSymbolFadeTiles=function(){for(var i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()},Style.prototype.getImages=function(i,o,s){this.imageManager.getImages(o.icons,s),this._updateTilesForChangedImages();var x=this.sourceCaches[o.source];x&&x.setDependencies(o.tileID.key,o.type,o.icons)},Style.prototype.getGlyphs=function(i,o,s){this.glyphManager.getGlyphs(o.stacks,s)},Style.prototype.getResource=function(o,s,x){return i.makeRequest(s,x)},Style}(i.Evented);e6.getSourceType=function(i){return eh[i]},e6.setSourceType=function(i,o){eh[i]=o},e6.registerForPluginStateChange=i.registerForPluginStateChange;var e8=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),e7=compile("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}");function compile(i,o){var s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x={};return{fragmentSource:i=i.replace(s,function(i,o,s,_,F){return(x[F]=!0,"define"===o)?"\n#ifndef HAS_UNIFORM_u_"+F+"\nvarying "+s+" "+_+" "+F+";\n#else\nuniform "+s+" "+_+" u_"+F+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+F+"\n    "+s+" "+_+" "+F+" = u_"+F+";\n#endif\n"}),vertexSource:o=o.replace(s,function(i,o,s,_,F){var N="float"===_?"vec2":"vec4",j=F.match(/color/)?"color":N;return x[F]?"define"===o?"\n#ifndef HAS_UNIFORM_u_"+F+"\nuniform lowp float u_"+F+"_t;\nattribute "+s+" "+N+" a_"+F+";\nvarying "+s+" "+_+" "+F+";\n#else\nuniform "+s+" "+_+" u_"+F+";\n#endif\n":"vec4"===j?"\n#ifndef HAS_UNIFORM_u_"+F+"\n    "+F+" = a_"+F+";\n#else\n    "+s+" "+_+" "+F+" = u_"+F+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+F+"\n    "+F+" = unpack_mix_"+j+"(a_"+F+", u_"+F+"_t);\n#else\n    "+s+" "+_+" "+F+" = u_"+F+";\n#endif\n":"define"===o?"\n#ifndef HAS_UNIFORM_u_"+F+"\nuniform lowp float u_"+F+"_t;\nattribute "+s+" "+N+" a_"+F+";\n#else\nuniform "+s+" "+_+" u_"+F+";\n#endif\n":"vec4"===j?"\n#ifndef HAS_UNIFORM_u_"+F+"\n    "+s+" "+_+" "+F+" = a_"+F+";\n#else\n    "+s+" "+_+" "+F+" = u_"+F+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+F+"\n    "+s+" "+_+" "+F+" = unpack_mix_"+j+"(a_"+F+", u_"+F+"_t);\n#else\n    "+s+" "+_+" "+F+" = u_"+F+";\n#endif\n"})}}var e9=Object.freeze({__proto__:null,prelude:e7,background:compile("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:compile("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:compile("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:compile("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:compile("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:compile("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:compile("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:compile("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:compile("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:compile("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:compile("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:compile("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:compile("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:compile("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:compile("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:compile("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:compile("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:compile("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:compile("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:compile("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:compile("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:compile("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:compile("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:compile("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:compile("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")}),VertexArrayObject=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};VertexArrayObject.prototype.bind=function(i,o,s,x,_,F,N,j){this.context=i;for(var G=this.boundPaintVertexBuffers.length!==x.length,Z=0;!G&&Z<x.length;Z++)this.boundPaintVertexBuffers[Z]!==x[Z]&&(G=!0);var X=!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==s||G||this.boundIndexBuffer!==_||this.boundVertexOffset!==F||this.boundDynamicVertexBuffer!==N||this.boundDynamicVertexBuffer2!==j;!i.extVertexArrayObject||X?this.freshBind(o,s,x,_,F,N,j):(i.bindVertexArrayOES.set(this.vao),N&&N.bind(),_&&_.dynamicDraw&&_.bind(),j&&j.bind())},VertexArrayObject.prototype.freshBind=function(i,o,s,x,_,F,N){var j,G=i.numAttributes,Z=this.context,X=Z.gl;if(Z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Z.extVertexArrayObject.createVertexArrayOES(),Z.bindVertexArrayOES.set(this.vao),j=0,this.boundProgram=i,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=s,this.boundIndexBuffer=x,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=N;else{j=Z.currentNumAttributes||0;for(var J=G;J<j;J++)X.disableVertexAttribArray(J)}o.enableAttributes(X,i);for(var $=0;$<s.length;$+=1)s[$].enableAttributes(X,i);F&&F.enableAttributes(X,i),N&&N.enableAttributes(X,i),o.bind(),o.setVertexAttribPointers(X,i,_);for(var ee=0;ee<s.length;ee+=1){var et=s[ee];et.bind(),et.setVertexAttribPointers(X,i,_)}F&&(F.bind(),F.setVertexAttribPointers(X,i,_)),x&&x.bind(),N&&(N.bind(),N.setVertexAttribPointers(X,i,_)),Z.currentNumAttributes=G},VertexArrayObject.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Program$1=function(i,o,s,x,_){var F=i.gl;this.program=F.createProgram();var N=s?s.defines():[];_&&N.push("#define OVERDRAW_INSPECTOR;");var j=N.concat(e7.fragmentSource,o.fragmentSource).join("\n"),G=N.concat(e7.vertexSource,o.vertexSource).join("\n"),Z=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost()){this.failedToCreate=!0;return}F.shaderSource(Z,j),F.compileShader(Z),F.attachShader(this.program,Z);var X=F.createShader(F.VERTEX_SHADER);if(F.isContextLost()){this.failedToCreate=!0;return}F.shaderSource(X,G),F.compileShader(X),F.attachShader(this.program,X);for(var J=s?s.layoutAttributes:[],$=0;$<J.length;$++)F.bindAttribLocation(this.program,$,J[$].name);F.linkProgram(this.program),F.deleteShader(X),F.deleteShader(Z),this.numAttributes=F.getProgramParameter(this.program,F.ACTIVE_ATTRIBUTES),this.attributes={};for(var ee={},et=0;et<this.numAttributes;et++){var er=F.getActiveAttrib(this.program,et);er&&(this.attributes[er.name]=F.getAttribLocation(this.program,er.name))}for(var en=F.getProgramParameter(this.program,F.ACTIVE_UNIFORMS),ei=0;ei<en;ei++){var eo=F.getActiveUniform(this.program,ei);eo&&(ee[eo.name]=F.getUniformLocation(this.program,eo.name))}this.fixedUniforms=x(i,ee),this.binderUniforms=s?s.getUniforms(i,ee):[]};function patternUniformValues(i,o,s){var x=1/pixelsToTileUnits(s,1,o.transform.tileZoom),_=Math.pow(2,s.tileID.overscaledZ),F=s.tileSize*Math.pow(2,o.transform.tileZoom)/_,N=F*(s.tileID.canonical.x+s.tileID.wrap*_),j=F*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[x,i.fromScale,i.toScale],u_fade:i.t,u_pixel_coord_upper:[N>>16,j>>16],u_pixel_coord_lower:[65535&N,65535&j]}}Program$1.prototype.draw=function(i,o,s,x,_,F,N,j,G,Z,X,J,$,ee,et,er){var en,ei=i.gl;if(!this.failedToCreate){for(var eo in i.program.set(this.program),i.setDepthMode(s),i.setStencilMode(x),i.setColorMode(_),i.setCullFace(F),this.fixedUniforms)this.fixedUniforms[eo].set(N[eo]);ee&&ee.setUniforms(i,this.binderUniforms,J,{zoom:$});for(var es=((en={})[ei.LINES]=2,en[ei.TRIANGLES]=3,en[ei.LINE_STRIP]=1,en)[o],el=0,ec=X.get();el<ec.length;el+=1){var eu=ec[el],ef=eu.vaos||(eu.vaos={});(ef[j]||(ef[j]=new VertexArrayObject)).bind(i,this,G,ee?ee.getPaintVertexBuffers():[],Z,eu.vertexOffset,et,er),ei.drawElements(o,eu.primitiveLength*es,ei.UNSIGNED_SHORT,eu.primitiveOffset*es*2)}}};var fillExtrusionUniformValues=function(o,s,x,_){var F=s.style.light,N=F.properties.get("position"),j=[N.x,N.y,N.z],G=i.create$1();"viewport"===F.properties.get("anchor")&&i.fromRotation(G,-s.transform.angle),i.transformMat3(j,j,G);var Z=F.properties.get("color");return{u_matrix:o,u_lightpos:j,u_lightintensity:F.properties.get("intensity"),u_lightcolor:[Z.r,Z.g,Z.b],u_vertical_gradient:+x,u_opacity:_}},fillUniformValues=function(i){return{u_matrix:i}},fillPatternUniformValues=function(o,s,x,_){return i.extend(fillUniformValues(o),patternUniformValues(x,s,_))},circleUniformValues=function(o,s,x,_){var F,N,j=o.transform;if("map"===_.paint.get("circle-pitch-alignment")){var G=pixelsToTileUnits(x,1,j.zoom);F=!0,N=[G,G]}else F=!1,N=j.pixelsToGLUnits;return{u_camera_to_center_distance:j.cameraToCenterDistance,u_scale_with_map:+("map"===_.paint.get("circle-pitch-scale")),u_matrix:o.translatePosMatrix(s.posMatrix,x,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+F,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:N}},collisionUniformValues=function(i,o,s){var x=pixelsToTileUnits(s,1,o.zoom),_=Math.pow(2,o.zoom-s.tileID.overscaledZ),F=s.tileID.overscaleFactor();return{u_matrix:i,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:x,u_extrude_scale:[o.pixelsToGLUnits[0]/(x*_),o.pixelsToGLUnits[1]/(x*_)],u_overscale_factor:F}},debugUniformValues=function(i,o,s){return void 0===s&&(s=1),{u_matrix:i,u_color:o,u_overlay:0,u_overlay_scale:s}},clippingMaskUniformValues=function(i){return{u_matrix:i}},heatmapTextureUniformValues=function(o,s,x,_){var F=i.create();i.ortho(F,0,o.width,o.height,0,0,1);var N=o.context.gl;return{u_matrix:F,u_world:[N.drawingBufferWidth,N.drawingBufferHeight],u_image:x,u_color_ramp:_,u_opacity:s.paint.get("heatmap-opacity")}},hillshadeUniformValues=function(o,s,x){var _,F,N,j=x.paint.get("hillshade-shadow-color"),G=x.paint.get("hillshade-highlight-color"),Z=x.paint.get("hillshade-accent-color"),X=x.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===x.paint.get("hillshade-illumination-anchor")&&(X-=o.transform.angle);var J=!o.options.moving;return{u_matrix:o.transform.calculatePosMatrix(s.tileID.toUnwrapped(),J),u_image:0,u_latrange:(F=Math.pow(2,(_=s.tileID).canonical.z),N=_.canonical.y,[new i.MercatorCoordinate(0,N/F).toLngLat().lat,new i.MercatorCoordinate(0,(N+1)/F).toLngLat().lat]),u_light:[x.paint.get("hillshade-exaggeration"),X],u_shadow:j,u_highlight:G,u_accent:Z}},hillshadeUniformPrepareValues=function(o,s,x){var _=s.stride,F=i.create();return i.ortho(F,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(F,F,[0,-i.EXTENT,0]),{u_matrix:F,u_image:1,u_dimension:[_,_],u_zoom:o.overscaledZ,u_maxzoom:x,u_unpack:s.getUnpackVector()}},lineUniformValues=function(o,s,x){var _=o.transform;return{u_matrix:calculateMatrix(o,s,x),u_ratio:1/pixelsToTileUnits(s,1,_.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},linePatternUniformValues=function(o,s,x,_){var F=o.transform,N=calculateTileRatio(s,F);return{u_matrix:calculateMatrix(o,s,x),u_texsize:s.imageAtlasTexture.size,u_ratio:1/pixelsToTileUnits(s,1,F.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[N,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},lineSDFUniformValues=function(o,s,x,_,F){var N=o.transform,j=o.lineAtlas,G=calculateTileRatio(s,N),Z="round"===x.layout.get("line-cap"),X=j.getDash(_.from,Z),J=j.getDash(_.to,Z),$=X.width*F.fromScale,ee=J.width*F.toScale;return i.extend(lineUniformValues(o,s,x),{u_patternscale_a:[G/$,-X.height/2],u_patternscale_b:[G/ee,-J.height/2],u_sdfgamma:j.width/(256*Math.min($,ee)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:X.y,u_tex_y_b:J.y,u_mix:F.t})};function calculateTileRatio(i,o){return 1/pixelsToTileUnits(i,1,o.tileZoom)}function calculateMatrix(i,o,s){return i.translatePosMatrix(o.tileID.posMatrix,o,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}var symbolIconUniformValues=function(i,o,s,x,_,F,N,j,G,Z){var X=_.transform;return{u_is_size_zoom_constant:+("constant"===i||"source"===i),u_is_size_feature_constant:+("constant"===i||"camera"===i),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:X.width/X.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:N,u_coord_matrix:j,u_is_text:+G,u_pitch_with_map:+x,u_texsize:Z,u_texture:0}},symbolSDFUniformValues=function(o,s,x,_,F,N,j,G,Z,X,J){var $=F.transform;return i.extend(symbolIconUniformValues(o,s,x,_,F,N,j,G,Z,X),{u_gamma_scale:_?Math.cos($._pitch)*$.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+J})},backgroundPatternUniformValues=function(o,s,x,_,F,N){var j,G,Z,X,J,$,ee,et,er;return i.extend((j=x.imageManager.getPattern(_.from.toString()),G=x.imageManager.getPattern(_.to.toString()),X=(Z=x.imageManager.getPixelSize()).width,J=Z.height,$=Math.pow(2,F.tileID.overscaledZ),et=(ee=F.tileSize*Math.pow(2,x.transform.tileZoom)/$)*(F.tileID.canonical.x+F.tileID.wrap*$),er=ee*F.tileID.canonical.y,{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[X,J],u_mix:N.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:N.fromScale,u_scale_b:N.toScale,u_tile_units_to_pixels:1/pixelsToTileUnits(F,1,x.transform.tileZoom),u_pixel_coord_upper:[et>>16,er>>16],u_pixel_coord_lower:[65535&et,65535&er]}),{u_matrix:o,u_opacity:s})},te={fillExtrusion:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_lightpos:new i.Uniform3f(o,s.u_lightpos),u_lightintensity:new i.Uniform1f(o,s.u_lightintensity),u_lightcolor:new i.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new i.Uniform1f(o,s.u_vertical_gradient),u_opacity:new i.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_lightpos:new i.Uniform3f(o,s.u_lightpos),u_lightintensity:new i.Uniform1f(o,s.u_lightintensity),u_lightcolor:new i.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new i.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new i.Uniform1f(o,s.u_height_factor),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade),u_opacity:new i.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new i.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new i.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new i.UniformColor(o,s.u_color),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_overlay:new i.Uniform1i(o,s.u_overlay),u_overlay_scale:new i.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new i.Uniform1f(o,s.u_extrude_scale),u_intensity:new i.Uniform1f(o,s.u_intensity),u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world),u_image:new i.Uniform1i(o,s.u_image),u_color_ramp:new i.Uniform1i(o,s.u_color_ramp),u_opacity:new i.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_latrange:new i.Uniform2f(o,s.u_latrange),u_light:new i.Uniform2f(o,s.u_light),u_shadow:new i.UniformColor(o,s.u_shadow),u_highlight:new i.UniformColor(o,s.u_highlight),u_accent:new i.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_dimension:new i.Uniform2f(o,s.u_dimension),u_zoom:new i.Uniform1f(o,s.u_zoom),u_maxzoom:new i.Uniform1f(o,s.u_maxzoom),u_unpack:new i.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_image:new i.Uniform1i(o,s.u_image)}},linePattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_texsize:new i.Uniform2f(o,s.u_texsize),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_image:new i.Uniform1i(o,s.u_image),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new i.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new i.Uniform1f(o,s.u_sdfgamma),u_image:new i.Uniform1i(o,s.u_image),u_tex_y_a:new i.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new i.Uniform1f(o,s.u_tex_y_b),u_mix:new i.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new i.Uniform2f(o,s.u_tl_parent),u_scale_parent:new i.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new i.Uniform1f(o,s.u_buffer_scale),u_fade_t:new i.Uniform1f(o,s.u_fade_t),u_opacity:new i.Uniform1f(o,s.u_opacity),u_image0:new i.Uniform1i(o,s.u_image0),u_image1:new i.Uniform1i(o,s.u_image1),u_brightness_low:new i.Uniform1f(o,s.u_brightness_low),u_brightness_high:new i.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new i.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new i.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new i.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texture:new i.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texture:new i.Uniform1i(o,s.u_texture),u_gamma_scale:new i.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texsize_icon:new i.Uniform2f(o,s.u_texsize_icon),u_texture:new i.Uniform1i(o,s.u_texture),u_texture_icon:new i.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new i.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_opacity:new i.Uniform1f(o,s.u_opacity),u_color:new i.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_opacity:new i.Uniform1f(o,s.u_opacity),u_image:new i.Uniform1i(o,s.u_image),u_pattern_tl_a:new i.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(o,s.u_pattern_br_b),u_texsize:new i.Uniform2f(o,s.u_texsize),u_mix:new i.Uniform1f(o,s.u_mix),u_pattern_size_a:new i.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new i.Uniform1f(o,s.u_scale_a),u_scale_b:new i.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(o,s.u_tile_units_to_pixels)}}};function drawCollisionDebug(o,s,_,F,N,j,G){for(var Z=o.context,X=Z.gl,J=o.useProgram("collisionBox"),$=[],ee=0,et=0,er=0;er<F.length;er++){var en=F[er],ei=s.getTile(en),eo=ei.getBucket(_);if(eo){var es=en.posMatrix;(0!==N[0]||0!==N[1])&&(es=o.translatePosMatrix(en.posMatrix,ei,N,j));var el=G?eo.textCollisionBox:eo.iconCollisionBox,ec=eo.collisionCircleArray;if(ec.length>0){var eu=i.create(),ef=es;i.mul(eu,eo.placementInvProjMatrix,o.transform.glCoordMatrix),i.mul(eu,eu,eo.placementViewportMatrix),$.push({circleArray:ec,circleOffset:et,transform:ef,invTransform:eu}),ee+=ec.length/4,et=ee}el&&J.draw(Z,X.LINES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,collisionUniformValues(es,o.transform,ei),_.id,el.layoutVertexBuffer,el.indexBuffer,el.segments,null,o.transform.zoom,null,null,el.collisionVertexBuffer)}}if(G&&$.length){var eh=o.useProgram("collisionCircle"),ed=new i.StructArrayLayout2f1f2i16;ed.resize(4*ee),ed._trim();for(var ep=0,eg=0;eg<$.length;eg+=1)for(var em=$[eg],ey=0;ey<em.circleArray.length/4;ey++){var ev=4*ey,ex=em.circleArray[ev+0],e_=em.circleArray[ev+1],ew=em.circleArray[ev+2],eT=em.circleArray[ev+3];ed.emplace(ep++,ex,e_,ew,eT,0),ed.emplace(ep++,ex,e_,ew,eT,1),ed.emplace(ep++,ex,e_,ew,eT,2),ed.emplace(ep++,ex,e_,ew,eT,3)}(!x||x.length<2*ee)&&(x=function(o){var s=2*o,x=new i.StructArrayLayout3ui6;x.resize(s),x._trim();for(var _=0;_<s;_++){var F=6*_;x.uint16[F+0]=4*_+0,x.uint16[F+1]=4*_+1,x.uint16[F+2]=4*_+2,x.uint16[F+3]=4*_+2,x.uint16[F+4]=4*_+3,x.uint16[F+5]=4*_+0}return x}(ee));for(var ek=Z.createIndexBuffer(x,!0),eA=Z.createVertexBuffer(ed,i.collisionCircleLayout.members,!0),eS=0;eS<$.length;eS+=1){var eM,eC=$[eS],eE={u_matrix:eC.transform,u_inv_matrix:eC.invTransform,u_camera_to_center_distance:(eM=o.transform).cameraToCenterDistance,u_viewport_size:[eM.width,eM.height]};eh.draw(Z,X.TRIANGLES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,eE,_.id,eA,ek,i.SegmentVector.simpleSegment(0,2*eC.circleOffset,eC.circleArray.length,eC.circleArray.length/2),null,o.transform.zoom,null,null,null)}eA.destroy(),ek.destroy()}}var tt=i.identity(new Float32Array(16));function drawLayerSymbols(o,s,x,_,F,N,j,G,Z,X,J,$){for(var ee=o.context,et=ee.gl,er=o.transform,en="map"===G,ei="map"===Z,eo=en&&"point"!==x.layout.get("symbol-placement"),es=en&&!ei&&!eo,el=void 0!==x.layout.get("symbol-sort-key").constantOr(1),ec=o.depthModeForSublayer(0,DepthMode.ReadOnly),eu=x.layout.get("text-variable-anchor"),ef=[],eh=0;eh<_.length;eh+=1){var ed,ep,eg,em=_[eh],ey=s.getTile(em),ev=ey.getBucket(x);if(ev){var ex=F?ev.text:ev.icon;if(ex&&ex.segments.get().length){var e_=ex.programConfigurations.get(x.id),ew=F||ev.sdfIcons,eT=F?ev.textSizeData:ev.iconSizeData,ek=ei||0!==er.pitch,eA=o.useProgram(ev.iconsInText&&F?"symbolTextAndIcon":ew?"symbolSDF":"symbolIcon",e_),eS=i.evaluateSizeForZoom(eT,er.zoom),eM=void 0,eC=[0,0],eE=void 0,eL=void 0,eP=null,eI=void 0;if(F){if(eE=ey.glyphAtlasTexture,eL=et.LINEAR,eM=ey.glyphAtlasTexture.size,ev.iconsInText){eC=ey.imageAtlasTexture.size,eP=ey.imageAtlasTexture;var eO="composite"===eT.kind||"camera"===eT.kind;eI=ek||o.options.rotating||o.options.zooming||eO?et.LINEAR:et.NEAREST}}else{var eD=1!==x.layout.get("icon-size").constantOr(0)||ev.iconsNeedLinear;eE=ey.imageAtlasTexture,eL=ew||o.options.rotating||o.options.zooming||eD||ek?et.LINEAR:et.NEAREST,eM=ey.imageAtlasTexture.size}var eR=pixelsToTileUnits(ey,1,o.transform.zoom),eB=getLabelPlaneMatrix(em.posMatrix,ei,en,o.transform,eR),ez=getGlCoordMatrix(em.posMatrix,ei,en,o.transform,eR),eF=eu&&ev.hasTextData(),eN="none"!==x.layout.get("icon-text-fit")&&eF&&ev.hasIconData();eo&&function(o,s,x,_,F,N,j,G){var Z=_?o.textSizeData:o.iconSizeData,X=i.evaluateSizeForZoom(Z,x.transform.zoom),J=[256/x.width*2+1,256/x.height*2+1],$=_?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;$.clear();for(var ee=o.lineVertexArray,et=_?o.text.placedSymbolArray:o.icon.placedSymbolArray,er=x.transform.width/x.transform.height,en=!1,ei=0;ei<et.length;ei++){var eo=et.get(ei);if(eo.hidden||eo.writingMode===i.WritingMode.vertical&&!en){hideGlyphs(eo.numGlyphs,$);continue}en=!1;var es=[eo.anchorX,eo.anchorY,0,1];if(i.transformMat4(es,es,s),!function(i,o){var s=i[0]/i[3],x=i[1]/i[3];return s>=-o[0]&&s<=o[0]&&x>=-o[1]&&x<=o[1]}(es,J)){hideGlyphs(eo.numGlyphs,$);continue}var el=es[3],ec=getPerspectiveRatio(x.transform.cameraToCenterDistance,el),eu=i.evaluateSizeForFeature(Z,X,eo),ef=j?eu/ec:eu*ec,eh=new i.Point(eo.anchorX,eo.anchorY),ed=project(eh,F).point,ep={},eg=placeGlyphsAlongLine(eo,ef,!1,G,s,F,N,o.glyphOffsetArray,ee,$,ed,eh,ep,er);en=eg.useVertical,(eg.notEnoughRoom||en||eg.needsFlipping&&placeGlyphsAlongLine(eo,ef,!0,G,s,F,N,o.glyphOffsetArray,ee,$,ed,eh,ep,er).notEnoughRoom)&&hideGlyphs(eo.numGlyphs,$)}_?o.text.dynamicLayoutVertexBuffer.updateData($):o.icon.dynamicLayoutVertexBuffer.updateData($)}(ev,em.posMatrix,o,F,eB,ez,ei,X);var ej=o.translatePosMatrix(em.posMatrix,ey,N,j),eU=eo||F&&eu||eN?tt:eB,eV=o.translatePosMatrix(ez,ey,N,j,!0),eH=ew&&0!==x.paint.get(F?"text-halo-width":"icon-halo-width").constantOr(1),eG=void 0;ew?ev.iconsInText?(ed=eT.kind,ep=eM,eg=eC,eG=i.extend(symbolSDFUniformValues(ed,eS,es,ei,o,ej,eU,eV,!0,ep,!0),{u_texsize_icon:eg,u_texture_icon:1})):eG=symbolSDFUniformValues(eT.kind,eS,es,ei,o,ej,eU,eV,F,eM,!0):eG=symbolIconUniformValues(eT.kind,eS,es,ei,o,ej,eU,eV,F,eM);var eW={program:eA,buffers:ex,uniformValues:eG,atlasTexture:eE,atlasTextureIcon:eP,atlasInterpolation:eL,atlasInterpolationIcon:eI,isSDF:ew,hasHalo:eH};if(el)for(var eZ=ex.segments.get(),eY=0;eY<eZ.length;eY+=1){var eX=eZ[eY];ef.push({segments:new i.SegmentVector([eX]),sortKey:eX.sortKey,state:eW})}else ef.push({segments:ex.segments,sortKey:0,state:eW})}}}el&&ef.sort(function(i,o){return i.sortKey-o.sortKey});for(var eK=0;eK<ef.length;eK+=1){var eJ=ef[eK],e$=eJ.state;if(ee.activeTexture.set(et.TEXTURE0),e$.atlasTexture.bind(e$.atlasInterpolation,et.CLAMP_TO_EDGE),e$.atlasTextureIcon&&(ee.activeTexture.set(et.TEXTURE1),e$.atlasTextureIcon&&e$.atlasTextureIcon.bind(e$.atlasInterpolationIcon,et.CLAMP_TO_EDGE)),e$.isSDF){var eQ=e$.uniformValues;e$.hasHalo&&(eQ.u_is_halo=1,drawSymbolElements(e$.buffers,eJ.segments,x,o,e$.program,ec,J,$,eQ)),eQ.u_is_halo=0}drawSymbolElements(e$.buffers,eJ.segments,x,o,e$.program,ec,J,$,e$.uniformValues)}}function drawSymbolElements(i,o,s,x,_,F,N,j,G){var Z=x.context,X=Z.gl;_.draw(Z,X.TRIANGLES,F,N,j,CullFaceMode.disabled,G,s.id,i.layoutVertexBuffer,i.indexBuffer,o,s.paint,x.transform.zoom,i.programConfigurations.get(s.id),i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer)}function drawFillTiles(o,s,x,_,F,N,j){var G,Z,X,J,$,ee=o.context.gl,et=x.paint.get("fill-pattern"),er=et&&et.constantOr(1),en=x.getCrossfadeParameters();j?(Z=er&&!x.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=ee.LINES):(Z=er?"fillPattern":"fill",G=ee.TRIANGLES);for(var ei=0;ei<_.length;ei+=1){var eo=_[ei],es=s.getTile(eo);if(!er||es.patternsLoaded()){var el=es.getBucket(x);if(el){var ec=el.programConfigurations.get(x.id),eu=o.useProgram(Z,ec);er&&(o.context.activeTexture.set(ee.TEXTURE0),es.imageAtlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ec.updatePaintBuffers(en));var ef=et.constantOr(null);if(ef&&es.imageAtlas){var eh=es.imageAtlas,ed=eh.patternPositions[ef.to.toString()],ep=eh.patternPositions[ef.from.toString()];ed&&ep&&ec.setConstantPatternPositions(ed,ep)}var eg=o.translatePosMatrix(eo.posMatrix,es,x.paint.get("fill-translate"),x.paint.get("fill-translate-anchor"));if(j){J=el.indexBuffer2,$=el.segments2;var em=[ee.drawingBufferWidth,ee.drawingBufferHeight];X="fillOutlinePattern"===Z&&er?i.extend(fillPatternUniformValues(eg,o,en,es),{u_world:em}):{u_matrix:eg,u_world:em}}else J=el.indexBuffer,$=el.segments,X=er?fillPatternUniformValues(eg,o,en,es):fillUniformValues(eg);eu.draw(o.context,G,F,o.stencilModeForClipping(eo),N,CullFaceMode.disabled,X,x.id,el.layoutVertexBuffer,J,$,x.paint,o.transform.zoom,ec)}}}}function drawExtrusionTiles(o,s,x,_,F,N,j){for(var G=o.context,Z=G.gl,X=x.paint.get("fill-extrusion-pattern"),J=X.constantOr(1),$=x.getCrossfadeParameters(),ee=x.paint.get("fill-extrusion-opacity"),et=0;et<_.length;et+=1){var er=_[et],en=s.getTile(er),ei=en.getBucket(x);if(ei){var eo=ei.programConfigurations.get(x.id),es=o.useProgram(J?"fillExtrusionPattern":"fillExtrusion",eo);J&&(o.context.activeTexture.set(Z.TEXTURE0),en.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),eo.updatePaintBuffers($));var el=X.constantOr(null);if(el&&en.imageAtlas){var ec=en.imageAtlas,eu=ec.patternPositions[el.to.toString()],ef=ec.patternPositions[el.from.toString()];eu&&ef&&eo.setConstantPatternPositions(eu,ef)}var eh=o.translatePosMatrix(er.posMatrix,en,x.paint.get("fill-extrusion-translate"),x.paint.get("fill-extrusion-translate-anchor")),ed=x.paint.get("fill-extrusion-vertical-gradient"),ep=J?i.extend(fillExtrusionUniformValues(eh,o,ed,ee),patternUniformValues($,o,en),{u_height_factor:-Math.pow(2,er.overscaledZ)/en.tileSize/8}):fillExtrusionUniformValues(eh,o,ed,ee);es.draw(G,G.gl.TRIANGLES,F,N,j,CullFaceMode.backCCW,ep,x.id,ei.layoutVertexBuffer,ei.indexBuffer,ei.segments,x.paint,o.transform.zoom,eo)}}}var tr=new i.Color(1,0,0,1),tn=new i.Color(0,1,0,1),ti=new i.Color(0,0,1,1),ta=new i.Color(1,0,1,1),to=new i.Color(0,1,1,1);function drawHorizontalLine(i,o,s,x){drawDebugSSRect(i,0,o+s/2,i.transform.width,s,x)}function drawVerticalLine(i,o,s,x){drawDebugSSRect(i,o-s/2,0,s,i.transform.height,x)}function drawDebugSSRect(o,s,x,_,F,N){var j=o.context,G=j.gl;G.enable(G.SCISSOR_TEST),G.scissor(s*i.browser.devicePixelRatio,x*i.browser.devicePixelRatio,_*i.browser.devicePixelRatio,F*i.browser.devicePixelRatio),j.clear({color:N}),G.disable(G.SCISSOR_TEST)}var ts={symbol:function(o,s,x,_,F){if("translucent"===o.renderPass){var N=StencilMode.disabled,j=o.colorModeForRenderPass();x.layout.get("text-variable-anchor")&&function(o,s,x,_,F,N,j){for(var G=s.transform,Z="map"===F,X="map"===N,J=0;J<o.length;J+=1){var $=o[J],ee=_.getTile($),et=ee.getBucket(x);if(et&&et.text&&et.text.segments.get().length){var er=et.textSizeData,en=i.evaluateSizeForZoom(er,G.zoom),ei=pixelsToTileUnits(ee,1,s.transform.zoom),eo=getLabelPlaneMatrix($.posMatrix,X,Z,s.transform,ei),es="none"!==x.layout.get("icon-text-fit")&&et.hasIconData();if(en){var el=Math.pow(2,G.zoom-ee.tileID.overscaledZ);(function(o,s,x,_,F,N,j,G,Z,X,J){var $=o.text.placedSymbolArray,ee=o.text.dynamicLayoutVertexArray,et=o.icon.dynamicLayoutVertexArray,er={};ee.clear();for(var en=0;en<$.length;en++){var ei=$.get(en),eo=o.allowVerticalPlacement&&!ei.placedOrientation,es=ei.hidden||!ei.crossTileID||eo?null:_[ei.crossTileID];if(es){var el=new i.Point(ei.anchorX,ei.anchorY),ec=project(el,x?G:j),eu=getPerspectiveRatio(N.cameraToCenterDistance,ec.signedDistanceFromCamera),ef=F.evaluateSizeForFeature(o.textSizeData,X,ei)*eu/i.ONE_EM;x&&(ef*=o.tilePixelRatio/Z);for(var eh=es.width,ed=es.height,ep=function(o,s,x,_,F,N){var j=i.getAnchorAlignment(o),G=j.horizontalAlign,Z=j.verticalAlign,X=i.evaluateVariableOffset(o,_);return new i.Point((-(G-.5)*s/F+X[0])*N,(-(Z-.5)*x/F+X[1])*N)}(es.anchor,eh,ed,es.textOffset,es.textBoxScale,ef),eg=x?project(el.add(ep),j).point:ec.point.add(s?ep.rotate(-N.angle):ep),em=o.allowVerticalPlacement&&ei.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,ey=0;ey<ei.numGlyphs;ey++)i.addDynamicAttributes(ee,eg,em);J&&ei.associatedIconIndex>=0&&(er[ei.associatedIconIndex]={shiftedAnchor:eg,angle:em})}else hideGlyphs(ei.numGlyphs,ee)}if(J){et.clear();for(var ev=o.icon.placedSymbolArray,ex=0;ex<ev.length;ex++){var e_=ev.get(ex);if(e_.hidden)hideGlyphs(e_.numGlyphs,et);else{var ew=er[ex];if(ew)for(var eT=0;eT<e_.numGlyphs;eT++)i.addDynamicAttributes(et,ew.shiftedAnchor,ew.angle);else hideGlyphs(e_.numGlyphs,et)}}o.icon.dynamicLayoutVertexBuffer.updateData(et)}o.text.dynamicLayoutVertexBuffer.updateData(ee)})(et,Z,X,j,i.symbolSize,G,eo,$.posMatrix,el,en,es)}}}}(_,o,x,s,x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),F),0!==x.paint.get("icon-opacity").constantOr(1)&&drawLayerSymbols(o,s,x,_,!1,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),x.layout.get("icon-rotation-alignment"),x.layout.get("icon-pitch-alignment"),x.layout.get("icon-keep-upright"),N,j),0!==x.paint.get("text-opacity").constantOr(1)&&drawLayerSymbols(o,s,x,_,!0,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),x.layout.get("text-rotation-alignment"),x.layout.get("text-pitch-alignment"),x.layout.get("text-keep-upright"),N,j),s.map.showCollisionBoxes&&(drawCollisionDebug(o,s,x,_,x.paint.get("text-translate"),x.paint.get("text-translate-anchor"),!0),drawCollisionDebug(o,s,x,_,x.paint.get("icon-translate"),x.paint.get("icon-translate-anchor"),!1))}},circle:function(o,s,x,_){if("translucent"===o.renderPass){var F=x.paint.get("circle-opacity"),N=x.paint.get("circle-stroke-width"),j=x.paint.get("circle-stroke-opacity"),G=void 0!==x.layout.get("circle-sort-key").constantOr(1);if(0!==F.constantOr(1)||0!==N.constantOr(1)&&0!==j.constantOr(1)){for(var Z=o.context,X=Z.gl,J=o.depthModeForSublayer(0,DepthMode.ReadOnly),$=StencilMode.disabled,ee=o.colorModeForRenderPass(),et=[],er=0;er<_.length;er++){var en=_[er],ei=s.getTile(en),eo=ei.getBucket(x);if(eo){var es=eo.programConfigurations.get(x.id),el=o.useProgram("circle",es),ec={programConfiguration:es,program:el,layoutVertexBuffer:eo.layoutVertexBuffer,indexBuffer:eo.indexBuffer,uniformValues:circleUniformValues(o,en,ei,x)};if(G)for(var eu=eo.segments.get(),ef=0;ef<eu.length;ef+=1){var eh=eu[ef];et.push({segments:new i.SegmentVector([eh]),sortKey:eh.sortKey,state:ec})}else et.push({segments:eo.segments,sortKey:0,state:ec})}}G&&et.sort(function(i,o){return i.sortKey-o.sortKey});for(var ed=0;ed<et.length;ed+=1){var ep=et[ed],eg=ep.state,em=eg.programConfiguration,ey=eg.program,ev=eg.layoutVertexBuffer,ex=eg.indexBuffer,e_=eg.uniformValues,ew=ep.segments;ey.draw(Z,X.TRIANGLES,J,$,ee,CullFaceMode.disabled,e_,x.id,ev,ex,ew,x.paint,o.transform.zoom,em)}}}},heatmap:function(o,s,x,_){if(0!==x.paint.get("heatmap-opacity")){if("offscreen"===o.renderPass){var F=o.context,N=F.gl,j=StencilMode.disabled,G=new ColorMode([N.ONE,N.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function(i,o,s){var x=i.gl;i.activeTexture.set(x.TEXTURE1),i.viewport.set([0,0,o.width/4,o.height/4]);var _=s.heatmapFbo;if(_)x.bindTexture(x.TEXTURE_2D,_.colorAttachment.get()),i.bindFramebuffer.set(_.framebuffer);else{var F,N,j,G=x.createTexture();x.bindTexture(x.TEXTURE_2D,G),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),F=_=s.heatmapFbo=i.createFramebuffer(o.width/4,o.height/4,!1),N=i.gl,j=i.extRenderToTextureHalfFloat?i.extTextureHalfFloat.HALF_FLOAT_OES:N.UNSIGNED_BYTE,N.texImage2D(N.TEXTURE_2D,0,N.RGBA,o.width/4,o.height/4,0,N.RGBA,j,null),F.colorAttachment.set(G)}})(F,o,x),F.clear({color:i.Color.transparent});for(var Z=0;Z<_.length;Z++){var X,J,$=_[Z];if(!s.hasRenderableParent($)){var ee=s.getTile($),et=ee.getBucket(x);if(et){var er=et.programConfigurations.get(x.id),en=o.useProgram("heatmap",er),ei=o.transform.zoom;en.draw(F,N.TRIANGLES,DepthMode.disabled,j,G,CullFaceMode.disabled,(X=$.posMatrix,J=x.paint.get("heatmap-intensity"),{u_matrix:X,u_extrude_scale:pixelsToTileUnits(ee,1,ei),u_intensity:J}),x.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,x.paint,o.transform.zoom,er)}}}F.viewport.set([0,0,o.width,o.height])}else"translucent"===o.renderPass&&(o.context.setColorMode(o.colorModeForRenderPass()),function(o,s){var x=o.context,_=x.gl,F=s.heatmapFbo;if(F){x.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,F.colorAttachment.get()),x.activeTexture.set(_.TEXTURE1);var N=s.colorRampTexture;N||(N=s.colorRampTexture=new i.Texture(x,s.colorRamp,_.RGBA)),N.bind(_.LINEAR,_.CLAMP_TO_EDGE),o.useProgram("heatmapTexture").draw(x,_.TRIANGLES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,heatmapTextureUniformValues(o,s,0,1),s.id,o.viewportBuffer,o.quadTriangleIndexBuffer,o.viewportSegments,s.paint,o.transform.zoom)}}(o,x))}},line:function(o,s,x,_){if("translucent"===o.renderPass){var F=x.paint.get("line-opacity"),N=x.paint.get("line-width");if(0!==F.constantOr(1)&&0!==N.constantOr(1)){var j=o.depthModeForSublayer(0,DepthMode.ReadOnly),G=o.colorModeForRenderPass(),Z=x.paint.get("line-dasharray"),X=x.paint.get("line-pattern"),J=X.constantOr(1),$=x.paint.get("line-gradient"),ee=x.getCrossfadeParameters(),et=J?"linePattern":Z?"lineSDF":$?"lineGradient":"line",er=o.context,en=er.gl,ei=!0;if($){er.activeTexture.set(en.TEXTURE0);var eo=x.gradientTexture;if(!x.gradient)return;eo||(eo=x.gradientTexture=new i.Texture(er,x.gradient,en.RGBA)),eo.bind(en.LINEAR,en.CLAMP_TO_EDGE)}for(var es=0;es<_.length;es+=1){var el=_[es],ec=s.getTile(el);if(!J||ec.patternsLoaded()){var eu=ec.getBucket(x);if(eu){var ef=eu.programConfigurations.get(x.id),eh=o.context.program.get(),ed=o.useProgram(et,ef),ep=ei||ed.program!==eh,eg=X.constantOr(null);if(eg&&ec.imageAtlas){var em=ec.imageAtlas,ey=em.patternPositions[eg.to.toString()],ev=em.patternPositions[eg.from.toString()];ey&&ev&&ef.setConstantPatternPositions(ey,ev)}var ex=J?linePatternUniformValues(o,ec,x,ee):Z?lineSDFUniformValues(o,ec,x,Z,ee):$?i.extend(lineUniformValues(o,ec,x),{u_image:0}):lineUniformValues(o,ec,x);J?(er.activeTexture.set(en.TEXTURE0),ec.imageAtlasTexture.bind(en.LINEAR,en.CLAMP_TO_EDGE),ef.updatePaintBuffers(ee)):Z&&(ep||o.lineAtlas.dirty)&&(er.activeTexture.set(en.TEXTURE0),o.lineAtlas.bind(er)),ed.draw(er,en.TRIANGLES,j,o.stencilModeForClipping(el),G,CullFaceMode.disabled,ex,x.id,eu.layoutVertexBuffer,eu.indexBuffer,eu.segments,x.paint,o.transform.zoom,ef),ei=!1}}}}}},fill:function(o,s,x,_){var F=x.paint.get("fill-color"),N=x.paint.get("fill-opacity");if(0!==N.constantOr(1)){var j=o.colorModeForRenderPass(),G=x.paint.get("fill-pattern"),Z=o.opaquePassEnabledForLayer()&&!G.constantOr(1)&&1===F.constantOr(i.Color.transparent).a&&1===N.constantOr(0)?"opaque":"translucent";if(o.renderPass===Z){var X=o.depthModeForSublayer(1,"opaque"===o.renderPass?DepthMode.ReadWrite:DepthMode.ReadOnly);drawFillTiles(o,s,x,_,X,j,!1)}if("translucent"===o.renderPass&&x.paint.get("fill-antialias")){var J=o.depthModeForSublayer(x.getPaintProperty("fill-outline-color")?2:0,DepthMode.ReadOnly);drawFillTiles(o,s,x,_,J,j,!0)}}},"fill-extrusion":function(i,o,s,x){var _=s.paint.get("fill-extrusion-opacity");if(0!==_&&"translucent"===i.renderPass){var F=new DepthMode(i.context.gl.LEQUAL,DepthMode.ReadWrite,i.depthRangeFor3D);if(1!==_||s.paint.get("fill-extrusion-pattern").constantOr(1))drawExtrusionTiles(i,o,s,x,F,StencilMode.disabled,ColorMode.disabled),drawExtrusionTiles(i,o,s,x,F,i.stencilModeFor3D(),i.colorModeForRenderPass());else{var N=i.colorModeForRenderPass();drawExtrusionTiles(i,o,s,x,F,StencilMode.disabled,N)}}},hillshade:function(o,s,x,_){if("offscreen"===o.renderPass||"translucent"===o.renderPass){for(var F=o.context,N=s.getSource().maxzoom,j=o.depthModeForSublayer(0,DepthMode.ReadOnly),G=o.colorModeForRenderPass(),Z="translucent"===o.renderPass?o.stencilConfigForOverlap(_):[{},_],X=Z[0],J=Z[1],$=0;$<J.length;$+=1){var ee=J[$],et=s.getTile(ee);et.needsHillshadePrepare&&"offscreen"===o.renderPass?function(o,s,x,_,F,N,j){var G=o.context,Z=G.gl,X=s.dem;if(X&&X.data){var J=X.dim,$=X.stride,ee=X.getPixels();if(G.activeTexture.set(Z.TEXTURE1),G.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture($),s.demTexture){var et=s.demTexture;et.update(ee,{premultiply:!1}),et.bind(Z.NEAREST,Z.CLAMP_TO_EDGE)}else s.demTexture=new i.Texture(G,ee,Z.RGBA,{premultiply:!1}),s.demTexture.bind(Z.NEAREST,Z.CLAMP_TO_EDGE);G.activeTexture.set(Z.TEXTURE0);var er=s.fbo;if(!er){var en=new i.Texture(G,{width:J,height:J,data:null},Z.RGBA);en.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),(er=s.fbo=G.createFramebuffer(J,J,!0)).colorAttachment.set(en.texture)}G.bindFramebuffer.set(er.framebuffer),G.viewport.set([0,0,J,J]),o.useProgram("hillshadePrepare").draw(G,Z.TRIANGLES,F,N,j,CullFaceMode.disabled,hillshadeUniformPrepareValues(s.tileID,X,_),x.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}(o,et,x,N,j,StencilMode.disabled,G):"translucent"===o.renderPass&&function(i,o,s,x,_,F){var N=i.context,j=N.gl,G=o.fbo;if(G){var Z=i.useProgram("hillshade");N.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,G.colorAttachment.get());var X=hillshadeUniformValues(i,o,s);Z.draw(N,j.TRIANGLES,x,_,F,CullFaceMode.disabled,X,s.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}(o,et,x,j,X[ee.overscaledZ],G)}F.viewport.set([0,0,o.width,o.height])}},raster:function(o,s,x,_){if("translucent"===o.renderPass&&0!==x.paint.get("raster-opacity")&&_.length)for(var F=o.context,N=F.gl,j=s.getSource(),G=o.useProgram("raster"),Z=o.colorModeForRenderPass(),X=j instanceof ec?[{},_]:o.stencilConfigForOverlap(_),J=X[0],$=X[1],ee=$[$.length-1].overscaledZ,et=!o.options.moving,er=0;er<$.length;er+=1){var en,ei,eo=$[er],es=o.depthModeForSublayer(eo.overscaledZ-ee,1===x.paint.get("raster-opacity")?DepthMode.ReadWrite:DepthMode.ReadOnly,N.LESS),el=s.getTile(eo),eu=o.transform.calculatePosMatrix(eo.toUnwrapped(),et);el.registerFadeDuration(x.paint.get("raster-fade-duration"));var ef=s.findLoadedParent(eo,0),eh=function(o,s,x,_,F){var N=_.paint.get("raster-fade-duration");if(!(N>0))return{opacity:1,mix:0};var j=i.browser.now(),G=(j-o.timeAdded)/N,Z=s?(j-s.timeAdded)/N:-1,X=x.getSource(),J=F.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),$=!s||Math.abs(s.tileID.overscaledZ-J)>Math.abs(o.tileID.overscaledZ-J),ee=$&&o.refreshedUponExpiration?1:i.clamp($?G:1-Z,0,1);return(o.refreshedUponExpiration&&G>=1&&(o.refreshedUponExpiration=!1),s)?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}(el,ef,s,x,o.transform),ed=void 0,ep=void 0,eg="nearest"===x.paint.get("raster-resampling")?N.NEAREST:N.LINEAR;F.activeTexture.set(N.TEXTURE0),el.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(N.TEXTURE1),ef?(ef.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ed=Math.pow(2,ef.tileID.overscaledZ-el.tileID.overscaledZ),ep=[el.tileID.canonical.x*ed%1,el.tileID.canonical.y*ed%1]):el.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);var em={u_matrix:eu,u_tl_parent:ep||[0,0],u_scale_parent:ed||1,u_buffer_scale:1,u_fade_t:eh.mix,u_opacity:eh.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(en=x.paint.get("raster-saturation"))>0?1-1/(1.001-en):-en,u_contrast_factor:(ei=x.paint.get("raster-contrast"))>0?1/(1-ei):1+ei,u_spin_weights:function(i){var o=Math.sin(i*=Math.PI/180),s=Math.cos(i);return[(2*s+1)/3,(-Math.sqrt(3)*o-s+1)/3,(Math.sqrt(3)*o-s+1)/3]}(x.paint.get("raster-hue-rotate"))};j instanceof ec?G.draw(F,N.TRIANGLES,es,StencilMode.disabled,Z,CullFaceMode.disabled,em,x.id,j.boundsBuffer,o.quadTriangleIndexBuffer,j.boundsSegments):G.draw(F,N.TRIANGLES,es,J[eo.overscaledZ],Z,CullFaceMode.disabled,em,x.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments)}},background:function(i,o,s){var x=s.paint.get("background-color"),_=s.paint.get("background-opacity");if(0!==_){var F=i.context,N=F.gl,j=i.transform,G=j.tileSize,Z=s.paint.get("background-pattern");if(!i.isPatternMissing(Z)){var X=!Z&&1===x.a&&1===_&&i.opaquePassEnabledForLayer()?"opaque":"translucent";if(i.renderPass===X){var J=StencilMode.disabled,$=i.depthModeForSublayer(0,"opaque"===X?DepthMode.ReadWrite:DepthMode.ReadOnly),ee=i.colorModeForRenderPass(),et=i.useProgram(Z?"backgroundPattern":"background"),er=j.coveringTiles({tileSize:G});Z&&(F.activeTexture.set(N.TEXTURE0),i.imageManager.bind(i.context));for(var en=s.getCrossfadeParameters(),ei=0;ei<er.length;ei+=1){var eo=er[ei],es=i.transform.calculatePosMatrix(eo.toUnwrapped()),el=Z?backgroundPatternUniformValues(es,_,i,Z,{tileID:eo,tileSize:G},en):{u_matrix:es,u_opacity:_,u_color:x};et.draw(F,N.TRIANGLES,$,J,ee,CullFaceMode.disabled,el,s.id,i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}}}},debug:function(o,s,x){for(var _=0;_<x.length;_++)(function(o,s,x){var _=o.context,F=_.gl,N=x.posMatrix,j=o.useProgram("debug"),G=DepthMode.disabled,Z=StencilMode.disabled,X=o.colorModeForRenderPass(),J="$debug";_.activeTexture.set(F.TEXTURE0),o.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),j.draw(_,F.LINE_STRIP,G,Z,X,CullFaceMode.disabled,debugUniformValues(N,i.Color.red),J,o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var $=s.getTileByID(x.key).latestRawTileData,ee=Math.floor(($&&$.byteLength||0)/1024),et=512/Math.min(s.getTile(x).tileSize,512)*(x.overscaledZ/o.transform.zoom)*.5,er=x.canonical.toString();x.overscaledZ!==x.canonical.z&&(er+=" => "+x.overscaledZ),function(i,o){i.initDebugOverlayCanvas();var s=i.debugOverlayCanvas,x=i.context.gl,_=i.debugOverlayCanvas.getContext("2d");_.clearRect(0,0,s.width,s.height),_.shadowColor="white",_.shadowBlur=2,_.lineWidth=1.5,_.strokeStyle="white",_.textBaseline="top",_.font="bold 36px Open Sans, sans-serif",_.fillText(o,5,5),_.strokeText(o,5,5),i.debugOverlayTexture.update(s),i.debugOverlayTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE)}(o,er+" "+ee+"kb"),j.draw(_,F.TRIANGLES,G,Z,ColorMode.alphaBlended,CullFaceMode.disabled,debugUniformValues(N,i.Color.transparent,et),J,o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)})(o,s,x[_])},custom:function(i,o,s){var x=i.context,_=s.implementation;if("offscreen"===i.renderPass){var F=_.prerender;F&&(i.setCustomLayerDefaults(),x.setColorMode(i.colorModeForRenderPass()),F.call(_,x.gl,i.transform.customLayerMatrix()),x.setDirty(),i.setBaseState())}else if("translucent"===i.renderPass){i.setCustomLayerDefaults(),x.setColorMode(i.colorModeForRenderPass()),x.setStencilMode(StencilMode.disabled);var N="3d"===_.renderingMode?new DepthMode(i.context.gl.LEQUAL,DepthMode.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,DepthMode.ReadOnly);x.setDepthMode(N),_.render(x.gl,i.transform.customLayerMatrix()),x.setDirty(),i.setBaseState(),x.bindFramebuffer.set(null)}}},Painter=function(i,o){this.context=new Context(i),this.transform=o,this._tileTextures={},this.setup(),this.numSublayers=eK.maxUnderzooming+eK.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new CrossTileSymbolIndex,this.gpuTimers={}};Painter.prototype.resize=function(o,s){if(this.width=o*i.browser.devicePixelRatio,this.height=s*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var x=0,_=this.style._order;x<_.length;x+=1){var F=_[x];this.style._layers[F].resize()}},Painter.prototype.setup=function(){var o=this.context,s=new i.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(i.EXTENT,0),s.emplaceBack(0,i.EXTENT),s.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,e8.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var x=new i.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(i.EXTENT,0),x.emplaceBack(0,i.EXTENT),x.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=o.createVertexBuffer(x,e8.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var _=new i.StructArrayLayout4i8;_.emplaceBack(0,0,0,0),_.emplaceBack(i.EXTENT,0,i.EXTENT,0),_.emplaceBack(0,i.EXTENT,0,i.EXTENT),_.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(_,el.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var F=new i.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(F,e8.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var N=new i.StructArrayLayout1ui2;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(N);var j=new i.StructArrayLayout3ui6;j.emplaceBack(0,1,2),j.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(j),this.emptyTexture=new i.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var G=this.context.gl;this.stencilClearMode=new StencilMode({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO)},Painter.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var x=i.create();i.ortho(x,0,this.width,this.height,0,0,1),i.scale(x,x,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,DepthMode.disabled,this.stencilClearMode,ColorMode.disabled,CullFaceMode.disabled,clippingMaskUniformValues(x),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Painter.prototype._renderTileClippingMasks=function(i,o){if(this.currentStencilSource!==i.source&&i.isTileClipped()&&o&&o.length){this.currentStencilSource=i.source;var s=this.context,x=s.gl;this.nextStencilID+o.length>256&&this.clearStencil(),s.setColorMode(ColorMode.disabled),s.setDepthMode(DepthMode.disabled);var _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var F=0;F<o.length;F+=1){var N=o[F],j=this._tileClippingMaskIDs[N.key]=this.nextStencilID++;_.draw(s,x.TRIANGLES,DepthMode.disabled,new StencilMode({func:x.ALWAYS,mask:0},j,255,x.KEEP,x.KEEP,x.REPLACE),ColorMode.disabled,CullFaceMode.disabled,clippingMaskUniformValues(N.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Painter.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var i=this.nextStencilID++,o=this.context.gl;return new StencilMode({func:o.NOTEQUAL,mask:255},i,255,o.KEEP,o.KEEP,o.REPLACE)},Painter.prototype.stencilModeForClipping=function(i){var o=this.context.gl;return new StencilMode({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,o.KEEP,o.KEEP,o.REPLACE)},Painter.prototype.stencilConfigForOverlap=function(i){var o,s=this.context.gl,x=i.sort(function(i,o){return o.overscaledZ-i.overscaledZ}),_=x[x.length-1].overscaledZ,F=x[0].overscaledZ-_+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();for(var N={},j=0;j<F;j++)N[j+_]=new StencilMode({func:s.GEQUAL,mask:255},j+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=F,[N,x]}return[((o={})[_]=StencilMode.disabled,o),x]},Painter.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ColorMode([o.CONSTANT_COLOR,o.ONE],new i.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ColorMode.unblended:ColorMode.alphaBlended},Painter.prototype.depthModeForSublayer=function(i,o,s){if(!this.opaquePassEnabledForLayer())return DepthMode.disabled;var x=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new DepthMode(s||this.context.gl.LEQUAL,o,[x,x])},Painter.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Painter.prototype.render=function(o,s){var x,_,F,N,j,G,Z=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var X=this.style._order,J=this.style.sourceCaches;for(var $ in J){var ee=J[$];ee.used&&ee.prepare(this.context)}var et={},er={},en={};for(var ei in J){var eo=J[ei];et[ei]=eo.getVisibleCoordinates(),er[ei]=et[ei].slice().reverse(),en[ei]=eo.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var es=0;es<X.length;es++){var el=X[es];if(this.style._layers[el].is3D()){this.opaquePassCutoff=es;break}}this.renderPass="offscreen";for(var ec=0;ec<X.length;ec+=1){var eu=X[ec],ef=this.style._layers[eu];if(!(!ef.hasOffscreenPass()||ef.isHidden(this.transform.zoom))){var eh=er[ef.source];("custom"===ef.type||eh.length)&&this.renderLayer(this,J[ef.source],ef,eh)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var ed=this.style._layers[X[this.currentLayer]],ep=J[ed.source],eg=et[ed.source];this._renderTileClippingMasks(ed,eg),this.renderLayer(this,ep,ed,eg)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var em=this.style._layers[X[this.currentLayer]],ey=J[em.source],ev=("symbol"===em.type?en:er)[em.source];this._renderTileClippingMasks(em,et[em.source]),this.renderLayer(this,ey,em,ev)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(i){i.source&&!i.isHidden(Z.transform.zoom)&&(i.source!==(N&&N.id)&&(N=Z.style.sourceCaches[i.source]),(!F||F.getSource().maxzoom<N.getSource().maxzoom)&&(F=N))}),F&&ts.debug(this,F,F.getVisibleCoordinates())),this.options.showPadding&&(j=this.transform.padding,drawHorizontalLine(this,this.transform.height-(j.top||0),3,tr),drawHorizontalLine(this,j.bottom||0,3,tn),drawVerticalLine(this,j.left||0,3,ti),drawVerticalLine(this,this.transform.width-(j.right||0),3,ta),drawDebugSSRect(this,(x=(G=this.transform.centerPoint).x)-1,(_=this.transform.height-G.y)-10,2,20,to),drawDebugSSRect(this,x-10,_-1,20,2,to)),this.context.setDefault()},Painter.prototype.renderLayer=function(i,o,s,x){!s.isHidden(this.transform.zoom)&&("background"===s.type||"custom"===s.type||x.length)&&(this.id=s.id,this.gpuTimingStart(s),ts[s.type](i,o,s,x,this.style.placement.variableOffsets),this.gpuTimingEnd())},Painter.prototype.gpuTimingStart=function(i){if(this.options.gpuTiming){var o=this.context.extTimerQuery,s=this.gpuTimers[i.id];s||(s=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),s.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,s.query)}},Painter.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}},Painter.prototype.collectGpuTimers=function(){var i=this.gpuTimers;return this.gpuTimers={},i},Painter.prototype.queryGpuTimers=function(i){var o={};for(var s in i){var x=i[s],_=this.context.extTimerQuery,F=_.getQueryObjectEXT(x.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(x.query),o[s]=F}return o},Painter.prototype.translatePosMatrix=function(o,s,x,_,F){if(!x[0]&&!x[1])return o;var N=F?"map"===_?this.transform.angle:0:"viewport"===_?-this.transform.angle:0;if(N){var j=Math.sin(N),G=Math.cos(N);x=[x[0]*G-x[1]*j,x[0]*j+x[1]*G]}var Z=[F?x[0]:pixelsToTileUnits(s,x[0],this.transform.zoom),F?x[1]:pixelsToTileUnits(s,x[1],this.transform.zoom),0],X=new Float32Array(16);return i.translate(X,o,Z),X},Painter.prototype.saveTileTexture=function(i){var o=this._tileTextures[i.size[0]];o?o.push(i):this._tileTextures[i.size[0]]=[i]},Painter.prototype.getTileTexture=function(i){var o=this._tileTextures[i];return o&&o.length>0?o.pop():null},Painter.prototype.isPatternMissing=function(i){if(!i)return!1;if(!i.from||!i.to)return!0;var o=this.imageManager.getPattern(i.from.toString()),s=this.imageManager.getPattern(i.to.toString());return!o||!s},Painter.prototype.useProgram=function(i,o){this.cache=this.cache||{};var s=""+i+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[s]||(this.cache[s]=new Program$1(this.context,e9[i],o,te[i],this._showOverdrawInspector)),this.cache[s]},Painter.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Painter.prototype.setBaseState=function(){var i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)},Painter.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var o=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,o.RGBA)}},Painter.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Frustum=function(i,o){this.points=i,this.planes=o};Frustum.fromInvProjectionMatrix=function(o,s,x){var _=Math.pow(2,x),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(s){return i.transformMat4([],s,o)}).map(function(o){return i.scale$1([],o,1/o[3]/s*_)}),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(o){var s=i.sub([],F[o[0]],F[o[1]]),x=i.sub([],F[o[2]],F[o[1]]),_=i.normalize([],i.cross([],s,x)),N=-i.dot(_,F[o[1]]);return _.concat(N)});return new Frustum(F,N)};var Aabb=function(o,s){this.min=o,this.max=s,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};Aabb.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],x=i.clone$2(this.min),_=i.clone$2(this.max),F=0;F<s.length;F++)x[F]=s[F]?this.min[F]:this.center[F],_[F]=s[F]?this.center[F]:this.max[F];return _[2]=this.max[2],new Aabb(x,_)},Aabb.prototype.distanceX=function(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]},Aabb.prototype.distanceY=function(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]},Aabb.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],x=!0,_=0;_<o.planes.length;_++){for(var F=o.planes[_],N=0,j=0;j<s.length;j++)N+=i.dot$1(F,s[j])>=0;if(0===N)return 0;N!==s.length&&(x=!1)}if(x)return 2;for(var G=0;G<3;G++){for(var Z=Number.MAX_VALUE,X=-Number.MAX_VALUE,J=0;J<o.points.length;J++){var $=o.points[J][G]-this.min[G];Z=Math.min(Z,$),X=Math.max(X,$)}if(X<0||Z>this.max[G]-this.min[G])return 0}return 1};var EdgeInsets=function(i,o,s,x){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===x&&(x=0),isNaN(i)||i<0||isNaN(o)||o<0||isNaN(s)||s<0||isNaN(x)||x<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=o,this.left=s,this.right=x};EdgeInsets.prototype.interpolate=function(o,s,x){return null!=s.top&&null!=o.top&&(this.top=i.number(o.top,s.top,x)),null!=s.bottom&&null!=o.bottom&&(this.bottom=i.number(o.bottom,s.bottom,x)),null!=s.left&&null!=o.left&&(this.left=i.number(o.left,s.left,x)),null!=s.right&&null!=o.right&&(this.right=i.number(o.right,s.right,x)),this},EdgeInsets.prototype.getCenter=function(o,s){var x=i.clamp((this.left+o-this.right)/2,0,o),_=i.clamp((this.top+s-this.bottom)/2,0,s);return new i.Point(x,_)},EdgeInsets.prototype.equals=function(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right},EdgeInsets.prototype.clone=function(){return new EdgeInsets(this.top,this.bottom,this.left,this.right)},EdgeInsets.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Transform=function(o,s,x,_,F){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===F||F,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=null==x?0:x,this._maxPitch=null==_?60:_,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new EdgeInsets,this._posMatrixCache={},this._alignedPosMatrixCache={}},tl={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Transform.prototype.clone=function(){var i=new Transform(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i},tl.minZoom.get=function(){return this._minZoom},tl.minZoom.set=function(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))},tl.maxZoom.get=function(){return this._maxZoom},tl.maxZoom.set=function(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))},tl.minPitch.get=function(){return this._minPitch},tl.minPitch.set=function(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))},tl.maxPitch.get=function(){return this._maxPitch},tl.maxPitch.set=function(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))},tl.renderWorldCopies.get=function(){return this._renderWorldCopies},tl.renderWorldCopies.set=function(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i},tl.worldSize.get=function(){return this.tileSize*this.scale},tl.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},tl.size.get=function(){return new i.Point(this.width,this.height)},tl.bearing.get=function(){return-this.angle/Math.PI*180},tl.bearing.set=function(o){var s=-i.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},tl.pitch.get=function(){return this._pitch/Math.PI*180},tl.pitch.set=function(o){var s=i.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},tl.fov.get=function(){return this._fov/Math.PI*180},tl.fov.set=function(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())},tl.zoom.get=function(){return this._zoom},tl.zoom.set=function(i){var o=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this._constrain(),this._calcMatrices())},tl.center.get=function(){return this._center},tl.center.set=function(i){(i.lat!==this._center.lat||i.lng!==this._center.lng)&&(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())},tl.padding.get=function(){return this._edgeInsets.toJSON()},tl.padding.set=function(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())},tl.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Transform.prototype.isPaddingEqual=function(i){return this._edgeInsets.equals(i)},Transform.prototype.interpolatePadding=function(i,o,s){this._unmodified=!1,this._edgeInsets.interpolate(i,o,s),this._constrain(),this._calcMatrices()},Transform.prototype.coveringZoomLevel=function(i){return Math.max(0,(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize)))},Transform.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new i.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var x=this.pointCoordinate(new i.Point(0,0)),_=this.pointCoordinate(new i.Point(this.width,0)),F=this.pointCoordinate(new i.Point(this.width,this.height)),N=this.pointCoordinate(new i.Point(0,this.height)),j=Math.floor(Math.min(x.x,_.x,F.x,N.x)),G=Math.floor(Math.max(x.x,_.x,F.x,N.x)),Z=j-1;Z<=G+1;Z++)0!==Z&&s.push(new i.UnwrappedTileID(Z,o));return s},Transform.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),x=s;if(void 0!==o.minzoom&&s<o.minzoom)return[];void 0!==o.maxzoom&&s>o.maxzoom&&(s=o.maxzoom);var _=i.MercatorCoordinate.fromLngLat(this.center),F=Math.pow(2,s),N=[F*_.x,F*_.y,0],j=Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),G=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(G=s);var newRootTile=function(i){return{aabb:new Aabb([i*F,0,0],[(i+1)*F,F,0]),zoom:0,x:0,y:0,wrap:i,fullyVisible:!1}},Z=[],X=[],J=s,$=o.reparseOverscaled?x:s;if(this._renderWorldCopies)for(var ee=1;ee<=3;ee++)Z.push(newRootTile(-ee)),Z.push(newRootTile(ee));for(Z.push(newRootTile(0));Z.length>0;){var et=Z.pop(),er=et.x,en=et.y,ei=et.fullyVisible;if(!ei){var eo=et.aabb.intersects(j);if(0===eo)continue;ei=2===eo}var es=Math.max(Math.abs(et.aabb.distanceX(N)),Math.abs(et.aabb.distanceY(N))),el=3+(1<<J-et.zoom)-2;if(et.zoom===J||es>el&&et.zoom>=G){X.push({tileID:new i.OverscaledTileID(et.zoom===J?$:et.zoom,et.wrap,et.zoom,er,en),distanceSq:i.sqrLen([N[0]-.5-er,N[1]-.5-en])});continue}for(var ec=0;ec<4;ec++){var eu=(er<<1)+ec%2,ef=(en<<1)+(ec>>1);Z.push({aabb:et.aabb.quadrant(ec),zoom:et.zoom+1,x:eu,y:ef,wrap:et.wrap,fullyVisible:ei})}}return X.sort(function(i,o){return i.distanceSq-o.distanceSq}).map(function(i){return i.tileID})},Transform.prototype.resize=function(i,o){this.width=i,this.height=o,this.pixelsToGLUnits=[2/i,-2/o],this._constrain(),this._calcMatrices()},tl.unmodified.get=function(){return this._unmodified},Transform.prototype.zoomScale=function(i){return Math.pow(2,i)},Transform.prototype.scaleZoom=function(i){return Math.log(i)/Math.LN2},Transform.prototype.project=function(o){var s=i.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(o.lng)*this.worldSize,i.mercatorYfromLat(s)*this.worldSize)},Transform.prototype.unproject=function(o){return new i.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},tl.point.get=function(){return this.project(this.center)},Transform.prototype.setLocationAtPoint=function(o,s){var x=this.pointCoordinate(s),_=this.pointCoordinate(this.centerPoint),F=this.locationCoordinate(o),N=new i.MercatorCoordinate(F.x-(x.x-_.x),F.y-(x.y-_.y));this.center=this.coordinateLocation(N),this._renderWorldCopies&&(this.center=this.center.wrap())},Transform.prototype.locationPoint=function(i){return this.coordinatePoint(this.locationCoordinate(i))},Transform.prototype.pointLocation=function(i){return this.coordinateLocation(this.pointCoordinate(i))},Transform.prototype.locationCoordinate=function(o){return i.MercatorCoordinate.fromLngLat(o)},Transform.prototype.coordinateLocation=function(i){return i.toLngLat()},Transform.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],x=[o.x,o.y,1,1];i.transformMat4(s,s,this.pixelMatrixInverse),i.transformMat4(x,x,this.pixelMatrixInverse);var _=s[3],F=x[3],N=s[0]/_,j=x[0]/F,G=s[1]/_,Z=x[1]/F,X=s[2]/_,J=x[2]/F,$=X===J?0:(0-X)/(J-X);return new i.MercatorCoordinate(i.number(N,j,$)/this.worldSize,i.number(G,Z,$)/this.worldSize)},Transform.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return i.transformMat4(s,s,this.pixelMatrix),new i.Point(s[0]/s[3],s[1]/s[3])},Transform.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},Transform.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Transform.prototype.setMaxBounds=function(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Transform.prototype.calculatePosMatrix=function(o,s){void 0===s&&(s=!1);var x=o.key,_=s?this._alignedPosMatrixCache:this._posMatrixCache;if(_[x])return _[x];var F=o.canonical,N=this.worldSize/this.zoomScale(F.z),j=F.x+Math.pow(2,F.z)*o.wrap,G=i.identity(new Float64Array(16));return i.translate(G,G,[j*N,F.y*N,0]),i.scale(G,G,[N/i.EXTENT,N/i.EXTENT,1]),i.multiply(G,s?this.alignedProjMatrix:this.projMatrix,G),_[x]=new Float32Array(G),_[x]},Transform.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Transform.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,x,_,F=-90,N=90,j=-180,G=180,Z=this.size,X=this._unmodified;if(this.latRange){var J=this.latRange;F=i.mercatorYfromLat(J[1])*this.worldSize,o=(N=i.mercatorYfromLat(J[0])*this.worldSize)-F<Z.y?Z.y/(N-F):0}if(this.lngRange){var $=this.lngRange;j=i.mercatorXfromLng($[0])*this.worldSize,s=(G=i.mercatorXfromLng($[1])*this.worldSize)-j<Z.x?Z.x/(G-j):0}var ee=this.point,et=Math.max(s||0,o||0);if(et){this.center=this.unproject(new i.Point(s?(G+j)/2:ee.x,o?(N+F)/2:ee.y)),this.zoom+=this.scaleZoom(et),this._unmodified=X,this._constraining=!1;return}if(this.latRange){var er=ee.y,en=Z.y/2;er-en<F&&(_=F+en),er+en>N&&(_=N-en)}if(this.lngRange){var ei=ee.x,eo=Z.x/2;ei-eo<j&&(x=j+eo),ei+eo>G&&(x=G-eo)}(void 0!==x||void 0!==_)&&(this.center=this.unproject(new i.Point(void 0!==x?x:ee.x,void 0!==_?_:ee.y))),this._unmodified=X,this._constraining=!1}},Transform.prototype._calcMatrices=function(){if(this.height){var o=this._fov/2,s=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(o)*this.height;var x=Math.PI/2+this._pitch,_=this._fov*(.5+s.y/this.height),F=Math.sin(_)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-x-_,.01,Math.PI-.01)),N=this.point,j=N.x,G=N.y,Z=Math.cos(Math.PI/2-this._pitch)*F+this.cameraToCenterDistance,X=this.height/50,J=new Float64Array(16);i.perspective(J,this._fov,this.width/this.height,X,1.01*Z),J[8]=-(2*s.x)/this.width,J[9]=2*s.y/this.height,i.scale(J,J,[1,-1,1]),i.translate(J,J,[0,0,-this.cameraToCenterDistance]),i.rotateX(J,J,this._pitch),i.rotateZ(J,J,this.angle),i.translate(J,J,[-j,-G,0]),this.mercatorMatrix=i.scale([],J,[this.worldSize,this.worldSize,this.worldSize]),i.scale(J,J,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=J,this.invProjMatrix=i.invert([],this.projMatrix);var $=this.width%2/2,ee=this.height%2/2,et=Math.cos(this.angle),er=Math.sin(this.angle),en=j-Math.round(j)+et*$+er*ee,ei=G-Math.round(G)+et*ee+er*$,eo=new Float64Array(J);if(i.translate(eo,eo,[en>.5?en-1:en,ei>.5?ei-1:ei,0]),this.alignedProjMatrix=eo,J=i.create(),i.scale(J,J,[this.width/2,-this.height/2,1]),i.translate(J,J,[1,-1,0]),this.labelPlaneMatrix=J,J=i.create(),i.scale(J,J,[1,-1,1]),i.translate(J,J,[-1,-1,0]),i.scale(J,J,[2/this.width,2/this.height,1]),this.glCoordMatrix=J,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(J=i.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=J,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Transform.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new i.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return i.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Transform.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,o))},Transform.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(1===o.length)return[o[0],s];for(var x=s.x,_=s.y,F=s.x,N=s.y,j=0;j<o.length;j+=1){var G=o[j];x=Math.min(x,G.x),_=Math.min(_,G.y),F=Math.max(F,G.x),N=Math.max(N,G.y)}return[new i.Point(x,_),new i.Point(F,_),new i.Point(F,N),new i.Point(x,N),new i.Point(x,_)]},Object.defineProperties(Transform.prototype,tl);var Hash=function(o){var s,x,_,F;this._hashName=o&&encodeURIComponent(o),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(s=this._updateHashUnthrottled.bind(this),x=!1,_=null,F=function(){_=null,x&&(s(),_=setTimeout(F,300),x=!1)},function(){return x=!0,_||F(),_})};Hash.prototype.addTo=function(o){return this._map=o,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Hash.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Hash.prototype.getHashString=function(o){var s=this._map.getCenter(),x=Math.round(100*this._map.getZoom())/100,_=Math.pow(10,Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10)),F=Math.round(s.lng*_)/_,N=Math.round(s.lat*_)/_,j=this._map.getBearing(),G=this._map.getPitch(),Z="";if(o?Z+="/"+F+"/"+N+"/"+x:Z+=x+"/"+N+"/"+F,(j||G)&&(Z+="/"+Math.round(10*j)/10),G&&(Z+="/"+Math.round(G)),this._hashName){var X=this._hashName,J=!1,$=i.window.location.hash.slice(1).split("&").map(function(i){var o=i.split("=")[0];return o===X?(J=!0,o+"="+Z):i}).filter(function(i){return i});return J||$.push(X+"="+Z),"#"+$.join("&")}return"#"+Z},Hash.prototype._getCurrentHash=function(){var o,s=this,x=i.window.location.hash.replace("#","");return this._hashName?(x.split("&").map(function(i){return i.split("=")}).forEach(function(i){i[0]===s._hashName&&(o=i)}),(o&&o[1]||"").split("/")):x.split("/")},Hash.prototype._onHashChange=function(){var i=this._getCurrentHash();if(i.length>=3&&!i.some(function(i){return isNaN(i)})){var o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:o,pitch:+(i[4]||0)}),!0}return!1},Hash.prototype._updateHashUnthrottled=function(){var o=this.getHashString();try{i.window.history.replaceState(i.window.history.state,"",o)}catch(i){}};var tc={linearity:.3,easing:i.bezier(0,0,.3,1)},tu=i.extend({deceleration:2500,maxSpeed:1400},tc),tf=i.extend({deceleration:20,maxSpeed:1400},tc),th=i.extend({deceleration:1e3,maxSpeed:360},tc),td=i.extend({deceleration:1e3,maxSpeed:90},tc),HandlerInertia=function(i){this._map=i,this.clear()};function extendDuration(i,o){(!i.duration||i.duration<o.duration)&&(i.duration=o.duration,i.easing=o.easing)}function calculateEasing(o,s,x){var _=x.maxSpeed,F=x.linearity,N=x.deceleration,j=i.clamp(o*F/(s/1e3),-_,_),G=Math.abs(j)/(N*F);return{easing:x.easing,duration:1e3*G,amount:j*(G/2)}}HandlerInertia.prototype.clear=function(){this._inertiaBuffer=[]},HandlerInertia.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:o})},HandlerInertia.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=i.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},HandlerInertia.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},x=0,_=this._inertiaBuffer;x<_.length;x+=1){var F=_[x].settings;s.zoom+=F.zoomDelta||0,s.bearing+=F.bearingDelta||0,s.pitch+=F.pitchDelta||0,F.panDelta&&s.pan._add(F.panDelta),F.around&&(s.around=F.around),F.pinchAround&&(s.pinchAround=F.pinchAround)}var N=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,j={};if(s.pan.mag()){var G=calculateEasing(s.pan.mag(),N,i.extend({},tu,o||{}));j.offset=s.pan.mult(G.amount/s.pan.mag()),j.center=this._map.transform.center,extendDuration(j,G)}if(s.zoom){var Z=calculateEasing(s.zoom,N,tf);j.zoom=this._map.transform.zoom+Z.amount,extendDuration(j,Z)}if(s.bearing){var X=calculateEasing(s.bearing,N,th);j.bearing=this._map.transform.bearing+i.clamp(X.amount,-179,179),extendDuration(j,X)}if(s.pitch){var J=calculateEasing(s.pitch,N,td);j.pitch=this._map.transform.pitch+J.amount,extendDuration(j,J)}if(j.zoom||j.bearing){var $=void 0===s.pinchAround?s.around:s.pinchAround;j.around=$?this._map.unproject($):this._map.getCenter()}return this.clear(),i.extend(j,{noMoveStart:!0})}};var tp=function(o){function MapMouseEvent(s,x,_,F){void 0===F&&(F={});var j=N.mousePos(x.getCanvasContainer(),_),G=x.unproject(j);o.call(this,s,i.extend({point:j,lngLat:G,originalEvent:_},F)),this._defaultPrevented=!1,this.target=x}o&&(MapMouseEvent.__proto__=o),MapMouseEvent.prototype=Object.create(o&&o.prototype),MapMouseEvent.prototype.constructor=MapMouseEvent;var s={defaultPrevented:{configurable:!0}};return MapMouseEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapMouseEvent.prototype,s),MapMouseEvent}(i.Event),tg=function(o){function MapTouchEvent(s,x,_){var F="touchend"===s?_.changedTouches:_.touches,j=N.touchPos(x.getCanvasContainer(),F),G=j.map(function(i){return x.unproject(i)}),Z=j.reduce(function(i,o,s,x){return i.add(o.div(x.length))},new i.Point(0,0)),X=x.unproject(Z);o.call(this,s,{points:j,point:Z,lngLats:G,lngLat:X,originalEvent:_}),this._defaultPrevented=!1}o&&(MapTouchEvent.__proto__=o),MapTouchEvent.prototype=Object.create(o&&o.prototype),MapTouchEvent.prototype.constructor=MapTouchEvent;var s={defaultPrevented:{configurable:!0}};return MapTouchEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapTouchEvent.prototype,s),MapTouchEvent}(i.Event),tm=function(i){function MapWheelEvent(o,s,x){i.call(this,o,{originalEvent:x}),this._defaultPrevented=!1}i&&(MapWheelEvent.__proto__=i),MapWheelEvent.prototype=Object.create(i&&i.prototype),MapWheelEvent.prototype.constructor=MapWheelEvent;var o={defaultPrevented:{configurable:!0}};return MapWheelEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapWheelEvent.prototype,o),MapWheelEvent}(i.Event),MapEventHandler=function(i,o){this._map=i,this._clickTolerance=o.clickTolerance};MapEventHandler.prototype.reset=function(){delete this._mousedownPos},MapEventHandler.prototype.wheel=function(i){return this._firePreventable(new tm(i.type,this._map,i))},MapEventHandler.prototype.mousedown=function(i,o){return this._mousedownPos=o,this._firePreventable(new tp(i.type,this._map,i))},MapEventHandler.prototype.mouseup=function(i){this._map.fire(new tp(i.type,this._map,i))},MapEventHandler.prototype.click=function(i,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new tp(i.type,this._map,i))},MapEventHandler.prototype.dblclick=function(i){return this._firePreventable(new tp(i.type,this._map,i))},MapEventHandler.prototype.mouseover=function(i){this._map.fire(new tp(i.type,this._map,i))},MapEventHandler.prototype.mouseout=function(i){this._map.fire(new tp(i.type,this._map,i))},MapEventHandler.prototype.touchstart=function(i){return this._firePreventable(new tg(i.type,this._map,i))},MapEventHandler.prototype.touchmove=function(i){this._map.fire(new tg(i.type,this._map,i))},MapEventHandler.prototype.touchend=function(i){this._map.fire(new tg(i.type,this._map,i))},MapEventHandler.prototype.touchcancel=function(i){this._map.fire(new tg(i.type,this._map,i))},MapEventHandler.prototype._firePreventable=function(i){if(this._map.fire(i),i.defaultPrevented)return{}},MapEventHandler.prototype.isEnabled=function(){return!0},MapEventHandler.prototype.isActive=function(){return!1},MapEventHandler.prototype.enable=function(){},MapEventHandler.prototype.disable=function(){};var BlockableMapEventHandler=function(i){this._map=i};BlockableMapEventHandler.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},BlockableMapEventHandler.prototype.mousemove=function(i){this._map.fire(new tp(i.type,this._map,i))},BlockableMapEventHandler.prototype.mousedown=function(){this._delayContextMenu=!0},BlockableMapEventHandler.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new tp("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},BlockableMapEventHandler.prototype.contextmenu=function(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new tp(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()},BlockableMapEventHandler.prototype.isEnabled=function(){return!0},BlockableMapEventHandler.prototype.isActive=function(){return!1},BlockableMapEventHandler.prototype.enable=function(){},BlockableMapEventHandler.prototype.disable=function(){};var BoxZoomHandler=function(i,o){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=o.clickTolerance||1};function indexTouches(i,o){for(var s={},x=0;x<i.length;x++)s[i[x].identifier]=o[x];return s}BoxZoomHandler.prototype.isEnabled=function(){return!!this._enabled},BoxZoomHandler.prototype.isActive=function(){return!!this._active},BoxZoomHandler.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},BoxZoomHandler.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},BoxZoomHandler.prototype.mousedown=function(i,o){this.isEnabled()&&i.shiftKey&&0===i.button&&(N.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)},BoxZoomHandler.prototype.mousemoveWindow=function(i,o){if(this._active&&!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var s=this._startPos;this._lastPos=o,this._box||(this._box=N.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));var x=Math.min(s.x,o.x),_=Math.max(s.x,o.x),F=Math.min(s.y,o.y),j=Math.max(s.y,o.y);N.setTransform(this._box,"translate("+x+"px,"+F+"px)"),this._box.style.width=_-x+"px",this._box.style.height=j-F+"px"}},BoxZoomHandler.prototype.mouseupWindow=function(o,s){var x=this;if(this._active&&0===o.button){var _=this._startPos;if(this.reset(),N.suppressClick(),_.x!==s.x||_.y!==s.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(i){return i.fitScreenCoordinates(_,s,x._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},BoxZoomHandler.prototype.keydown=function(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))},BoxZoomHandler.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos},BoxZoomHandler.prototype._fireEvent=function(o,s){return this._map.fire(new i.Event(o,{originalEvent:s}))};var SingleTapRecognizer=function(i){this.reset(),this.numTouches=i.numTouches};SingleTapRecognizer.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},SingleTapRecognizer.prototype.touchstart=function(o,s,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=o.timeStamp),x.length===this.numTouches&&(this.centroid=function(o){for(var s=new i.Point(0,0),x=0;x<o.length;x+=1){var _=o[x];s._add(_)}return s.div(o.length)}(s),this.touches=indexTouches(x,s)))},SingleTapRecognizer.prototype.touchmove=function(i,o,s){if(!this.aborted&&this.centroid){var x=indexTouches(s,o);for(var _ in this.touches){var F=this.touches[_],N=x[_];(!N||N.dist(F)>30)&&(this.aborted=!0)}}},SingleTapRecognizer.prototype.touchend=function(i,o,s){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===s.length){var x=!this.aborted&&this.centroid;if(this.reset(),x)return x}};var TapRecognizer=function(i){this.singleTap=new SingleTapRecognizer(i),this.numTaps=i.numTaps,this.reset()};TapRecognizer.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},TapRecognizer.prototype.touchstart=function(i,o,s){this.singleTap.touchstart(i,o,s)},TapRecognizer.prototype.touchmove=function(i,o,s){this.singleTap.touchmove(i,o,s)},TapRecognizer.prototype.touchend=function(i,o,s){var x=this.singleTap.touchend(i,o,s);if(x){var _=i.timeStamp-this.lastTime<500,F=!this.lastTap||30>this.lastTap.dist(x);if(_&&F||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}};var TapZoomHandler=function(){this._zoomIn=new TapRecognizer({numTouches:1,numTaps:2}),this._zoomOut=new TapRecognizer({numTouches:2,numTaps:1}),this.reset()};TapZoomHandler.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},TapZoomHandler.prototype.touchstart=function(i,o,s){this._zoomIn.touchstart(i,o,s),this._zoomOut.touchstart(i,o,s)},TapZoomHandler.prototype.touchmove=function(i,o,s){this._zoomIn.touchmove(i,o,s),this._zoomOut.touchmove(i,o,s)},TapZoomHandler.prototype.touchend=function(i,o,s){var x=this,_=this._zoomIn.touchend(i,o,s),F=this._zoomOut.touchend(i,o,s);return _?(this._active=!0,i.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(o){return o.easeTo({duration:300,zoom:o.getZoom()+1,around:o.unproject(_)},{originalEvent:i})}}):F?(this._active=!0,i.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(o){return o.easeTo({duration:300,zoom:o.getZoom()-1,around:o.unproject(F)},{originalEvent:i})}}):void 0},TapZoomHandler.prototype.touchcancel=function(){this.reset()},TapZoomHandler.prototype.enable=function(){this._enabled=!0},TapZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TapZoomHandler.prototype.isEnabled=function(){return this._enabled},TapZoomHandler.prototype.isActive=function(){return this._active};var MouseHandler=function(i){this.reset(),this._clickTolerance=i.clickTolerance||1};MouseHandler.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},MouseHandler.prototype._correctButton=function(i,o){return!1},MouseHandler.prototype._move=function(i,o){return{}},MouseHandler.prototype.mousedown=function(i,o){if(!this._lastPoint){var s=N.mouseButton(i);this._correctButton(i,s)&&(this._lastPoint=o,this._eventButton=s)}},MouseHandler.prototype.mousemoveWindow=function(i,o){var s=this._lastPoint;if(s&&(i.preventDefault(),!(!this._moved&&o.dist(s)<this._clickTolerance)))return this._moved=!0,this._lastPoint=o,this._move(s,o)},MouseHandler.prototype.mouseupWindow=function(i){N.mouseButton(i)===this._eventButton&&(this._moved&&N.suppressClick(),this.reset())},MouseHandler.prototype.enable=function(){this._enabled=!0},MouseHandler.prototype.disable=function(){this._enabled=!1,this.reset()},MouseHandler.prototype.isEnabled=function(){return this._enabled},MouseHandler.prototype.isActive=function(){return this._active};var ty=function(i){function MousePanHandler(){i.apply(this,arguments)}return i&&(MousePanHandler.__proto__=i),MousePanHandler.prototype=Object.create(i&&i.prototype),MousePanHandler.prototype.constructor=MousePanHandler,MousePanHandler.prototype.mousedown=function(o,s){i.prototype.mousedown.call(this,o,s),this._lastPoint&&(this._active=!0)},MousePanHandler.prototype._correctButton=function(i,o){return 0===o&&!i.ctrlKey},MousePanHandler.prototype._move=function(i,o){return{around:o,panDelta:o.sub(i)}},MousePanHandler}(MouseHandler),tv=function(i){function MouseRotateHandler(){i.apply(this,arguments)}return i&&(MouseRotateHandler.__proto__=i),MouseRotateHandler.prototype=Object.create(i&&i.prototype),MouseRotateHandler.prototype.constructor=MouseRotateHandler,MouseRotateHandler.prototype._correctButton=function(i,o){return 0===o&&i.ctrlKey||2===o},MouseRotateHandler.prototype._move=function(i,o){var s=(o.x-i.x)*.8;if(s)return this._active=!0,{bearingDelta:s}},MouseRotateHandler.prototype.contextmenu=function(i){i.preventDefault()},MouseRotateHandler}(MouseHandler),tx=function(i){function MousePitchHandler(){i.apply(this,arguments)}return i&&(MousePitchHandler.__proto__=i),MousePitchHandler.prototype=Object.create(i&&i.prototype),MousePitchHandler.prototype.constructor=MousePitchHandler,MousePitchHandler.prototype._correctButton=function(i,o){return 0===o&&i.ctrlKey||2===o},MousePitchHandler.prototype._move=function(i,o){var s=-((o.y-i.y)*.5);if(s)return this._active=!0,{pitchDelta:s}},MousePitchHandler.prototype.contextmenu=function(i){i.preventDefault()},MousePitchHandler}(MouseHandler),TouchPanHandler=function(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()};TouchPanHandler.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},TouchPanHandler.prototype.touchstart=function(i,o,s){return this._calculateTransform(i,o,s)},TouchPanHandler.prototype.touchmove=function(i,o,s){if(this._active)return i.preventDefault(),this._calculateTransform(i,o,s)},TouchPanHandler.prototype.touchend=function(i,o,s){this._calculateTransform(i,o,s),this._active&&s.length<this._minTouches&&this.reset()},TouchPanHandler.prototype.touchcancel=function(){this.reset()},TouchPanHandler.prototype._calculateTransform=function(o,s,x){x.length>0&&(this._active=!0);var _=indexTouches(x,s),F=new i.Point(0,0),N=new i.Point(0,0),j=0;for(var G in _){var Z=_[G],X=this._touches[G];X&&(F._add(Z),N._add(Z.sub(X)),j++,_[G]=Z)}if(this._touches=_,!(j<this._minTouches)&&N.mag()){var J=N.div(j);if(this._sum._add(J),!(this._sum.mag()<this._clickTolerance))return{around:F.div(j),panDelta:J}}},TouchPanHandler.prototype.enable=function(){this._enabled=!0},TouchPanHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TouchPanHandler.prototype.isEnabled=function(){return this._enabled},TouchPanHandler.prototype.isActive=function(){return this._active};var TwoTouchHandler=function(){this.reset()};function getTouchById(i,o,s){for(var x=0;x<i.length;x++)if(i[x].identifier===s)return o[x]}function getZoomDelta(i,o){return Math.log(i/o)/Math.LN2}TwoTouchHandler.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},TwoTouchHandler.prototype._start=function(i){},TwoTouchHandler.prototype._move=function(i,o,s){return{}},TwoTouchHandler.prototype.touchstart=function(i,o,s){this._firstTwoTouches||s.length<2||(this._firstTwoTouches=[s[0].identifier,s[1].identifier],this._start([o[0],o[1]]))},TwoTouchHandler.prototype.touchmove=function(i,o,s){if(this._firstTwoTouches){i.preventDefault();var x=this._firstTwoTouches,_=x[0],F=x[1],N=getTouchById(s,o,_),j=getTouchById(s,o,F);if(N&&j){var G=this._aroundCenter?null:N.add(j).div(2);return this._move([N,j],G,i)}}},TwoTouchHandler.prototype.touchend=function(i,o,s){if(this._firstTwoTouches){var x=this._firstTwoTouches,_=x[0],F=x[1],j=getTouchById(s,o,_),G=getTouchById(s,o,F);j&&G||(this._active&&N.suppressClick(),this.reset())}},TwoTouchHandler.prototype.touchcancel=function(){this.reset()},TwoTouchHandler.prototype.enable=function(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around},TwoTouchHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TwoTouchHandler.prototype.isEnabled=function(){return this._enabled},TwoTouchHandler.prototype.isActive=function(){return this._active};var tb=function(i){function TouchZoomHandler(){i.apply(this,arguments)}return i&&(TouchZoomHandler.__proto__=i),TouchZoomHandler.prototype=Object.create(i&&i.prototype),TouchZoomHandler.prototype.constructor=TouchZoomHandler,TouchZoomHandler.prototype.reset=function(){i.prototype.reset.call(this),delete this._distance,delete this._startDistance},TouchZoomHandler.prototype._start=function(i){this._startDistance=this._distance=i[0].dist(i[1])},TouchZoomHandler.prototype._move=function(i,o){var s=this._distance;if(this._distance=i[0].dist(i[1]),!(!this._active&&.1>Math.abs(getZoomDelta(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:getZoomDelta(this._distance,s),pinchAround:o}},TouchZoomHandler}(TwoTouchHandler);function getBearingDelta(i,o){return 180*i.angleWith(o)/Math.PI}var t_=function(i){function TouchRotateHandler(){i.apply(this,arguments)}return i&&(TouchRotateHandler.__proto__=i),TouchRotateHandler.prototype=Object.create(i&&i.prototype),TouchRotateHandler.prototype.constructor=TouchRotateHandler,TouchRotateHandler.prototype.reset=function(){i.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},TouchRotateHandler.prototype._start=function(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])},TouchRotateHandler.prototype._move=function(i,o){var s=this._vector;if(this._vector=i[0].sub(i[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:getBearingDelta(this._vector,s),pinchAround:o}},TouchRotateHandler.prototype._isBelowThreshold=function(i){this._minDiameter=Math.min(this._minDiameter,i.mag());var o=Math.PI*this._minDiameter;return Math.abs(getBearingDelta(i,this._startVector))<25/o*360},TouchRotateHandler}(TwoTouchHandler);function isVertical(i){return Math.abs(i.y)>Math.abs(i.x)}var tw=function(i){function TouchPitchHandler(){i.apply(this,arguments)}return i&&(TouchPitchHandler.__proto__=i),TouchPitchHandler.prototype=Object.create(i&&i.prototype),TouchPitchHandler.prototype.constructor=TouchPitchHandler,TouchPitchHandler.prototype.reset=function(){i.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},TouchPitchHandler.prototype._start=function(i){this._lastPoints=i,isVertical(i[0].sub(i[1]))&&(this._valid=!1)},TouchPitchHandler.prototype._move=function(i,o,s){var x=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(x,_,s.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:-.5*((x.y+_.y)/2)}},TouchPitchHandler.prototype.gestureBeginsVertically=function(i,o,s){if(void 0!==this._valid)return this._valid;var x=i.mag()>=2,_=o.mag()>=2;if(x||_){if(!x||!_){if(void 0===this._firstMove&&(this._firstMove=s),s-this._firstMove<100)return;return!1}var F=i.y>0==o.y>0;return isVertical(i)&&isVertical(o)&&F}},TouchPitchHandler}(TwoTouchHandler),KeyboardHandler=function(){this._panStep=100,this._bearingStep=15,this._pitchStep=10};function easeOut(i){return i*(2-i)}KeyboardHandler.prototype.reset=function(){this._active=!1},KeyboardHandler.prototype.keydown=function(i){var o=this;if(!i.altKey&&!i.ctrlKey&&!i.metaKey){var s=0,x=0,_=0,F=0,N=0;switch(i.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:i.shiftKey?x=-1:(i.preventDefault(),F=-1);break;case 39:i.shiftKey?x=1:(i.preventDefault(),F=1);break;case 38:i.shiftKey?_=1:(i.preventDefault(),N=-1);break;case 40:i.shiftKey?_=-1:(i.preventDefault(),N=1);break;default:return}return{cameraAnimation:function(j){var G=j.getZoom();j.easeTo({duration:300,easeId:"keyboardHandler",easing:easeOut,zoom:s?Math.round(G)+s*(i.shiftKey?2:1):G,bearing:j.getBearing()+x*o._bearingStep,pitch:j.getPitch()+_*o._pitchStep,offset:[-F*o._panStep,-N*o._panStep],center:j.getCenter()},{originalEvent:i})}}}},KeyboardHandler.prototype.enable=function(){this._enabled=!0},KeyboardHandler.prototype.disable=function(){this._enabled=!1,this.reset()},KeyboardHandler.prototype.isEnabled=function(){return this._enabled},KeyboardHandler.prototype.isActive=function(){return this._active};var tT=1/450,ScrollZoomHandler=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=tT,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ScrollZoomHandler.prototype.setZoomRate=function(i){this._defaultZoomRate=i},ScrollZoomHandler.prototype.setWheelZoomRate=function(i){this._wheelZoomRate=i},ScrollZoomHandler.prototype.isEnabled=function(){return!!this._enabled},ScrollZoomHandler.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ScrollZoomHandler.prototype.isZooming=function(){return!!this._zooming},ScrollZoomHandler.prototype.enable=function(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)},ScrollZoomHandler.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ScrollZoomHandler.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,x=i.browser.now(),_=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,0!==s&&s%4.000244140625==0?this._type="wheel":0!==s&&4>Math.abs(s)?this._type="trackpad":_>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):!this._type&&(this._type=200>Math.abs(_*s)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},ScrollZoomHandler.prototype._onTimeout=function(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)},ScrollZoomHandler.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=N.mousePos(this._el,o);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ScrollZoomHandler.prototype.renderFrame=function(){return this._onScrollFrame()},ScrollZoomHandler.prototype._onScrollFrame=function(){var o,s=this;if(this._frameId&&(this._frameId=null,this.isActive())){var x=this._map.transform;if(0!==this._delta){var _="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,F=2/(1+Math.exp(-Math.abs(this._delta*_)));this._delta<0&&0!==F&&(F=1/F);var N="number"==typeof this._targetZoom?x.zoomScale(this._targetZoom):x.scale;this._targetZoom=Math.min(x.maxZoom,Math.max(x.minZoom,x.scaleZoom(N*F))),"wheel"===this._type&&(this._startZoom=x.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var j="number"==typeof this._targetZoom?this._targetZoom:x.zoom,G=this._startZoom,Z=this._easing,X=!1;if("wheel"===this._type&&G&&Z){var J=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),$=Z(J);o=i.number(G,j,$),J<1?this._frameId||(this._frameId=!0):X=!0}else o=j,X=!0;return this._active=!0,X&&(this._active=!1,this._finishTimeout=setTimeout(function(){s._zooming=!1,s._handler._triggerRenderFrame(),delete s._targetZoom,delete s._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!X,zoomDelta:o-x.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ScrollZoomHandler.prototype._smoothOutEasing=function(o){var s=i.ease;if(this._prevEase){var x=this._prevEase,_=(i.browser.now()-x.start)/x.duration,F=x.easing(_+.01)-x.easing(_),N=.27/Math.sqrt(F*F+1e-4)*.01,j=Math.sqrt(.0729-N*N);s=i.bezier(N,j,.25,1)}return this._prevEase={start:i.browser.now(),duration:o,easing:s},s},ScrollZoomHandler.prototype.reset=function(){this._active=!1};var DoubleClickZoomHandler=function(i,o){this._clickZoom=i,this._tapZoom=o};DoubleClickZoomHandler.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},DoubleClickZoomHandler.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},DoubleClickZoomHandler.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},DoubleClickZoomHandler.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ClickZoomHandler=function(){this.reset()};ClickZoomHandler.prototype.reset=function(){this._active=!1},ClickZoomHandler.prototype.dblclick=function(i,o){return i.preventDefault(),{cameraAnimation:function(s){s.easeTo({duration:300,zoom:s.getZoom()+(i.shiftKey?-1:1),around:s.unproject(o)},{originalEvent:i})}}},ClickZoomHandler.prototype.enable=function(){this._enabled=!0},ClickZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},ClickZoomHandler.prototype.isEnabled=function(){return this._enabled},ClickZoomHandler.prototype.isActive=function(){return this._active};var TapDragZoomHandler=function(){this._tap=new TapRecognizer({numTouches:1,numTaps:1}),this.reset()};TapDragZoomHandler.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},TapDragZoomHandler.prototype.touchstart=function(i,o,s){!this._swipePoint&&(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?s.length>0&&(this._swipePoint=o[0],this._swipeTouch=s[0].identifier):this._tap.touchstart(i,o,s))},TapDragZoomHandler.prototype.touchmove=function(i,o,s){if(this._tapTime){if(this._swipePoint){if(s[0].identifier!==this._swipeTouch)return;var x=o[0],_=x.y-this._swipePoint.y;return this._swipePoint=x,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,o,s)},TapDragZoomHandler.prototype.touchend=function(i,o,s){this._tapTime?this._swipePoint&&0===s.length&&this.reset():this._tap.touchend(i,o,s)&&(this._tapTime=i.timeStamp)},TapDragZoomHandler.prototype.touchcancel=function(){this.reset()},TapDragZoomHandler.prototype.enable=function(){this._enabled=!0},TapDragZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TapDragZoomHandler.prototype.isEnabled=function(){return this._enabled},TapDragZoomHandler.prototype.isActive=function(){return this._active};var DragPanHandler=function(i,o,s){this._el=i,this._mousePan=o,this._touchPan=s};DragPanHandler.prototype.enable=function(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},DragPanHandler.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},DragPanHandler.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},DragPanHandler.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var DragRotateHandler=function(i,o,s){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=o,this._mousePitch=s};DragRotateHandler.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},DragRotateHandler.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},DragRotateHandler.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},DragRotateHandler.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var TouchZoomRotateHandler=function(i,o,s,x){this._el=i,this._touchZoom=o,this._touchRotate=s,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0};TouchZoomRotateHandler.prototype.enable=function(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},TouchZoomRotateHandler.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},TouchZoomRotateHandler.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},TouchZoomRotateHandler.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},TouchZoomRotateHandler.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},TouchZoomRotateHandler.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var isMoving=function(i){return i.zoom||i.drag||i.pitch||i.rotate},tk=function(i){function RenderFrameEvent(){i.apply(this,arguments)}return i&&(RenderFrameEvent.__proto__=i),RenderFrameEvent.prototype=Object.create(i&&i.prototype),RenderFrameEvent.prototype.constructor=RenderFrameEvent,RenderFrameEvent}(i.Event);function hasChange(i){return i.panDelta&&i.panDelta.mag()||i.zoomDelta||i.bearingDelta||i.pitchDelta}var HandlerManager=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new HandlerInertia(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),i.bindAll(["handleEvent","handleWindowEvent"],this);var x=this._el;this._listeners=[[x,"touchstart",{passive:!1}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[i.window,"blur",void 0]];for(var _=0,F=this._listeners;_<F.length;_+=1){var j=F[_],G=j[0],Z=j[1],X=j[2];N.addEventListener(G,Z,G===i.window.document?this.handleWindowEvent:this.handleEvent,X)}};HandlerManager.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var x=s[o],_=x[0],F=x[1],j=x[2];N.removeEventListener(_,F,_===i.window.document?this.handleWindowEvent:this.handleEvent,j)}},HandlerManager.prototype._addDefaultHandlers=function(i){var o=this._map,s=o.getCanvasContainer();this._add("mapEvent",new MapEventHandler(o,i));var x=o.boxZoom=new BoxZoomHandler(o,i);this._add("boxZoom",x);var _=new TapZoomHandler,F=new ClickZoomHandler;o.doubleClickZoom=new DoubleClickZoomHandler(F,_),this._add("tapZoom",_),this._add("clickZoom",F);var N=new TapDragZoomHandler;this._add("tapDragZoom",N);var j=o.touchPitch=new tw;this._add("touchPitch",j);var G=new tv(i),Z=new tx(i);o.dragRotate=new DragRotateHandler(i,G,Z),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);var X=new ty(i),J=new TouchPanHandler(i);o.dragPan=new DragPanHandler(s,X,J),this._add("mousePan",X),this._add("touchPan",J,["touchZoom","touchRotate"]);var $=new t_,ee=new tb;o.touchZoomRotate=new TouchZoomRotateHandler(s,ee,$,N),this._add("touchRotate",$,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]);var et=o.scrollZoom=new ScrollZoomHandler(o,this);this._add("scrollZoom",et,["mousePan"]);var er=o.keyboard=new KeyboardHandler;this._add("keyboard",er),this._add("blockableMapEvent",new BlockableMapEventHandler(o));for(var en=0,ei=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];en<ei.length;en+=1){var eo=ei[en];i.interactive&&i[eo]&&o[eo].enable(i[eo])}},HandlerManager.prototype._add=function(i,o,s){this._handlers.push({handlerName:i,handler:o,allowed:s}),this._handlersById[i]=o},HandlerManager.prototype.stop=function(){if(!this._updatingCamera){for(var i=0,o=this._handlers;i<o.length;i+=1)o[i].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},HandlerManager.prototype.isActive=function(){for(var i=0,o=this._handlers;i<o.length;i+=1)if(o[i].handler.isActive())return!0;return!1},HandlerManager.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},HandlerManager.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},HandlerManager.prototype.isMoving=function(){return!!isMoving(this._eventsInProgress)||this.isZooming()},HandlerManager.prototype._blockedByActive=function(i,o,s){for(var x in i)if(x!==s&&(!o||0>o.indexOf(x)))return!0;return!1},HandlerManager.prototype.handleWindowEvent=function(i){this.handleEvent(i,i.type+"Window")},HandlerManager.prototype._getMapTouches=function(i){for(var o=[],s=0;s<i.length;s+=1){var x=i[s],_=x.target;this._el.contains(_)&&o.push(x)}return o},HandlerManager.prototype.handleEvent=function(i,o){if("blur"===i.type){this.stop();return}this._updatingCamera=!0;for(var s="renderFrame"===i.type?void 0:i,x={needsRenderFrame:!1},_={},F={},j=i.touches?this._getMapTouches(i.touches):void 0,G=j?N.touchPos(this._el,j):N.mousePos(this._el,i),Z=0,X=this._handlers;Z<X.length;Z+=1){var J=X[Z],$=J.handlerName,ee=J.handler,et=J.allowed;if(ee.isEnabled()){var er=void 0;this._blockedByActive(F,et,$)?ee.reset():ee[o||i.type]&&(er=ee[o||i.type](i,G,j),this.mergeHandlerResult(x,_,er,$,s),er&&er.needsRenderFrame&&this._triggerRenderFrame()),(er||ee.isActive())&&(F[$]=ee)}}var en={};for(var ei in this._previousActiveHandlers)F[ei]||(en[ei]=s);this._previousActiveHandlers=F,(Object.keys(en).length||hasChange(x))&&(this._changes.push([x,_,en]),this._triggerRenderFrame()),(Object.keys(F).length||hasChange(x))&&this._map._stop(!0),this._updatingCamera=!1;var eo=x.cameraAnimation;eo&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],eo(this._map))},HandlerManager.prototype.mergeHandlerResult=function(o,s,x,_,F){if(x){i.extend(o,x);var N={handlerName:_,originalEvent:x.originalEvent||F};void 0!==x.zoomDelta&&(s.zoom=N),void 0!==x.panDelta&&(s.drag=N),void 0!==x.pitchDelta&&(s.pitch=N),void 0!==x.bearingDelta&&(s.rotate=N)}},HandlerManager.prototype._applyChanges=function(){for(var o={},s={},x={},_=0,F=this._changes;_<F.length;_+=1){var N=F[_],j=N[0],G=N[1],Z=N[2];j.panDelta&&(o.panDelta=(o.panDelta||new i.Point(0,0))._add(j.panDelta)),j.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+j.zoomDelta),j.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+j.bearingDelta),j.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+j.pitchDelta),void 0!==j.around&&(o.around=j.around),void 0!==j.pinchAround&&(o.pinchAround=j.pinchAround),j.noInertia&&(o.noInertia=j.noInertia),i.extend(s,G),i.extend(x,Z)}this._updateMapTransform(o,s,x),this._changes=[]},HandlerManager.prototype._updateMapTransform=function(i,o,s){var x=this._map,_=x.transform;if(!hasChange(i))return this._fireEvents(o,s);var F=i.panDelta,N=i.zoomDelta,j=i.bearingDelta,G=i.pitchDelta,Z=i.around,X=i.pinchAround;void 0!==X&&(Z=X),x._stop(!0),Z=Z||x.transform.centerPoint;var J=_.pointLocation(F?Z.sub(F):Z);j&&(_.bearing+=j),G&&(_.pitch+=G),N&&(_.zoom+=N),_.setLocationAtPoint(J,Z),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(o,s)},HandlerManager.prototype._fireEvents=function(o,s){var x,_=this,F=isMoving(this._eventsInProgress),N=isMoving(o),j={};for(var G in o){var Z=o[G].originalEvent;this._eventsInProgress[G]||(j[G+"start"]=Z),this._eventsInProgress[G]=o[G]}for(var X in!F&&N&&this._fireEvent("movestart",N.originalEvent),j)this._fireEvent(X,j[X]);for(var J in o.rotate&&(this._bearingChanged=!0),N&&this._fireEvent("move",N.originalEvent),o){var $=o[J].originalEvent;this._fireEvent(J,$)}var ee={};for(var et in this._eventsInProgress){var er=this._eventsInProgress[et],en=er.handlerName,ei=er.originalEvent;this._handlersById[en].isActive()||(delete this._eventsInProgress[et],x=s[en]||ei,ee[et+"end"]=x)}for(var eo in ee)this._fireEvent(eo,ee[eo]);var es=isMoving(this._eventsInProgress);if((F||N)&&!es){this._updatingCamera=!0;var el=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),shouldSnapToNorth=function(i){return 0!==i&&-_._bearingSnap<i&&i<_._bearingSnap};el?(shouldSnapToNorth(el.bearing||this._map.getBearing())&&(el.bearing=0),this._map.easeTo(el,{originalEvent:x})):(this._map.fire(new i.Event("moveend",{originalEvent:x})),shouldSnapToNorth(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},HandlerManager.prototype._fireEvent=function(o,s){this._map.fire(new i.Event(o,s?{originalEvent:s}:{}))},HandlerManager.prototype._triggerRenderFrame=function(){var i=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(o){delete i._frameId,i.handleEvent(new tk("renderFrame",{timeStamp:o})),i._applyChanges()}))};var tA=function(o){function Camera(s,x){o.call(this),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=x.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return o&&(Camera.__proto__=o),Camera.prototype=Object.create(o&&o.prototype),Camera.prototype.constructor=Camera,Camera.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},Camera.prototype.setCenter=function(i,o){return this.jumpTo({center:i},o)},Camera.prototype.panBy=function(o,s,x){return o=i.Point.convert(o).mult(-1),this.panTo(this.transform.center,i.extend({offset:o},s),x)},Camera.prototype.panTo=function(o,s,x){return this.easeTo(i.extend({center:o},s),x)},Camera.prototype.getZoom=function(){return this.transform.zoom},Camera.prototype.setZoom=function(i,o){return this.jumpTo({zoom:i},o),this},Camera.prototype.zoomTo=function(o,s,x){return this.easeTo(i.extend({zoom:o},s),x)},Camera.prototype.zoomIn=function(i,o){return this.zoomTo(this.getZoom()+1,i,o),this},Camera.prototype.zoomOut=function(i,o){return this.zoomTo(this.getZoom()-1,i,o),this},Camera.prototype.getBearing=function(){return this.transform.bearing},Camera.prototype.setBearing=function(i,o){return this.jumpTo({bearing:i},o),this},Camera.prototype.getPadding=function(){return this.transform.padding},Camera.prototype.setPadding=function(i,o){return this.jumpTo({padding:i},o),this},Camera.prototype.rotateTo=function(o,s,x){return this.easeTo(i.extend({bearing:o},s),x)},Camera.prototype.resetNorth=function(o,s){return this.rotateTo(0,i.extend({duration:1e3},o),s),this},Camera.prototype.resetNorthPitch=function(o,s){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},o),s),this},Camera.prototype.snapToNorth=function(i,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,o):this},Camera.prototype.getPitch=function(){return this.transform.pitch},Camera.prototype.setPitch=function(i,o){return this.jumpTo({pitch:i},o),this},Camera.prototype.cameraForBounds=function(o,s){return o=i.LngLatBounds.convert(o),this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),0,s)},Camera.prototype._cameraForBoxAndBearing=function(o,s,x,_){var F={top:0,bottom:0,right:0,left:0};if("number"==typeof(_=i.extend({padding:F,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding){var N=_.padding;_.padding={top:N,bottom:N,right:N,left:N}}_.padding=i.extend(F,_.padding);var j=this.transform,G=j.padding,Z=j.project(i.LngLat.convert(o)),X=j.project(i.LngLat.convert(s)),J=Z.rotate(-x*Math.PI/180),$=X.rotate(-x*Math.PI/180),ee=new i.Point(Math.max(J.x,$.x),Math.max(J.y,$.y)),et=new i.Point(Math.min(J.x,$.x),Math.min(J.y,$.y)),er=ee.sub(et),en=(j.width-(G.left+G.right+_.padding.left+_.padding.right))/er.x,ei=(j.height-(G.top+G.bottom+_.padding.top+_.padding.bottom))/er.y;if(ei<0||en<0){i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var eo=Math.min(j.scaleZoom(j.scale*Math.min(en,ei)),_.maxZoom),es=i.Point.convert(_.offset),el=(_.padding.left-_.padding.right)/2,ec=(_.padding.top-_.padding.bottom)/2,eu=new i.Point(es.x+el,es.y+ec).mult(j.scale/j.zoomScale(eo));return{center:j.unproject(Z.add(X).div(2).sub(eu)),zoom:eo,bearing:x}},Camera.prototype.fitBounds=function(i,o,s){return this._fitInternal(this.cameraForBounds(i,o),o,s)},Camera.prototype.fitScreenCoordinates=function(o,s,x,_,F){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(o)),this.transform.pointLocation(i.Point.convert(s)),x,_),_,F)},Camera.prototype._fitInternal=function(o,s,x){return o?(s=i.extend(o,s),delete s.padding,s.linear?this.easeTo(s,x):this.flyTo(s,x)):this},Camera.prototype.jumpTo=function(o,s){this.stop();var x=this.transform,_=!1,F=!1,N=!1;return"zoom"in o&&x.zoom!==+o.zoom&&(_=!0,x.zoom=+o.zoom),void 0!==o.center&&(x.center=i.LngLat.convert(o.center)),"bearing"in o&&x.bearing!==+o.bearing&&(F=!0,x.bearing=+o.bearing),"pitch"in o&&x.pitch!==+o.pitch&&(N=!0,x.pitch=+o.pitch),null==o.padding||x.isPaddingEqual(o.padding)||(x.padding=o.padding),this.fire(new i.Event("movestart",s)).fire(new i.Event("move",s)),_&&this.fire(new i.Event("zoomstart",s)).fire(new i.Event("zoom",s)).fire(new i.Event("zoomend",s)),F&&this.fire(new i.Event("rotatestart",s)).fire(new i.Event("rotate",s)).fire(new i.Event("rotateend",s)),N&&this.fire(new i.Event("pitchstart",s)).fire(new i.Event("pitch",s)).fire(new i.Event("pitchend",s)),this.fire(new i.Event("moveend",s))},Camera.prototype.easeTo=function(o,s){var x,_,F=this;this._stop(!1,o.easeId),(!1===(o=i.extend({offset:[0,0],duration:500,easing:i.ease},o)).animate||!o.essential&&i.browser.prefersReducedMotion)&&(o.duration=0);var N=this.transform,j=this.getZoom(),G=this.getBearing(),Z=this.getPitch(),X=this.getPadding(),J="zoom"in o?+o.zoom:j,$="bearing"in o?this._normalizeBearing(o.bearing,G):G,ee="pitch"in o?+o.pitch:Z,et="padding"in o?o.padding:N.padding,er=i.Point.convert(o.offset),en=N.centerPoint.add(er),ei=N.pointLocation(en),eo=i.LngLat.convert(o.center||ei);this._normalizeCenter(eo);var es=N.project(ei),el=N.project(eo).sub(es),ec=N.zoomScale(J-j);o.around&&(x=i.LngLat.convert(o.around),_=N.locationPoint(x));var eu={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==j,this._rotating=this._rotating||G!==$,this._pitching=this._pitching||ee!==Z,this._padding=!N.isPaddingEqual(et),this._easeId=o.easeId,this._prepareEase(s,o.noMoveStart,eu),clearTimeout(this._easeEndTimeoutID),this._ease(function(o){if(F._zooming&&(N.zoom=i.number(j,J,o)),F._rotating&&(N.bearing=i.number(G,$,o)),F._pitching&&(N.pitch=i.number(Z,ee,o)),F._padding&&(N.interpolatePadding(X,et,o),en=N.centerPoint.add(er)),x)N.setLocationAtPoint(x,_);else{var ei=N.zoomScale(N.zoom-j),eo=Math.pow(J>j?Math.min(2,ec):Math.max(.5,ec),1-o),eu=N.unproject(es.add(el.mult(o*eo)).mult(ei));N.setLocationAtPoint(N.renderWorldCopies?eu.wrap():eu,en)}F._fireMoveEvents(s)},function(i){F._afterEase(s,i)},o),this},Camera.prototype._prepareEase=function(o,s,x){void 0===x&&(x={}),this._moving=!0,s||x.moving||this.fire(new i.Event("movestart",o)),this._zooming&&!x.zooming&&this.fire(new i.Event("zoomstart",o)),this._rotating&&!x.rotating&&this.fire(new i.Event("rotatestart",o)),this._pitching&&!x.pitching&&this.fire(new i.Event("pitchstart",o))},Camera.prototype._fireMoveEvents=function(o){this.fire(new i.Event("move",o)),this._zooming&&this.fire(new i.Event("zoom",o)),this._rotating&&this.fire(new i.Event("rotate",o)),this._pitching&&this.fire(new i.Event("pitch",o))},Camera.prototype._afterEase=function(o,s){if(!this._easeId||!s||this._easeId!==s){delete this._easeId;var x=this._zooming,_=this._rotating,F=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new i.Event("zoomend",o)),_&&this.fire(new i.Event("rotateend",o)),F&&this.fire(new i.Event("pitchend",o)),this.fire(new i.Event("moveend",o))}},Camera.prototype.flyTo=function(o,s){var x=this;if(!o.essential&&i.browser.prefersReducedMotion){var _=i.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_,s)}this.stop(),o=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},o);var F=this.transform,N=this.getZoom(),j=this.getBearing(),G=this.getPitch(),Z=this.getPadding(),X="zoom"in o?i.clamp(+o.zoom,F.minZoom,F.maxZoom):N,J="bearing"in o?this._normalizeBearing(o.bearing,j):j,$="pitch"in o?+o.pitch:G,ee="padding"in o?o.padding:F.padding,et=F.zoomScale(X-N),er=i.Point.convert(o.offset),en=F.centerPoint.add(er),ei=F.pointLocation(en),eo=i.LngLat.convert(o.center||ei);this._normalizeCenter(eo);var es=F.project(ei),el=F.project(eo).sub(es),ec=o.curve,eu=Math.max(F.width,F.height),ef=eu/et,eh=el.mag();if("minZoom"in o){var ed=i.clamp(Math.min(o.minZoom,N,X),F.minZoom,F.maxZoom);ec=Math.sqrt(eu/F.zoomScale(ed-N)/eh*2)}var ep=ec*ec;function r(i){var o=(ef*ef-eu*eu+(i?-1:1)*ep*ep*eh*eh)/(2*(i?ef:eu)*ep*eh);return Math.log(Math.sqrt(o*o+1)-o)}function sinh(i){return(Math.exp(i)-Math.exp(-i))/2}function cosh(i){return(Math.exp(i)+Math.exp(-i))/2}var eg=r(0),w=function(i){return cosh(eg)/cosh(eg+ec*i)},u=function(i){var o;return eu*((cosh(eg)*(sinh(o=eg+ec*i)/cosh(o))-sinh(eg))/ep)/eh},em=(r(1)-eg)/ec;if(1e-6>Math.abs(eh)||!isFinite(em)){if(1e-6>Math.abs(eu-ef))return this.easeTo(o,s);var ey=ef<eu?-1:1;em=Math.abs(Math.log(ef/eu))/ec,u=function(){return 0},w=function(i){return Math.exp(ey*ec*i)}}if("duration"in o)o.duration=+o.duration;else{var ev="screenSpeed"in o?+o.screenSpeed/ec:+o.speed;o.duration=1e3*em/ev}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=j!==J,this._pitching=$!==G,this._padding=!F.isPaddingEqual(ee),this._prepareEase(s,!1),this._ease(function(o){var _=o*em,et=1/w(_);F.zoom=1===o?X:N+F.scaleZoom(et),x._rotating&&(F.bearing=i.number(j,J,o)),x._pitching&&(F.pitch=i.number(G,$,o)),x._padding&&(F.interpolatePadding(Z,ee,o),en=F.centerPoint.add(er));var ei=1===o?eo:F.unproject(es.add(el.mult(u(_))).mult(et));F.setLocationAtPoint(F.renderWorldCopies?ei.wrap():ei,en),x._fireMoveEvents(s)},function(){return x._afterEase(s)},o),this},Camera.prototype.isEasing=function(){return!!this._easeFrameId},Camera.prototype.stop=function(){return this._stop()},Camera.prototype._stop=function(i,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var s=this._onEaseEnd;delete this._onEaseEnd,s.call(this,o)}if(!i){var x=this.handlers;x&&x.stop()}return this},Camera.prototype._ease=function(o,s,x){!1===x.animate||0===x.duration?(o(1),s()):(this._easeStart=i.browser.now(),this._easeOptions=x,this._onEaseFrame=o,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Camera.prototype._renderFrameCallback=function(){var o=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Camera.prototype._normalizeBearing=function(o,s){var x=Math.abs((o=i.wrap(o,-180,180))-s);return Math.abs(o-360-s)<x&&(o-=360),Math.abs(o+360-s)<x&&(o+=360),o},Camera.prototype._normalizeCenter=function(i){var o=this.transform;if(o.renderWorldCopies&&!o.lngRange){var s=i.lng-o.center.lng;i.lng+=s>180?-360:s<-180?360:0}},Camera}(i.Evented),AttributionControl=function(o){void 0===o&&(o={}),this.options=o,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};AttributionControl.prototype.getDefaultPosition=function(){return"bottom-right"},AttributionControl.prototype.onAdd=function(i){var o=this.options&&this.options.compact;return this._map=i,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=N.create("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===o&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},AttributionControl.prototype.onRemove=function(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},AttributionControl.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(o){var x=s.reduce(function(i,o,x){return o.value&&(i+=o.key+"="+o.value+(x<s.length-1?"&":"")),i},"?");o.href=i.config.FEEDBACK_URL+"/"+x+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow"}},AttributionControl.prototype._updateData=function(i){i&&("metadata"===i.sourceDataType||"style"===i.dataType)&&(this._updateAttributions(),this._updateEditLink())},AttributionControl.prototype._updateAttributions=function(){if(this._map.style){var i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(function(i){return"string"!=typeof i?"":i})):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){var o=this._map.style.stylesheet;this.styleOwner=o.owner,this.styleId=o.id}var s=this._map.style.sourceCaches;for(var x in s){var _=s[x];if(_.used){var F=_.getSource();F.attribution&&0>i.indexOf(F.attribution)&&i.push(F.attribution)}}i.sort(function(i,o){return i.length-o.length});var N=(i=i.filter(function(o,s){for(var x=s+1;x<i.length;x++)if(i[x].indexOf(o)>=0)return!1;return!0})).join(" | ");N!==this._attribHTML&&(this._attribHTML=N,i.length?(this._innerContainer.innerHTML=N,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},AttributionControl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var LogoControl=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};LogoControl.prototype.onAdd=function(i){this._map=i,this._container=N.create("div","mapboxgl-ctrl");var o=N.create("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},LogoControl.prototype.onRemove=function(){N.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},LogoControl.prototype.getDefaultPosition=function(){return"bottom-left"},LogoControl.prototype._updateLogo=function(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},LogoControl.prototype._logoRequired=function(){if(this._map.style){var i=this._map.style.sourceCaches;for(var o in i)if(i[o].getSource().mapbox_logo)return!0;return!1}},LogoControl.prototype._updateCompact=function(){var i=this._container.children;if(i.length){var o=i[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}};var TaskQueue=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};TaskQueue.prototype.add=function(i){var o=++this._id;return this._queue.push({callback:i,id:o,cancelled:!1}),o},TaskQueue.prototype.remove=function(i){for(var o=this._currentlyRunning,s=o?this._queue.concat(o):this._queue,x=0;x<s.length;x+=1){var _=s[x];if(_.id===i){_.cancelled=!0;return}}},TaskQueue.prototype.run=function(i){void 0===i&&(i=0);var o=this._currentlyRunning=this._queue;this._queue=[];for(var s=0;s<o.length;s+=1){var x=o[s];if(!x.cancelled&&(x.callback(i),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},TaskQueue.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var tS={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},tM=i.window.HTMLImageElement,tC=i.window.HTMLElement,tE=i.window.ImageBitmap,tL={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},tP=function(o){function Map(s){var x=this;if(null!=(s=i.extend({},tL,s)).minZoom&&null!=s.maxZoom&&s.minZoom>s.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=s.minPitch&&null!=s.maxPitch&&s.minPitch>s.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=s.minPitch&&s.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=s.maxPitch&&s.maxPitch>60)throw Error("maxPitch must be less than or equal to 60");var _=new Transform(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies);if(o.call(this,_,s),this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=s.preserveDrawingBuffer,this._antialias=s.antialias,this._trackResize=s.trackResize,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=s.collectResourceTiming,this._renderTaskQueue=new TaskQueue,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},tS,s.locale),this._requestManager=new i.RequestManager(s.transformRequest,s.accessToken),"string"==typeof s.container){if(this._container=i.window.document.getElementById(s.container),!this._container)throw Error("Container '"+s.container+"' not found.")}else if(s.container instanceof tC)this._container=s.container;else throw Error("Invalid type: 'container' must be a String or HTMLElement.");if(s.maxBounds&&this.setMaxBounds(s.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return x._update(!1)}),this.on("moveend",function(){return x._update(!1)}),this.on("zoom",function(){return x._update(!0)}),void 0!==i.window&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new HandlerManager(this,s);var F="string"==typeof s.hash&&s.hash||void 0;this._hash=s.hash&&new Hash(F).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,i.extend({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new AttributionControl({customAttribution:s.customAttribution})),this.addControl(new LogoControl,s.logoPosition),this.on("style.load",function(){x.transform.unmodified&&x.jumpTo(x.style.stylesheet)}),this.on("data",function(o){x._update("style"===o.dataType),x.fire(new i.Event(o.dataType+"data",o))}),this.on("dataloading",function(o){x.fire(new i.Event(o.dataType+"dataloading",o))})}o&&(Map.__proto__=o),Map.prototype=Object.create(o&&o.prototype),Map.prototype.constructor=Map;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Map.prototype._getMapId=function(){return this._mapId},Map.prototype.addControl=function(o,s){if(void 0===s&&o.getDefaultPosition&&(s=o.getDefaultPosition()),void 0===s&&(s="top-right"),!o||!o.onAdd)return this.fire(new i.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var x=o.onAdd(this);this._controls.push(o);var _=this._controlPositions[s];return -1!==s.indexOf("bottom")?_.insertBefore(x,_.firstChild):_.appendChild(x),this},Map.prototype.removeControl=function(o){if(!o||!o.onRemove)return this.fire(new i.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var s=this._controls.indexOf(o);return s>-1&&this._controls.splice(s,1),o.onRemove(this),this},Map.prototype.resize=function(o){var s=this._containerDimensions(),x=s[0],_=s[1];this._resizeCanvas(x,_),this.transform.resize(x,_),this.painter.resize(x,_);var F=!this._moving;return F&&(this.stop(),this.fire(new i.Event("movestart",o)).fire(new i.Event("move",o))),this.fire(new i.Event("resize",o)),F&&this.fire(new i.Event("moveend",o)),this},Map.prototype.getBounds=function(){return this.transform.getBounds()},Map.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Map.prototype.setMaxBounds=function(o){return this.transform.setMaxBounds(i.LngLatBounds.convert(o)),this._update()},Map.prototype.setMinZoom=function(i){if((i=null==i?-2:i)>=-2&&i<=this.transform.maxZoom)return this.transform.minZoom=i,this._update(),this.getZoom()<i&&this.setZoom(i),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")},Map.prototype.getMinZoom=function(){return this.transform.minZoom},Map.prototype.setMaxZoom=function(i){if((i=null==i?22:i)>=this.transform.minZoom)return this.transform.maxZoom=i,this._update(),this.getZoom()>i&&this.setZoom(i),this;throw Error("maxZoom must be greater than the current minZoom")},Map.prototype.getMaxZoom=function(){return this.transform.maxZoom},Map.prototype.setMinPitch=function(i){if((i=null==i?0:i)<0)throw Error("minPitch must be greater than or equal to 0");if(i>=0&&i<=this.transform.maxPitch)return this.transform.minPitch=i,this._update(),this.getPitch()<i&&this.setPitch(i),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")},Map.prototype.getMinPitch=function(){return this.transform.minPitch},Map.prototype.setMaxPitch=function(i){if((i=null==i?60:i)>60)throw Error("maxPitch must be less than or equal to 60");if(i>=this.transform.minPitch)return this.transform.maxPitch=i,this._update(),this.getPitch()>i&&this.setPitch(i),this;throw Error("maxPitch must be greater than the current minPitch")},Map.prototype.getMaxPitch=function(){return this.transform.maxPitch},Map.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Map.prototype.setRenderWorldCopies=function(i){return this.transform.renderWorldCopies=i,this._update()},Map.prototype.project=function(o){return this.transform.locationPoint(i.LngLat.convert(o))},Map.prototype.unproject=function(o){return this.transform.pointLocation(i.Point.convert(o))},Map.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Map.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Map.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Map.prototype._createDelegatedListener=function(i,o,s){var x,_=this;if("mouseenter"===i||"mouseover"===i){var F=!1;return{layer:o,listener:s,delegates:{mousemove:function(x){var N=_.getLayer(o)?_.queryRenderedFeatures(x.point,{layers:[o]}):[];N.length?F||(F=!0,s.call(_,new tp(i,_,x.originalEvent,{features:N}))):F=!1},mouseout:function(){F=!1}}}}if("mouseleave"!==i&&"mouseout"!==i)return{layer:o,listener:s,delegates:((x={})[i]=function(i){var x=_.getLayer(o)?_.queryRenderedFeatures(i.point,{layers:[o]}):[];x.length&&(i.features=x,s.call(_,i),delete i.features)},x)};var N=!1;return{layer:o,listener:s,delegates:{mousemove:function(x){(_.getLayer(o)?_.queryRenderedFeatures(x.point,{layers:[o]}):[]).length?N=!0:N&&(N=!1,s.call(_,new tp(i,_,x.originalEvent)))},mouseout:function(o){N&&(N=!1,s.call(_,new tp(i,_,o.originalEvent)))}}}},Map.prototype.on=function(i,s,x){if(void 0===x)return o.prototype.on.call(this,i,s);var _=this._createDelegatedListener(i,s,x);for(var F in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[i]=this._delegatedListeners[i]||[],this._delegatedListeners[i].push(_),_.delegates)this.on(F,_.delegates[F]);return this},Map.prototype.once=function(i,s,x){if(void 0===x)return o.prototype.once.call(this,i,s);var _=this._createDelegatedListener(i,s,x);for(var F in _.delegates)this.once(F,_.delegates[F]);return this},Map.prototype.off=function(i,s,x){var _=this;return void 0===x?o.prototype.off.call(this,i,s):(this._delegatedListeners&&this._delegatedListeners[i]&&function(o){for(var F=o[i],N=0;N<F.length;N++){var j=F[N];if(j.layer===s&&j.listener===x){for(var G in j.delegates)_.off(G,j.delegates[G]);return F.splice(N,1),_}}}(this._delegatedListeners),this)},Map.prototype.queryRenderedFeatures=function(o,s){if(!this.style)return[];if(void 0!==s||void 0===o||o instanceof i.Point||Array.isArray(o)||(s=o,o=void 0),s=s||{},(o=o||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||"number"==typeof o[0])x=[i.Point.convert(o)];else{var x,_=i.Point.convert(o[0]),F=i.Point.convert(o[1]);x=[_,new i.Point(F.x,_.y),F,new i.Point(_.x,F.y),_]}return this.style.queryRenderedFeatures(x,s,this.transform)},Map.prototype.querySourceFeatures=function(i,o){return this.style.querySourceFeatures(i,o)},Map.prototype.setStyle=function(o,s){return!1!==(s=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&o?(this._diffStyle(o,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(o,s))},Map.prototype._getUIString=function(i){var o=this._locale[i];if(null==o)throw Error("Missing UI string '"+i+"'");return o},Map.prototype._updateStyle=function(i,o){return(this.style&&(this.style.setEventedParent(null),this.style._remove()),i)?(this.style=new e6(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof i?this.style.loadURL(i):this.style.loadJSON(i)):delete this.style,this},Map.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new e6(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Map.prototype._diffStyle=function(o,s){var x=this;if("string"==typeof o){var _=this._requestManager.normalizeStyleURL(o),F=this._requestManager.transformRequest(_,i.ResourceType.Style);i.getJSON(F,function(o,_){o?x.fire(new i.ErrorEvent(o)):_&&x._updateDiff(_,s)})}else"object"==typeof o&&this._updateDiff(o,s)},Map.prototype._updateDiff=function(o,s){try{this.style.setState(o)&&this._update(!0)}catch(x){i.warnOnce("Unable to perform style diff: "+(x.message||x.error||x)+".  Rebuilding the style from scratch."),this._updateStyle(o,s)}},Map.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Map.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},Map.prototype.addSource=function(i,o){return this._lazyInitEmptyStyle(),this.style.addSource(i,o),this._update(!0)},Map.prototype.isSourceLoaded=function(o){var s=this.style&&this.style.sourceCaches[o];if(void 0===s){this.fire(new i.ErrorEvent(Error("There is no source with ID '"+o+"'")));return}return s.loaded()},Map.prototype.areTilesLoaded=function(){var i=this.style&&this.style.sourceCaches;for(var o in i){var s=i[o]._tiles;for(var x in s){var _=s[x];if(!("loaded"===_.state||"errored"===_.state))return!1}}return!0},Map.prototype.addSourceType=function(i,o,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(i,o,s)},Map.prototype.removeSource=function(i){return this.style.removeSource(i),this._update(!0)},Map.prototype.getSource=function(i){return this.style.getSource(i)},Map.prototype.addImage=function(o,s,x){void 0===x&&(x={});var _=x.pixelRatio;void 0===_&&(_=1);var F=x.sdf;void 0===F&&(F=!1);var N=x.stretchX,j=x.stretchY,G=x.content;if(this._lazyInitEmptyStyle(),s instanceof tM||tE&&s instanceof tE){var Z=i.browser.getImageData(s),X=Z.width,J=Z.height,$=Z.data;this.style.addImage(o,{data:new i.RGBAImage({width:X,height:J},$),pixelRatio:_,stretchX:N,stretchY:j,content:G,sdf:F,version:0})}else{if(void 0===s.width||void 0===s.height)return this.fire(new i.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ee=s.width,et=s.height,er=s.data;this.style.addImage(o,{data:new i.RGBAImage({width:ee,height:et},new Uint8Array(er)),pixelRatio:_,stretchX:N,stretchY:j,content:G,sdf:F,version:0,userImage:s}),s.onAdd&&s.onAdd(this,o)}},Map.prototype.updateImage=function(o,s){var x=this.style.getImage(o);if(!x)return this.fire(new i.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var _=s instanceof tM||tE&&s instanceof tE?i.browser.getImageData(s):s,F=_.width,N=_.height,j=_.data;if(void 0===F||void 0===N)return this.fire(new i.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(F!==x.data.width||N!==x.data.height)return this.fire(new i.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image")));var G=!(s instanceof tM||tE&&s instanceof tE);x.data.replace(j,G),this.style.updateImage(o,x)},Map.prototype.hasImage=function(o){return o?!!this.style.getImage(o):(this.fire(new i.ErrorEvent(Error("Missing required image id"))),!1)},Map.prototype.removeImage=function(i){this.style.removeImage(i)},Map.prototype.loadImage=function(o,s){i.getImage(this._requestManager.transformRequest(o,i.ResourceType.Image),s)},Map.prototype.listImages=function(){return this.style.listImages()},Map.prototype.addLayer=function(i,o){return this._lazyInitEmptyStyle(),this.style.addLayer(i,o),this._update(!0)},Map.prototype.moveLayer=function(i,o){return this.style.moveLayer(i,o),this._update(!0)},Map.prototype.removeLayer=function(i){return this.style.removeLayer(i),this._update(!0)},Map.prototype.getLayer=function(i){return this.style.getLayer(i)},Map.prototype.setLayerZoomRange=function(i,o,s){return this.style.setLayerZoomRange(i,o,s),this._update(!0)},Map.prototype.setFilter=function(i,o,s){return void 0===s&&(s={}),this.style.setFilter(i,o,s),this._update(!0)},Map.prototype.getFilter=function(i){return this.style.getFilter(i)},Map.prototype.setPaintProperty=function(i,o,s,x){return void 0===x&&(x={}),this.style.setPaintProperty(i,o,s,x),this._update(!0)},Map.prototype.getPaintProperty=function(i,o){return this.style.getPaintProperty(i,o)},Map.prototype.setLayoutProperty=function(i,o,s,x){return void 0===x&&(x={}),this.style.setLayoutProperty(i,o,s,x),this._update(!0)},Map.prototype.getLayoutProperty=function(i,o){return this.style.getLayoutProperty(i,o)},Map.prototype.setLight=function(i,o){return void 0===o&&(o={}),this._lazyInitEmptyStyle(),this.style.setLight(i,o),this._update(!0)},Map.prototype.getLight=function(){return this.style.getLight()},Map.prototype.setFeatureState=function(i,o){return this.style.setFeatureState(i,o),this._update()},Map.prototype.removeFeatureState=function(i,o){return this.style.removeFeatureState(i,o),this._update()},Map.prototype.getFeatureState=function(i){return this.style.getFeatureState(i)},Map.prototype.getContainer=function(){return this._container},Map.prototype.getCanvasContainer=function(){return this._canvasContainer},Map.prototype.getCanvas=function(){return this._canvas},Map.prototype._containerDimensions=function(){var i=0,o=0;return this._container&&(i=this._container.clientWidth||400,o=this._container.clientHeight||300),[i,o]},Map.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Map.prototype._setupContainer=function(){var i=this._container;i.classList.add("mapboxgl-map"),(this._missingCSSCanary=N.create("div","mapboxgl-canary",i)).style.visibility="hidden",this._detectMissingCSS();var o=this._canvasContainer=N.create("div","mapboxgl-canvas-container",i);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=N.create("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var s=this._containerDimensions();this._resizeCanvas(s[0],s[1]);var x=this._controlContainer=N.create("div","mapboxgl-control-container",i),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(i){_[i]=N.create("div","mapboxgl-ctrl-"+i,x)})},Map.prototype._resizeCanvas=function(o,s){var x=i.browser.devicePixelRatio||1;this._canvas.width=x*o,this._canvas.height=x*s,this._canvas.style.width=o+"px",this._canvas.style.height=s+"px"},Map.prototype._setupPainter=function(){var o=i.extend({},F.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl",o)||this._canvas.getContext("experimental-webgl",o);if(!s){this.fire(new i.ErrorEvent(Error("Failed to initialize WebGL")));return}this.painter=new Painter(s,this.transform),i.webpSupported.testSupport(s)},Map.prototype._contextLost=function(o){o.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:o}))},Map.prototype._contextRestored=function(o){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:o}))},Map.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Map.prototype._update=function(i){return this.style&&(this._styleDirty=this._styleDirty||i,this._sourcesDirty=!0,this.triggerRepaint()),this},Map.prototype._requestRenderFrame=function(i){return this._update(),this._renderTaskQueue.add(i)},Map.prototype._cancelRenderFrame=function(i){this._renderTaskQueue.remove(i)},Map.prototype._render=function(o){var s,x=this,_=0,F=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(s=F.createQueryEXT(),F.beginQueryEXT(F.TIME_ELAPSED_EXT,s),_=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(o),!this._removed){var N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var j=this.transform.zoom,G=i.browser.now();this.style.zoomHistory.update(j,G);var Z=new i.EvaluationParameters(j,{now:G,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=Z.crossFadingFactor();(1!==X||X!==this._crossFadingFactor)&&(N=!0,this._crossFadingFactor=X),this.style.update(Z)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var J=i.browser.now()-_;F.endQueryEXT(F.TIME_ELAPSED_EXT,s),setTimeout(function(){var o=F.getQueryObjectEXT(s,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(s),x.fire(new i.Event("gpu-timing-frame",{cpuTime:J,gpuTime:o}))},50)}if(this.listens("gpu-timing-layer")){var $=this.painter.collectGpuTimers();setTimeout(function(){var o=x.painter.queryGpuTimers($);x.fire(new i.Event("gpu-timing-layer",{layerTimes:o}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new i.Event("idle"))),this}},Map.prototype.remove=function(){this._hash&&this._hash.remove();for(var o=0,s=this._controls;o<s.length;o+=1)s[o].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==i.window&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),removeNode(this._canvasContainer),removeNode(this._controlContainer),removeNode(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},Map.prototype.triggerRepaint=function(){var o=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(i){o._frame=null,o._render(i)}))},Map.prototype._onWindowOnline=function(){this._update()},Map.prototype._onWindowResize=function(i){this._trackResize&&this.resize({originalEvent:i})._update()},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries},s.showTileBoundaries.set=function(i){this._showTileBoundaries!==i&&(this._showTileBoundaries=i,this._update())},s.showPadding.get=function(){return!!this._showPadding},s.showPadding.set=function(i){this._showPadding!==i&&(this._showPadding=i,this._update())},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},s.showCollisionBoxes.set=function(i){this._showCollisionBoxes!==i&&(this._showCollisionBoxes=i,i?this.style._generateCollisionBoxes():this._update())},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},s.showOverdrawInspector.set=function(i){this._showOverdrawInspector!==i&&(this._showOverdrawInspector=i,this._update())},s.repaint.get=function(){return!!this._repaint},s.repaint.set=function(i){this._repaint!==i&&(this._repaint=i,this.triggerRepaint())},s.vertices.get=function(){return!!this._vertices},s.vertices.set=function(i){this._vertices=i,this._update()},Map.prototype._setCacheLimits=function(o,s){i.setCacheLimits(o,s)},s.version.get=function(){return i.version},Object.defineProperties(Map.prototype,s),Map}(tA);function removeNode(i){i.parentNode&&i.parentNode.removeChild(i)}var tI={showCompass:!0,showZoom:!0,visualizePitch:!1},NavigationControl=function(o){var s=this;this.options=i.extend({},tI,o),this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(i){return i.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(i){return s._map.zoomIn({},{originalEvent:i})}),N.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(i){return s._map.zoomOut({},{originalEvent:i})}),N.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(i){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:i}):s._map.resetNorth({},{originalEvent:i})}),this._compassIcon=N.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};NavigationControl.prototype._updateZoomButtons=function(){var i=this._map.getZoom();this._zoomInButton.disabled=i===this._map.getMaxZoom(),this._zoomOutButton.disabled=i===this._map.getMinZoom()},NavigationControl.prototype._rotateCompassArrow=function(){var i=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=i},NavigationControl.prototype.onAdd=function(i){return this._map=i,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new MouseRotateWrapper(this._map,this._compass,this.options.visualizePitch)),this._container},NavigationControl.prototype.onRemove=function(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},NavigationControl.prototype._createButton=function(i,o){var s=N.create("button",i,this._container);return s.type="button",s.addEventListener("click",o),s},NavigationControl.prototype._setButtonTitle=function(i,o){var s=this._map._getUIString("NavigationControl."+o);i.title=s,i.setAttribute("aria-label",s)};var MouseRotateWrapper=function(o,s,x){void 0===x&&(x=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new tv({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,x&&(this.mousePitch=new tx({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),N.addEventListener(s,"mousedown",this.mousedown),N.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(s,"touchmove",this.touchmove),N.addEventListener(s,"touchend",this.touchend),N.addEventListener(s,"touchcancel",this.reset)};function smartWrap(o,s,x){if(o=new i.LngLat(o.lng,o.lat),s){var _=new i.LngLat(o.lng-360,o.lat),F=new i.LngLat(o.lng+360,o.lat),N=x.locationPoint(o).distSqr(s);x.locationPoint(_).distSqr(s)<N?o=_:x.locationPoint(F).distSqr(s)<N&&(o=F)}for(;Math.abs(o.lng-x.center.lng)>180;){var j=x.locationPoint(o);if(j.x>=0&&j.y>=0&&j.x<=x.width&&j.y<=x.height)break;o.lng>x.center.lng?o.lng-=360:o.lng+=360}return o}MouseRotateWrapper.prototype.down=function(i,o){this.mouseRotate.mousedown(i,o),this.mousePitch&&this.mousePitch.mousedown(i,o),N.disableDrag()},MouseRotateWrapper.prototype.move=function(i,o){var s=this.map,x=this.mouseRotate.mousemoveWindow(i,o);if(x&&x.bearingDelta&&s.setBearing(s.getBearing()+x.bearingDelta),this.mousePitch){var _=this.mousePitch.mousemoveWindow(i,o);_&&_.pitchDelta&&s.setPitch(s.getPitch()+_.pitchDelta)}},MouseRotateWrapper.prototype.off=function(){var i=this.element;N.removeEventListener(i,"mousedown",this.mousedown),N.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(i,"touchmove",this.touchmove),N.removeEventListener(i,"touchend",this.touchend),N.removeEventListener(i,"touchcancel",this.reset),this.offTemp()},MouseRotateWrapper.prototype.offTemp=function(){N.enableDrag(),N.removeEventListener(i.window,"mousemove",this.mousemove),N.removeEventListener(i.window,"mouseup",this.mouseup)},MouseRotateWrapper.prototype.mousedown=function(o){this.down(i.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),N.mousePos(this.element,o)),N.addEventListener(i.window,"mousemove",this.mousemove),N.addEventListener(i.window,"mouseup",this.mouseup)},MouseRotateWrapper.prototype.mousemove=function(i){this.move(i,N.mousePos(this.element,i))},MouseRotateWrapper.prototype.mouseup=function(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()},MouseRotateWrapper.prototype.touchstart=function(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return i.preventDefault()}},this._startPos))},MouseRotateWrapper.prototype.touchmove=function(i){1!==i.targetTouches.length?this.reset():(this._lastPos=N.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:function(){return i.preventDefault()}},this._lastPos))},MouseRotateWrapper.prototype.touchend=function(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},MouseRotateWrapper.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var tO={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function applyAnchorClass(i,o,s){var x=i.classList;for(var _ in tO)x.remove("mapboxgl-"+s+"-anchor-"+_);x.add("mapboxgl-"+s+"-anchor-"+o)}var tD=function(o){function Marker(s,x){var _=this;if(o.call(this),(s instanceof i.window.HTMLElement||x)&&(s=i.extend({element:s},x)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._draggable=s&&s.draggable||!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=i.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div"),this._element.setAttribute("aria-label","Map marker");var F=N.createNS("http://www.w3.org/2000/svg","svg");F.setAttributeNS(null,"display","block"),F.setAttributeNS(null,"height","41px"),F.setAttributeNS(null,"width","27px"),F.setAttributeNS(null,"viewBox","0 0 27 41");var j=N.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"stroke","none"),j.setAttributeNS(null,"stroke-width","1"),j.setAttributeNS(null,"fill","none"),j.setAttributeNS(null,"fill-rule","evenodd");var G=N.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill-rule","nonzero");var Z=N.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Z.setAttributeNS(null,"fill","#000000");for(var X=0,J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];X<J.length;X+=1){var $=J[X],ee=N.createNS("http://www.w3.org/2000/svg","ellipse");ee.setAttributeNS(null,"opacity","0.04"),ee.setAttributeNS(null,"cx","10.5"),ee.setAttributeNS(null,"cy","5.80029008"),ee.setAttributeNS(null,"rx",$.rx),ee.setAttributeNS(null,"ry",$.ry),Z.appendChild(ee)}var et=N.createNS("http://www.w3.org/2000/svg","g");et.setAttributeNS(null,"fill",this._color);var er=N.createNS("http://www.w3.org/2000/svg","path");er.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),et.appendChild(er);var en=N.createNS("http://www.w3.org/2000/svg","g");en.setAttributeNS(null,"opacity","0.25"),en.setAttributeNS(null,"fill","#000000");var ei=N.createNS("http://www.w3.org/2000/svg","path");ei.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),en.appendChild(ei);var eo=N.createNS("http://www.w3.org/2000/svg","g");eo.setAttributeNS(null,"transform","translate(6.0, 7.0)"),eo.setAttributeNS(null,"fill","#FFFFFF");var es=N.createNS("http://www.w3.org/2000/svg","g");es.setAttributeNS(null,"transform","translate(8.0, 8.0)");var el=N.createNS("http://www.w3.org/2000/svg","circle");el.setAttributeNS(null,"fill","#000000"),el.setAttributeNS(null,"opacity","0.25"),el.setAttributeNS(null,"cx","5.5"),el.setAttributeNS(null,"cy","5.5"),el.setAttributeNS(null,"r","5.4999962");var ec=N.createNS("http://www.w3.org/2000/svg","circle");ec.setAttributeNS(null,"fill","#FFFFFF"),ec.setAttributeNS(null,"cx","5.5"),ec.setAttributeNS(null,"cy","5.5"),ec.setAttributeNS(null,"r","5.4999962"),es.appendChild(el),es.appendChild(ec),G.appendChild(Z),G.appendChild(et),G.appendChild(en),G.appendChild(eo),G.appendChild(es),F.appendChild(G),this._element.appendChild(F),this._offset=i.Point.convert(s&&s.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(i){i.preventDefault()}),this._element.addEventListener("mousedown",function(i){i.preventDefault()}),this._element.addEventListener("focus",function(){var i=_._map.getContainer();i.scrollTop=0,i.scrollLeft=0}),applyAnchorClass(this._element,this._anchor,"marker"),this._popup=null}return o&&(Marker.__proto__=o),Marker.prototype=Object.create(o&&o.prototype),Marker.prototype.constructor=Marker,Marker.prototype.addTo=function(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Marker.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this},Marker.prototype.getLngLat=function(){return this._lngLat},Marker.prototype.setLngLat=function(o){return this._lngLat=i.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Marker.prototype.getElement=function(){return this._element},Marker.prototype.setPopup=function(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){var o=Math.sqrt(91.125);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[o,-((24.6+o)*1)],"bottom-right":[-o,-((24.6+o)*1)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Marker.prototype._onKeyPress=function(i){var o=i.code,s=i.charCode||i.keyCode;("Space"===o||"Enter"===o||32===s||13===s)&&this.togglePopup()},Marker.prototype._onMapClick=function(i){var o=i.originalEvent.target,s=this._element;this._popup&&(o===s||s.contains(o))&&this.togglePopup()},Marker.prototype.getPopup=function(){return this._popup},Marker.prototype.togglePopup=function(){var i=this._popup;return i&&(i.isOpen()?i.remove():i.addTo(this._map)),this},Marker.prototype._update=function(i){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=smartWrap(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var o="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?o="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(o="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var s="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?s="rotateX(0deg)":"map"===this._pitchAlignment&&(s="rotateX("+this._map.getPitch()+"deg)"),i&&"moveend"!==i.type||(this._pos=this._pos.round()),N.setTransform(this._element,tO[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+s+" "+o)}},Marker.prototype.getOffset=function(){return this._offset},Marker.prototype.setOffset=function(o){return this._offset=i.Point.convert(o),this._update(),this},Marker.prototype._onMove=function(o){this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))},Marker.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new i.Event("dragend")),this._state="inactive"},Marker.prototype._addDragHandler=function(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Marker.prototype.setDraggable=function(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Marker.prototype.isDraggable=function(){return this._draggable},Marker.prototype.setRotation=function(i){return this._rotation=i||0,this._update(),this},Marker.prototype.getRotation=function(){return this._rotation},Marker.prototype.setRotationAlignment=function(i){return this._rotationAlignment=i||"auto",this._update(),this},Marker.prototype.getRotationAlignment=function(){return this._rotationAlignment},Marker.prototype.setPitchAlignment=function(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this},Marker.prototype.getPitchAlignment=function(){return this._pitchAlignment},Marker}(i.Evented),tR={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},tB=0,tz=!1,tF=function(o){function GeolocateControl(s){o.call(this),this.options=i.extend({},tR,s),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(GeolocateControl.__proto__=o),GeolocateControl.prototype=Object.create(o&&o.prototype),GeolocateControl.prototype.constructor=GeolocateControl,GeolocateControl.prototype.onAdd=function(o){var s;return this._map=o,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,void 0!==_?s(_):void 0!==i.window.navigator.permissions?i.window.navigator.permissions.query({name:"geolocation"}).then(function(i){s(_="denied"!==i.state)}):s(_=!!i.window.navigator.geolocation),this._container},GeolocateControl.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,tB=0,tz=!1},GeolocateControl.prototype._isOutOfMapMaxBounds=function(i){var o=this._map.getMaxBounds(),s=i.coords;return o&&(s.longitude<o.getWest()||s.longitude>o.getEast()||s.latitude<o.getSouth()||s.latitude>o.getNorth())},GeolocateControl.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},GeolocateControl.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o)){this._setErrorState(),this.fire(new i.Event("outofmaxbounds",o)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(o),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",o)),this._finish()}},GeolocateControl.prototype._updateCamera=function(o){var s=new i.LngLat(o.coords.longitude,o.coords.latitude),x=o.coords.accuracy,_=this._map.getBearing(),F=i.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(x),F,{geolocateSource:!0})},GeolocateControl.prototype._updateMarker=function(o){if(o){var s=new i.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},GeolocateControl.prototype._updateCircleRadius=function(){var i=this._map._container.clientHeight/2,o=this._map.unproject([0,i]),s=this._map.unproject([1,i]),x=o.distanceTo(s),_=Math.ceil(2*this._accuracy/x);this._circleElement.style.width=_+"px",this._circleElement.style.height=_+"px"},GeolocateControl.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},GeolocateControl.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation){if(1===o.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===o.code&&tz)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",o)),this._finish()}},GeolocateControl.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},GeolocateControl.prototype._setupUI=function(o){var s=this;if(this._container.addEventListener("contextmenu",function(i){return i.preventDefault()}),this._geolocateButton=N.create("button","mapboxgl-ctrl-geolocate",this._container),N.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===o){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var x=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=x,this._geolocateButton.setAttribute("aria-label",x)}else{var _=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tD(this._dotElement),this._circleElement=N.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tD({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(o){var x=o.originalEvent&&"resize"===o.originalEvent.type;o.geolocateSource||"ACTIVE_LOCK"!==s._watchState||x||(s._watchState="BACKGROUND",s._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),s._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),s.fire(new i.Event("trackuserlocationend")))})},GeolocateControl.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":tB--,tz=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++tB>1?(o={maximumAge:6e5,timeout:0},tz=!0):(o=this.options.positionOptions,tz=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},GeolocateControl.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},GeolocateControl}(i.Evented),tN={maxWidth:100,unit:"metric"},ScaleControl=function(o){this.options=i.extend({},tN,o),i.bindAll(["_onMove","setUnit"],this)};function updateScale(i,o,s){var x=s&&s.maxWidth||100,_=i._container.clientHeight/2,F=i.unproject([0,_]),N=i.unproject([x,_]),j=F.distanceTo(N);if(s&&"imperial"===s.unit){var G=3.2808*j;G>5280?setScale(o,x,G/5280,i._getUIString("ScaleControl.Miles")):setScale(o,x,G,i._getUIString("ScaleControl.Feet"))}else s&&"nautical"===s.unit?setScale(o,x,j/1852,i._getUIString("ScaleControl.NauticalMiles")):j>=1e3?setScale(o,x,j/1e3,i._getUIString("ScaleControl.Kilometers")):setScale(o,x,j,i._getUIString("ScaleControl.Meters"))}function setScale(i,o,s,x){var _,F,N,j,G=(N=Math.pow(10,(""+Math.floor(s)).length-1),j=s/N,N*(j=j>=10?10:j>=5?5:j>=3?3:j>=2?2:j>=1?1:(F=Math.pow(10,Math.ceil(-Math.log(_=j)/Math.LN10)),Math.round(_*F)/F)));i.style.width=o*(G/s)+"px",i.innerHTML=G+"&nbsp;"+x}ScaleControl.prototype.getDefaultPosition=function(){return"bottom-left"},ScaleControl.prototype._onMove=function(){updateScale(this._map,this._container,this.options)},ScaleControl.prototype.onAdd=function(i){return this._map=i,this._container=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",i.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ScaleControl.prototype.onRemove=function(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ScaleControl.prototype.setUnit=function(i){this.options.unit=i,updateScale(this._map,this._container,this.options)};var FullscreenControl=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof i.window.HTMLElement?this._container=o.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};FullscreenControl.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},FullscreenControl.prototype.onRemove=function(){N.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},FullscreenControl.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},FullscreenControl.prototype._setupUI=function(){var o=this._fullscreenButton=N.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},FullscreenControl.prototype._updateTitle=function(){var i=this._getTitle();this._fullscreenButton.setAttribute("aria-label",i),this._fullscreenButton.title=i},FullscreenControl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},FullscreenControl.prototype._isFullscreen=function(){return this._fullscreen},FullscreenControl.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},FullscreenControl.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var tj={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},tU=function(o){function Popup(s){o.call(this),this.options=i.extend(Object.create(tj),s),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(Popup.__proto__=o),Popup.prototype=Object.create(o&&o.prototype),Popup.prototype.constructor=Popup,Popup.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},Popup.prototype.isOpen=function(){return!!this._map},Popup.prototype.remove=function(){return this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},Popup.prototype.getLngLat=function(){return this._lngLat},Popup.prototype.setLngLat=function(o){return this._lngLat=i.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Popup.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Popup.prototype.getElement=function(){return this._container},Popup.prototype.setText=function(o){return this.setDOMContent(i.window.document.createTextNode(o))},Popup.prototype.setHTML=function(o){var s,x=i.window.document.createDocumentFragment(),_=i.window.document.createElement("body");for(_.innerHTML=o;s=_.firstChild;)x.appendChild(s);return this.setDOMContent(x)},Popup.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Popup.prototype.setMaxWidth=function(i){return this.options.maxWidth=i,this._update(),this},Popup.prototype.setDOMContent=function(i){return this._createContent(),this._content.appendChild(i),this._update(),this},Popup.prototype.addClassName=function(i){this._container&&this._container.classList.add(i)},Popup.prototype.removeClassName=function(i){this._container&&this._container.classList.remove(i)},Popup.prototype.toggleClassName=function(i){if(this._container)return this._container.classList.toggle(i)},Popup.prototype._createContent=function(){this._content&&N.remove(this._content),this._content=N.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=N.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Popup.prototype._onMouseUp=function(i){this._update(i.point)},Popup.prototype._onMouseMove=function(i){this._update(i.point)},Popup.prototype._onDrag=function(i){this._update(i.point)},Popup.prototype._update=function(o){var s=this,x=this._lngLat||this._trackPointer;if(this._map&&x&&this._content&&(!this._container&&(this._container=N.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=N.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(i){return s._container.classList.add(i)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=smartWrap(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||o)){var _=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat),F=this.options.anchor,j=function normalizeOffset(o){if(!o)return normalizeOffset(new i.Point(0,0));if("number"==typeof o){var s=Math.round(Math.sqrt(.5*Math.pow(o,2)));return{center:new i.Point(0,0),top:new i.Point(0,o),"top-left":new i.Point(s,s),"top-right":new i.Point(-s,s),bottom:new i.Point(0,-o),"bottom-left":new i.Point(s,-s),"bottom-right":new i.Point(-s,-s),left:new i.Point(o,0),right:new i.Point(-o,0)}}if(!(o instanceof i.Point||Array.isArray(o)))return{center:i.Point.convert(o.center||[0,0]),top:i.Point.convert(o.top||[0,0]),"top-left":i.Point.convert(o["top-left"]||[0,0]),"top-right":i.Point.convert(o["top-right"]||[0,0]),bottom:i.Point.convert(o.bottom||[0,0]),"bottom-left":i.Point.convert(o["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(o["bottom-right"]||[0,0]),left:i.Point.convert(o.left||[0,0]),right:i.Point.convert(o.right||[0,0])};var x=i.Point.convert(o);return{center:x,top:x,"top-left":x,"top-right":x,bottom:x,"bottom-left":x,"bottom-right":x,left:x,right:x}}(this.options.offset);if(!F){var G,Z=this._container.offsetWidth,X=this._container.offsetHeight;G=_.y+j.bottom.y<X?["top"]:_.y>this._map.transform.height-X?["bottom"]:[],_.x<Z/2?G.push("left"):_.x>this._map.transform.width-Z/2&&G.push("right"),F=0===G.length?"bottom":G.join("-")}var J=_.add(j[F]).round();N.setTransform(this._container,tO[F]+" translate("+J.x+"px,"+J.y+"px)"),applyAnchorClass(this._container,F,"popup")}},Popup.prototype._onClose=function(){this.remove()},Popup}(i.Evented),tV={version:i.version,supported:F,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:tP,NavigationControl:NavigationControl,GeolocateControl:tF,AttributionControl:AttributionControl,ScaleControl:ScaleControl,FullscreenControl:FullscreenControl,Popup:tU,Marker:tD,Style:e6,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:function(){getGlobalWorkerPool().acquire(eJ)},clearPrewarmedResources:function(){var i=s;i&&(i.isPreloaded()&&1===i.numActive()?(i.release(eJ),s=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(token){i.config.ACCESS_TOKEN=token},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(url){i.config.API_URL=url},get workerCount(){return WorkerPool.workerCount},set workerCount(count){WorkerPool.workerCount=count},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(numRequests){i.config.MAX_PARALLEL_IMAGE_REQUESTS=numRequests},clearStorage:function(o){i.clearTileCache(o)},workerUrl:""};return tV}),s}()},27084:function(i){"use strict";i.exports=Math.log2||function(i){return Math.log(i)*Math.LOG2E}},16825:function(i,o,s){"use strict";i.exports=function(i,o){o||(o=i,i=window);var s=0,_=0,F=0,N={shift:!1,alt:!1,control:!1,meta:!1},j=!1;function updateMods(i){var o=!1;return"altKey"in i&&(o=o||i.altKey!==N.alt,N.alt=!!i.altKey),"shiftKey"in i&&(o=o||i.shiftKey!==N.shift,N.shift=!!i.shiftKey),"ctrlKey"in i&&(o=o||i.ctrlKey!==N.control,N.control=!!i.ctrlKey),"metaKey"in i&&(o=o||i.metaKey!==N.meta,N.meta=!!i.metaKey),o}function handleEvent(i,j){var G=x.x(j),Z=x.y(j);"buttons"in j&&(i=0|j.buttons),(i!==s||G!==_||Z!==F||updateMods(j))&&(s=0|i,_=G||0,F=Z||0,o&&o(s,_,F,N))}function clearState(i){handleEvent(0,i)}function handleBlur(){(s||_||F||N.shift||N.alt||N.meta||N.control)&&(_=F=0,s=0,N.shift=N.alt=N.control=N.meta=!1,o&&o(0,0,0,N))}function handleMods(i){updateMods(i)&&o&&o(s,_,F,N)}function handleMouseMove(i){0===x.buttons(i)?handleEvent(0,i):handleEvent(s,i)}function handleMouseDown(i){handleEvent(s|x.buttons(i),i)}function handleMouseUp(i){handleEvent(s&~x.buttons(i),i)}function attachListeners(){j||(j=!0,i.addEventListener("mousemove",handleMouseMove),i.addEventListener("mousedown",handleMouseDown),i.addEventListener("mouseup",handleMouseUp),i.addEventListener("mouseleave",clearState),i.addEventListener("mouseenter",clearState),i.addEventListener("mouseout",clearState),i.addEventListener("mouseover",clearState),i.addEventListener("blur",handleBlur),i.addEventListener("keyup",handleMods),i.addEventListener("keydown",handleMods),i.addEventListener("keypress",handleMods),i!==window&&(window.addEventListener("blur",handleBlur),window.addEventListener("keyup",handleMods),window.addEventListener("keydown",handleMods),window.addEventListener("keypress",handleMods)))}attachListeners();var G={element:i};return Object.defineProperties(G,{enabled:{get:function(){return j},set:function(o){o?attachListeners():j&&(j=!1,i.removeEventListener("mousemove",handleMouseMove),i.removeEventListener("mousedown",handleMouseDown),i.removeEventListener("mouseup",handleMouseUp),i.removeEventListener("mouseleave",clearState),i.removeEventListener("mouseenter",clearState),i.removeEventListener("mouseout",clearState),i.removeEventListener("mouseover",clearState),i.removeEventListener("blur",handleBlur),i.removeEventListener("keyup",handleMods),i.removeEventListener("keydown",handleMods),i.removeEventListener("keypress",handleMods),i!==window&&(window.removeEventListener("blur",handleBlur),window.removeEventListener("keyup",handleMods),window.removeEventListener("keydown",handleMods),window.removeEventListener("keypress",handleMods)))},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return _},enumerable:!0},y:{get:function(){return F},enumerable:!0},mods:{get:function(){return N},enumerable:!0}}),G};var x=s(74311)},48956:function(i){var o={left:0,top:0};i.exports=function(i,s,x){s=s||i.currentTarget||i.srcElement,Array.isArray(x)||(x=[0,0]);var _,F=i.clientX||0,N=i.clientY||0,j=(_=s)===window||_===document||_===document.body?o:_.getBoundingClientRect();return x[0]=F-j.left,x[1]=N-j.top,x}},74311:function(i,o){"use strict";function mouseElement(i){return i.target||i.srcElement||window}o.buttons=function(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){var o=i.which;if(2===o)return 4;if(3===o)return 2;if(o>0)return 1<<o-1}else if("button"in i){var o=i.button;if(1===o)return 4;if(2===o)return 2;if(o>=0)return 1<<o}}return 0},o.element=mouseElement,o.x=function(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var o=mouseElement(i).getBoundingClientRect();return i.clientX-o.left}return 0},o.y=function(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var o=mouseElement(i).getBoundingClientRect();return i.clientY-o.top}return 0}},1195:function(i,o,s){"use strict";var x=s(75686);i.exports=function(i,o,s){"function"==typeof i&&(s=!!o,o=i,i=window);var _=x("ex",i),listener=function(i){s&&i.preventDefault();var x=i.deltaX||0,F=i.deltaY||0,N=i.deltaZ||0,j=i.deltaMode,G=1;switch(j){case 1:G=_;break;case 2:G=window.innerHeight}if(x*=G,F*=G,N*=G,x||F||N)return o(x,F,N,i)};return i.addEventListener("wheel",listener),listener}},7417:function(i,o,s){var x,_,F;_="Promise",(F=void 0!==s.g?s.g:this)[_]=F[_]||function(){"use strict";var i,o,s,x=Object.prototype.toString,_="undefined"!=typeof setImmediate?function(i){return setImmediate(i)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function(i,o,s,x){return Object.defineProperty(i,o,{value:s,writable:!0,configurable:!1!==x})}}catch(o){i=function(i,o,s){return i[o]=s,i}}function schedule(i,x){s.add(i,x),o||(o=_(s.drain))}function isThenable(i){var o,s=typeof i;return null!=i&&("object"==s||"function"==s)&&(o=i.then),"function"==typeof o&&o}function notify(){for(var i=0;i<this.chain.length;i++)(function(i,o,s){var x,_;try{!1===o?s.reject(i.msg):(x=!0===o?i.msg:o.call(void 0,i.msg))===s.promise?s.reject(TypeError("Promise-chain cycle")):(_=isThenable(x))?_.call(x,s.resolve,s.reject):s.resolve(x)}catch(i){s.reject(i)}})(this,1===this.state?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function resolve(i){var o,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(o=isThenable(i))?schedule(function(){var x=new MakeDefWrapper(s);try{o.call(i,function(){resolve.apply(x,arguments)},function(){reject.apply(x,arguments)})}catch(i){reject.call(x,i)}}):(s.msg=i,s.state=1,s.chain.length>0&&schedule(notify,s))}catch(i){reject.call(new MakeDefWrapper(s),i)}}}function reject(i){var o=this;!o.triggered&&(o.triggered=!0,o.def&&(o=o.def),o.msg=i,o.state=2,o.chain.length>0&&schedule(notify,o))}function iteratePromises(i,o,s,x){for(var _=0;_<o.length;_++)!function(_){i.resolve(o[_]).then(function(i){s(_,i)},x)}(_)}function MakeDefWrapper(i){this.def=i,this.triggered=!1}function MakeDef(i){this.promise=i,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(i){if("function"!=typeof i)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new MakeDef(this);this.then=function(i,s){var x={success:"function"!=typeof i||i,failure:"function"==typeof s&&s};return x.promise=new this.constructor(function(i,o){if("function"!=typeof i||"function"!=typeof o)throw TypeError("Not a function");x.resolve=i,x.reject=o}),o.chain.push(x),0!==o.state&&schedule(notify,o),x.promise},this.catch=function(i){return this.then(void 0,i)};try{i.call(void 0,function(i){resolve.call(o,i)},function(i){reject.call(o,i)})}catch(i){reject.call(o,i)}}s=function(){var i,s,x;function Item(i,o){this.fn=i,this.self=o,this.next=void 0}return{add:function(o,_){x=new Item(o,_),s?s.next=x:i=x,s=x,x=void 0},drain:function(){var x=i;for(i=s=o=void 0;x;)x.fn.call(x.self),x=x.next}}}();var F=i({},"constructor",Promise,!1);return Promise.prototype=F,i(F,"__NPO__",0,!1),i(Promise,"resolve",function(i){return i&&"object"==typeof i&&1===i.__NPO__?i:new this(function(o,s){if("function"!=typeof o||"function"!=typeof s)throw TypeError("Not a function");o(i)})}),i(Promise,"reject",function(i){return new this(function(o,s){if("function"!=typeof o||"function"!=typeof s)throw TypeError("Not a function");s(i)})}),i(Promise,"all",function(i){var o=this;return"[object Array]"!=x.call(i)?o.reject(TypeError("Not an array")):0===i.length?o.resolve([]):new o(function(s,x){if("function"!=typeof s||"function"!=typeof x)throw TypeError("Not a function");var _=i.length,F=Array(_),N=0;iteratePromises(o,i,function(i,o){F[i]=o,++N===_&&s(F)},x)})}),i(Promise,"race",function(i){var o=this;return"[object Array]"!=x.call(i)?o.reject(TypeError("Not an array")):new o(function(s,x){if("function"!=typeof s||"function"!=typeof x)throw TypeError("Not a function");iteratePromises(o,i,function(i,o){s(o)},x)})}),Promise}(),i.exports?i.exports=F[_]:void 0===(x=(function(){return F[_]}).call(o,s,o,i))||(i.exports=x)},18625:function(i){var o=Math.PI,s=120*(o/180);function line(i,o,s,x){return["C",i,o,s,x,s,x]}function quadratic(i,o,s,x,_,F){return["C",i/3+2/3*s,o/3+2/3*x,_/3+2/3*s,F/3+2/3*x,_,F]}function rotate(i,o,s){return{x:i*Math.cos(s)-o*Math.sin(s),y:i*Math.sin(s)+o*Math.cos(s)}}i.exports=function(i){for(var x,_=[],F=0,N=0,j=0,G=0,Z=null,X=null,J=0,$=0,ee=0,et=i.length;ee<et;ee++){var er,en=i[ee],ei=en[0];switch(ei){case"M":j=en[1],G=en[2];break;case"A":(en=function arc(i,x,_,F,N,j,G,Z,X,J){if(J)ec=J[0],eu=J[1],es=J[2],el=J[3];else{var $=rotate(i,x,-N);i=$.x,x=$.y,Z=($=rotate(Z,X,-N)).x,X=$.y;var ee=(i-Z)/2,et=(x-X)/2,er=ee*ee/(_*_)+et*et/(F*F);er>1&&(_*=er=Math.sqrt(er),F*=er);var en=_*_,ei=F*F,eo=(j==G?-1:1)*Math.sqrt(Math.abs((en*ei-en*et*et-ei*ee*ee)/(en*et*et+ei*ee*ee)));eo==1/0&&(eo=1);var es=eo*_*et/F+(i+Z)/2,el=-(eo*F)*ee/_+(x+X)/2,ec=Math.asin(((x-el)/F).toFixed(9)),eu=Math.asin(((X-el)/F).toFixed(9));ec=i<es?o-ec:ec,eu=Z<es?o-eu:eu,ec<0&&(ec=2*o+ec),eu<0&&(eu=2*o+eu),G&&ec>eu&&(ec-=2*o),!G&&eu>ec&&(eu-=2*o)}if(Math.abs(eu-ec)>s)var ef=eu,eh=Z,ed=X,ep=arc(Z=es+_*Math.cos(eu=ec+s*(G&&eu>ec?1:-1)),X=el+F*Math.sin(eu),_,F,N,0,G,eh,ed,[eu,ef,es,el]);var eg=Math.tan((eu-ec)/4),em=4/3*_*eg,ey=4/3*F*eg,ev=[2*i-(i+em*Math.sin(ec)),2*x-(x-ey*Math.cos(ec)),Z+em*Math.sin(eu),X-ey*Math.cos(eu),Z,X];if(J)return ev;ep&&(ev=ev.concat(ep));for(var ex=0;ex<ev.length;){var e_=rotate(ev[ex],ev[ex+1],N);ev[ex++]=e_.x,ev[ex++]=e_.y}return ev}(J,$,en[1],en[2],en[3]*(o/180),en[4],en[5],en[6],en[7])).unshift("C"),en.length>7&&(_.push(en.splice(0,7)),en.unshift("C"));break;case"S":var eo=J,es=$;("C"==x||"S"==x)&&(eo+=eo-F,es+=es-N),en=["C",eo,es,en[1],en[2],en[3],en[4]];break;case"T":"Q"==x||"T"==x?(Z=2*J-Z,X=2*$-X):(Z=J,X=$),en=quadratic(J,$,Z,X,en[1],en[2]);break;case"Q":Z=en[1],X=en[2],en=quadratic(J,$,en[1],en[2],en[3],en[4]);break;case"L":en=line(J,$,en[1],en[2]);break;case"H":en=line(J,$,en[1],$);break;case"V":en=line(J,$,J,en[1]);break;case"Z":en=line(J,$,j,G)}x=ei,J=en[en.length-2],$=en[en.length-1],en.length>4?(F=en[en.length-4],N=en[en.length-3]):(F=J,N=$),_.push(en)}return _}},56131:function(i){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;i.exports=!function(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de","5"===Object.getOwnPropertyNames(i)[0])return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var x=Object.getOwnPropertyNames(o).map(function(i){return o[i]});if("0123456789"!==x.join(""))return!1;var _={};if("abcdefghijklmnopqrst".split("").forEach(function(i){_[i]=i}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},_)).join(""))return!1;return!0}catch(i){return!1}}()?function(i,_){for(var F,N,j=function(i){if(null==i)throw TypeError("Object.assign cannot be called with null or undefined");return Object(i)}(i),G=1;G<arguments.length;G++){for(var Z in F=Object(arguments[G]))s.call(F,Z)&&(j[Z]=F[Z]);if(o){N=o(F);for(var X=0;X<N.length;X++)x.call(F,N[X])&&(j[N[X]]=F[N[X]])}}return j}:Object.assign},65848:function(i){"use strict";var numberIsNaN=function(i){return i!=i};i.exports=function(i,o){return 0===i&&0===o?1/i==1/o:!!(i===o||numberIsNaN(i)&&numberIsNaN(o))}},64003:function(i,o,s){"use strict";var x=s(17045),_=s(68222),F=s(65848),N=s(27015),j=s(55572),G=_(N(),Object);x(G,{getPolyfill:N,implementation:F,shim:j}),i.exports=G},27015:function(i,o,s){"use strict";var x=s(65848);i.exports=function(){return"function"==typeof Object.is?Object.is:x}},55572:function(i,o,s){"use strict";var x=s(27015),_=s(17045);i.exports=function(){var i=x();return _(Object,{is:i},{is:function(){return Object.is!==i}}),i}},99019:function(i,o,s){"use strict";var x;if(!Object.keys){var _=Object.prototype.hasOwnProperty,F=Object.prototype.toString,N=s(64178),j=Object.prototype.propertyIsEnumerable,G=!j.call({toString:null},"toString"),Z=j.call(function(){},"prototype"),X=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(i){var o=i.constructor;return o&&o.prototype===i},J={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},$=function(){if("undefined"==typeof window)return!1;for(var i in window)try{if(!J["$"+i]&&_.call(window,i)&&null!==window[i]&&"object"==typeof window[i])try{equalsConstructorPrototype(window[i])}catch(i){return!0}}catch(i){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(i){if("undefined"==typeof window||!$)return equalsConstructorPrototype(i);try{return equalsConstructorPrototype(i)}catch(i){return!1}};x=function(i){var o=null!==i&&"object"==typeof i,s="[object Function]"===F.call(i),x=N(i),j=o&&"[object String]"===F.call(i),J=[];if(!o&&!s&&!x)throw TypeError("Object.keys called on a non-object");var $=Z&&s;if(j&&i.length>0&&!_.call(i,0))for(var ee=0;ee<i.length;++ee)J.push(String(ee));if(x&&i.length>0)for(var et=0;et<i.length;++et)J.push(String(et));else for(var er in i)!($&&"prototype"===er)&&_.call(i,er)&&J.push(String(er));if(G)for(var en=equalsConstructorPrototypeIfNotBuggy(i),ei=0;ei<X.length;++ei)!(en&&"constructor"===X[ei])&&_.call(i,X[ei])&&J.push(X[ei]);return J}}i.exports=x},8709:function(i,o,s){"use strict";var x=Array.prototype.slice,_=s(64178),F=Object.keys,N=F?function(i){return F(i)}:s(99019),j=Object.keys;N.shim=function(){return Object.keys?!function(){var i=Object.keys(arguments);return i&&i.length===arguments.length}(1,2)&&(Object.keys=function(i){return _(i)?j(x.call(i)):j(i)}):Object.keys=N,Object.keys||N},i.exports=N},64178:function(i){"use strict";var o=Object.prototype.toString;i.exports=function(i){var s=o.call(i),x="[object Arguments]"===s;return x||(x="[object Array]"!==s&&null!==i&&"object"==typeof i&&"number"==typeof i.length&&i.length>=0&&"[object Function]"===o.call(i.callee)),x}},88641:function(i){"use strict";function parse(i,o){if("string"!=typeof i)return[i];var s=[i];"string"==typeof o||Array.isArray(o)?o={brackets:o}:o||(o={});var x=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],_=o.escape||"___",F=!!o.flat;x.forEach(function(i){var o=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),x=[];function replaceToken(o,F,N){var j=s.push(o.slice(i[0].length,-i[1].length))-1;return x.push(j),_+j+_}s.forEach(function(i,x){for(var _,F=0;i!=_;)if(_=i,i=i.replace(o,replaceToken),F++>1e4)throw Error("References have circular dependency. Please, check them.");s[x]=i}),x=x.reverse(),s=s.map(function(o){return x.forEach(function(s){o=o.replace(RegExp("(\\"+_+s+"\\"+_+")","g"),i[0]+"$1"+i[1])}),o})});var N=RegExp("\\"+_+"([0-9]+)\\"+_);return F?s:function nest(i,o,s){for(var x,_=[],F=0;x=N.exec(i);){if(F++>1e4)throw Error("Circular references in parenthesis");_.push(i.slice(0,x.index)),_.push(nest(o[x[1]],o)),i=i.slice(x.index+x[0].length)}return _.push(i),_}(s[0],s)}function stringify(i,o){if(o&&o.flat){var s,x=o&&o.escape||"___",_=i[0];if(!_)return"";for(var F=RegExp("\\"+x+"([0-9]+)\\"+x),N=0;_!=s;){if(N++>1e4)throw Error("Circular references in "+i);s=_,_=_.replace(F,replaceRef)}return _}return i.reduce(function f(i,o){return Array.isArray(o)&&(o=o.reduce(f,"")),i+o},"");function replaceRef(o,s){if(null==i[s])throw Error("Reference "+s+"is undefined");return i[s]}}function parenthesis(i,o){return Array.isArray(i)?stringify(i,o):parse(i,o)}parenthesis.parse=parse,parenthesis.stringify=stringify,i.exports=parenthesis},18863:function(i,o,s){"use strict";var x=s(71299);i.exports=function(i){var o;return arguments.length>1&&(i=arguments),"string"==typeof i?i=i.split(/\s/).map(parseFloat):"number"==typeof i&&(i=[i]),i.length&&"number"==typeof i[0]?o=1===i.length?{width:i[0],height:i[0],x:0,y:0}:2===i.length?{width:i[0],height:i[1],x:0,y:0}:{x:i[0],y:i[1],width:i[2]-i[0]||0,height:i[3]-i[1]||0}:i&&(o={x:(i=x(i,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:i.top||0},null==i.width?i.right?o.width=i.right-o.x:o.width=0:o.width=i.width,null==i.height?i.bottom?o.height=i.bottom-o.y:o.height=0:o.height=i.height),o}},95616:function(i){i.exports=function(i){var _=[];return i.replace(s,function(i,s,F){var N,j=s.toLowerCase();for(F=(N=F.match(x))?N.map(Number):[],"m"==j&&F.length>2&&(_.push([s].concat(F.splice(0,2))),j="l",s="m"==s?"l":"L");;){if(F.length==o[j])return F.unshift(s),_.push(F);if(F.length<o[j])throw Error("malformed path data");_.push([s].concat(F.splice(0,o[j])))}}),_};var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig,x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},25677:function(i){i.exports=function(i,o){o||(o=[0,""]);var s=parseFloat(i=String(i),10);return o[0]=s,o[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},9748:function(i,o,s){var x=s(90386);(function(){var o,s,_,F;"undefined"!=typeof performance&&null!==performance&&performance.now?i.exports=function(){return performance.now()}:null!=x&&x.hrtime?(i.exports=function(){return(o()-F)/1e6},s=x.hrtime,F=(o=function(){var i;return 1e9*(i=s())[0]+i[1]})()-1e9*x.uptime()):Date.now?(i.exports=function(){return Date.now()-_},_=Date.now()):(i.exports=function(){return new Date().getTime()-_},_=new Date().getTime())}).call(this)},71299:function(i){"use strict";i.exports=function(i,o,s){var x,_,F={};if("string"==typeof o&&(o=toList(o)),Array.isArray(o)){var N={};for(_=0;_<o.length;_++)N[o[_]]=!0;o=N}for(x in o)o[x]=toList(o[x]);var j={};for(x in o){var G=o[x];if(Array.isArray(G))for(_=0;_<G.length;_++){var Z=G[_];if(s&&(j[Z]=!0),Z in i){if(F[x]=i[Z],s)for(var X=_;X<G.length;X++)j[G[X]]=!0;break}}else x in i&&(o[x]&&(F[x]=i[x]),s&&(j[x]=!0))}if(s)for(x in i)j[x]||(F[x]=i[x]);return F};var o={};function toList(i){return o[i]?o[i]:("string"==typeof i&&(i=o[i]=i.split(/\s*,\s*|\s+/)),i)}},38258:function(i){i.exports=function(i,o,s,x){var _=i[0],F=i[1],N=!1;void 0===s&&(s=0),void 0===x&&(x=o.length);for(var j=x-s,G=0,Z=j-1;G<j;Z=G++){var X=o[G+s][0],J=o[G+s][1],$=o[Z+s][0],ee=o[Z+s][1];J>F!=ee>F&&_<($-X)*(F-J)/(ee-J)+X&&(N=!N)}return N}},52142:function(i,o,s){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var x,_=s(69444),F=s(29023),N=s(87263),j=s(11328),G=s(55968),Z=s(10670),X=!1,J=F();function operate(i,o,s){var _=x.segments(i),F=x.segments(o),N=s(x.combine(_,F));return x.polygon(N)}x={buildLog:function(i){return!0===i?X=_():!1===i&&(X=!1),!1!==X&&X.list},epsilon:function(i){return J.epsilon(i)},segments:function(i){var o=N(!0,J,X);return i.regions.forEach(o.addRegion),{segments:o.calculate(i.inverted),inverted:i.inverted}},combine:function(i,o){return{combined:N(!1,J,X).calculate(i.segments,i.inverted,o.segments,o.inverted),inverted1:i.inverted,inverted2:o.inverted}},selectUnion:function(i){return{segments:G.union(i.combined,X),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:G.intersect(i.combined,X),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:G.difference(i.combined,X),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:G.differenceRev(i.combined,X),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:G.xor(i.combined,X),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:j(i.segments,J,X),inverted:i.inverted}},polygonFromGeoJSON:function(i){return Z.toPolygon(x,i)},polygonToGeoJSON:function(i){return Z.fromPolygon(x,J,i)},union:function(i,o){return operate(i,o,x.selectUnion)},intersect:function(i,o){return operate(i,o,x.selectIntersect)},difference:function(i,o){return operate(i,o,x.selectDifference)},differenceRev:function(i,o){return operate(i,o,x.selectDifferenceRev)},xor:function(i,o){return operate(i,o,x.selectXor)}},"object"==typeof window&&(window.PolyBool=x),i.exports=x},69444:function(i){i.exports=function(){var i,o=0,s=!1;function push(o,s){return i.list.push({type:o,data:s?JSON.parse(JSON.stringify(s)):void 0}),i}return i={list:[],segmentId:function(){return o++},checkIntersection:function(i,o){return push("check",{seg1:i,seg2:o})},segmentChop:function(i,o){return push("div_seg",{seg:i,pt:o}),push("chop",{seg:i,pt:o})},statusRemove:function(i){return push("pop_seg",{seg:i})},segmentUpdate:function(i){return push("seg_update",{seg:i})},segmentNew:function(i,o){return push("new_seg",{seg:i,primary:o})},segmentRemove:function(i){return push("rem_seg",{seg:i})},tempStatus:function(i,o,s){return push("temp_status",{seg:i,above:o,below:s})},rewind:function(i){return push("rewind",{seg:i})},status:function(i,o,s){return push("status",{seg:i,above:o,below:s})},vert:function(o){return o===s?i:(s=o,push("vert",{x:o}))},log:function(i){return"string"!=typeof i&&(i=JSON.stringify(i,!1,"  ")),push("log",{txt:i})},reset:function(){return push("reset")},selected:function(i){return push("selected",{segs:i})},chainStart:function(i){return push("chain_start",{seg:i})},chainRemoveHead:function(i,o){return push("chain_rem_head",{index:i,pt:o})},chainRemoveTail:function(i,o){return push("chain_rem_tail",{index:i,pt:o})},chainNew:function(i,o){return push("chain_new",{pt1:i,pt2:o})},chainMatch:function(i){return push("chain_match",{index:i})},chainClose:function(i){return push("chain_close",{index:i})},chainAddHead:function(i,o){return push("chain_add_head",{index:i,pt:o})},chainAddTail:function(i,o){return push("chain_add_tail",{index:i,pt:o})},chainConnect:function(i,o){return push("chain_con",{index1:i,index2:o})},chainReverse:function(i){return push("chain_rev",{index:i})},chainJoin:function(i,o){return push("chain_join",{index1:i,index2:o})},done:function(){return push("done")}}}},29023:function(i){i.exports=function(i){"number"!=typeof i&&(i=1e-10);var o={epsilon:function(o){return"number"==typeof o&&(i=o),i},pointAboveOrOnLine:function(o,s,x){var _=s[0],F=s[1],N=x[0],j=x[1],G=o[0];return(N-_)*(o[1]-F)-(j-F)*(G-_)>=-i},pointBetween:function(o,s,x){var _=o[1]-s[1],F=x[0]-s[0],N=o[0]-s[0],j=x[1]-s[1],G=N*F+_*j;return!(G<i)&&!(G-(F*F+j*j)>-i)},pointsSameX:function(o,s){return Math.abs(o[0]-s[0])<i},pointsSameY:function(o,s){return Math.abs(o[1]-s[1])<i},pointsSame:function(i,s){return o.pointsSameX(i,s)&&o.pointsSameY(i,s)},pointsCompare:function(i,s){return o.pointsSameX(i,s)?o.pointsSameY(i,s)?0:i[1]<s[1]?-1:1:i[0]<s[0]?-1:1},pointsCollinear:function(o,s,x){var _=o[0]-s[0],F=o[1]-s[1],N=s[0]-x[0];return Math.abs(_*(s[1]-x[1])-N*F)<i},linesIntersect:function(o,s,x,_){var F=s[0]-o[0],N=s[1]-o[1],j=_[0]-x[0],G=_[1]-x[1],Z=F*G-N*j;if(Math.abs(Z)<i)return!1;var X=o[0]-x[0],J=o[1]-x[1],$=(j*J-G*X)/Z,ee=(F*J-N*X)/Z,et={alongA:0,alongB:0,pt:[o[0]+$*F,o[1]+$*N]};return $<=-i?et.alongA=-2:$<i?et.alongA=-1:$-1<=-i?et.alongA=0:$-1<i?et.alongA=1:et.alongA=2,ee<=-i?et.alongB=-2:ee<i?et.alongB=-1:ee-1<=-i?et.alongB=0:ee-1<i?et.alongB=1:et.alongB=2,et},pointInsideRegion:function(o,s){for(var x=o[0],_=o[1],F=s[s.length-1][0],N=s[s.length-1][1],j=!1,G=0;G<s.length;G++){var Z=s[G][0],X=s[G][1];X-_>i!=N-_>i&&(F-Z)*(_-X)/(N-X)+Z-x>i&&(j=!j),F=Z,N=X}return j}};return o}},10670:function(i){i.exports={toPolygon:function(i,o){function GeoPoly(o){if(o.length<=0)return i.segments({inverted:!1,regions:[]});function LineString(o){var s=o.slice(0,o.length-1);return i.segments({inverted:!1,regions:[s]})}for(var s=LineString(o[0]),x=1;x<o.length;x++)s=i.selectDifference(i.combine(s,LineString(o[x])));return s}if("Polygon"===o.type)return i.polygon(GeoPoly(o.coordinates));if("MultiPolygon"===o.type){for(var s=i.segments({inverted:!1,regions:[]}),x=0;x<o.coordinates.length;x++)s=i.selectUnion(i.combine(s,GeoPoly(o.coordinates[x])));return i.polygon(s)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(i,o,s){function regionInsideRegion(i,s){return o.pointInsideRegion([(i[0][0]+i[1][0])*.5,(i[0][1]+i[1][1])*.5],s)}function newNode(i){return{region:i,children:[]}}s=i.polygon(i.segments(s));for(var x=newNode(null),_=0;_<s.regions.length;_++){var F=s.regions[_];F.length<3||function addChild(i,o){for(var s=0;s<i.children.length;s++){var x=i.children[s];if(regionInsideRegion(o,x.region)){addChild(x,o);return}}for(var _=newNode(o),s=0;s<i.children.length;s++){var x=i.children[s];regionInsideRegion(x.region,o)&&(_.children.push(x),i.children.splice(s,1),s--)}i.children.push(_)}(x,F)}function forceWinding(i,o){for(var s=0,x=i[i.length-1][0],_=i[i.length-1][1],F=[],N=0;N<i.length;N++){var j=i[N][0],G=i[N][1];F.push([j,G]),s+=G*x-j*_,x=j,_=G}return s<0!==o&&F.reverse(),F.push([F[0][0],F[0][1]]),F}for(var N=[],_=0;_<x.children.length;_++)(function addExterior(i){var o=[forceWinding(i.region,!1)];N.push(o);for(var s=0;s<i.children.length;s++)o.push(function(i){for(var o=0;o<i.children.length;o++)addExterior(i.children[o]);return forceWinding(i.region,!0)}(i.children[s]))})(x.children[_]);return N.length<=0?{type:"Polygon",coordinates:[]}:1==N.length?{type:"Polygon",coordinates:N[0]}:{type:"MultiPolygon",coordinates:N}}}},87263:function(i,o,s){var x=s(26859);i.exports=function(i,o,s){function segmentCopy(i,o,x){return{id:s?s.segmentId():-1,start:i,end:o,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var _=x.create();function eventAdd(i,s){_.insertBefore(i,function(x){var _,F,N,j,G,Z;return _=i.isStart,F=i.pt,N=x.isStart,j=x.pt,G=x.other.pt,(0!==(Z=o.pointsCompare(F,j))?Z:o.pointsSame(s,G)?0:_!==N?_?1:-1:o.pointAboveOrOnLine(s,N?j:G,N?G:j)?1:-1)<0})}function eventAddSegment(i,o){var s,_,F=(eventAdd(s=x.node({isStart:!0,pt:i.start,seg:i,primary:o,other:null,status:null}),i.end),s);return _=x.node({isStart:!1,pt:i.end,seg:i,primary:o,other:F,status:null}),F.other=_,eventAdd(_,F.pt),F}function eventDivide(i,o){var x=segmentCopy(o,i.seg.end,i.seg);return s&&s.segmentChop(i.seg,o),i.other.remove(),i.seg.end=o,i.other.pt=o,eventAdd(i.other,i.pt),eventAddSegment(x,i.primary)}function calculate(F,N){var j=x.create();function checkIntersection(i,x){var _=i.seg,F=x.seg,N=_.start,j=_.end,G=F.start,Z=F.end;s&&s.checkIntersection(_,F);var X=o.linesIntersect(N,j,G,Z);if(!1===X){if(!o.pointsCollinear(N,j,G)||o.pointsSame(N,Z)||o.pointsSame(j,G))return!1;var J=o.pointsSame(N,G),$=o.pointsSame(j,Z);if(J&&$)return x;var ee=!J&&o.pointBetween(N,G,Z),et=!$&&o.pointBetween(j,G,Z);if(J)return et?eventDivide(x,j):eventDivide(i,Z),x;ee&&($||(et?eventDivide(x,j):eventDivide(i,Z)),eventDivide(x,N))}else 0===X.alongA&&(-1===X.alongB?eventDivide(i,G):0===X.alongB?eventDivide(i,X.pt):1===X.alongB&&eventDivide(i,Z)),0===X.alongB&&(-1===X.alongA?eventDivide(x,N):0===X.alongA?eventDivide(x,X.pt):1===X.alongA&&eventDivide(x,j));return!1}for(var G=[];!_.isEmpty();){var Z=_.getHead();if(s&&s.vert(Z.pt[0]),Z.isStart){s&&s.segmentNew(Z.seg,Z.primary);var X,J,$=function(i){return j.findTransition(function(s){return function(i,s){var x=i.seg.start,_=i.seg.end,F=s.seg.start,N=s.seg.end;return o.pointsCollinear(x,F,N)?o.pointsCollinear(_,F,N)?1:o.pointAboveOrOnLine(_,F,N)?1:-1:o.pointAboveOrOnLine(x,F,N)?1:-1}(i,s.ev)>0})}(Z),ee=$.before?$.before.ev:null,et=$.after?$.after.ev:null;s&&s.tempStatus(Z.seg,!!ee&&ee.seg,!!et&&et.seg);var er=function(){if(ee){var i=checkIntersection(Z,ee);if(i)return i}return!!et&&checkIntersection(Z,et)}();if(er&&(i?(X=null===Z.seg.myFill.below||Z.seg.myFill.above!==Z.seg.myFill.below)&&(er.seg.myFill.above=!er.seg.myFill.above):er.seg.otherFill=Z.seg.myFill,s&&s.segmentUpdate(er.seg),Z.other.remove(),Z.remove()),_.getHead()!==Z){s&&s.rewind(Z.seg);continue}i?(X=null===Z.seg.myFill.below||Z.seg.myFill.above!==Z.seg.myFill.below,et?Z.seg.myFill.below=et.seg.myFill.above:Z.seg.myFill.below=F,X?Z.seg.myFill.above=!Z.seg.myFill.below:Z.seg.myFill.above=Z.seg.myFill.below):null===Z.seg.otherFill&&(J=et?Z.primary===et.primary?et.seg.otherFill.above:et.seg.myFill.above:Z.primary?N:F,Z.seg.otherFill={above:J,below:J}),s&&s.status(Z.seg,!!ee&&ee.seg,!!et&&et.seg),Z.other.status=$.insert(x.node({ev:Z}))}else{var en=Z.status;if(null===en)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(j.exists(en.prev)&&j.exists(en.next)&&checkIntersection(en.prev.ev,en.next.ev),s&&s.statusRemove(en.ev.seg),en.remove(),!Z.primary){var ei=Z.seg.myFill;Z.seg.myFill=Z.seg.otherFill,Z.seg.otherFill=ei}G.push(Z.seg)}_.getHead().remove()}return s&&s.done(),G}return i?{addRegion:function(i){for(var x,_=i[i.length-1],F=0;F<i.length;F++){x=_,_=i[F];var N,j,G=o.pointsCompare(x,_);0!==G&&eventAddSegment((N=G<0?x:_,j=G<0?_:x,{id:s?s.segmentId():-1,start:N,end:j,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(i){return calculate(i,!1)}}:{calculate:function(i,o,s,x){return i.forEach(function(i){eventAddSegment(segmentCopy(i.start,i.end,i),!0)}),s.forEach(function(i){eventAddSegment(segmentCopy(i.start,i.end,i),!1)}),calculate(o,x)}}}},26859:function(i){i.exports={create:function(){var i={root:{root:!0,next:null},exists:function(o){return null!==o&&o!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(o,s){for(var x=i.root,_=i.root.next;null!==_;){if(s(_)){o.prev=_.prev,o.next=_,_.prev.next=o,_.prev=o;return}x=_,_=_.next}x.next=o,o.prev=x,o.next=null},findTransition:function(o){for(var s=i.root,x=i.root.next;null!==x&&!o(x);)s=x,x=x.next;return{before:s===i.root?null:s,after:x,insert:function(i){return i.prev=s,i.next=x,s.next=i,null!==x&&(x.prev=i),i}}}};return i},node:function(i){return i.prev=null,i.next=null,i.remove=function(){i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.prev=null,i.next=null},i}}},11328:function(i){i.exports=function(i,o,s){var x=[],_=[];return i.forEach(function(i){var F=i.start,N=i.end;if(o.pointsSame(F,N)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}s&&s.chainStart(i);var j={index:0,matches_head:!1,matches_pt1:!1},G={index:0,matches_head:!1,matches_pt1:!1},Z=j;function setMatch(i,o,s){return(Z.index=i,Z.matches_head=o,Z.matches_pt1=s,Z===j)?(Z=G,!1):(Z=null,!0)}for(var X=0;X<x.length;X++){var J=x[X],$=J[0];J[1];var ee=J[J.length-1];if(J[J.length-2],o.pointsSame($,F)){if(setMatch(X,!0,!0))break}else if(o.pointsSame($,N)){if(setMatch(X,!0,!1))break}else if(o.pointsSame(ee,F)){if(setMatch(X,!1,!0))break}else if(o.pointsSame(ee,N)&&setMatch(X,!1,!1))break}if(Z===j){x.push([F,N]),s&&s.chainNew(F,N);return}if(Z===G){s&&s.chainMatch(j.index);var et=j.index,er=j.matches_pt1?N:F,en=j.matches_head,J=x[et],ei=en?J[0]:J[J.length-1],eo=en?J[1]:J[J.length-2],es=en?J[J.length-1]:J[0],el=en?J[J.length-2]:J[1];if(o.pointsCollinear(eo,ei,er)&&(en?(s&&s.chainRemoveHead(j.index,er),J.shift()):(s&&s.chainRemoveTail(j.index,er),J.pop()),ei=eo),o.pointsSame(es,er)){x.splice(et,1),o.pointsCollinear(el,es,ei)&&(en?(s&&s.chainRemoveTail(j.index,ei),J.pop()):(s&&s.chainRemoveHead(j.index,ei),J.shift())),s&&s.chainClose(j.index),_.push(J);return}en?(s&&s.chainAddHead(j.index,er),J.unshift(er)):(s&&s.chainAddTail(j.index,er),J.push(er));return}function reverseChain(i){s&&s.chainReverse(i),x[i].reverse()}function appendChain(i,_){var F=x[i],N=x[_],j=F[F.length-1],G=F[F.length-2],Z=N[0],X=N[1];o.pointsCollinear(G,j,Z)&&(s&&s.chainRemoveTail(i,j),F.pop(),j=G),o.pointsCollinear(j,Z,X)&&(s&&s.chainRemoveHead(_,Z),N.shift()),s&&s.chainJoin(i,_),x[i]=F.concat(N),x.splice(_,1)}var ec=j.index,eu=G.index;s&&s.chainConnect(ec,eu);var ef=x[ec].length<x[eu].length;j.matches_head?G.matches_head?ef?(reverseChain(ec),appendChain(ec,eu)):(reverseChain(eu),appendChain(eu,ec)):appendChain(eu,ec):G.matches_head?appendChain(ec,eu):ef?(reverseChain(ec),appendChain(eu,ec)):(reverseChain(eu),appendChain(ec,eu))}),_}},55968:function(i){function select(i,o,s){var x=[];return i.forEach(function(i){var _=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);0!==o[_]&&x.push({id:s?s.segmentId():-1,start:i.start,end:i.end,myFill:{above:1===o[_],below:2===o[_]},otherFill:null})}),s&&s.selected(x),x}i.exports={union:function(i,o){return select(i,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],o)},intersect:function(i,o){return select(i,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],o)},difference:function(i,o){return select(i,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],o)},differenceRev:function(i,o){return select(i,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],o)},xor:function(i,o){return select(i,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],o)}}},14847:function(i,o,s){"use strict";var x=s(21630).Transform,_=s(90715);function ParserStream(){x.call(this,{readableObjectMode:!0})}function ProbeError(i,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack||"",this.name=this.constructor.name,this.message=i,o&&(this.code=o),s&&(this.statusCode=s)}ParserStream.prototype=Object.create(x.prototype),ParserStream.prototype.constructor=ParserStream,_(ParserStream.prototype),o.OF=function(i,o,s){for(var x=o,_=0;_<s.length;)if(i[x++]!==s[_++])return!1;return!0},o.eG=function(i,o){var s=[],x=0;if(o&&"hex"===o)for(;x<i.length;)s.push(parseInt(i.slice(x,x+2),16)),x+=2;else for(;x<i.length;x++)s.push(255&i.charCodeAt(x));return s},o.mP=function(i,o){return i[o]|i[o+1]<<8},o.n8=function(i,o){return i[o+1]|i[o]<<8},o.nm=function(i,o){return i[o]|i[o+1]<<8|i[o+2]<<16|16777216*i[o+3]},o.Ag=function(i,o){return i[o+3]|i[o+2]<<8|i[o+1]<<16|16777216*i[o]},ProbeError.prototype=Object.create(Error.prototype),ProbeError.prototype.constructor=ProbeError},71371:function(i){"use strict";function error(i,o){var s=Error(i);return s.code=o,s}function ExifParser(i,o,s){this.input=i.subarray(o,s),this.start=o;var x=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\x00"!==x&&"MM\x00*"!==x)throw error("invalid TIFF signature","EBADDATA");this.big_endian="M"===x[0]}ExifParser.prototype.each=function(i){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var s=this.ifds_to_read.shift();s.offset&&this.scan_ifd(s.id,s.offset,i)}},ExifParser.prototype.read_uint16=function(i){var o=this.input;if(i+2>o.length)throw error("unexpected EOF","EBADDATA");return this.big_endian?256*o[i]+o[i+1]:o[i]+256*o[i+1]},ExifParser.prototype.read_uint32=function(i){var o=this.input;if(i+4>o.length)throw error("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[i]+65536*o[i+1]+256*o[i+2]+o[i+3]:o[i]+256*o[i+1]+65536*o[i+2]+16777216*o[i+3]},ExifParser.prototype.is_subifd_link=function(i,o){return 0===i&&34665===o||0===i&&34853===o||34665===i&&40965===o},ExifParser.prototype.exif_format_length=function(i){switch(i){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},ExifParser.prototype.exif_format_read=function(i,o){var s;switch(i){case 1:case 2:return this.input[o];case 6:return(s=this.input[o])|(128&s)*33554430;case 3:return this.read_uint16(o);case 8:return(s=this.read_uint16(o))|(32768&s)*131070;case 4:return this.read_uint32(o);case 9:return 0|(s=this.read_uint32(o));default:return null}},ExifParser.prototype.scan_ifd=function(i,o,s){var x=this.read_uint16(o);o+=2;for(var _=0;_<x;_++){var F=this.read_uint16(o),N=this.read_uint16(o+2),j=this.read_uint32(o+4),G=this.exif_format_length(N),Z=j*G,X=Z<=4?o+8:this.read_uint32(o+8),J=!1;if(X+Z>this.input.length)throw error("unexpected EOF","EBADDATA");for(var $=[],ee=X,et=0;et<j;et++,ee+=G){var er=this.exif_format_read(N,ee);if(null===er){$=null;break}$.push(er)}if(Array.isArray($)&&2===N&&($=function(i){try{return decodeURIComponent(escape(i))}catch(o){return i}}(String.fromCharCode.apply(null,$)))&&"\x00"===$[$.length-1]&&($=$.slice(0,-1)),this.is_subifd_link(i,F)&&Array.isArray($)&&Number.isInteger($[0])&&$[0]>0&&(this.ifds_to_read.push({id:F,offset:$[0]}),J=!0),!1===s({is_big_endian:this.big_endian,ifd:i,tag:F,format:N,count:j,entry_offset:o+this.start,data_length:Z,data_offset:X+this.start,value:$,is_subifd_link:J})){this.aborted=!0;return}o+=12}0===i&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},i.exports.ExifParser=ExifParser,i.exports.get_orientation=function(i){var o=0;try{return new ExifParser(i,0,i.length).each(function(i){if(0===i.ifd&&274===i.tag&&Array.isArray(i.value))return o=i.value[0],!1}),o}catch(i){return -1}}},76767:function(i,o,s){"use strict";var x=s(14847).n8,_=s(14847).Ag;function unbox(i,o){if(i.length<4+o)return null;var s=_(i,o);return i.length<s+o||s<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(o+4,o+8)),data:i.slice(o+8,o+s),end:o+s}}function readUIntBE(i,o,s){for(var x=0,_=0;_<s;_++)x=256*x+(i[o+_]||0);return x}i.exports.unbox=unbox,i.exports.readSizeFromMeta=function(i){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(i,o){for(var s=4;;){var F=unbox(i,s);if(!F)break;"iprp"===F.boxtype&&function(i,o){for(var s=0;;){var x=unbox(i,s);if(!x)break;"ipco"===x.boxtype&&function(i,o){for(var s=0;;){var x=unbox(i,s);if(!x)break;switch(x.boxtype){case"ispe":o.sizes.push({width:_(x.data,4),height:_(x.data,8)});break;case"irot":o.transforms.push({type:"irot",value:3&x.data[0]});break;case"imir":o.transforms.push({type:"imir",value:1&x.data[0]})}s=x.end}}(x.data,o),s=x.end}}(F.data,o),"iloc"===F.boxtype&&function(i,o){for(var s=i[4]>>4&15,_=15&i[4],F=i[5]>>4&15,N=x(i,6),j=8,G=0;G<N;G++){var Z=x(i,j),X=x(i,j+=2),J=readUIntBE(i,j+=2,F),$=x(i,j+=F);if(j+=2,0===X&&1===$){var ee=readUIntBE(i,j,s),et=readUIntBE(i,j+s,_);o.item_loc[Z]={length:et,offset:ee+J}}j+=$*(s+_)}}(F.data,o),"iinf"===F.boxtype&&function(i,o){for(var s=x(i,4),_=6,F=0;F<s;F++){var N=unbox(i,_);if(!N)break;if("infe"===N.boxtype){for(var j=x(N.data,4),G="",Z=8;Z<N.data.length&&N.data[Z];Z++)G+=String.fromCharCode(N.data[Z]);o.item_inf[G]=j}_=N.end}}(F.data,o),s=F.end}}(i,o),o.sizes.length){var s,F,N,j=(F=(s=o.sizes).reduce(function(i,o){return i.width>o.width||i.width===o.width&&i.height>o.height?i:o}),N=s.reduce(function(i,o){return i.height>o.height||i.height===o.height&&i.width>o.width?i:o}),F.width>N.height||F.width===N.height&&F.height>N.width?F:N),G=1;o.transforms.forEach(function(i){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===i.type&&(0===i.value?G=s[G]:(G=o[G=s[G]],G=o[G])),"irot"===i.type)for(var x=0;x<i.value;x++)G=o[G]});var Z=null;return o.item_inf.Exif&&(Z=o.item_loc[o.item_inf.Exif]),{width:j.width,height:j.height,orientation:o.transforms.length?G:null,variants:o.sizes,exif_location:Z}}},i.exports.getMimeType=function(i){var o=String.fromCharCode.apply(null,i.slice(0,4)),s={};s[o]=!0;for(var x=8;x<i.length;x+=4)s[String.fromCharCode.apply(null,i.slice(x,x+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===o||"avis"===o||"avio"===o?{type:"avif",mime:"image/avif"}:"heic"===o||"heix"===o?{type:"heic",mime:"image/heic"}:"hevc"===o||"hevx"===o?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).Ag,N=s(76767),j=s(71371),G=x("ftyp");i.exports=function(i){if(_(i,4,G)){var o=N.unbox(i,0);if(o){var s=N.getMimeType(o.data);if(s){for(var x,Z=o.end;;){var X=N.unbox(i,Z);if(!X)break;if(Z=X.end,"mdat"===X.boxtype)return;if("meta"===X.boxtype){x=X.data;break}}if(x){var J=N.readSizeFromMeta(x);if(J){var $={width:J.width,height:J.height,type:s.type,mime:s.mime,wUnits:"px",hUnits:"px"};if(J.variants.length>1&&($.variants=J.variants),J.orientation&&($.orientation=J.orientation),J.exif_location&&J.exif_location.offset+J.exif_location.length<=i.length){var ee=F(i,J.exif_location.offset),et=i.slice(J.exif_location.offset+ee+4,J.exif_location.offset+J.exif_location.length),er=j.get_orientation(et);er>0&&($.orientation=er)}return $}}}}}}},2504:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).mP,N=x("BM");i.exports=function(i){if(!(i.length<26)&&_(i,0,N))return{width:F(i,18),height:F(i,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).mP,N=x("GIF87a"),j=x("GIF89a");i.exports=function(i){if(!(i.length<10)&&(_(i,0,N)||_(i,0,j)))return{width:F(i,6),height:F(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(i,o,s){"use strict";var x=s(14847).mP;i.exports=function(i){var o=x(i,0),s=x(i,2),_=x(i,4);if(0===o&&1===s&&_){for(var F=[],N={width:0,height:0},j=0;j<_;j++){var G=i[6+16*j]||256,Z=i[6+16*j+1]||256,X={width:G,height:Z};F.push(X),(G>N.width||Z>N.height)&&(N=X)}return{width:N.width,height:N.height,variants:F,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(i,o,s){"use strict";var x=s(14847).n8,_=s(14847).eG,F=s(14847).OF,N=s(71371),j=_("Exif\x00\x00");i.exports=function(i){if(!(i.length<2)&&255===i[0]&&216===i[1]&&255===i[2])for(var o=2;;){for(;;){if(i.length-o<2)return;if(255===i[o++])break}for(var s,_,G=i[o++];255===G;)G=i[o++];if(208<=G&&G<=217||1===G)s=0;else{if(!(192<=G)||!(G<=254)||i.length-o<2)return;s=x(i,o)-2,o+=2}if(217===G||218===G)return;if(225===G&&s>=10&&F(i,o,j)&&(_=N.get_orientation(i.slice(o+6,o+s))),s>=5&&192<=G&&G<=207&&196!==G&&200!==G&&204!==G){if(i.length-o<s)return;var Z={width:x(i,o+3),height:x(i,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return _>0&&(Z.orientation=_),Z}o+=s}}},6303:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).Ag,N=x("\x89PNG\r\n\x1a\n"),j=x("IHDR");i.exports=function(i){if(!(i.length<24)&&_(i,0,N)&&_(i,12,j))return{width:F(i,16),height:F(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).Ag,N=x("8BPS\x00\x01");i.exports=function(i){if(!(i.length<22)&&_(i,0,N))return{width:F(i,18),height:F(i,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(i){"use strict";function isFinitePositive(i){return"number"==typeof i&&isFinite(i)&&i>0}var o=/<[-_.:a-zA-Z0-9][^>]*>/,s=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,x=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,_=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,F=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,N=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function units(i){return N.test(i)?i.match(N)[0]:"px"}i.exports=function(i){if(function(i){var o,s=0,x=i.length;for(239===i[0]&&187===i[1]&&191===i[2]&&(s=3);s<x&&(32===(o=i[s])||9===o||13===o||10===o);)s++;return s!==x&&60===i[s]}(i)){for(var N,j,G,Z="",X=0;X<i.length;X++)Z+=String.fromCharCode(i[X]);var J=(Z.match(o)||[""])[0];if(s.test(J)){var $=(N=J.match(x),j=J.match(_),G=J.match(F),{width:N&&(N[1]||N[2]),height:j&&(j[1]||j[2]),viewbox:G&&(G[1]||G[2])}),ee=parseFloat($.width),et=parseFloat($.height);if($.width&&$.height){if(!isFinitePositive(ee)||!isFinitePositive(et))return;return{width:ee,height:et,type:"svg",mime:"image/svg+xml",wUnits:units($.width),hUnits:units($.height)}}var er=($.viewbox||"").split(" "),en={width:er[2],height:er[3]},ei=parseFloat(en.width),eo=parseFloat(en.height);if(isFinitePositive(ei)&&isFinitePositive(eo)&&units(en.width)===units(en.height)){var es=ei/eo;if($.width){if(!isFinitePositive(ee))return;return{width:ee,height:ee/es,type:"svg",mime:"image/svg+xml",wUnits:units($.width),hUnits:units($.width)}}if($.height){if(!isFinitePositive(et))return;return{width:et*es,height:et,type:"svg",mime:"image/svg+xml",wUnits:units($.height),hUnits:units($.height)}}return{width:ei,height:eo,type:"svg",mime:"image/svg+xml",wUnits:units(en.width),hUnits:units(en.height)}}}}}},66278:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).mP,N=s(14847).n8,j=s(14847).nm,G=s(14847).Ag,Z=x("II*\x00"),X=x("MM\x00*");function readUInt16(i,o,s){return s?N(i,o):F(i,o)}function readUInt32(i,o,s){return s?G(i,o):j(i,o)}function readIFDValue(i,o,s){var x=readUInt16(i,o+2,s);return 1!==readUInt32(i,o+4,s)||3!==x&&4!==x?null:3===x?readUInt16(i,o+8,s):readUInt32(i,o+8,s)}i.exports=function(i){if(!(i.length<8)&&(_(i,0,Z)||_(i,0,X))){var o,s,x,F,N=77===i[0],j=readUInt32(i,4,N)-8;if(!(j<0)){var G=j+8;if(!(i.length-G<2)){var J=12*readUInt16(i,G+0,N);if(!(J<=0)&&(G+=2,!(i.length-G<J))){for(o=0;o<J;o+=12)256===(F=readUInt16(i,G+o,N))?s=readIFDValue(i,G+o,N):257===F&&(x=readIFDValue(i,G+o,N));if(s&&x)return{width:s,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},90784:function(i,o,s){"use strict";var x=s(14847).eG,_=s(14847).OF,F=s(14847).mP,N=s(14847).nm,j=s(71371),G=x("RIFF"),Z=x("WEBP");i.exports=function(i){if(!(i.length<16)&&(_(i,0,G)||_(i,8,Z))){var o=12,s=null,x=0,X=N(i,4)+8;if(!(X>i.length)){for(;o+8<X;){if(0===i[o]){o++;continue}var J,$=String.fromCharCode.apply(null,i.slice(o,o+4)),ee=N(i,o+4);"VP8 "===$&&ee>=10?s=s||function(i,o){if(157===i[o+3]&&1===i[o+4]&&42===i[o+5])return{width:16383&F(i,o+6),height:16383&F(i,o+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}(i,o+8):"VP8L"===$&&ee>=9?s=s||function(i,o){if(47===i[o]){var s=N(i,o+1);return{width:(16383&s)+1,height:(s>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}(i,o+8):"VP8X"===$&&ee>=10?s=s||{width:(i[(J=o+8)+6]<<16|i[J+5]<<8|i[J+4])+1,height:(i[J+9]<<J|i[J+8]<<8|i[J+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}:"EXIF"===$&&(x=j.get_orientation(i.slice(o+8,o+8+ee)),o=1/0),o+=8+ee}if(s)return x>0&&(s.orientation=x),s}}}},91497:function(i,o,s){"use strict";i.exports={avif:s(24461),bmp:s(2504),gif:s(47342),ico:s(31355),jpeg:s(54261),png:s(6303),psd:s(38689),svg:s(6881),tiff:s(66278),webp:s(90784)}},33575:function(i,o,s){"use strict";var x=s(91497);i.exports=function(i){return function(i){for(var o=Object.keys(x),s=0;s<o.length;s++){var _=x[o[s]](i);if(_)return _}return null}(i)},i.exports.parsers=x},90386:function(i){var o,s,x,_=i.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(i){if(o===setTimeout)return setTimeout(i,0);if((o===defaultSetTimout||!o)&&setTimeout)return o=setTimeout,setTimeout(i,0);try{return o(i,0)}catch(s){try{return o.call(null,i,0)}catch(s){return o.call(this,i,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){o=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){s=defaultClearTimeout}}();var F=[],N=!1,j=-1;function cleanUpNextTick(){N&&x&&(N=!1,x.length?F=x.concat(F):j=-1,F.length&&drainQueue())}function drainQueue(){if(!N){var i=runTimeout(cleanUpNextTick);N=!0;for(var o=F.length;o;){for(x=F,F=[];++j<o;)x&&x[j].run();j=-1,o=F.length}x=null,N=!1,function(i){if(s===clearTimeout)return clearTimeout(i);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(i);try{s(i)}catch(o){try{return s.call(null,i)}catch(o){return s.call(this,i)}}}(i)}}function Item(i,o){this.fun=i,this.array=o}function noop(){}_.nextTick=function(i){var o=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)o[s-1]=arguments[s];F.push(new Item(i,o)),1!==F.length||N||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=noop,_.addListener=noop,_.once=noop,_.off=noop,_.removeListener=noop,_.removeAllListeners=noop,_.emit=noop,_.prependListener=noop,_.prependOnceListener=noop,_.listeners=function(i){return[]},_.binding=function(i){throw Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(i){throw Error("process.chdir is not supported")},_.umask=function(){return 0}},5877:function(i,o,s){for(var x=s(9748),_="undefined"==typeof window?s.g:window,F=["moz","webkit"],N="AnimationFrame",j=_["request"+N],G=_["cancel"+N]||_["cancelRequest"+N],Z=0;!j&&Z<F.length;Z++)j=_[F[Z]+"Request"+N],G=_[F[Z]+"Cancel"+N]||_[F[Z]+"CancelRequest"+N];if(!j||!G){var X=0,J=0,$=[],ee=1e3/60;j=function(i){if(0===$.length){var o=x(),s=Math.max(0,ee-(o-X));X=s+o,setTimeout(function(){var i=$.slice(0);$.length=0;for(var o=0;o<i.length;o++)if(!i[o].cancelled)try{i[o].callback(X)}catch(i){setTimeout(function(){throw i},0)}},Math.round(s))}return $.push({handle:++J,callback:i,cancelled:!1}),J},G=function(i){for(var o=0;o<$.length;o++)$[o].handle===i&&($[o].cancelled=!0)}}i.exports=function(i){return j.call(_,i)},i.exports.cancel=function(){G.apply(_,arguments)},i.exports.polyfill=function(i){i||(i=_),i.requestAnimationFrame=j,i.cancelAnimationFrame=G}},3593:function(i,o,s){"use strict";var x=s(21527),_=s(25075),F=s(93447),N=s(71299),j=s(56131),G=s(30120),Z=s(57060),X=Z.float32,J=Z.fract32;i.exports=function(i,o){if("function"==typeof i?(o||(o={}),o.regl=i):o=i,o.length&&(o.positions=o),!(i=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,Z,ee,et,er,en,ei=i._gl,eo={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},es=[];return et=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),Z=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),ee=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),er=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),en=i.buffer({usage:"static",type:"float",data:$}),update(o),s=i({vert:"\n		precision highp float;\n\n		attribute vec2 position, positionFract;\n		attribute vec4 error;\n		attribute vec4 color;\n\n		attribute vec2 direction, lineOffset, capOffset;\n\n		uniform vec4 viewport;\n		uniform float lineWidth, capSize;\n		uniform vec2 scale, scaleFract, translate, translateFract;\n\n		varying vec4 fragColor;\n\n		void main() {\n			fragColor = color / 255.;\n\n			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n			vec2 position = position + dxy;\n\n			vec2 pos = (position + translate) * scale\n				+ (positionFract + translateFract) * scale\n				+ (position + translate) * scaleFract\n				+ (positionFract + translateFract) * scaleFract;\n\n			pos += pixelOffset / viewport.zw;\n\n			gl_Position = vec4(pos * 2. - 1., 0, 1);\n		}\n		",frag:"\n		precision highp float;\n\n		varying vec4 fragColor;\n\n		uniform float opacity;\n\n		void main() {\n			gl_FragColor = fragColor;\n			gl_FragColor.a *= opacity;\n		}\n		",uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]}},attributes:{color:{buffer:et,offset:function(i,o){return 4*o.offset},divisor:1},position:{buffer:Z,offset:function(i,o){return 8*o.offset},divisor:1},positionFract:{buffer:ee,offset:function(i,o){return 8*o.offset},divisor:1},error:{buffer:er,offset:function(i,o){return 16*o.offset},divisor:1},direction:{buffer:en,stride:24,offset:0},lineOffset:{buffer:en,stride:24,offset:8},capOffset:{buffer:en,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:$.length}),j(error2d,{update:update,draw:draw,destroy:destroy,regl:i,gl:ei,canvas:ei.canvas,groups:es}),error2d;function error2d(i){i?update(i):null===i&&destroy(),draw()}function draw(o){if("number"==typeof o)return drawGroup(o);o&&!Array.isArray(o)&&(o=[o]),i._refresh(),es.forEach(function(i,s){if(i){if(o&&(o[s]?i.draw=!0:i.draw=!1),!i.draw){i.draw=!0;return}drawGroup(s)}})}function drawGroup(i){"number"==typeof i&&(i=es[i]),null!=i&&i&&i.count&&i.color&&i.opacity&&i.positions&&i.positions.length>1&&(i.scaleRatio=[i.scale[0]*i.viewport.width,i.scale[1]*i.viewport.height],s(i),i.after&&i.after(i))}function update(i){if(i){null!=i.length?"number"==typeof i[0]&&(i=[{positions:i}]):Array.isArray(i)||(i=[i]);var o=0,s=0;if(error2d.groups=es=i.map(function(i,Z){var X=es[Z];return i&&("function"==typeof i?i={after:i}:"number"==typeof i[0]&&(i={positions:i}),i=N(i,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(es[Z]=X={id:Z,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},i=j({},eo,i)),F(X,i,[{lineWidth:function(i){return .5*+i},capSize:function(i){return .5*+i},opacity:parseFloat,errors:function(i){return i=G(i),s+=i.length,i},positions:function(i,s){return i=G(i,"float64"),s.count=Math.floor(i.length/2),s.bounds=x(i,2),s.offset=o,o+=s.count,i}},{color:function(i,o){var s=o.count;if(i||(i="transparent"),!Array.isArray(i)||"number"==typeof i[0]){var x=i;i=Array(s);for(var F=0;F<s;F++)i[F]=x}if(i.length<s)throw Error("Not enough colors");for(var N=new Uint8Array(4*s),j=0;j<s;j++){var G=_(i[j],"uint8");N.set(G,4*j)}return N},range:function(i,o,s){var x=o.bounds;return i||(i=x),o.scale=[1/(i[2]-i[0]),1/(i[3]-i[1])],o.translate=[-i[0],-i[1]],o.scaleFract=J(o.scale),o.translateFract=J(o.translate),i},viewport:function(i){var o;return Array.isArray(i)?o={x:i[0],y:i[1],width:i[2]-i[0],height:i[3]-i[1]}:i?(o={x:i.x||i.left||0,y:i.y||i.top||0},i.right?o.width=i.right-o.x:o.width=i.w||i.width||0,i.bottom?o.height=i.bottom-o.y:o.height=i.h||i.height||0):o={x:0,y:0,width:ei.drawingBufferWidth,height:ei.drawingBufferHeight},o}}])),X}),o||s){var $=es.reduce(function(i,o,s){return i+(o?o.count:0)},0),en=new Float64Array(2*$),el=new Uint8Array(4*$),ec=new Float32Array(4*$);es.forEach(function(i,o){if(i){var s=i.positions,x=i.count,_=i.offset,F=i.color,N=i.errors;x&&(el.set(F,4*_),ec.set(N,4*_),en.set(s,2*_))}});var eu=X(en);Z(eu),ee(J(en,eu)),et(el),er(ec)}}}function destroy(){Z.destroy(),ee.destroy(),et.destroy(),er.destroy(),en.destroy()}};var $=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(i,o,s){"use strict";var x=s(25075),_=s(21527),F=s(56131),N=s(56068),j=s(71299),G=s(30120),Z=s(11474),X=s(54),J=s(57060),$=J.float32,ee=J.fract32,et=s(83522),er=s(18863),en=s(6851);function Line2D(i,o){if(!(this instanceof Line2D))return new Line2D(i,o);if("function"==typeof i?(o||(o={}),o.regl=i):o=i,o.length&&(o.positions=o),!(i=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=i._gl,this.regl=i,this.passes=[],this.shaders=Line2D.shaders.has(i)?Line2D.shaders.get(i):Line2D.shaders.set(i,Line2D.createShaders(i)).get(i),this.update(o)}i.exports=Line2D,Line2D.dashMult=2,Line2D.maxPatternLength=256,Line2D.precisionThreshold=3e6,Line2D.maxPoints=1e4,Line2D.maxLines=2048,Line2D.shaders=new et,Line2D.createShaders=function(i){var o,s=i.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:i.prop("count"),count:4,offset:0,uniforms:{miterMode:function(i,o){return"round"===o.join?2:1},miterLimit:i.prop("miterLimit"),scale:i.prop("scale"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),translate:i.prop("translate"),thickness:i.prop("thickness"),dashTexture:i.prop("dashTexture"),opacity:i.prop("opacity"),pixelRatio:i.context("pixelRatio"),id:i.prop("id"),dashLength:i.prop("dashLength"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]},depth:i.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(i,o){return!o.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport")},_=i(F({vert:N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n	// the order is important\n	return position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n	float lineStart = 1. - lineEnd;\n	float lineOffset = lineTop * 2. - 1.;\n\n	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n	tangent = normalize(diff * scale * viewport.zw);\n	vec2 normal = vec2(-tangent.y, tangent.x);\n\n	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n		+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n}\n"]),frag:N(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n	float alpha = 1.;\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:i.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{o=i(F({cull:{enable:!0,face:"back"},vert:N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n	vec2 normalWidth = thickness / scaleRatio;\n\n	float lineStart = 1. - lineEnd;\n	float lineBot = 1. - lineTop;\n\n	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n	vec2 prevDiff = aCoord - prevCoord;\n	vec2 currDiff = bCoord - aCoord;\n	vec2 nextDiff = nextCoord - bCoord;\n\n	vec2 prevTangent = normalize(prevDiff * scaleRatio);\n	vec2 currTangent = normalize(currDiff * scaleRatio);\n	vec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n	vec2 currNormal = vec2(-currTangent.y, currTangent.x);\n	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n	vec2 startJoinDirection = normalize(prevTangent - currTangent);\n	vec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n	// collapsed/unidirectional segment cases\n	// FIXME: there should be more elegant solution\n	vec2 prevTanDiff = abs(prevTangent - currTangent);\n	vec2 nextTanDiff = abs(nextTangent - currTangent);\n	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n		startJoinDirection = currNormal;\n	}\n	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n		endJoinDirection = currNormal;\n	}\n	if (aCoord == bCoord) {\n		endJoinDirection = startJoinDirection;\n		currNormal = prevNormal;\n		currTangent = prevTangent;\n	}\n\n	tangent = currTangent;\n\n	//calculate join shifts relative to normals\n	float startJoinShift = dot(currNormal, startJoinDirection);\n	float endJoinShift = dot(currNormal, endJoinDirection);\n\n	float startMiterRatio = abs(1. / startJoinShift);\n	float endMiterRatio = abs(1. / endJoinShift);\n\n	vec2 startJoin = startJoinDirection * startMiterRatio;\n	vec2 endJoin = endJoinDirection * endMiterRatio;\n\n	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n	startTopJoin = sign(startJoinShift) * startJoin * .5;\n	startBotJoin = -startTopJoin;\n\n	endTopJoin = sign(endJoinShift) * endJoin * .5;\n	endBotJoin = -endTopJoin;\n\n	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n	//miter anti-clipping\n	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n	//prevent close to reverse direction switch\n	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n	if (prevReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n		//handle miter clipping\n		bTopCoord -= normalWidth * endTopJoin;\n		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n	}\n\n	if (nextReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n		//handle miter clipping\n		aBotCoord -= normalWidth * startBotJoin;\n		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n	}\n\n	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n	//position is normalized 0..1 coord on the screen\n	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n	enableStartMiter = step(dot(currTangent, prevTangent), .5);\n	enableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n	//bevel miter cutoffs\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n\n	//round miter cutoffs\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n}\n"]),frag:N(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nvoid main() {\n	float alpha = 1., distToStart, distToEnd;\n	float cutoff = thickness * .5;\n\n	//bevel miter\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToStart + 1., 0.), 1.);\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToEnd + 1., 0.), 1.);\n		}\n	}\n\n	// round miter\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < 0.) {\n				float radius = length(gl_FragCoord.xy - startCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < 0.) {\n				float radius = length(gl_FragCoord.xy - endCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n	}\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aColor:{buffer:i.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:i.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch(i){o=_}return{fill:i({primitive:"triangle",elements:function(i,o){return o.triangles},offset:0,vert:N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n	vec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n	fragColor.a *= opacity;\n}\n"]),frag:N(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n	gl_FragColor = fragColor;\n}\n"]),uniforms:{scale:i.prop("scale"),color:i.prop("fill"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),translate:i.prop("translate"),opacity:i.prop("opacity"),pixelRatio:i.context("pixelRatio"),id:i.prop("id"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]}},attributes:{position:{buffer:i.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:_,miter:o}},Line2D.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},Line2D.prototype.render=function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];i.length&&this.update.apply(this,i),this.draw()},Line2D.prototype.draw=function(){for(var i=this,o=[],s=arguments.length;s--;)o[s]=arguments[s];return(o.length?o:this.passes).forEach(function(o,s){if(o&&Array.isArray(o))return i.draw.apply(i,o);"number"==typeof o&&(o=i.passes[o]),o&&o.count>1&&o.opacity&&(i.regl._refresh(),o.fill&&o.triangles&&o.triangles.length>2&&i.shaders.fill(o),o.thickness&&(o.scale[0]*o.viewport.width>Line2D.precisionThreshold||o.scale[1]*o.viewport.height>Line2D.precisionThreshold?i.shaders.rect(o):"rect"===o.join||!o.join&&(o.thickness<=2||o.count>=Line2D.maxPoints)?i.shaders.rect(o):i.shaders.miter(o)))}),this},Line2D.prototype.update=function(i){var o=this;if(i){null!=i.length?"number"==typeof i[0]&&(i=[{positions:i}]):Array.isArray(i)||(i=[i]);var s=this.regl,N=this.gl;if(i.forEach(function(i,J){var et=o.passes[J];if(void 0!==i){if(null===i){o.passes[J]=null;return}if("number"==typeof i[0]&&(i={positions:i}),i=j(i,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),et||(o.passes[J]=et={id:J,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:s.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},i=F({},Line2D.defaults,i)),null!=i.thickness&&(et.thickness=parseFloat(i.thickness)),null!=i.opacity&&(et.opacity=parseFloat(i.opacity)),null!=i.miterLimit&&(et.miterLimit=parseFloat(i.miterLimit)),null!=i.overlay&&(et.overlay=!!i.overlay,J<Line2D.maxLines&&(et.depth=2*(Line2D.maxLines-1-J%Line2D.maxLines)/Line2D.maxLines-1)),null!=i.join&&(et.join=i.join),null!=i.hole&&(et.hole=i.hole),null!=i.fill&&(et.fill=i.fill?x(i.fill,"uint8"):null),null!=i.viewport&&(et.viewport=er(i.viewport)),et.viewport||(et.viewport=er([N.drawingBufferWidth,N.drawingBufferHeight])),null!=i.close&&(et.close=i.close),null===i.positions&&(i.positions=[]),i.positions){if(i.positions.x&&i.positions.y){var ei,eo,es=i.positions.x,el=i.positions.y;eo=et.count=Math.max(es.length,el.length),ei=new Float64Array(2*eo);for(var ec=0;ec<eo;ec++)ei[2*ec]=es[ec],ei[2*ec+1]=el[ec]}else ei=G(i.positions,"float64"),eo=et.count=Math.floor(ei.length/2);var eu=et.bounds=_(ei,2);if(et.fill){for(var ef=[],eh={},ed=0,ep=0,eg=0,em=et.count;ep<em;ep++){var ey=ei[2*ep],ev=ei[2*ep+1];isNaN(ey)||isNaN(ev)||null==ey||null==ev?(ey=ei[2*ed],ev=ei[2*ed+1],eh[ep]=ed):ed=ep,ef[eg++]=ey,ef[eg++]=ev}if(i.splitNull){et.count-1 in eh||(eh[et.count]=et.count-1);var ex=Object.keys(eh).map(Number).sort(function(i,o){return i-o}),e_=[],ew=0,eT=null!=et.hole?et.hole[0]:null;if(null!=eT){var ek=en(ex,function(i){return i>=eT});(ex=ex.slice(0,ek)).push(eT)}for(var loop=function(i){var o=Z(ef.slice(2*ew,2*ex[i]).concat(eT?ef.slice(2*eT):[]),(et.hole||[]).map(function(o){return o-eT+(ex[i]-ew)}));o=o.map(function(o){return o+ew+(o+ew<ex[i]?0:eT-ex[i])}),e_.push.apply(e_,o),ew=ex[i]+1},eA=0;eA<ex.length;eA++)loop(eA);for(var eS=0,eM=e_.length;eS<eM;eS++)null!=eh[e_[eS]]&&(e_[eS]=eh[e_[eS]]);et.triangles=e_}else{for(var eC=Z(ef,et.hole||[]),eE=0,eL=eC.length;eE<eL;eE++)null!=eh[eC[eE]]&&(eC[eE]=eh[eC[eE]]);et.triangles=eC}}var eP=new Float64Array(ei);X(eP,2,eu);var eI=new Float64Array(2*eo+6);et.close?ei[0]===ei[2*eo-2]&&ei[1]===ei[2*eo-1]?(eI[0]=eP[2*eo-4],eI[1]=eP[2*eo-3]):(eI[0]=eP[2*eo-2],eI[1]=eP[2*eo-1]):(eI[0]=eP[0],eI[1]=eP[1]),eI.set(eP,2),et.close?ei[0]===ei[2*eo-2]&&ei[1]===ei[2*eo-1]?(eI[2*eo+2]=eP[2],eI[2*eo+3]=eP[3],et.count-=1):(eI[2*eo+2]=eP[0],eI[2*eo+3]=eP[1],eI[2*eo+4]=eP[2],eI[2*eo+5]=eP[3]):(eI[2*eo+2]=eP[2*eo-2],eI[2*eo+3]=eP[2*eo-1],eI[2*eo+4]=eP[2*eo-2],eI[2*eo+5]=eP[2*eo-1]);var eO=$(eI);et.positionBuffer(eO);var eD=ee(eI,eO);et.positionFractBuffer(eD)}if(i.range?et.range=i.range:et.range||(et.range=et.bounds),(i.range||i.positions)&&et.count){var eR=et.bounds,eB=eR[2]-eR[0],ez=eR[3]-eR[1],eF=et.range[2]-et.range[0],eN=et.range[3]-et.range[1];et.scale=[eB/eF,ez/eN],et.translate=[-et.range[0]/eF+eR[0]/eF||0,-et.range[1]/eN+eR[1]/eN||0],et.scaleFract=ee(et.scale),et.translateFract=ee(et.translate)}if(i.dashes){var ej,eU=0;if(!i.dashes||i.dashes.length<2)eU=1,ej=new Uint8Array([255,255,255,255,255,255,255,255]);else{eU=0;for(var eV=0;eV<i.dashes.length;++eV)eU+=i.dashes[eV];ej=new Uint8Array(eU*Line2D.dashMult);for(var eH=0,eG=255,eW=0;eW<2;eW++)for(var eZ=0;eZ<i.dashes.length;++eZ){for(var eY=0,eX=i.dashes[eZ]*Line2D.dashMult*.5;eY<eX;++eY)ej[eH++]=eG;eG^=255}}et.dashLength=eU,et.dashTexture({channels:1,data:ej,width:ej.length,height:1,mag:"linear",min:"linear"},0,0)}if(i.color){var eK=et.count,eJ=i.color;eJ||(eJ="transparent");var e$=new Uint8Array(4*eK+4);if(Array.isArray(eJ)&&"number"!=typeof eJ[0]){for(var eQ=0;eQ<eK;eQ++){var e0=x(eJ[eQ],"uint8");e$.set(e0,4*eQ)}e$.set(x(eJ[0],"uint8"),4*eK)}else for(var e1=x(eJ,"uint8"),e2=0;e2<eK+1;e2++)e$.set(e1,4*e2);et.colorBuffer({usage:"dynamic",type:"uint8",data:e$})}}}),i.length<this.passes.length){for(var J=i.length;J<this.passes.length;J++){var et=this.passes[J];et&&(et.colorBuffer.destroy(),et.positionBuffer.destroy(),et.dashTexture.destroy())}this.passes.length=i.length}for(var ei=[],eo=0;eo<this.passes.length;eo++)null!==this.passes[eo]&&ei.push(this.passes[eo]);return this.passes=ei,this}},Line2D.prototype.destroy=function(){return this.passes.forEach(function(i){i.colorBuffer.destroy(),i.positionBuffer.destroy(),i.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(i,o,s){"use strict";function _unsupportedIterableToArray(i,o){if(i){if("string"==typeof i)return _arrayLikeToArray(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if("Object"===s&&i.constructor&&(s=i.constructor.name),"Map"===s||"Set"===s)return Array.from(i);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(i,o)}}function _arrayLikeToArray(i,o){(null==o||o>i.length)&&(o=i.length);for(var s=0,x=Array(o);s<o;s++)x[s]=i[s];return x}var x=s(25075),_=s(21527),F=s(6475),N=s(88294),j=s(56131),G=s(56068),Z=s(71299),X=s(93447),J=s(30120),$=s(62683),ee=s(57060),et=s(18863);function Scatter(i,o){var s=this;if(!(this instanceof Scatter))return new Scatter(i,o);"function"==typeof i?(o||(o={}),o.regl=i):(o=i,i=null),o&&o.length&&(o.positions=o);var x,_=(i=o.regl)._gl,F=[];this.tooManyColors=$,x=i.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),j(this,{regl:i,gl:_,groups:[],markerCache:[null],markerTextures:[null],palette:F,paletteIds:{},paletteTexture:x,maxColors:255,maxSize:100,canvas:_.canvas}),this.update(o);var N={uniforms:{constPointSize:!!o.constPointSize,opacity:i.prop("opacity"),paletteSize:function(i,o){return[s.tooManyColors?0:255,x.height]},pixelRatio:i.context("pixelRatio"),scale:i.prop("scale"),scaleFract:i.prop("scaleFract"),translate:i.prop("translate"),translateFract:i.prop("translateFract"),markerTexture:i.prop("markerTexture"),paletteTexture:x},attributes:{x:function(i,o){return o.xAttr||{buffer:o.positionBuffer,stride:8,offset:0}},y:function(i,o){return o.yAttr||{buffer:o.positionBuffer,stride:8,offset:4}},xFract:function(i,o){return o.xAttr?{constant:[0,0]}:{buffer:o.positionFractBuffer,stride:8,offset:0}},yFract:function(i,o){return o.yAttr?{constant:[0,0]}:{buffer:o.positionFractBuffer,stride:8,offset:4}},size:function(i,o){return o.size.length?{buffer:o.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*o.size/s.maxSize)]}},borderSize:function(i,o){return o.borderSize.length?{buffer:o.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*o.borderSize/s.maxSize)]}},colorId:function(i,o){return o.color.length?{buffer:o.colorBuffer,stride:s.tooManyColors?8:4,offset:0}:{constant:s.tooManyColors?F.slice(4*o.color,4*o.color+4):[o.color]}},borderColorId:function(i,o){return o.borderColor.length?{buffer:o.colorBuffer,stride:s.tooManyColors?8:4,offset:s.tooManyColors?4:2}:{constant:s.tooManyColors?F.slice(4*o.borderColor,4*o.borderColor+4):[o.borderColor]}},isActive:function(i,o){return!0===o.activation?{constant:[1]}:o.activation?o.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:i.prop("elements"),count:i.prop("count"),offset:i.prop("offset"),primitive:"points"},Z=j({},N);Z.frag=G(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),Z.vert=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=i(Z);var X=j({},N);X.frag=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n	float t;\n	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n	return t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n	float radius, alpha = 1.0, delta = fragWidth;\n\n	radius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n	if (radius > 1.0 + delta) {\n		discard;\n	}\n\n	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n	float borderRadius = fragBorderRadius;\n	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n	vec4 color = mix(fragColor, fragBorderColor, ratio);\n	color.a *= alpha * opacity;\n	gl_FragColor = color;\n}\n"]),X.vert=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),$&&(X.frag=X.frag.replace("smoothstep","smoothStep"),Z.frag=Z.frag.replace("smoothstep","smoothStep")),this.drawCircle=i(X)}Scatter.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},Scatter.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},Scatter.prototype.draw=function(){for(var i=this,o=arguments.length,s=Array(o),x=0;x<o;x++)s[x]=arguments[x];var _=this.groups;if(1===s.length&&Array.isArray(s[0])&&(null===s[0][0]||Array.isArray(s[0][0]))&&(s=s[0]),this.regl._refresh(),s.length)for(var F=0;F<s.length;F++)this.drawItem(F,s[F]);else _.forEach(function(o,s){i.drawItem(s)});return this},Scatter.prototype.drawItem=function(i,o){var s=this.groups,x=s[i];if("number"==typeof o&&(i=o,x=s[o],o=null),x&&x.count&&x.opacity){x.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,x,o));for(var _,F=[],N=1;N<x.activation.length;N++)x.activation[N]&&(!0===x.activation[N]||x.activation[N].data.length)&&F.push.apply(F,function(i){if(Array.isArray(i))return _arrayLikeToArray(i)}(_=this.getMarkerDrawOptions(N,x,o))||function(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}(_)||_unsupportedIterableToArray(_)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());F.length&&this.drawMarker(F)}},Scatter.prototype.getMarkerDrawOptions=function(i,o,s){var x=o.range,_=o.tree,F=o.viewport,N=o.activation,G=o.selectionBuffer,Z=o.count;if(this.regl,!_)return s?[j({},o,{markerTexture:this.markerTextures[i],activation:N[i],count:s.length,elements:s,offset:0})]:[j({},o,{markerTexture:this.markerTextures[i],activation:N[i],offset:0})];var X=[],J=_.range(x,{lod:!0,px:[(x[2]-x[0])/F.width,(x[3]-x[1])/F.height]});if(s){for(var $=N[i].data,ee=new Uint8Array(Z),et=0;et<s.length;et++){var er=s[et];ee[er]=$?$[er]:1}G.subdata(ee)}for(var en=J.length;en--;){var ei,eo=function(i){if(Array.isArray(i))return i}(ei=J[en])||function(i,o){var s=null==i?null:"undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(null!=s){var x,_,F,N,j=[],G=!0,Z=!1;try{if(F=(s=s.call(i)).next,0===o){if(Object(s)!==s)return;G=!1}else for(;!(G=(x=F.call(s)).done)&&(j.push(x.value),j.length!==o);G=!0);}catch(i){Z=!0,_=i}finally{try{if(!G&&null!=s.return&&(N=s.return(),Object(N)!==N))return}finally{if(Z)throw _}}return j}}(ei,2)||_unsupportedIterableToArray(ei,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),es=eo[0],el=eo[1];X.push(j({},o,{markerTexture:this.markerTextures[i],activation:s?G:N[i],offset:es,count:el-es}))}return X},Scatter.prototype.update=function(){for(var i=this,o=arguments.length,s=Array(o),x=0;x<o;x++)s[x]=arguments[x];if(s.length){1===s.length&&Array.isArray(s[0])&&(s=s[0]);var F=this.groups,G=this.gl,$=this.regl,er=this.maxSize,en=this.maxColors,ei=this.palette;this.groups=F=s.map(function(o,s){var x=F[s];if(void 0===o)return x;null===o?o={positions:null}:"function"==typeof o?o={ondraw:o}:"number"==typeof o[0]&&(o={positions:o}),null===(o=Z(o,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(o.positions=[]),null!=o.tooManyColors&&(i.tooManyColors=o.tooManyColors),x||(F[s]=x={id:s,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:$.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:$.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:$.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:$.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:$.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},o=j({},Scatter.defaults,o)),!o.positions||"marker"in o||(o.marker=x.marker,delete x.marker),!o.marker||"positions"in o||(o.positions=x.positions,delete x.positions);var eo=0,es=0;if(X(x,o,[{snap:!0,size:function(i,o){return null==i&&(i=Scatter.defaults.size),eo+=i&&i.length?1:0,i},borderSize:function(i,o){return null==i&&(i=Scatter.defaults.borderSize),eo+=i&&i.length?1:0,i},opacity:parseFloat,color:function(o,s){return null==o&&(o=Scatter.defaults.color),o=i.updateColor(o),es++,o},borderColor:function(o,s){return null==o&&(o=Scatter.defaults.borderColor),o=i.updateColor(o),es++,o},bounds:function(i,o,s){return"range"in s||(s.range=null),i},positions:function(i,o,s){var x=o.snap,F=o.positionBuffer,j=o.positionFractBuffer,G=o.selectionBuffer;if(i.x||i.y)return i.x.length?o.xAttr={buffer:$.buffer(i.x),offset:0,stride:4,count:i.x.length}:o.xAttr={buffer:i.x.buffer,offset:4*i.x.offset||0,stride:4*(i.x.stride||1),count:i.x.count},i.y.length?o.yAttr={buffer:$.buffer(i.y),offset:0,stride:4,count:i.y.length}:o.yAttr={buffer:i.y.buffer,offset:4*i.y.offset||0,stride:4*(i.y.stride||1),count:i.y.count},o.count=Math.max(o.xAttr.count,o.yAttr.count),i;i=J(i,"float64");var Z=o.count=Math.floor(i.length/2),X=o.bounds=Z?_(i,2):null;if(s.range||o.range||(delete o.range,s.range=X),s.marker||o.marker||(delete o.marker,s.marker=null),x&&(!0===x||Z>x)?o.tree=N(i,{bounds:X}):x&&x.length&&(o.tree=x),o.tree){var et={primitive:"points",usage:"static",data:o.tree,type:"uint32"};o.elements?o.elements(et):o.elements=$.elements(et)}var er=ee.float32(i);return F({data:er,usage:"dynamic"}),j({data:ee.fract32(i,er),usage:"dynamic"}),G({data:new Uint8Array(Z),type:"uint8",usage:"stream"}),i}},{marker:function(o,s,x){var _=s.activation;if(_.forEach(function(i){return i&&i.destroy&&i.destroy()}),_.length=0,o&&"number"!=typeof o[0]){for(var F=[],N=0,j=Math.min(o.length,s.count);N<j;N++){var G=i.addMarker(o[N]);F[G]||(F[G]=new Uint8Array(s.count)),F[G][N]=1}for(var Z=0;Z<F.length;Z++)if(F[Z]){var X={data:F[Z],type:"uint8",usage:"static"};_[Z]?_[Z](X):_[Z]=$.buffer(X),_[Z].data=F[Z]}}else _[i.addMarker(o)]=!0;return o},range:function(i,o,s){var x=o.bounds;if(x)return i||(i=x),o.scale=[1/(i[2]-i[0]),1/(i[3]-i[1])],o.translate=[-i[0],-i[1]],o.scaleFract=ee.fract(o.scale),o.translateFract=ee.fract(o.translate),i},viewport:function(i){return et(i||[G.drawingBufferWidth,G.drawingBufferHeight])}}]),eo){var el=x,ec=el.count,eu=el.size,ef=el.borderSize,eh=el.sizeBuffer,ed=new Uint8Array(2*ec);if(eu.length||ef.length)for(var ep=0;ep<ec;ep++)ed[2*ep]=Math.round((null==eu[ep]?eu:eu[ep])*255/er),ed[2*ep+1]=Math.round((null==ef[ep]?ef:ef[ep])*255/er);eh({data:ed,usage:"dynamic"})}if(es){var eg,em=x,ey=em.count,ev=em.color,ex=em.borderColor,e_=em.colorBuffer;if(i.tooManyColors){if(ev.length||ex.length){eg=new Uint8Array(8*ey);for(var ew=0;ew<ey;ew++){var eT=ev[ew];eg[8*ew]=ei[4*eT],eg[8*ew+1]=ei[4*eT+1],eg[8*ew+2]=ei[4*eT+2],eg[8*ew+3]=ei[4*eT+3];var ek=ex[ew];eg[8*ew+4]=ei[4*ek],eg[8*ew+5]=ei[4*ek+1],eg[8*ew+6]=ei[4*ek+2],eg[8*ew+7]=ei[4*ek+3]}}}else if(ev.length||ex.length){eg=new Uint8Array(4*ey+2);for(var eA=0;eA<ey;eA++)null!=ev[eA]&&(eg[4*eA]=ev[eA]%en,eg[4*eA+1]=Math.floor(ev[eA]/en)),null!=ex[eA]&&(eg[4*eA+2]=ex[eA]%en,eg[4*eA+3]=Math.floor(ex[eA]/en))}e_({data:eg||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return x})}},Scatter.prototype.addMarker=function(i){var o,s=this.markerTextures,x=this.regl,_=this.markerCache,F=null==i?0:_.indexOf(i);if(F>=0)return F;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)o=i;else{o=new Uint8Array(i.length);for(var N=0,j=i.length;N<j;N++)o[N]=255*i[N]}var G=Math.floor(Math.sqrt(o.length));return F=s.length,_.push(i),s.push(x.texture({channels:1,data:o,radius:G,mag:"linear",min:"linear"})),F},Scatter.prototype.updateColor=function(i){var o=this.paletteIds,s=this.palette,_=this.maxColors;Array.isArray(i)||(i=[i]);var N=[];if("number"==typeof i[0]){var j=[];if(Array.isArray(i))for(var G=0;G<i.length;G+=4)j.push(i.slice(G,G+4));else for(var Z=0;Z<i.length;Z+=4)j.push(i.subarray(Z,Z+4));i=j}for(var X=0;X<i.length;X++){var J=i[X],$=F(J=x(J,"uint8"),!1);if(null==o[$]){var ee=s.length;o[$]=Math.floor(ee/4),s[ee]=J[0],s[ee+1]=J[1],s[ee+2]=J[2],s[ee+3]=J[3]}N[X]=o[$]}return!this.tooManyColors&&s.length>4*_&&(this.tooManyColors=!0),this.updatePalette(s),1===N.length?N[0]:N},Scatter.prototype.updatePalette=function(i){if(!this.tooManyColors){var o=this.maxColors,s=this.paletteTexture,x=Math.ceil(.25*i.length/o);if(x>1){i=i.slice();for(var _=.25*i.length%o;_<x*o;_++)i.push(0,0,0,0)}s.height<x&&s.resize(o,x),s.subimage({width:Math.min(.25*i.length,o),height:x,data:i},0,0)}},Scatter.prototype.destroy=function(){return this.groups.forEach(function(i){i.sizeBuffer.destroy(),i.positionBuffer.destroy(),i.positionFractBuffer.destroy(),i.colorBuffer.destroy(),i.activation.forEach(function(i){return i&&i.destroy&&i.destroy()}),i.selectionBuffer.destroy(),i.elements&&i.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(i){return i&&i.destroy&&i.destroy()}),this};var er=s(56131);i.exports=function(i,o){var s=new Scatter(i,o),x=s.render.bind(s);return er(x,{render:x,update:s.update.bind(s),draw:s.draw.bind(s),destroy:s.destroy.bind(s),regl:s.regl,gl:s.gl,canvas:s.gl.canvas,groups:s.groups,markers:s.markerCache,palette:s.palette}),x}},60487:function(i,o,s){"use strict";var x=s(11870),_=s(71299),F=s(21527),N=s(5877),j=s(57471),G=s(18863),Z=s(30120);function SPLOM(i,o){if(!(this instanceof SPLOM))return new SPLOM(i,o);this.traces=[],this.passes={},this.regl=i,this.scatter=x(i),this.canvas=this.scatter.canvas}function getBox(i,o,s){var x,_,F,N,j=i[o],G=i[s];return j.length>2?(j[0],j[2],x=j[1],_=j[3]):j.length?(x=j[0],_=j[1]):(j.x,x=j.y,j.x,j.width,_=j.y+j.height),G.length>2?(F=G[0],N=G[2],G[1],G[3]):G.length?(F=G[0],N=G[1]):(F=G.x,G.y,N=G.x+G.width,G.y,G.height),[F,x,N,_]}function getPad(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var o=G(i);return[o.x,o.y,o.x+o.width,o.y+o.height]}i.exports=SPLOM,SPLOM.prototype.render=function(){for(var i=this,o=[],s=arguments.length;s--;)o[s]=arguments[s];return(o.length&&this.update.apply(this,o),this.regl.attributes.preserveDrawingBuffer)?this.draw():(this.dirty?null==this.planned&&(this.planned=N(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,N(function(){i.dirty=!1})),this)},SPLOM.prototype.update=function(){for(var i,o=[],s=arguments.length;s--;)o[s]=arguments[s];if(o.length){for(var x=0;x<o.length;x++)this.updateItem(x,o[x]);this.traces=this.traces.filter(Boolean);for(var _=[],F=0,N=0;N<this.traces.length;N++){for(var j=this.traces[N],G=this.traces[N].passes,Z=0;Z<G.length;Z++)_.push(this.passes[G[Z]]);j.passOffset=F,F+=j.passes.length}return(i=this.scatter).update.apply(i,_),this}},SPLOM.prototype.updateItem=function(i,o){var s,x=this.regl;if(null===o)return this.traces[i]=null,this;if(!o)return this;var N=_(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),j=this.traces[i]||(this.traces[i]={id:i,buffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:G([x._gl.drawingBufferWidth,x._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=N.color&&(j.color=N.color),null!=N.size&&(j.size=N.size),null!=N.marker&&(j.marker=N.marker),null!=N.borderColor&&(j.borderColor=N.borderColor),null!=N.borderSize&&(j.borderSize=N.borderSize),null!=N.opacity&&(j.opacity=N.opacity),N.viewport&&(j.viewport=G(N.viewport)),null!=N.diagonal&&(j.diagonal=N.diagonal),null!=N.upper&&(j.upper=N.upper),null!=N.lower&&(j.lower=N.lower),N.data){j.buffer(Z(N.data)),j.columns=N.data.length,j.count=N.data[0].length,j.bounds=[];for(var X=0;X<j.columns;X++)j.bounds[X]=F(N.data[X],1)}N.range&&(j.range=N.range,s=j.range&&"number"!=typeof j.range[0]),N.domain&&(j.domain=N.domain);var J=!1;null!=N.padding&&(Array.isArray(N.padding)&&N.padding.length===j.columns&&"number"==typeof N.padding[N.padding.length-1]?(j.padding=N.padding.map(getPad),J=!0):j.padding=getPad(N.padding));var $=j.columns,ee=j.count,et=j.viewport.width,er=j.viewport.height,en=j.viewport.x,ei=j.viewport.y,eo=et/$,es=er/$;j.passes=[];for(var el=0;el<$;el++)for(var ec=0;ec<$;ec++)if((j.diagonal||ec!==el)&&(j.upper||!(el>ec))&&(j.lower||!(el<ec))){var eu,ef,eh,ed=(eu=j.id,ef=el,eh=ec,(null!=eu.id?eu.id:eu)<<16|(255&ef)<<8|255&eh),ep=this.passes[ed]||(this.passes[ed]={});if(N.data&&(N.transpose?ep.positions={x:{buffer:j.buffer,offset:ec,count:ee,stride:$},y:{buffer:j.buffer,offset:el,count:ee,stride:$}}:ep.positions={x:{buffer:j.buffer,offset:ec*ee,count:ee},y:{buffer:j.buffer,offset:el*ee,count:ee}},ep.bounds=getBox(j.bounds,el,ec)),N.domain||N.viewport||N.data){var eg=J?getBox(j.padding,el,ec):j.padding;if(j.domain){var em=getBox(j.domain,el,ec),ey=em[0],ev=em[1],ex=em[2],e_=em[3];ep.viewport=[en+ey*et+eg[0],ei+ev*er+eg[1],en+ex*et-eg[2],ei+e_*er-eg[3]]}else ep.viewport=[en+ec*eo+eo*eg[0],ei+el*es+es*eg[1],en+(ec+1)*eo-eo*eg[2],ei+(el+1)*es-es*eg[3]]}N.color&&(ep.color=j.color),N.size&&(ep.size=j.size),N.marker&&(ep.marker=j.marker),N.borderSize&&(ep.borderSize=j.borderSize),N.borderColor&&(ep.borderColor=j.borderColor),N.opacity&&(ep.opacity=j.opacity),N.range&&(ep.range=s?getBox(j.range,el,ec):j.range||ep.bounds),j.passes.push(ed)}return this},SPLOM.prototype.draw=function(){for(var i,o=[],s=arguments.length;s--;)o[s]=arguments[s];if(o.length){for(var x=[],_=0;_<o.length;_++)if("number"==typeof o[_]){var F=this.traces[o[_]],N=F.passes,G=F.passOffset;x.push.apply(x,j(G,G+N.length))}else if(o[_].length){var Z=o[_],X=this.traces[_],J=X.passes,$=X.passOffset;J=J.map(function(i,o){x[$+o]=Z})}(i=this.scatter).draw.apply(i,x)}else this.scatter.draw();return this},SPLOM.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(i){i.exports=function(){function da(o,s){this.id=i++,this.type=o,this.data=s}function bb(i){return"["+(function ea(i){if(0===i.length)return[];var o=i.charAt(0),s=i.charAt(i.length-1);if(1<i.length&&o===s&&('"'===o||"'"===o))return['"'+i.substr(1,i.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(i))return ea(i.substr(0,o.index)).concat(ea(o[1])).concat(ea(i.substr(o.index+o[0].length)));if(1===(o=i.split(".")).length)return['"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(s=0,i=[];s<o.length;++s)i=i.concat(ea(o[s]));return i})(i).join("][")+"]"}function db(i){return"string"==typeof i?i.split():i}function eb(i){return"string"==typeof i?document.querySelector(i):i}function S(i,o){for(var s=Array(i),x=0;x<i;++x)s[x]=o(x);return s}function fb(i){var o,s;return o=(65535<i)<<4,i>>>=o,s=(255<i)<<3,i>>>=s,o|=s,s=(15<i)<<2,i>>>=s,(o|=s)|(s=(3<i)<<1)|i>>>s>>1}function gb(){function a(o){b:{for(var s=16;268435456>=s;s*=16)if(o<=s){o=s;break b}o=0}return 0<(s=i[fb(o)>>2]).length?s.pop():new ArrayBuffer(o)}function b(o){i[fb(o.byteLength)>>2].push(o)}var i=S(8,function(){return[]});return{alloc:a,free:b,allocType:function(i,o){var s=null;switch(i){case 5120:s=new Int8Array(a(o),0,o);break;case 5121:s=new Uint8Array(a(o),0,o);break;case 5122:s=new Int16Array(a(2*o),0,o);break;case 5123:s=new Uint16Array(a(2*o),0,o);break;case 5124:s=new Int32Array(a(4*o),0,o);break;case 5125:s=new Uint32Array(a(4*o),0,o);break;case 5126:s=new Float32Array(a(4*o),0,o);break;default:return null}return s.length!==o?s.subarray(0,o):s},freeType:function(i){b(i.buffer)}}}function fa(i){return!!i&&"object"==typeof i&&Array.isArray(i.shape)&&Array.isArray(i.stride)&&"number"==typeof i.offset&&i.shape.length===i.stride.length&&(Array.isArray(i.data)||P(i.data))}function hb(i,o,s,x,_,F){for(var N=0;N<o;++N)for(var j=i[N],G=0;G<s;++G)for(var Z=j[G],X=0;X<x;++X)_[F++]=Z[X]}function Ha(i){return 0|N[Object.prototype.toString.call(i)]}function jb(i,o){for(var s=0;s<o.length;++s)i[s]=o[s]}function kb(i,o,s,x,_,F,N){for(var j=0,G=0;G<s;++G)for(var Z=0;Z<x;++Z)i[j++]=o[_*G+F*Z+N]}function ob(i){for(var o=_.allocType(5123,i.length),s=0;s<i.length;++s)if(isNaN(i[s]))o[s]=65535;else if(1/0===i[s])o[s]=31744;else if(-1/0===i[s])o[s]=64512;else{ee[0]=i[s];var x=et[0],F=x>>>31<<15,N=(x<<1>>>24)-127,x=x>>13&1023;o[s]=-24>N?F:-14>N?F+(x+1024>>-14-N):15<N?F+31744:F+(N+15<<10)+x}return o}function qa(i){return Array.isArray(i)||P(i)}function ra(i){return"[object "+i+"]"}function qb(i){return Array.isArray(i)&&(0===i.length||"number"==typeof i[0])}function rb(i){return!!(Array.isArray(i)&&0!==i.length&&qa(i[0]))}function R(i){return Object.prototype.toString.call(i)}function Va(i){if(!i)return!1;var o=R(i);return 0<=eh.indexOf(o)||qb(i)||rb(i)||fa(i)}function sb(i,o){36193===i.type?(i.data=ob(o),_.freeType(o)):i.data=o}function La(i,o,s,x,_,F){if(i=void 0!==ep[i]?ep[i]:ei[i]*ed[o],F&&(i*=6),_){for(x=0;1<=s;)x+=i*s*s,s/=2;return x}return i*s*x}function Za(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function Y(i,o){return i>>>o|i<<32-o}function H(i,o){var s=(65535&i)+(65535&o);return(i>>16)+(o>>16)+(s>>16)<<16|65535&s}function Aa(i){return Array.prototype.slice.call(i)}function Ba(i){return Aa(i).join("")}function Sa(i){return Array.isArray(i)||P(i)||fa(i)}function yb(i){return i.sort(function(i,o){return"viewport"===i?-1:"viewport"===o?1:i<o?-1:1})}function K(i,o,s,x){this.thisDep=i,this.contextDep=o,this.propDep=s,this.append=x}function la(i){return i&&!(i.thisDep||i.contextDep||i.propDep)}function E(i){return new K(!1,!1,!1,i)}function L(i,o){var s=i.type;if(0===s)return s=i.data.length,new K(!0,1<=s,2<=s,o);if(4===s)return s=i.data,new K(s.thisDep,s.contextDep,s.propDep,o);if(5===s)return new K(!1,!1,!1,o);if(6===s){for(var x=s=!1,_=!1,F=0;F<i.data.length;++F){var N=i.data[F];1===N.type?_=!0:2===N.type?x=!0:3===N.type?s=!0:0===N.type?(s=!0,1<=(N=N.data)&&(x=!0),2<=N&&(_=!0)):4===N.type&&(s=s||N.data.thisDep,x=x||N.data.contextDep,_=_||N.data.propDep)}return new K(s,x,_,o)}return new K(3===s,2===s,1===s,o)}function Bb(i,o){for(var s=0;s<i.length;++s)if(i[s]===o)return s;return -1}var O=function(i,o){for(var s=Object.keys(o),x=0;x<s.length;++x)i[s[x]]=o[s[x]];return i},i=0,o={DynamicVariable:da,define:function(i,o){return new da(i,bb(o+""))},isDynamic:function(i){return"function"==typeof i&&!i._reglType||i instanceof da},unbox:function cb(i,o){return"function"==typeof i?new da(0,i):"number"==typeof i||"boolean"==typeof i?new da(5,i):Array.isArray(i)?new da(6,i.map(function(i,s){return cb(i,o+"["+s+"]")})):i instanceof da?i:void 0},accessor:bb},s={next:"function"==typeof requestAnimationFrame?function(i){return requestAnimationFrame(i)}:function(i){return setTimeout(i,16)},cancel:"function"==typeof cancelAnimationFrame?function(i){return cancelAnimationFrame(i)}:clearTimeout},x="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},_=gb();_.zero=gb();var bc=function(i,o){var s=1;o.ext_texture_filter_anisotropic&&(s=i.getParameter(34047));var x=1,F=1;o.webgl_draw_buffers&&(x=i.getParameter(34852),F=i.getParameter(36063));var N=!!o.oes_texture_float;if(N){N=i.createTexture(),i.bindTexture(3553,N),i.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var j=i.createFramebuffer();if(i.bindFramebuffer(36160,j),i.framebufferTexture2D(36160,36064,3553,N,0),i.bindTexture(3553,null),36053!==i.checkFramebufferStatus(36160))N=!1;else{i.viewport(0,0,1,1),i.clearColor(1,0,0,1),i.clear(16384);var G=_.allocType(5126,4);i.readPixels(0,0,1,1,6408,5126,G),i.getError()?N=!1:(i.deleteFramebuffer(j),i.deleteTexture(N),N=1===G[0]),_.freeType(G)}}return G=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(G=i.createTexture(),j=_.allocType(5121,36),i.activeTexture(33984),i.bindTexture(34067,G),i.texImage2D(34069,0,6408,3,3,0,6408,5121,j),_.freeType(j),i.bindTexture(34067,null),i.deleteTexture(G),G=!i.getError()),{colorBits:[i.getParameter(3410),i.getParameter(3411),i.getParameter(3412),i.getParameter(3413)],depthBits:i.getParameter(3414),stencilBits:i.getParameter(3415),subpixelBits:i.getParameter(3408),extensions:Object.keys(o).filter(function(i){return!!o[i]}),maxAnisotropic:s,maxDrawbuffers:x,maxColorAttachments:F,pointSizeDims:i.getParameter(33901),lineWidthDims:i.getParameter(33902),maxViewportDims:i.getParameter(3386),maxCombinedTextureUnits:i.getParameter(35661),maxCubeMapSize:i.getParameter(34076),maxRenderbufferSize:i.getParameter(34024),maxTextureUnits:i.getParameter(34930),maxTextureSize:i.getParameter(3379),maxAttributes:i.getParameter(34921),maxVertexUniforms:i.getParameter(36347),maxVertexTextureUnits:i.getParameter(35660),maxVaryingVectors:i.getParameter(36348),maxFragmentUniforms:i.getParameter(36349),glsl:i.getParameter(35724),renderer:i.getParameter(7937),vendor:i.getParameter(7936),version:i.getParameter(7938),readFloat:N,npotTextureCube:G}},P=function(i){return i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Uint32Array||i instanceof Int8Array||i instanceof Int16Array||i instanceof Int32Array||i instanceof Float32Array||i instanceof Float64Array||i instanceof Uint8ClampedArray},T=function(i){return Object.keys(i).map(function(o){return i[o]})},F={shape:function(i){for(var o=[];i.length;i=i[0])o.push(i.length);return o},flatten:function(i,o,s,x){var F=1;if(o.length)for(var N=0;N<o.length;++N)F*=o[N];else F=0;switch(s=x||_.allocType(s,F),o.length){case 0:break;case 1:for(x=o[0],o=0;o<x;++o)s[o]=i[o];break;case 2:for(x=o[0],o=o[1],N=F=0;N<x;++N)for(var j=i[N],G=0;G<o;++G)s[F++]=j[G];break;case 3:hb(i,o[0],o[1],o[2],s,0);break;default:!function ib(i,o,s,x,_){for(var F=1,N=s+1;N<o.length;++N)F*=o[N];var j=o[s];if(4==o.length-s){var G=o[s+1],Z=o[s+2];for(N=0,o=o[s+3];N<j;++N)hb(i[N],G,Z,o,x,_),_+=F}else for(N=0;N<j;++N)ib(i[N],o,s+1,x,_),_+=F}(i,o,0,s,0)}return s}},N={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},j={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},G={dynamic:35048,stream:35040,static:35044},Z=F.flatten,X=F.shape,J=[];J[5120]=1,J[5122]=2,J[5124]=4,J[5121]=1,J[5123]=2,J[5125]=4,J[5126]=4;var $={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ee=new Float32Array(1),et=new Uint32Array(ee.buffer),er=[9984,9986,9985,9987],en=[0,6409,6410,6407,6408],ei={};ei[6409]=ei[6406]=ei[6402]=1,ei[34041]=ei[6410]=2,ei[6407]=ei[35904]=3,ei[6408]=ei[35906]=4;var eo=ra("HTMLCanvasElement"),es=ra("OffscreenCanvas"),el=ra("CanvasRenderingContext2D"),ec=ra("ImageBitmap"),eu=ra("HTMLImageElement"),ef=ra("HTMLVideoElement"),eh=Object.keys(N).concat([eo,es,el,ec,eu,ef]),ed=[];ed[5121]=1,ed[5126]=4,ed[36193]=2,ed[5123]=2,ed[5125]=4;var ep=[];ep[32854]=2,ep[32855]=2,ep[36194]=2,ep[34041]=4,ep[33776]=.5,ep[33777]=.5,ep[33778]=1,ep[33779]=1,ep[35986]=.5,ep[35987]=1,ep[34798]=1,ep[35840]=.5,ep[35841]=.25,ep[35842]=.5,ep[35843]=.25,ep[36196]=.5;var eg=[];eg[32854]=2,eg[32855]=2,eg[36194]=2,eg[33189]=2,eg[36168]=1,eg[34041]=4,eg[35907]=4,eg[34836]=16,eg[34842]=8,eg[34843]=6;var cc=function(i,o,s,x,_){function e(i){this.id=j++,this.refCount=1,this.renderbuffer=i,this.format=32854,this.height=this.width=0,_.profile&&(this.stats={size:0})}function m(o){var s=o.renderbuffer;i.bindRenderbuffer(36161,null),i.deleteRenderbuffer(s),o.renderbuffer=null,o.refCount=0,delete G[o.id],x.renderbufferCount--}var F={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};o.ext_srgb&&(F.srgba=35907),o.ext_color_buffer_half_float&&(F.rgba16f=34842,F.rgb16f=34843),o.webgl_color_buffer_float&&(F.rgba32f=34836);var N=[];Object.keys(F).forEach(function(i){N[F[i]]=i});var j=0,G={};return e.prototype.decRef=function(){0>=--this.refCount&&m(this)},_.profile&&(x.getTotalRenderbufferSize=function(){var i=0;return Object.keys(G).forEach(function(o){i+=G[o].stats.size}),i}),{create:function(o,s){function g(o,s){var x=0,G=0,Z=32854;if("object"==typeof o&&o?("shape"in o?(x=0|(G=o.shape)[0],G=0|G[1]):("radius"in o&&(x=G=0|o.radius),"width"in o&&(x=0|o.width),"height"in o&&(G=0|o.height)),"format"in o&&(Z=F[o.format])):"number"==typeof o?(x=0|o,G="number"==typeof s?0|s:x):o||(x=G=1),x!==j.width||G!==j.height||Z!==j.format)return g.width=j.width=x,g.height=j.height=G,j.format=Z,i.bindRenderbuffer(36161,j.renderbuffer),i.renderbufferStorage(36161,Z,x,G),_.profile&&(j.stats.size=eg[j.format]*j.width*j.height),g.format=N[j.format],g}var j=new e(i.createRenderbuffer());return G[j.id]=j,x.renderbufferCount++,g(o,s),g.resize=function(o,s){var x=0|o,F=0|s||x;return x===j.width&&F===j.height||(g.width=j.width=x,g.height=j.height=F,i.bindRenderbuffer(36161,j.renderbuffer),i.renderbufferStorage(36161,j.format,x,F),_.profile&&(j.stats.size=eg[j.format]*j.width*j.height)),g},g._reglType="renderbuffer",g._renderbuffer=j,_.profile&&(g.stats=j.stats),g.destroy=function(){j.decRef()},g},clear:function(){T(G).forEach(m)},restore:function(){T(G).forEach(function(o){o.renderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,o.renderbuffer),i.renderbufferStorage(36161,o.format,o.width,o.height)}),i.bindRenderbuffer(36161,null)}}},em=[];em[6408]=4,em[6407]=3;var ey=[];ey[5121]=1,ey[5126]=4,ey[36193]=2;var ev=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ex=["x","y","z","w"],e_="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),ew={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},eT={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ek={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eA={cw:2304,ccw:2305},eS=new K(!1,!1,!1,function(){}),dc=function(i,o){function c(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function d(i,o,s){var x=_.pop()||new c;x.startQueryIndex=i,x.endQueryIndex=o,x.sum=0,x.stats=s,F.push(x)}if(!o.ext_disjoint_timer_query)return null;var s=[],x=[],_=[],F=[],N=[],j=[];return{beginQuery:function(i){var _=s.pop()||o.ext_disjoint_timer_query.createQueryEXT();o.ext_disjoint_timer_query.beginQueryEXT(35007,_),x.push(_),d(x.length-1,x.length,i)},endQuery:function(){o.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var i,G;if(0!==(i=x.length)){j.length=Math.max(j.length,i+1),N.length=Math.max(N.length,i+1),N[0]=0;var Z=j[0]=0;for(G=i=0;G<x.length;++G){var X=x[G];o.ext_disjoint_timer_query.getQueryObjectEXT(X,34919)?(Z+=o.ext_disjoint_timer_query.getQueryObjectEXT(X,34918),s.push(X)):x[i++]=X,N[G+1]=Z,j[G+1]=i}for(x.length=i,G=i=0;G<F.length;++G){var Z=F[G],J=Z.startQueryIndex,X=Z.endQueryIndex;Z.sum+=N[X]-N[J],J=j[J],(X=j[X])===J?(Z.stats.gpuTime+=Z.sum/1e6,_.push(Z)):(Z.startQueryIndex=J,Z.endQueryIndex=X,F[i++]=Z)}F.length=i}},getNumPendingQueries:function(){return x.length},clear:function(){s.push.apply(s,x);for(var i=0;i<s.length;i++)o.ext_disjoint_timer_query.deleteQueryEXT(s[i]);x.length=0,s.length=0},restore:function(){x.length=0,s.length=0}}};return function(i){function b(){if(0===eZ.length)eL&&eL.update(),eJ=null;else{eJ=s.next(b),k();for(var i=eZ.length-1;0<=i;--i){var o=eZ[i];o&&o(eD,null,0)}eh.flush(),eL&&eL.update()}}function c(){!eJ&&0<eZ.length&&(eJ=s.next(b))}function d(){eJ&&(s.cancel(b),eJ=null)}function f(i){i.preventDefault(),d(),eY.forEach(function(i){i()})}function e(i){eh.getError(),ep.restore(),eN.restore(),eB.restore(),ej.restore(),eU.restore(),eV.restore(),eF.restore(),eL&&eL.restore(),eH.procs.refresh(),c(),eX.forEach(function(i){i()})}function m(i){function b(i,s){var x={},_={};return Object.keys(i).forEach(function(F){var N=i[F];if(o.isDynamic(N))_[F]=o.unbox(N,F);else{if(s&&Array.isArray(N)){for(var j=0;j<N.length;++j)if(o.isDynamic(N[j])){_[F]=o.unbox(N,F);return}}x[F]=N}}),{dynamic:_,static:x}}var s=b(i.context||{},!0),x=b(i.uniforms||{},!0),_=b(i.attributes||{},!1);i=b(function(i){function b(i){if(i in o){var s=o[i];delete o[i],Object.keys(s).forEach(function(x){o[i+"."+x]=s[x]})}}var o=O({},i);return delete o.uniforms,delete o.attributes,delete o.context,delete o.vao,"stencil"in o&&o.stencil.op&&(o.stencil.opBack=o.stencil.opFront=o.stencil.op,delete o.stencil.op),b("blend"),b("depth"),b("cull"),b("stencil"),b("polygonOffset"),b("scissor"),b("sample"),"vao"in i&&(o.vao=i.vao),o}(i),!1);var F={gpuTime:0,cpuTime:0,count:0},N=eH.compile(i,_,x,s,F),j=N.draw,G=N.batch,Z=N.scope,X=[];return O(function(i,o){var s;if("function"==typeof i)return Z.call(this,null,i,0);if("function"==typeof o){if("number"==typeof i)for(s=0;s<i;++s)Z.call(this,null,o,s);else if(!Array.isArray(i))return Z.call(this,i,o,0);else for(s=0;s<i.length;++s)Z.call(this,i[s],o,s)}else if("number"==typeof i){if(0<i)return G.call(this,function(i){for(;X.length<i;)X.push(null);return X}(0|i),0|i)}else if(!Array.isArray(i))return j.call(this,i);else if(i.length)return G.call(this,i,i.length)},{stats:F,destroy:function(){N.destroy()}})}function q(i,o){var s=0;eH.procs.poll();var x=o.color;x&&(eh.clearColor(+x[0]||0,+x[1]||0,+x[2]||0,+x[3]||0),s|=16384),"depth"in o&&(eh.clearDepth(+o.depth),s|=256),"stencil"in o&&(eh.clearStencil(0|o.stencil),s|=1024),eh.clear(s)}function u(i){return eZ.push(i),c(),{cancel:function(){var o=Bb(eZ,i);eZ[o]=function b(){var i=Bb(eZ,b);eZ[i]=eZ[eZ.length-1],--eZ.length,0>=eZ.length&&d()}}}}function r(){var i=eG.viewport,o=eG.scissor_box;i[0]=i[1]=o[0]=o[1]=0,eD.viewportWidth=eD.framebufferWidth=eD.drawingBufferWidth=i[2]=o[2]=eh.drawingBufferWidth,eD.viewportHeight=eD.framebufferHeight=eD.drawingBufferHeight=i[3]=o[3]=eh.drawingBufferHeight}function k(){eD.tick+=1,eD.time=t(),r(),eH.procs.poll()}function n(){ej.refresh(),r(),eH.procs.refresh(),eL&&eL.update()}function t(){return(x()-eP)/1e3}if(!(i=function(i){var o,s,x,_,F=i||{};i={};var N=[],j=[],G="undefined"==typeof window?1:window.devicePixelRatio,Z=!1,X={},n=function(i){},t=function(){};if("string"==typeof F?o=document.querySelector(F):"object"==typeof F&&("string"==typeof F.nodeName&&"function"==typeof F.appendChild&&"function"==typeof F.getBoundingClientRect?o=F:"function"==typeof F.drawArrays||"function"==typeof F.drawElements?x=(_=F).canvas:("gl"in F?_=F.gl:"canvas"in F?x=eb(F.canvas):"container"in F&&(s=eb(F.container)),"attributes"in F&&(i=F.attributes),"extensions"in F&&(N=db(F.extensions)),"optionalExtensions"in F&&(j=db(F.optionalExtensions)),"onDone"in F&&(n=F.onDone),"profile"in F&&(Z=!!F.profile),"pixelRatio"in F&&(G=+F.pixelRatio),"cachedCode"in F&&(X=F.cachedCode))),o&&("canvas"===o.nodeName.toLowerCase()?x=o:s=o),!_){if(!x){if(!(o=function(i,o,s){function d(){var o=window.innerWidth,x=window.innerHeight;i!==document.body&&(o=(x=_.getBoundingClientRect()).right-x.left,x=x.bottom-x.top),_.width=s*o,_.height=s*x}var x,_=document.createElement("canvas");return O(_.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),i.appendChild(_),i===document.body&&(_.style.position="absolute",O(i.style,{margin:0,padding:0})),i!==document.body&&"function"==typeof ResizeObserver?(x=new ResizeObserver(function(){setTimeout(d)})).observe(i):window.addEventListener("resize",d,!1),d(),{canvas:_,onDestroy:function(){x?x.disconnect():window.removeEventListener("resize",d),i.removeChild(_)}}}(s||document.body,0,G)))return null;x=o.canvas,t=o.onDestroy}void 0===i.premultipliedAlpha&&(i.premultipliedAlpha=!0),_=function(i,o){function c(s){try{return i.getContext(s,o)}catch(i){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}(x,i)}return _?{gl:_,canvas:x,container:s,extensions:N,optionalExtensions:j,pixelRatio:G,profile:Z,cachedCode:X,onDone:n,onDestroy:t}:(t(),n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(i)))return null;var ee,et,eh=i.gl,ed=eh.getContextAttributes();eh.isContextLost();var ep=function(i,o){function c(o){var x;o=o.toLowerCase();try{x=s[o]=i.getExtension(o)}catch(i){}return!!x}for(var s={},x=0;x<o.extensions.length;++x){var _=o.extensions[x];if(!c(_))return o.onDestroy(),o.onDone('"'+_+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return o.optionalExtensions.forEach(c),{extensions:s,restore:function(){Object.keys(s).forEach(function(i){if(s[i]&&!c(i))throw Error("(regl): error restoring extension "+i)})}}}(eh,i);if(!ep)return null;var eg=(ee={"":0},et=[""],{id:function(i){var o=ee[i];return o||(o=ee[i]=et.length,et.push(i)),o},str:function(i){return et[i]}}),eM={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},eC=i.cachedCode||{},eE=ep.extensions,eL=dc(eh,eE),eP=x(),eI=eh.drawingBufferWidth,eO=eh.drawingBufferHeight,eD={tick:0,time:0,viewportWidth:eI,viewportHeight:eO,framebufferWidth:eI,framebufferHeight:eO,drawingBufferWidth:eI,drawingBufferHeight:eO,pixelRatio:i.pixelRatio},eI={elements:null,primitive:4,count:-1,offset:0,instances:-1},eR=bc(eh,eE),eB=function(i,o,s,x){function f(o){this.id=F++,this.buffer=i.createBuffer(),this.type=o,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,s.profile&&(this.stats={size:0})}function e(o,s,x){o.byteLength=s.byteLength,i.bufferData(o.type,s,x)}function m(i,o,s,x,F,N){if(i.usage=s,Array.isArray(o)){if(i.dtype=x||5126,0<o.length){if(Array.isArray(o[0])){F=X(o);for(var j=x=1;j<F.length;++j)x*=F[j];i.dimension=x,o=Z(o,F,i.dtype),e(i,o,s),N?i.persistentData=o:_.freeType(o)}else"number"==typeof o[0]?(i.dimension=F,jb(F=_.allocType(i.dtype,o.length),o),e(i,F,s),N?i.persistentData=F:_.freeType(F)):P(o[0])&&(i.dimension=o[0].length,i.dtype=x||Ha(o[0])||5126,o=Z(o,[o.length,o[0].length],i.dtype),e(i,o,s),N?i.persistentData=o:_.freeType(o))}}else if(P(o))i.dtype=x||Ha(o),i.dimension=F,e(i,o,s),N&&(i.persistentData=new Uint8Array(new Uint8Array(o.buffer)));else if(fa(o)){F=o.shape;var G=o.stride,j=o.offset,J=0,$=0,ee=0,et=0;1===F.length?(J=F[0],$=1,ee=G[0],et=0):2===F.length&&(J=F[0],$=F[1],ee=G[0],et=G[1]),i.dtype=x||Ha(o.data)||5126,i.dimension=$,kb(F=_.allocType(i.dtype,J*$),o.data,J,$,ee,et,j),e(i,F,s),N?i.persistentData=F:_.freeType(F)}else o instanceof ArrayBuffer&&(i.dtype=5121,i.dimension=F,e(i,o,s),N&&(i.persistentData=new Uint8Array(new Uint8Array(o))))}function q(s){o.bufferCount--,x(s),i.deleteBuffer(s.buffer),s.buffer=null,delete N[s.id]}var F=0,N={};f.prototype.bind=function(){i.bindBuffer(this.type,this.buffer)},f.prototype.destroy=function(){q(this)};var $=[];return s.profile&&(o.getTotalBufferSize=function(){var i=0;return Object.keys(N).forEach(function(o){i+=N[o].stats.size}),i}),{create:function(x,F,$,ee){function h(o){var x=35044,_=null,F=0,N=0,Z=1;return Array.isArray(o)||P(o)||fa(o)||o instanceof ArrayBuffer?_=o:"number"==typeof o?F=0|o:o&&("data"in o&&(_=o.data),"usage"in o&&(x=G[o.usage]),"type"in o&&(N=j[o.type]),"dimension"in o&&(Z=0|o.dimension),"length"in o&&(F=0|o.length)),et.bind(),_?m(et,_,x,N,Z,ee):(F&&i.bufferData(et.type,F,x),et.dtype=N||5121,et.usage=x,et.dimension=Z,et.byteLength=F),s.profile&&(et.stats.size=et.byteLength*J[et.dtype]),h}o.bufferCount++;var et=new f(F);return N[et.id]=et,$||h(x),h._reglType="buffer",h._buffer=et,h.subdata=function(o,s){var x,F=0|(s||0);if(et.bind(),P(o)||o instanceof ArrayBuffer)i.bufferSubData(et.type,F,o);else if(Array.isArray(o)){if(0<o.length){if("number"==typeof o[0]){var N=_.allocType(et.dtype,o.length);jb(N,o),i.bufferSubData(et.type,F,N),_.freeType(N)}else(Array.isArray(o[0])||P(o[0]))&&(x=X(o),N=Z(o,x,et.dtype),i.bufferSubData(et.type,F,N),_.freeType(N))}}else if(fa(o)){x=o.shape;var j=o.stride,G=N=0,J=0,$=0;1===x.length?(N=x[0],G=1,J=j[0],$=0):2===x.length&&(N=x[0],G=x[1],J=j[0],$=j[1]),x=Array.isArray(o.data)?et.dtype:Ha(o.data),kb(x=_.allocType(x,N*G),o.data,N,G,J,$,o.offset),i.bufferSubData(et.type,F,x),_.freeType(x)}return h},s.profile&&(h.stats=et.stats),h.destroy=function(){q(et)},h},createStream:function(i,o){var s=$.pop();return s||(s=new f(i)),s.bind(),m(s,o,35040,0,1,!1),s},destroyStream:function(i){$.push(i)},clear:function(){T(N).forEach(q),$.forEach(q)},getBuffer:function(i){return i&&i._buffer instanceof f?i._buffer:null},restore:function(){T(N).forEach(function(o){o.buffer=i.createBuffer(),i.bindBuffer(o.type,o.buffer),i.bufferData(o.type,o.persistentData||o.byteLength,o.usage)})},_initBuffer:m}}(eh,eM,i,function(i){return eF.destroyBuffer(i)}),ez=function(i,o,s,x){function f(i){this.id=F++,_[this.id]=this,this.buffer=i,this.primType=4,this.type=this.vertCount=0}function e(x,_,F,N,j,G,Z){var X;if(x.buffer.bind(),_?((X=Z)||P(_)&&(!fa(_)||P(_.data))||(X=o.oes_element_index_uint?5125:5123),s._initBuffer(x.buffer,_,F,X,3)):(i.bufferData(34963,G,F),x.buffer.dtype=X||5121,x.buffer.usage=F,x.buffer.dimension=3,x.buffer.byteLength=G),X=Z,!Z){switch(x.buffer.dtype){case 5121:case 5120:X=5121;break;case 5123:case 5122:X=5123;break;case 5125:case 5124:X=5125}x.buffer.dtype=X}x.type=X,0>(_=j)&&(_=x.buffer.byteLength,5123===X?_>>=1:5125===X&&(_>>=2)),x.vertCount=_,_=N,0>N&&(_=4,1===(N=x.buffer.dimension)&&(_=0),2===N&&(_=1),3===N&&(_=4)),x.primType=_}function m(i){x.elementsCount--,delete _[i.id],i.buffer.destroy(),i.buffer=null}var _={},F=0,N={uint8:5121,uint16:5123};o.oes_element_index_uint&&(N.uint32=5125),f.prototype.bind=function(){this.buffer.bind()};var j=[];return{create:function(i,o){function g(i){if(i){if("number"==typeof i)_(i),F.primType=4,F.vertCount=0|i,F.type=5121;else{var o=null,s=35044,x=-1,j=-1,Z=0,X=0;Array.isArray(i)||P(i)||fa(i)?o=i:("data"in i&&(o=i.data),"usage"in i&&(s=G[i.usage]),"primitive"in i&&(x=$[i.primitive]),"count"in i&&(j=0|i.count),"type"in i&&(X=N[i.type]),"length"in i)?Z=0|i.length:(Z=j,5123===X||5122===X)?Z*=2:(5125===X||5124===X)&&(Z*=4),e(F,o,s,x,j,Z,X)}}else _(),F.primType=4,F.vertCount=0,F.type=5121;return g}var _=s.create(null,34963,!0),F=new f(_._buffer);return x.elementsCount++,g(i),g._reglType="elements",g._elements=F,g.subdata=function(i,o){return _.subdata(i,o),g},g.destroy=function(){m(F)},g},createStream:function(i){var o=j.pop();return o||(o=new f(s.create(null,34963,!0,!1)._buffer)),e(o,i,35040,-1,-1,0,0),o},destroyStream:function(i){j.push(i)},getElements:function(i){return"function"==typeof i&&i._elements instanceof f?i._elements:null},clear:function(){T(_).forEach(m)}}}(eh,eE,eB,eM),eF=function(i,o,s,x,_,F,N){function k(){this.id=++X,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var i=o.oes_vertex_array_object;this.vao=i?i.createVertexArrayOES():null,J[this.id]=this,this.buffers=[]}var G=s.maxAttributes,Z=Array(G);for(s=0;s<G;++s)Z[s]=new Za;var X=0,J={},ee={Record:Za,scope:{},state:Z,currentVAO:null,targetVAO:null,restore:o.oes_vertex_array_object?function(){o.oes_vertex_array_object&&T(J).forEach(function(i){i.refresh()})}:function(){},createVAO:function(i){function b(i){Array.isArray(i)?(N=i,o.elements&&o.ownsElements&&o.elements.destroy(),o.elements=null,o.ownsElements=!1,o.offset=0,o.count=0,o.instances=-1,o.primitive=4):(i.elements?(N=i.elements,o.ownsElements?("function"==typeof N&&"elements"===N._reglType?o.elements.destroy():o.elements(N),o.ownsElements=!1):F.getElements(i.elements)?(o.elements=i.elements,o.ownsElements=!1):(o.elements=F.create(i.elements),o.ownsElements=!0)):(o.elements=null,o.ownsElements=!1),N=i.attributes,o.offset=0,o.count=-1,o.instances=-1,o.primitive=4,o.elements&&(o.count=o.elements._elements.vertCount,o.primitive=o.elements._elements.primType),"offset"in i&&(o.offset=0|i.offset),"count"in i&&(o.count=0|i.count),"instances"in i&&(o.instances=0|i.instances),"primitive"in i&&(o.primitive=$[i.primitive])),i={};var s=o.attributes;s.length=N.length;for(var x=0;x<N.length;++x){var N,G,Z=N[x],X=s[x]=new Za,J=Z.data||Z;Array.isArray(J)||P(J)||fa(J)?(o.buffers[x]&&(G=o.buffers[x],P(J)&&G._buffer.byteLength>=J.byteLength?G.subdata(J):(G.destroy(),o.buffers[x]=null)),o.buffers[x]||(G=o.buffers[x]=_.create(Z,34962,!1,!0)),X.buffer=_.getBuffer(G),X.size=0|X.buffer.dimension,X.normalized=!1,X.type=X.buffer.dtype,X.offset=0,X.stride=0,X.divisor=0,X.state=1,i[x]=1):_.getBuffer(Z)?(X.buffer=_.getBuffer(Z),X.size=0|X.buffer.dimension,X.normalized=!1,X.type=X.buffer.dtype,X.offset=0,X.stride=0,X.divisor=0,X.state=1):_.getBuffer(Z.buffer)?(X.buffer=_.getBuffer(Z.buffer),X.size=0|(+Z.size||X.buffer.dimension),X.normalized=!!Z.normalized,X.type="type"in Z?j[Z.type]:X.buffer.dtype,X.offset=0|(Z.offset||0),X.stride=0|(Z.stride||0),X.divisor=0|(Z.divisor||0),X.state=1):"x"in Z&&(X.x=+Z.x||0,X.y=+Z.y||0,X.z=+Z.z||0,X.w=+Z.w||0,X.state=2)}for(G=0;G<o.buffers.length;++G)!i[G]&&o.buffers[G]&&(o.buffers[G].destroy(),o.buffers[G]=null);return o.refresh(),b}var o=new k;return x.vaoCount+=1,b.destroy=function(){for(var i=0;i<o.buffers.length;++i)o.buffers[i]&&o.buffers[i].destroy();o.buffers.length=0,o.ownsElements&&(o.elements.destroy(),o.elements=null,o.ownsElements=!1),o.destroy()},b._vao=o,b._reglType="vao",b(i)},getVAO:function(i){return"function"==typeof i&&i._vao?i._vao:null},destroyBuffer:function(o){for(var s=0;s<Z.length;++s){var x=Z[s];x.buffer===o&&(i.disableVertexAttribArray(s),x.buffer=null)}},setVAO:o.oes_vertex_array_object?function(i){if(i!==ee.currentVAO){var s=o.oes_vertex_array_object;i?s.bindVertexArrayOES(i.vao):s.bindVertexArrayOES(null),ee.currentVAO=i}}:function(s){if(s!==ee.currentVAO){if(s)s.bindAttrs();else{for(var x=o.angle_instanced_arrays,_=0;_<Z.length;++_){var F=Z[_];F.buffer?(i.enableVertexAttribArray(_),F.buffer.bind(),i.vertexAttribPointer(_,F.size,F.type,F.normalized,F.stride,F.offfset),x&&F.divisor&&x.vertexAttribDivisorANGLE(_,F.divisor)):(i.disableVertexAttribArray(_),i.vertexAttrib4f(_,F.x,F.y,F.z,F.w))}N.elements?i.bindBuffer(34963,N.elements.buffer.buffer):i.bindBuffer(34963,null)}ee.currentVAO=s}},clear:o.oes_vertex_array_object?function(){T(J).forEach(function(i){i.destroy()})}:function(){}};return k.prototype.bindAttrs=function(){for(var s=o.angle_instanced_arrays,x=this.attributes,_=0;_<x.length;++_){var N=x[_];N.buffer?(i.enableVertexAttribArray(_),i.bindBuffer(34962,N.buffer.buffer),i.vertexAttribPointer(_,N.size,N.type,N.normalized,N.stride,N.offset),s&&N.divisor&&s.vertexAttribDivisorANGLE(_,N.divisor)):(i.disableVertexAttribArray(_),i.vertexAttrib4f(_,N.x,N.y,N.z,N.w))}for(s=x.length;s<G;++s)i.disableVertexAttribArray(s);(s=F.getElements(this.elements))?i.bindBuffer(34963,s.buffer.buffer):i.bindBuffer(34963,null)},k.prototype.refresh=function(){var i=o.oes_vertex_array_object;i&&(i.bindVertexArrayOES(this.vao),this.bindAttrs(),ee.currentVAO=null,i.bindVertexArrayOES(null))},k.prototype.destroy=function(){if(this.vao){var i=o.oes_vertex_array_object;this===ee.currentVAO&&(ee.currentVAO=null,i.bindVertexArrayOES(null)),i.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),J[this.id]&&(delete J[this.id],--x.vaoCount)},ee}(eh,eE,eR,eM,eB,ez,eI),eN=function(i,o,s,x){function f(i,o,s,x){this.name=i,this.id=o,this.location=s,this.info=x}function e(i,o){for(var s=0;s<i.length;++s)if(i[s].id===o.id){i[s].location=o.location;return}i.push(o)}function m(s,x,N){var j=(N=35632===s?_:F)[x];if(!j){var G=o.str(x),j=i.createShader(s);i.shaderSource(j,G),i.compileShader(j),N[x]=j}return j}function q(i,o){this.id=G++,this.fragId=i,this.vertId=o,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,x.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(s,_,F){N=m(35632,s.fragId);var N,j=m(35633,s.vertId);if(_=s.program=i.createProgram(),i.attachShader(_,N),i.attachShader(_,j),F)for(N=0;N<F.length;++N)j=F[N],i.bindAttribLocation(_,j[0],j[1]);i.linkProgram(_),j=i.getProgramParameter(_,35718),x.profile&&(s.stats.uniformsCount=j);var G=s.uniforms;for(N=0;N<j;++N)if(F=i.getActiveUniform(_,N)){if(1<F.size)for(var Z=0;Z<F.size;++Z){var X=F.name.replace("[0]","["+Z+"]");e(G,new f(X,o.id(X),i.getUniformLocation(_,X),F))}else e(G,new f(F.name,o.id(F.name),i.getUniformLocation(_,F.name),F))}for(j=i.getProgramParameter(_,35721),x.profile&&(s.stats.attributesCount=j),s=s.attributes,N=0;N<j;++N)(F=i.getActiveAttrib(_,N))&&e(s,new f(F.name,o.id(F.name),i.getAttribLocation(_,F.name),F))}var _={},F={},N={},j=[],G=0;return x.profile&&(s.getMaxUniformsCount=function(){var i=0;return j.forEach(function(o){o.stats.uniformsCount>i&&(i=o.stats.uniformsCount)}),i},s.getMaxAttributesCount=function(){var i=0;return j.forEach(function(o){o.stats.attributesCount>i&&(i=o.stats.attributesCount)}),i}),{clear:function(){var o=i.deleteShader.bind(i);T(_).forEach(o),_={},T(F).forEach(o),F={},j.forEach(function(o){i.deleteProgram(o.program)}),j.length=0,N={},s.shaderCount=0},program:function(o,x,G,Z){var X=N[x];X||(X=N[x]={});var J=X[o];if(J&&(J.refCount++,!Z))return J;var $=new q(x,o);return s.shaderCount++,u($,G,Z),J||(X[o]=$),j.push($),O($,{destroy:function(){if($.refCount--,0>=$.refCount){i.deleteProgram($.program);var o=j.indexOf($);j.splice(o,1),s.shaderCount--}0>=X[$.vertId].refCount&&(i.deleteShader(F[$.vertId]),delete F[$.vertId],delete N[$.fragId][$.vertId]),Object.keys(N[$.fragId]).length||(i.deleteShader(_[$.fragId]),delete _[$.fragId],delete N[$.fragId])}})},restore:function(){_={},F={};for(var i=0;i<j.length;++i)u(j[i],null,j[i].attributes.map(function(i){return[i.location,i.name]}))},shader:m,frag:-1,vert:-1}}(eh,eg,eM,i),ej=function(i,o,s,x,j,G,Z){function q(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(i,o){i.internalformat=o.internalformat,i.format=o.format,i.type=o.type,i.compressed=o.compressed,i.premultiplyAlpha=o.premultiplyAlpha,i.flipY=o.flipY,i.unpackAlignment=o.unpackAlignment,i.colorSpace=o.colorSpace,i.width=o.width,i.height=o.height,i.channels=o.channels}function r(i,o){if("object"==typeof o&&o){"premultiplyAlpha"in o&&(i.premultiplyAlpha=o.premultiplyAlpha),"flipY"in o&&(i.flipY=o.flipY),"alignment"in o&&(i.unpackAlignment=o.alignment),"colorSpace"in o&&(i.colorSpace=et[o.colorSpace]),"type"in o&&(i.type=eh[o.type]);var s=i.width,x=i.height,_=i.channels,F=!1;"shape"in o?(s=o.shape[0],x=o.shape[1],3===o.shape.length&&(_=o.shape[2],F=!0)):("radius"in o&&(s=x=o.radius),"width"in o&&(s=o.width),"height"in o&&(x=o.height),"channels"in o&&(_=o.channels,F=!0)),i.width=0|s,i.height=0|x,i.channels=0|_,s=!1,"format"in o&&(s=o.format,x=i.internalformat=ed[s],i.format=eT[x],s in eh&&!("type"in o)&&(i.type=eh[s]),s in ep&&(i.compressed=!0),s=!0),!F&&s?i.channels=ei[i.format]:F&&!s&&i.channels!==en[i.format]&&(i.format=i.internalformat=en[i.channels])}}function k(o){i.pixelStorei(37440,o.flipY),i.pixelStorei(37441,o.premultiplyAlpha),i.pixelStorei(37443,o.colorSpace),i.pixelStorei(3317,o.unpackAlignment)}function n(){q.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function t(i,o){var s=null;if(Va(o)?s=o:o&&(r(i,o),"x"in o&&(i.xOffset=0|o.x),"y"in o&&(i.yOffset=0|o.y),Va(o.data)&&(s=o.data)),o.copy){var x=j.viewportWidth,G=j.viewportHeight;i.width=i.width||x-i.xOffset,i.height=i.height||G-i.yOffset,i.needsCopy=!0}else if(s){if(P(s))i.channels=i.channels||4,i.data=s,"type"in o||5121!==i.type||(i.type=0|N[Object.prototype.toString.call(s)]);else if(qb(s)){switch(i.channels=i.channels||4,G=(x=s).length,i.type){case 5121:case 5123:case 5125:case 5126:(G=_.allocType(i.type,G)).set(x),i.data=G;break;case 36193:i.data=ob(x)}i.alignment=1,i.needsFree=!0}else if(fa(s)){Array.isArray(x=s.data)||5121!==i.type||(i.type=0|N[Object.prototype.toString.call(x)]);var Z,X,J,$,G=s.shape,ee=s.stride;3===G.length?(J=G[2],$=ee[2]):$=J=1,Z=G[0],X=G[1],G=ee[0],ee=ee[1],i.alignment=1,i.width=Z,i.height=X,i.channels=J,i.format=i.internalformat=en[J],i.needsFree=!0,Z=$,s=s.offset,J=i.width,$=i.height,X=i.channels;for(var et=_.allocType(36193===i.type?5126:i.type,J*$*X),er=0,ei=0;ei<$;++ei)for(var eh=0;eh<J;++eh)for(var ed=0;ed<X;++ed)et[er++]=x[G*eh+ee*ei+Z*ed+s];sb(i,et)}else if(R(s)===eo||R(s)===es||R(s)===el)R(s)===eo||R(s)===es?i.element=s:i.element=s.canvas,i.width=i.element.width,i.height=i.element.height,i.channels=4;else if(R(s)===ec)i.element=s,i.width=s.width,i.height=s.height,i.channels=4;else if(R(s)===eu)i.element=s,i.width=s.naturalWidth,i.height=s.naturalHeight,i.channels=4;else if(R(s)===ef)i.element=s,i.width=s.videoWidth,i.height=s.videoHeight,i.channels=4;else if(rb(s)){for($=0,x=i.width||s[0].length,G=i.height||s.length,ee=i.channels,ee=qa(s[0][0])?ee||s[0][0].length:ee||1,Z=F.shape(s),J=1;$<Z.length;++$)J*=Z[$];J=_.allocType(36193===i.type?5126:i.type,J),F.flatten(s,Z,"",J),sb(i,J),i.alignment=1,i.width=x,i.height=G,i.channels=ee,i.format=i.internalformat=en[ee],i.needsFree=!0}}else i.width=i.width||1,i.height=i.height||1,i.channels=i.channels||4}function g(o,s,_,F,N){var j=o.element,G=o.data,Z=o.internalformat,X=o.format,J=o.type,$=o.width,ee=o.height;k(o),j?i.texSubImage2D(s,N,_,F,X,J,j):o.compressed?i.compressedTexSubImage2D(s,N,_,F,Z,$,ee,G):o.needsCopy?(x(),i.copyTexSubImage2D(s,N,_,F,o.xOffset,o.yOffset,$,ee)):i.texSubImage2D(s,N,_,F,$,ee,X,J,G)}function l(){return ek.pop()||new n}function h(i){i.needsFree&&_.freeType(i.data),n.call(i),ek.push(i)}function p(){q.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function y(i,o,s){var x=i.images[0]=l();i.mipmask=1,x.width=i.width=o,x.height=i.height=s,x.channels=i.channels=4}function C(i,o){var s=null;if(Va(o))u(s=i.images[0]=l(),i),t(s,o),i.mipmask=1;else if(r(i,o),Array.isArray(o.mipmap))for(var x=o.mipmap,_=0;_<x.length;++_)u(s=i.images[_]=l(),i),s.width>>=_,s.height>>=_,t(s,x[_]),i.mipmask|=1<<_;else u(s=i.images[0]=l(),i),t(s,o),i.mipmask=1;u(i,i.images[0])}function w(o,s){for(var _=o.images,F=0;F<_.length&&_[F];++F){var N=_[F],j=F,G=N.element,Z=N.data,X=N.internalformat,J=N.format,$=N.type,ee=N.width,et=N.height;k(N),G?i.texImage2D(s,j,J,J,$,G):N.compressed?i.compressedTexImage2D(s,j,X,ee,et,0,Z):N.needsCopy?(x(),i.copyTexImage2D(s,j,J,N.xOffset,N.yOffset,ee,et,0)):i.texImage2D(s,j,J,ee,et,0,J,$,Z||null)}}function z(){var i=eA.pop()||new p;q.call(i);for(var o=i.mipmask=0;16>o;++o)i.images[o]=null;return i}function wa(i){for(var o=i.images,s=0;s<o.length;++s)o[s]&&h(o[s]),o[s]=null;eA.push(i)}function E(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function nb(i,o){"min"in o&&(i.minFilter=ee[o.min],!(0<=er.indexOf(i.minFilter))||"faces"in o||(i.genMipmaps=!0)),"mag"in o&&(i.magFilter=$[o.mag]);var s=i.wrapS,x=i.wrapT;if("wrap"in o){var _=o.wrap;"string"==typeof _?s=x=J[_]:Array.isArray(_)&&(s=J[_[0]],x=J[_[1]])}else"wrapS"in o&&(s=J[o.wrapS]),"wrapT"in o&&(x=J[o.wrapT]);if(i.wrapS=s,i.wrapT=x,"anisotropic"in o&&(i.anisotropic=o.anisotropic),"mipmap"in o){switch(s=!1,typeof o.mipmap){case"string":i.mipmapHint=X[o.mipmap],s=i.genMipmaps=!0;break;case"boolean":s=i.genMipmaps=o.mipmap;break;case"object":i.genMipmaps=!1,s=!0}!s||"min"in o||(i.minFilter=9984)}}function D(s,x){i.texParameteri(x,10241,s.minFilter),i.texParameteri(x,10240,s.magFilter),i.texParameteri(x,10242,s.wrapS),i.texParameteri(x,10243,s.wrapT),o.ext_texture_filter_anisotropic&&i.texParameteri(x,34046,s.anisotropic),s.genMipmaps&&(i.hint(33170,s.mipmapHint),i.generateMipmap(x))}function v(o){q.call(this),this.mipmask=0,this.internalformat=6408,this.id=eS++,this.refCount=1,this.target=o,this.texture=i.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new E,Z.profile&&(this.stats={size:0})}function ba(o){i.activeTexture(33984),i.bindTexture(o.target,o.texture)}function za(){var o=eE[0];o?i.bindTexture(o.target,o.texture):i.bindTexture(3553,null)}function A(o){var s=o.texture,x=o.unit,_=o.target;0<=x&&(i.activeTexture(33984+x),i.bindTexture(_,null),eE[x]=null),i.deleteTexture(s),o.texture=null,o.params=null,o.pixels=null,o.refCount=0,delete eM[o.id],G.textureCount--}var X={"don't care":4352,"dont care":4352,nice:4354,fast:4353},J={repeat:10497,clamp:33071,mirror:33648},$={nearest:9728,linear:9729},ee=O({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},$),et={none:0,browser:37444},eh={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},ed={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ep={};o.ext_srgb&&(ed.srgb=35904,ed.srgba=35906),o.oes_texture_float&&(eh.float32=eh.float=5126),o.oes_texture_half_float&&(eh.float16=eh["half float"]=36193),o.webgl_depth_texture&&(O(ed,{depth:6402,"depth stencil":34041}),O(eh,{uint16:5123,uint32:5125,"depth stencil":34042})),o.webgl_compressed_texture_s3tc&&O(ep,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),o.webgl_compressed_texture_atc&&O(ep,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),o.webgl_compressed_texture_pvrtc&&O(ep,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),o.webgl_compressed_texture_etc1&&(ep["rgb etc1"]=36196);var eg=Array.prototype.slice.call(i.getParameter(34467));Object.keys(ep).forEach(function(i){var o=ep[i];0<=eg.indexOf(o)&&(ed[i]=o)});var em=Object.keys(ed);s.textureFormats=em;var ey=[];Object.keys(ed).forEach(function(i){ey[ed[i]]=i});var ev=[];Object.keys(eh).forEach(function(i){ev[eh[i]]=i});var ex=[];Object.keys($).forEach(function(i){ex[$[i]]=i});var e_=[];Object.keys(ee).forEach(function(i){e_[ee[i]]=i});var ew=[];Object.keys(J).forEach(function(i){ew[J[i]]=i});var eT=em.reduce(function(i,s){var x=ed[s];return 6409===x||6406===x||6409===x||6410===x||6402===x||34041===x||o.ext_srgb&&(35904===x||35906===x)?i[x]=x:32855===x||0<=s.indexOf("rgba")?i[x]=6408:i[x]=6407,i},{}),ek=[],eA=[],eS=0,eM={},eC=s.maxTextureUnits,eE=Array(eC).map(function(){return null});return O(v.prototype,{bind:function(){this.bindCount+=1;var o=this.unit;if(0>o){for(var s=0;s<eC;++s){var x=eE[s];if(x){if(0<x.bindCount)continue;x.unit=-1}eE[s]=this,o=s;break}Z.profile&&G.maxTextureUnits<o+1&&(G.maxTextureUnits=o+1),this.unit=o,i.activeTexture(33984+o),i.bindTexture(this.target,this.texture)}return o},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&A(this)}}),Z.profile&&(G.getTotalTextureSize=function(){var i=0;return Object.keys(eM).forEach(function(o){i+=eM[o].stats.size}),i}),{create2D:function(o,s){function d(i,o){var s=x.texInfo;E.call(s);var _=z();return"number"==typeof i?"number"==typeof o?y(_,0|i,0|o):y(_,0|i,0|i):i?(nb(s,i),C(_,i)):y(_,1,1),s.genMipmaps&&(_.mipmask=(_.width<<1)-1),x.mipmask=_.mipmask,u(x,_),x.internalformat=_.internalformat,d.width=_.width,d.height=_.height,ba(x),w(_,3553),D(s,3553),za(),wa(_),Z.profile&&(x.stats.size=La(x.internalformat,x.type,_.width,_.height,s.genMipmaps,!1)),d.format=ey[x.internalformat],d.type=ev[x.type],d.mag=ex[s.magFilter],d.min=e_[s.minFilter],d.wrapS=ew[s.wrapS],d.wrapT=ew[s.wrapT],d}var x=new v(3553);return eM[x.id]=x,G.textureCount++,d(o,s),d.subimage=function(i,o,s,_){o|=0,s|=0,_|=0;var F=l();return u(F,x),F.width=0,F.height=0,t(F,i),F.width=F.width||(x.width>>_)-o,F.height=F.height||(x.height>>_)-s,ba(x),g(F,3553,o,s,_),za(),h(F),d},d.resize=function(o,s){var _=0|o,F=0|s||_;if(_===x.width&&F===x.height)return d;d.width=x.width=_,d.height=x.height=F,ba(x);for(var N=0;x.mipmask>>N;++N){var j=_>>N,G=F>>N;if(!j||!G)break;i.texImage2D(3553,N,x.format,j,G,0,x.format,x.type,null)}return za(),Z.profile&&(x.stats.size=La(x.internalformat,x.type,_,F,!1,!1)),d},d._reglType="texture2d",d._texture=x,Z.profile&&(d.stats=x.stats),d.destroy=function(){x.decRef()},d},createCube:function(o,s,x,_,F,N){function p(i,o,s,x,_,F){var N,G=j.texInfo;for(E.call(G),N=0;6>N;++N)X[N]=z();if("number"!=typeof i&&i){if("object"==typeof i){if(o)C(X[0],i),C(X[1],o),C(X[2],s),C(X[3],x),C(X[4],_),C(X[5],F);else if(nb(G,i),r(j,i),"faces"in i)for(i=i.faces,N=0;6>N;++N)u(X[N],j),C(X[N],i[N]);else for(N=0;6>N;++N)C(X[N],i)}}else for(i=0|i||1,N=0;6>N;++N)y(X[N],i,i);for(u(j,X[0]),j.mipmask=G.genMipmaps?(X[0].width<<1)-1:X[0].mipmask,j.internalformat=X[0].internalformat,p.width=X[0].width,p.height=X[0].height,ba(j),N=0;6>N;++N)w(X[N],34069+N);for(D(G,34067),za(),Z.profile&&(j.stats.size=La(j.internalformat,j.type,p.width,p.height,G.genMipmaps,!0)),p.format=ey[j.internalformat],p.type=ev[j.type],p.mag=ex[G.magFilter],p.min=e_[G.minFilter],p.wrapS=ew[G.wrapS],p.wrapT=ew[G.wrapT],N=0;6>N;++N)wa(X[N]);return p}var j=new v(34067);eM[j.id]=j,G.cubeCount++;var X=Array(6);return p(o,s,x,_,F,N),p.subimage=function(i,o,s,x,_){s|=0,x|=0,_|=0;var F=l();return u(F,j),F.width=0,F.height=0,t(F,o),F.width=F.width||(j.width>>_)-s,F.height=F.height||(j.height>>_)-x,ba(j),g(F,34069+i,s,x,_),za(),h(F),p},p.resize=function(o){if((o|=0)!==j.width){p.width=j.width=o,p.height=j.height=o,ba(j);for(var s=0;6>s;++s)for(var x=0;j.mipmask>>x;++x)i.texImage2D(34069+s,x,j.format,o>>x,o>>x,0,j.format,j.type,null);return za(),Z.profile&&(j.stats.size=La(j.internalformat,j.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=j,Z.profile&&(p.stats=j.stats),p.destroy=function(){j.decRef()},p},clear:function(){for(var o=0;o<eC;++o)i.activeTexture(33984+o),i.bindTexture(3553,null),eE[o]=null;T(eM).forEach(A),G.cubeCount=0,G.textureCount=0},getTexture:function(i){return null},restore:function(){for(var o=0;o<eC;++o){var s=eE[o];s&&(s.bindCount=0,s.unit=-1,eE[o]=null)}T(eM).forEach(function(o){o.texture=i.createTexture(),i.bindTexture(o.target,o.texture);for(var s=0;32>s;++s)if(0!=(o.mipmask&1<<s)){if(3553===o.target)i.texImage2D(3553,s,o.internalformat,o.width>>s,o.height>>s,0,o.internalformat,o.type,null);else for(var x=0;6>x;++x)i.texImage2D(34069+x,s,o.internalformat,o.width>>s,o.height>>s,0,o.internalformat,o.type,null)}D(o.texInfo,o.target)})},refresh:function(){for(var o=0;o<eC;++o){var s=eE[o];s&&(s.bindCount=0,s.unit=-1,eE[o]=null),i.activeTexture(33984+o),i.bindTexture(3553,null),i.bindTexture(34067,null)}}}}(eh,eE,eR,function(){eH.procs.poll()},eD,eM,i),eU=cc(eh,eE,eR,eM,i),eV=function(i,o,s,x,_,F){function m(i,o,s){this.target=i,this.texture=o,this.renderbuffer=s;var x=i=0;o?(i=o.width,x=o.height):s&&(i=s.width,x=s.height),this.width=i,this.height=x}function q(i){i&&(i.texture&&i.texture._texture.decRef(),i.renderbuffer&&i.renderbuffer._renderbuffer.decRef())}function u(i,o,s){i&&(i.texture?i.texture._texture.refCount+=1:i.renderbuffer._renderbuffer.refCount+=1)}function r(o,s){s&&(s.texture?i.framebufferTexture2D(36160,o,s.target,s.texture._texture.texture,0):i.framebufferRenderbuffer(36160,o,36161,s.renderbuffer._renderbuffer.renderbuffer))}function k(i){var o=3553,s=null,x=null,_=i;return"object"==typeof i&&(_=i.data,"target"in i&&(o=0|i.target)),"texture2d"===(i=_._reglType)?s=_:"textureCube"===i?s=_:"renderbuffer"===i&&(x=_,o=36161),new m(o,s,x)}function n(i,o,s,F,N){return s?((i=x.create2D({width:i,height:o,format:F,type:N}))._texture.refCount=0,new m(3553,i,null)):((i=_.create({width:i,height:o,format:F}))._renderbuffer.refCount=0,new m(36161,null,i))}function t(i){return i&&(i.texture||i.renderbuffer)}function g(i,o,s){i&&(i.texture?i.texture.resize(o,s):i.renderbuffer&&i.renderbuffer.resize(o,s),i.width=o,i.height=s)}function l(){this.id=X++,J[this.id]=this,this.framebuffer=i.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function h(i){i.colorAttachments.forEach(q),q(i.depthAttachment),q(i.stencilAttachment),q(i.depthStencilAttachment)}function p(o){i.deleteFramebuffer(o.framebuffer),o.framebuffer=null,F.framebufferCount--,delete J[o.id]}function y(o){i.bindFramebuffer(36160,o.framebuffer);var x,_=o.colorAttachments;for(x=0;x<_.length;++x)r(36064+x,_[x]);for(x=_.length;x<s.maxColorAttachments;++x)i.framebufferTexture2D(36160,36064+x,3553,null,0);i.framebufferTexture2D(36160,33306,3553,null,0),i.framebufferTexture2D(36160,36096,3553,null,0),i.framebufferTexture2D(36160,36128,3553,null,0),r(36096,o.depthAttachment),r(36128,o.stencilAttachment),r(33306,o.depthStencilAttachment),i.checkFramebufferStatus(36160),i.isContextLost(),i.bindFramebuffer(36160,N.next?N.next.framebuffer:null),N.cur=N.next,i.getError()}function C(i,o){function c(i,o){var x,_=0,F=0,N=!0,Z=!0;x=null;var X=!0,J="rgba",$="uint8",ee=1,et=null,er=null,en=null,ei=!1;"number"==typeof i?(_=0|i,F=0|o||_):i?("shape"in i?(_=(F=i.shape)[0],F=F[1]):("radius"in i&&(_=F=i.radius),"width"in i&&(_=i.width),"height"in i&&(F=i.height)),("color"in i||"colors"in i)&&Array.isArray(x=i.color||i.colors),!x&&("colorCount"in i&&(ee=0|i.colorCount),"colorTexture"in i&&(X=!!i.colorTexture,J="rgba4"),"colorType"in i&&($=i.colorType,!X)&&("half float"===$||"float16"===$?J="rgba16f":("float"===$||"float32"===$)&&(J="rgba32f")),"colorFormat"in i&&(0<=j.indexOf(J=i.colorFormat)?X=!0:0<=G.indexOf(J)&&(X=!1))),("depthTexture"in i||"depthStencilTexture"in i)&&(ei=!(!i.depthTexture&&!i.depthStencilTexture)),"depth"in i&&("boolean"==typeof i.depth?N=i.depth:(et=i.depth,Z=!1)),"stencil"in i&&("boolean"==typeof i.stencil?Z=i.stencil:(er=i.stencil,N=!1)),"depthStencil"in i&&("boolean"==typeof i.depthStencil?N=Z=i.depthStencil:(en=i.depthStencil,Z=N=!1))):_=F=1;var eo=null,es=null,el=null,ec=null;if(Array.isArray(x))eo=x.map(k);else if(x)eo=[k(x)];else for(eo=Array(ee),x=0;x<ee;++x)eo[x]=n(_,F,X,J,$);for(_=_||eo[0].width,F=F||eo[0].height,et?es=k(et):N&&!Z&&(es=n(_,F,ei,"depth","uint32")),er?el=k(er):Z&&!N&&(el=n(_,F,!1,"stencil","uint8")),en?ec=k(en):!et&&!er&&Z&&N&&(ec=n(_,F,ei,"depth stencil","depth stencil")),N=null,x=0;x<eo.length;++x)u(eo[x],_,F),eo[x]&&eo[x].texture&&(Z=em[eo[x].texture._texture.format]*ey[eo[x].texture._texture.type],null===N&&(N=Z));return u(es,_,F),u(el,_,F),u(ec,_,F),h(s),s.width=_,s.height=F,s.colorAttachments=eo,s.depthAttachment=es,s.stencilAttachment=el,s.depthStencilAttachment=ec,c.color=eo.map(t),c.depth=t(es),c.stencil=t(el),c.depthStencil=t(ec),c.width=s.width,c.height=s.height,y(s),c}var s=new l;return F.framebufferCount++,c(i,o),O(c,{resize:function(i,o){var x=Math.max(0|i,1),_=Math.max(0|o||x,1);if(x===s.width&&_===s.height)return c;for(var F=s.colorAttachments,N=0;N<F.length;++N)g(F[N],x,_);return g(s.depthAttachment,x,_),g(s.stencilAttachment,x,_),g(s.depthStencilAttachment,x,_),s.width=c.width=x,s.height=c.height=_,y(s),c},_reglType:"framebuffer",_framebuffer:s,destroy:function(){p(s),h(s)},use:function(i){N.setFBO({framebuffer:c},i)}})}var N={cur:null,next:null,dirty:!1,setFBO:null},j=["rgba"],G=["rgba4","rgb565","rgb5 a1"];o.ext_srgb&&G.push("srgba"),o.ext_color_buffer_half_float&&G.push("rgba16f","rgb16f"),o.webgl_color_buffer_float&&G.push("rgba32f");var Z=["uint8"];o.oes_texture_half_float&&Z.push("half float","float16"),o.oes_texture_float&&Z.push("float","float32");var X=0,J={};return O(N,{getFramebuffer:function(i){return"function"==typeof i&&"framebuffer"===i._reglType&&(i=i._framebuffer)instanceof l?i:null},create:C,createCube:function(i){function b(i){var s,_={color:null},F=0,N=null;s="rgba";var j="uint8",G=1;if("number"==typeof i?F=0|i:i?("shape"in i?F=i.shape[0]:("radius"in i&&(F=0|i.radius),"width"in i?F=0|i.width:"height"in i&&(F=0|i.height)),("color"in i||"colors"in i)&&Array.isArray(N=i.color||i.colors),N||("colorCount"in i&&(G=0|i.colorCount),"colorType"in i&&(j=i.colorType),"colorFormat"in i&&(s=i.colorFormat)),"depth"in i&&(_.depth=i.depth),"stencil"in i&&(_.stencil=i.stencil),"depthStencil"in i&&(_.depthStencil=i.depthStencil)):F=1,N){if(Array.isArray(N))for(i=[],s=0;s<N.length;++s)i[s]=N[s];else i=[N]}else for(i=Array(G),N={radius:F,format:s,type:j},s=0;s<G;++s)i[s]=x.createCube(N);for(s=0,_.color=Array(i.length);s<i.length;++s)G=i[s],F=F||G.width,_.color[s]={target:34069,data:i[s]};for(s=0;6>s;++s){for(G=0;G<i.length;++G)_.color[G].target=34069+s;0<s&&(_.depth=o[0].depth,_.stencil=o[0].stencil,_.depthStencil=o[0].depthStencil),o[s]?o[s](_):o[s]=C(_)}return O(b,{width:F,height:F,color:i})}var o=Array(6);return b(i),O(b,{faces:o,resize:function(i){var s=0|i;if(s===b.width)return b;var x=b.color;for(i=0;i<x.length;++i)x[i].resize(s);for(i=0;6>i;++i)o[i].resize(s);return b.width=b.height=s,b},_reglType:"framebufferCube",destroy:function(){o.forEach(function(i){i.destroy()})}})},clear:function(){T(J).forEach(p)},restore:function(){N.cur=null,N.next=null,N.dirty=!0,T(J).forEach(function(o){o.framebuffer=i.createFramebuffer(),y(o)})}})}(eh,eE,eR,ej,eU,eM),eH=function(i,s,x,_,F,N,G,Z,X,J,ee,et,er,en,ei,eo){function p(i){return i.replace(".","_")}function y(i,o,s){var x=p(i);eR.push(i),eD[x]=eO[x]=!!s,eB[x]=o}function C(i,o,s){var x=p(i);eR.push(i),Array.isArray(s)?(eO[x]=s.slice(),eD[x]=s.slice()):eO[x]=eD[x]=s,ez[x]=o}function w(){var i=function(i){function b(){var i=[],o=[];return O(function(){i.push.apply(i,Aa(arguments))},{def:function(){var x="v"+s++;return o.push(x),0<arguments.length&&(i.push(x,"="),i.push.apply(i,Aa(arguments)),i.push(";")),x},toString:function(){return Ba([0<o.length?"var "+o.join(",")+";":"",Ba(i)])}})}function c(){function a(s,x){o(s,x,"=",i.def(s,x),";")}var i=b(),o=b(),s=i.toString,x=o.toString;return O(function(){i.apply(i,Aa(arguments))},{def:i.def,entry:i,exit:o,save:a,set:function(o,s,x){a(o,s),i(o,s,"=",x,";")},toString:function(){return s()+x()}})}var o=i&&i.cache,s=0,x=[],_=[],F=[],N=b(),j={};return{global:N,link:function(i,o){var N=o&&o.stable;if(!N){for(var j=0;j<_.length;++j)if(_[j]===i&&!F[j])return x[j]}return j="g"+s++,x.push(j),_.push(i),F.push(N),j},block:b,proc:function(i,o){function d(){var i="a"+s.length;return s.push(i),i}var s=[];o=o||0;for(var x=0;x<o;++x)d();var x=c(),_=x.toString;return j[i]=O(x,{arg:d,toString:function(){return Ba(["function(",s.join(),"){",_(),"}"])}})},scope:c,cond:function(){var i=Ba(arguments),o=c(),s=c(),x=o.toString,_=s.toString;return O(o,{then:function(){return o.apply(o,Aa(arguments)),this},else:function(){return s.apply(s,Aa(arguments)),this},toString:function(){var o=_();return o&&(o="else{"+o+"}"),Ba(["if(",i,"){",x(),"}",o])}})},compile:function(){var i=['"use strict";',N,"return {"];Object.keys(j).forEach(function(o){i.push('"',o,'":',j[o].toString(),",")}),i.push("}");var s,F=Ba(i).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return o&&o[s=function(i){for(var o,s="",x=0;x<i.length;x++)o=i.charCodeAt(x),s+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return s}(function(i){for(var o,s=Array(i.length>>2),x=0;x<s.length;x++)s[x]=0;for(x=0;x<8*i.length;x+=8)s[x>>5]|=(255&i.charCodeAt(x/8))<<24-x%32;var _=8*i.length;i=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var F,N,j,G,Z,X,J,$,ee,et,er,x=Array(64);for(s[_>>5]|=128<<24-_%32,s[(_+64>>9<<4)+15]=_,$=0;$<s.length;$+=16){for(ee=0,_=i[0],F=i[1],N=i[2],j=i[3],G=i[4],Z=i[5],X=i[6],J=i[7];64>ee;ee++)16>ee?x[ee]=s[ee+$]:(et=ee,er=H(er=Y(er=x[ee-2],17)^Y(er,19)^er>>>10,x[ee-7]),o=Y(o=x[ee-15],7)^Y(o,18)^o>>>3,x[et]=H(H(er,o),x[ee-16])),et=H(H(H(H(J,et=Y(et=G,6)^Y(et,11)^Y(et,25)),G&Z^~G&X),ev[ee]),x[ee]),er=H(J=Y(J=_,2)^Y(J,13)^Y(J,22),_&F^_&N^F&N),J=X,X=Z,Z=G,G=H(j,et),j=N,N=F,F=_,_=H(et,er);i[0]=H(_,i[0]),i[1]=H(F,i[1]),i[2]=H(N,i[2]),i[3]=H(j,i[3]),i[4]=H(G,i[4]),i[5]=H(Z,i[5]),i[6]=H(X,i[6]),i[7]=H(J,i[7])}for(x=0,s="";x<32*i.length;x+=8)s+=String.fromCharCode(i[x>>5]>>>24-x%32&255);return s}(function(i){for(var o,s,x="",_=-1;++_<i.length;)o=i.charCodeAt(_),s=_+1<i.length?i.charCodeAt(_+1):0,55296<=o&&56319>=o&&56320<=s&&57343>=s&&(o=65536+((1023&o)<<10)+(1023&s),_++),127>=o?x+=String.fromCharCode(o):2047>=o?x+=String.fromCharCode(192|o>>>6&31,128|63&o):65535>=o?x+=String.fromCharCode(224|o>>>12&15,128|o>>>6&63,128|63&o):2097151>=o&&(x+=String.fromCharCode(240|o>>>18&7,128|o>>>12&63,128|o>>>6&63,128|63&o));return x}(F)))]?o[s].apply(null,_):(F=Function.apply(null,x.concat(F)),o&&(o[s]=F),F.apply(null,_))}}}({cache:ei}),o=i.link,x=i.global;i.id=ej++,i.batchId="0";var _=o(eF),F=i.shared={props:"a0"};Object.keys(eF).forEach(function(i){F[i]=x.def(_,".",i)});var N=i.next={},j=i.current={};Object.keys(ez).forEach(function(i){Array.isArray(eO[i])&&(N[i]=x.def(F.next,".",i),j[i]=x.def(F.current,".",i))});var G=i.constants={};Object.keys(eN).forEach(function(i){G[i]=x.def(JSON.stringify(eN[i]))}),i.invoke=function(s,x){switch(x.type){case 0:var _=["this",F.context,F.props,i.batchId];return s.def(o(x.data),".call(",_.slice(0,Math.max(x.data.length+1,4)),")");case 1:return s.def(F.props,x.data);case 2:return s.def(F.context,x.data);case 3:return s.def("this",x.data);case 4:return x.data.append(i,s),x.data.ref;case 5:return x.data.toString();case 6:return x.data.map(function(o){return i.invoke(s,o)})}},i.attribCache={};var Z={};return i.scopeAttrib=function(i){if((i=s.id(i))in Z)return Z[i];var x=J.scope[i];return x||(x=J.scope[i]=new eC),Z[i]=o(x)},i}function na(i,o,s){var x=i.shared.context,_=i.scope();Object.keys(s).forEach(function(F){o.save(x,"."+F);var N=s[F].append(i,o);Array.isArray(N)?_(x,".",F,"=[",N.join(),"];"):_(x,".",F,"=",N,";")}),o(_)}function V(i,o,s,x){var _,F=i.shared,N=F.gl,j=F.framebuffer;eP&&(_=o.def(F.extensions,".webgl_draw_buffers"));var G=i.constants,F=G.drawBuffer,G=G.backBuffer;i=s?s.append(i,o):o.def(j,".next"),x||o("if(",i,"!==",j,".cur){"),o("if(",i,"){",N,".bindFramebuffer(",36160,",",i,".framebuffer);"),eP&&o(_,".drawBuffersWEBGL(",F,"[",i,".colorAttachments.length]);"),o("}else{",N,".bindFramebuffer(",36160,",null);"),eP&&o(_,".drawBuffersWEBGL(",G,");"),o("}",j,".cur=",i,";"),x||o("}")}function T(i,o,s){var x=i.shared,_=x.gl,F=i.current,N=i.next,j=x.current,G=x.next,Z=i.cond(j,".dirty");eR.forEach(function(o){if(!((o=p(o))in s.state)){var x,X;if(o in N){x=N[o],X=F[o];var J=S(eO[o].length,function(i){return Z.def(x,"[",i,"]")});Z(i.cond(J.map(function(i,o){return i+"!=="+X+"["+o+"]"}).join("||")).then(_,".",ez[o],"(",J,");",J.map(function(i,o){return X+"["+o+"]="+i}).join(";"),";"))}else x=Z.def(G,".",o),Z(J=i.cond(x,"!==",j,".",o)),o in eB?J(i.cond(x).then(_,".enable(",eB[o],");").else(_,".disable(",eB[o],");"),j,".",o,"=",x,";"):J(_,".",ez[o],"(",x,");",j,".",o,"=",x,";")}}),0===Object.keys(s.state).length&&Z(j,".dirty=false;"),o(Z)}function W(i,o,s,x){var _,F=i.shared,N=i.current,j=F.current,G=F.gl;yb(Object.keys(s)).forEach(function(F){var Z=s[F];if(!x||x(Z)){var X=Z.append(i,o);if(eB[F]){var J=eB[F];la(Z)?(_=i.link(X,{stable:!0}),o(i.cond(_).then(G,".enable(",J,");").else(G,".disable(",J,");")),o(j,".",F,"=",_,";")):(o(i.cond(X).then(G,".enable(",J,");").else(G,".disable(",J,");")),o(j,".",F,"=",X,";"))}else if(qa(X)){var $=N[F];o(G,".",ez[F],"(",X,");",X.map(function(i,o){return $+"["+o+"]="+i}).join(";"),";")}else la(Z)?(_=i.link(X,{stable:!0}),o(G,".",ez[F],"(",_,");",j,".",F,"=",_,";")):o(G,".",ez[F],"(",X,");",j,".",F,"=",X,";")}})}function Q(i,o){eL&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays"))}function I(i,o,s,x,_){function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function h(i){i(F=o.def(),"=",f(),";"),"string"==typeof _?i(G,".count+=",_,";"):i(G,".count++;"),en&&(x?i(N=o.def(),"=",X,".getNumPendingQueries();"):i(X,".beginQuery(",G,");"))}function k(i){i(G,".cpuTime+=",f(),"-",F,";"),en&&(x?i(X,".pushScopeStats(",N,",",X,".getNumPendingQueries(),",G,");"):i(X,".endQuery();"))}function l(i){var s=o.def(Z,".profile");o(Z,".profile=",i,";"),o.exit(Z,".profile=",s,";")}var F,N,j=i.shared,G=i.stats,Z=j.current,X=j.timer;if(s=s.profile){if(la(s)){s.enable?(h(o),k(o.exit),l("true")):l("false");return}l(s=s.append(i,o))}else s=o.def(Z,".profile");h(j=i.block()),o("if(",s,"){",j,"}"),k(i=i.block()),o.exit("if(",s,"){",i,"}")}function M(i,o,s,x,_){var F=i.shared;x.forEach(function(x){var N,j=x.name,G=s.attributes[j];if(G){if(!_(G))return;N=G.append(i,o)}else{if(!_(eS))return;var Z=i.scopeAttrib(j);N={},Object.keys(new eC).forEach(function(i){N[i]=o.def(Z,".",i)})}!function(s,x,_){function f(){o("if(!",G,".buffer){",N,".enableVertexAttribArray(",j,");}");var s,F=_.type;s=_.size?o.def(_.size,"||",x):x,o("if(",G,".type!==",F,"||",G,".size!==",s,"||",J.map(function(i){return G+"."+i+"!=="+_[i]}).join("||"),"){",N,".bindBuffer(",34962,",",Z,".buffer);",N,".vertexAttribPointer(",[j,s,F,_.normalized,_.stride,_.offset],");",G,".type=",F,";",G,".size=",s,";",J.map(function(i){return G+"."+i+"="+_[i]+";"}).join(""),"}"),eL&&o("if(",G,".divisor!==",F=_.divisor,"){",i.instancing,".vertexAttribDivisorANGLE(",[j,F],");",G,".divisor=",F,";}")}function k(){o("if(",G,".buffer){",N,".disableVertexAttribArray(",j,");",G,".buffer=null;","}if(",ex.map(function(i,o){return G+"."+i+"!=="+X[o]}).join("||"),"){",N,".vertexAttrib4f(",j,",",X,");",ex.map(function(i,o){return G+"."+i+"="+X[o]+";"}).join(""),"}")}var N=F.gl,j=o.def(s,".location"),G=o.def(F.attributes,"[",j,"]");s=_.state;var Z=_.buffer,X=[_.x,_.y,_.z,_.w],J=["buffer","normalized","offset","stride"];1===s?f():2===s?k():(o("if(",s,"===",1,"){"),f(),o("}else{"),k(),o("}"))}(i.link(x),function(i){switch(i){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(x.info.type),N)})}function U(i,o,x,_,F,N){for(var j,G=i.shared,Z=G.gl,X=0;X<_.length;++X){var J,$=_[X],ee=$.name,et=$.info.type,er=x.uniforms[ee],$=i.link($)+".location";if(er){if(!F(er))continue;if(la(er)){if(ee=er.value,35678===et||35680===et)o(Z,".uniform1i(",$,",",(et=i.link(ee._texture||ee.color[0]._texture))+".bind());"),o.exit(et,".unbind();");else if(35674===et||35675===et||35676===et)ee=i.global.def("new Float32Array(["+Array.prototype.slice.call(ee)+"])"),er=2,35675===et?er=3:35676===et&&(er=4),o(Z,".uniformMatrix",er,"fv(",$,",false,",ee,");");else{switch(et){case 5126:j="1f";break;case 35664:j="2f";break;case 35665:j="3f";break;case 35666:j="4f";break;case 35670:case 5124:j="1i";break;case 35671:case 35667:j="2i";break;case 35672:case 35668:j="3i";break;case 35673:case 35669:j="4i"}o(Z,".uniform",j,"(",$,",",qa(ee)?Array.prototype.slice.call(ee):ee,");")}continue}J=er.append(i,o)}else{if(!F(eS))continue;J=o.def(G.uniforms,"[",s.id(ee),"]")}switch(35678===et?o("if(",J,"&&",J,'._reglType==="framebuffer"){',J,"=",J,".color[0];","}"):35680===et&&o("if(",J,"&&",J,'._reglType==="framebufferCube"){',J,"=",J,".color[0];","}"),ee=1,et){case 35678:case 35680:et=o.def(J,"._texture"),o(Z,".uniform1i(",$,",",et,".bind());"),o.exit(et,".unbind();");continue;case 5124:case 35670:j="1i";break;case 35667:case 35671:j="2i",ee=2;break;case 35668:case 35672:j="3i",ee=3;break;case 35669:case 35673:j="4i",ee=4;break;case 5126:j="1f";break;case 35664:j="2f",ee=2;break;case 35665:j="3f",ee=3;break;case 35666:j="4f",ee=4;break;case 35674:j="Matrix2fv";break;case 35675:j="Matrix3fv";break;case 35676:j="Matrix4fv"}if("M"===j.charAt(0)){o(Z,".uniform",j,"(",$,",");var $=Math.pow(et-35674+2,2),en=i.global.def("new Float32Array(",$,")");Array.isArray(J)?o("false,(",S($,function(i){return en+"["+i+"]="+J[i]}),",",en,")"):o("false,(Array.isArray(",J,")||",J," instanceof Float32Array)?",J,":(",S($,function(i){return en+"["+i+"]="+J+"["+i+"]"}),",",en,")"),o(");")}else{if(1<ee){for(var et=[],ei=[],er=0;er<ee;++er)Array.isArray(J)?ei.push(J[er]):ei.push(o.def(J+"["+er+"]")),N&&et.push(o.def());N&&o("if(!",i.batchId,"||",et.map(function(i,o){return i+"!=="+ei[o]}).join("||"),"){",et.map(function(i,o){return i+"="+ei[o]+";"}).join("")),o(Z,".uniform",j,"(",$,",",ei.join(","),");")}else N&&(et=o.def(),o("if(!",i.batchId,"||",et,"!==",J,"){",et,"=",J,";")),o(Z,".uniform",j,"(",$,",",J,");");N&&o("}")}}}function Y(i,o,s,x){function e(_){var F=ee[_];return F?F.contextDep&&x.contextDynamic||F.propDep?F.append(i,s):F.append(i,o):o.def($,".",_)}function f(){function a(){s(Z,".drawElementsInstancedANGLE(",[er,ei,eo,en+"<<(("+eo+"-5121)>>1)",G],");")}function b(){s(Z,".drawArraysInstancedANGLE(",[er,en,ei,G],");")}et&&"null"!==et?es?a():(s("if(",et,"){"),a(),s("}else{"),b(),s("}")):b()}function g(){function a(){s(J+".drawElements("+[er,ei,eo,en+"<<(("+eo+"-5121)>>1)"]+");")}function b(){s(J+".drawArrays("+[er,en,ei]+");")}et&&"null"!==et?es?a():(s("if(",et,"){"),a(),s("}else{"),b(),s("}")):b()}var _,F,N,j,G,Z,X=i.shared,J=X.gl,$=X.draw,ee=x.draw,et=(_=ee.elements,F=o,_?((_.contextDep&&x.contextDynamic||_.propDep)&&(F=s),_=_.append(i,F),ee.elementsActive&&F("if("+_+")"+J+".bindBuffer(34963,"+_+".buffer.buffer);")):(_=F.def(),F(_,"=",$,".","elements",";","if(",_,"){",J,".bindBuffer(",34963,",",_,".buffer.buffer);}","else if(",X.vao,".currentVAO){",_,"=",i.shared.elements+".getElements("+X.vao,".currentVAO.elements);",eI?"":"if("+_+")"+J+".bindBuffer(34963,"+_+".buffer.buffer);","}")),_),er=e("primitive"),en=e("offset"),ei=(N=ee.count,j=o,N?((N.contextDep&&x.contextDynamic||N.propDep)&&(j=s),N=N.append(i,j)):N=j.def($,".","count"),N);if("number"==typeof ei){if(0===ei)return}else s("if(",ei,"){"),s.exit("}");eL&&(G=e("instances"),Z=i.instancing);var eo=et+".type",es=ee.elements&&la(ee.elements)&&!ee.vaoActive;eL&&("number"!=typeof G||0<=G)?"string"==typeof G?(s("if(",G,">0){"),f(),s("}else if(",G,"<0){"),g(),s("}")):f():g()}function xa(i,o,s,x,_){return _=(o=w()).proc("body",_),eL&&(o.instancing=_.def(o.shared.extensions,".angle_instanced_arrays")),i(o,_,s,x),o.compile().body}function da(i,o,s,x){Q(i,o),s.useVAO?s.drawVAO?o(i.shared.vao,".setVAO(",s.drawVAO.append(i,o),");"):o(i.shared.vao,".setVAO(",i.shared.vao,".targetVAO);"):(o(i.shared.vao,".setVAO(null);"),M(i,o,s,x.attributes,function(){return!0})),U(i,o,s,x.uniforms,function(){return!0},!1),Y(i,o,o,s)}function ga(i,o,s,x){function e(){return!0}i.batchId="a1",Q(i,o),M(i,o,s,x.attributes,e),U(i,o,s,x.uniforms,e,!1),Y(i,o,o,s)}function Ea(i,o,s,x){function e(i){return i.contextDep&&_||i.propDep}function f(i){return!e(i)}Q(i,o);var _=s.contextDep,F=o.def(),N=o.def();i.shared.props=N,i.batchId=F;var j=i.scope(),G=i.scope();o(j.entry,"for(",F,"=0;",F,"<","a1",";++",F,"){",N,"=","a0","[",F,"];",G,"}",j.exit),s.needsContext&&na(i,G,s.context),s.needsFramebuffer&&V(i,G,s.framebuffer),W(i,G,s.state,e),s.profile&&e(s.profile)&&I(i,G,s,!1,!0),x?(s.useVAO?s.drawVAO?e(s.drawVAO)?G(i.shared.vao,".setVAO(",s.drawVAO.append(i,G),");"):j(i.shared.vao,".setVAO(",s.drawVAO.append(i,j),");"):j(i.shared.vao,".setVAO(",i.shared.vao,".targetVAO);"):(j(i.shared.vao,".setVAO(null);"),M(i,j,s,x.attributes,f),M(i,G,s,x.attributes,e)),U(i,j,s,x.uniforms,f,!1),U(i,G,s,x.uniforms,e,!0),Y(i,j,G,s)):(o=i.global.def("{}"),x=s.shader.progVar.append(i,G),N=G.def(x,".id"),j=G.def(o,"[",N,"]"),G(i.shared.gl,".useProgram(",x,".program);","if(!",j,"){",j,"=",o,"[",N,"]=",i.link(function(o){return xa(ga,i,s,o,2)}),"(",x,");}",j,".call(this,a0[",F,"],",F,");"))}function ka(i,s,x){var _=s.static[x];if(_&&function(i){if("object"==typeof i&&!qa(i)){for(var s=Object.keys(i),x=0;x<s.length;++x)if(o.isDynamic(i[s[x]]))return!0;return!1}}(_)){var F=i.global,N=Object.keys(_),j=!1,G=!1,Z=!1,X=i.global.def("{}");N.forEach(function(s){var x=_[s];if(o.isDynamic(x))"function"==typeof x&&(x=_[s]=o.unbox(x)),s=L(x,null),j=j||s.thisDep,Z=Z||s.propDep,G=G||s.contextDep;else{switch(F(X,".",s,"="),typeof x){case"number":F(x);break;case"string":F('"',x,'"');break;case"object":Array.isArray(x)&&F("[",x.join(),"]");break;default:F(i.link(x))}F(";")}}),s.dynamic[x]=new o.DynamicVariable(4,{thisDep:j,contextDep:G,propDep:Z,ref:X,append:function(i,s){N.forEach(function(x){var F=_[x];o.isDynamic(F)&&(F=i.invoke(s,F),s(X,".",x,"=",F,";"))})}}),delete s.static[x]}}var es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,eM,eC=J.Record,eE={add:32774,subtract:32778,"reverse subtract":32779};x.ext_blend_minmax&&(eE.min=32775,eE.max=32776);var eL=x.angle_instanced_arrays,eP=x.webgl_draw_buffers,eI=x.oes_vertex_array_object,eO={dirty:!0,profile:eo.profile},eD={},eR=[],eB={},ez={};y("dither",3024),y("blend.enable",3042),C("blend.color","blendColor",[0,0,0,0]),C("blend.equation","blendEquationSeparate",[32774,32774]),C("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),C("depth.func","depthFunc",513),C("depth.range","depthRange",[0,1]),C("depth.mask","depthMask",!0),C("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),C("cull.face","cullFace",1029),C("frontFace","frontFace",2305),C("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),C("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),C("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),C("stencil.mask","stencilMask",-1),C("stencil.func","stencilFunc",[519,0,-1]),C("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),C("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),C("scissor.box","scissor",[0,0,i.drawingBufferWidth,i.drawingBufferHeight]),C("viewport","viewport",[0,0,i.drawingBufferWidth,i.drawingBufferHeight]);var eF={gl:i,context:er,strings:s,next:eD,current:eO,draw:et,elements:N,buffer:F,shader:ee,attributes:J.state,vao:J,uniforms:X,framebuffer:Z,extensions:x,timer:en,isBufferArgs:Sa},eN={primTypes:$,compareFuncs:eT,blendFuncs:ew,blendEquations:eE,stencilOps:ek,glTypes:j,orientationType:eA};eP&&(eN.backBuffer=[1029],eN.drawBuffer=S(_.maxDrawbuffers,function(i){return 0===i?[0]:S(i,function(i){return 36064+i})}));var ej=0;return{next:eD,current:eO,procs:(ec=(el=w()).proc("poll"),eu=el.proc("refresh"),ec(ef=el.block()),eu(ef),eh=(eg=el.shared).gl,ed=eg.next,ef(ep=eg.current,".dirty=false;"),V(el,ec),V(el,eu,null,!0),eL&&(es=el.link(eL)),x.oes_vertex_array_object&&eu(el.link(x.oes_vertex_array_object),".bindVertexArrayOES(null);"),eg=eu.def(eg.attributes),em=eu.def(0),(ey=el.cond(em,".buffer")).then(eh,".enableVertexAttribArray(i);",eh,".bindBuffer(",34962,",",em,".buffer.buffer);",eh,".vertexAttribPointer(i,",em,".size,",em,".type,",em,".normalized,",em,".stride,",em,".offset);").else(eh,".disableVertexAttribArray(i);",eh,".vertexAttrib4f(i,",em,".x,",em,".y,",em,".z,",em,".w);",em,".buffer=null;"),eu("for(var i=0;i<",eM=el.link(_.maxAttributes,{stable:!0}),";++i){",em,"=",eg,"[i];",ey,"}"),eL&&eu("for(var i=0;i<",eM,";++i){",es,".vertexAttribDivisorANGLE(i,",eg,"[i].divisor);","}"),eu(el.shared.vao,".currentVAO=null;",el.shared.vao,".setVAO(",el.shared.vao,".targetVAO);"),Object.keys(eB).forEach(function(i){var o=eB[i],s=ef.def(ed,".",i),x=el.block();x("if(",s,"){",eh,".enable(",o,")}else{",eh,".disable(",o,")}",ep,".",i,"=",s,";"),eu(x),ec("if(",s,"!==",ep,".",i,"){",x,"}")}),Object.keys(ez).forEach(function(i){var o,s,x=ez[i],_=eO[i],F=el.block();F(eh,".",x,"("),qa(_)?(x=_.length,o=el.global.def(ed,".",i),s=el.global.def(ep,".",i),F(S(x,function(i){return o+"["+i+"]"}),");",S(x,function(i){return s+"["+i+"]="+o+"["+i+"];"}).join("")),ec("if(",S(x,function(i){return o+"["+i+"]!=="+s+"["+i+"]"}).join("||"),"){",F,"}")):(o=ef.def(ed,".",i),s=ef.def(ep,".",i),F(o,");",ep,".",i,"=",o,";"),ec("if(",o,"!==",s,"){",F,"}")),eu(F)}),el.compile()),compile:function(i,o,_,G,X){var et=w();et.stats=et.link(X),Object.keys(o.static).forEach(function(i){ka(et,o,i)}),e_.forEach(function(o){ka(et,i,o)});var er=function(i,o,_,G,X){function g(i){var o=ey[i];o&&(e_[i]=o)}var et,er,en,ei,eo,es,el,ec,eu,ef,eh,ed,ep,eg=function(i,o){var s=i.static;if("string"==typeof s.frag&&"string"==typeof s.vert){if(0<Object.keys(o.dynamic).length)return null;var s=o.static,x=Object.keys(s);if(0<x.length&&"number"==typeof s[x[0]]){for(var _=[],F=0;F<x.length;++F)_.push([0|s[x[F]],x[F]]);return _}}return null}(i,o),em=function(i,o){var s=i.static,x=i.dynamic;if("framebuffer"in s){var _=s.framebuffer;return _?(_=Z.getFramebuffer(_),E(function(i,o){var s=i.link(_),x=i.shared;return o.set(x.framebuffer,".next",s),x=x.context,o.set(x,".framebufferWidth",s+".width"),o.set(x,".framebufferHeight",s+".height"),s})):E(function(i,o){var s=i.shared;return o.set(s.framebuffer,".next","null"),s=s.context,o.set(s,".framebufferWidth",s+".drawingBufferWidth"),o.set(s,".framebufferHeight",s+".drawingBufferHeight"),"null"})}if("framebuffer"in x){var F=x.framebuffer;return L(F,function(i,o){var s=i.invoke(o,F),x=i.shared,_=x.framebuffer,s=o.def(_,".getFramebuffer(",s,")");return o.set(_,".next",s),x=x.context,o.set(x,".framebufferWidth",s+"?"+s+".width:"+x+".drawingBufferWidth"),o.set(x,".framebufferHeight",s+"?"+s+".height:"+x+".drawingBufferHeight"),s})}return null}(i,0),ey=function(i,o,s){function d(i){if(i in x){var s=x[i];i=!0;var F,N,j=0|s.x,G=0|s.y;return"width"in s?F=0|s.width:i=!1,"height"in s?N=0|s.height:i=!1,new K(!i&&o&&o.thisDep,!i&&o&&o.contextDep,!i&&o&&o.propDep,function(i,o){var x=i.shared.context,_=F;"width"in s||(_=o.def(x,".","framebufferWidth","-",j));var Z=N;return"height"in s||(Z=o.def(x,".","framebufferHeight","-",G)),[j,G,_,Z]})}if(i in _){var Z=_[i];return i=L(Z,function(i,o){var s=i.invoke(o,Z),x=i.shared.context,_=o.def(s,".x|0"),F=o.def(s,".y|0"),N=o.def('"width" in ',s,"?",s,".width|0:","(",x,".","framebufferWidth","-",_,")"),s=o.def('"height" in ',s,"?",s,".height|0:","(",x,".","framebufferHeight","-",F,")");return[_,F,N,s]}),o&&(i.thisDep=i.thisDep||o.thisDep,i.contextDep=i.contextDep||o.contextDep,i.propDep=i.propDep||o.propDep),i}return o?new K(o.thisDep,o.contextDep,o.propDep,function(i,o){var s=i.shared.context;return[0,0,o.def(s,".","framebufferWidth"),o.def(s,".","framebufferHeight")]}):null}var x=i.static,_=i.dynamic;if(i=d("viewport")){var F=i;i=new K(i.thisDep,i.contextDep,i.propDep,function(i,o){var s=F.append(i,o),x=i.shared.context;return o.set(x,".viewportWidth",s[2]),o.set(x,".viewportHeight",s[3]),s})}return{viewport:i,scissor_box:d("scissor.box")}}(i,em,0),ev=function(i,o){function c(i,o){if(i in s){var N=0|s[i];return o?_.offset=N:_.instances=N,E(function(i,s){return o&&(i.OFFSET=N),N})}if(i in x){var Z=x[i];return L(Z,function(i,s){var x=i.invoke(s,Z);return o&&(i.OFFSET=x),x})}if(o){if(G)return E(function(i,o){return i.OFFSET=0});if(F)return new K(j.thisDep,j.contextDep,j.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.offset:0")})}else if(F)return new K(j.thisDep,j.contextDep,j.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.instances:-1")});return null}var s=i.static,x=i.dynamic,_={},F=!1,j=function(){if("vao"in s){var i=s.vao;return null!==i&&null===J.getVAO(i)&&(i=J.createVAO(i)),F=!0,_.vao=i,E(function(o){var s=J.getVAO(i);return s?o.link(s):"null"})}if("vao"in x){F=!0;var o=x.vao;return L(o,function(i,s){var x=i.invoke(s,o);return s.def(i.shared.vao+".getVAO("+x+")")})}return null}(),G=!1,Z=function(){if("elements"in s){var i=s.elements;if(_.elements=i,Sa(i)){var o=_.elements=N.create(i,!0),i=N.getElements(o);G=!0}else i&&(i=N.getElements(i),G=!0);return(o=E(function(o,s){if(i){var x=o.link(i);return o.ELEMENTS=x}return o.ELEMENTS=null})).value=i,o}if("elements"in x){G=!0;var Z=x.elements;return L(Z,function(i,o){var s=i.shared,x=s.isBufferArgs,s=s.elements,_=i.invoke(o,Z),F=o.def("null"),x=o.def(x,"(",_,")"),_=i.cond(x).then(F,"=",s,".createStream(",_,");").else(F,"=",s,".getElements(",_,");");return o.entry(_),o.exit(i.cond(x).then(s,".destroyStream(",F,");")),i.ELEMENTS=F})}return F?new K(j.thisDep,j.contextDep,j.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.elements+".getElements("+i.shared.vao+".currentVAO.elements):null")}):null}(),X=c("offset",!0),ee=function(){if("primitive"in s){var i=s.primitive;return _.primitive=i,E(function(o,s){return $[i]})}if("primitive"in x){var o=x.primitive;return L(o,function(i,s){var x=i.constants.primTypes,_=i.invoke(s,o);return s.def(x,"[",_,"]")})}return G?la(Z)?Z.value?E(function(i,o){return o.def(i.ELEMENTS,".primType")}):E(function(){return 4}):new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){var s=i.ELEMENTS;return o.def(s,"?",s,".primType:",4)}):F?new K(j.thisDep,j.contextDep,j.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.primitive:4")}):null}(),et=function(){if("count"in s){var i=0|s.count;return _.count=i,E(function(){return i})}if("count"in x){var o=x.count;return L(o,function(i,s){return i.invoke(s,o)})}return G?la(Z)?Z?X?new K(X.thisDep,X.contextDep,X.propDep,function(i,o){return o.def(i.ELEMENTS,".vertCount-",i.OFFSET)}):E(function(i,o){return o.def(i.ELEMENTS,".vertCount")}):E(function(){return -1}):new K(Z.thisDep||X.thisDep,Z.contextDep||X.contextDep,Z.propDep||X.propDep,function(i,o){var s=i.ELEMENTS;return i.OFFSET?o.def(s,"?",s,".vertCount-",i.OFFSET,":-1"):o.def(s,"?",s,".vertCount:-1")}):F?new K(j.thisDep,j.contextDep,j.propDep,function(i,o){return o.def(i.shared.vao,".currentVAO?",i.shared.vao,".currentVAO.count:-1")}):null}();return{elements:Z,primitive:ee,count:et,instances:c("instances",!1),offset:X,vao:j,vaoActive:F,elementsActive:G,static:_}}(i,0),e_=(er=(et=i).static,en=et.dynamic,ei={},eR.forEach(function(i){function b(s,x){if(i in er){var _=s(er[i]);ei[o]=E(function(){return _})}else if(i in en){var F=en[i];ei[o]=L(F,function(i,o){return x(i,o,i.invoke(o,F))})}}var o=p(i);switch(i){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return b(function(i){return i},function(i,o,s){return s});case"depth.func":return b(function(i){return eT[i]},function(i,o,s){return o.def(i.constants.compareFuncs,"[",s,"]")});case"depth.range":return b(function(i){return i},function(i,o,s){return[o.def("+",s,"[0]"),o=o.def("+",s,"[1]")]});case"blend.func":return b(function(i){return[ew["srcRGB"in i?i.srcRGB:i.src],ew["dstRGB"in i?i.dstRGB:i.dst],ew["srcAlpha"in i?i.srcAlpha:i.src],ew["dstAlpha"in i?i.dstAlpha:i.dst]]},function(i,o,s){function d(i,x){return o.def('"',i,x,'" in ',s,"?",s,".",i,x,":",s,".",i)}i=i.constants.blendFuncs;var x=d("src","RGB"),_=d("dst","RGB"),x=o.def(i,"[",x,"]"),F=o.def(i,"[",d("src","Alpha"),"]"),_=o.def(i,"[",_,"]");return[x,_,F,i=o.def(i,"[",d("dst","Alpha"),"]")]});case"blend.equation":return b(function(i){return"string"==typeof i?[eE[i],eE[i]]:"object"==typeof i?[eE[i.rgb],eE[i.alpha]]:void 0},function(i,o,s){var x=i.constants.blendEquations,_=o.def(),F=o.def();return(i=i.cond("typeof ",s,'==="string"')).then(_,"=",F,"=",x,"[",s,"];"),i.else(_,"=",x,"[",s,".rgb];",F,"=",x,"[",s,".alpha];"),o(i),[_,F]});case"blend.color":return b(function(i){return S(4,function(o){return+i[o]})},function(i,o,s){return S(4,function(i){return o.def("+",s,"[",i,"]")})});case"stencil.mask":return b(function(i){return 0|i},function(i,o,s){return o.def(s,"|0")});case"stencil.func":return b(function(i){return[eT[i.cmp||"keep"],i.ref||0,"mask"in i?i.mask:-1]},function(i,o,s){return[i=o.def('"cmp" in ',s,"?",i.constants.compareFuncs,"[",s,".cmp]",":",7680),o.def(s,".ref|0"),o=o.def('"mask" in ',s,"?",s,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return b(function(o){return["stencil.opBack"===i?1029:1028,ek[o.fail||"keep"],ek[o.zfail||"keep"],ek[o.zpass||"keep"]]},function(o,s,x){function e(i){return s.def('"',i,'" in ',x,"?",_,"[",x,".",i,"]:",7680)}var _=o.constants.stencilOps;return["stencil.opBack"===i?1029:1028,e("fail"),e("zfail"),e("zpass")]});case"polygonOffset.offset":return b(function(i){return[0|i.factor,0|i.units]},function(i,o,s){return[o.def(s,".factor|0"),o=o.def(s,".units|0")]});case"cull.face":return b(function(i){var o=0;return"front"===i?o=1028:"back"===i&&(o=1029),o},function(i,o,s){return o.def(s,'==="front"?',1028,":",1029)});case"lineWidth":return b(function(i){return i},function(i,o,s){return s});case"frontFace":return b(function(i){return eA[i]},function(i,o,s){return o.def(s+'==="cw"?2304:2305')});case"colorMask":return b(function(i){return i.map(function(i){return!!i})},function(i,o,s){return S(4,function(i){return"!!"+s+"["+i+"]"})});case"sample.coverage":return b(function(i){return["value"in i?i.value:1,!!i.invert]},function(i,o,s){return[o.def('"value" in ',s,"?+",s,".value:1"),o=o.def("!!",s,".invert")]})}}),ei),eS=function(i,o,x){function e(i){if(i in _){var o=s.id(_[i]);return(i=E(function(){return o})).id=o,i}if(i in F){var x=F[i];return L(x,function(i,o){var s=i.invoke(o,x);return o.def(i.shared.strings,".id(",s,")")})}return null}var _=i.static,F=i.dynamic,N=e("frag"),j=e("vert"),G=null;return la(N)&&la(j)?(G=ee.program(j.id,N.id,null,x),i=E(function(i,o){return i.link(G)})):i=new K(N&&N.thisDep||j&&j.thisDep,N&&N.contextDep||j&&j.contextDep,N&&N.propDep||j&&j.propDep,function(i,o){var s,x,_=i.shared.shader;return x=N?N.append(i,o):o.def(_,".","frag"),s=j?j.append(i,o):o.def(_,".","vert"),o.def(_+".program("+s+","+x+")")}),{frag:N,vert:j,progVar:i,program:G}}(i,0,eg);g("viewport"),g(p("scissor.box"));var eM=0<Object.keys(e_).length,em={framebuffer:em,draw:ev,shader:eS,state:e_,dirty:eM,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(em.profile=function(i){var o,s=i.static;if(i=i.dynamic,"profile"in s){var x=!!s.profile;(o=E(function(i,o){return x})).enable=x}else if("profile"in i){var _=i.profile;o=L(_,function(i,o){return i.invoke(o,_)})}return o}(i,X),em.uniforms=(eo=_.static,es=_.dynamic,el={},Object.keys(eo).forEach(function(i){var o,s=eo[i];if("number"==typeof s||"boolean"==typeof s)o=E(function(){return s});else if("function"==typeof s){var x=s._reglType;"texture2d"===x||"textureCube"===x?o=E(function(i){return i.link(s)}):("framebuffer"===x||"framebufferCube"===x)&&(o=E(function(i){return i.link(s.color[0])}))}else qa(s)&&(o=E(function(i){return i.global.def("[",S(s.length,function(i){return s[i]}),"]")}));o.value=s,el[i]=o}),Object.keys(es).forEach(function(i){var o=es[i];el[i]=L(o,function(i,s){return i.invoke(s,o)})}),el),em.drawVAO=em.scopeVAO=ev.vao,!em.drawVAO&&eS.program&&!eg&&x.angle_instanced_arrays&&ev.static.elements){var eL=!0;if(i=eS.program.attributes.map(function(i){return i=o.static[i],eL=eL&&!!i,i}),eL&&0<i.length){var eP=J.getVAO(J.createVAO({attributes:i,elements:ev.static.elements}));em.drawVAO=new K(null,null,null,function(i,o){return i.link(eP)}),em.useVAO=!0}}return eg?em.useVAO=!0:em.attributes=(ec=o.static,eu=o.dynamic,ef={},Object.keys(ec).forEach(function(i){var o=ec[i],x=s.id(i),_=new eC;if(Sa(o))_.state=1,_.buffer=F.getBuffer(F.create(o,34962,!1,!0)),_.type=0;else{var N=F.getBuffer(o);if(N)_.state=1,_.buffer=N,_.type=0;else if("constant"in o){var G=o.constant;_.buffer="null",_.state=2,"number"==typeof G?_.x=G:ex.forEach(function(i,o){o<G.length&&(_[i]=G[o])})}else{var N=Sa(o.buffer)?F.getBuffer(F.create(o.buffer,34962,!1,!0)):F.getBuffer(o.buffer),Z=0|o.offset,X=0|o.stride,J=0|o.size,$=!!o.normalized,ee=0;"type"in o&&(ee=j[o.type]),o=0|o.divisor,_.buffer=N,_.state=1,_.size=J,_.normalized=$,_.type=ee||N.dtype,_.offset=Z,_.stride=X,_.divisor=o}}ef[i]=E(function(i,o){var s=i.attribCache;if(x in s)return s[x];var F={isStream:!1};return Object.keys(_).forEach(function(i){F[i]=_[i]}),_.buffer&&(F.buffer=i.link(_.buffer),F.type=F.type||F.buffer+".dtype"),s[x]=F})}),Object.keys(eu).forEach(function(i){var o=eu[i];ef[i]=L(o,function(i,s){function d(i){s(j[i],"=",x,".",i,"|0;")}var x=i.invoke(s,o),_=i.shared,F=i.constants,N=_.isBufferArgs,_=_.buffer,j={isStream:s.def(!1)},G=new eC;G.state=1,Object.keys(G).forEach(function(i){j[i]=s.def(""+G[i])});var Z=j.buffer,X=j.type;return s("if(",N,"(",x,")){",j.isStream,"=true;",Z,"=",_,".createStream(",34962,",",x,");",X,"=",Z,".dtype;","}else{",Z,"=",_,".getBuffer(",x,");","if(",Z,"){",X,"=",Z,".dtype;",'}else if("constant" in ',x,"){",j.state,"=",2,";","if(typeof "+x+'.constant === "number"){',j[ex[0]],"=",x,".constant;",ex.slice(1).map(function(i){return j[i]}).join("="),"=0;","}else{",ex.map(function(i,o){return j[i]+"="+x+".constant.length>"+o+"?"+x+".constant["+o+"]:0;"}).join(""),"}}else{","if(",N,"(",x,".buffer)){",Z,"=",_,".createStream(",34962,",",x,".buffer);","}else{",Z,"=",_,".getBuffer(",x,".buffer);","}",X,'="type" in ',x,"?",F.glTypes,"[",x,".type]:",Z,".dtype;",j.normalized,"=!!",x,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),s("}}"),s.exit("if(",j.isStream,"){",_,".destroyStream(",Z,");","}"),j})}),ef),em.context=(eh=G.static,ed=G.dynamic,ep={},Object.keys(eh).forEach(function(i){var o=eh[i];ep[i]=E(function(i,s){return"number"==typeof o||"boolean"==typeof o?""+o:i.link(o)})}),Object.keys(ed).forEach(function(i){var o=ed[i];ep[i]=L(o,function(i,s){return i.invoke(s,o)})}),ep),em}(i,o,_,G,et);return er.shader.program&&(er.shader.program.attributes.sort(function(i,o){return i.name<o.name?-1:1}),er.shader.program.uniforms.sort(function(i,o){return i.name<o.name?-1:1})),function(i,o){var s=i.proc("draw",1);Q(i,s),na(i,s,o.context),V(i,s,o.framebuffer),T(i,s,o),W(i,s,o.state),I(i,s,o,!1,!0);var x=o.shader.progVar.append(i,s);if(s(i.shared.gl,".useProgram(",x,".program);"),o.shader.program)da(i,s,o,o.shader.program);else{s(i.shared.vao,".setVAO(null);");var _=i.global.def("{}"),F=s.def(x,".id"),N=s.def(_,"[",F,"]");s(i.cond(N).then(N,".call(this,a0);").else(N,"=",_,"[",F,"]=",i.link(function(s){return xa(da,i,o,s,1)}),"(",x,");",N,".call(this,a0);"))}0<Object.keys(o.state).length&&s(i.shared.current,".dirty=true;"),i.shared.vao&&s(i.shared.vao,".setVAO(null);")}(et,er),function(i,o){function d(s){var F=o.shader[s];F&&(isNaN(F=F.append(i,x))?x.set(_.shader,"."+s,F):x.set(_.shader,"."+s,i.link(F,{stable:!0})))}var x=i.proc("scope",3);i.batchId="a2";var _=i.shared,F=_.current;if(na(i,x,o.context),o.framebuffer&&o.framebuffer.append(i,x),yb(Object.keys(o.state)).forEach(function(s){var F=o.state[s],N=F.append(i,x);qa(N)?N.forEach(function(o,_){isNaN(o)?x.set(i.next[s],"["+_+"]",o):x.set(i.next[s],"["+_+"]",i.link(o,{stable:!0}))}):la(F)?x.set(_.next,"."+s,i.link(N,{stable:!0})):x.set(_.next,"."+s,N)}),I(i,x,o,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(s){var F=o.draw[s];F&&(isNaN(F=F.append(i,x))?x.set(_.draw,"."+s,F):x.set(_.draw,"."+s,i.link(F),{stable:!0}))}),Object.keys(o.uniforms).forEach(function(F){var N=o.uniforms[F].append(i,x);Array.isArray(N)&&(N="["+N.map(function(o){return isNaN(o)?o:i.link(o,{stable:!0})})+"]"),x.set(_.uniforms,"["+i.link(s.id(F),{stable:!0})+"]",N)}),Object.keys(o.attributes).forEach(function(s){var _=o.attributes[s].append(i,x),F=i.scopeAttrib(s);Object.keys(new eC).forEach(function(i){x.set(F,"."+i,_[i])})}),o.scopeVAO){var N=o.scopeVAO.append(i,x);isNaN(N)?x.set(_.vao,".targetVAO",N):x.set(_.vao,".targetVAO",i.link(N,{stable:!0}))}d("vert"),d("frag"),0<Object.keys(o.state).length&&(x(F,".dirty=true;"),x.exit(F,".dirty=true;")),x("a1(",i.shared.context,",a0,",i.batchId,");")}(et,er),function(i,o){function c(i){return i.contextDep&&x||i.propDep}var s=i.proc("batch",2);i.batchId="0",Q(i,s);var x=!1,_=!0;Object.keys(o.context).forEach(function(i){x=x||o.context[i].propDep}),x||(na(i,s,o.context),_=!1);var F=o.framebuffer,N=!1;if(F?(F.propDep?x=N=!0:F.contextDep&&x&&(N=!0),N||V(i,s,F)):V(i,s,null),o.state.viewport&&o.state.viewport.propDep&&(x=!0),T(i,s,o),W(i,s,o.state,function(i){return!c(i)}),o.profile&&c(o.profile)||I(i,s,o,!1,"a1"),o.contextDep=x,o.needsContext=_,o.needsFramebuffer=N,(_=o.shader.progVar).contextDep&&x||_.propDep)Ea(i,s,o,null);else if(_=_.append(i,s),s(i.shared.gl,".useProgram(",_,".program);"),o.shader.program)Ea(i,s,o,o.shader.program);else{s(i.shared.vao,".setVAO(null);");var F=i.global.def("{}"),N=s.def(_,".id"),j=s.def(F,"[",N,"]");s(i.cond(j).then(j,".call(this,a0,a1);").else(j,"=",F,"[",N,"]=",i.link(function(s){return xa(Ea,i,o,s,2)}),"(",_,");",j,".call(this,a0,a1);"))}0<Object.keys(o.state).length&&s(i.shared.current,".dirty=true;"),i.shared.vao&&s(i.shared.vao,".setVAO(null);")}(et,er),O(et.compile(),{destroy:function(){er.shader.program.destroy()}})}}}(eh,eg,eE,eR,eB,ez,0,eV,{},eF,eN,eI,eD,eL,eC,i),eg=function(i,o,s,x,_,F,N){function q(_){F=null===o.next?5121:o.next.colorAttachments[0].texture._texture.type;var F,N=0,j=0,G=x.framebufferWidth,Z=x.framebufferHeight,X=null;return P(_)?X=_:_&&(N=0|_.x,j=0|_.y,G=0|(_.width||x.framebufferWidth-N),Z=0|(_.height||x.framebufferHeight-j),X=_.data||null),s(),_=G*Z*4,X||(5121===F?X=new Uint8Array(_):5126===F&&(X=X||new Float32Array(_))),i.pixelStorei(3333,4),i.readPixels(N,j,G,Z,6408,F,X),X}return function(i){var s;return i&&"framebuffer"in i?(o.setFBO({framebuffer:i.framebuffer},function(){s=q(i)}),s):q(i)}}(eh,eV,eH.procs.poll,eD,0,0,0),eG=eH.next,eW=eh.canvas,eZ=[],eY=[],eX=[],eK=[i.onDestroy],eJ=null;eW&&(eW.addEventListener("webglcontextlost",f,!1),eW.addEventListener("webglcontextrestored",e,!1));var e$=eV.setFBO=m({framebuffer:o.define.call(null,1,"framebuffer")});return n(),ed=O(m,{clear:function(i){if("framebuffer"in i){if(i.framebuffer&&"framebufferCube"===i.framebuffer_reglType)for(var o=0;6>o;++o)e$(O({framebuffer:i.framebuffer.faces[o]},i),q);else e$(i,q)}else q(null,i)},prop:o.define.bind(null,1),context:o.define.bind(null,2),this:o.define.bind(null,3),draw:m({}),buffer:function(i){return eB.create(i,34962,!1,!1)},elements:function(i){return ez.create(i,!1)},texture:ej.create2D,cube:ej.createCube,renderbuffer:eU.create,framebuffer:eV.create,framebufferCube:eV.createCube,vao:eF.createVAO,attributes:ed,frame:u,on:function(i,o){var s;switch(i){case"frame":return u(o);case"lost":s=eY;break;case"restore":s=eX;break;case"destroy":s=eK}return s.push(o),{cancel:function(){for(var i=0;i<s.length;++i)if(s[i]===o){s[i]=s[s.length-1],s.pop();break}}}},limits:eR,hasExtension:function(i){return 0<=eR.extensions.indexOf(i.toLowerCase())},read:eg,destroy:function(){eZ.length=0,d(),eW&&(eW.removeEventListener("webglcontextlost",f),eW.removeEventListener("webglcontextrestored",e)),eN.clear(),eV.clear(),eU.clear(),eF.clear(),ej.clear(),ez.clear(),eB.clear(),eL&&eL.clear(),eK.forEach(function(i){i()})},_gl:eh,_refresh:n,poll:function(){k(),eL&&eL.update()},now:t,stats:eM,getCachedCode:function(){return eC},preloadCachedCode:function(i){Object.entries(i).forEach(function(i){eC[i[0]]=i[1]})}}),i.onDone(null,ed),ed}}()},71665:function(i,o,s){var x=s(12856),_=x.Buffer;function copyProps(i,o){for(var s in i)o[s]=i[s]}function SafeBuffer(i,o,s){return _(i,o,s)}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?i.exports=x:(copyProps(x,o),o.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(_.prototype),copyProps(_,SafeBuffer),SafeBuffer.from=function(i,o,s){if("number"==typeof i)throw TypeError("Argument must not be a number");return _(i,o,s)},SafeBuffer.alloc=function(i,o,s){if("number"!=typeof i)throw TypeError("Argument must be a number");var x=_(i);return void 0!==o?"string"==typeof s?x.fill(o,s):x.fill(o):x.fill(0),x},SafeBuffer.allocUnsafe=function(i){if("number"!=typeof i)throw TypeError("Argument must be a number");return _(i)},SafeBuffer.allocUnsafeSlow=function(i){if("number"!=typeof i)throw TypeError("Argument must be a number");return x.SlowBuffer(i)}},21630:function(i,o,s){i.exports=Stream;var x=s(15398).EventEmitter;function Stream(){x.call(this)}s(42018)(Stream,x),Stream.Readable=s(40410),Stream.Writable=s(37493),Stream.Duplex=s(37865),Stream.Transform=s(74308),Stream.PassThrough=s(66897),Stream.finished=s(12726),Stream.pipeline=s(10168),Stream.Stream=Stream,Stream.prototype.pipe=function(i,o){var s=this;function ondata(o){i.writable&&!1===i.write(o)&&s.pause&&s.pause()}function ondrain(){s.readable&&s.resume&&s.resume()}s.on("data",ondata),i.on("drain",ondrain),i._isStdio||o&&!1===o.end||(s.on("end",onend),s.on("close",onclose));var _=!1;function onend(){_||(_=!0,i.end())}function onclose(){_||(_=!0,"function"==typeof i.destroy&&i.destroy())}function onerror(i){if(cleanup(),0===x.listenerCount(this,"error"))throw i}function cleanup(){s.removeListener("data",ondata),i.removeListener("drain",ondrain),s.removeListener("end",onend),s.removeListener("close",onclose),s.removeListener("error",onerror),i.removeListener("error",onerror),s.removeListener("end",cleanup),s.removeListener("close",cleanup),i.removeListener("close",cleanup)}return s.on("error",onerror),i.on("error",onerror),s.on("end",cleanup),s.on("close",cleanup),i.on("close",cleanup),i.emit("pipe",s),i}},74322:function(i){"use strict";var o={};function createErrorType(i,s,x){x||(x=Error);var _=function(i){function NodeError(o,x,_){return i.call(this,"string"==typeof s?s:s(o,x,_))||this}return NodeError.prototype=Object.create(i.prototype),NodeError.prototype.constructor=NodeError,NodeError.__proto__=i,NodeError}(x);_.prototype.name=x.name,_.prototype.code=i,o[i]=_}function oneOf(i,o){if(!Array.isArray(i))return"of ".concat(o," ").concat(String(i));var s=i.length;return(i=i.map(function(i){return String(i)}),s>2)?"one of ".concat(o," ").concat(i.slice(0,s-1).join(", "),", or ")+i[s-1]:2===s?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}createErrorType("ERR_INVALID_OPT_VALUE",function(i,o){return'The value "'+o+'" is invalid for option "'+i+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(i,o,s){if("string"==typeof o&&(x="not ",o.substr(!_||_<0?0:+_,x.length)===x)?(G="must not be",o=o.replace(/^not /,"")):G="must be",F=" argument",(void 0===N||N>i.length)&&(N=i.length),i.substring(N-F.length,N)===F)Z="The ".concat(i," ").concat(G," ").concat(oneOf(o,"type"));else{var x,_,F,N,j,G,Z,X=("number"!=typeof j&&(j=0),j+1>i.length||-1===i.indexOf(".",j))?"argument":"property";Z='The "'.concat(i,'" ').concat(X," ").concat(G," ").concat(oneOf(o,"type"))}return Z+". Received type ".concat(typeof s)},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.q=o},37865:function(i,o,s){"use strict";var x=s(90386),_=Object.keys||function(i){var o=[];for(var s in i)o.push(s);return o};i.exports=Duplex;var F=s(40410),N=s(37493);s(42018)(Duplex,F);for(var j=_(N.prototype),G=0;G<j.length;G++){var Z=j[G];Duplex.prototype[Z]||(Duplex.prototype[Z]=N.prototype[Z])}function Duplex(i){if(!(this instanceof Duplex))return new Duplex(i);F.call(this,i),N.call(this,i),this.allowHalfOpen=!0,i&&(!1===i.readable&&(this.readable=!1),!1===i.writable&&(this.writable=!1),!1===i.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||x.nextTick(onEndNT,this)}function onEndNT(i){i.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(i){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}})},66897:function(i,o,s){"use strict";i.exports=PassThrough;var x=s(74308);function PassThrough(i){if(!(this instanceof PassThrough))return new PassThrough(i);x.call(this,i)}s(42018)(PassThrough,x),PassThrough.prototype._transform=function(i,o,s){s(null,i)}},40410:function(i,o,s){"use strict";var x,_,F,N,j,G=s(90386);i.exports=Readable,Readable.ReadableState=ReadableState,s(15398).EventEmitter;var EElistenerCount=function(i,o){return i.listeners(o).length},Z=s(71405),X=s(12856).Buffer,J=s.g.Uint8Array||function(){},$=s(40964);_=$&&$.debuglog?$.debuglog("stream"):function(){};var ee=s(31125),et=s(65756),er=s(56306).getHighWaterMark,en=s(74322).q,ei=en.ERR_INVALID_ARG_TYPE,eo=en.ERR_STREAM_PUSH_AFTER_EOF,es=en.ERR_METHOD_NOT_IMPLEMENTED,el=en.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(42018)(Readable,Z);var ec=et.errorOrDestroy,eu=["error","close","destroy","pause","resume"];function ReadableState(i,o,_){x=x||s(37865),i=i||{},"boolean"!=typeof _&&(_=o instanceof x),this.objectMode=!!i.objectMode,_&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=er(this,i,"readableHighWaterMark",_),this.buffer=new ee,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==i.emitClose,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(F||(F=s(68019).s),this.decoder=new F(i.encoding),this.encoding=i.encoding)}function Readable(i){if(x=x||s(37865),!(this instanceof Readable))return new Readable(i);var o=this instanceof x;this._readableState=new ReadableState(i,this,o),this.readable=!0,i&&("function"==typeof i.read&&(this._read=i.read),"function"==typeof i.destroy&&(this._destroy=i.destroy)),Z.call(this)}function readableAddChunk(i,o,s,x,F){_("readableAddChunk",o);var N,j,G,Z,$,ee=i._readableState;if(null===o)ee.reading=!1,function(i,o){if(_("onEofChunk"),!o.ended){if(o.decoder){var s=o.decoder.end();s&&s.length&&(o.buffer.push(s),o.length+=o.objectMode?1:s.length)}o.ended=!0,o.sync?emitReadable(i):(o.needReadable=!1,o.emittedReadable||(o.emittedReadable=!0,emitReadable_(i)))}}(i,ee);else{if(F||(N=ee,j=o,X.isBuffer(j)||j instanceof J||"string"==typeof j||void 0===j||N.objectMode||(G=new ei("chunk",["string","Buffer","Uint8Array"],j)),$=G),$)ec(i,$);else if(ee.objectMode||o&&o.length>0){if("string"==typeof o||ee.objectMode||Object.getPrototypeOf(o)===X.prototype||(Z=o,o=X.from(Z)),x)ee.endEmitted?ec(i,new el):addChunk(i,ee,o,!0);else if(ee.ended)ec(i,new eo);else{if(ee.destroyed)return!1;ee.reading=!1,ee.decoder&&!s?(o=ee.decoder.write(o),ee.objectMode||0!==o.length?addChunk(i,ee,o,!1):maybeReadMore(i,ee)):addChunk(i,ee,o,!1)}}else x||(ee.reading=!1,maybeReadMore(i,ee))}return!ee.ended&&(ee.length<ee.highWaterMark||0===ee.length)}function addChunk(i,o,s,x){o.flowing&&0===o.length&&!o.sync?(o.awaitDrain=0,i.emit("data",s)):(o.length+=o.objectMode?1:s.length,x?o.buffer.unshift(s):o.buffer.push(s),o.needReadable&&emitReadable(i)),maybeReadMore(i,o)}function howMuchToRead(i,o){if(i<=0||0===o.length&&o.ended)return 0;if(o.objectMode)return 1;if(i!=i)return o.flowing&&o.length?o.buffer.head.data.length:o.length;if(i>o.highWaterMark){var s;o.highWaterMark=((s=i)>=1073741824?s=1073741824:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s)}return i<=o.length?i:o.ended?o.length:(o.needReadable=!0,0)}function emitReadable(i){var o=i._readableState;_("emitReadable",o.needReadable,o.emittedReadable),o.needReadable=!1,o.emittedReadable||(_("emitReadable",o.flowing),o.emittedReadable=!0,G.nextTick(emitReadable_,i))}function emitReadable_(i){var o=i._readableState;_("emitReadable_",o.destroyed,o.length,o.ended),!o.destroyed&&(o.length||o.ended)&&(i.emit("readable"),o.emittedReadable=!1),o.needReadable=!o.flowing&&!o.ended&&o.length<=o.highWaterMark,flow(i)}function maybeReadMore(i,o){o.readingMore||(o.readingMore=!0,G.nextTick(maybeReadMore_,i,o))}function maybeReadMore_(i,o){for(;!o.reading&&!o.ended&&(o.length<o.highWaterMark||o.flowing&&0===o.length);){var s=o.length;if(_("maybeReadMore read 0"),i.read(0),s===o.length)break}o.readingMore=!1}function updateReadableListening(i){var o=i._readableState;o.readableListening=i.listenerCount("readable")>0,o.resumeScheduled&&!o.paused?o.flowing=!0:i.listenerCount("data")>0&&i.resume()}function nReadingNextTick(i){_("readable nexttick read 0"),i.read(0)}function resume_(i,o){_("resume",o.reading),o.reading||i.read(0),o.resumeScheduled=!1,i.emit("resume"),flow(i),o.flowing&&!o.reading&&i.read(0)}function flow(i){var o=i._readableState;for(_("flow",o.flowing);o.flowing&&null!==i.read(););}function fromList(i,o){var s;return 0===o.length?null:(o.objectMode?s=o.buffer.shift():!i||i>=o.length?(s=o.decoder?o.buffer.join(""):1===o.buffer.length?o.buffer.first():o.buffer.concat(o.length),o.buffer.clear()):s=o.buffer.consume(i,o.decoder),s)}function endReadable(i){var o=i._readableState;_("endReadable",o.endEmitted),o.endEmitted||(o.ended=!0,G.nextTick(endReadableNT,o,i))}function endReadableNT(i,o){if(_("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&0===i.length&&(i.endEmitted=!0,o.readable=!1,o.emit("end"),i.autoDestroy)){var s=o._writableState;(!s||s.autoDestroy&&s.finished)&&o.destroy()}}function indexOf(i,o){for(var s=0,x=i.length;s<x;s++)if(i[s]===o)return s;return -1}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(i){this._readableState&&(this._readableState.destroyed=i)}}),Readable.prototype.destroy=et.destroy,Readable.prototype._undestroy=et.undestroy,Readable.prototype._destroy=function(i,o){o(i)},Readable.prototype.push=function(i,o){var s,x=this._readableState;return x.objectMode?s=!0:"string"==typeof i&&((o=o||x.defaultEncoding)!==x.encoding&&(i=X.from(i,o),o=""),s=!0),readableAddChunk(this,i,o,!1,s)},Readable.prototype.unshift=function(i){return readableAddChunk(this,i,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(i){F||(F=s(68019).s);var o=new F(i);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;for(var x=this._readableState.buffer.head,_="";null!==x;)_+=o.write(x.data),x=x.next;return this._readableState.buffer.clear(),""!==_&&this._readableState.buffer.push(_),this._readableState.length=_.length,this},Readable.prototype.read=function(i){_("read",i),i=parseInt(i,10);var o,s=this._readableState,x=i;if(0!==i&&(s.emittedReadable=!1),0===i&&s.needReadable&&((0!==s.highWaterMark?s.length>=s.highWaterMark:s.length>0)||s.ended))return _("read: emitReadable",s.length,s.ended),0===s.length&&s.ended?endReadable(this):emitReadable(this),null;if(0===(i=howMuchToRead(i,s))&&s.ended)return 0===s.length&&endReadable(this),null;var F=s.needReadable;return _("need readable",F),(0===s.length||s.length-i<s.highWaterMark)&&_("length less than watermark",F=!0),s.ended||s.reading?_("reading or ended",F=!1):F&&(_("do read"),s.reading=!0,s.sync=!0,0===s.length&&(s.needReadable=!0),this._read(s.highWaterMark),s.sync=!1,s.reading||(i=howMuchToRead(x,s))),null===(o=i>0?fromList(i,s):null)?(s.needReadable=s.length<=s.highWaterMark,i=0):(s.length-=i,s.awaitDrain=0),0===s.length&&(s.ended||(s.needReadable=!0),x!==i&&s.ended&&endReadable(this)),null!==o&&this.emit("data",o),o},Readable.prototype._read=function(i){ec(this,new es("_read()"))},Readable.prototype.pipe=function(i,o){var s=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=i;break;case 1:x.pipes=[x.pipes,i];break;default:x.pipes.push(i)}x.pipesCount+=1,_("pipe count=%d opts=%j",x.pipesCount,o);var F=o&&!1===o.end||i===G.stdout||i===G.stderr?unpipe:onend;function onend(){_("onend"),i.end()}x.endEmitted?G.nextTick(F):s.once("end",F),i.on("unpipe",function onunpipe(o,F){_("onunpipe"),o===s&&F&&!1===F.hasUnpiped&&(F.hasUnpiped=!0,_("cleanup"),i.removeListener("close",onclose),i.removeListener("finish",onfinish),i.removeListener("drain",ondrain),i.removeListener("error",onerror),i.removeListener("unpipe",onunpipe),s.removeListener("end",onend),s.removeListener("end",unpipe),s.removeListener("data",ondata),N=!0,x.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&ondrain())});var ondrain=function(){var i=s._readableState;_("pipeOnDrain",i.awaitDrain),i.awaitDrain&&i.awaitDrain--,0===i.awaitDrain&&EElistenerCount(s,"data")&&(i.flowing=!0,flow(s))};i.on("drain",ondrain);var N=!1;function ondata(o){_("ondata");var F=i.write(o);_("dest.write",F),!1===F&&((1===x.pipesCount&&x.pipes===i||x.pipesCount>1&&-1!==indexOf(x.pipes,i))&&!N&&(_("false write response, pause",x.awaitDrain),x.awaitDrain++),s.pause())}function onerror(o){_("onerror",o),unpipe(),i.removeListener("error",onerror),0===EElistenerCount(i,"error")&&ec(i,o)}function onclose(){i.removeListener("finish",onfinish),unpipe()}function onfinish(){_("onfinish"),i.removeListener("close",onclose),unpipe()}function unpipe(){_("unpipe"),s.unpipe(i)}return s.on("data",ondata),function(i,o,s){if("function"==typeof i.prependListener)return i.prependListener(o,s);i._events&&i._events[o]?Array.isArray(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]:i.on(o,s)}(i,"error",onerror),i.once("close",onclose),i.once("finish",onfinish),i.emit("pipe",s),x.flowing||(_("pipe resume"),s.resume()),i},Readable.prototype.unpipe=function(i){var o=this._readableState,s={hasUnpiped:!1};if(0===o.pipesCount)return this;if(1===o.pipesCount)return i&&i!==o.pipes||(i||(i=o.pipes),o.pipes=null,o.pipesCount=0,o.flowing=!1,i&&i.emit("unpipe",this,s)),this;if(!i){var x=o.pipes,_=o.pipesCount;o.pipes=null,o.pipesCount=0,o.flowing=!1;for(var F=0;F<_;F++)x[F].emit("unpipe",this,{hasUnpiped:!1});return this}var N=indexOf(o.pipes,i);return -1===N||(o.pipes.splice(N,1),o.pipesCount-=1,1===o.pipesCount&&(o.pipes=o.pipes[0]),i.emit("unpipe",this,s)),this},Readable.prototype.on=function(i,o){var s=Z.prototype.on.call(this,i,o),x=this._readableState;return"data"===i?(x.readableListening=this.listenerCount("readable")>0,!1!==x.flowing&&this.resume()):"readable"!==i||x.endEmitted||x.readableListening||(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,_("on readable",x.length,x.reading),x.length?emitReadable(this):x.reading||G.nextTick(nReadingNextTick,this)),s},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(i,o){var s=Z.prototype.removeListener.call(this,i,o);return"readable"===i&&G.nextTick(updateReadableListening,this),s},Readable.prototype.removeAllListeners=function(i){var o=Z.prototype.removeAllListeners.apply(this,arguments);return("readable"===i||void 0===i)&&G.nextTick(updateReadableListening,this),o},Readable.prototype.resume=function(){var i=this._readableState;return i.flowing||(_("resume"),i.flowing=!i.readableListening,i.resumeScheduled||(i.resumeScheduled=!0,G.nextTick(resume_,this,i))),i.paused=!1,this},Readable.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(i){var o=this,s=this._readableState,x=!1;for(var F in i.on("end",function(){if(_("wrapped end"),s.decoder&&!s.ended){var i=s.decoder.end();i&&i.length&&o.push(i)}o.push(null)}),i.on("data",function(F){_("wrapped data"),s.decoder&&(F=s.decoder.write(F)),(!s.objectMode||null!=F)&&(s.objectMode||F&&F.length)&&(o.push(F)||(x=!0,i.pause()))}),i)void 0===this[F]&&"function"==typeof i[F]&&(this[F]=function(o){return function(){return i[o].apply(i,arguments)}}(F));for(var N=0;N<eu.length;N++)i.on(eu[N],this.emit.bind(this,eu[N]));return this._read=function(o){_("wrapped _read",o),x&&(x=!1,i.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===N&&(N=s(68221)),N(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(i,o){return void 0===j&&(j=s(31748)),j(Readable,i,o)})},74308:function(i,o,s){"use strict";i.exports=Transform;var x=s(74322).q,_=x.ERR_METHOD_NOT_IMPLEMENTED,F=x.ERR_MULTIPLE_CALLBACK,N=x.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=x.ERR_TRANSFORM_WITH_LENGTH_0,G=s(37865);function afterTransform(i,o){var s=this._transformState;s.transforming=!1;var x=s.writecb;if(null===x)return this.emit("error",new F);s.writechunk=null,s.writecb=null,null!=o&&this.push(o),x(i);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function Transform(i){if(!(this instanceof Transform))return new Transform(i);G.call(this,i),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&("function"==typeof i.transform&&(this._transform=i.transform),"function"==typeof i.flush&&(this._flush=i.flush)),this.on("prefinish",prefinish)}function prefinish(){var i=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(o,s){done(i,o,s)})}function done(i,o,s){if(o)return i.emit("error",o);if(null!=s&&i.push(s),i._writableState.length)throw new j;if(i._transformState.transforming)throw new N;return i.push(null)}s(42018)(Transform,G),Transform.prototype.push=function(i,o){return this._transformState.needTransform=!1,G.prototype.push.call(this,i,o)},Transform.prototype._transform=function(i,o,s){s(new _("_transform()"))},Transform.prototype._write=function(i,o,s){var x=this._transformState;if(x.writecb=s,x.writechunk=i,x.writeencoding=o,!x.transforming){var _=this._readableState;(x.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},Transform.prototype._read=function(i){var o=this._transformState;null===o.writechunk||o.transforming?o.needTransform=!0:(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform))},Transform.prototype._destroy=function(i,o){G.prototype._destroy.call(this,i,function(i){o(i)})}},37493:function(i,o,s){"use strict";var x,_,F=s(90386);function CorkedRequest(i){var o=this;this.next=null,this.entry=null,this.finish=function(){(function(i,o,s){var x=i.entry;for(i.entry=null;x;){var _=x.callback;o.pendingcb--,_(void 0),x=x.next}o.corkedRequestsFree.next=i})(o,i)}}i.exports=Writable,Writable.WritableState=WritableState;var N={deprecate:s(20588)},j=s(71405),G=s(12856).Buffer,Z=s.g.Uint8Array||function(){},X=s(65756),J=s(56306).getHighWaterMark,$=s(74322).q,ee=$.ERR_INVALID_ARG_TYPE,et=$.ERR_METHOD_NOT_IMPLEMENTED,er=$.ERR_MULTIPLE_CALLBACK,en=$.ERR_STREAM_CANNOT_PIPE,ei=$.ERR_STREAM_DESTROYED,eo=$.ERR_STREAM_NULL_VALUES,es=$.ERR_STREAM_WRITE_AFTER_END,el=$.ERR_UNKNOWN_ENCODING,ec=X.errorOrDestroy;function nop(){}function WritableState(i,o,_){x=x||s(37865),i=i||{},"boolean"!=typeof _&&(_=o instanceof x),this.objectMode=!!i.objectMode,_&&(this.objectMode=this.objectMode||!!i.writableObjectMode),this.highWaterMark=J(this,i,"writableHighWaterMark",_),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var N=!1===i.decodeStrings;this.decodeStrings=!N,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){(function(i,o){var s=i._writableState,x=s.sync,_=s.writecb;if("function"!=typeof _)throw new er;if(s.writing=!1,s.writecb=null,s.length-=s.writelen,s.writelen=0,o)--s.pendingcb,x?(F.nextTick(_,o),F.nextTick(finishMaybe,i,s),i._writableState.errorEmitted=!0,ec(i,o)):(_(o),i._writableState.errorEmitted=!0,ec(i,o),finishMaybe(i,s));else{var N=needFinish(s)||i.destroyed;N||s.corked||s.bufferProcessing||!s.bufferedRequest||clearBuffer(i,s),x?F.nextTick(afterWrite,i,s,N,_):afterWrite(i,s,N,_)}})(o,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==i.emitClose,this.autoDestroy=!!i.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(i){var o=this instanceof(x=x||s(37865));if(!o&&!_.call(Writable,this))return new Writable(i);this._writableState=new WritableState(i,this,o),this.writable=!0,i&&("function"==typeof i.write&&(this._write=i.write),"function"==typeof i.writev&&(this._writev=i.writev),"function"==typeof i.destroy&&(this._destroy=i.destroy),"function"==typeof i.final&&(this._final=i.final)),j.call(this)}function doWrite(i,o,s,x,_,F,N){o.writelen=x,o.writecb=N,o.writing=!0,o.sync=!0,o.destroyed?o.onwrite(new ei("write")):s?i._writev(_,o.onwrite):i._write(_,F,o.onwrite),o.sync=!1}function afterWrite(i,o,s,x){s||0===o.length&&o.needDrain&&(o.needDrain=!1,i.emit("drain")),o.pendingcb--,x(),finishMaybe(i,o)}function clearBuffer(i,o){o.bufferProcessing=!0;var s=o.bufferedRequest;if(i._writev&&s&&s.next){var x=Array(o.bufferedRequestCount),_=o.corkedRequestsFree;_.entry=s;for(var F=0,N=!0;s;)x[F]=s,s.isBuf||(N=!1),s=s.next,F+=1;x.allBuffers=N,doWrite(i,o,!0,o.length,x,"",_.finish),o.pendingcb++,o.lastBufferedRequest=null,_.next?(o.corkedRequestsFree=_.next,_.next=null):o.corkedRequestsFree=new CorkedRequest(o),o.bufferedRequestCount=0}else{for(;s;){var j=s.chunk,G=s.encoding,Z=s.callback,X=o.objectMode?1:j.length;if(doWrite(i,o,!1,X,j,G,Z),s=s.next,o.bufferedRequestCount--,o.writing)break}null===s&&(o.lastBufferedRequest=null)}o.bufferedRequest=s,o.bufferProcessing=!1}function needFinish(i){return i.ending&&0===i.length&&null===i.bufferedRequest&&!i.finished&&!i.writing}function callFinal(i,o){i._final(function(s){o.pendingcb--,s&&ec(i,s),o.prefinished=!0,i.emit("prefinish"),finishMaybe(i,o)})}function finishMaybe(i,o){var s=needFinish(o);if(s&&(o.prefinished||o.finalCalled||("function"!=typeof i._final||o.destroyed?(o.prefinished=!0,i.emit("prefinish")):(o.pendingcb++,o.finalCalled=!0,F.nextTick(callFinal,i,o))),0===o.pendingcb&&(o.finished=!0,i.emit("finish"),o.autoDestroy))){var x=i._readableState;(!x||x.autoDestroy&&x.endEmitted)&&i.destroy()}return s}s(42018)(Writable,j),WritableState.prototype.getBuffer=function(){for(var i=this.bufferedRequest,o=[];i;)o.push(i),i=i.next;return o},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:N.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(i){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(i){return!!_.call(this,i)||this===Writable&&i&&i._writableState instanceof WritableState}})):_=function(i){return i instanceof this},Writable.prototype.pipe=function(){ec(this,new en)},Writable.prototype.write=function(i,o,s){var x,_,N,j,X,J,$,et=this._writableState,er=!1,en=!et.objectMode&&(x=i,G.isBuffer(x)||x instanceof Z);return en&&!G.isBuffer(i)&&(_=i,i=G.from(_)),("function"==typeof o&&(s=o,o=null),en?o="buffer":o||(o=et.defaultEncoding),"function"!=typeof s&&(s=nop),et.ending)?(N=s,ec(this,j=new es),F.nextTick(N,j)):(en||(X=i,J=s,null===X?$=new eo:"string"==typeof X||et.objectMode||($=new ee("chunk",["string","Buffer"],X)),!$||(ec(this,$),F.nextTick(J,$),0)))&&(et.pendingcb++,er=function(i,o,s,x,_,F){if(!s){var N,j,Z=(N=x,j=_,o.objectMode||!1===o.decodeStrings||"string"!=typeof N||(N=G.from(N,j)),N);x!==Z&&(s=!0,_="buffer",x=Z)}var X=o.objectMode?1:x.length;o.length+=X;var J=o.length<o.highWaterMark;if(J||(o.needDrain=!0),o.writing||o.corked){var $=o.lastBufferedRequest;o.lastBufferedRequest={chunk:x,encoding:_,isBuf:s,callback:F,next:null},$?$.next=o.lastBufferedRequest:o.bufferedRequest=o.lastBufferedRequest,o.bufferedRequestCount+=1}else doWrite(i,o,!1,X,x,_,F);return J}(this,et,en,i,o,s)),er},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var i=this._writableState;!i.corked||(i.corked--,i.writing||i.corked||i.bufferProcessing||!i.bufferedRequest||clearBuffer(this,i))},Writable.prototype.setDefaultEncoding=function(i){if("string"==typeof i&&(i=i.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((i+"").toLowerCase())>-1))throw new el(i);return this._writableState.defaultEncoding=i,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(i,o,s){s(new et("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(i,o,s){var x,_=this._writableState;return"function"==typeof i?(s=i,i=null,o=null):"function"==typeof o&&(s=o,o=null),null!=i&&this.write(i,o),_.corked&&(_.corked=1,this.uncork()),_.ending||(x=s,_.ending=!0,finishMaybe(this,_),x&&(_.finished?F.nextTick(x):this.once("finish",x)),_.ended=!0,this.writable=!1),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(i){this._writableState&&(this._writableState.destroyed=i)}}),Writable.prototype.destroy=X.destroy,Writable.prototype._undestroy=X.undestroy,Writable.prototype._destroy=function(i,o){o(i)}},68221:function(i,o,s){"use strict";var x,_=s(90386);function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}var F=s(12726),N=Symbol("lastResolve"),j=Symbol("lastReject"),G=Symbol("error"),Z=Symbol("ended"),X=Symbol("lastPromise"),J=Symbol("handlePromise"),$=Symbol("stream");function createIterResult(i,o){return{value:i,done:o}}function readAndResolve(i){var o=i[N];if(null!==o){var s=i[$].read();null!==s&&(i[X]=null,i[N]=null,i[j]=null,o(createIterResult(s,!1)))}}function onReadable(i){_.nextTick(readAndResolve,i)}var ee=Object.getPrototypeOf(function(){}),et=Object.setPrototypeOf((_defineProperty(x={get stream(){return this[$]},next:function(){var i,o,s=this,x=this[G];if(null!==x)return Promise.reject(x);if(this[Z])return Promise.resolve(createIterResult(void 0,!0));if(this[$].destroyed)return new Promise(function(i,o){_.nextTick(function(){s[G]?o(s[G]):i(createIterResult(void 0,!0))})});var F=this[X];if(F)o=new Promise((i=this,function(o,s){F.then(function(){if(i[Z]){o(createIterResult(void 0,!0));return}i[J](o,s)},s)}));else{var N=this[$].read();if(null!==N)return Promise.resolve(createIterResult(N,!1));o=new Promise(this[J])}return this[X]=o,o}},Symbol.asyncIterator,function(){return this}),_defineProperty(x,"return",function(){var i=this;return new Promise(function(o,s){i[$].destroy(null,function(i){if(i){s(i);return}o(createIterResult(void 0,!0))})})}),x),ee);i.exports=function(i){var o,s=Object.create(et,(_defineProperty(o={},$,{value:i,writable:!0}),_defineProperty(o,N,{value:null,writable:!0}),_defineProperty(o,j,{value:null,writable:!0}),_defineProperty(o,G,{value:null,writable:!0}),_defineProperty(o,Z,{value:i._readableState.endEmitted,writable:!0}),_defineProperty(o,J,{value:function(i,o){var x=s[$].read();x?(s[X]=null,s[N]=null,s[j]=null,i(createIterResult(x,!1))):(s[N]=i,s[j]=o)},writable:!0}),o));return s[X]=null,F(i,function(i){if(i&&"ERR_STREAM_PREMATURE_CLOSE"!==i.code){var o=s[j];null!==o&&(s[X]=null,s[N]=null,s[j]=null,o(i)),s[G]=i;return}var x=s[N];null!==x&&(s[X]=null,s[N]=null,s[j]=null,x(createIterResult(void 0,!0))),s[Z]=!0}),i.on("readable",onReadable.bind(null,s)),s}},31125:function(i,o,s){"use strict";function ownKeys(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(i);o&&(x=x.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),s.push.apply(s,x)}return s}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var x=o[s];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(i,x.key,x)}}var x=s(12856).Buffer,_=s(69862).inspect,F=_&&_.custom||"inspect";i.exports=function(){var i,o;function BufferList(){(function(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")})(this,BufferList),this.head=null,this.tail=null,this.length=0}return i=[{key:"push",value:function(i){var o={data:i,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(i){var o={data:i,next:this.head};0===this.length&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(0!==this.length){var i=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(0===this.length)return"";for(var o=this.head,s=""+o.data;o=o.next;)s+=i+o.data;return s}},{key:"concat",value:function(i){if(0===this.length)return x.alloc(0);for(var o,s,_=x.allocUnsafe(i>>>0),F=this.head,N=0;F;)o=F.data,s=N,x.prototype.copy.call(o,_,s),N+=F.data.length,F=F.next;return _}},{key:"consume",value:function(i,o){var s;return i<this.head.data.length?(s=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):s=i===this.head.data.length?this.shift():o?this._getString(i):this._getBuffer(i),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var o=this.head,s=1,x=o.data;for(i-=x.length;o=o.next;){var _=o.data,F=i>_.length?_.length:i;if(F===_.length?x+=_:x+=_.slice(0,i),0==(i-=F)){F===_.length?(++s,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=_.slice(F));break}++s}return this.length-=s,x}},{key:"_getBuffer",value:function(i){var o=x.allocUnsafe(i),s=this.head,_=1;for(s.data.copy(o),i-=s.data.length;s=s.next;){var F=s.data,N=i>F.length?F.length:i;if(F.copy(o,o.length-i,0,N),0==(i-=N)){N===F.length?(++_,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=F.slice(N));break}++_}return this.length-=_,o}},{key:F,value:function(i,o){return _(this,function(i){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(s),!0).forEach(function(o){var x;x=s[o],o in i?Object.defineProperty(i,o,{value:x,enumerable:!0,configurable:!0,writable:!0}):i[o]=x}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(s,o))})}return i}({},o,{depth:0,customInspect:!1}))}}],_defineProperties(BufferList.prototype,i),o&&_defineProperties(BufferList,o),BufferList}()},65756:function(i,o,s){"use strict";var x=s(90386);function emitErrorAndCloseNT(i,o){emitErrorNT(i,o),emitCloseNT(i)}function emitCloseNT(i){(!i._writableState||i._writableState.emitClose)&&(!i._readableState||i._readableState.emitClose)&&i.emit("close")}function emitErrorNT(i,o){i.emit("error",o)}i.exports={destroy:function(i,o){var s=this,_=this._readableState&&this._readableState.destroyed,F=this._writableState&&this._writableState.destroyed;return _||F?o?o(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,x.nextTick(emitErrorNT,this,i)):x.nextTick(emitErrorNT,this,i)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(i){!o&&i?s._writableState?s._writableState.errorEmitted?x.nextTick(emitCloseNT,s):(s._writableState.errorEmitted=!0,x.nextTick(emitErrorAndCloseNT,s,i)):x.nextTick(emitErrorAndCloseNT,s,i):o?(x.nextTick(emitCloseNT,s),o(i)):x.nextTick(emitCloseNT,s)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,o){var s=i._readableState,x=i._writableState;s&&s.autoDestroy||x&&x.autoDestroy?i.destroy(o):i.emit("error",o)}}},12726:function(i,o,s){"use strict";var x=s(74322).q.ERR_STREAM_PREMATURE_CLOSE;function noop(){}i.exports=function eos(i,o,s){if("function"==typeof o)return eos(i,null,o);o||(o={}),_=s||noop,F=!1,s=function(){if(!F){F=!0;for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];_.apply(this,o)}};var _,F,N=o.readable||!1!==o.readable&&i.readable,j=o.writable||!1!==o.writable&&i.writable,onlegacyfinish=function(){i.writable||onfinish()},G=i._writableState&&i._writableState.finished,onfinish=function(){j=!1,G=!0,N||s.call(i)},Z=i._readableState&&i._readableState.endEmitted,onend=function(){N=!1,Z=!0,j||s.call(i)},onerror=function(o){s.call(i,o)},onclose=function(){var o;return N&&!Z?(i._readableState&&i._readableState.ended||(o=new x),s.call(i,o)):j&&!G?(i._writableState&&i._writableState.ended||(o=new x),s.call(i,o)):void 0},onrequest=function(){i.req.on("finish",onfinish)};return i.setHeader&&"function"==typeof i.abort?(i.on("complete",onfinish),i.on("abort",onclose),i.req?onrequest():i.on("request",onrequest)):j&&!i._writableState&&(i.on("end",onlegacyfinish),i.on("close",onlegacyfinish)),i.on("end",onend),i.on("finish",onfinish),!1!==o.error&&i.on("error",onerror),i.on("close",onclose),function(){i.removeListener("complete",onfinish),i.removeListener("abort",onclose),i.removeListener("request",onrequest),i.req&&i.req.removeListener("finish",onfinish),i.removeListener("end",onlegacyfinish),i.removeListener("close",onlegacyfinish),i.removeListener("finish",onfinish),i.removeListener("end",onend),i.removeListener("error",onerror),i.removeListener("close",onclose)}}},31748:function(i){i.exports=function(){throw Error("Readable.from is not available in the browser")}},10168:function(i,o,s){"use strict";var x,_=s(74322).q,F=_.ERR_MISSING_ARGS,N=_.ERR_STREAM_DESTROYED;function noop(i){if(i)throw i}function call(i){i()}function pipe(i,o){return i.pipe(o)}i.exports=function(){for(var i,o,_=arguments.length,j=Array(_),G=0;G<_;G++)j[G]=arguments[G];var Z=(i=j).length&&"function"==typeof i[i.length-1]?i.pop():noop;if(Array.isArray(j[0])&&(j=j[0]),j.length<2)throw new F("streams");var X=j.map(function(i,_){var F,G,J,$,ee,et=_<j.length-1;return G=F=function(i){o||(o=i),i&&X.forEach(call),et||(X.forEach(call),Z(o))},J=!1,F=function(){J||(J=!0,G.apply(void 0,arguments))},$=!1,i.on("close",function(){$=!0}),void 0===x&&(x=s(12726)),x(i,{readable:et,writable:_>0},function(i){if(i)return F(i);$=!0,F()}),ee=!1,function(o){if(!$&&!ee){if(ee=!0,i.setHeader&&"function"==typeof i.abort)return i.abort();if("function"==typeof i.destroy)return i.destroy();F(o||new N("pipe"))}}});return j.reduce(pipe)}},56306:function(i,o,s){"use strict";var x=s(74322).q.ERR_INVALID_OPT_VALUE;i.exports={getHighWaterMark:function(i,o,s,_){var F=null!=o.highWaterMark?o.highWaterMark:_?o[s]:null;if(null!=F){if(!(isFinite(F)&&Math.floor(F)===F)||F<0){var N=_?s:"highWaterMark";throw new x(N,F)}return Math.floor(F)}return i.objectMode?16:16384}}},71405:function(i,o,s){i.exports=s(15398).EventEmitter},68019:function(i,o,s){"use strict";var x=s(71665).Buffer,_=x.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(i){var o;switch(this.encoding=function(i){var o=function(i){var o;if(!i)return"utf8";for(;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}}(i);if("string"!=typeof o&&(x.isEncoding===_||!_(i)))throw Error("Unknown encoding: "+i);return o||i}(i),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,o=4;break;case"utf8":this.fillLast=utf8FillLast,o=4;break;case"base64":this.text=base64Text,this.end=base64End,o=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=x.allocUnsafe(o)}function utf8CheckByte(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function utf8FillLast(i){var o=this.lastTotal-this.lastNeed,s=function(i,o,s){if((192&o[0])!=128)return i.lastNeed=0,"";if(i.lastNeed>1&&o.length>1){if((192&o[1])!=128)return i.lastNeed=1,"";if(i.lastNeed>2&&o.length>2&&(192&o[2])!=128)return i.lastNeed=2,""}}(this,i,0);return void 0!==s?s:this.lastNeed<=i.length?(i.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(i.copy(this.lastChar,o,0,i.length),this.lastNeed-=i.length)}function utf16Text(i,o){if((i.length-o)%2==0){var s=i.toString("utf16le",o);if(s){var x=s.charCodeAt(s.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",o,i.length-1)}function utf16End(i){var o=i&&i.length?this.write(i):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,s)}return o}function base64Text(i,o){var s=(i.length-o)%3;return 0===s?i.toString("base64",o):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",o,i.length-s))}function base64End(i){var o=i&&i.length?this.write(i):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function simpleWrite(i){return i.toString(this.encoding)}function simpleEnd(i){return i&&i.length?this.write(i):""}o.s=StringDecoder,StringDecoder.prototype.write=function(i){var o,s;if(0===i.length)return"";if(this.lastNeed){if(void 0===(o=this.fillLast(i)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<i.length?o?o+this.text(i,s):this.text(i,s):o||""},StringDecoder.prototype.end=function(i){var o=i&&i.length?this.write(i):"";return this.lastNeed?o+"":o},StringDecoder.prototype.text=function(i,o){var s=function(i,o,s){var x=o.length-1;if(x<s)return 0;var _=utf8CheckByte(o[x]);return _>=0?(_>0&&(i.lastNeed=_-1),_):--x<s||-2===_?0:(_=utf8CheckByte(o[x]))>=0?(_>0&&(i.lastNeed=_-2),_):--x<s||-2===_?0:(_=utf8CheckByte(o[x]))>=0?(_>0&&(2===_?_=0:i.lastNeed=_-3),_):0}(this,i,o);if(!this.lastNeed)return i.toString("utf8",o);this.lastTotal=s;var x=i.length-(s-this.lastNeed);return i.copy(this.lastChar,0,x),i.toString("utf8",o,x)},StringDecoder.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},90715:function(i,o,s){var _=s(32791),F=s(41633)("stream-parser");function init(i){F("initializing parser stream"),i._parserBytesLeft=0,i._parserBuffers=[],i._parserBuffered=0,i._parserState=-1,i._parserCallback=null,"function"==typeof i.push&&(i._parserOutput=i.push.bind(i)),i._parserInit=!0}function _bytes(i,o){_(!this._parserCallback,'there is already a "callback" set!'),_(isFinite(i)&&i>0,'can only buffer a finite number of bytes > 0, got "'+i+'"'),this._parserInit||init(this),F("buffering %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=0}function _skipBytes(i,o){_(!this._parserCallback,'there is already a "callback" set!'),_(i>0,'can only skip > 0 bytes, got "'+i+'"'),this._parserInit||init(this),F("skipping %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=1}function _passthrough(i,o){_(!this._parserCallback,'There is already a "callback" set!'),_(i>0,'can only pass through > 0 bytes, got "'+i+'"'),this._parserInit||init(this),F("passing through %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=2}function write(i,o,s){this._parserInit||init(this),F("write(%o bytes)",i.length),"function"==typeof o&&(s=o),N(this,i,null,s)}function transform(i,o,s){this._parserInit||init(this),F("transform(%o bytes)",i.length),"function"!=typeof o&&(o=this._parserOutput),N(this,i,o,s)}function process(i,o,s,_){if(i._parserBytesLeft-=o.length,F("%o bytes left for stream piece",i._parserBytesLeft),0===i._parserState?(i._parserBuffers.push(o),i._parserBuffered+=o.length):2===i._parserState&&s(o),0!==i._parserBytesLeft)return _;var N=i._parserCallback;if(N&&0===i._parserState&&i._parserBuffers.length>1&&(o=x.concat(i._parserBuffers,i._parserBuffered)),0!==i._parserState&&(o=null),i._parserCallback=null,i._parserBuffered=0,i._parserState=-1,i._parserBuffers.splice(0),N){var j=[];o&&j.push(o),s&&j.push(s);var G=N.length>j.length;G&&j.push(trampoline(_));var Z=N.apply(i,j);if(!G||_===Z)return _}}i.exports=function(i){var o=i&&"function"==typeof i._transform,s=i&&"function"==typeof i._write;if(!o&&!s)throw Error("must pass a Writable or Transform stream in");F("extending Parser into stream"),i._bytes=_bytes,i._skipBytes=_skipBytes,o&&(i._passthrough=_passthrough),o?i._transform=transform:i._write=write};var N=trampoline(function _data(i,o,s,x){return i._parserBytesLeft<=0?x(Error("got data but not currently parsing anything")):o.length<=i._parserBytesLeft?function(){return process(i,o,s,x)}:function(){var _=o.slice(0,i._parserBytesLeft);return process(i,_,s,function(F){return F?x(F):o.length>_.length?function(){return _data(i,o.slice(_.length),s,x)}:void 0})}});function trampoline(i){return function(){for(var o=i.apply(this,arguments);"function"==typeof o;)o=o();return o}}},41633:function(i,o,s){var x=s(90386);function load(){var i;try{i=o.storage.debug}catch(i){}return!i&&void 0!==x&&"env"in x&&(i=x.env.DEBUG),i}(o=i.exports=s(74469)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(i){var s=this.useColors;if(i[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+i[0]+(s?"%c ":" ")+"+"+o.humanize(this.diff),s){var x="color: "+this.color;i.splice(1,0,x,"color: inherit");var _=0,F=0;i[0].replace(/%[a-zA-Z%]/g,function(i){"%%"!==i&&(_++,"%c"===i&&(F=_))}),i.splice(F,0,x)}},o.save=function(i){try{null==i?o.storage.removeItem("debug"):o.storage.debug=i}catch(i){}},o.load=load,o.useColors=function(){return"undefined"!=typeof window&&!!window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(i){}}(),o.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],o.formatters.j=function(i){try{return JSON.stringify(i)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}},o.enable(load())},74469:function(i,o,s){var x;function createDebug(i){function debug(){if(debug.enabled){var i=+new Date,s=i-(x||i);debug.diff=s,debug.prev=x,debug.curr=i,x=i;for(var _=Array(arguments.length),F=0;F<_.length;F++)_[F]=arguments[F];_[0]=o.coerce(_[0]),"string"!=typeof _[0]&&_.unshift("%O");var N=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,function(i,s){if("%%"===i)return i;N++;var x=o.formatters[s];if("function"==typeof x){var F=_[N];i=x.call(debug,F),_.splice(N,1),N--}return i}),o.formatArgs.call(debug,_),(debug.log||o.log||console.log.bind(console)).apply(debug,_)}}return debug.namespace=i,debug.enabled=o.enabled(i),debug.useColors=o.useColors(),debug.color=function(i){var s,x=0;for(s in i)x=(x<<5)-x+i.charCodeAt(s)|0;return o.colors[Math.abs(x)%o.colors.length]}(i),"function"==typeof o.init&&o.init(debug),debug}(o=i.exports=createDebug.debug=createDebug.default=createDebug).coerce=function(i){return i instanceof Error?i.stack||i.message:i},o.disable=function(){o.enable("")},o.enable=function(i){o.save(i),o.names=[],o.skips=[];for(var s=("string"==typeof i?i:"").split(/[\s,]+/),x=s.length,_=0;_<x;_++)s[_]&&("-"===(i=s[_].replace(/\*/g,".*?"))[0]?o.skips.push(RegExp("^"+i.substr(1)+"$")):o.names.push(RegExp("^"+i+"$")))},o.enabled=function(i){var s,x;for(s=0,x=o.skips.length;s<x;s++)if(o.skips[s].test(i))return!1;for(s=0,x=o.names.length;s<x;s++)if(o.names[s].test(i))return!0;return!1},o.humanize=s(11375),o.names=[],o.skips=[],o.formatters={}},11375:function(i){function plural(i,o,s){return i<o?void 0:i<1.5*o?Math.floor(i/o)+" "+s:Math.ceil(i/o)+" "+s+"s"}i.exports=function(i,o){o=o||{};var s=typeof i;if("string"===s&&i.length>0)return function(i){if(!((i=String(i)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(i);if("number"===s&&!1===isNaN(i))return o.long?plural(i,864e5,"day")||plural(i,36e5,"hour")||plural(i,6e4,"minute")||plural(i,1e3,"second")||i+" ms":i>=864e5?Math.round(i/864e5)+"d":i>=36e5?Math.round(i/36e5)+"h":i>=6e4?Math.round(i/6e4)+"m":i>=1e3?Math.round(i/1e3)+"s":i+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},99011:function(i,o,s){"use strict";var x=s(88641);i.exports=function(i,o,s){if(null==i)throw Error("First argument should be a string");if(null==o)throw Error("Separator should be a string or a RegExp");s?("string"==typeof s||Array.isArray(s))&&(s={ignore:s}):s={},null==s.escape&&(s.escape=!0),null==s.ignore?s.ignore=["[]","()","{}","<>",'""',"''","``","","\xab\xbb"]:("string"==typeof s.ignore&&(s.ignore=[s.ignore]),s.ignore=s.ignore.map(function(i){return 1===i.length&&(i+=i),i}));var _=x.parse(i,{flat:!0,brackets:s.ignore}),F=_[0].split(o);if(s.escape){for(var N=[],j=0;j<F.length;j++){var G=F[j],Z=F[j+1];"\\"===G[G.length-1]&&"\\"!==G[G.length-2]?(N.push(G+o+Z),j++):N.push(G)}F=N}for(var j=0;j<F.length;j++)_[0]=F[j],F[j]=x.stringify(_,{flat:!0});return F}},68664:function(i){"use strict";i.exports=function(i){for(var o,s=i.length,x=Array(s),_=Array(s),F=Array(s),N=Array(s),j=Array(s),G=Array(s),Z=0;Z<s;++Z)x[Z]=-1,_[Z]=0,F[Z]=!1,N[Z]=0,j[Z]=-1,G[Z]=[];for(var X=0,J=[],$=[],Z=0;Z<s;++Z)x[Z]<0&&function(o){var s=[o],Z=[o];for(x[o]=_[o]=X,F[o]=!0,X+=1;Z.length>0;){var ee=i[o=Z[Z.length-1]];if(N[o]<ee.length){for(var et=N[o];et<ee.length;++et){var er=ee[et];if(x[er]<0){x[er]=_[er]=X,F[er]=!0,X+=1,s.push(er),Z.push(er);break}F[er]&&(_[o]=0|Math.min(_[o],_[er])),j[er]>=0&&G[o].push(j[er])}N[o]=et}else{if(_[o]===x[o]){for(var en=[],ei=[],eo=0,et=s.length-1;et>=0;--et){var es=s[et];if(F[es]=!1,en.push(es),ei.push(G[es]),eo+=G[es].length,j[es]=J.length,es===o){s.length=et;break}}J.push(en);for(var el=Array(eo),et=0;et<ei.length;et++)for(var ec=0;ec<ei[et].length;ec++)el[--eo]=ei[et][ec];$.push(el)}Z.pop()}}}(Z);for(var Z=0;Z<$.length;Z++){var ee=$[Z];if(0!==ee.length){ee.sort(function(i,o){return i-o}),o=[ee[0]];for(var et=1;et<ee.length;et++)ee[et]!==ee[et-1]&&o.push(ee[et]);$[Z]=o}}return{components:J,adjacencyList:$}}},7095:function(i,o,s){"use strict";s.r(o);var _slicedToArray=function(i,o){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return function(i,o){var s=[],x=!0,_=!1,F=void 0;try{for(var N,j=i[Symbol.iterator]();!(x=(N=j.next()).done)&&(s.push(N.value),!o||s.length!==o);x=!0);}catch(i){_=!0,F=i}finally{try{!x&&j.return&&j.return()}finally{if(_)throw F}}return s}(i,o);throw TypeError("Invalid attempt to destructure non-iterable instance")},x=2*Math.PI,mapToEllipse=function(i,o,s,x,_,F,N){var j=i.x,G=i.y;return{x:x*(j*=o)-_*(G*=s)+F,y:_*j+x*G+N}},approxUnitArc=function(i,o){var s=1.5707963267948966===o?.551915024494:-1.5707963267948966===o?-.551915024494:4/3*Math.tan(o/4),x=Math.cos(i),_=Math.sin(i),F=Math.cos(i+o),N=Math.sin(i+o);return[{x:x-_*s,y:_+x*s},{x:F+N*s,y:N-F*s},{x:F,y:N}]},vectorAngle=function(i,o,s,x){var _=i*s+o*x;return _>1&&(_=1),_<-1&&(_=-1),(i*x-o*s<0?-1:1)*Math.acos(_)},getArcCenter=function(i,o,s,_,F,N,j,G,Z,X,J,$){var ee=Math.pow(F,2),et=Math.pow(N,2),er=Math.pow(J,2),en=Math.pow($,2),ei=ee*et-ee*en-et*er;ei<0&&(ei=0),ei/=ee*en+et*er;var eo=(ei=Math.sqrt(ei)*(j===G?-1:1))*F/N*$,es=-(ei*N)/F*J,el=(J-eo)/F,ec=($-es)/N,eu=vectorAngle(1,0,el,ec),ef=vectorAngle(el,ec,(-J-eo)/F,(-$-es)/N);return 0===G&&ef>0&&(ef-=x),1===G&&ef<0&&(ef+=x),[X*eo-Z*es+(i+s)/2,Z*eo+X*es+(o+_)/2,eu,ef]};o.default=function(i){var o=i.px,s=i.py,_=i.cx,F=i.cy,N=i.rx,j=i.ry,G=i.xAxisRotation,Z=void 0===G?0:G,X=i.largeArcFlag,J=void 0===X?0:X,$=i.sweepFlag,ee=void 0===$?0:$,et=[];if(0===N||0===j)return[];var er=Math.sin(Z*x/360),en=Math.cos(Z*x/360),ei=en*(o-_)/2+er*(s-F)/2,eo=-er*(o-_)/2+en*(s-F)/2;if(0===ei&&0===eo)return[];var es=Math.pow(ei,2)/Math.pow(N=Math.abs(N),2)+Math.pow(eo,2)/Math.pow(j=Math.abs(j),2);es>1&&(N*=Math.sqrt(es),j*=Math.sqrt(es));var el=_slicedToArray(getArcCenter(o,s,_,F,N,j,J,ee,er,en,ei,eo),4),ec=el[0],eu=el[1],ef=el[2],eh=el[3],ed=Math.abs(eh)/(x/4);1e-7>Math.abs(1-ed)&&(ed=1);var ep=Math.max(Math.ceil(ed),1);eh/=ep;for(var eg=0;eg<ep;eg++)et.push(approxUnitArc(ef,eh)),ef+=eh;return et.map(function(i){var o=mapToEllipse(i[0],N,j,en,er,ec,eu),s=o.x,x=o.y,_=mapToEllipse(i[1],N,j,en,er,ec,eu),F=_.x,G=_.y,Z=mapToEllipse(i[2],N,j,en,er,ec,eu);return{x1:s,y1:x,x2:F,y2:G,x:Z.x,y:Z.y}})}},1750:function(i,o,s){"use strict";var x=s(95616),_=s(65185),F=s(29988),N=s(89546),j=s(32791);i.exports=function(i){if(Array.isArray(i)&&1===i.length&&"string"==typeof i[0]&&(i=i[0]),"string"==typeof i&&(j(N(i),"String is not an SVG path."),i=x(i)),j(Array.isArray(i),"Argument should be a string or an array of path segments."),!(i=F(i=_(i))).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],s=0,G=i.length;s<G;s++)for(var Z=i[s].slice(1),X=0;X<Z.length;X+=2)Z[X+0]<o[0]&&(o[0]=Z[X+0]),Z[X+1]<o[1]&&(o[1]=Z[X+1]),Z[X+0]>o[2]&&(o[2]=Z[X+0]),Z[X+1]>o[3]&&(o[3]=Z[X+1]);return o}},29988:function(i,o,s){"use strict";i.exports=function(i){for(var o=[],s=0,_=0,F=0,N=0,j=null,G=null,Z=0,X=0,J=0,$=i.length;J<$;J++){var ee=i[J],et=ee[0];switch(et){case"M":F=ee[1],N=ee[2];break;case"A":var er=x({px:Z,py:X,cx:ee[6],cy:ee[7],rx:ee[1],ry:ee[2],xAxisRotation:ee[3],largeArcFlag:ee[4],sweepFlag:ee[5]});if(!er.length)continue;for(var en,ei,eo=0;eo<er.length;eo++)ee=["C",(ei=er[eo]).x1,ei.y1,ei.x2,ei.y2,ei.x,ei.y],eo<er.length-1&&o.push(ee);break;case"S":var es=Z,el=X;("C"==en||"S"==en)&&(es+=es-s,el+=el-_),ee=["C",es,el,ee[1],ee[2],ee[3],ee[4]];break;case"T":"Q"==en||"T"==en?(j=2*Z-j,G=2*X-G):(j=Z,G=X),ee=quadratic(Z,X,j,G,ee[1],ee[2]);break;case"Q":j=ee[1],G=ee[2],ee=quadratic(Z,X,ee[1],ee[2],ee[3],ee[4]);break;case"L":ee=line(Z,X,ee[1],ee[2]);break;case"H":ee=line(Z,X,ee[1],X);break;case"V":ee=line(Z,X,Z,ee[1]);break;case"Z":ee=line(Z,X,F,N)}en=et,Z=ee[ee.length-2],X=ee[ee.length-1],ee.length>4?(s=ee[ee.length-4],_=ee[ee.length-3]):(s=Z,_=X),o.push(ee)}return o};var x=s(7095);function line(i,o,s,x){return["C",i,o,s,x,s,x]}function quadratic(i,o,s,x,_,F){return["C",i/3+2/3*s,o/3+2/3*x,_/3+2/3*s,F/3+2/3*x,_,F]}},82019:function(i,o,s){"use strict";var x,_=s(1750),F=s(95616),N=s(31457),j=s(89546),G=s(44781),Z=document.createElement("canvas"),X=Z.getContext("2d");i.exports=function(i,o){if(!j(i))throw Error("Argument should be valid svg path string");o||(o={}),o.shape?(s=o.shape[0],J=o.shape[1]):(s=Z.width=o.w||o.width||200,J=Z.height=o.h||o.height||200);var s,J,$=Math.min(s,J),ee=o.stroke||0,et=o.viewbox||o.viewBox||_(i),er=[s/(et[2]-et[0]),J/(et[3]-et[1])],en=Math.min(er[0]||0,er[1]||0)/2;if(X.fillStyle="black",X.fillRect(0,0,s,J),X.fillStyle="white",ee&&("number"!=typeof ee&&(ee=1),ee>0?X.strokeStyle="white":X.strokeStyle="black",X.lineWidth=Math.abs(ee)),X.translate(.5*s,.5*J),X.scale(en,en),function(){if(null!=x)return x;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return x=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(o);var s=i.getImageData(0,0,1,1);return x=s&&s.data&&255===s.data[3]}()){var ei=new Path2D(i);X.fill(ei),ee&&X.stroke(ei)}else N(X,F(i)),X.fill(),ee&&X.stroke();return X.setTransform(1,0,0,1,0,0),G(X,{cutoff:null!=o.cutoff?o.cutoff:.5,radius:null!=o.radius?o.radius:.5*$})}},84267:function(i,o,s){var x;!function(_){var F,N,j,G=/^\s+/,Z=/\s+$/,X=0,J=_.round,$=_.min,ee=_.max,et=_.random;function tinycolor(i,o){if(o=o||{},(i=i||"")instanceof tinycolor)return i;if(!(this instanceof tinycolor))return new tinycolor(i,o);var s,x,F,N,j,et,en,eo,es,el,ec,eu,ef,eh,ed,ep,eg,em,ey,ev,ex=(x={r:0,g:0,b:0},F=1,N=null,j=null,et=null,en=!1,eo=!1,"string"==typeof(s=i)&&(s=function(i){i=i.replace(G,"").replace(Z,"").toLowerCase();var o,s=!1;if(er[i])i=er[i],s=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};return(o=ei.rgb.exec(i))?{r:o[1],g:o[2],b:o[3]}:(o=ei.rgba.exec(i))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=ei.hsl.exec(i))?{h:o[1],s:o[2],l:o[3]}:(o=ei.hsla.exec(i))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=ei.hsv.exec(i))?{h:o[1],s:o[2],v:o[3]}:(o=ei.hsva.exec(i))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=ei.hex8.exec(i))?{r:parseIntFromHex(o[1]),g:parseIntFromHex(o[2]),b:parseIntFromHex(o[3]),a:parseIntFromHex(o[4])/255,format:s?"name":"hex8"}:(o=ei.hex6.exec(i))?{r:parseIntFromHex(o[1]),g:parseIntFromHex(o[2]),b:parseIntFromHex(o[3]),format:s?"name":"hex"}:(o=ei.hex4.exec(i))?{r:parseIntFromHex(o[1]+""+o[1]),g:parseIntFromHex(o[2]+""+o[2]),b:parseIntFromHex(o[3]+""+o[3]),a:parseIntFromHex(o[4]+""+o[4])/255,format:s?"name":"hex8"}:!!(o=ei.hex3.exec(i))&&{r:parseIntFromHex(o[1]+""+o[1]),g:parseIntFromHex(o[2]+""+o[2]),b:parseIntFromHex(o[3]+""+o[3]),format:s?"name":"hex"}}(s)),"object"==typeof s&&(isValidCSSUnit(s.r)&&isValidCSSUnit(s.g)&&isValidCSSUnit(s.b)?(es=s.r,el=s.g,ec=s.b,x={r:255*bound01(es,255),g:255*bound01(el,255),b:255*bound01(ec,255)},en=!0,eo="%"===String(s.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(s.h)&&isValidCSSUnit(s.s)&&isValidCSSUnit(s.v)?(N=convertToPercentage(s.s),j=convertToPercentage(s.v),eu=s.h,ef=N,eh=j,eu=6*bound01(eu,360),ef=bound01(ef,100),eh=bound01(eh,100),ed=_.floor(eu),ep=eu-ed,eg=eh*(1-ef),em=eh*(1-ep*ef),ey=eh*(1-(1-ep)*ef),x={r:255*[eh,em,eg,eg,ey,eh][ev=ed%6],g:255*[ey,eh,eh,em,eg,eg][ev],b:255*[eg,eg,ey,eh,eh,em][ev]},en=!0,eo="hsv"):isValidCSSUnit(s.h)&&isValidCSSUnit(s.s)&&isValidCSSUnit(s.l)&&(N=convertToPercentage(s.s),et=convertToPercentage(s.l),x=function(i,o,s){var x,_,F;function hue2rgb(i,o,s){return(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?i+(o-i)*6*s:s<.5?o:s<2/3?i+(o-i)*(2/3-s)*6:i}if(i=bound01(i,360),o=bound01(o,100),s=bound01(s,100),0===o)x=_=F=s;else{var N=s<.5?s*(1+o):s+o-s*o,j=2*s-N;x=hue2rgb(j,N,i+1/3),_=hue2rgb(j,N,i),F=hue2rgb(j,N,i-1/3)}return{r:255*x,g:255*_,b:255*F}}(s.h,N,et),en=!0,eo="hsl"),s.hasOwnProperty("a")&&(F=s.a)),F=boundAlpha(F),{ok:en,format:s.format||eo,r:$(255,ee(x.r,0)),g:$(255,ee(x.g,0)),b:$(255,ee(x.b,0)),a:F});this._originalInput=i,this._r=ex.r,this._g=ex.g,this._b=ex.b,this._a=ex.a,this._roundA=J(100*this._a)/100,this._format=o.format||ex.format,this._gradientType=o.gradientType,this._r<1&&(this._r=J(this._r)),this._g<1&&(this._g=J(this._g)),this._b<1&&(this._b=J(this._b)),this._ok=ex.ok,this._tc_id=X++}function rgbToHsl(i,o,s){var x,_,F=ee(i=bound01(i,255),o=bound01(o,255),s=bound01(s,255)),N=$(i,o,s),j=(F+N)/2;if(F==N)x=_=0;else{var G=F-N;switch(_=j>.5?G/(2-F-N):G/(F+N),F){case i:x=(o-s)/G+(o<s?6:0);break;case o:x=(s-i)/G+2;break;case s:x=(i-o)/G+4}x/=6}return{h:x,s:_,l:j}}function rgbToHsv(i,o,s){var x,_=ee(i=bound01(i,255),o=bound01(o,255),s=bound01(s,255)),F=$(i,o,s),N=_-F;if(_==F)x=0;else{switch(_){case i:x=(o-s)/N+(o<s?6:0);break;case o:x=(s-i)/N+2;break;case s:x=(i-o)/N+4}x/=6}return{h:x,s:0===_?0:N/_,v:_}}function rgbToHex(i,o,s,x){var _=[pad2(J(i).toString(16)),pad2(J(o).toString(16)),pad2(J(s).toString(16))];return x&&_[0].charAt(0)==_[0].charAt(1)&&_[1].charAt(0)==_[1].charAt(1)&&_[2].charAt(0)==_[2].charAt(1)?_[0].charAt(0)+_[1].charAt(0)+_[2].charAt(0):_.join("")}function rgbaToArgbHex(i,o,s,x){return[pad2(convertDecimalToHex(x)),pad2(J(i).toString(16)),pad2(J(o).toString(16)),pad2(J(s).toString(16))].join("")}function desaturate(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.s-=o/100,s.s=clamp01(s.s),tinycolor(s)}function saturate(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.s+=o/100,s.s=clamp01(s.s),tinycolor(s)}function greyscale(i){return tinycolor(i).desaturate(100)}function lighten(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.l+=o/100,s.l=clamp01(s.l),tinycolor(s)}function brighten(i,o){o=0===o?0:o||10;var s=tinycolor(i).toRgb();return s.r=ee(0,$(255,s.r-J(-(255*(o/100))))),s.g=ee(0,$(255,s.g-J(-(255*(o/100))))),s.b=ee(0,$(255,s.b-J(-(255*(o/100))))),tinycolor(s)}function darken(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.l-=o/100,s.l=clamp01(s.l),tinycolor(s)}function spin(i,o){var s=tinycolor(i).toHsl(),x=(s.h+o)%360;return s.h=x<0?360+x:x,tinycolor(s)}function complement(i){var o=tinycolor(i).toHsl();return o.h=(o.h+180)%360,tinycolor(o)}function triad(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+120)%360,s:o.s,l:o.l}),tinycolor({h:(s+240)%360,s:o.s,l:o.l})]}function tetrad(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+90)%360,s:o.s,l:o.l}),tinycolor({h:(s+180)%360,s:o.s,l:o.l}),tinycolor({h:(s+270)%360,s:o.s,l:o.l})]}function splitcomplement(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+72)%360,s:o.s,l:o.l}),tinycolor({h:(s+216)%360,s:o.s,l:o.l})]}function analogous(i,o,s){o=o||6,s=s||30;var x=tinycolor(i).toHsl(),_=360/s,F=[tinycolor(i)];for(x.h=(x.h-(_*o>>1)+720)%360;--o;)x.h=(x.h+_)%360,F.push(tinycolor(x));return F}function monochromatic(i,o){o=o||6;for(var s=tinycolor(i).toHsv(),x=s.h,_=s.s,F=s.v,N=[],j=1/o;o--;)N.push(tinycolor({h:x,s:_,v:F})),F=(F+j)%1;return N}tinycolor.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var i=this.toRgb();return(299*i.r+587*i.g+114*i.b)/1e3},getLuminance:function(){var i,o,s,x=this.toRgb();return i=x.r/255,o=x.g/255,s=x.b/255,.2126*(i<=.03928?i/12.92:_.pow((i+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:_.pow((o+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:_.pow((s+.055)/1.055,2.4))},setAlpha:function(i){return this._a=boundAlpha(i),this._roundA=J(100*this._a)/100,this},toHsv:function(){var i=rgbToHsv(this._r,this._g,this._b);return{h:360*i.h,s:i.s,v:i.v,a:this._a}},toHsvString:function(){var i=rgbToHsv(this._r,this._g,this._b),o=J(360*i.h),s=J(100*i.s),x=J(100*i.v);return 1==this._a?"hsv("+o+", "+s+"%, "+x+"%)":"hsva("+o+", "+s+"%, "+x+"%, "+this._roundA+")"},toHsl:function(){var i=rgbToHsl(this._r,this._g,this._b);return{h:360*i.h,s:i.s,l:i.l,a:this._a}},toHslString:function(){var i=rgbToHsl(this._r,this._g,this._b),o=J(360*i.h),s=J(100*i.s),x=J(100*i.l);return 1==this._a?"hsl("+o+", "+s+"%, "+x+"%)":"hsla("+o+", "+s+"%, "+x+"%, "+this._roundA+")"},toHex:function(i){return rgbToHex(this._r,this._g,this._b,i)},toHexString:function(i){return"#"+this.toHex(i)},toHex8:function(i){var o,s,x,_,F;return o=this._r,s=this._g,x=this._b,_=this._a,F=[pad2(J(o).toString(16)),pad2(J(s).toString(16)),pad2(J(x).toString(16)),pad2(convertDecimalToHex(_))],i&&F[0].charAt(0)==F[0].charAt(1)&&F[1].charAt(0)==F[1].charAt(1)&&F[2].charAt(0)==F[2].charAt(1)&&F[3].charAt(0)==F[3].charAt(1)?F[0].charAt(0)+F[1].charAt(0)+F[2].charAt(0)+F[3].charAt(0):F.join("")},toHex8String:function(i){return"#"+this.toHex8(i)},toRgb:function(){return{r:J(this._r),g:J(this._g),b:J(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+J(this._r)+", "+J(this._g)+", "+J(this._b)+")":"rgba("+J(this._r)+", "+J(this._g)+", "+J(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:J(100*bound01(this._r,255))+"%",g:J(100*bound01(this._g,255))+"%",b:J(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+J(100*bound01(this._r,255))+"%, "+J(100*bound01(this._g,255))+"%, "+J(100*bound01(this._b,255))+"%)":"rgba("+J(100*bound01(this._r,255))+"%, "+J(100*bound01(this._g,255))+"%, "+J(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(en[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(i){var o="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),s=o,x=this._gradientType?"GradientType = 1, ":"";if(i){var _=tinycolor(i);s="#"+rgbaToArgbHex(_._r,_._g,_._b,_._a)}return"progid:DXImageTransform.Microsoft.gradient("+x+"startColorstr="+o+",endColorstr="+s+")"},toString:function(i){var o=!!i;i=i||this._format;var s=!1,x=this._a<1&&this._a>=0;return!o&&x&&("hex"===i||"hex6"===i||"hex3"===i||"hex4"===i||"hex8"===i||"name"===i)?"name"===i&&0===this._a?this.toName():this.toRgbString():("rgb"===i&&(s=this.toRgbString()),"prgb"===i&&(s=this.toPercentageRgbString()),("hex"===i||"hex6"===i)&&(s=this.toHexString()),"hex3"===i&&(s=this.toHexString(!0)),"hex4"===i&&(s=this.toHex8String(!0)),"hex8"===i&&(s=this.toHex8String()),"name"===i&&(s=this.toName()),"hsl"===i&&(s=this.toHslString()),"hsv"===i&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return tinycolor(this.toString())},_applyModification:function(i,o){var s=i.apply(null,[this].concat([].slice.call(o)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(i,o){return i.apply(null,[this].concat([].slice.call(o)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(i,o){if("object"==typeof i){var s={};for(var x in i)i.hasOwnProperty(x)&&("a"===x?s[x]=i[x]:s[x]=convertToPercentage(i[x]));i=s}return tinycolor(i,o)},tinycolor.equals=function(i,o){return!!i&&!!o&&tinycolor(i).toRgbString()==tinycolor(o).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:et(),g:et(),b:et()})},tinycolor.mix=function(i,o,s){s=0===s?0:s||50;var x=tinycolor(i).toRgb(),_=tinycolor(o).toRgb(),F=s/100;return tinycolor({r:(_.r-x.r)*F+x.r,g:(_.g-x.g)*F+x.g,b:(_.b-x.b)*F+x.b,a:(_.a-x.a)*F+x.a})},tinycolor.readability=function(i,o){var s=tinycolor(i),x=tinycolor(o);return(_.max(s.getLuminance(),x.getLuminance())+.05)/(_.min(s.getLuminance(),x.getLuminance())+.05)},tinycolor.isReadable=function(i,o,s){var x,_,F,N,j,G=tinycolor.readability(i,o);switch(j=!1,(_=((x=(x=s)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),F=(x.size||"small").toLowerCase(),"AA"!==_&&"AAA"!==_&&(_="AA"),"small"!==F&&"large"!==F&&(F="small"),N={level:_,size:F}).level+N.size){case"AAsmall":case"AAAlarge":j=G>=4.5;break;case"AAlarge":j=G>=3;break;case"AAAsmall":j=G>=7}return j},tinycolor.mostReadable=function(i,o,s){var x,_,F,N,j=null,G=0;_=(s=s||{}).includeFallbackColors,F=s.level,N=s.size;for(var Z=0;Z<o.length;Z++)(x=tinycolor.readability(i,o[Z]))>G&&(G=x,j=tinycolor(o[Z]));return tinycolor.isReadable(i,j,{level:F,size:N})||!_?j:(s.includeFallbackColors=!1,tinycolor.mostReadable(i,["#fff","#000"],s))};var er=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},en=tinycolor.hexNames=function(i){var o={};for(var s in i)i.hasOwnProperty(s)&&(o[i[s]]=s);return o}(er);function boundAlpha(i){return(isNaN(i=parseFloat(i))||i<0||i>1)&&(i=1),i}function bound01(i,o){"string"==typeof(s=i)&&-1!=s.indexOf(".")&&1===parseFloat(s)&&(i="100%");var s,x,F="string"==typeof(x=i)&&-1!=x.indexOf("%");return(i=$(o,ee(0,parseFloat(i))),F&&(i=parseInt(i*o,10)/100),1e-6>_.abs(i-o))?1:i%o/parseFloat(o)}function clamp01(i){return $(1,ee(0,i))}function parseIntFromHex(i){return parseInt(i,16)}function pad2(i){return 1==i.length?"0"+i:""+i}function convertToPercentage(i){return i<=1&&(i=100*i+"%"),i}function convertDecimalToHex(i){return _.round(255*parseFloat(i)).toString(16)}var ei=(N="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",j="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{CSS_UNIT:new RegExp(F),rgb:RegExp("rgb"+N),rgba:RegExp("rgba"+j),hsl:RegExp("hsl"+N),hsla:RegExp("hsla"+j),hsv:RegExp("hsv"+N),hsva:RegExp("hsva"+j),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function isValidCSSUnit(i){return!!ei.CSS_UNIT.exec(i)}i.exports?i.exports=tinycolor:void 0!==(x=(function(){return tinycolor}).call(o,s,o,i))&&(i.exports=x)}(Math)},57060:function(i){"use strict";i.exports=float32,i.exports.float32=i.exports.float=float32,i.exports.fract32=i.exports.fract=function(i,o){if(i.length){if(i instanceof Float32Array)return new Float32Array(i.length);o instanceof Float32Array||(o=float32(i));for(var s=0,x=o.length;s<x;s++)o[s]=i[s]-o[s];return o}return float32(i-float32(i))};var o=new Float32Array(1);function float32(i){return i.length?i instanceof Float32Array?i:new Float32Array(i):(o[0]=i,o[0])}},75686:function(i,o,s){"use strict";var x=s(25677);function getPropertyInPX(i,o){var s=x(getComputedStyle(i).getPropertyValue(o));return s[0]*toPX(s[1],i)}function toPX(i,o){switch(o=o||document.body,i=(i||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),i){case"%":return o.clientHeight/100;case"ch":case"ex":var s,x,_,F;return s=i,x=o,(_=document.createElement("div")).style["font-size"]="128"+s,x.appendChild(_),F=getPropertyInPX(_,"font-size")/128,x.removeChild(_),F;case"em":return getPropertyInPX(o,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}i.exports=toPX},96892:function(i,o,s){"use strict";function identity(i){return i}function feature(i,o){return"string"==typeof o&&(o=i.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map(function(o){return feature_feature(i,o)})}:feature_feature(i,o)}function feature_feature(i,o){var s=o.id,x=o.bbox,_=null==o.properties?{}:o.properties,F=function(i,o){var s=function(i){if(null==i)return identity;var o,s,x=i.scale[0],_=i.scale[1],F=i.translate[0],N=i.translate[1];return function(i,j){j||(o=s=0);var G=2,Z=i.length,X=Array(Z);for(X[0]=(o+=i[0])*x+F,X[1]=(s+=i[1])*_+N;G<Z;)X[G]=i[G],++G;return X}}(i.transform),x=i.arcs;function point(i){return s(i)}function line(i){for(var o=[],_=0,F=i.length;_<F;++_)!function(i,o){o.length&&o.pop();for(var _=x[i<0?~i:i],F=0,N=_.length;F<N;++F)o.push(s(_[F],F));i<0&&function(i,o){for(var s,x=i.length,_=x-o;_<--x;)s=i[_],i[_++]=i[x],i[x]=s}(o,N)}(i[_],o);return o.length<2&&o.push(o[0]),o}function ring(i){for(var o=line(i);o.length<4;)o.push(o[0]);return o}function polygon(i){return i.map(ring)}return function geometry(i){var o,s=i.type;switch(s){case"GeometryCollection":return{type:s,geometries:i.geometries.map(geometry)};case"Point":o=point(i.coordinates);break;case"MultiPoint":o=i.coordinates.map(point);break;case"LineString":o=line(i.arcs);break;case"MultiLineString":o=i.arcs.map(line);break;case"Polygon":o=polygon(i.arcs);break;case"MultiPolygon":o=i.arcs.map(polygon);break;default:return null}return{type:s,coordinates:o}}(o)}(i,o);return null==s&&null==x?{type:"Feature",properties:_,geometry:F}:null==x?{type:"Feature",id:s,properties:_,geometry:F}:{type:"Feature",id:s,bbox:x,properties:_,geometry:F}}s.d(o,{zL:function(){return feature}})},73116:function(i,o,s){"use strict";var x=s(24511);i.exports=function(i){if("function"!=typeof i||!hasOwnProperty.call(i,"length"))return!1;try{if("number"!=typeof i.length||"function"!=typeof i.call||"function"!=typeof i.apply)return!1}catch(i){return!1}return!x(i)}},69190:function(i,o,s){"use strict";var x=s(24582),_=s(47403),F=s(9234),N=s(6048),resolveMessage=function(i,o){return i.replace("%v",N(o))};i.exports=function(i,o,s){if(!_(s))throw TypeError(resolveMessage(o,i));if(!x(i)){if("default"in s)return s.default;if(s.isOptional)return null}var N=F(s.errorMessage);throw x(N)||(N=o),TypeError(resolveMessage(N,i))}},18497:function(i){"use strict";i.exports=function(i){try{return i.toString()}catch(o){try{return String(i)}catch(i){return null}}}},6048:function(i,o,s){"use strict";var x=s(18497),_=/[\n\r\u2028\u2029]/g;i.exports=function(i){var o=x(i);return null===o?"<Non-coercible to string value>":(o.length>100&&(o=o.slice(0,99)+""),o=o.replace(_,function(i){switch(i){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},47403:function(i,o,s){"use strict";var x=s(24582),_={object:!0,function:!0,undefined:!0};i.exports=function(i){return!!x(i)&&hasOwnProperty.call(_,typeof i)}},82527:function(i,o,s){"use strict";var x=s(69190),_=s(84985);i.exports=function(i){return _(i)?i:x(i,"%v is not a plain function",arguments[1])}},84985:function(i,o,s){"use strict";var x=s(73116),_=/^\s*class[\s{/}]/,F=Function.prototype.toString;i.exports=function(i){return!(!x(i)||_.test(F.call(i)))}},24511:function(i,o,s){"use strict";var x=s(47403);i.exports=function(i){if(!x(i))return!1;try{if(!i.constructor)return!1;return i.constructor.prototype===i}catch(i){return!1}}},9234:function(i,o,s){"use strict";var x=s(24582),_=s(47403),F=Object.prototype.toString;i.exports=function(i){if(!x(i))return null;if(_(i)){var o=i.toString;if("function"!=typeof o||o===F)return null}try{return""+i}catch(i){return null}}},10424:function(i,o,s){"use strict";var x=s(69190),_=s(24582);i.exports=function(i){return _(i)?i:x(i,"Cannot use %v",arguments[1])}},24582:function(i){"use strict";var o=void 0;i.exports=function(i){return i!==o&&null!==i}},58404:function(i,o,s){"use strict";var x=s(13547),_=s(12129),F=s(12856).Buffer;s.g.__TYPEDARRAY_POOL||(s.g.__TYPEDARRAY_POOL={UINT8:_([32,0]),UINT16:_([32,0]),UINT32:_([32,0]),BIGUINT64:_([32,0]),INT8:_([32,0]),INT16:_([32,0]),INT32:_([32,0]),BIGINT64:_([32,0]),FLOAT:_([32,0]),DOUBLE:_([32,0]),DATA:_([32,0]),UINT8C:_([32,0]),BUFFER:_([32,0])});var N="undefined"!=typeof Uint8ClampedArray,j="undefined"!=typeof BigUint64Array,G="undefined"!=typeof BigInt64Array,Z=s.g.__TYPEDARRAY_POOL;Z.UINT8C||(Z.UINT8C=_([32,0])),Z.BIGUINT64||(Z.BIGUINT64=_([32,0])),Z.BIGINT64||(Z.BIGINT64=_([32,0])),Z.BUFFER||(Z.BUFFER=_([32,0]));var X=Z.DATA,J=Z.BUFFER;function freeArrayBuffer(i){if(i){var o=i.length||i.byteLength;X[x.log2(o)].push(i)}}function mallocArrayBuffer(i){var i=x.nextPow2(i),o=X[x.log2(i)];return o.length>0?o.pop():new ArrayBuffer(i)}function mallocUint8(i){return new Uint8Array(mallocArrayBuffer(i),0,i)}function mallocUint16(i){return new Uint16Array(mallocArrayBuffer(2*i),0,i)}function mallocUint32(i){return new Uint32Array(mallocArrayBuffer(4*i),0,i)}function mallocInt8(i){return new Int8Array(mallocArrayBuffer(i),0,i)}function mallocInt16(i){return new Int16Array(mallocArrayBuffer(2*i),0,i)}function mallocInt32(i){return new Int32Array(mallocArrayBuffer(4*i),0,i)}function mallocFloat(i){return new Float32Array(mallocArrayBuffer(4*i),0,i)}function mallocDouble(i){return new Float64Array(mallocArrayBuffer(8*i),0,i)}function mallocUint8Clamped(i){return N?new Uint8ClampedArray(mallocArrayBuffer(i),0,i):mallocUint8(i)}function mallocBigUint64(i){return j?new BigUint64Array(mallocArrayBuffer(8*i),0,i):null}function mallocBigInt64(i){return G?new BigInt64Array(mallocArrayBuffer(8*i),0,i):null}function mallocDataView(i){return new DataView(mallocArrayBuffer(i),0,i)}function mallocBuffer(i){i=x.nextPow2(i);var o=J[x.log2(i)];return o.length>0?o.pop():new F(i)}o.free=function(i){if(F.isBuffer(i))J[x.log2(i.length)].push(i);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(i)&&(i=i.buffer),!i)return;var o=i.length||i.byteLength;X[0|x.log2(o)].push(i)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(i){freeArrayBuffer(i.buffer)},o.freeArrayBuffer=freeArrayBuffer,o.freeBuffer=function(i){J[x.log2(i.length)].push(i)},o.malloc=function(i,o){if(void 0===o||"arraybuffer"===o)return mallocArrayBuffer(i);switch(o){case"uint8":return mallocUint8(i);case"uint16":return mallocUint16(i);case"uint32":return mallocUint32(i);case"int8":return mallocInt8(i);case"int16":return mallocInt16(i);case"int32":return mallocInt32(i);case"float":case"float32":return mallocFloat(i);case"double":case"float64":return mallocDouble(i);case"uint8_clamped":return mallocUint8Clamped(i);case"bigint64":return mallocBigInt64(i);case"biguint64":return mallocBigUint64(i);case"buffer":return mallocBuffer(i);case"data":case"dataview":return mallocDataView(i)}return null},o.mallocArrayBuffer=mallocArrayBuffer,o.mallocUint8=mallocUint8,o.mallocUint16=mallocUint16,o.mallocUint32=mallocUint32,o.mallocInt8=mallocInt8,o.mallocInt16=mallocInt16,o.mallocInt32=mallocInt32,o.mallocFloat32=o.mallocFloat=mallocFloat,o.mallocFloat64=o.mallocDouble=mallocDouble,o.mallocUint8Clamped=mallocUint8Clamped,o.mallocBigUint64=mallocBigUint64,o.mallocBigInt64=mallocBigInt64,o.mallocDataView=mallocDataView,o.mallocBuffer=mallocBuffer,o.clearCache=function(){for(var i=0;i<32;++i)Z.UINT8[i].length=0,Z.UINT16[i].length=0,Z.UINT32[i].length=0,Z.INT8[i].length=0,Z.INT16[i].length=0,Z.INT32[i].length=0,Z.FLOAT[i].length=0,Z.DOUBLE[i].length=0,Z.BIGUINT64[i].length=0,Z.BIGINT64[i].length=0,Z.UINT8C[i].length=0,X[i].length=0,J[i].length=0}},90448:function(i){var o=/[\'\"]/;i.exports=function(i){return i?(o.test(i.charAt(0))&&(i=i.substr(1)),o.test(i.charAt(i.length-1))&&(i=i.substr(0,i.length-1)),i):""}},93447:function(i){"use strict";i.exports=function(i,o,s){Array.isArray(s)||(s=[].slice.call(arguments,2));for(var x=0,_=s.length;x<_;x++){var F,N=s[x];for(var j in N)if((void 0===o[j]||Array.isArray(o[j])||i[j]!==o[j])&&j in o){if(!0===N[j])F=o[j];else if(!1===N[j])continue;else if("function"==typeof N[j]&&void 0===(F=N[j](o[j],i,o)))continue;i[j]=F}}return i}},20588:function(i,o,s){i.exports=function(i,o){if(config("noDeprecation"))return i;var s=!1;return function(){if(!s){if(config("throwDeprecation"))throw Error(o);config("traceDeprecation")?console.trace(o):console.warn(o),s=!0}return i.apply(this,arguments)}};function config(i){try{if(!s.g.localStorage)return!1}catch(i){return!1}var o=s.g.localStorage[i];return null!=o&&"true"===String(o).toLowerCase()}},45920:function(i){i.exports=function(i){return i&&"object"==typeof i&&"function"==typeof i.copy&&"function"==typeof i.fill&&"function"==typeof i.readUInt8}},4936:function(i,o,s){"use strict";var x=s(47216),_=s(65481),F=s(21099),N=s(9187);function uncurryThis(i){return i.call.bind(i)}var j="undefined"!=typeof BigInt,G="undefined"!=typeof Symbol,Z=uncurryThis(Object.prototype.toString),X=uncurryThis(Number.prototype.valueOf),J=uncurryThis(String.prototype.valueOf),$=uncurryThis(Boolean.prototype.valueOf);if(j)var ee=uncurryThis(BigInt.prototype.valueOf);if(G)var et=uncurryThis(Symbol.prototype.valueOf);function checkBoxedPrimitive(i,o){if("object"!=typeof i)return!1;try{return o(i),!0}catch(i){return!1}}function isMapToString(i){return"[object Map]"===Z(i)}function isSetToString(i){return"[object Set]"===Z(i)}function isWeakMapToString(i){return"[object WeakMap]"===Z(i)}function isWeakSetToString(i){return"[object WeakSet]"===Z(i)}function isArrayBufferToString(i){return"[object ArrayBuffer]"===Z(i)}function isArrayBuffer(i){return"undefined"!=typeof ArrayBuffer&&(isArrayBufferToString.working?isArrayBufferToString(i):i instanceof ArrayBuffer)}function isDataViewToString(i){return"[object DataView]"===Z(i)}function isDataView(i){return"undefined"!=typeof DataView&&(isDataViewToString.working?isDataViewToString(i):i instanceof DataView)}o.isArgumentsObject=x,o.isGeneratorFunction=_,o.isTypedArray=N,o.isPromise=function(i){return"undefined"!=typeof Promise&&i instanceof Promise||null!==i&&"object"==typeof i&&"function"==typeof i.then&&"function"==typeof i.catch},o.isArrayBufferView=function(i){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(i):N(i)||isDataView(i)},o.isUint8Array=function(i){return"Uint8Array"===F(i)},o.isUint8ClampedArray=function(i){return"Uint8ClampedArray"===F(i)},o.isUint16Array=function(i){return"Uint16Array"===F(i)},o.isUint32Array=function(i){return"Uint32Array"===F(i)},o.isInt8Array=function(i){return"Int8Array"===F(i)},o.isInt16Array=function(i){return"Int16Array"===F(i)},o.isInt32Array=function(i){return"Int32Array"===F(i)},o.isFloat32Array=function(i){return"Float32Array"===F(i)},o.isFloat64Array=function(i){return"Float64Array"===F(i)},o.isBigInt64Array=function(i){return"BigInt64Array"===F(i)},o.isBigUint64Array=function(i){return"BigUint64Array"===F(i)},isMapToString.working="undefined"!=typeof Map&&isMapToString(new Map),o.isMap=function(i){return"undefined"!=typeof Map&&(isMapToString.working?isMapToString(i):i instanceof Map)},isSetToString.working="undefined"!=typeof Set&&isSetToString(new Set),o.isSet=function(i){return"undefined"!=typeof Set&&(isSetToString.working?isSetToString(i):i instanceof Set)},isWeakMapToString.working="undefined"!=typeof WeakMap&&isWeakMapToString(new WeakMap),o.isWeakMap=function(i){return"undefined"!=typeof WeakMap&&(isWeakMapToString.working?isWeakMapToString(i):i instanceof WeakMap)},isWeakSetToString.working="undefined"!=typeof WeakSet&&isWeakSetToString(new WeakSet),o.isWeakSet=function(i){return isWeakSetToString(i)},isArrayBufferToString.working="undefined"!=typeof ArrayBuffer&&isArrayBufferToString(new ArrayBuffer),o.isArrayBuffer=isArrayBuffer,isDataViewToString.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1)),o.isDataView=isDataView;var er="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function isSharedArrayBufferToString(i){return"[object SharedArrayBuffer]"===Z(i)}function isSharedArrayBuffer(i){return void 0!==er&&(void 0===isSharedArrayBufferToString.working&&(isSharedArrayBufferToString.working=isSharedArrayBufferToString(new er)),isSharedArrayBufferToString.working?isSharedArrayBufferToString(i):i instanceof er)}function isNumberObject(i){return checkBoxedPrimitive(i,X)}function isStringObject(i){return checkBoxedPrimitive(i,J)}function isBooleanObject(i){return checkBoxedPrimitive(i,$)}function isBigIntObject(i){return j&&checkBoxedPrimitive(i,ee)}function isSymbolObject(i){return G&&checkBoxedPrimitive(i,et)}o.isSharedArrayBuffer=isSharedArrayBuffer,o.isAsyncFunction=function(i){return"[object AsyncFunction]"===Z(i)},o.isMapIterator=function(i){return"[object Map Iterator]"===Z(i)},o.isSetIterator=function(i){return"[object Set Iterator]"===Z(i)},o.isGeneratorObject=function(i){return"[object Generator]"===Z(i)},o.isWebAssemblyCompiledModule=function(i){return"[object WebAssembly.Module]"===Z(i)},o.isNumberObject=isNumberObject,o.isStringObject=isStringObject,o.isBooleanObject=isBooleanObject,o.isBigIntObject=isBigIntObject,o.isSymbolObject=isSymbolObject,o.isBoxedPrimitive=function(i){return isNumberObject(i)||isStringObject(i)||isBooleanObject(i)||isBigIntObject(i)||isSymbolObject(i)},o.isAnyArrayBuffer=function(i){return"undefined"!=typeof Uint8Array&&(isArrayBuffer(i)||isSharedArrayBuffer(i))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(i){Object.defineProperty(o,i,{enumerable:!1,value:function(){throw Error(i+" is not supported in userland")}})})},43827:function(i,o,s){var x=s(90386),_=Object.getOwnPropertyDescriptors||function(i){for(var o=Object.keys(i),s={},x=0;x<o.length;x++)s[o[x]]=Object.getOwnPropertyDescriptor(i,o[x]);return s},F=/%[sdj%]/g;o.format=function(i){if(!isString(i)){for(var o=[],s=0;s<arguments.length;s++)o.push(inspect(arguments[s]));return o.join(" ")}for(var s=1,x=arguments,_=x.length,N=String(i).replace(F,function(i){if("%%"===i)return"%";if(s>=_)return i;switch(i){case"%s":return String(x[s++]);case"%d":return Number(x[s++]);case"%j":try{return JSON.stringify(x[s++])}catch(i){return"[Circular]"}default:return i}}),j=x[s];s<_;j=x[++s])isNull(j)||!isObject(j)?N+=" "+j:N+=" "+inspect(j);return N},o.deprecate=function(i,s){if(void 0!==x&&!0===x.noDeprecation)return i;if(void 0===x)return function(){return o.deprecate(i,s).apply(this,arguments)};var _=!1;return function(){if(!_){if(x.throwDeprecation)throw Error(s);x.traceDeprecation?console.trace(s):console.error(s),_=!0}return i.apply(this,arguments)}};var N={},j=/^$/;if(x.env.NODE_DEBUG){var G=x.env.NODE_DEBUG;j=RegExp("^"+(G=G.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function inspect(i,s){var x={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(x.depth=arguments[2]),arguments.length>=4&&(x.colors=arguments[3]),isBoolean(s)?x.showHidden=s:s&&o._extend(x,s),isUndefined(x.showHidden)&&(x.showHidden=!1),isUndefined(x.depth)&&(x.depth=2),isUndefined(x.colors)&&(x.colors=!1),isUndefined(x.customInspect)&&(x.customInspect=!0),x.colors&&(x.stylize=stylizeWithColor),formatValue(x,i,x.depth)}function stylizeWithColor(i,o){var s=inspect.styles[o];return s?"\x1b["+inspect.colors[s][0]+"m"+i+"\x1b["+inspect.colors[s][1]+"m":i}function stylizeNoColor(i,o){return i}function formatValue(i,s,x){if(i.customInspect&&s&&isFunction(s.inspect)&&s.inspect!==o.inspect&&!(s.constructor&&s.constructor.prototype===s)){var _,F,N,j,G,Z=s.inspect(x,i);return isString(Z)||(Z=formatValue(i,Z,x)),Z}var X=function(i,o){if(isUndefined(o))return i.stylize("undefined","undefined");if(isString(o)){var s="'"+JSON.stringify(o).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return i.stylize(s,"string")}return isNumber(o)?i.stylize(""+o,"number"):isBoolean(o)?i.stylize(""+o,"boolean"):isNull(o)?i.stylize("null","null"):void 0}(i,s);if(X)return X;var J=Object.keys(s),$=(j={},J.forEach(function(i,o){j[i]=!0}),j);if(i.showHidden&&(J=Object.getOwnPropertyNames(s)),isError(s)&&(J.indexOf("message")>=0||J.indexOf("description")>=0))return formatError(s);if(0===J.length){if(isFunction(s)){var ee=s.name?": "+s.name:"";return i.stylize("[Function"+ee+"]","special")}if(isRegExp(s))return i.stylize(RegExp.prototype.toString.call(s),"regexp");if(isDate(s))return i.stylize(Date.prototype.toString.call(s),"date");if(isError(s))return formatError(s)}var et="",er=!1,en=["{","}"];return(isArray(s)&&(er=!0,en=["[","]"]),isFunction(s)&&(et=" [Function"+(s.name?": "+s.name:"")+"]"),isRegExp(s)&&(et=" "+RegExp.prototype.toString.call(s)),isDate(s)&&(et=" "+Date.prototype.toUTCString.call(s)),isError(s)&&(et=" "+formatError(s)),0!==J.length||er&&0!=s.length)?x<0?isRegExp(s)?i.stylize(RegExp.prototype.toString.call(s),"regexp"):i.stylize("[Object]","special"):(i.seen.push(s),G=er?function(i,o,s,x,_){for(var F=[],N=0,j=o.length;N<j;++N)hasOwnProperty(o,String(N))?F.push(formatProperty(i,o,s,x,String(N),!0)):F.push("");return _.forEach(function(_){_.match(/^\d+$/)||F.push(formatProperty(i,o,s,x,_,!0))}),F}(i,s,x,$,J):J.map(function(o){return formatProperty(i,s,x,$,o,er)}),i.seen.pop(),_=et,F=en,N=0,G.reduce(function(i,o){return N++,o.indexOf("\n")>=0&&N++,i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?F[0]+(""===_?"":_+"\n ")+" "+G.join(",\n  ")+" "+F[1]:F[0]+_+" "+G.join(", ")+" "+F[1]):en[0]+et+en[1]}function formatError(i){return"["+Error.prototype.toString.call(i)+"]"}function formatProperty(i,o,s,x,_,F){var N,j,G;if((G=Object.getOwnPropertyDescriptor(o,_)||{value:o[_]}).get?j=G.set?i.stylize("[Getter/Setter]","special"):i.stylize("[Getter]","special"):G.set&&(j=i.stylize("[Setter]","special")),hasOwnProperty(x,_)||(N="["+_+"]"),!j&&(0>i.seen.indexOf(G.value)?(j=isNull(s)?formatValue(i,G.value,null):formatValue(i,G.value,s-1)).indexOf("\n")>-1&&(j=F?j.split("\n").map(function(i){return"  "+i}).join("\n").slice(2):"\n"+j.split("\n").map(function(i){return"   "+i}).join("\n")):j=i.stylize("[Circular]","special")),isUndefined(N)){if(F&&_.match(/^\d+$/))return j;(N=JSON.stringify(""+_)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(N=N.slice(1,-1),N=i.stylize(N,"name")):(N=N.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),N=i.stylize(N,"string"))}return N+": "+j}function isArray(i){return Array.isArray(i)}function isBoolean(i){return"boolean"==typeof i}function isNull(i){return null===i}function isNumber(i){return"number"==typeof i}function isString(i){return"string"==typeof i}function isUndefined(i){return void 0===i}function isRegExp(i){return isObject(i)&&"[object RegExp]"===objectToString(i)}function isObject(i){return"object"==typeof i&&null!==i}function isDate(i){return isObject(i)&&"[object Date]"===objectToString(i)}function isError(i){return isObject(i)&&("[object Error]"===objectToString(i)||i instanceof Error)}function isFunction(i){return"function"==typeof i}function objectToString(i){return Object.prototype.toString.call(i)}function pad(i){return i<10?"0"+i.toString(10):i.toString(10)}o.debuglog=function(i){if(!N[i=i.toUpperCase()]){if(j.test(i)){var s=x.pid;N[i]=function(){var x=o.format.apply(o,arguments);console.error("%s %d: %s",i,s,x)}}else N[i]=function(){}}return N[i]},o.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.types=s(4936),o.isArray=isArray,o.isBoolean=isBoolean,o.isNull=isNull,o.isNullOrUndefined=function(i){return null==i},o.isNumber=isNumber,o.isString=isString,o.isSymbol=function(i){return"symbol"==typeof i},o.isUndefined=isUndefined,o.isRegExp=isRegExp,o.types.isRegExp=isRegExp,o.isObject=isObject,o.isDate=isDate,o.types.isDate=isDate,o.isError=isError,o.types.isNativeError=isError,o.isFunction=isFunction,o.isPrimitive=function(i){return null===i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||"symbol"==typeof i||void 0===i},o.isBuffer=s(45920);var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function hasOwnProperty(i,o){return Object.prototype.hasOwnProperty.call(i,o)}o.log=function(){var i,s;console.log("%s - %s",(s=[pad((i=new Date).getHours()),pad(i.getMinutes()),pad(i.getSeconds())].join(":"),[i.getDate(),Z[i.getMonth()],s].join(" ")),o.format.apply(o,arguments))},o.inherits=s(42018),o._extend=function(i,o){if(!o||!isObject(o))return i;for(var s=Object.keys(o),x=s.length;x--;)i[s[x]]=o[s[x]];return i};var X="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(i,o){if(!i){var s=Error("Promise was rejected with a falsy value");s.reason=i,i=s}return o(i)}o.promisify=function(i){if("function"!=typeof i)throw TypeError('The "original" argument must be of type Function');if(X&&i[X]){var fn=i[X];if("function"!=typeof fn)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,X,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var o,s,x=new Promise(function(i,x){o=i,s=x}),_=[],F=0;F<arguments.length;F++)_.push(arguments[F]);_.push(function(i,x){i?s(i):o(x)});try{i.apply(this,_)}catch(i){s(i)}return x}return Object.setPrototypeOf(fn,Object.getPrototypeOf(i)),X&&Object.defineProperty(fn,X,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,_(i))},o.promisify.custom=X,o.callbackify=function(i){if("function"!=typeof i)throw TypeError('The "original" argument must be of type Function');function callbackified(){for(var o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);var _=o.pop();if("function"!=typeof _)throw TypeError("The last argument must be of type Function");var F=this,cb=function(){return _.apply(F,arguments)};i.apply(this,o).then(function(i){x.nextTick(cb.bind(null,null,i))},function(i){x.nextTick(callbackifyOnRejected.bind(null,i,cb))})}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(i)),Object.defineProperties(callbackified,_(i)),callbackified}},40372:function(i,o,s){var x=s(86249);i.exports=function(i){return x("webgl",i)}},21099:function(i,o,s){"use strict";var x=s(31353),_=s(72077),F=s(6614),N=s(40383),j=F("Object.prototype.toString"),G=s(84543)(),Z="undefined"==typeof globalThis?s.g:globalThis,X=_(),J=F("String.prototype.slice"),$={},ee=Object.getPrototypeOf;G&&N&&ee&&x(X,function(i){if("function"==typeof Z[i]){var o=new Z[i];if(Symbol.toStringTag in o){var s=ee(o),x=N(s,Symbol.toStringTag);x||(x=N(ee(s),Symbol.toStringTag)),$[i]=x.get}}});var tryTypedArrays=function(i){var o=!1;return x($,function(s,x){if(!o)try{var _=s.call(i);_===x&&(o=_)}catch(i){}}),o},et=s(9187);i.exports=function(i){return!!et(i)&&(G&&Symbol.toStringTag in i?tryTypedArrays(i):J(j(i),8,-1))}},3961:function(i,o,s){var x=s(63489),_=s(56131),F=x.instance();function ChineseCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}ChineseCalendar.prototype=new x.baseCalendar,_(ChineseCalendar.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(i,o){if("string"==typeof i){var s=i.match(j);return s?s[0]:""}var x=this._validateYear(i),_=i.month(),F=""+this.toChineseMonth(x,_);return o&&F.length<2&&(F="0"+F),this.isIntercalaryMonth(x,_)&&(F+="i"),F},monthNames:function(i){if("string"==typeof i){var o=i.match(G);return o?o[0]:""}var s=this._validateYear(i),x=i.month(),_=["","","","","","","","","","","",""][this.toChineseMonth(s,x)-1];return this.isIntercalaryMonth(s,x)&&(_=""+_),_},monthNamesShort:function(i){if("string"==typeof i){var o=i.match(Z);return o?o[0]:""}var s=this._validateYear(i),x=i.month(),_=["","","","","","","","","","","",""][this.toChineseMonth(s,x)-1];return this.isIntercalaryMonth(s,x)&&(_=""+_),_},parseMonth:function(i,o){i=this._validateYear(i);var s,x=parseInt(o);if(isNaN(x))""===o[0]&&(s=!0,o=o.substring(1)),""===o[o.length-1]&&(o=o.substring(0,o.length-1)),x=1+["","","","","","","","","","","",""].indexOf(o);else{var _=o[o.length-1];s="i"===_||"I"===_}return this.toMonthIndex(i,x,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(i,o){if(i.year&&(i=i.year()),"number"!=typeof i||i<1888||i>2111)throw o.replace(/\{0\}/,this.local.name);return i},toMonthIndex:function(i,o,s){var _=this.intercalaryMonth(i);if(s&&o!==_||o<1||o>12)throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);return _?!s&&o<=_?o-1:o:o-1},toChineseMonth:function(i,o){i.year&&(o=(i=i.year()).month());var s=this.intercalaryMonth(i);if(o<0||o>(s?12:11))throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?o<s?o+1:o:o+1},intercalaryMonth:function(i){return X[(i=this._validateYear(i))-X[0]]>>13},isIntercalaryMonth:function(i,o){i.year&&(o=(i=i.year()).month());var s=this.intercalaryMonth(i);return!!s&&s===o},leapYear:function(i){return 0!==this.intercalaryMonth(i)},weekOfYear:function(i,o,s){var _,N=J[this._validateYear(i,x.local.invalidyear)-J[0]];return(_=F.newDate(N>>9&4095,N>>5&15,31&N)).add(4-(_.dayOfWeek()||7),"d"),1+Math.floor((this.toJD(i,o,s)-_.toJD())/7)},monthsInYear:function(i){return this.leapYear(i)?13:12},daysInMonth:function(i,o){i.year&&(o=i.month(),i=i.year());var s=X[(i=this._validateYear(i))-X[0]];if(o>(s>>13?12:11))throw x.local.invalidMonth.replace(/\{0\}/,this.local.name);return s&1<<12-o?30:29},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,j,s,x.local.invalidDate);i=this._validateYear(_.year()),o=_.month(),s=_.day();var N=this.isIntercalaryMonth(i,o),j=this.toChineseMonth(i,o),G=function(i,o,s,x,_){if("object"==typeof i)G=i,j=o||{};else{var F,N,j,G,Z;if(!("number"==typeof i&&i>=1888&&i<=2111))throw Error("Lunar year outside range 1888-2111");if(!("number"==typeof o&&o>=1&&o<=12))throw Error("Lunar month outside range 1 - 12");if(!("number"==typeof s&&s>=1&&s<=30))throw Error("Lunar day outside range 1 - 30");"object"==typeof x?(Z=!1,j=x):(Z=!!x,j={}),G={year:i,month:o,day:s,isIntercalary:Z}}F=G.day-1;var $=X[G.year-X[0]],ee=$>>13;N=ee?G.month>ee?G.month:G.isIntercalary?G.month:G.month-1:G.month-1;for(var et=0;et<N;et++)F+=$&1<<12-et?30:29;var er=J[G.year-J[0]],en=new Date(er>>9&4095,(er>>5&15)-1,(31&er)+F);return j.year=en.getFullYear(),j.month=1+en.getMonth(),j.day=en.getDate(),j}(i,j,s,N);return F.toJD(G.year,G.month,G.day)},fromJD:function(i){var o=F.fromJD(i),s=function(i,o,s,x){if("object"==typeof i)_=i,F=o||{};else{var _,F,N,j;if(!("number"==typeof i&&i>=1888&&i<=2111))throw Error("Solar year outside range 1888-2111");if(!("number"==typeof o&&o>=1&&o<=12))throw Error("Solar month outside range 1 - 12");if(!("number"==typeof s&&s>=1&&s<=31))throw Error("Solar day outside range 1 - 31");_={year:i,month:o,day:s},F={}}var G=J[_.year-J[0]],Z=_.year<<9|_.month<<5|_.day;F.year=Z>=G?_.year:_.year-1;var $=(G=J[F.year-J[0]])>>9&4095,ee=G>>5&15,et=31&G,er=new Date($,ee-1,et);N=Math.round((new Date(_.year,_.month-1,_.day)-er)/864e5);var en=X[F.year-X[0]];for(j=0;j<13;j++){var ei=en&1<<12-j?30:29;if(N<ei)break;N-=ei}var eo=en>>13;return!eo||j<eo?(F.isIntercalary=!1,F.month=1+j):(j===eo?F.isIntercalary=!0:F.isIntercalary=!1,F.month=j),F.day=1+N,F}(o.year(),o.month(),o.day()),x=this.toMonthIndex(s.year,s.month,s.isIntercalary);return this.newDate(s.year,x,s.day)},fromString:function(i){var o=i.match(N),s=this._validateYear(+o[1]),x=+o[2],_=!!o[3],F=this.toMonthIndex(s,x,_),j=+o[4];return this.newDate(s,F,j)},add:function(i,o,s){var x=i.year(),_=i.month(),F=this.isIntercalaryMonth(x,_),N=this.toChineseMonth(x,_),j=Object.getPrototypeOf(ChineseCalendar.prototype).add.call(this,i,o,s);if("y"===s){var G=j.year(),Z=j.month(),X=this.isIntercalaryMonth(G,N),J=F&&X?this.toMonthIndex(G,N,!0):this.toMonthIndex(G,N,!1);J!==Z&&j.month(J)}return j}});var N=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,j=/^\d?\d[iI]?/m,G=/^??[]?/m,Z=/^??[]?/m;x.calendars.chinese=ChineseCalendar;var X=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],J=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(i,o,s){var x=s(63489),_=s(56131);function CopticCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}CopticCalendar.prototype=new x.baseCalendar,_(CopticCalendar.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==3||i%4==-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear),13},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(13===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return(i=_.year())<0&&i++,_.day()+(_.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor(i)+.5-this.jdEpoch,s=Math.floor((o-Math.floor((o+366)/1461))/365)+1;s<=0&&s--;var x=Math.floor((o=Math.floor(i)+.5-this.newDate(s,1,1).toJD())/30)+1,_=o-(x-1)*30+1;return this.newDate(s,x,_)}}),x.calendars.coptic=CopticCalendar},86825:function(i,o,s){var x=s(63489),_=s(56131);function DiscworldCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}DiscworldCalendar.prototype=new x.baseCalendar,_(DiscworldCalendar.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),!1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),13},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),400},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/8)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(i,o,s){return(this._validate(i,o,s,x.local.invalidDate).day()+1)%8},weekDay:function(i,o,s){var x=this.dayOfWeek(i,o,s);return x>=2&&x<=6},extraInfo:function(i,o,s){return{century:F[Math.floor((this._validate(i,o,s,x.local.invalidDate).year()-1)/100)+1]||""}},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return i=_.year()+(0>_.year()?1:0),o=_.month(),(s=_.day())+(o>1?16:0)+(o>2?(o-2)*32:0)+(i-1)*400+this.jdEpoch-1},fromJD:function(i){var o=Math.floor((i=Math.floor(i+.5)-Math.floor(this.jdEpoch)-1)/400)+1;i-=(o-1)*400;var s=Math.floor((i+=i>15?16:0)/32)+1,x=i-(s-1)*32+1;return this.newDate(o<=0?o-1:o,s,x)}});var F={20:"Fruitbat",21:"Anchovy"};x.calendars.discworld=DiscworldCalendar},37715:function(i,o,s){var x=s(63489),_=s(56131);function EthiopianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}EthiopianCalendar.prototype=new x.baseCalendar,_(EthiopianCalendar.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==3||i%4==-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear),13},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(13===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return(i=_.year())<0&&i++,_.day()+(_.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor(i)+.5-this.jdEpoch,s=Math.floor((o-Math.floor((o+366)/1461))/365)+1;s<=0&&s--;var x=Math.floor((o=Math.floor(i)+.5-this.newDate(s,1,1).toJD())/30)+1,_=o-(x-1)*30+1;return this.newDate(s,x,_)}}),x.calendars.ethiopian=EthiopianCalendar},99384:function(i,o,s){var x=s(63489),_=s(56131);function HebrewCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}HebrewCalendar.prototype=new x.baseCalendar,_(HebrewCalendar.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(i){return 7>mod(7*(i=i<0?i+1:i)+1,19)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),this._leapYear(i.year?i.year():i)?13:12},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(i){return i=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear).year(),this.toJD(-1===i?1:i+1,7,1)-this.toJD(i,7,1)},daysInMonth:function(i,o){return i.year&&(o=i.month(),i=i.year()),this._validate(i,o,this.minDay,x.local.invalidMonth),12===o&&this.leapYear(i)?30:8===o&&5===mod(this.daysInYear(i),10)?30:9===o&&3===mod(this.daysInYear(i),10)?29:this.daysPerMonth[o-1]},weekDay:function(i,o,s){return 6!==this.dayOfWeek(i,o,s)},extraInfo:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return{yearType:(this.leapYear(_)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(_)%10-3]}},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);i=_.year(),o=_.month(),s=_.day();var F=i<=0?i+1:i,N=this.jdEpoch+this._delay1(F)+this._delay2(F)+s+1;if(o<7){for(var j=7;j<=this.monthsInYear(i);j++)N+=this.daysInMonth(i,j);for(var j=1;j<o;j++)N+=this.daysInMonth(i,j)}else for(var j=7;j<o;j++)N+=this.daysInMonth(i,j);return N},_delay1:function(i){var o=Math.floor((235*i-234)/19),s=29*o+Math.floor((12084+13753*o)/25920);return 3>mod(3*(s+1),7)&&s++,s},_delay2:function(i){var o=this._delay1(i-1),s=this._delay1(i);return this._delay1(i+1)-s==356?2:s-o==382?1:0},fromJD:function(i){for(var o=Math.floor(((i=Math.floor(i)+.5)-this.jdEpoch)*98496/35975351)-1;i>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var s=i<this.toJD(o,1,1)?7:1;i>this.toJD(o,s,this.daysInMonth(o,s));)s++;var x=i-this.toJD(o,s,1)+1;return this.newDate(o,s,x)}}),x.calendars.hebrew=HebrewCalendar},43805:function(i,o,s){var x=s(63489),_=s(56131);function IslamicCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}IslamicCalendar.prototype=new x.baseCalendar,_(IslamicCalendar.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(i){return(11*this._validate(i,this.minMonth,this.minDay,x.local.invalidYear).year()+14)%30<11},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(i){return this.leapYear(i)?355:354},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return i=_.year(),o=_.month(),(s=_.day())+Math.ceil(29.5*(o-1))+((i=i<=0?i+1:i)-1)*354+Math.floor((3+11*i)/30)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor((30*((i=Math.floor(i)+.5)-this.jdEpoch)+10646)/10631);o=o<=0?o-1:o;var s=Math.min(12,Math.ceil((i-29-this.toJD(o,1,1))/29.5)+1),x=i-this.toJD(o,s,1)+1;return this.newDate(o,s,x)}}),x.calendars.islamic=IslamicCalendar},88874:function(i,o,s){var x=s(63489),_=s(56131);function JulianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}JulianCalendar.prototype=new x.baseCalendar,_(JulianCalendar.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=0>o.year()?o.year()+1:o.year();return i%4==0},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(4-(x.dayOfWeek()||7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return i=_.year(),o=_.month(),s=_.day(),i<0&&i++,o<=2&&(i--,o+=12),Math.floor(365.25*(i+4716))+Math.floor(30.6001*(o+1))+s-1524.5},fromJD:function(i){var o=Math.floor(i+.5)+1524,s=Math.floor((o-122.1)/365.25),x=Math.floor(365.25*s),_=Math.floor((o-x)/30.6001),F=_-Math.floor(_<14?1:13),N=s-Math.floor(F>2?4716:4715),j=o-x-Math.floor(30.6001*_);return N<=0&&N--,this.newDate(N,F,j)}}),x.calendars.julian=JulianCalendar},83290:function(i,o,s){var x=s(63489),_=s(56131);function MayanCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}MayanCalendar.prototype=new x.baseCalendar,_(MayanCalendar.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),!1},formatYear:function(i){var o=Math.floor((i=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear).year())/400);return i%=400,o+"."+Math.floor((i+=i<0?400:0)/20)+"."+i%20},forYear:function(i){if((i=i.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,s=0;s<i.length;s++){var x=parseInt(i[s],10);if(Math.abs(x)>19||s>0&&x<0)throw"Invalid Mayan year";o=20*o+x}return o},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),18},weekOfYear:function(i,o,s){return this._validate(i,o,s,x.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),360},daysInMonth:function(i,o){return this._validate(i,o,this.minDay,x.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,o,s){return this._validate(i,o,s,x.local.invalidDate).day()},weekDay:function(i,o,s){return this._validate(i,o,s,x.local.invalidDate),!0},extraInfo:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate).toJD(),F=this._toHaab(_),N=this._toTzolkin(_);return{haabMonthName:this.local.haabMonths[F[0]-1],haabMonth:F[0],haabDay:F[1],tzolkinDayName:this.local.tzolkinMonths[N[0]-1],tzolkinDay:N[0],tzolkinTrecena:N[1]}},_toHaab:function(i){var o=mod((i-=this.jdEpoch)+8+340,365);return[Math.floor(o/20)+1,mod(o,20)]},_toTzolkin:function(i){var o;return[mod((i-=this.jdEpoch)+20-1,20)+1,mod(i+4-1,13)+1]},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);return _.day()+20*_.month()+360*_.year()+this.jdEpoch},fromJD:function(i){var o=Math.floor((i=Math.floor(i)+.5-this.jdEpoch)/360);i%=360;var s=Math.floor((i+=i<0?360:0)/20),x=i%20;return this.newDate(o,s,x)}}),x.calendars.mayan=MayanCalendar},29108:function(i,o,s){var x=s(63489),_=s(56131);function NanakshahiCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}NanakshahiCalendar.prototype=new x.baseCalendar;var F=x.instance("gregorian");_(NanakshahiCalendar.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear||x.regionalOptions[""].invalidYear);return F.leapYear(o.year()+(1>o.year()?1:0)+1469)},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(1-(x.dayOfWeek()||7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidMonth),i=_.year();i<0&&i++;for(var N=_.day(),j=1;j<_.month();j++)N+=this.daysPerMonth[j-1];return N+F.toJD(i+1468,3,13)},fromJD:function(i){for(var o=Math.floor(((i=Math.floor(i+.5))-(this.jdEpoch-1))/366);i>=this.toJD(o+1,1,1);)o++;for(var s=i-Math.floor(this.toJD(o,1,1)+.5)+1,x=1;s>this.daysInMonth(o,x);)s-=this.daysInMonth(o,x),x++;return this.newDate(o,x,s)}}),x.calendars.nanakshahi=NanakshahiCalendar},55422:function(i,o,s){var x=s(63489),_=s(56131);function NepaliCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}NepaliCalendar.prototype=new x.baseCalendar,_(NepaliCalendar.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(i){return this.daysInYear(i)!==this.daysPerYear},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(i){if(i=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[i])return this.daysPerYear;for(var o=0,s=this.minMonth;s<=12;s++)o+=this.NEPALI_CALENDAR_DATA[i][s];return o},daysInMonth:function(i,o){return i.year&&(o=i.month(),i=i.year()),this._validate(i,o,this.minDay,x.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[i]?this.daysPerMonth[o-1]:this.NEPALI_CALENDAR_DATA[i][o]},weekDay:function(i,o,s){return 6!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);i=_.year(),o=_.month(),s=_.day();var F=x.instance(),N=0,j=o,G=i;this._createMissingCalendarData(i);var Z=i-(j>9||9===j&&s>=this.NEPALI_CALENDAR_DATA[G][0]?56:57);for(9!==o&&(N=s,j--);9!==j;)j<=0&&(j=12,G--),N+=this.NEPALI_CALENDAR_DATA[G][j],j--;return 9===o?(N+=s-this.NEPALI_CALENDAR_DATA[G][0])<0&&(N+=F.daysInYear(Z)):N+=this.NEPALI_CALENDAR_DATA[G][9]-this.NEPALI_CALENDAR_DATA[G][0],F.newDate(Z,1,1).add(N,"d").toJD()},fromJD:function(i){var o=x.instance().fromJD(i),s=o.year(),_=o.dayOfYear(),F=s+56;this._createMissingCalendarData(F);for(var N=9,j=this.NEPALI_CALENDAR_DATA[F][0],G=this.NEPALI_CALENDAR_DATA[F][N]-j+1;_>G;)++N>12&&(N=1,F++),G+=this.NEPALI_CALENDAR_DATA[F][N];var Z=this.NEPALI_CALENDAR_DATA[F][N]-(G-_);return this.newDate(F,N,Z)},_createMissingCalendarData:function(i){var o=this.daysPerMonth.slice(0);o.unshift(17);for(var s=i-1;s<i+2;s++)void 0===this.NEPALI_CALENDAR_DATA[s]&&(this.NEPALI_CALENDAR_DATA[s]=o)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),x.calendars.nepali=NepaliCalendar},94320:function(i,o,s){var x=s(63489),_=s(56131);function PersianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}PersianCalendar.prototype=new x.baseCalendar,_(PersianCalendar.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear);return((o.year()-(o.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-((x.dayOfWeek()+1)%7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate);i=_.year(),o=_.month(),s=_.day();var F=i-(i>=0?474:473),N=474+mod(F,2820);return s+(o<=7?(o-1)*31:(o-1)*30+6)+Math.floor((682*N-110)/2816)+(N-1)*365+1029983*Math.floor(F/2820)+this.jdEpoch-1},fromJD:function(i){var o=(i=Math.floor(i)+.5)-this.toJD(475,1,1),s=Math.floor(o/1029983),x=mod(o,1029983),_=2820;if(1029982!==x){var F=Math.floor(x/366);_=Math.floor((2134*F+2816*mod(x,366)+2815)/1028522)+F+1}var N=_+2820*s+474;N=N<=0?N-1:N;var j=i-this.toJD(N,1,1)+1,G=j<=186?Math.ceil(j/31):Math.ceil((j-6)/30),Z=i-this.toJD(N,G,1)+1;return this.newDate(N,G,Z)}}),x.calendars.persian=PersianCalendar,x.calendars.jalali=PersianCalendar},31320:function(i,o,s){var x=s(63489),_=s(56131),F=x.instance();function TaiwanCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}TaiwanCalendar.prototype=new x.baseCalendar,_(TaiwanCalendar.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(o.year());return F.leapYear(i)},weekOfYear:function(i,o,s){var _=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(_.year());return F.weekOfYear(i,_.month(),_.day())},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate),i=this._t2gYear(_.year());return F.toJD(i,_.month(),_.day())},fromJD:function(i){var o=F.fromJD(i),s=this._g2tYear(o.year());return this.newDate(s,o.month(),o.day())},_t2gYear:function(i){return i+this.yearsOffset+(i>=-this.yearsOffset&&i<=-1?1:0)},_g2tYear:function(i){return i-this.yearsOffset-(i>=1&&i<=this.yearsOffset?1:0)}}),x.calendars.taiwan=TaiwanCalendar},51367:function(i,o,s){var x=s(63489),_=s(56131),F=x.instance();function ThaiCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}ThaiCalendar.prototype=new x.baseCalendar,_(ThaiCalendar.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(o.year());return F.leapYear(i)},weekOfYear:function(i,o,s){var _=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear),i=this._t2gYear(_.year());return F.weekOfYear(i,_.month(),_.day())},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,x.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate),i=this._t2gYear(_.year());return F.toJD(i,_.month(),_.day())},fromJD:function(i){var o=F.fromJD(i),s=this._g2tYear(o.year());return this.newDate(s,o.month(),o.day())},_t2gYear:function(i){return i-this.yearsOffset-(i>=1&&i<=this.yearsOffset?1:0)},_g2tYear:function(i){return i+this.yearsOffset+(i>=-this.yearsOffset&&i<=-1?1:0)}}),x.calendars.thai=ThaiCalendar},21457:function(i,o,s){var x=s(63489),_=s(56131);function UmmAlQuraCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}UmmAlQuraCalendar.prototype=new x.baseCalendar,_(UmmAlQuraCalendar.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,x.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(-x.dayOfWeek(),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInYear:function(i){for(var o=0,s=1;s<=12;s++)o+=this.daysInMonth(i,s);return o},daysInMonth:function(i,o){for(var s=this._validate(i,o,this.minDay,x.local.invalidMonth).toJD()-24e5+.5,_=0,N=0;N<F.length;N++){if(F[N]>s)return F[_]-F[_-1];_++}return 30},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var _=this._validate(i,o,s,x.local.invalidDate),N=12*(_.year()-1)+_.month()-15292;return _.day()+F[N-1]-1+24e5-.5},fromJD:function(i){for(var o=i-24e5+.5,s=0,x=0;x<F.length&&!(F[x]>o);x++)s++;var _=s+15292,N=Math.floor((_-1)/12),j=o-F[s-1]+1;return this.newDate(N+1,_-12*N,j)},isValid:function(i,o,s){var _=x.baseCalendar.prototype.isValid.apply(this,arguments);return _&&(_=(i=null!=i.year?i.year:i)>=1276&&i<=1500),_},_validate:function(i,o,s,_){var F=x.baseCalendar.prototype._validate.apply(this,arguments);if(F.year<1276||F.year>1500)throw _.replace(/\{0\}/,this.local.name);return F}}),x.calendars.ummalqura=UmmAlQuraCalendar;var F=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(i,o,s){var x=s(56131);function Calendars(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function CDate(i,o,s,x){if(this._calendar=i,this._year=o,this._month=s,this._day=x,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(_.local.invalidDate||_.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function pad(i,o){return i=""+i,"000000".substring(0,o-i.length)+i}function BaseCalendar(){this.shortYearCutoff="+10"}function GregorianCalendar(i){this.local=this.regionalOptions[i]||this.regionalOptions[""]}x(Calendars.prototype,{instance:function(i,o){i=(i||"gregorian").toLowerCase(),o=o||"";var s=this._localCals[i+"-"+o];if(!s&&this.calendars[i]&&(s=new this.calendars[i](o),this._localCals[i+"-"+o]=s),!s)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,i);return s},newDate:function(i,o,s,x,_){return(x=(null!=i&&i.year?i.calendar():"string"==typeof x?this.instance(x,_):x)||this.instance()).newDate(i,o,s)},substituteDigits:function(i){return function(o){return(o+"").replace(/[0-9]/g,function(o){return i[o]})}},substituteChineseDigits:function(i,o){return function(s){for(var x="",_=0;s>0;){var F=s%10;x=(0===F?"":i[F]+o[_])+x,_++,s=Math.floor(s/10)}return 0===x.indexOf(i[1]+o[1])&&(x=x.substr(1)),x||i[0]}}}),x(CDate.prototype,{newDate:function(i,o,s){return this._calendar.newDate(null==i?this:i,o,s)},year:function(i){return 0==arguments.length?this._year:this.set(i,"y")},month:function(i){return 0==arguments.length?this._month:this.set(i,"m")},day:function(i){return 0==arguments.length?this._day:this.set(i,"d")},date:function(i,o,s){if(!this._calendar.isValid(i,o,s))throw(_.local.invalidDate||_.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=i,this._month=o,this._day=s,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(i,o){return this._calendar.add(this,i,o)},set:function(i,o){return this._calendar.set(this,i,o)},compareTo:function(i){if(this._calendar.name!==i._calendar.name)throw(_.local.differentCalendars||_.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,i._calendar.local.name);var o=this._year!==i._year?this._year-i._year:this._month!==i._month?this.monthOfYear()-i.monthOfYear():this._day-i._day;return 0===o?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(i){return this._calendar.fromJD(i)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(i){return this._calendar.fromJSDate(i)},toString:function(){return(0>this.year()?"-":"")+pad(Math.abs(this.year()),4)+"-"+pad(this.month(),2)+"-"+pad(this.day(),2)}}),x(BaseCalendar.prototype,{_validateLevel:0,newDate:function(i,o,s){return null==i?this.today():(i.year&&(this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate),s=i.day(),o=i.month(),i=i.year()),new CDate(this,i,o,s))},today:function(){return this.fromJSDate(new Date)},epoch:function(i){return 0>this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear);return(0>o.year()?"-":"")+pad(Math.abs(o.year()),4)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),12},monthOfYear:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth||_.regionalOptions[""].invalidMonth);return(s.month()+this.monthsInYear(s)-this.firstMonth)%this.monthsInYear(s)+this.minMonth},fromMonthOfYear:function(i,o){var s=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(i)+this.minMonth;return this._validate(i,s,this.minDay,_.local.invalidMonth||_.regionalOptions[""].invalidMonth),s},daysInYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(i,o,s){var x=this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate);return x.toJD()-this.newDate(x.year(),this.fromMonthOfYear(x.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(i,o,s){var x=this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(x))+2)%this.daysInWeek()},extraInfo:function(i,o,s){return this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate),{}},add:function(i,o,s){return this._validate(i,this.minMonth,this.minDay,_.local.invalidDate||_.regionalOptions[""].invalidDate),this._correctAdd(i,this._add(i,o,s),o,s)},_add:function(i,o,s){if(this._validateLevel++,"d"===s||"w"===s){var x=i.toJD()+o*("w"===s?this.daysInWeek():1),_=i.calendar().fromJD(x);return this._validateLevel--,[_.year(),_.month(),_.day()]}try{var F=i.year()+("y"===s?o:0),N=i.monthOfYear()+("m"===s?o:0),_=i.day();"y"===s?(i.month()!==this.fromMonthOfYear(F,N)&&(N=this.newDate(F,i.month(),this.minDay).monthOfYear()),N=Math.min(N,this.monthsInYear(F)),_=Math.min(_,this.daysInMonth(F,this.fromMonthOfYear(F,N)))):"m"===s&&(function(i){for(;N<i.minMonth;)F--,N+=i.monthsInYear(F);for(var o=i.monthsInYear(F);N>o-1+i.minMonth;)F++,N-=o,o=i.monthsInYear(F)}(this),_=Math.min(_,this.daysInMonth(F,this.fromMonthOfYear(F,N))));var j=[F,this.fromMonthOfYear(F,N),_];return this._validateLevel--,j}catch(i){throw this._validateLevel--,i}},_correctAdd:function(i,o,s,x){if(!this.hasYearZero&&("y"===x||"m"===x)&&(0===o[0]||i.year()>0!=o[0]>0)){var _={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[x],F=s<0?-1:1;o=this._add(i,s*_[0]+F*_[1],_[2])}return i.date(o[0],o[1],o[2])},set:function(i,o,s){this._validate(i,this.minMonth,this.minDay,_.local.invalidDate||_.regionalOptions[""].invalidDate);var x="y"===s?o:i.year(),F="m"===s?o:i.month(),N="d"===s?o:i.day();return("y"===s||"m"===s)&&(N=Math.min(N,this.daysInMonth(x,F))),i.date(x,F,N)},isValid:function(i,o,s){this._validateLevel++;var x=this.hasYearZero||0!==i;if(x){var _=this.newDate(i,o,this.minDay);x=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(_)&&s>=this.minDay&&s-this.minDay<this.daysInMonth(_)}return this._validateLevel--,x},toJSDate:function(i,o,s){var x=this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate);return _.instance().fromJD(this.toJD(x)).toJSDate()},fromJSDate:function(i){return this.fromJD(_.instance().fromJSDate(i).toJD())},_validate:function(i,o,s,x){if(i.year){if(0===this._validateLevel&&this.name!==i.calendar().name)throw(_.local.differentCalendars||_.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,i.calendar().local.name);return i}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(i,o,s))throw x.replace(/\{0\}/,this.local.name);var F=this.newDate(i,o,s);return this._validateLevel--,F}catch(i){throw this._validateLevel--,i}}}),GregorianCalendar.prototype=new BaseCalendar,x(GregorianCalendar.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(i,o,s){var x=this.newDate(i,o,s);return x.add(4-(x.dayOfWeek()||7),"d"),Math.floor((x.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth||_.regionalOptions[""].invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var x=this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate);i=x.year(),o=x.month(),s=x.day(),i<0&&i++,o<3&&(o+=12,i--);var F=Math.floor(i/100);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(o+1))+s+(2-F+Math.floor(F/4))-1524.5},fromJD:function(i){var o=Math.floor(i+.5),s=Math.floor((o-1867216.25)/36524.25),x=(s=o+1+s-Math.floor(s/4))+1524,_=Math.floor((x-122.1)/365.25),F=Math.floor(365.25*_),N=Math.floor((x-F)/30.6001),j=x-F-Math.floor(30.6001*N),G=N-(N>13.5?13:1),Z=_-(G>2.5?4716:4715);return Z<=0&&Z--,this.newDate(Z,G,j)},toJSDate:function(i,o,s){var x=this._validate(i,o,s,_.local.invalidDate||_.regionalOptions[""].invalidDate),F=new Date(x.year(),x.month()-1,x.day());return F.setHours(0),F.setMinutes(0),F.setSeconds(0),F.setMilliseconds(0),F.setHours(F.getHours()>12?F.getHours()+2:0),F},fromJSDate:function(i){return this.newDate(i.getFullYear(),i.getMonth()+1,i.getDate())}});var _=i.exports=new Calendars;_.cdate=CDate,_.baseCalendar=BaseCalendar,_.calendars.gregorian=GregorianCalendar},94338:function(i,o,s){var x=s(56131),_=s(63489);x(_.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),_.local=_.regionalOptions[""],x(_.cdate.prototype,{formatDate:function(i,o){return"string"!=typeof i&&(o=i,i=""),this._calendar.formatDate(i||"",this,o)}}),x(_.baseCalendar.prototype,{UNIX_EPOCH:_.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:_.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,o,s){if("string"!=typeof i&&(s=o,o=i,i=""),!o)return"";if(o.calendar()!==this)throw _.local.invalidFormat||_.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat;var x,F,N,j=(s=s||{}).dayNamesShort||this.local.dayNamesShort,G=s.dayNames||this.local.dayNames,Z=s.monthNumbers||this.local.monthNumbers,X=s.monthNamesShort||this.local.monthNamesShort,J=s.monthNames||this.local.monthNames;s.calculateWeek||this.local.calculateWeek;for(var doubled=function(o,s){for(var x=1;er+x<i.length&&i.charAt(er+x)===o;)x++;return er+=x-1,Math.floor(x/(s||1))>1},formatNumber=function(i,o,s,x){var _=""+o;if(doubled(i,x))for(;_.length<s;)_="0"+_;return _},$=this.local.digits,localiseNumbers=function(i){return s.localNumbers&&$?$(i):i},ee="",et=!1,er=0;er<i.length;er++)if(et)"'"!==i.charAt(er)||doubled("'")?ee+=i.charAt(er):et=!1;else switch(i.charAt(er)){case"d":ee+=localiseNumbers(formatNumber("d",o.day(),2));break;case"D":ee+=(x=o.dayOfWeek(),doubled("D")?G[x]:j[x]);break;case"o":ee+=formatNumber("o",o.dayOfYear(),3);break;case"w":ee+=formatNumber("w",o.weekOfYear(),2);break;case"m":ee+=(F=o,"function"==typeof Z?Z.call(this,F,doubled("m")):localiseNumbers(formatNumber("m",F.month(),2)));break;case"M":ee+=(N=o,doubled("M")?"function"==typeof J?J.call(this,N):J[N.month()-this.minMonth]:"function"==typeof X?X.call(this,N):X[N.month()-this.minMonth]);break;case"y":ee+=doubled("y",2)?o.year():(o.year()%100<10?"0":"")+o.year()%100;break;case"Y":doubled("Y",2),ee+=o.formatYear();break;case"J":ee+=o.toJD();break;case"@":ee+=(o.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":ee+=(o.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":doubled("'")?ee+="'":et=!0;break;default:ee+=i.charAt(er)}return ee},parseDate:function(i,o,s){if(null==o)throw _.local.invalidArguments||_.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;i=i||this.local.dateFormat;var x=(s=s||{}).shortYearCutoff||this.shortYearCutoff;x="string"!=typeof x?x:this.today().year()%100+parseInt(x,10);for(var F=s.dayNamesShort||this.local.dayNamesShort,N=s.dayNames||this.local.dayNames,j=s.parseMonth||this.local.parseMonth,G=s.monthNumbers||this.local.monthNumbers,Z=s.monthNamesShort||this.local.monthNamesShort,X=s.monthNames||this.local.monthNames,J=-1,$=-1,ee=-1,et=-1,er=-1,en=!1,ei=!1,doubled=function(o,s){for(var x=1;el+x<i.length&&i.charAt(el+x)===o;)x++;return el+=x-1,Math.floor(x/(s||1))>1},getNumber=function(i,s){var x=doubled(i,s),F=RegExp("^-?\\d{1,"+[2,3,x?4:2,x?4:2,10,11,20]["oyYJ@!".indexOf(i)+1]+"}"),N=o.substring(es).match(F);if(!N)throw(_.local.missingNumberAt||_.regionalOptions[""].missingNumberAt).replace(/\{0\}/,es);return es+=N[0].length,parseInt(N[0],10)},eo=this,getName=function(i,s,x,F){for(var N=doubled(i,F)?x:s,j=0;j<N.length;j++)if(o.substr(es,N[j].length).toLowerCase()===N[j].toLowerCase())return es+=N[j].length,j+eo.minMonth;throw(_.local.unknownNameAt||_.regionalOptions[""].unknownNameAt).replace(/\{0\}/,es)},checkLiteral=function(){if(o.charAt(es)!==i.charAt(el))throw(_.local.unexpectedLiteralAt||_.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,es);es++},es=0,el=0;el<i.length;el++)if(ei)"'"!==i.charAt(el)||doubled("'")?checkLiteral():ei=!1;else switch(i.charAt(el)){case"d":et=getNumber("d");break;case"D":getName("D",F,N);break;case"o":er=getNumber("o");break;case"w":getNumber("w");break;case"m":ee=function(){if("function"==typeof G){doubled("m");var i=G.call(eo,o.substring(es));return es+=i.length,i}return getNumber("m")}();break;case"M":ee=function(){if("function"==typeof X){var i=doubled("M")?X.call(eo,o.substring(es)):Z.call(eo,o.substring(es));return es+=i.length,i}return getName("M",Z,X)}();break;case"y":var ec=el;en=!doubled("y",2),el=ec,$=getNumber("y",2);break;case"Y":$=getNumber("Y",2);break;case"J":J=getNumber("J")+.5,"."===o.charAt(es)&&(es++,getNumber("J"));break;case"@":J=getNumber("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":J=getNumber("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":es=o.length;break;case"'":doubled("'")?checkLiteral():ei=!0;break;default:checkLiteral()}if(es<o.length)throw _.local.unexpectedText||_.regionalOptions[""].unexpectedText;if(-1===$?$=this.today().year():$<100&&en&&($+=-1===x?1900:this.today().year()-this.today().year()%100-($<=x?0:100)),"string"==typeof ee&&(ee=j.call(this,$,ee)),er>-1){ee=1,et=er;for(var eu=this.daysInMonth($,ee);et>eu;eu=this.daysInMonth($,ee))ee++,et-=eu}return J>-1?this.fromJD(J):this.newDate($,ee,et)},determineDate:function(i,o,s,x,_){s&&"object"!=typeof s&&(_=x,x=s,s=null),"string"!=typeof x&&(_=x,x="");var F=this;return o=o?o.newDate():null,i=null==i?o:"string"==typeof i?function(i){try{return F.parseDate(x,i,_)}catch(i){}for(var o=((i=i.toLowerCase()).match(/^c/)&&s?s.newDate():null)||F.today(),N=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,j=N.exec(i);j;)o.add(parseInt(j[1],10),j[2]||"d"),j=N.exec(i);return o}(i):"number"==typeof i?isNaN(i)||i===1/0||i===-1/0?o:F.today().add(i,"d"):F.newDate(i)}})},69862:function(){},40964:function(){},72077:function(i,o,s){"use strict";var x=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],_="undefined"==typeof globalThis?s.g:globalThis;i.exports=function(){for(var i=[],o=0;o<x.length;o++)"function"==typeof _[x[o]]&&(i[i.length]=x[o]);return i}},81684:function(i,o,s){"use strict";function src_define(i,o,s){i.prototype=o.prototype=s,s.constructor=i}function extend(i,o){var s=Object.create(i.prototype);for(var x in o)s[x]=o[x];return s}function Color(){}s.d(o,{sX:function(){return function value(i,o){var s,x,_=value_typeof(o);return null==o||"boolean"===_?src_constant(o):("number"===_?number:"string"===_?(x=color(o))?(o=x,et):function(i,o){var s,x,_,F,N,j=er.lastIndex=en.lastIndex=0,G=-1,Z=[],X=[];for(i+="",o+="";(_=er.exec(i))&&(F=en.exec(o));)(N=F.index)>j&&(N=o.slice(j,N),Z[G]?Z[G]+=N:Z[++G]=N),(_=_[0])===(F=F[0])?Z[G]?Z[G]+=F:Z[++G]=F:(Z[++G]=null,X.push({i:G,x:number(_,F)})),j=en.lastIndex;return j<o.length&&(N=o.slice(j),Z[G]?Z[G]+=N:Z[++G]=N),Z.length<2?X[0]?(s=X[0].x,function(i){return s(i)+""}):(x=o,function(){return x}):(o=X.length,function(i){for(var s,x=0;x<o;++x)Z[(s=X[x]).i]=s.x(i);return Z.join("")})}:o instanceof color?et:o instanceof Date?function(i,o){var s=new Date;return i=+i,o=+o,function(x){return s.setTime(i*(1-x)+o*x),s}}:(s=o,!ArrayBuffer.isView(s)||s instanceof DataView)?Array.isArray(o)?function(i,o){var s,x=o?o.length:0,_=i?Math.min(x,i.length):0,F=Array(_),N=Array(x);for(s=0;s<_;++s)F[s]=value(i[s],o[s]);for(;s<x;++s)N[s]=o[s];return function(i){for(s=0;s<_;++s)N[s]=F[s](i);return N}}:"function"!=typeof o.valueOf&&"function"!=typeof o.toString||isNaN(o)?function(i,o){var s,x={},_={};for(s in(null===i||"object"!==_typeof(i))&&(i={}),(null===o||"object"!==_typeof(o))&&(o={}),o)s in i?x[s]=value(i[s],o[s]):_[s]=o[s];return function(i){for(s in x)_[s]=x[s](i);return _}}:number:function(i,o){o||(o=[]);var s,x=i?Math.min(o.length,i.length):0,_=o.slice();return function(F){for(s=0;s<x;++s)_[s]=i[s]*(1-F)+o[s]*F;return _}})(i,o)}},k4:function(){return number}});var x="\\s*([+-]?\\d+)\\s*",_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",F="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N=/^#([0-9a-f]{3,8})$/,j=new RegExp("^rgb\\(".concat(x,",").concat(x,",").concat(x,"\\)$")),G=new RegExp("^rgb\\(".concat(F,",").concat(F,",").concat(F,"\\)$")),Z=new RegExp("^rgba\\(".concat(x,",").concat(x,",").concat(x,",").concat(_,"\\)$")),X=new RegExp("^rgba\\(".concat(F,",").concat(F,",").concat(F,",").concat(_,"\\)$")),J=new RegExp("^hsl\\(".concat(_,",").concat(F,",").concat(F,"\\)$")),$=new RegExp("^hsla\\(".concat(_,",").concat(F,",").concat(F,",").concat(_,"\\)$")),ee={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(i){var o,s;return i=(i+"").trim().toLowerCase(),(o=N.exec(i))?(s=o[1].length,o=parseInt(o[1],16),6===s?rgbn(o):3===s?new Rgb(o>>8&15|o>>4&240,o>>4&15|240&o,(15&o)<<4|15&o,1):8===s?rgba(o>>24&255,o>>16&255,o>>8&255,(255&o)/255):4===s?rgba(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|240&o,((15&o)<<4|15&o)/255):null):(o=j.exec(i))?new Rgb(o[1],o[2],o[3],1):(o=G.exec(i))?new Rgb(255*o[1]/100,255*o[2]/100,255*o[3]/100,1):(o=Z.exec(i))?rgba(o[1],o[2],o[3],o[4]):(o=X.exec(i))?rgba(255*o[1]/100,255*o[2]/100,255*o[3]/100,o[4]):(o=J.exec(i))?hsla(o[1],o[2]/100,o[3]/100,1):(o=$.exec(i))?hsla(o[1],o[2]/100,o[3]/100,o[4]):ee.hasOwnProperty(i)?rgbn(ee[i]):"transparent"===i?new Rgb(NaN,NaN,NaN,0):null}function rgbn(i){return new Rgb(i>>16&255,i>>8&255,255&i,1)}function rgba(i,o,s,x){return x<=0&&(i=o=s=NaN),new Rgb(i,o,s,x)}function color_rgb(i,o,s,x){var _;return 1==arguments.length?((_=i)instanceof Color||(_=color(_)),_)?(_=_.rgb(),new Rgb(_.r,_.g,_.b,_.opacity)):new Rgb:new Rgb(i,o,s,null==x?1:x)}function Rgb(i,o,s,x){this.r=+i,this.g=+o,this.b=+s,this.opacity=+x}function rgb_formatHex(){return"#".concat(hex(this.r)).concat(hex(this.g)).concat(hex(this.b))}function rgb_formatRgb(){var i=clampa(this.opacity);return"".concat(1===i?"rgb(":"rgba(").concat(clampi(this.r),", ").concat(clampi(this.g),", ").concat(clampi(this.b)).concat(1===i?")":", ".concat(i,")"))}function clampa(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function clampi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function hex(i){return((i=clampi(i))<16?"0":"")+i.toString(16)}function hsla(i,o,s,x){return x<=0?i=o=s=NaN:s<=0||s>=1?i=o=NaN:o<=0&&(i=NaN),new Hsl(i,o,s,x)}function hslConvert(i){if(i instanceof Hsl)return new Hsl(i.h,i.s,i.l,i.opacity);if(i instanceof Color||(i=color(i)),!i)return new Hsl;if(i instanceof Hsl)return i;var o=(i=i.rgb()).r/255,s=i.g/255,x=i.b/255,_=Math.min(o,s,x),F=Math.max(o,s,x),N=NaN,j=F-_,G=(F+_)/2;return j?(N=o===F?(s-x)/j+(s<x)*6:s===F?(x-o)/j+2:(o-s)/j+4,j/=G<.5?F+_:2-F-_,N*=60):j=G>0&&G<1?0:N,new Hsl(N,j,G,i.opacity)}function Hsl(i,o,s,x){this.h=+i,this.s=+o,this.l=+s,this.opacity=+x}function clamph(i){return(i=(i||0)%360)<0?i+360:i}function clampt(i){return Math.max(0,Math.min(1,i||0))}function hsl2rgb(i,o,s){return(i<60?o+(s-o)*i/60:i<180?s:i<240?o+(s-o)*(240-i)/60:o)*255}function basis(i,o,s,x,_){var F=i*i,N=F*i;return((1-3*i+3*F-N)*o+(4-6*F+3*N)*s+(1+3*i+3*F-3*N)*x+N*_)/6}src_define(Color,color,{copy:function(i){return Object.assign(new this.constructor,this,i)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter:function(i){return i=null==i?1.4285714285714286:Math.pow(1.4285714285714286,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},clamp:function(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function(){return"#".concat(hex(this.r)).concat(hex(this.g)).concat(hex(this.b)).concat(hex((isNaN(this.opacity)?1:this.opacity)*255))},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,function(i,o,s,x){return 1==arguments.length?hslConvert(i):new Hsl(i,o,s,null==x?1:x)},extend(Color,{brighter:function(i){return i=null==i?1.4285714285714286:Math.pow(1.4285714285714286,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+(this.h<0)*360,o=isNaN(i)||isNaN(this.s)?0:this.s,s=this.l,x=s+(s<.5?s:1-s)*o,_=2*s-x;return new Rgb(hsl2rgb(i>=240?i-240:i+120,_,x),hsl2rgb(i,_,x),hsl2rgb(i<120?i+240:i-120,_,x),this.opacity)},clamp:function(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var i=clampa(this.opacity);return"".concat(1===i?"hsl(":"hsla(").concat(clamph(this.h),", ").concat(100*clampt(this.s),"%, ").concat(100*clampt(this.l),"%").concat(1===i?")":", ".concat(i,")"))}}));var src_constant=function(i){return function(){return i}};function nogamma(i,o){var s=o-i;return s?function(o){return i+o*s}:src_constant(isNaN(i)?o:i)}var et=function rgbGamma(i){var o,s=1==(o=+(o=i))?nogamma:function(i,s){var x,_,F;return s-i?(x=i,_=s,x=Math.pow(x,F=o),_=Math.pow(_,F)-x,F=1/F,function(i){return Math.pow(x+i*_,F)}):src_constant(isNaN(i)?s:i)};function rgb(i,o){var x=s((i=color_rgb(i)).r,(o=color_rgb(o)).r),_=s(i.g,o.g),F=s(i.b,o.b),N=nogamma(i.opacity,o.opacity);return function(o){return i.r=x(o),i.g=_(o),i.b=F(o),i.opacity=N(o),i+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(i){return function(o){var s,x,_=o.length,F=Array(_),N=Array(_),j=Array(_);for(s=0;s<_;++s)x=color_rgb(o[s]),F[s]=x.r||0,N[s]=x.g||0,j[s]=x.b||0;return F=i(F),N=i(N),j=i(j),x.opacity=1,function(i){return x.r=F(i),x.g=N(i),x.b=j(i),x+""}}}function number(i,o){return i=+i,o=+o,function(s){return i*(1-s)+o*s}}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}rgbSpline(function(i){var o=i.length-1;return function(s){var x=s<=0?s=0:s>=1?(s=1,o-1):Math.floor(s*o),_=i[x],F=i[x+1],N=x>0?i[x-1]:2*_-F,j=x<o-1?i[x+2]:2*F-_;return basis((s-x/o)*o,N,_,F,j)}}),rgbSpline(function(i){var o=i.length;return function(s){var x=Math.floor(((s%=1)<0?++s:s)*o),_=i[(x+o-1)%o],F=i[x%o],N=i[(x+1)%o],j=i[(x+2)%o];return basis((s-x/o)*o,_,F,N,j)}});var er=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,en=RegExp(er.source,"g");function value_typeof(i){return(value_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}},40402:function(i){"use strict";i.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(i){"use strict";i.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(i){"use strict";i.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(i){"use strict";i.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(i){"use strict";i.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(i){"use strict";i.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},o={};function __nested_webpack_require_8549200__(s){var x=o[s];if(void 0!==x)return x.exports;var _=o[s]={exports:{}};return i[s].call(_.exports,_,_.exports,__nested_webpack_require_8549200__),_.exports}return __nested_webpack_require_8549200__.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return __nested_webpack_require_8549200__.d(o,{a:o}),o},__nested_webpack_require_8549200__.d=function(i,o){for(var s in o)__nested_webpack_require_8549200__.o(o,s)&&!__nested_webpack_require_8549200__.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},__nested_webpack_require_8549200__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__nested_webpack_require_8549200__.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},__nested_webpack_require_8549200__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__nested_webpack_require_8549200__(27909)}()}}]);