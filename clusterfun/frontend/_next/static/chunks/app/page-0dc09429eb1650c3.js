(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7947:function(e,t,n){Promise.resolve().then(n.bind(n,9835))},9835:function(e,t,n){"use strict";let l;n.r(t),n.d(t,{default:function(){return ee}});var i=n(7437),a=n(3742),s=n(2265),r=n(9910);l="/api";class o{constructor(e,t,n,l,i){this.index=e,this.src=t,this.information=n,this.height=l,this.width=i}}var d=n(2126);async function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await d.Z.get("".concat(l,"/views/").concat(e,"/media/").concat(t,"?&as_base64=").concat(n.toString())).then(e=>new o(e.data.index,e.data.src,e.data.information,e.data.height,e.data.width))}var u=n(5079),h=n(6920);async function x(e,t){return await d.Z.post("".concat(l,"/views/").concat(e,"/filter"),t).then(e=>e.data)}async function m(e,t,n,i,a,s){return await d.Z.post("".concat(l,"/views/").concat(e,"/media"),{media_ids:t,page:null!==n?n:0,sort_column:void 0!==i?i:null,ascending:void 0!==a?a:null,filters:void 0!==s?s:null}).then(e=>e.data)}let g=e=>{let{filter:t,onRemove:n}=e;return(0,i.jsx)("div",{className:"pb-1",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("button",{type:"button",className:"button rounded-l border border-e-0 border-gray-300  p-1 text-xs text-gray-900 ",children:[t.column," ",t.comparison," ",t.value]}),(0,i.jsx)("button",{type:"button",className:"button me-1 rounded-r  border border-gray-300 p-1 text-xs text-gray-900 ",onClick:n,children:(0,i.jsx)(h.G,{icon:u.NBC})})]})},"".concat(t.column).concat(t.comparison).concat(t.value))},v=()=>{let e=(0,a.Dv)(Z),[t,n]=(0,a.KO)(A),[l,r]=(0,s.useState)([]),o=(0,a.Dv)(R),d=(0,a.b9)(P),[c,u]=(0,s.useState)(),[h,v]=(0,s.useState)(),[f,b]=(0,s.useState)(),p=(0,a.b9)(X),y=(0,a.Dv)(U),[j,w]=(0,a.KO)(J),[N,C]=(0,a.KO)(T);(0,s.useEffect)(()=>{JSON.stringify(t)!==JSON.stringify(l)&&k()},[t]);let k=()=>{x(o,t).then(e=>{if(e){d(e);let t=[];if(e.forEach(e=>{t=[...t,...e.id]}),void 0!==N&&N.length>0){let e=t.filter(e=>N[0].includes(e));C([...N,e])}w({...j,page:0})}}).catch(e=>console.error(e)),"grid"===y&&void 0!==N&&N.length>0&&void 0!==N[N.length-1]&&N[N.length-1].length>0&&m(o,N[N.length-1],j.page,j.sortBy,j.asc,t).then(e=>{e&&p(e)}).catch(e=>console.error(e))},O=e=>{r(t),n(t=>t.filter(t=>t!==e))},B=e=>t=>{e(t.target.value)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex",children:null==t?void 0:t.map(e=>(0,i.jsx)(g,{filter:e,onRemove:()=>O(e)},e.column+e.comparison+e.value))}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"pe-0 ps-0 pt-1 lg:flex lg:h-8",children:[(0,i.jsx)("div",{className:"flex w-full border border-gray-300 px-2 lg:m-0 lg:my-0 lg:w-1/3 lg:rounded-s-md lg:border-e-0",children:(0,i.jsxs)("select",{defaultValue:"",className:"my-1 block grow text-xs text-gray-900 lg:my-0","aria-label":"Default select example",onChange:B(u),children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"Column"}),null==e?void 0:e.columns.slice(2).filter(e=>"_y"!==e).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}),(0,i.jsx)("div",{className:"lg:rounded-0 flex w-full border-s border-e lg:border border-gray-300 px-2 lg:m-0 lg:my-0 lg:w-1/3 lg:border-e-0",children:(0,i.jsxs)("select",{defaultValue:"",className:"my-1 block grow text-xs text-gray-900 lg:my-0",onChange:B(v),children:[(0,i.jsx)("option",{value:"",children:"comparison"}),(0,i.jsx)("option",{value:">",children:">"}),(0,i.jsx)("option",{value:">=",children:"≥"}),(0,i.jsx)("option",{value:"<",children:"<"}),(0,i.jsx)("option",{value:"=<",children:"≤"}),(0,i.jsx)("option",{value:"=",children:"="}),(0,i.jsx)("option",{value:"!=",children:"≠"})]})}),(0,i.jsx)("input",{type:"text","aria-label":"Last name",placeholder:"...",className:"block w-full py-1 lg:py-0 border-e border-s border-t lg:border border-gray-300 px-2 text-xs text-gray-900 lg:my-0 lg:w-1/3 lg:border-e-0",onChange:e=>b(e.target.value)}),(0,i.jsx)("div",{className:"button my-0 text-center cursor-pointer py-1 w-full border border-gray-300 bg-gray-100 text-xs text-gray-900 hover:text-blue-500 focus:border-blue-500  focus:ring-blue-500 lg:my-0 lg:w-1/3 lg:rounded-e-md",onClick:()=>{if(f&&h&&c){let e={column:c,comparison:h,value:f};(null==t?void 0:t.some(t=>t.column===e.column&&t.comparison===e.comparison&&t.value===e.value))||n(t=>[...t,e])}},children:"Filter"})]})})]})};var f=n(7818);let b=(0,f.default)(async()=>await Promise.all([n.e(934),n.e(8)]).then(n.bind(n,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1});var p=e=>{let{revision:t,handleHover:n,handleClick:l,handleSelect:r}=e,o=(0,a.Dv)(Z),d=(0,a.Dv)(P);if(void 0===o||void 0===d)return(0,i.jsx)(i.Fragment,{});let[c,u]=(0,s.useState)({hovermode:"closest",paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",xaxis:y(o),yaxis:{autorange:!0,showgrid:!0,showline:!1,title:{text:o.y,font:{color:"black",size:11}}},displayModeBar:!1,dragmode:"select",datarevision:t,autosize:!0,margin:{l:40,r:0,b:40,t:0,pad:0}}),[h,x]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{u(e=>({...e,xaxis:y(o),yaxis:{...e.yaxis,title:{text:o.y}},datarevision:t}))},[o,t]),(0,s.useEffect)(()=>{let e=()=>{u(e=>({...e,legend:{...e.legend,x:window.innerWidth<768?.5:void 0,xanchor:window.innerWidth<768?"center":void 0,y:window.innerWidth<768?1.1:void 0,yanchor:window.innerWidth<768?"bottom":void 0}}))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)("div",{className:"h-100 flex-column flex items-center justify-center text-center",style:{height:"477px"},children:(0,i.jsxs)("div",{role:"status",children:[(0,i.jsxs)("svg",{"aria-hidden":"true",className:"mr-2 h-8 w-8 animate-spin fill-orange-500 text-gray-200 dark:text-gray-200",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),(0,i.jsx)("span",{className:"sr-only",children:"Loading..."})]})}),(0,i.jsx)(b,{data:d,layout:c,revision:t,useResizeHandler:!0,style:{width:"100%",height:"100%"},config:{scrollZoom:!0,displayModeBar:!1},onRelayout:e=>{void 0!==e["xaxis.range[0]"]&&void 0!==e["xaxis.range[1]"]&&void 0!==e["yaxis.range[0]"]&&void 0!==e["yaxis.range[1]"]&&u(t=>({...t,xaxis:{...t.xaxis,range:[e["xaxis.range[0]"],e["xaxis.range[1]"]]},yaxis:{...t.yaxis,range:[e["yaxis.range[0]"],e["yaxis.range[1]"]]}}))},onInitialized:e=>{x(!1)},onHover:e=>{var t;return n(null===(t=e.points)||void 0===t?void 0:t[0].data.id[e.points[0].pointIndex])},onClick:e=>{var t;return l(null===(t=e.points)||void 0===t?void 0:t[0].data.id[e.points[0].pointIndex])},onSelected:e=>{if((null==e?void 0:e.points)&&e.points.length>0){let t=e.points.map(e=>d[e.curveNumber].id[e.pointIndex]);r(e.points&&t)}}})]})};function y(e){return"violin"===e.type?{tick0:0,dtick:2,tickvals:null!=e.colors&&Array.from({length:e.colors.length},(e,t)=>2*t),ticktext:e.colors,autorange:!0}:"bar_chart"==e.type?{tick0:.35,dtick:1,rotation:0,tickvals:void 0!==e.x_names&&Array.from({length:e.x_names.length+1},(e,t)=>t+.35),ticktext:e.x_names,autorange:!0,automargin:!0}:{showgrid:!0,showline:!1,zeroline:!1,title:{text:e.x,font:{color:"black",size:11}},autorange:!0,automargin:!0}}class j{width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}constructor(e,t,n,l,i,a){this.xmin=e,this.ymin=t,this.xmax=n,this.ymax=l,this.color=i,this.label=a}}var w=n(1613);let N=(e,t)=>{let n;return()=>{null!==n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}};function C(e){let t=JSON.parse(e),n=[];return t.forEach(e=>{let t=e.xmin,l=e.ymin,i=e.xmax,a=e.ymax;isNaN(t)||isNaN(l)||isNaN(i)||isNaN(a)||n.push(new j(t,l,i,a,e.color,e.label))}),n}function k(e){(0,a.Dv)(R);let[t,n]=(0,s.useState)([]),[l,r]=(0,s.useState)({width:0,height:0,naturalWidth:0,naturalHeight:0}),[o,d]=(0,s.useState)([]),c=s.useRef(null),[u,h]=(0,s.useState)(0),x=s.useRef(null),m=()=>{c.current&&v(c.current),x.current&&h(x.current.offsetWidth)},g=N(m,300);function v(e){let t=c.current,n=t.offsetWidth,l=t.offsetHeight,i=function(e){let t=e.naturalWidth/e.naturalHeight,n=e.height*t,l=e.height;return n>e.width&&(n=e.width,l=e.width/t),{width:n,height:l}}(e);n=i.width,r({height:isNaN(l=i.height)?0:l,naturalWidth:isNaN(t.naturalWidth)?0:t.naturalWidth,naturalHeight:isNaN(t.naturalHeight)?0:t.naturalHeight,width:isNaN(n)?0:n})}(0,s.useEffect)(()=>{m()},[]),(0,s.useEffect)(()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[]),(0,s.useEffect)(()=>{if(void 0!==e.media&&null!=e.media.information&&null!=e.boundingBoxColumnIndex){let t=e.media.information[e.boundingBoxColumnIndex-2];null!=t&&n(C(t))}},[e.media,e.boundingBoxColumnIndex]),s.useEffect(()=>{c.current&&v(c.current)},[e.media,e.columns,e.displayLabel]),(0,s.useEffect)(()=>{f()},[l]);let f=()=>{isNaN(l.width)||isNaN(l.height)||isNaN(l.naturalWidth)||isNaN(l.naturalHeight)||0===l.width||0===l.height||0===l.naturalHeight||0===l.naturalWidth||d(t.map((t,n)=>{let{textLabel:a,rect:r,textRectangle:o}=function(t,n){let a;let s=(0,i.jsx)("rect",{x:n.xmin/l.naturalWidth*l.width,y:n.ymin/l.naturalHeight*l.height,width:(n.xmax-n.xmin)/l.naturalWidth*l.width,height:(n.ymax-n.ymin)/l.naturalHeight*l.height,stroke:null!=n.color?n.color:w.O[t%w.O.length],strokeWidth:"3",fill:"none"},t),r=(0,i.jsx)("rect",{x:n.xmin/l.naturalWidth*l.width,y:n.ymin/l.naturalHeight*l.height,width:(n.xmax-n.xmin)/l.naturalWidth*l.width,height:12,fill:null!=n.color?n.color:w.O[t%w.O.length]});return null!=n.label&&e.displayLabel&&(a=(0,i.jsx)("text",{x:n.xmin/l.naturalWidth*l.width+2,y:n.ymin/l.naturalHeight*l.height+10,fill:"white",className:"small",children:n.label})),{textLabel:a,rect:s,textRectangle:r}}(n,t);return(0,i.jsxs)(s.Fragment,{children:[r,null!=a?o:"",null!=a?a:""]},n)}))};return((0,s.useEffect)(()=>{let e=()=>{null!==c.current&&v(c.current)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),void 0===e.media)?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("div",{className:"image--preview",ref:x,children:[(0,i.jsx)("img",{src:e.media.src,ref:c,className:"sidebar-image",style:{objectFit:"contain",width:"100%"}}),(0,i.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0},className:"flex justify-center items-center",children:(0,i.jsx)("svg",{className:"sidebar-svg",width:l.width,height:l.height,children:o})}),null==e.boundingBoxColumnIndex&&void 0!==e.boundingBoxColumnIndex&&(0,i.jsx)("svg",{className:"sidebar-svg",width:l.width,height:l.height,children:o})]})}function O(){var e;let t=(0,a.Dv)(Q),n=(0,a.Dv)(Z);return void 0===t||void 0===n?(0,i.jsx)("div",{}):(0,i.jsx)("div",{className:"sidebar text-dark border-s-1 ms-1 w-full border-s border-gray-200 px-1 ps-2 lg:ps-0",children:(0,i.jsxs)("div",{className:"w-full",style:{display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 35px)"},children:[(0,i.jsx)("div",{style:{maxHeight:"300px"},children:(0,i.jsx)(k,{media:t,boundingBoxColumnIndex:null!=n.bounding_box?n.columns.indexOf(n.bounding_box):void 0,displayLabel:!0})}),(0,i.jsx)("div",{className:"ps-2",style:{overflowY:"scroll",flexGrow:1},children:null===(e=t.information)||void 0===e?void 0:e.filter((e,t)=>t!==(null!=n.bounding_box?n.columns.indexOf(n.bounding_box):-1)).map((e,t)=>{var l;return l=n.columns.slice(2),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"border-b border-gray-300 text-gray-800",children:(0,i.jsx)("small",{children:l[t]})}),(0,i.jsx)("div",{children:(0,i.jsx)("small",{className:"text-gray-800",children:e})})]},t)})})]})})}function B(e){let{handleMediaIndices:t}=e,[n,l]=(0,a.KO)(P),r=(0,a.b9)(U),o=(0,a.b9)(Y),d=(0,a.Dv)(Z),u=(0,a.Dv)(R),[h,x]=(0,s.useState)(0),[m,g]=(0,a.KO)(Q);function f(e){o(e),void 0!==e&&c(u,e,!1).then(e=>{g(e)})}(0,s.useEffect)(()=>{x(h+1)},[n]),(0,s.useEffect)(()=>{void 0!==n&&void 0===m&&0!==n.length&&f(n[0].id[0])},[n]);let b=async e=>{null!=e&&null!=u&&c(u,e,!0).then(e=>{g(e),r("media")})};return void 0===d?(0,i.jsx)("div",{}):(0,i.jsxs)("div",{className:"flex h-screen",children:[(0,i.jsx)("div",{className:"w-3/4",children:(0,i.jsxs)("div",{className:"",children:[null!=d.title&&(0,i.jsx)("div",{className:"",children:d.title}),null!==u&&(0,i.jsx)(v,{}),(0,i.jsx)("div",{className:"bg-white",style:{height:"calc(100vh - 80px)"},children:(0,i.jsx)(p,{revision:h,handleHover:f,handleClick:b,handleSelect:e=>{e.length>0&&t(e)}})})]})}),(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(O,{})})]})}async function E(e){return await d.Z.get("".concat(l,"/views/").concat(e)).then(e=>({config:e.data.config,data:e.data.data}))}async function F(){return await d.Z.get("".concat(l,"/uuid")).then(e=>e.data)}function S(e){let t=(0,i.jsx)(i.Fragment,{});if(null!=e.showColumn&&null!=e.media.information){let n=e.infoColumns.slice(2).indexOf(e.showColumn);t=(0,i.jsx)("div",{className:"truncate",children:(0,i.jsx)("div",{children:(0,i.jsx)("small",{children:e.media.information[n]})})})}return(0,i.jsxs)("div",{onClick:()=>e.handleClick(e.media.index),onMouseEnter:()=>e.handleHover(e.media.index),children:[(0,i.jsx)(k,{media:e.media,boundingBoxColumnIndex:null!=e.boundingBoxColumn?e.infoColumns.indexOf(e.boundingBoxColumn):void 0,displayLabel:e.showBboxLabel,columns:e.columns}),t]},"".concat(e.media.index,"-").concat(e.media.src))}var _=n(1970);function D(e){let{handleBack:t}=e;return(0,i.jsx)("div",{className:"flex cursor-pointer items-center text-xs hover:text-blue-500",onClick:()=>t(),children:(0,i.jsxs)("div",{children:[(0,i.jsx)(h.G,{icon:u.acZ,className:"pe-1 ps-1 hover:text-blue-500"}),"back"]})})}let L=(0,f.default)(async()=>await Promise.all([n.e(934),n.e(8)]).then(n.bind(n,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1});function H(e){let{mediaIndices:t}=e,n=(0,a.Dv)(R),r=(0,a.Dv)(Z),[o,c]=(0,s.useState)([]),u=null==r?void 0:r.columns,[h,x]=(0,s.useState)(0),[m,g]=(0,s.useState)(null==u?void 0:u[0]),[v,f]=(0,a.KO)(A),b=e=>{if(void 0===u||void 0===o)return[];let t=u.indexOf(e);return o.map(e=>{var n;return null===(n=e.information)||void 0===n?void 0:n[t-2]})};return((0,s.useEffect)(()=>{void 0!==t&&void 0!==o&&o.length!==t.length&&d.Z.post("".concat(l,"/views/").concat(n,"/media-metadata"),{media_ids:t}).then(e=>{c(e.data)})}),void 0===r||void 0===m||void 0===o)?(0,i.jsx)("div",{children:"Loading..."}):0===o.length?(0,i.jsx)("div",{}):(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"mt-2 rounded-s-md border border-gray-300 bg-gray-100 p-1 pe-2 ps-2 text-xs",children:"Show stats for"}),(0,i.jsx)("select",{className:"me-0 mt-2 grow rounded-e-md border border-l-0 border-gray-300 p-1 text-xs text-gray-900",onChange:e=>{g(e.target.value)},value:m,children:null==u?void 0:u.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))})]}),(0,i.jsx)("div",{style:{width:"100%"},children:(e=>{let t=b(e);if(!t.every(e=>"string"==typeof e||null==e))return(0,i.jsx)(L,{data:[{type:"histogram",x:t}],layout:{font:{size:8},margin:{l:20,r:0,b:50,t:0},height:200},config:{displayModeBar:!1},onClick:t=>{!function(e,t){let n=e[0].pointIndices,l=b(t).filter((e,t)=>n.includes(t));f([...v.filter(e=>e.column!==t),{column:t,comparison:">=",value:Math.min(...l)},{column:t,comparison:"<=",value:Math.max(...l)}])}(t.points,e)}});{let n={};t.forEach(e=>{n[e]=(n[e]||0)+1});let l=Object.entries(n).sort((e,t)=>t[1]-e[1]);return l.length>50&&(l=l.slice(0,50)),(0,i.jsx)(L,{data:[{type:"bar",x:l.map(e=>e[0]),y:l.map(e=>e[1])}],layout:{title:{text:"Top ".concat(l.length," ").concat(e),xref:"paper"},yaxis:{automargin:!0},xaxis:{automargin:!0},font:{size:8},margin:{l:20,r:20,b:0,t:30,pad:0},height:300},config:{displayModeBar:!1},onClick:t=>{!function(e,t){let n=e[0].label;f([...v.filter(e=>e.column!==t),{column:t,comparison:"=",value:n}])}(t.points,e)}})}})(m)})]})}function z(e){let{gridValues:t,setGridValues:n}=e;return(0,i.jsx)("div",{className:"flex lg:ps-2 border-b py-1 lg:py-0 border-gray-300 lg:border-b-0 lg:border-r",children:(0,i.jsxs)("div",{className:"grow flex py-2 lg:py-0",children:[(0,i.jsx)("input",{className:"",type:"checkbox",value:"",id:"flexCheckDefault",checked:t.showBboxLabel,onChange:()=>{n({...t,showBboxLabel:!t.showBboxLabel})}}),(0,i.jsx)("label",{className:"text-xs ps-2 flex items-center flex-row",htmlFor:"flexCheckDefault",children:"Show bbox label"})]})})}function W(e){return(0,i.jsxs)("div",{className:"text-xs py-2 lg:py-0.5 flex grow items-center justify-between border-r border-gray-300 pe-2",role:"group","aria-label":"Basic example",children:[(0,i.jsx)("button",{type:"button",className:0!==e.page?"hover:text-blue-500":"",onClick:()=>{e.handlePage(e.page-1)},disabled:0===e.page,children:(0,i.jsx)(h.G,{icon:u.UXu})}),(0,i.jsxs)("button",{type:"button",className:"px-1",disabled:!0,children:[e.page+1," / ",e.maxPage+1]}),(0,i.jsx)("button",{type:"button",className:"hover:text-blue-500",onClick:()=>{e.handlePage(e.page+1)},disabled:e.page===e.maxPage,children:(0,i.jsx)(h.G,{icon:u.cLY})})]})}function I(e){let{columns:t,gridValues:n,setGridValues:l}=e;return(0,i.jsxs)("select",{className:"w-full grow text-xs",onChange:e=>l({...n,showColumnValue:e.target.value}),value:n.showColumnValue,children:[(0,i.jsx)("option",{value:"",defaultValue:"",children:"Show value"}),t.slice(2).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]})}function G(e){let{columns:t,gridValues:n,handleSort:l}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("select",{name:"",className:"grow text-xs",onChange:e=>l(e.target.value,n.asc),value:n.sortBy,children:[(0,i.jsx)("option",{value:"",defaultValue:"",children:"Order by"}),t.slice(2).map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),(0,i.jsx)("button",{className:"",type:"button",onClick:()=>{l(n.sortBy,!n.asc)},children:(0,i.jsx)(h.G,{icon:n.asc?u.sHD:u.O7s})})]})}function K(e){let{back:t}=e,n=(0,a.Dv)(T),l=void 0!==n?n[n.length-1]:[],r=(0,a.Dv)(R),o=(0,a.Dv)(Z),d=(0,a.Dv)(A),x=(0,a.b9)(Q),g=(0,a.b9)(Y),f=(0,a.b9)(U),[b,p]=(0,a.KO)(X),[y,j]=(0,s.useState)(!1),[w,N]=(0,a.KO)(J);function C(e){null!=e&&null!=r&&c(r,e,!0).then(e=>{x(e),f("media")})}function k(e){g(e),void 0!==e&&c(r,e,!1).then(e=>{x(e)})}function B(e,t){void 0!==l&&void 0!==r&&m(r,l,w.page,void 0===e?w.sortBy:e,void 0===t?w.asc:t).then(e=>{p(e)})}return(0,s.useEffect)(()=>{void 0!==o&&void 0!==r&&B(void 0,void 0)},[l]),void 0===o||void 0===w?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-3/4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"grid w-full  grid-cols-1 border-b border-gray-300 pb-0 pe-2 pt-1 text-black lg:grid-cols-6\n            lg:rounded-md lg:border lg:pt-0\n                  ",children:["grid"!==o.type&&(0,i.jsx)("div",{className:"flex flex-row border-b border-gray-300 lg:border-b-0 lg:border-r",children:(0,i.jsxs)("div",{className:"flex flex-row",children:[(0,i.jsx)("div",{className:"border-r pb-1 pe-1 pt-1 flex",children:(0,i.jsx)(D,{handleBack:function(){void 0!==t&&t()}})}),(0,i.jsxs)("div",{className:"ms-2 flex items-center text-xs",children:[void 0!==l?l.length:0," ","selected"]})]})}),"grid"===o.type&&null===o.bounding_box&&(0,i.jsx)("div",{}),(0,i.jsx)("div",{id:"grid-menu-order",className:"border-b flex border-gray-300 py-2 lg:border-b-0 lg:border-r lg:px-2 lg:py-0 lg:pe-2  ",children:(0,i.jsx)(G,{columns:o.columns,gridValues:w,handleSort:function(e,t){void 0!==o&&o.columns.includes(e)&&(N({...w,sortBy:e,asc:t}),B(e,t))}})}),null!=o.bounding_box&&(0,i.jsx)(z,{gridValues:w,setGridValues:N}),(0,i.jsx)("div",{id:"grid-menu-show-column",className:"border-b border-gray-300 py-2 lg:flex lg:items-center lg:border-b-0 lg:border-r lg:px-2 lg:py-0 lg:pe-2",children:(0,i.jsx)(I,{columns:o.columns,gridValues:w,setGridValues:N})}),(0,i.jsxs)("div",{id:"grid-menu-column-n",className:"flex flex-row items-center justify-center border-b border-gray-300 py-2 text-xs lg:border-b-0 lg:border-r lg:px-2 lg:py-0",children:[(0,i.jsx)(h.G,{icon:_.pL1,className:"me-1"}),(0,i.jsx)("div",{className:"flex grow items-center justify-center",children:(0,i.jsx)("input",{type:"range",className:"w-full",min:1,max:10,value:w.numberOfColumns,onChange:e=>(function(e){let t=parseInt(e.target.value);N({...w,numberOfColumns:t})})(e)})}),(0,i.jsx)(h.G,{icon:u.DaQ,className:"ms-1"})]}),(0,i.jsxs)("div",{className:"flex-column flex cursor-pointer justify-end ps-2 text-right",children:[(0,i.jsx)(W,{handlePage:e=>{N({...w,page:e}),m(r,l,e,w.sortBy,w.asc,d).then(e=>{p(e)})},maxPage:void 0!==l?Math.floor(l.length/50):0,page:void 0===w.page?0:w.page}),(0,i.jsx)("div",{onClick:()=>j(!y),className:" ms-2 flex items-center hover:text-blue-500",children:(0,i.jsx)(h.G,{icon:u.gee,title:"Show stats"})})]})]}),(0,i.jsx)("div",{children:y&&(0,i.jsx)("div",{className:"border-b",children:(0,i.jsx)(H,{mediaIndices:l})})}),(0,i.jsx)("div",{className:"pt-1",children:(0,i.jsx)(v,{})})]}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"grid p-2 grid-cols-".concat(w.numberOfColumns&&w.numberOfColumns," gap-4"),style:{maxHeight:"calc(100vh - 80px)",overflowY:"scroll"},children:b.map(e=>(0,i.jsx)(S,{media:e,handleClick:C,handleHover:k,infoColumns:o.columns,columns:w.numberOfColumns,showColumn:w.showColumnValue,boundingBoxColumn:o.bounding_box,showBboxLabel:w.showBboxLabel},e.index))})})]}),(0,i.jsx)("div",{className:"w-1/4",children:(0,i.jsx)(O,{})})]})}var V=n(6142);function M(e){let{back:t}=e,n=(0,a.Dv)(Z),l=(0,a.Dv)(Q),[r,o]=(0,s.useState)([]),[d,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(void 0===l||void 0===n||null==n.bounding_box)return;let e=n.columns.indexOf(n.bounding_box);if(null!=l.information&&null!=e){let t=l.information[e-2];if(null==t)return;c(C(t))}},[l,n]),(0,s.useEffect)(()=>{let e=(null==l?void 0:l.height)!=null?l.height:1e3,t=[];d.length>0&&d.forEach((n,l)=>{t.push({type:"rect",x0:1*n.xmin,y0:e-1*n.ymin,x1:1*n.xmax,y1:e-1*n.ymax,line:{width:3,color:n.color?n.color:w.O[l%w.O.length]}})}),o(t)},[d,l]),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsxs)("div",{className:"w-3/4",children:[(0,i.jsx)(D,{handleBack:function(){void 0!==t&&t()}}),(0,i.jsx)("div",{className:"p-2",children:void 0!==l&&function(e){let{media:t,scaleFactor:n,shapes:l,boundingBoxes:a}=e;return(0,i.jsx)("div",{style:{height:"calc(100vh - 80px)"},children:(0,i.jsx)(V.default,{media:t,scaleFactor:n,shapes:l,boundingBoxes:a})})}({media:l,scaleFactor:1,shapes:r,boundingBoxes:d})})]}),(0,i.jsx)("div",{className:"w-1/4",children:void 0!==n&&void 0!==l&&(0,i.jsx)(O,{})})]})}(0,f.default)(Promise.resolve().then(n.bind(n,6142)),{loadableGenerated:{webpack:()=>[6142]},ssr:!1});let P=(0,r.cn)(void 0),Z=(0,r.cn)(void 0),R=(0,r.cn)("recent"),T=(0,r.cn)([]),A=(0,r.cn)([]),J=(0,r.cn)({sortBy:"",asc:!0,page:0,numberOfColumns:5,showColumnValue:void 0,showBboxLabel:!1}),Y=(0,r.cn)(void 0),U=(0,r.cn)("plot"),Q=(0,r.cn)(void 0),X=(0,r.cn)([]);function q(e){let{uuidProp:t}=e,[n,l]=(0,a.KO)(R),r=(0,a.b9)(P),o=(0,a.b9)(Z),[d,c]=(0,a.KO)(Y),[u,h]=(0,a.KO)(U),[m,g]=(0,a.KO)(T),[v,f]=(0,a.KO)(J),b=(0,a.Dv)(A);function p(e){g([...m,e]),h("grid")}return(0,s.useEffect)(()=>{"recent"===t?F().then(e=>{l(e)}):l(t)},[t]),(0,s.useEffect)(()=>{E(n).then(e=>{let{config:t,data:l}=e;r(l),o(t),"grid"===t.type&&(h("grid"),x(n,b).then(e=>{if(e){let t=[];e.forEach(e=>{t=[...t,...e.id]}),g([...m,t])}}))})},[n]),function(){switch(u){case"plot":return(0,i.jsx)(B,{handleMediaIndices:p});case"grid":return(0,i.jsx)(K,{back:()=>{g([]),f({...v,page:0}),h("plot")}});case"media":if(void 0!==d)return(0,i.jsx)(M,{mediaIndex:d,back:()=>{c(void 0),void 0!==m&&m.length>0?h("grid"):h("plot")}});return(0,i.jsx)("div",{className:"text-black",children:"Loading.."});default:return(0,i.jsx)("div",{className:"text-black",children:"Loading.."})}}()}var $=n(357);function ee(){return(0,i.jsx)(a.zt,{children:(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(q,{uuidProp:"https://clusterfun.app"===$.env.BASE_URL?"8e6e40d8-8df2-44d6-b5a3-34594c50a504":"recent"})})})}},6142:function(e,t,n){"use strict";n.r(t);var l=n(7437),i=n(7818),a=n(1613);let s=(0,i.default)(async()=>await Promise.all([n.e(934),n.e(8)]).then(n.bind(n,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1});t.default=e=>{let{media:t,scaleFactor:n,shapes:i,boundingBoxes:r}=e;return(0,l.jsx)(s,{data:[{x:[0,null!=t.width?t.width*n:1e3],y:[0,null!=t.height?t.height*n:1e3],mode:"markers",marker:{opacity:0}}],layout:{dragmode:"pan",hovermode:"closest",yaxis:{showgrid:!1,showline:!1,zeroline:!1,showticklabels:!1,range:[0,null!=t.height?t.height*n:1e3],scaleanchor:"x"},xaxis:{showgrid:!1,showline:!1,zeroline:!1,showticklabels:!1,range:[0,null!=t.width?t.width*n:1e3]},images:[{x:0,sizex:null!=t.width?t.width*n:1e3,y:null!=t.height?t.height*n:1e3,sizey:null!=t.height?t.height*n:1e3,xref:"x",yref:"y",opacity:1,layer:"below",sizing:"stretch",source:t.src}],margin:{l:0,r:0,b:0,t:0,pad:0},shapes:null!=i?i:[],annotations:r&&r.map((e,l)=>({x:e.xmin*n,y:t.height?t.height-e.xmin*n:1e3-e.xmin*n,xref:"x",yref:"y",text:e.label,align:"right",showarrow:!1,xanchor:"left",yanchor:"top",font:{color:"white"},bgcolor:a.O[l%a.O.length],bordercolor:a.O[l%a.O.length]}))},config:{modeBarButtonsToRemove:["sendDataToCloud","autoScale2d","hoverClosestCartesian","hoverCompareCartesian","lasso2d","select2d","toImage"],responsive:!0,scrollZoom:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})}},1613:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});let l=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#0000FF","#00FF00","#FF0000","#00FFFF","#FF00FF","#FFFF00","#C0C0C0","#800000"]}},function(e){e.O(0,[676,500,971,23,744],function(){return e(e.s=7947)}),_N_E=e.O()}]);